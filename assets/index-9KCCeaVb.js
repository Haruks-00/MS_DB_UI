const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-init-BK9LSD4g.js","assets/vue-BboyqEDC.js","assets/vuetify-B2tbcxZi.js"])))=>i.map(i=>d[i]);
import{B as e,l as t,s as n,T as r,j as i,J as s,n as a,e as o,k as l,K as u,L as c,M as d,m as h,h as p,b as f,o as v,N as m,I as g,z as y,t as b,O as w,F as _,P as I,r as S,D as C,Q as E,E as k,p as T,d as A,u as x,v as N,w as D,R as V,S as R,c as M,y as O,A as L,x as P,U as F,G as B,V as U,W as $,X as j,Y as z,Z as q,_ as H,$ as K,a as G,a0 as W,a1 as Q,a2 as Y,a3 as X,a4 as J,a5 as Z,a6 as ee}from"./vue-BboyqEDC.js";import{g as te,p as ne,a as re,d as ie,i as se,b as ae,c as oe,e as le,f as ue,h as ce,j as de,u as he,k as pe,l as fe,m as ve,n as me,o as ge,I as ye,q as be,r as we,S as _e,s as Ie,t as Se,v as Ce,w as Ee,x as ke,y as Te,z as Ae,A as xe,B as Ne,C as De,D as Ve,E as Re,F as Me,G as Oe,H as Le,J as Pe,K as Fe,L as Be,M as Ue,N as $e,O as je,P as ze,Q as qe,R as He,T as Ke,U as Ge,V as We,W as Qe,X as Ye,Y as Xe,Z as Je,_ as Ze,$ as et,a0 as tt,a1 as nt,a2 as rt,a3 as it,a4 as st,a5 as at,a6 as ot,a7 as lt,a8 as ut,a9 as ct,aa as dt,ab as ht,ac as pt,ad as ft,ae as vt,af as mt,ag as gt,ah as yt,ai as bt,aj as wt,ak as _t,al as It,am as St,an as Ct,ao as Et,ap as kt,aq as Tt,ar as At,as as xt,at as Nt,au as Dt,av as Vt,aw as Rt,ax as Mt}from"./vuetify-B2tbcxZi.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ot={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Lt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ft;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bt=function(e){return function(e){const t=Lt(e);return Pt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ut=function(e){try{return Pt.decodeString(e,!0)}catch(t){}return null};function $t(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&jt(n)&&(e[n]=$t(e[n],t[n]));return e}function jt(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,qt=()=>{try{return zt()||(()=>{if("undefined"==typeof process)return;const e=Ot.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ut(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Ht=e=>{var t,n;return null===(n=null===(t=qt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Kt=()=>{var e;return null===(e=qt())||void 0===e?void 0:e.config},Gt=e=>{var t;return null===(t=qt())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class Yt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Jt,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Yt(r,a,n)}}const Jt=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function en(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(tn(n)&&tn(s)){if(!en(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tn(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rn(e,t){const n=new sn(e,t);return n.subscribe.bind(n)}class sn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=an),void 0===r.error&&(r.error=an),void 0===r.complete&&(r.complete=an);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e){return e&&e._delegate?e._delegate:e}class ln{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Wt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:un})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=un){return this.instances.has(e)}getOptions(e=un){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===un?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=un){return this.component?this.component.multipleInstances?e:un:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class dn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=[];var pn,fn;(fn=pn||(pn={}))[fn.DEBUG=0]="DEBUG",fn[fn.VERBOSE=1]="VERBOSE",fn[fn.INFO=2]="INFO",fn[fn.WARN=3]="WARN",fn[fn.ERROR=4]="ERROR",fn[fn.SILENT=5]="SILENT";const vn={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},mn=pn.INFO,gn={[pn.DEBUG]:"log",[pn.VERBOSE]:"log",[pn.INFO]:"info",[pn.WARN]:"warn",[pn.ERROR]:"error"},yn=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!gn[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bn{constructor(e){this.name=e,this._logLevel=mn,this._logHandler=yn,this._userLogHandler=null,hn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?vn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pn.DEBUG,...e),this._logHandler(this,pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pn.VERBOSE,...e),this._logHandler(this,pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pn.INFO,...e),this._logHandler(this,pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pn.WARN,...e),this._logHandler(this,pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pn.ERROR,...e),this._logHandler(this,pn.ERROR,...e)}}let wn,_n;const In=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,En=new WeakMap,kn=new WeakMap;let Tn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Sn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function An(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_n||(_n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Dn(this),t),Nn(In.get(this))}:function(...t){return Nn(e.apply(Dn(this),t))}:function(t,...n){const r=e.call(Dn(this),t,...n);return Cn.set(r,t.sort?t.sort():[t]),Nn(r)}}function xn(e){return"function"==typeof e?An(e):(e instanceof IDBTransaction&&function(e){if(Sn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Sn.set(e,t)}(e),t=e,(wn||(wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Tn):e);var t}function Nn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Nn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&In.set(t,e)}).catch(()=>{}),kn.set(t,e),t}(e);if(En.has(e))return En.get(e);const t=xn(e);return t!==e&&(En.set(e,t),kn.set(t,e)),t}const Dn=e=>kn.get(e);const Vn=["get","getKey","getAll","getAllKeys","count"],Rn=["put","add","delete","clear"],Mn=new Map;function On(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Mn.get(t))return Mn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Rn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vn.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return Mn.set(t,s),s}Tn=(e=>({...e,get:(t,n,r)=>On(t,n)||e.get(t,n,r),has:(t,n)=>!!On(t,n)||e.has(t,n)}))(Tn);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ln{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Pn="@firebase/app",Fn="0.9.13",Bn=new bn("@firebase/app"),Un="@firebase/app-compat",$n="@firebase/analytics-compat",jn="@firebase/analytics",zn="@firebase/app-check-compat",qn="@firebase/app-check",Hn="@firebase/auth",Kn="@firebase/auth-compat",Gn="@firebase/database",Wn="@firebase/database-compat",Qn="@firebase/functions",Yn="@firebase/functions-compat",Xn="@firebase/installations",Jn="@firebase/installations-compat",Zn="@firebase/messaging",er="@firebase/messaging-compat",tr="@firebase/performance",nr="@firebase/performance-compat",rr="@firebase/remote-config",ir="@firebase/remote-config-compat",sr="@firebase/storage",ar="@firebase/storage-compat",or="@firebase/firestore",lr="@firebase/firestore-compat",ur="firebase",cr="[DEFAULT]",dr={[Pn]:"fire-core",[Un]:"fire-core-compat",[jn]:"fire-analytics",[$n]:"fire-analytics-compat",[qn]:"fire-app-check",[zn]:"fire-app-check-compat",[Hn]:"fire-auth",[Kn]:"fire-auth-compat",[Gn]:"fire-rtdb",[Wn]:"fire-rtdb-compat",[Qn]:"fire-fn",[Yn]:"fire-fn-compat",[Xn]:"fire-iid",[Jn]:"fire-iid-compat",[Zn]:"fire-fcm",[er]:"fire-fcm-compat",[tr]:"fire-perf",[nr]:"fire-perf-compat",[rr]:"fire-rc",[ir]:"fire-rc-compat",[sr]:"fire-gcs",[ar]:"fire-gcs-compat",[or]:"fire-fst",[lr]:"fire-fst-compat","fire-js":"fire-js",[ur]:"fire-js-all"},hr=new Map,pr=new Map;function fr(e,t){try{e.container.addComponent(t)}catch(n){Bn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vr(e,t){e.container.addOrOverwriteComponent(t)}function mr(e){const t=e.name;if(pr.has(t))return Bn.debug(`There were multiple attempts to register component ${t}.`),!1;pr.set(t,e);for(const n of hr.values())fr(n,e);return!0}function gr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yr=new Xt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let br=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="9.23.0";function _r(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:cr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw yr.create("bad-app-name",{appName:String(i)});if(n||(n=Kt()),!n)throw yr.create("no-options");const s=hr.get(i);if(s){if(en(n,s.options)&&en(r,s.config))return s;throw yr.create("duplicate-app",{appName:i})}const a=new dn(i);for(const l of pr.values())a.addComponent(l);const o=new br(n,r,a);return hr.set(i,o),o}function Ir(e=cr){const t=hr.get(e);if(!t&&e===cr&&Kt())return _r();if(!t)throw yr.create("no-app",{appName:e});return t}async function Sr(e){const t=e.name;hr.has(t)&&(hr.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Cr(e,t,n){var r;let i=null!==(r=dr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Bn.warn(e.join(" "))}mr(new ln(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function Er(e,t){if(null!==e&&"function"!=typeof e)throw yr.create("invalid-log-argument");!function(e,t){for(const n of hn){let r=null;t&&t.level&&(r=vn[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:pn[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function kr(e){var t;t=e,hn.forEach(e=>{e.setLogLevel(t)})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="firebase-heartbeat-store";let Ar=null;function xr(){return Ar||(Ar=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=Nn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Nn(a.result),e.oldVersion,e.newVersion,Nn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Tr)}}).catch(e=>{throw yr.create("idb-open",{originalErrorMessage:e.message})})),Ar}async function Nr(e,t){try{const n=(await xr()).transaction(Tr,"readwrite"),r=n.objectStore(Tr);await r.put(t,Dr(e)),await n.done}catch(n){if(n instanceof Yt)Bn.warn(n.message);else{const e=yr.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Bn.warn(e.message)}}}function Dr(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Mr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Rr();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Rr(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Or(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Or(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Bt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Rr(){return(new Date).toISOString().substring(0,10)}class Mr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await xr();return await t.transaction(Tr).objectStore(Tr).get(Dr(e))}catch(t){if(t instanceof Yt)Bn.warn(t.message);else{const e=yr.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Bn.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Or(e){return Bt(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr;Lr="",mr(new ln("platform-logger",e=>new Ln(e),"PRIVATE")),mr(new ln("heartbeat",e=>new Vr(e),"PRIVATE")),Cr(Pn,Fn,Lr),Cr(Pn,Fn,"esm2017"),Cr("fire-js","");const Pr=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Yt,SDK_VERSION:wr,_DEFAULT_ENTRY_NAME:cr,_addComponent:fr,_addOrOverwriteComponent:vr,_apps:hr,_clearComponents:function(){pr.clear()},_components:pr,_getProvider:gr,_registerComponent:mr,_removeServiceInstance:function(e,t,n=cr){gr(e,t).clearInstance(n)},deleteApp:Sr,getApp:Ir,getApps:function(){return Array.from(hr.values())},initializeApp:_r,onLog:Er,registerVersion:Cr,setLogLevel:kr},Symbol.toStringTag,{value:"Module"}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){this._delegate=e,this.firebase=t,fr(e,new ln("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Sr(this._delegate)))}_getService(e,t=cr){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=cr){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){fr(this._delegate,e)}_addOrOverwriteComponent(e){vr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Xt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ur=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(r,i={}){const s=_r(r,i);if(Zt(t,s.name))return t[s.name];const a=new e(s,n);return t[s.name]=a,a},app:r,registerVersion:Cr,setLogLevel:kr,onLog:Er,apps:null,SDK_VERSION:wr,INTERNAL:{registerComponent:function(t){const i=t.name,s=i.replace("-compat","");if(mr(t)&&"PUBLIC"===t.type){const a=(e=r())=>{if("function"!=typeof e[s])throw Br.create("invalid-app-argument",{appName:i});return e[s]()};void 0!==t.serviceProps&&$t(a,t.serviceProps),n[s]=a,e.prototype[s]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Pr}};function r(e){if(!Zt(t,e=e||cr))throw Br.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,n}(Fr);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){$t(t,e)},createSubscribe:rn,ErrorFactory:Xt,deepExtend:$t}),t}(),$r=new bn("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){$r.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$r.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const jr=Ur;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Cr("@firebase/app-compat","0.2.13",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
jr.registerVersion("firebase","9.23.0","app-compat");const zr={},qr=async()=>{const{getFirebaseInstances:e}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/MS_DB_UI/"+e}(e))in zr)return;zr[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})}(async()=>{const{getFirebaseInstances:e}=await import("./firebase-init-BK9LSD4g.js");return{getFirebaseInstances:e}},__vite__mapDeps([0,1,2]));return e()},Hr=async()=>{const{db:e}=await qr();return e},Kr=async()=>{const{auth:e}=await qr();return e},Gr=async()=>{const e=await Kr(),t=new jr.auth.GoogleAuthProvider;return e.signInWithPopup(t).catch(e=>{throw e})},Wr=async()=>(await Kr()).signOut(),Qr=async e=>(await Kr()).onAuthStateChanged(e);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Cr("firebase","9.23.0","app");var Yr,Xr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jr=Jr||{},Zr=Xr||self;function ei(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ti(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ni(e,t,n){return e.call.apply(e.bind,arguments)}function ri(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ii(e,t,n){return(ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ni:ri).apply(null,arguments)}function si(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ai(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function oi(){this.s=this.s,this.o=this.o}oi.prototype.s=!1,oi.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},oi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const li=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ui(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ci(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ei(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function di(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var hi=function(){if(!Zr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zr.addEventListener("test",()=>{},t),Zr.removeEventListener("test",()=>{},t)}catch(n){}return e}();function pi(e){return/^[\s\xa0]*$/.test(e)}function fi(){var e=Zr.navigator;return e&&(e=e.userAgent)?e:""}function vi(e){return-1!=fi().indexOf(e)}function mi(e){return mi[" "](e),e}mi[" "]=function(){};var gi,yi,bi,wi=vi("Opera"),_i=vi("Trident")||vi("MSIE"),Ii=vi("Edge"),Si=Ii||_i,Ci=vi("Gecko")&&!(-1!=fi().toLowerCase().indexOf("webkit")&&!vi("Edge"))&&!(vi("Trident")||vi("MSIE"))&&!vi("Edge"),Ei=-1!=fi().toLowerCase().indexOf("webkit")&&!vi("Edge");function ki(){var e=Zr.document;return e?e.documentMode:void 0}e:{var Ti="",Ai=(yi=fi(),Ci?/rv:([^\);]+)(\)|;)/.exec(yi):Ii?/Edge\/([\d\.]+)/.exec(yi):_i?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yi):Ei?/WebKit\/(\S+)/.exec(yi):wi?/(?:Version)[ \/]?(\S+)/.exec(yi):void 0);if(Ai&&(Ti=Ai?Ai[1]:""),_i){var xi=ki();if(null!=xi&&xi>parseFloat(Ti)){gi=String(xi);break e}}gi=Ti}if(Zr.document&&_i){var Ni=ki();bi=Ni||(parseInt(gi,10)||void 0)}else bi=void 0;var Di=bi;function Vi(e,t){if(di.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ci){e:{try{mi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ri[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vi.$.h.call(this)}}ai(Vi,di);var Ri={2:"touch",3:"pen",4:"mouse"};Vi.prototype.h=function(){Vi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Mi="closure_listenable_"+(1e6*Math.random()|0),Oi=0;function Li(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Oi,this.fa=this.ia=!1}function Pi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Fi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Bi(e){const t={};for(const n in e)t[n]=e[n];return t}const Ui="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $i(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Ui.length;t++)n=Ui[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ji(e){this.src=e,this.g={},this.h=0}function zi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=li(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Pi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function qi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}ji.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=qi(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Li(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Hi="closure_lm_"+(1e6*Math.random()|0),Ki={};function Gi(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Gi(e,t[s],n,r,i);return null}return n=es(n),e&&e[Mi]?e.O(t,n,!!ti(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=ti(i)?!!i.capture:!!i,o=Ji(e);if(o||(e[Hi]=o=new ji(e)),n=o.add(t,n,r,a,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Xi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hi||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function Wi(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Wi(e,t[s],n,r,i);else r=ti(r)?!!r.capture:!!r,n=es(n),e&&e[Mi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=qi(s=e.g[t],n,r,i))&&(Pi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ji(e))&&(t=e.g[t.toString()],e=-1,t&&(e=qi(t,n,r,i)),(n=-1<e?t[e]:null)&&Qi(n))}function Qi(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Mi])zi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ji(t))?(zi(n,e),0==n.h&&(n.src=null,t[Hi]=null)):Pi(e)}}}function Yi(e){return e in Ki?Ki[e]:Ki[e]="on"+e}function Xi(e,t){if(e.fa)e=!0;else{t=new Vi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Qi(e),e=n.call(r,t)}return e}function Ji(e){return(e=e[Hi])instanceof ji?e:null}var Zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function es(e){return"function"==typeof e?e:(e[Zi]||(e[Zi]=function(t){return e.handleEvent(t)}),e[Zi])}function ts(){oi.call(this),this.i=new ji(this),this.S=this,this.J=null}function ns(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new di(t,e);else if(t instanceof di)t.target=t.target||e;else{var i=t;$i(t=new di(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=rs(a,r,!0,t)&&i}if(i=rs(a=t.g=e,r,!0,t)&&i,i=rs(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=rs(a=t.g=n[s],r,!1,t)&&i}function rs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&zi(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}ai(ts,oi),ts.prototype[Mi]=!0,ts.prototype.removeEventListener=function(e,t,n,r){Wi(this,e,t,n,r)},ts.prototype.N=function(){if(ts.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pi(n[r]);delete t.g[e],t.h--}}this.J=null},ts.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ts.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var is=Zr.JSON.stringify;function ss(){var e=hs;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var as=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new os,e=>e.reset());class os{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ls(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function us(e){Zr.setTimeout(()=>{throw e},0)}let cs,ds=!1,hs=new class{constructor(){this.h=this.g=null}add(e,t){const n=as.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ps=()=>{const e=Zr.Promise.resolve(void 0);cs=()=>{e.then(fs)}};var fs=()=>{for(var e;e=ss();){try{e.h.call(e.g)}catch(n){us(n)}var t=as;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ds=!1};function vs(e,t){ts.call(this),this.h=e||1,this.g=t||Zr,this.j=ii(this.qb,this),this.l=Date.now()}function ms(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function gs(e,t,n){if("function"==typeof e)n&&(e=ii(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ii(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zr.setTimeout(e,t||0)}function ys(e){e.g=gs(()=>{e.g=null,e.i&&(e.i=!1,ys(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ai(vs,ts),(Yr=vs.prototype).ga=!1,Yr.T=null,Yr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ns(this,"tick"),this.ga&&(ms(this),this.start()))}},Yr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yr.N=function(){vs.$.N.call(this),ms(this),delete this.g};class bs extends oi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ys(this)}N(){super.N(),this.g&&(Zr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(e){oi.call(this),this.h=e,this.g={}}ai(ws,oi);var _s=[];function Is(e,t,n,r){Array.isArray(n)||(n&&(_s[0]=n.toString()),n=_s);for(var i=0;i<n.length;i++){var s=Gi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ss(e){Fi(e.g,function(e,t){this.g.hasOwnProperty(t)&&Qi(e)},e),e.g={}}function Cs(){this.g=!0}function Es(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return is(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ws.prototype.N=function(){ws.$.N.call(this),Ss(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cs.prototype.Ea=function(){this.g=!1},Cs.prototype.info=function(){};var ks={},Ts=null;function As(){return Ts=Ts||new ts}function xs(e){di.call(this,ks.Ta,e)}function Ns(e){const t=As();ns(t,new xs(t))}function Ds(e,t){di.call(this,ks.STAT_EVENT,e),this.stat=t}function Vs(e){const t=As();ns(t,new Ds(t,e))}function Rs(e,t){di.call(this,ks.Ua,e),this.size=t}function Ms(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Zr.setTimeout(function(){e()},t)}ks.Ta="serverreachability",ai(xs,di),ks.STAT_EVENT="statevent",ai(Ds,di),ks.Ua="timingevent",ai(Rs,di);var Os={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ls={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ps(){}function Fs(e){return e.h||(e.h=e.i())}function Bs(){}Ps.prototype.h=null;var Us,$s={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function js(){di.call(this,"d")}function zs(){di.call(this,"c")}function qs(){}function Hs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ws(this),this.P=Gs,e=Si?125:void 0,this.V=new vs(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}ai(js,di),ai(zs,di),ai(qs,Ps),qs.prototype.g=function(){return new XMLHttpRequest},qs.prototype.i=function(){return{}},Us=new qs;var Gs=45e3,Ws={},Qs={};function Ys(e,t,n){e.L=1,e.v=va(ca(t)),e.s=n,e.S=!0,Xs(e,null)}function Xs(e,t){e.G=Date.now(),ta(e),e.A=ca(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Aa(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ks,e.g=xo(e.l,n?t:null,!e.s),0<e.O&&(e.M=new bs(ii(e.Pa,e,e.g),e.O)),Is(e.U,e.g,"readystatechange",e.nb),t=e.I?Bi(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ns(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");a=2<=d.length&&"type"==d[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Js(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Zs(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ea(e,n),r==Qs){4==t&&(e.o=4,Vs(14),i=!1),Es(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ws){e.o=4,Vs(15),Es(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Es(e.j,e.m,r,null),aa(e,r)}Js(e)&&r!=Qs&&r!=Ws&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),_o(t),t.M=!0,Vs(11))):(Es(e.j,e.m,n,"[Invalid Chunked Response]"),sa(e),ia(e))}function ea(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qs:(n=Number(t.substring(n,r)),isNaN(n)?Ws:(r+=1)+n>t.length?Qs:(t=t.slice(r,r+n),e.C=r+n,t))}function ta(e){e.Y=Date.now()+e.P,na(e,e.P)}function na(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ms(ii(e.lb,e),t)}function ra(e){e.B&&(Zr.clearTimeout(e.B),e.B=null)}function ia(e){0==e.l.H||e.J||Co(e.l,e)}function sa(e){ra(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ms(e.V),Ss(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function aa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Oa(n.i,e)))if(!e.K&&Oa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;So(n),po(n)}wo(n),Vs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ms(ii(n.ib,n),6e3));if(1>=Ma(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else ko(n,11)}else if((e.K||n.g==e)&&So(n),!pi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(La(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,fa(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Ao(r,r.J?r.pa:null,r.Y),a.K){Pa(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(ra(o),ta(o)),r.g=a}else bo(r);0<n.j.length&&vo(n)}else"stop"!=u[0]&&"close"!=u[0]||ko(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ko(n,7):ho(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ns()}catch(u){}}function oa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ei(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(ei(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(ei(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Yr=Hs.prototype).setTimeout=function(e){this.P=e},Yr.nb=function(e){e=e.target;const t=this.M;t&&3==so(e)?t.l():this.Pa(e)},Yr.Pa=function(e){try{if(e==this.g)e:{const c=so(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Si||this.g&&(this.h.h||this.g.ja()||ao(this.g)))){this.J||4!=c||7==t||Ns(),ra(this);var n=this.g.da();this.ca=n;t:if(Js(this)){var r=ao(this.g);e="";var i=r.length,s=4==so(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){sa(this),ia(this);var a="";break t}this.h.i=new Zr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pi(o)){var u=o;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Vs(12),sa(this),ia(this);break e}Es(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,n)}this.S?(Zs(this,c,a),Si&&this.i&&3==c&&(Is(this.U,this.V,"tick",this.mb),this.V.start())):(Es(this.j,this.m,a,null),aa(this,a)),4==c&&sa(this),this.i&&!this.J&&(4==c?Co(this.l,this):(this.i=!1,ta(this)))}else(function(e){const t={};e=(e.g&&2<=so(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(pi(e[r]))continue;var n=ls(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,Vs(12)):(this.o=0,Vs(13)),sa(this),ia(this)}}}catch(c){}},Yr.mb=function(){if(this.g){var e=so(this.g),t=this.g.ja();this.C<t.length&&(ra(this),Zs(this,e,t),this.i&&4!=e&&ta(this))}},Yr.cancel=function(){this.J=!0,sa(this)},Yr.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Ns(),Vs(17)),sa(this),this.o=2,ia(this)):na(this,this.Y-e)};var la=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ua(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ua){this.h=e.h,da(this,e.j),this.s=e.s,this.g=e.g,ha(this,e.m),this.l=e.l;var t=e.i,n=new Ca;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pa(this,n),this.o=e.o}else e&&(t=String(e).match(la))?(this.h=!1,da(this,t[1]||"",!0),this.s=ma(t[2]||""),this.g=ma(t[3]||"",!0),ha(this,t[4]),this.l=ma(t[5]||"",!0),pa(this,t[6]||"",!0),this.o=ma(t[7]||"")):(this.h=!1,this.i=new Ca(null,this.h))}function ca(e){return new ua(e)}function da(e,t,n){e.j=n?ma(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ha(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pa(e,t,n){t instanceof Ca?(e.i=t,function(e,t){t&&!e.j&&(Ea(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(ka(this,t),Aa(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ga(t,Ia)),e.i=new Ca(t,e.h))}function fa(e,t,n){e.i.set(t,n)}function va(e){return fa(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ma(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ga(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ya),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ya(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ua.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ga(t,ba,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ga(t,ba,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ga(n,"/"==n.charAt(0)?_a:wa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ga(n,Sa)),e.join("")};var ba=/[#\/\?@]/g,wa=/[#\?:]/g,_a=/[#\?]/g,Ia=/[#\?@]/g,Sa=/#/g;function Ca(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ea(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ka(e,t){Ea(e),t=xa(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ta(e,t){return Ea(e),t=xa(e,t),e.g.has(t)}function Aa(e,t,n){ka(e,t),0<n.length&&(e.i=null,e.g.set(xa(e,t),ui(n)),e.h+=n.length)}function xa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Yr=Ca.prototype).add=function(e,t){Ea(this),this.i=null,e=xa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Yr.forEach=function(e,t){Ea(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Yr.ta=function(){Ea(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Yr.Z=function(e){Ea(this);let t=[];if("string"==typeof e)Ta(this,e)&&(t=t.concat(this.g.get(xa(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Yr.set=function(e,t){return Ea(this),this.i=null,Ta(this,e=xa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Yr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Yr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var Na=class{constructor(e,t){this.g=e,this.map=t}};function Da(e){this.l=e||Va,Zr.PerformanceNavigationTiming?e=0<(e=Zr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zr.g&&Zr.g.Ka&&Zr.g.Ka()&&Zr.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Va=10;function Ra(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ma(e){return e.h?1:e.g?e.g.size:0}function Oa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function La(e,t){e.g?e.g.add(t):e.h=t}function Pa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Fa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ui(e.i)}Da.prototype.cancel=function(){if(this.i=Fa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ba=class{stringify(e){return Zr.JSON.stringify(e,void 0)}parse(e){return Zr.JSON.parse(e,void 0)}};function Ua(){this.g=new Ba}function $a(e,t,n){const r=n||"";try{oa(e,function(e,n){let i=e;ti(e)&&(i=is(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ja(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function za(e){this.l=e.fc||null,this.j=e.ob||!1}function qa(e,t){ts.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ha,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ai(za,Ps),za.prototype.g=function(){return new qa(this.l,this.j)},za.prototype.i=function(e){return function(){return e}}({}),ai(qa,ts);var Ha=0;function Ka(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ga(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wa(e)}function Wa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Yr=qa.prototype).open=function(e,t){if(this.readyState!=Ha)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wa(this)},Yr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Yr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ga(this)),this.readyState=Ha},Yr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Zr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ka(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Yr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ga(this):Wa(this),3==this.readyState&&Ka(this)}},Yr.Za=function(e){this.g&&(this.response=this.responseText=e,Ga(this))},Yr.Ya=function(e){this.g&&(this.response=e,Ga(this))},Yr.ka=function(){this.g&&Ga(this)},Yr.setRequestHeader=function(e,t){this.v.append(e,t)},Yr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Yr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qa=Zr.JSON.parse;function Ya(e){ts.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Xa,this.L=this.M=!1}ai(Ya,ts);var Xa="",Ja=/^https?$/i,Za=["POST","PUT"];function eo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,to(e),ro(e)}function to(e){e.F||(e.F=!0,ns(e,"complete"),ns(e,"error"))}function no(e){if(e.h&&void 0!==Jr&&(!e.C[1]||4!=so(e)||2!=e.da()))if(e.v&&4==so(e))gs(e.La,0,e);else if(ns(e,"readystatechange"),4==so(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(la)[1]||null;!i&&Zr.self&&Zr.self.location&&(i=Zr.self.location.protocol.slice(0,-1)),r=!Ja.test(i?i.toLowerCase():"")}n=r}if(n)ns(e,"complete"),ns(e,"success");else{e.m=6;try{var s=2<so(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",to(e)}}finally{ro(e)}}}function ro(e,t){if(e.g){io(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ns(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function io(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zr.clearTimeout(e.A),e.A=null)}function so(e){return e.g?e.g.readyState:0}function ao(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Xa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function oo(e){let t="";return Fi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function lo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oo(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):fa(e,t,n))}function uo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function co(e){this.Ga=0,this.j=[],this.l=new Cs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=uo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=uo("baseRetryDelayMs",5e3,e),this.hb=uo("retryDelaySeedMs",1e4,e),this.eb=uo("forwardChannelMaxRetries",2,e),this.xa=uo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Da(e&&e.concurrentRequestLimit),this.Ja=new Ua,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ho(e){if(fo(e),3==e.H){var t=e.W++,n=ca(e.I);if(fa(n,"SID",e.K),fa(n,"RID",t),fa(n,"TYPE","terminate"),go(e,n),(t=new Hs(e,e.l,t)).L=2,t.v=va(ca(n)),n=!1,Zr.navigator&&Zr.navigator.sendBeacon)try{n=Zr.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Zr.Image&&((new Image).src=t.v,n=!0),n||(t.g=xo(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ta(t)}To(e)}function po(e){e.g&&(_o(e),e.g.cancel(),e.g=null)}function fo(e){po(e),e.u&&(Zr.clearTimeout(e.u),e.u=null),So(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Zr.clearTimeout(e.m),e.m=null)}function vo(e){if(!Ra(e.i)&&!e.m){e.m=!0;var t=e.Na;cs||ps(),ds||(cs(),ds=!0),hs.add(t,e),e.C=0}}function mo(e,t){var n;n=t?t.m:e.W++;const r=ca(e.I);fa(r,"SID",e.K),fa(r,"RID",n),fa(r,"AID",e.V),go(e,r),e.o&&e.s&&lo(r,e.o,e.s),n=new Hs(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),La(e.i,n),Ys(n,r,t)}function go(e,t){e.na&&Fi(e.na,function(e,n){fa(t,n,e)}),e.h&&oa({},function(e,n){fa(t,n,e)})}function yo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ii(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{$a(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function bo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;cs||ps(),ds||(cs(),ds=!0),hs.add(t,e),e.A=0}}function wo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ms(ii(e.Ma,e),Eo(e,e.A)),e.A++,!0)}function _o(e){null!=e.B&&(Zr.clearTimeout(e.B),e.B=null)}function Io(e){e.g=new Hs(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ca(e.wa);fa(t,"RID","rpc"),fa(t,"SID",e.K),fa(t,"AID",e.V),fa(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&fa(t,"TO",e.qa),fa(t,"TYPE","xmlhttp"),go(e,t),e.o&&e.s&&lo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=va(ca(t)),n.s=null,n.S=!0,Xs(n,e)}function So(e){null!=e.v&&(Zr.clearTimeout(e.v),e.v=null)}function Co(e,t){var n=null;if(e.g==t){So(e),_o(e),e.g=null;var r=2}else{if(!Oa(e.i,t))return;n=t.F,Pa(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ns(r=As(),new Rs(r,n)),vo(e)}else bo(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ma(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Ms(ii(e.Na,e,t),Eo(e,e.C)),e.C++,0)))}(e,t)||2==r&&wo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ko(e,5);break;case 4:ko(e,10);break;case 3:ko(e,6);break;default:ko(e,2)}}function Eo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ko(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ii(e.pb,e);n||(n=new ua("//www.google.com/images/cleardot.gif"),Zr.location&&"http"==Zr.location.protocol||da(n,"https"),va(n)),function(e,t){const n=new Cs;if(Zr.Image){const r=new Image;r.onload=si(ja,n,r,"TestLoadImage: loaded",!0,t),r.onerror=si(ja,n,r,"TestLoadImage: error",!1,t),r.onabort=si(ja,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=si(ja,n,r,"TestLoadImage: timeout",!1,t),Zr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vs(2);e.H=0,e.h&&e.h.za(t),To(e),fo(e)}function To(e){if(e.H=0,e.ma=[],e.h){const t=Fa(e.i);0==t.length&&0==e.j.length||(ci(e.ma,t),ci(e.ma,e.j),e.i.i.length=0,ui(e.j),e.j.length=0),e.h.ya()}}function Ao(e,t,n){var r=n instanceof ua?ca(n):new ua(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ha(r,r.m);else{var i=Zr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ua(null);r&&da(s,r),t&&(s.g=t),i&&ha(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&fa(r,n,t),fa(r,"VER",e.ra),go(e,r),r}function xo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ya(new za({ob:!0})):new Ya(e.va)).Oa(e.J),t}function No(){}function Do(){if(_i&&!(10<=Number(Di)))throw Error("Environmental error: no available transport.")}function Vo(e,t){ts.call(this),this.g=new co(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!pi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Oo(this)}function Ro(e){js.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Mo(){zs.call(this),this.status=1}function Oo(e){this.g=e}function Lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Po(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Fo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Yr=Ya.prototype).Oa=function(e){this.M=e},Yr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Us.g(),this.C=this.u?Fs(this.u):Fs(Us),this.g.onreadystatechange=ii(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void eo(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=Zr.FormData&&e instanceof Zr.FormData,!(0<=li(Za,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{io(this),0<this.B&&((this.L=function(e){return _i&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.ua,this)):this.A=gs(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){eo(this,s)}},Yr.ua=function(){void 0!==Jr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ns(this,"timeout"),this.abort(8))},Yr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ns(this,"complete"),ns(this,"abort"),ro(this))},Yr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ro(this,!0)),Ya.$.N.call(this)},Yr.La=function(){this.s||(this.G||this.v||this.l?no(this):this.kb())},Yr.kb=function(){no(this)},Yr.isActive=function(){return!!this.g},Yr.da=function(){try{return 2<so(this)?this.g.status:-1}catch(yi){return-1}},Yr.ja=function(){try{return this.g?this.g.responseText:""}catch(yi){return""}},Yr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qa(t)}},Yr.Ia=function(){return this.m},Yr.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Yr=co.prototype).ra=8,Yr.H=1,Yr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Hs(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Bi(s),$i(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=yo(this,i,t),fa(n=ca(this.I),"RID",e),fa(n,"CVER",22),this.F&&fa(n,"X-HTTP-Session-Id",this.F),go(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(oo(s)))+"&"+t:this.o&&lo(n,this.o,s)),La(this.i,i),this.bb&&fa(n,"TYPE","init"),this.P?(fa(n,"$req",t),fa(n,"SID","null"),i.aa=!0,Ys(i,n,null)):Ys(i,n,t),this.H=2}}else 3==this.H&&(e?mo(this,e):0==this.j.length||Ra(this.i)||mo(this))},Yr.Ma=function(){if(this.u=null,Io(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ms(ii(this.jb,this),e)}},Yr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vs(10),po(this),Io(this))},Yr.ib=function(){null!=this.v&&(this.v=null,po(this),wo(this),Vs(19))},Yr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Vs(2)):(this.l.info("Failed to ping google.com"),Vs(1))},Yr.isActive=function(){return!!this.h&&this.h.isActive(this)},(Yr=No.prototype).Ba=function(){},Yr.Aa=function(){},Yr.za=function(){},Yr.ya=function(){},Yr.isActive=function(){return!0},Yr.Va=function(){},Do.prototype.g=function(e,t){return new Vo(e,t)},ai(Vo,ts),Vo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Vs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ao(e,null,e.Y),vo(e)},Vo.prototype.close=function(){ho(this.g)},Vo.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=is(e),e=n);t.j.push(new Na(t.fb++,e)),3==t.H&&vo(t)},Vo.prototype.N=function(){this.g.h=null,delete this.j,ho(this.g),delete this.g,Vo.$.N.call(this)},ai(Ro,js),ai(Mo,zs),ai(Oo,No),Oo.prototype.Ba=function(){ns(this.g,"a")},Oo.prototype.Aa=function(e){ns(this.g,new Ro(e))},Oo.prototype.za=function(e){ns(this.g,new Mo)},Oo.prototype.ya=function(){ns(this.g,"b")},ai(Lo,function(){this.blockSize=-1}),Lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Po(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Po(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Po(this,r),i=0;break}}this.h=i,this.i+=t},Lo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Bo={};function Uo(e){return-128<=e&&128>e?function(e,t){var n=Bo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Fo([0|e],0>e?-1:0)}):new Fo([0|e],0>e?-1:0)}function $o(e){if(isNaN(e)||!isFinite(e))return zo;if(0>e)return Wo($o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=jo;return new Fo(t,0)}var jo=4294967296,zo=Uo(0),qo=Uo(1),Ho=Uo(16777216);function Ko(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Go(e){return-1==e.h}function Wo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Fo(n,~e.h).add(qo)}function Qo(e,t){return e.add(Wo(t))}function Yo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xo(e,t){this.g=e,this.h=t}function Jo(e,t){if(Ko(t))throw Error("division by zero");if(Ko(e))return new Xo(zo,zo);if(Go(e))return t=Jo(Wo(e),t),new Xo(Wo(t.g),Wo(t.h));if(Go(t))return t=Jo(e,Wo(t)),new Xo(Wo(t.g),t.h);if(30<e.g.length){if(Go(e)||Go(t))throw Error("slowDivide_ only works with positive integers.");for(var n=qo,r=t;0>=r.X(e);)n=Zo(n),r=Zo(r);var i=el(n,1),s=el(r,1);for(r=el(r,2),n=el(n,2);!Ko(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=el(r,1),n=el(n,1)}return t=Qo(e,i.R(t)),new Xo(i,t)}for(i=zo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=$o(n)).R(t);Go(a)||0<a.X(e);)a=(s=$o(n-=r)).R(t);Ko(s)&&(s=qo),i=i.add(s),e=Qo(e,a)}return new Xo(i,e)}function Zo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Fo(n,e.h)}function el(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Fo(i,e.h)}(Yr=Fo.prototype).ea=function(){if(Go(this))return-Wo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:jo+r)*t,t*=jo}return e},Yr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ko(this))return"0";if(Go(this))return"-"+Wo(this).toString(e);for(var t=$o(Math.pow(e,6)),n=this,r="";;){var i=Jo(n,t).g,s=((0<(n=Qo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ko(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Yr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Yr.X=function(e){return Go(e=Qo(this,e))?-1:Ko(e)?0:1},Yr.abs=function(){return Go(this)?Wo(this):this},Yr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new Fo(n,-2147483648&n[n.length-1]?-1:0)},Yr.R=function(e){if(Ko(this)||Ko(e))return zo;if(Go(this))return Go(e)?Wo(this).R(Wo(e)):Wo(Wo(this).R(e));if(Go(e))return Wo(this.R(Wo(e)));if(0>this.X(Ho)&&0>e.X(Ho))return $o(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,Yo(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Yo(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,Yo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,Yo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Fo(n,0)},Yr.gb=function(e){return Jo(this,e).h},Yr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Fo(n,this.h&e.h)},Yr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Fo(n,this.h|e.h)},Yr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Fo(n,this.h^e.h)},Do.prototype.createWebChannel=Do.prototype.g,Vo.prototype.send=Vo.prototype.u,Vo.prototype.open=Vo.prototype.m,Vo.prototype.close=Vo.prototype.close,Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Ls.COMPLETE="complete",Bs.EventType=$s,$s.OPEN="a",$s.CLOSE="b",$s.ERROR="c",$s.MESSAGE="d",ts.prototype.listen=ts.prototype.O,Ya.prototype.listenOnce=Ya.prototype.P,Ya.prototype.getLastError=Ya.prototype.Sa,Ya.prototype.getLastErrorCode=Ya.prototype.Ia,Ya.prototype.getStatus=Ya.prototype.da,Ya.prototype.getResponseJson=Ya.prototype.Wa,Ya.prototype.getResponseText=Ya.prototype.ja,Ya.prototype.send=Ya.prototype.ha,Ya.prototype.setWithCredentials=Ya.prototype.Oa,Lo.prototype.digest=Lo.prototype.l,Lo.prototype.reset=Lo.prototype.reset,Lo.prototype.update=Lo.prototype.j,Fo.prototype.add=Fo.prototype.add,Fo.prototype.multiply=Fo.prototype.R,Fo.prototype.modulo=Fo.prototype.gb,Fo.prototype.compare=Fo.prototype.X,Fo.prototype.toNumber=Fo.prototype.ea,Fo.prototype.toString=Fo.prototype.toString,Fo.prototype.getBits=Fo.prototype.D,Fo.fromNumber=$o,Fo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Wo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$o(Math.pow(n,8)),i=zo,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=$o(Math.pow(n,a)),i=i.R(a).add($o(o))):i=(i=i.R(r)).add($o(o))}return i};var tl=Os,nl=Ls,rl=ks,il=10,sl=11,al=za,ol=Bs,ll=Ya,ul=Lo,cl=Fo;const dl="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hl.UNAUTHENTICATED=new hl(null),hl.GOOGLE_CREDENTIALS=new hl("google-credentials-uid"),hl.FIRST_PARTY=new hl("first-party-uid"),hl.MOCK_USER=new hl("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let pl="9.23.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new bn("@firebase/firestore");function vl(){return fl.logLevel}function ml(e,...t){if(fl.logLevel<=pn.DEBUG){const n=t.map(bl);fl.debug(`Firestore (${pl}): ${e}`,...n)}}function gl(e,...t){if(fl.logLevel<=pn.ERROR){const n=t.map(bl);fl.error(`Firestore (${pl}): ${e}`,...n)}}function yl(e,...t){if(fl.logLevel<=pn.WARN){const n=t.map(bl);fl.warn(`Firestore (${pl}): ${e}`,...n)}}function bl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(e="Unexpected state"){const t=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: `+e;throw gl(t),new Error(t)}function _l(e,t){e||wl()}function Il(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cl extends Yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hl.UNAUTHENTICATED))}shutdown(){}}class Al{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xl{constructor(e){this.t=e,this.currentUser=hl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new El;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new El,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ml("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ml("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new El)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ml("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_l("string"==typeof t.accessToken),new kl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _l(null===e||"string"==typeof e),new hl(e)}}class Nl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=hl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Dl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Nl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&ml("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,ml("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ml("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):ml("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(_l("string"==typeof e.token),this.T=e.token,new Vl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ml(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ll(e,t){return e<t?-1:e>t?1:0}function Pl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Cl(Sl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Cl(Sl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Cl(Sl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Cl(Sl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fl.fromMillis(Date.now())}static fromDate(e){return Fl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Fl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ll(this.nanoseconds,e.nanoseconds):Ll(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bl(e)}static min(){return new Bl(new Fl(0,0))}static max(){return new Bl(new Fl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t,n){void 0===t?t=0:t>e.length&&wl(),void 0===n?n=e.length-t:n>e.length-t&&wl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ul.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $l extends Ul{construct(e,t,n){return new $l(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Cl(Sl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new $l(t)}static emptyPath(){return new $l([])}}const jl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zl extends Ul{construct(e,t,n){return new zl(e,t,n)}static isValidIdentifier(e){return jl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Cl(Sl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Cl(Sl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Cl(Sl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Cl(Sl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zl(t)}static emptyPath(){return new zl([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.path=e}static fromPath(e){return new ql($l.fromString(e))}static fromName(e){return new ql($l.fromString(e).popFirst(5))}static empty(){return new ql($l.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$l.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $l.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ql(new $l(e.slice()))}}function Hl(e){return new Kl(e.readTime,e.key,-1)}class Kl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Kl(Bl.min(),ql.empty(),-1)}static max(){return new Kl(Bl.max(),ql.empty(),-1)}}function Gl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ql.comparator(e.documentKey,t.documentKey),0!==n?n:Ll(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Wl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(e){if(e.code!==Sl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;ml("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Yl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Yl?t:Yl.resolve(t)}catch(t){return Yl.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Yl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Yl.reject(t)}static resolve(e){return new Yl((t,n)=>{t(e)})}static reject(e){return new Yl((t,n)=>{n(e)})}static waitFor(e){return new Yl((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Yl.resolve(!1);for(const n of e)t=t.next(e=>e?Yl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Yl((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Yl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Xl(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Zl(e){return null==e}function eu(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ru(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jl.ct=-1;class iu{constructor(e,t){this.comparator=e,this.root=t||au.EMPTY}insert(e,t){return new iu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,au.BLACK,null,null))}remove(e){return new iu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,au.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class au{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:au.RED,this.left=null!=r?r:au.EMPTY,this.right=null!=i?i:au.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new au(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return au.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return au.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,au.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,au.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wl();if(this.right.isRed())throw wl();const e=this.left.check();if(e!==this.right.check())throw wl();return e+(this.isRed()?0:1)}}au.EMPTY=null,au.RED=!0,au.BLACK=!1,au.EMPTY=new class{constructor(){this.size=0}get key(){throw wl()}get value(){throw wl()}get color(){throw wl()}get left(){throw wl()}get right(){throw wl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new au(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ou{constructor(e){this.comparator=e,this.data=new iu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lu(this.data.getIterator())}getIteratorFrom(e){return new lu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ou))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ou(this.comparator);return t.data=e,t}}class lu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.fields=e,e.sort(zl.comparator)}static empty(){return new uu([])}unionWith(e){let t=new ou(zl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new uu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new cu("Invalid base64 string: "+t):t}}(e);return new du(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new du(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ll(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}du.EMPTY_BYTE_STRING=new du("");const hu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(e){if(_l(!!e),"string"==typeof e){let t=0;const n=hu.exec(e);if(_l(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fu(e.seconds),nanos:fu(e.nanos)}}function fu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vu(e){return"string"==typeof e?du.fromBase64String(e):du.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gu(e){const t=e.mapValue.fields.__previous_value__;return mu(t)?gu(t):t}function yu(e){const t=pu(e.mapValue.fields.__local_write_time__.timestampValue);return new Fl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u={};function Iu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mu(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:10:wl()}function Su(e,t){if(e===t)return!0;const n=Iu(e);if(n!==Iu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yu(e).isEqual(yu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pu(e.timestampValue),r=pu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,vu(e.bytesValue).isEqual(vu(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fu(e.geoPointValue.latitude)===fu(t.geoPointValue.latitude)&&fu(e.geoPointValue.longitude)===fu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fu(e.integerValue)===fu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fu(e.doubleValue),r=fu(t.doubleValue);return n===r?eu(n)===eu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pl(e.arrayValue.values||[],t.arrayValue.values||[],Su);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tu(n)!==tu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Su(n[i],r[i])))return!1;return!0}(e,t);default:return wl()}var r}function Cu(e,t){return void 0!==(e.values||[]).find(e=>Su(e,t))}function Eu(e,t){if(e===t)return 0;const n=Iu(e),r=Iu(t);if(n!==r)return Ll(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ll(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fu(e.integerValue||e.doubleValue),r=fu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ku(e.timestampValue,t.timestampValue);case 4:return ku(yu(e),yu(t));case 5:return Ll(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vu(e),r=vu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ll(n[i],r[i]);if(0!==e)return e}return Ll(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ll(fu(e.latitude),fu(t.latitude));return 0!==n?n:Ll(fu(e.longitude),fu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Eu(n[i],r[i]);if(e)return e}return Ll(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_u&&t===_u)return 0;if(e===_u)return 1;if(t===_u)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Ll(r[a],s[a]);if(0!==e)return e;const t=Eu(n[r[a]],i[s[a]]);if(0!==t)return t}return Ll(r.length,s.length)}(e.mapValue,t.mapValue);default:throw wl()}}function ku(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ll(e,t);const n=pu(e),r=pu(t),i=Ll(n.seconds,r.seconds);return 0!==i?i:Ll(n.nanos,r.nanos)}function Tu(e){return Au(e)}function Au(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?vu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ql.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Au(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Au(e.fields[i])}`;return n+"}"}(e.mapValue):wl();var t,n}function xu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Nu(e){return!!e&&"integerValue"in e}function Du(e){return!!e&&"arrayValue"in e}function Vu(e){return!!e&&"nullValue"in e}function Ru(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mu(e){return!!e&&"mapValue"in e}function Ou(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ou(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ou(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Lu{constructor(e){this.value=e}static empty(){return new Lu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(t)}setAll(e){let t=zl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ou(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Lu(Ou(this.value))}}function Pu(e){const t=[];return nu(e.fields,(e,n)=>{const r=new zl([e]);if(Mu(n)){const e=Pu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new uu(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Fu{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Fu(e,0,Bl.min(),Bl.min(),Bl.min(),Lu.empty(),0)}static newFoundDocument(e,t,n,r){return new Fu(e,1,t,Bl.min(),n,r,0)}static newNoDocument(e,t){return new Fu(e,2,t,Bl.min(),Bl.min(),Lu.empty(),0)}static newUnknownDocument(e,t){return new Fu(e,3,t,Bl.min(),Bl.min(),Lu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.position=e,this.inclusive=t}}function Uu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ql.comparator(ql.fromName(a.referenceValue),n.key):Eu(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $u(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Su(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function zu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{}class Hu extends qu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ju(e,t,n):"array-contains"===t?new nc(e,n):"in"===t?new rc(e,n):"not-in"===t?new ic(e,n):"array-contains-any"===t?new sc(e,n):new Hu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Zu(e,n):new ec(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Eu(t,this.value)):null!==t&&Iu(this.value)===Iu(t)&&this.matchesComparison(Eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ku extends qu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ku(e,t)}matches(e){return Gu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Gu(e){return"and"===e.op}function Wu(e){return function(e){for(const t of e.filters)if(t instanceof Ku)return!1;return!0}(e)&&Gu(e)}function Qu(e){if(e instanceof Hu)return e.field.canonicalString()+e.op.toString()+Tu(e.value);if(Wu(e))return e.filters.map(e=>Qu(e)).join(",");{const t=e.filters.map(e=>Qu(e)).join(",");return`${e.op}(${t})`}}function Yu(e,t){return e instanceof Hu?(n=e,(r=t)instanceof Hu&&n.op===r.op&&n.field.isEqual(r.field)&&Su(n.value,r.value)):e instanceof Ku?function(e,t){return t instanceof Ku&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Yu(n,t.filters[r]),!0)}(e,t):void wl();var n,r}function Xu(e){return e instanceof Hu?`${(t=e).field.canonicalString()} ${t.op} ${Tu(t.value)}`:e instanceof Ku?function(e){return e.op.toString()+" {"+e.getFilters().map(Xu).join(" ,")+"}"}(e):"Filter";var t}class Ju extends Hu{constructor(e,t,n){super(e,t,n),this.key=ql.fromName(n.referenceValue)}matches(e){const t=ql.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zu extends Hu{constructor(e,t){super(e,"in",t),this.keys=tc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ec extends Hu{constructor(e,t){super(e,"not-in",t),this.keys=tc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ql.fromName(e.referenceValue))}class nc extends Hu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Du(t)&&Cu(t.arrayValue,this.value)}}class rc extends Hu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cu(this.value.arrayValue,t)}}class ic extends Hu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cu(this.value.arrayValue,t)}}class sc extends Hu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Du(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Cu(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.dt=null}}function oc(e,t=null,n=[],r=[],i=null,s=null,a=null){return new ac(e,t,n,r,i,s,a)}function lc(e){const t=Il(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Qu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Zl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Tu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Tu(e)).join(",")),t.dt=e}return t.dt}function uc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$u(e.startAt,t.startAt)&&$u(e.endAt,t.endAt)}function cc(e){return ql.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function hc(e){return new dc(e)}function pc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function vc(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function mc(e){return null!==e.collectionGroup}function gc(e){const t=Il(e);if(null===t.wt){t.wt=[];const e=vc(t),n=fc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new ju(e)),t.wt.push(new ju(zl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new ju(zl.keyField(),e))}}}return t.wt}function yc(e){const t=Il(e);if(!t._t)if("F"===t.limitType)t._t=oc(t.path,t.collectionGroup,gc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of gc(t)){const t="desc"===i.dir?"asc":"desc";e.push(new ju(i.field,t))}const n=t.endAt?new Bu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bu(t.startAt.position,t.startAt.inclusive):null;t._t=oc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function bc(e,t){t.getFirstInequalityField(),vc(e);const n=e.filters.concat([t]);return new dc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wc(e,t,n){return new dc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _c(e,t){return uc(yc(e),yc(t))&&e.limitType===t.limitType}function Ic(e){return`${lc(yc(e))}|lt:${e.limitType}`}function Sc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Xu(e)).join(", ")}]`),Zl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Tu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Tu(e)).join(",")),`Target(${t})`}(yc(e))}; limitType=${e.limitType})`}function Cc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ql.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of gc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Uu(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,gc(n),r)||n.endAt&&!function(e,t,n){const r=Uu(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,gc(n),r)));var n,r}function Ec(e){return(t,n)=>{let r=!1;for(const i of gc(e)){const e=kc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function kc(e,t,n){const r=e.field.isKeyField()?ql.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Eu(r,i):wl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wl()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ru(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new iu(ql.comparator);function xc(){return Ac}const Nc=new iu(ql.comparator);function Dc(...e){let t=Nc;for(const n of e)t=t.insert(n.key,n);return t}function Vc(e){let t=Nc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Rc(){return Oc()}function Mc(){return Oc()}function Oc(){return new Tc(e=>e.toString(),(e,t)=>e.isEqual(t))}const Lc=new iu(ql.comparator),Pc=new ou(ql.comparator);function Fc(...e){let t=Pc;for(const n of e)t=t.add(n);return t}const Bc=new ou(Ll);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(t)?"-0":t}}function $c(e){return{integerValue:""+e}}function jc(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!eu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?$c(t):Uc(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function qc(e,t,n){return e instanceof Gc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&mu(t)&&(t=gu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wc?Qc(e,t):e instanceof Yc?Xc(e,t):function(e,t){const n=Kc(e,t),r=Zc(n)+Zc(e.gt);return Nu(n)&&Nu(e.gt)?$c(r):Uc(e.serializer,r)}(e,t)}function Hc(e,t,n){return e instanceof Wc?Qc(e,t):e instanceof Yc?Xc(e,t):n}function Kc(e,t){return e instanceof Jc?Nu(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}class Gc extends zc{}class Wc extends zc{constructor(e){super(),this.elements=e}}function Qc(e,t){const n=ed(t);for(const r of e.elements)n.some(e=>Su(e,r))||n.push(r);return{arrayValue:{values:n}}}class Yc extends zc{constructor(e){super(),this.elements=e}}function Xc(e,t){let n=ed(t);for(const r of e.elements)n=n.filter(e=>!Su(e,r));return{arrayValue:{values:n}}}class Jc extends zc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Zc(e){return fu(e.integerValue||e.doubleValue)}function ed(e){return Du(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.field=e,this.transform=t}}class nd{constructor(e,t){this.version=e,this.transformResults=t}}class rd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rd}static exists(e){return new rd(void 0,e)}static updateTime(e){return new rd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sd{}function ad(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new md(e.key,rd.none()):new dd(e.key,e.data,rd.none());{const n=e.data,r=Lu.empty();let i=new ou(zl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new hd(e.key,r,new uu(i.toArray()),rd.none())}}function od(e,t,n){var r;e instanceof dd?function(e,t,n){const r=e.value.clone(),i=fd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hd?function(e,t,n){if(!id(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=fd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(pd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function ld(e,t,n,r){return e instanceof dd?function(e,t,n,r){if(!id(e.precondition,t))return n;const i=e.value.clone(),s=vd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hd?function(e,t,n,r){if(!id(e.precondition,t))return n;const i=vd(e.fieldTransforms,r,t),s=t.data;return s.setAll(pd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,id(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function ud(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Kc(r.transform,e||null);null!=i&&(null===n&&(n=Lu.empty()),n.set(r.field,i))}return n||null}function cd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Pl(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Wc&&r instanceof Wc||n instanceof Yc&&r instanceof Yc?Pl(n.elements,r.elements,Su):n instanceof Jc&&r instanceof Jc?Su(n.gt,r.gt):n instanceof Gc&&r instanceof Gc);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class dd extends sd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hd extends sd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function fd(e,t,n){const r=new Map;_l(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Hc(a,o,n[i]))}return r}function vd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,qc(e,s,t))}return r}class md extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gd extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&od(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ld(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ld(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Mc();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=ad(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Bl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fc())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,(e,t)=>cd(e,t))&&Pl(this.baseMutations,e.baseMutations,(e,t)=>cd(e,t))}}class bd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_l(e.mutations.length===n.length);let r=Lc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new bd(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Id,Sd;function Cd(e){if(void 0===e)return gl("GRPC error has no .code"),Sl.UNKNOWN;switch(e){case Id.OK:return Sl.OK;case Id.CANCELLED:return Sl.CANCELLED;case Id.UNKNOWN:return Sl.UNKNOWN;case Id.DEADLINE_EXCEEDED:return Sl.DEADLINE_EXCEEDED;case Id.RESOURCE_EXHAUSTED:return Sl.RESOURCE_EXHAUSTED;case Id.INTERNAL:return Sl.INTERNAL;case Id.UNAVAILABLE:return Sl.UNAVAILABLE;case Id.UNAUTHENTICATED:return Sl.UNAUTHENTICATED;case Id.INVALID_ARGUMENT:return Sl.INVALID_ARGUMENT;case Id.NOT_FOUND:return Sl.NOT_FOUND;case Id.ALREADY_EXISTS:return Sl.ALREADY_EXISTS;case Id.PERMISSION_DENIED:return Sl.PERMISSION_DENIED;case Id.FAILED_PRECONDITION:return Sl.FAILED_PRECONDITION;case Id.ABORTED:return Sl.ABORTED;case Id.OUT_OF_RANGE:return Sl.OUT_OF_RANGE;case Id.UNIMPLEMENTED:return Sl.UNIMPLEMENTED;case Id.DATA_LOSS:return Sl.DATA_LOSS;default:return wl()}}(Sd=Id||(Id={}))[Sd.OK=0]="OK",Sd[Sd.CANCELLED=1]="CANCELLED",Sd[Sd.UNKNOWN=2]="UNKNOWN",Sd[Sd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sd[Sd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sd[Sd.NOT_FOUND=5]="NOT_FOUND",Sd[Sd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sd[Sd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sd[Sd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sd[Sd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sd[Sd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sd[Sd.ABORTED=10]="ABORTED",Sd[Sd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sd[Sd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sd[Sd.INTERNAL=13]="INTERNAL",Sd[Sd.UNAVAILABLE=14]="UNAVAILABLE",Sd[Sd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ed{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return kd}static getOrCreateInstance(){return null===kd&&(kd=new Ed),kd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let kd=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Td=new cl([4294967295,4294967295],0);function Ad(e){const t=(new TextEncoder).encode(e),n=new ul;return n.update(t),new Uint8Array(n.digest())}function xd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new cl([n,r],0),new cl([i,s],0)]}class Nd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dd(`Invalid padding: ${t}`);if(n<0)throw new Dd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Dd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Dd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=cl.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(cl.fromNumber(n)));return 1===r.compare(Td)&&(r=new cl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ad(e),[n,r]=xd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Nd(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=Ad(e),[n,r]=xd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Rd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Vd(Bl.min(),r,new iu(Ll),xc(),Fc())}}class Rd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Rd(n,t,Fc(),Fc(),Fc())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Od{constructor(e,t){this.targetId=e,this.Vt=t}}class Ld{constructor(e,t,n=du.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Pd{constructor(){this.St=0,this.Dt=Ud(),this.Ct=du.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Fc(),t=Fc(),n=Fc();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wl()}}),new Rd(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Ud()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Fd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=xc(),this.zt=Bd(),this.Wt=new iu(Ll)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:wl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(cc(s))if(0===r){const e=new ql(s.path);this.Yt(n,e,Fu.newNoDocument(e,Bl.min()))}else _l(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Ed.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,a,o,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==c?void 0:c.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=vu(i).toUint8Array()}catch(u){if(u instanceof cu)return yl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new Nd(o,s,a)}catch(u){return yl(u instanceof Dd?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&cc(i.target)){const t=new ql(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Fu.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Fc();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Vd(e,t,this.Wt,this.jt,n);return this.jt=xc(),this.zt=Bd(),this.Wt=new iu(Ll),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Pd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ou(Ll),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ml("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Pd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Bd(){return new iu(ql.comparator)}function Ud(){return new iu(ql.comparator)}const $d=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),jd=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zd=(()=>({and:"AND",or:"OR"}))();class qd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hd(e,t){return e.useProto3Json||Zl(t)?t:{value:t}}function Kd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wd(e,t){return Kd(e,t.toTimestamp())}function Qd(e){return _l(!!e),Bl.fromTimestamp(function(e){const t=pu(e);return new Fl(t.seconds,t.nanos)}(e))}function Yd(e,t){return(n=e,new $l(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Xd(e){const t=$l.fromString(e);return _l(vh(t)),t}function Jd(e,t){return Yd(e.databaseId,t.path)}function Zd(e,t){const n=Xd(t);if(n.get(1)!==e.databaseId.projectId)throw new Cl(Sl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Cl(Sl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ql(nh(n))}function eh(e,t){return Yd(e.databaseId,t)}function th(e){return new $l(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nh(e){return _l(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rh(e,t,n){return{name:Jd(e,t),fields:n.value.mapValue.fields}}function ih(e,t){return{documents:[eh(e,t.path)]}}function sh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=eh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=eh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return ph(Ku.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>{return{field:dh((t=e).field),direction:lh(t.dir)};var t})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Hd(e,t.limit);var o,l;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),n}function ah(e){let t=function(e){const t=Xd(e);return 4===t.length?$l.emptyPath():nh(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_l(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=oh(e);return t instanceof Ku&&Wu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new ju(hh((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Zl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Bu(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new dc(e,t,n,r,i,s,a,o)}(t,i,a,s,o,"F",l,u)}function oh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hh(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=hh(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hh(e.unaryFilter.field);return Hu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hh(e.unaryFilter.field);return Hu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wl()}}(e):void 0!==e.fieldFilter?(t=e,Hu.create(hh(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wl()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Ku.create(e.compositeFilter.filters.map(e=>oh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return wl()}}(e.compositeFilter.op))}(e):wl();var t}function lh(e){return $d[e]}function uh(e){return jd[e]}function ch(e){return zd[e]}function dh(e){return{fieldPath:e.canonicalString()}}function hh(e){return zl.fromServerFormat(e.fieldPath)}function ph(e){return e instanceof Hu?function(e){if("=="===e.op){if(Ru(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NAN"}};if(Vu(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ru(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NOT_NAN"}};if(Vu(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dh(e.field),op:uh(e.op),value:e.value}}}(e):e instanceof Ku?function(e){const t=e.getFilters().map(e=>ph(e));return 1===t.length?t[0]:{compositeFilter:{op:ch(e.op),filters:t}}}(e):wl()}function fh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,n,r,i=Bl.min(),s=Bl.min(),a=du.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.fe=e}}function yh(e){const t=ah({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wc(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this.rn=new wh}addToCollectionParentIndex(e,t){return this.rn.add(t),Yl.resolve()}getCollectionParents(e,t){return Yl.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Yl.resolve()}deleteFieldIndex(e,t){return Yl.resolve()}getDocumentsMatchingTarget(e,t){return Yl.resolve(null)}getIndexType(e,t){return Yl.resolve(0)}getFieldIndexes(e,t){return Yl.resolve([])}getNextCollectionGroupToUpdate(e){return Yl.resolve(null)}getMinOffset(e,t){return Yl.resolve(Kl.min())}getMinOffsetFromCollectionGroup(e,t){return Yl.resolve(Kl.min())}updateCollectionGroup(e,t,n){return Yl.resolve()}updateIndexEntries(e,t){return Yl.resolve()}}class wh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ou($l.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ou($l.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _h(0)}static Mn(){return new _h(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.changes=new Tc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Yl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ld(n.mutation,e,uu.empty(),Fl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Fc()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Fc()){const r=Rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Dc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Rc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Fc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=xc();const s=Oc(),a=Oc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof hd)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),ld(a.mutation,t,a.mutation.getFieldMask(),Fl.now())):s.set(t.key,uu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Sh(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Oc();let r=new iu((e,t)=>e-t),i=Fc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||uu.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Fc()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=Mc();l.forEach(e=>{if(!i.has(e)){const r=ad(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Yl.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return r=t,ql.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var r}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Yl.resolve(Rc());let a=-1,o=i;return s.next(t=>Yl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Yl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Fc())).next(e=>({batchId:a,changes:Vc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ql(t)).next(e=>{let t=Dc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Dc();return this.indexManager.getCollectionParents(e,r).next(s=>Yl.forEach(s,s=>{const a=(o=t,l=s.child(r),new dc(l,null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt));var o,l;return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Fu.newInvalidDocument(r)))});let n=Dc();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&ld(s.mutation,i,uu.empty(),Fl.now()),Cc(t,i)&&(n=n.insert(e,i))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Yl.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Qd(n.createTime)}),Yl.resolve()}getNamedQuery(e,t){return Yl.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(n=t).name,query:yh(n.bundledQuery),readTime:Qd(n.readTime)}),Yl.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.overlays=new iu(ql.comparator),this.ls=new Map}getOverlay(e,t){return Yl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Rc();return Yl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),Yl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),Yl.resolve()}getOverlaysForCollection(e,t,n){const r=Rc(),i=t.length+1,s=new ql(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Yl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new iu((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Rc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Rc(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Yl.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new wd(t,n));let i=this.ls.get(t);void 0===i&&(i=Fc(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.fs=new ou(Ah.ds),this.ws=new ou(Ah._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Ah(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Ah(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new ql(new $l([])),n=new Ah(t,e),r=new Ah(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ql(new $l([])),n=new Ah(t,e),r=new Ah(t,e+1);let i=Fc();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ah(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ah{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ql.comparator(e.key,t.key)||Ll(e.As,t.As)}static _s(e,t){return Ll(e.As,t.As)||ql.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ou(Ah.ds)}checkEmpty(e){return Yl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new yd(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Rs=this.Rs.add(new Ah(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Yl.resolve(s)}lookupMutationBatch(e,t){return Yl.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Yl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Yl.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Yl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ah(t,0),r=new Ah(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),Yl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ou(Ll);return t.forEach(e=>{const t=new Ah(e,0),r=new Ah(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),Yl.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ql.isDocumentKey(i)||(i=i.child(""));const s=new Ah(new ql(i),0);let a=new ou(Ll);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},s),Yl.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){_l(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Yl.forEach(t.mutations,r=>{const i=new Ah(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Ah(t,0),r=this.Rs.firstAfterOrEqual(n);return Yl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Yl.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.Ds=e,this.docs=new iu(ql.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Yl.resolve(n?n.document.mutableCopy():Fu.newInvalidDocument(t))}getEntries(e,t){let n=xc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Fu.newInvalidDocument(e))}),Yl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=xc();const s=t.path,a=new ql(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Gl(Hl(a),n)<=0||(r.has(a.key)||Cc(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Yl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){wl()}Cs(e,t){return Yl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Dh(this)}getSize(e){return Yl.resolve(this.size)}}class Dh extends Ih{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),Yl.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.persistence=e,this.xs=new Tc(e=>lc(e),uc),this.lastRemoteSnapshotVersion=Bl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Th,this.targetCount=0,this.Ms=_h.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),Yl.resolve()}getLastRemoteSnapshotVersion(e){return Yl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Yl.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Yl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Yl.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new _h(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Yl.resolve()}updateTargetData(e,t){return this.Fn(t),Yl.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Yl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Yl.waitFor(i).next(()=>r)}getTargetCount(e){return Yl.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Yl.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Yl.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Yl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Yl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Yl.resolve(n)}containsKey(e,t){return Yl.resolve(this.ks.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.$s={},this.overlays={},this.Os=new Jl(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Vh(this),this.indexManager=new bh,this.remoteDocumentCache=new Nh(e=>this.referenceDelegate.Ls(e)),this.serializer=new gh(t),this.qs=new Eh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new xh(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){ml("MemoryPersistence","Starting transaction:",e);const r=new Mh(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return Yl.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Mh extends Wl{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Qs=new Th,this.js=null}static zs(e){return new Oh(e)}get Ws(){if(this.js)return this.js;throw wl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Yl.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Yl.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Yl.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yl.forEach(this.Ws,n=>{const r=ql.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Bl.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Yl.or([()=>Yl.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Fc(),r=Fc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lh(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(pc(t))return Yl.resolve(null);let n=yc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=wc(t,null,"F"),n=yc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Fc(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,wc(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return pc(t)||r.isEqual(Bl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(vl()<=pn.DEBUG&&ml("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sc(t)),this.Wi(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bl.fromTimestamp(1e9===r?new Fl(n+1,0):new Fl(n,r));return new Kl(i,ql.empty(),t)}(r,-1)))})}ji(e,t){let n=new ou(Ec(e));return t.forEach((t,r)=>{Cc(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return vl()<=pn.DEBUG&&ml("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.Ui.getDocumentsMatchingQuery(e,t,Kl.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new iu(Ll),this.Yi=new Tc(e=>lc(e),uc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ch(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}async function Bh(e,t){const n=Il(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Fc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function Uh(e){const t=Il(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function $h(e,t){const n=Il(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);var c,d,h;null!==t.targetMismatches.get(o)?u=u.withResumeToken(du.EMPTY_BYTE_STRING,Bl.min()).withLastLimboFreeSnapshotVersion(Bl.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),d=u,h=s,(0===(c=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(e,u))});let o=xc(),l=Fc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(function(e,t,n){let r=Fc(),i=Fc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=xc();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Bl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ml("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{nr:r,sr:i}})}(e,s,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(Bl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Yl.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=i,e))}function jh(e,t){const n=Il(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function zh(e,t,n){const r=Il(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(a){if(!Xl(a))throw a;ml("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function qh(e,t,n){const r=Il(e);let i=Bl.min(),s=Fc();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Il(e),i=r.Yi.get(n);return void 0!==i?Yl.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,yc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Bl.min(),n?s:Fc())).next(e=>(function(e,t,n){let r=e.Xi.get(t)||Bl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:s})))}class Hh{constructor(){this.activeTargetIds=Bc}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kh{constructor(){this.Hr=new Hh,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Hh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{Yr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ml("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ml("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function Yh(){return null===Qh?Qh=268435456+Math.round(2147483648*Math.random()):Qh++,"0x"+Qh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Xh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="WebChannelConnection";class ep extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Yh(),a=this.To(e,t);ml("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={};return this.Eo(o,r,i),this.Ao(e,a,o,n).then(t=>(ml("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw yl("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Xh[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Yh();return new Promise((s,a)=>{const o=new ll;o.setWithCredentials(!0),o.listenOnce(nl.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case tl.NO_ERROR:const t=o.getResponseJson();ml(Zh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case tl.TIMEOUT:ml(Zh,`RPC '${e}' ${i} timed out`),a(new Cl(Sl.DEADLINE_EXCEEDED,"Request time out"));break;case tl.HTTP_ERROR:const n=o.getStatus();if(ml(Zh,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Sl).indexOf(t)>=0?t:Sl.UNKNOWN}(t.status);a(new Cl(e,t.message))}else a(new Cl(Sl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Cl(Sl.UNAVAILABLE,"Connection failed."));break;default:wl()}}finally{ml(Zh,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);ml(Zh,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Yh(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=new Do,a=As(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new al({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");ml(Zh,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=s.createWebChannel(u,o);let d=!1,h=!1;const p=new Jh({ro:t=>{h?ml(Zh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(ml(Zh,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),ml(Zh,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(c,ol.EventType.OPEN,()=>{h||ml(Zh,`RPC '${e}' stream ${r} transport opened.`)}),f(c,ol.EventType.CLOSE,()=>{h||(h=!0,ml(Zh,`RPC '${e}' stream ${r} transport closed`),p.wo())}),f(c,ol.EventType.ERROR,t=>{h||(h=!0,yl(Zh,`RPC '${e}' stream ${r} transport errored:`,t),p.wo(new Cl(Sl.UNAVAILABLE,"The operation could not be completed")))}),f(c,ol.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];_l(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){ml(Zh,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Id[e];if(void 0!==t)return Cd(t)}(t),i=a.message;void 0===n&&(n=Sl.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.wo(new Cl(n,i)),c.close()}else ml(Zh,`RPC '${e}' stream ${r} received:`,i),p._o(i)}}),f(a,rl.STAT_EVENT,t=>{t.stat===il?ml(Zh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===sl&&ml(Zh,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function tp(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(e){return new qd(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&ml("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,n,r,i,s,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new rp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Sl.RESOURCE_EXHAUSTED?(gl(t.toString()),gl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Sl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new Cl(Sl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return ml("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ml("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sp extends ip{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:wl(),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(_l(void 0===t||"string"==typeof t),du.fromBase64String(t||"")):(_l(void 0===t||t instanceof Uint8Array),du.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Sl.UNKNOWN:Cd(e.code);return new Cl(t,e.message||"")}(o);n=new Ld(i,s,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zd(e,r.document.name),s=Qd(r.document.updateTime),a=r.document.createTime?Qd(r.document.createTime):Bl.min(),o=new Lu({mapValue:{fields:r.document.fields}}),l=Fu.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Md(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Zd(e,r.document),s=r.readTime?Qd(r.readTime):Bl.min(),a=Fu.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Md([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Zd(e,r.document),s=r.removedTargetIds||[];n=new Md([],s,i,null)}else{if(!("filter"in t))return wl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new _d(r,i),a=e.targetId;n=new Od(a,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Bl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Bl.min():t.readTime?Qd(t.readTime):Bl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=th(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=cc(r)?{documents:ih(e,r)}:{query:sh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Gd(e,t.resumeToken);const r=Hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Bl.min())>0){n.readTime=Kd(e,t.snapshotVersion.toTimestamp());const r=Hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=th(this.serializer),t.removeTarget=e,this.Wo(t)}}class ap extends ip{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(_l(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(_l(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Qd(e.updateTime):Qd(t);return n.isEqual(Bl.min())&&(n=Qd(t)),new nd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qd(e.commitTime);return this.listener.cu(n,t)}return _l(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=th(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof dd)n={update:rh(e,t.key,t.value)};else if(t instanceof md)n={delete:Jd(e,t.key)};else if(t instanceof hd)n={update:rh(e,t.key,t.data),updateMask:fh(t.fieldMask)};else{if(!(t instanceof gd))return wl();n={verify:Jd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Gc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jc)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw wl()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Wd(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:wl())),n;var r,i}(this.serializer,e))};this.Wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Cl(Sl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Io(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Cl(Sl.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.vo(e,t,n,i,s,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Cl(Sl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class lp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gl(t),this.mu=!1):ml("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{yp(this)&&(ml("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Il(e);t.vu.add(4),await dp(t),t.bu.set("Unknown"),t.vu.delete(4),await cp(t)}(this))})}),this.bu=new lp(n,r)}}async function cp(e){if(yp(e))for(const t of e.Ru)await t(!0)}async function dp(e){for(const t of e.Ru)await t(!1)}function hp(e,t){const n=Il(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),gp(n)?mp(n):Op(n).Ko()&&fp(n,t))}function pp(e,t){const n=Il(e),r=Op(n);n.Au.delete(t),r.Ko()&&vp(n,t),0===n.Au.size&&(r.Ko()?r.jo():yp(n)&&n.bu.set("Unknown"))}function fp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Op(e).su(t)}function vp(e,t){e.Vu.qt(t),Op(e).iu(t)}function mp(e){e.Vu=new Fd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Op(e).start(),e.bu.gu()}function gp(e){return yp(e)&&!Op(e).Uo()&&e.Au.size>0}function yp(e){return 0===Il(e).vu.size}function bp(e){e.Vu=void 0}async function wp(e){e.Au.forEach((t,n)=>{fp(e,t)})}async function _p(e,t){bp(e),gp(e)?(e.bu.Iu(t),mp(e)):e.bu.set("Unknown")}async function Ip(e,t,n){if(e.bu.set("Online"),t instanceof Ld&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(r){ml("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Sp(e,r)}else if(t instanceof Md?e.Vu.Ht(t):t instanceof Od?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Bl.min()))try{const t=await Uh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(du.EMPTY_BYTE_STRING,r.snapshotVersion)),vp(e,t);const i=new mh(r.target,t,n,r.sequenceNumber);fp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){ml("RemoteStore","Failed to raise snapshot:",i),await Sp(e,i)}}async function Sp(e,t,n){if(!Xl(t))throw t;e.vu.add(1),await dp(e),e.bu.set("Offline"),n||(n=()=>Uh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ml("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await cp(e)})}function Cp(e,t){return t().catch(n=>Sp(e,n,t))}async function Ep(e){const t=Il(e),n=Lp(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;kp(t);)try{const e=await jh(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Tp(t,e)}catch(i){await Sp(t,i)}Ap(t)&&xp(t)}function kp(e){return yp(e)&&e.Eu.length<10}function Tp(e,t){e.Eu.push(t);const n=Lp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Ap(e){return yp(e)&&!Lp(e).Uo()&&e.Eu.length>0}function xp(e){Lp(e).start()}async function Np(e){Lp(e).hu()}async function Dp(e){const t=Lp(e);for(const n of e.Eu)t.uu(n.mutations)}async function Vp(e,t,n){const r=e.Eu.shift(),i=bd.from(r,t,n);await Cp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ep(e)}async function Rp(e,t){t&&Lp(e).ou&&await async function(e,t){if(function(e){switch(e){default:return wl();case Sl.CANCELLED:case Sl.UNKNOWN:case Sl.DEADLINE_EXCEEDED:case Sl.RESOURCE_EXHAUSTED:case Sl.INTERNAL:case Sl.UNAVAILABLE:case Sl.UNAUTHENTICATED:return!1;case Sl.INVALID_ARGUMENT:case Sl.NOT_FOUND:case Sl.ALREADY_EXISTS:case Sl.PERMISSION_DENIED:case Sl.FAILED_PRECONDITION:case Sl.ABORTED:case Sl.OUT_OF_RANGE:case Sl.UNIMPLEMENTED:case Sl.DATA_LOSS:return!0}}(n=t.code)&&n!==Sl.ABORTED){const n=e.Eu.shift();Lp(e).Qo(),await Cp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ep(e)}var n}(e,t),Ap(e)&&xp(e)}async function Mp(e,t){const n=Il(e);n.asyncQueue.verifyOperationInProgress(),ml("RemoteStore","RemoteStore received new credentials");const r=yp(n);n.vu.add(3),await dp(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await cp(n)}function Op(e){return e.Su||(e.Su=function(e,t,n){const r=Il(e);return r.fu(),new sp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:wp.bind(null,e),ao:_p.bind(null,e),nu:Ip.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),gp(e)?mp(e):e.bu.set("Unknown")):(await e.Su.stop(),bp(e))})),e.Su}function Lp(e){return e.Du||(e.Du=function(e,t,n){const r=Il(e);return r.fu(),new ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Np.bind(null,e),ao:Rp.bind(null,e),au:Dp.bind(null,e),cu:Vp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Ep(e)):(await e.Du.stop(),e.Eu.length>0&&(ml("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Pp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new El,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Pp(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Cl(Sl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(e,t){if(gl("AsyncQueue",`${t}: ${e}`),Xl(e))return new Cl(Sl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ql.comparator(t.key,n.key):(e,t)=>ql.comparator(e.key,t.key),this.keyedMap=Dc(),this.sortedSet=new iu(this.comparator)}static emptySet(e){return new Bp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Bp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Cu=new iu(ql.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):wl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class $p{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new $p(e,t,Bp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.Nu=void 0,this.listeners=[]}}class zp{constructor(){this.queries=new Tc(e=>Ic(e),_c),this.onlineState="Unknown",this.ku=new Set}}function qp(e,t){const n=Il(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Kp(n)}function Hp(e,t,n){const r=Il(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Kp(e){e.ku.forEach(e=>{e.next()})}class Gp{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new $p(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=$p.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.key=e}}class Qp{constructor(e){this.key=e}}class Yp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Fc(),this.mutatedKeys=Fc(),this.tc=Ec(e),this.ec=new Bp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Up,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Cc(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.rc(u,c)||(n.track({type:2,doc:c}),p=!0,(o&&this.tc(c,o)>0||l&&this.tc(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(o||l)&&(a=!0)),p&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==i.length||o?{snapshot:new $p(this.query,e.ec,r,i,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Up,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Fc(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Qp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Wp(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Fc();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return $p.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Xp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jp{constructor(e){this.key=e,this.fc=!1}}class Zp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Tc(e=>Ic(e),_c),this._c=new Map,this.mc=new Set,this.gc=new iu(ql.comparator),this.yc=new Map,this.Ic=new Th,this.Tc={},this.Ec=new Map,this.Ac=_h.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function ef(e,t){const n=function(e){const t=Il(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=af.bind(null,t),t.dc.nu=qp.bind(null,t.eventManager),t.dc.Pc=Hp.bind(null,t.eventManager),t}(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await function(e,t){const n=Il(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,Yl.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new mh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}(n.localStore,yc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await qh(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,i)));const s=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s);return pf(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const s=await qh(e.localStore,t,!0),a=new Yp(t,s.ir),o=a.sc(s.documents),l=Rd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);pf(e,n,u.cc);const c=new Xp(t,n,a);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&hp(n.remoteStore,e)}return i}async function tf(e,t){const n=Il(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!_c(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await zh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pp(n.remoteStore,r.targetId),df(n,r.targetId)}).catch(Ql)):(df(n,r.targetId),await zh(n.localStore,r.targetId,!0))}async function nf(e,t,n){const r=function(e){const t=Il(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=of.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lf.bind(null,t),t}(e);try{const e=await function(e,t){const n=Il(e),r=Fl.now(),i=t.reduce((e,t)=>e.add(t.key),Fc());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=xc(),l=Fc();return n.Zi.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=ud(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new hd(e.key,t,Pu(t.value.mapValue),rd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Vc(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new iu(Ll)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await mf(r,e.changes),await Ep(r.remoteStore)}catch(i){const e=Fp(i,"Failed to persist write");n.reject(e)}}async function rf(e,t){const n=Il(e);try{const e=await $h(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(_l(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?_l(r.fc):e.removedDocuments.size>0&&(_l(r.fc),r.fc=!1))}),await mf(n,e,t)}catch(r){await Ql(r)}}function sf(e,t,n){const r=Il(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Il(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Kp(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function af(e,t,n){const r=Il(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new iu(ql.comparator);e=e.insert(s,Fu.newNoDocument(s,Bl.min()));const n=Fc().add(s),i=new Vd(Bl.min(),new Map,new iu(Ll),e,n);await rf(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),vf(r)}else await zh(r.localStore,t,!1).then(()=>df(r,t,n)).catch(Ql)}async function of(e,t){const n=Il(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Il(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Yl.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);_l(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Fc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);cf(n,r,null),uf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mf(n,e)}catch(i){await Ql(i)}}async function lf(e,t,n){const r=Il(e);try{const e=await function(e,t){const n=Il(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(_l(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);cf(r,t,n),uf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mf(r,e)}catch(i){await Ql(i)}}function uf(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function cf(e,t,n){const r=Il(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function df(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||hf(e,t)})}function hf(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(pp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),vf(e))}function pf(e,t,n){for(const r of n)r instanceof Wp?(e.Ic.addReference(r.key,t),ff(e,r)):r instanceof Qp?(ml("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||hf(e,r.key)):wl()}function ff(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(ml("SyncEngine","New document in limbo: "+n),e.mc.add(r),vf(e))}function vf(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new ql($l.fromString(t)),r=e.Ac.next();e.yc.set(r,new Jp(n)),e.gc=e.gc.insert(n,r),hp(e.remoteStore,new mh(yc(hc(n.path)),r,"TargetPurposeLimboResolution",Jl.ct))}}async function mf(e,t,n){const r=Il(e),i=[],s=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{a.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Lh.Li(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.dc.nu(i),await async function(e,t){const n=Il(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Yl.forEach(t,t=>Yl.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Yl.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!Xl(r))throw r;ml("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function gf(e,t){const n=Il(e);if(!n.currentUser.isEqual(t)){ml("SyncEngine","User change. New user:",t.toKey());const e=await Bh(n.localStore,t);n.currentUser=t,(r=n).Ec.forEach(e=>{e.forEach(e=>{e.reject(new Cl(Sl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mf(n,e.er)}var r}function yf(e,t){const n=Il(e),r=n.yc.get(t);if(r&&r.fc)return Fc().add(r.key);{let e=Fc();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}class bf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=np(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new Fh(e,t,n,r)}(this.persistence,new Ph,e.initialUser,this.serializer)}createPersistence(e){return new Rh(Oh.zs,this.serializer)}createSharedClientState(e){return new Kh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>sf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gf.bind(null,this.syncEngine),await async function(e,t){const n=Il(e);t?(n.vu.delete(2),await cp(n)):t||(n.vu.add(2),await dp(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zp}createDatastore(e){const t=np(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new ep(r));var r,i,s;return i=e.authCredentials,s=e.appCheckCredentials,new op(i,s,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>sf(this.syncEngine,e,0),s=Wh.D()?new Wh:new Gh,new up(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Zp(e,t,n,r,i,s);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Il(e);ml("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await dp(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=hl.UNAUTHENTICATED,this.clientId=Ol.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{ml("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ml("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Cl(Sl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new El;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Sf(e,t){e.asyncQueue.verifyOperationInProgress(),ml("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Bh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ml("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===Sl.FAILED_PRECONDITION||e.code===Sl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;yl("Error using user provided cache. Falling back to memory cache: "+r),await Sf(e,new bf)}}else ml("FirestoreClient","Using default OfflineComponentProvider"),await Sf(e,new bf);return e._offlineComponents}(e);ml("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>Mp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Mp(t.remoteStore,n)),e._onlineComponents=t}async function Ef(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ml("FirestoreClient","Using user provided OnlineComponentProvider"),await Cf(e,e._uninitializedComponentsProvider._online)):(ml("FirestoreClient","Using default OnlineComponentProvider"),await Cf(e,new wf))),e._onlineComponents}async function kf(e){const t=await Ef(e),n=t.eventManager;return n.onListen=ef.bind(null,t.syncEngine),n.onUnlisten=tf.bind(null,t.syncEngine),n}function Tf(e,t,n={}){const r=new El;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new _f({next:n=>{t.enqueueAndForget(()=>async function(e,t){const n=Il(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(e,a)),n.fromCache&&"server"===r.source?i.reject(new Cl(Sl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Gp(n,s,{includeMetadataChanges:!0,Ku:!0});return async function(t,n){const r=Il(t),i=n.query;let s=!1,a=r.queries.get(i);if(a||(s=!0,a=new jp),s)try{a.Nu=await r.onListen(i)}catch(e){const r=Fp(e,`Initialization of query '${Sc(n.query)}' failed`);return void n.onError(r)}r.queries.set(i,a),a.listeners.push(n),n.Mu(r.onlineState),a.Nu&&n.$u(a.Nu)&&Kp(r)}(e,a)}(await kf(e),e.asyncQueue,t,n,r)),r.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Af(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const xf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(e,t,n){if(!n)throw new Cl(Sl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Df(e){if(!ql.isDocumentKey(e))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Vf(e){if(ql.isDocumentKey(e))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":wl()}function Mf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Cl(Sl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rf(e);throw new Cl(Sl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Cl(Sl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Cl(Sl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Cl(Sl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Af(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Cl(Sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Cl(Sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Cl(Sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Lf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Of({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Cl(Sl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Cl(Sl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Of(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Tl;switch(e.type){case"firstParty":return new Dl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Cl(Sl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xf.get(e);t&&(ml("ComponentProvider","Removing Datastore"),xf.delete(e),t.terminate())}(this),Promise.resolve()}}function Pf(e,t,n,r={}){var i;const s=(e=Mf(e,Lf))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=hl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Bt(JSON.stringify({alg:"none",type:"JWT"})),Bt(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Cl(Sl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new hl(s)}e._authCredentials=new Al(new kl(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ff(this.firestore,e,this._key)}}class Bf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bf(this.firestore,e,this._query)}}class Uf extends Bf{constructor(e,t,n){super(e,t,hc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ff(this.firestore,null,new ql(e))}withConverter(e){return new Uf(this.firestore,e,this._path)}}function $f(e,t,...n){if(e=on(e),Nf("collection","path",t),e instanceof Lf){const r=$l.fromString(t,...n);return Vf(r),new Uf(e,null,r)}{if(!(e instanceof Ff||e instanceof Uf))throw new Cl(Sl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child($l.fromString(t,...n));return Vf(r),new Uf(e.firestore,null,r)}}function jf(e,t){if(e=Mf(e,Lf),Nf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Cl(Sl.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bf(e,null,(n=t,new dc($l.emptyPath(),n)));var n}function zf(e,t,...n){if(e=on(e),1===arguments.length&&(t=Ol.A()),Nf("doc","path",t),e instanceof Lf){const r=$l.fromString(t,...n);return Df(r),new Ff(e,null,new ql(r))}{if(!(e instanceof Ff||e instanceof Uf))throw new Cl(Sl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child($l.fromString(t,...n));return Df(r),new Ff(e.firestore,e instanceof Uf?e.converter:null,new ql(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new rp(this,"async_queue_retry"),this.Xc=()=>{const e=tp();e&&ml("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=tp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new El;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Xl(e))throw e;ml("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;throw gl("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Pp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&wl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Hf extends Lf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new qf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wf(this),this._firestoreClient.terminate()}}function Kf(e,t){const n="string"==typeof e?e:"(default)",r=gr("object"==typeof e?e:Ir(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Ht(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Pf(r,...e)}return r}function Gf(e){return e._firestoreClient||Wf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Wf(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,new bu(a,o,l,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Af(u.experimentalLongPollingOptions),u.useFetchStreams));var a,o,l,u;e._firestoreClient=new If(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qf(du.fromBase64String(e))}catch(t){throw new Cl(Sl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qf(du.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Cl(Sl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Cl(Sl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Cl(Sl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ll(this._lat,e._lat)||Ll(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=/^__.*__$/;class ev{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new hd(e,this.data,this.fieldMask,t,this.fieldTransforms):new dd(e,this.data,t,this.fieldTransforms)}}class tv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wl()}}class rv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new rv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(nv(this.ca)&&Zf.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class iv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||np(e)}ya(e,t,n,r=!1){return new rv({ca:e,methodName:t,ga:n,path:zl.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sv(e){const t=e._freezeSettings(),n=np(e._databaseId);return new iv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function av(e,t,n,r,i,s={}){const a=e.ya(s.merge||s.mergeFields?2:0,t,n,i);fv("Data must be an object, but it was:",a,r);const o=hv(r,a);let l,u;if(s.merge)l=new uu(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=vv(t,r,n);if(!a.contains(i))throw new Cl(Sl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);bv(e,i)||e.push(i)}l=new uu(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new ev(new Lu(o),l,u)}class ov extends Xf{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ov}}class lv extends Xf{_toFieldTransform(e){return new td(e.path,new Gc)}isEqual(e){return e instanceof lv}}function uv(e,t,n,r){const i=e.ya(1,t,n);fv("Data must be an object, but it was:",i,r);const s=[],a=Lu.empty();nu(r,(e,r)=>{const o=gv(t,e,n);r=on(r);const l=i.da(o);if(r instanceof ov)s.push(o);else{const e=dv(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new uu(s);return new tv(a,o,i.fieldTransforms)}function cv(e,t,n,r,i,s){const a=e.ya(1,t,n),o=[vv(t,r,n)],l=[i];if(s.length%2!=0)throw new Cl(Sl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(vv(t,s[h])),l.push(s[h+1]);const u=[],c=Lu.empty();for(let h=o.length-1;h>=0;--h)if(!bv(u,o[h])){const e=o[h];let t=l[h];t=on(t);const n=a.da(e);if(t instanceof ov)u.push(e);else{const r=dv(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new uu(u);return new tv(c,d,a.fieldTransforms)}function dv(e,t){if(pv(e=on(e)))return fv("Unsupported field value:",t,e),hv(e,t);if(e instanceof Xf)return function(e,t){if(!nv(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=dv(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=on(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Fl.fromDate(e);return{timestampValue:Kd(t.serializer,n)}}if(e instanceof Fl){const n=new Fl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Kd(t.serializer,n)}}if(e instanceof Jf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qf)return{bytesValue:Gd(t.serializer,e._byteString)};if(e instanceof Ff){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Yd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Rf(e)}`)}(e,t)}function hv(e,t){const n={};return ru(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nu(e,(e,r)=>{const i=dv(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function pv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fl||e instanceof Jf||e instanceof Qf||e instanceof Ff||e instanceof Xf)}function fv(e,t,n){if(!pv(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=Rf(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}var r}function vv(e,t,n){if((t=on(t))instanceof Yf)return t._internalPath;if("string"==typeof t)return gv(e,t);throw yv("Field path arguments must be of type string or ",e,!1,void 0,n)}const mv=new RegExp("[~\\*/\\[\\]]");function gv(e,t,n){if(t.search(mv)>=0)throw yv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Yf(...t.split("."))._internalPath}catch(r){throw yv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function yv(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Cl(Sl.INVALID_ARGUMENT,o+e+l)}function bv(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ff(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _v extends wv{data(){return super.data()}}function Iv(e,t){return"string"==typeof t?gv(e,t):t instanceof Yf?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{}class Cv extends Sv{}function Ev(e,t,...n){let r=[];t instanceof Sv&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Av).length,n=e.filter(e=>e instanceof kv).length;if(t>1||t>0&&n>0)throw new Cl(Sl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class kv extends Cv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new kv(e,t,n)}_apply(e){const t=this._parse(e);return Rv(e._query,t),new Bf(e.firestore,e.converter,bc(e._query,t))}_parse(e){const t=sv(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Cl(Sl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Vv(a,s);const t=[];for(const n of a)t.push(Dv(r,e,n));o={arrayValue:{values:t}}}else o=Dv(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Vv(a,s),o=function(e,t,n,r=!1){return dv(n,e.ya(r?4:3,t))}(n,"where",a,"in"===s||"not-in"===s);return Hu.create(i,s,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Tv(e,t,n){const r=t,i=Iv("where",e);return kv._create(i,r,n)}class Av extends Sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Av(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ku.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Rv(n,i),n=bc(n,i)}(e._query,t),new Bf(e.firestore,e.converter,bc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xv extends Cv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Cl(Sl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Cl(Sl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ju(t,n);return function(e,t){if(null===fc(e)){const n=vc(e);null!==n&&Mv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Bf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new dc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Nv(e,t="asc"){const n=t,r=Iv("orderBy",e);return xv._create(r,n)}function Dv(e,t,n){if("string"==typeof(n=on(n))){if(""===n)throw new Cl(Sl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mc(t)&&-1!==n.indexOf("/"))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child($l.fromString(n));if(!ql.isDocumentKey(r))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xu(e,new ql(r))}if(n instanceof Ff)return xu(e,n._key);throw new Cl(Sl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(n)}.`)}function Vv(e,t){if(!Array.isArray(e)||0===e.length)throw new Cl(Sl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Rv(e,t){if(t.isInequality()){const n=vc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=fc(e);null!==i&&Mv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Cl(Sl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Cl(Sl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Mv(e,t,n){if(!n.isEqual(t))throw new Cl(Sl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ov{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return nu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Jf(fu(e.latitude),fu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=pu(e);return new Fl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$l.fromString(e);_l(vh(n));const r=new wu(n.get(1),n.get(3)),i=new ql(n.popFirst(5));return r.isEqual(t)||gl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Pv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fv extends wv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Bv extends Fv{data(e={}){return super.data(e)}}class Uv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bv(this._firestore,this._userDataWriter,n.key,n,new Pv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Cl(Sl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Pv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:$v(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $v(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wl()}}class jv extends Ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ff(this.firestore,null,t)}}function zv(e){e=Mf(e,Bf);const t=Mf(e.firestore,Hf),n=Gf(t),r=new jv(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Cl(Sl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Tf(n,e._query).then(n=>new Uv(t,r,e,n))}function qv(e,t,n,...r){e=Mf(e,Ff);const i=Mf(e.firestore,Hf),s=sv(i);let a;return a="string"==typeof(t=on(t))||t instanceof Yf?cv(s,"updateDoc",e._key,t,n,r):uv(s,"updateDoc",e._key,t),Gv(i,[a.toMutation(e._key,rd.exists(!0))])}function Hv(e){return Gv(Mf(e.firestore,Hf),[new md(e._key,rd.none())])}function Kv(e,t){const n=Mf(e.firestore,Hf),r=zf(e),i=Lv(e.converter,t);return Gv(n,[av(sv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rd.exists(!1))]).then(()=>r)}function Gv(e,t){return function(e,t){const n=new El;return e.asyncQueue.enqueueAndForget(async()=>nf(await function(e){return Ef(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Gf(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sv(e)}set(e,t,n){this._verifyNotCommitted();const r=Qv(e,this._firestore),i=Lv(r.converter,t,n),s=av(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,rd.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Qv(e,this._firestore);let s;return s="string"==typeof(t=on(t))||t instanceof Yf?cv(this._dataReader,"WriteBatch.update",i._key,t,n,r):uv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,rd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qv(e,this._firestore);return this._mutations=this._mutations.concat(new md(t._key,rd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Cl(Sl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qv(e,t){if((e=on(e)).firestore!==t)throw new Cl(Sl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Yv(){return new lv("serverTimestamp")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(e){return Gf(e=Mf(e,Hf)),new Wv(e,t=>Gv(e,t))}function Jv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(e,t=!0){pl=wr,mr(new ln("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Hf(new xl(e.getProvider("auth-internal")),new Rl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Cl(Sl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),Cr(dl,"3.13.0",e),Cr(dl,"3.13.0","esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const em=Zv,tm=new Xt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nm=new bn("@firebase/auth");function rm(e,...t){nm.logLevel<=pn.ERROR&&nm.error(`Auth (${wr}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(e,...t){throw am(e,...t)}function sm(e,...t){return am(e,...t)}function am(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return tm.create(e,...t)}function om(e,t,...n){if(!e)throw am(t,...n)}function lm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw rm(t),new Error(t)}function um(e,t){e||lm(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dm(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==dm()&&"https:"!==dm()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pm{constructor(e,t){this.shortDelay=e,this.longDelay=t,um(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return hm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(e,t){um(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void lm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void lm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void lm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gm=new pm(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function bm(e,t,n,r,i={}){return wm(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=nn(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),vm.fetch()(_m(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))})}async function wm(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mm),t);try{const t=new Im(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Sm(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Sm(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Sm(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Sm(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const r=Object.assign(Object.assign({},em()),{[t]:n});return new Xt("auth","Firebase",r).create(t,{appName:e.name})}(e,o,a);im(e,o)}}catch(i){if(i instanceof Yt)throw i;im(e,"network-request-failed",{message:String(i)})}}function _m(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?fm(e.config,i):`${e.config.apiScheme}://${i}`}class Im{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(sm(this.auth,"network-request-failed")),gm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=sm(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Em(e){return 1e3*Number(e)}function km(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return rm("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ut(n);return e?JSON.parse(e):(rm("Failed to decode base64 JWT payload"),null)}catch(i){return rm("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Tm(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Yt&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class Am{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cm(this.lastLoginAt),this.creationTime=Cm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Tm(e,async function(e,t){return bm(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));om(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=Jv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,u=a,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!c&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){om(e.idToken,"internal-error"),om(void 0!==e.idToken,"internal-error"),om(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=km(e);return om(t,"internal-error"),om(void 0!==t.exp,"internal-error"),om(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return om(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const n=await wm(e,{},async()=>{const n=nn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=_m(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vm.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Dm;return n&&(om("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(om("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(om("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dm,this.toJSON())}_performRefresh(){return lm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(e,t){om("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Rm{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Jv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Am(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Tm(this,this.stsTokenManager.getToken(this.auth,e));return om(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=on(e),r=await n.getIdToken(t),i=km(r);om(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cm(Em(i.auth_time)),issuedAtTime:Cm(Em(i.iat)),expirationTime:Cm(Em(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=on(e);await Nm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(om(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){om(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Nm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Tm(this,async function(e,t){return bm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,v=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:I}=t;om(y&&I,e,"internal-error");const S=Dm.fromJSON(this.name,I);om("string"==typeof y,e,"internal-error"),Vm(c,e.name),Vm(d,e.name),om("boolean"==typeof b,e,"internal-error"),om("boolean"==typeof w,e,"internal-error"),Vm(h,e.name),Vm(p,e.name),Vm(f,e.name),Vm(v,e.name),Vm(m,e.name),Vm(g,e.name);const C=new Rm({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map(e=>Object.assign({},e))),v&&(C._redirectEventId=v),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new Dm;r.updateFromServerResponse(t);const i=new Rm({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Nm(i),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;function Om(e){um(e instanceof Function,"Expected a class definition");let t=Mm.get(e);return t?(um(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mm.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lm.type="NONE";const Pm=Lm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t,n){return`firebase:${e}:${t}:${n}`}class Bm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Fm(this.userKey,r.apiKey,i),this.fullPersistenceKey=Fm("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Bm(Om(Pm),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Om(Pm);const s=Fm(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Rm._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Bm(i,e,n)):new Bm(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($m(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Km(t))return"Blackberry";if(Gm(t))return"Webos";if(jm(t))return"Safari";if((t.includes("chrome/")||zm(t))&&!t.includes("edge/"))return"Chrome";if(Hm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function $m(e=Qt()){return/firefox\//i.test(e)}function jm(e=Qt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zm(e=Qt()){return/crios\//i.test(e)}function qm(e=Qt()){return/iemobile/i.test(e)}function Hm(e=Qt()){return/android/i.test(e)}function Km(e=Qt()){return/blackberry/i.test(e)}function Gm(e=Qt()){return/webos/i.test(e)}function Wm(e=Qt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qm(){return function(){const e=Qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ym(e=Qt()){return Wm(e)||Hm(e)||Gm(e)||Km(e)||/windows phone/i.test(e)||qm(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xm(e,t=[]){let n;switch(e){case"Browser":n=Um(Qt());break;case"Worker":n=`${Um(Qt())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${wr}/${r}`}async function Jm(e,t){return bm(e,"GET","/v2/recaptchaConfig",ym(e,t))}function Zm(e){return void 0!==e&&void 0!==e.enterprise}class eg{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=sm("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}class ng{constructor(e){this.type="recaptcha-enterprise",this.auth=sg(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;Zm(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Jm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new eg(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Zm(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));tg("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ag(this),this.idTokenSubscription=new ag(this),this.beforeStateQueue=new rg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Om(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Bm.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return om(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nm(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?on(e):null;return t&&om(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&om(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Om(e))})}async initializeRecaptchaConfig(){const e=await Jm(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new eg(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ng(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Om(e)||this._popupRedirectResolver;om(t,this,"argument-error"),this.redirectPersistenceManager=await Bm.create(this,[Om(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return om(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return om(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){nm.logLevel<=pn.WARN&&nm.warn(`Auth (${wr}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function sg(e){return on(e)}class ag{constructor(e){this.auth=e,this.observer=null,this.addObserver=rn(e=>this.observer=e)}get next(){return om(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(e,t,n){const r=sg(e);om(r._canInitEmulator,r,"emulator-config-failed"),om(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=lg(t),{host:s,port:a}=function(e){const t=lg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ug(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ug(t)}}}(t),o=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${s}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function lg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ug(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class cg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lm("not implemented")}_getIdTokenResponse(e){return lm("not implemented")}_linkToIdToken(e,t){return lm("not implemented")}_getReauthenticationResolver(e){return lm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dg(e,t){return async function(e,t,n,r,i={}){const s=await bm(e,t,n,r,i);return"mfaPendingCredential"in s&&im(e,"multi-factor-auth-required",{_serverResponse:s}),s}(e,"POST","/v1/accounts:signInWithIdp",ym(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):im("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Jv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new hg(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return dg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,dg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nn(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends pg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends fg{constructor(){super("facebook.com")}static credential(e){return hg._fromParams({providerId:vg.PROVIDER_ID,signInMethod:vg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vg.credentialFromTaggedObject(e)}static credentialFromError(e){return vg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return vg.credential(e.oauthAccessToken)}catch(t){return null}}}vg.FACEBOOK_SIGN_IN_METHOD="facebook.com",vg.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mg extends fg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hg._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mg.credentialFromTaggedObject(e)}static credentialFromError(e){return mg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return mg.credential(t,n)}catch(r){return null}}}mg.GOOGLE_SIGN_IN_METHOD="google.com",mg.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gg extends fg{constructor(){super("github.com")}static credential(e){return hg._fromParams({providerId:gg.PROVIDER_ID,signInMethod:gg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gg.credentialFromTaggedObject(e)}static credentialFromError(e){return gg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return gg.credential(e.oauthAccessToken)}catch(t){return null}}}gg.GITHUB_SIGN_IN_METHOD="github.com",gg.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yg extends fg{constructor(){super("twitter.com")}static credential(e,t){return hg._fromParams({providerId:yg.PROVIDER_ID,signInMethod:yg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yg.credentialFromTaggedObject(e)}static credentialFromError(e){return yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return yg.credential(t,n)}catch(r){return null}}}yg.TWITTER_SIGN_IN_METHOD="twitter.com",yg.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Rm._fromIdTokenResponse(e,n,r),s=wg(n);return new bg({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=wg(n);return new bg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function wg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends Yt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,_g.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new _g(e,t,n,r)}}function Ig(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw _g._fromErrorAndOperation(e,n,t,r);throw n})}const Sg="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sg,"1"),this.storage.removeItem(Sg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends Cg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Qt();return jm(e)||Wm(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ym(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Qm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eg.type="LOCAL";const kg=Eg;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends Cg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tg.type="SESSION";const Ag=Tg;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new xg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ng(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xg.receivers=[];class Dg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Ng("",20);r.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rg(){return void 0!==Vg().WorkerGlobalScope&&"function"==typeof Vg().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Mg="firebaseLocalStorageDb",Og="firebaseLocalStorage",Lg="fbase_key";class Pg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fg(e,t){return e.transaction([Og],t?"readwrite":"readonly").objectStore(Og)}function Bg(){const e=indexedDB.open(Mg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Og,{keyPath:Lg})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Og)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Mg);return new Pg(e).toPromise()}(),t(await Bg()))})})}async function Ug(e,t,n){const r=Fg(e,!0).put({[Lg]:t,value:n});return new Pg(r).toPromise()}function $g(e,t){const n=Fg(e,!0).delete(t);return new Pg(n).toPromise()}class jg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Bg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xg._getInstance(Rg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Dg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await Ug(e,Sg,"1"),await $g(e,Sg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ug(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Fg(e,!1).get(t),r=await new Pg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$g(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Fg(e,!1).getAll();return new Pg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}jg.type="LOCAL";const zg=jg;new pm(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qg extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Hg(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){const r="signIn",i=await Ig(e,r,t),s=await bg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new qg(e),e.bypassAuthState)}function Kg(e){const{auth:t,user:n}=e;return om(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await Tm(e,Ig(r,i,t,e),n);om(s.idToken,r,"internal-error");const a=km(s.idToken);om(a,r,"internal-error");const{sub:o}=a;return om(e.uid===o,r,"user-mismatch"),bg._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&im(r,"user-mismatch"),s}}(n,new qg(e),e.bypassAuthState)}async function Gg(e){const{auth:t,user:n}=e;return om(n,t,"internal-error"),async function(e,t,n=!1){const r=await Tm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return bg._forOperation(e,"link",r)}(n,new qg(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hg;case"linkViaPopup":case"linkViaRedirect":return Gg;case"reauthViaPopup":case"reauthViaRedirect":return Kg;default:im(this.auth,"internal-error")}}resolve(e){um(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){um(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new pm(2e3,1e4);class Yg extends Wg{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Yg.currentPopupAction&&Yg.currentPopupAction.cancel(),Yg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return om(e,this.auth,"internal-error"),e}async onExecution(){um(1===this.filter.length,"Popup operations only handle one event");const e=Ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(sm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(sm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sm(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Qg.get())};e()}}Yg.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xg="pendingRedirect",Jg=new Map;class Zg extends Wg{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Jg.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Fm(Xg,e.config.apiKey,e.name)}(t),r=function(e){return Om(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Jg.set(this.auth._key(),e)}return this.bypassAuthState||Jg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ey(e,t){Jg.set(e._key(),t)}async function ty(e,t,n=!1){const r=sg(e),i=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Om(t):(om(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new Zg(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iy(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!iy(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sm(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ry(e))}saveEventToCache(e){this.cachedEventUids.add(ry(e)),this.lastProcessedEventTime=Date.now()}}function ry(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function iy({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ay=/^https?/;async function oy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return bm(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(ly(r))return}catch(n){}im(e,"unauthorized-domain")}function ly(e){const t=cm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ay.test(n))return!1;if(sy.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=new pm(3e4,6e4);function cy(){const e=Vg().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dy(e){return new Promise((t,n)=>{var r,i,s;function a(){cy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cy(),n(sm(e,"network-request-failed"))},timeout:uy.get()})}if(null===(i=null===(r=Vg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Vg().gapi)||void 0===s?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Vg()[t]=()=>{gapi.load?a():n(sm(e,"network-request-failed"))},tg(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw hy=null,e})}let hy=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const py=new pm(5e3,15e3),fy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function my(e){const t=e.config;om(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fm(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:wr},i=vy.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nn(r).slice(1)}`}async function gy(e){const t=await function(e){return hy=hy||dy(e),hy}(e),n=Vg().gapi;return om(n,e,"internal-error"),t.open({where:document.body,url:my(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fy,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=sm(e,"network-request-failed"),s=Vg().setTimeout(()=>{r(i)},py.get());function a(){Vg().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class by{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wy(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},yy),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Qt().toLowerCase();n&&(o=zm(u)?"_blank":n),$m(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Qt()){var t;return Wm(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new by(null);const d=window.open(t||"",o,c);om(d,e,"popup-blocked");try{d.focus()}catch(h){}return new by(d)}const _y="__/auth/handler",Iy="emulator/auth/handler",Sy=encodeURIComponent("fac");async function Cy(e,t,n,r,i,s){om(e.config.authDomain,e,"auth-domain-config-required"),om(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:wr,eventId:i};if(t instanceof pg){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof fg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Sy}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${_y}`;return fm(e,Iy)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${nn(o).slice(1)}${u}`}const Ey="webStorageSupport";const ky=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ag,this._completeRedirectFn=ty,this._overrideRedirectResult=ey}async _openPopup(e,t,n,r){var i;um(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return wy(e,await Cy(e,t,n,cm(),r),Ng())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Vg().location.href=e}(await Cy(e,t,n,cm(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(um(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gy(e),n=new ny(e);return t.register("authEvent",t=>{om(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ey,{type:Ey},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ey];void 0!==i&&t(!!i),im(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ym()||jm()||Wm()}};var Ty="@firebase/auth",Ay="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){om(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ny=Gt("authIdTokenMaxAge")||300;let Dy=null;function Vy(e=Ir()){const t=gr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=gr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(en(n.getOptions(),null!=t?t:{}))return e;im(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ky,persistence:[zg,kg,Ag]}),r=Gt("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ny)return;const r=null==t?void 0:t.token;Dy!==r&&(Dy=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){on(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){on(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const s=Ht("auth");return s&&og(n,`http://${s}`),n}var Ry;Ry="Browser",mr(new ln("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;om(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:Ry,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xm(Ry)},l=new ig(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Om);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),mr(new ln("auth-internal",e=>{const t=sg(e.getProvider("auth").getImmediate());return new xy(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(Ty,Ay,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ry)),Cr(Ty,Ay,"esm2017");const My=async e=>{const[t,n,r,i,s,a]=await(async e=>{if(!e)throw new Error("User ID is required to load initial data.");try{const t=await Hr();return Promise.all([zv($f(t,"accounts")),zv($f(t,"character_masters")),zv($f(t,"itemMasters")),zv(jf(t,"owned_characters")),zv($f(t,"gachaMasters")),zv(Ev($f(t,"teams"),Tv("userId","==",e),Nv("createdAt","desc")))])}catch(t){throw t}})(e),o=t.docs.map(e=>{const t=e.data();return{id:e.id,name:t.Name||`アカウント${t.id}`,numericId:t.id,indexNumber:t.indexNumber}}).sort((e,t)=>(e.numericId||999)-(t.numericId||999)),l=n.docs.map(e=>({...e.data(),id:e.id})).sort((e,t)=>(e.indexNumber||999999)-(t.indexNumber||999999)),u=new Map(l.map(e=>[e.id,e])),c=r.docs.map(e=>({...e.data(),id:Number(e.data().id)})).sort((e,t)=>e.id-t.id),d=new Map(c.map(e=>[e.id,e.name])),h=s.docs.map(e=>e.data()).sort((e,t)=>e.id-t.id),p=a.docs.map(e=>({...e.data(),id:e.id})),f=new Map,v=new Map;return i.forEach(e=>{const t=e.data(),n=e.ref.parent.parent.id,r=`${t.characterMasterId}-${n}`;v.set(r,(v.get(r)||0)+1),f.has(n)||f.set(n,[]),f.get(n).push({...t,id:e.id})}),{accounts:o,characterMasters:l,characterMastersMap:u,itemMasters:c,itemMastersMap:d,gachaMasters:h,teams:p,ownedCharactersData:f,ownedCountMap:v}},Oy=async(e,t)=>Kv($f(await Hr(),"accounts",e,"owned_characters"),t),Ly=async(e,t,n)=>qv(zf(await Hr(),"accounts",e,"owned_characters",t),{items:n}),Py=async(e,t,n)=>{const r=await Hr(),i=Xv(r),s=zf(r,"accounts",e,"owned_characters",t.id),a=zf(r,"accounts",e,"owned_characters",n.id);return i.update(s,{items:t.items}),i.update(a,{items:n.items}),i.commit()},Fy=async e=>Kv($f(await Hr(),"character_masters"),e),By=async(e,t)=>qv(zf(await Hr(),"character_masters",e),t),Uy=async(e,t)=>{const n=await Hr();return e?qv(zf(n,"teams",e),t):Kv($f(n,"teams"),t)},$y=async e=>Hv(zf(await Hr(),"teams",e)),jy=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},zy=ne({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),qy=te(!1)({name:"VDefaultsProvider",props:zy(),setup(t,n){let{slots:r}=n;const{defaults:i,disabled:s,reset:a,root:o,scoped:l}=e(t);return re(i,{reset:a,root:o,scoped:l,disabled:s}),()=>{var e;return null==(e=r.default)?void 0:e.call(r)}}});function Hy(e){return ie(()=>{const n=t(e),r=[],i={};if(n.background)if(se(n.background)){if(i.backgroundColor=n.background,!n.text&&ae(n.background)){const e=oe(n.background);if(null==e.a||1===e.a){const t=le(e);i.color=t,i.caretColor=t}}}else r.push(`bg-${n.background}`);return n.text&&(se(n.text)?(i.color=n.text,i.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:i}})}function Ky(e){const{colorClasses:n,colorStyles:r}=Hy(()=>({text:t(e)}));return{textColorClasses:n,textColorStyles:r}}function Gy(e){const{colorClasses:n,colorStyles:r}=Hy(()=>({background:t(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const Wy=["x-small","small","default","large","x-large"],Qy=ne({size:{type:[String,Number],default:"default"}},"size");function Yy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return ie(()=>{const n=e.size;let r,i;return ce(Wy,n)?r=`${t}--size-${n}`:n&&(i={width:de(n),height:de(n)}),{sizeClasses:r,sizeStyles:i}})}const Xy=ne({tag:{type:[String,Object,Function],default:"div"}},"tag"),Jy=ne({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:ye,opacity:[String,Number],...ge(),...Qy(),...Xy({tag:"i"}),...me()},"VIcon"),Zy=te()({name:"VIcon",props:Jy(),setup(e,t){let{attrs:o,slots:l}=t;const u=n(),{themeClasses:c}=he(),{iconData:d}=pe(()=>u.value||e.icon),{sizeClasses:h}=Yy(e),{textColorClasses:p,textColorStyles:f}=Ky(()=>e.color);return fe(()=>{var t,n;const v=null==(t=l.default)?void 0:t.call(l);v&&(u.value=null==(n=ve(v).filter(e=>e.type===r&&e.children&&"string"==typeof e.children)[0])?void 0:n.children);const m=!(!o.onClick&&!o.onClickOnce);return i(d.value.component,{tag:e.tag,icon:d.value.icon,class:a(["v-icon","notranslate",c.value,h.value,p.value,{"v-icon--clickable":m,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:s([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:de(e.size),height:de(e.size),width:de(e.size)},f.value,e.style]),role:m?"button":void 0,"aria-hidden":!m,tabindex:m?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}}),eb=ne({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function tb(e){return{dimensionStyles:o(()=>{const t={},n=de(e.height),r=de(e.maxHeight),i=de(e.maxWidth),s=de(e.minHeight),a=de(e.minWidth),o=de(e.width);return null!=n&&(t.height=n),null!=r&&(t.maxHeight=r),null!=i&&(t.maxWidth=i),null!=s&&(t.minHeight=s),null!=a&&(t.minWidth=a),null!=o&&(t.width=o),t})}}const nb=ne({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...ge(),...eb()},"VResponsive"),rb=te()({name:"VResponsive",props:nb(),setup(e,t){let{slots:n}=t;const{aspectStyles:r}=function(e){return{aspectStyles:o(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}(e),{dimensionStyles:i}=tb(e);return fe(()=>{var t;return l("div",{class:a(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:s([i.value,e.style])},[l("div",{class:"v-responsive__sizer",style:s(r.value)},null),null==(t=n.additional)?void 0:t.call(n),n.default&&l("div",{class:a(["v-responsive__content",e.contentClass])},[n.default()])])}),{}}}),ib=ne({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return{roundedClasses:o(()=>{const n=u(e)?e.value:e.rounded,r=u(e)?e.value:e.tile,i=[];if(!0===n||""===n)i.push(`${t}--rounded`);else if("string"==typeof n||0===n)for(const e of String(n).split(" "))i.push(`rounded-${e}`);else(r||!1===n)&&i.push("rounded-0");return i})}}const ab=ne({transition:{type:null,default:"fade-transition",validator:e=>!0!==e}},"transition"),ob=(e,t)=>{let{slots:n}=t;const{transition:r,disabled:i,group:s,...a}=e,{component:o=(s?c:d),...l}=be(r)?r:{};let u;return u=be(r)?h(l,we({disabled:i,group:s}),a):h({name:i||!r?"":r},a),p(o,u,n)};function lb(e,t){var n;const r=null==(n=e._observe)?void 0:n[t.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const ub={mounted:function(e,t){if(!_e)return;const n=t.modifiers||{},r=t.value,{handler:i,options:s}="object"==typeof r?r:{handler:r,options:{}},a=new IntersectionObserver(function(){var r;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;const o=null==(r=e._observe)?void 0:r[t.instance.$.uid];if(!o)return;const l=s.some(e=>e.isIntersecting);!i||n.quiet&&!o.init||n.once&&!l&&!o.init||i(l,s,a),l&&n.once?lb(e,t):o.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:a},a.observe(e)},unmounted:lb},cb=ne({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...nb(),...ge(),...ib(),...ab()},"VImg"),db=te()({name:"VImg",directives:{vIntersect:ub},props:cb(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:r,slots:s}=t;const{backgroundColorClasses:u,backgroundColorStyles:c}=Gy(()=>e.color),{roundedClasses:d}=sb(e),p=Ie("VImg"),S=n(""),C=f(),E=n(e.eager?"loading":"idle"),k=n(),T=n(),A=o(()=>e.src&&"object"==typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),x=o(()=>A.value.aspect||k.value/T.value||0);function N(t){if((!e.eager||!t)&&(!_e||t||e.eager)){if(E.value="loading",A.value.lazySrc){const e=new Image;e.src=A.value.lazySrc,O(e,null)}A.value.src&&g(()=>{var e;r("loadstart",(null==(e=C.value)?void 0:e.currentSrc)||A.value.src),setTimeout(()=>{var e;if(!p.isUnmounted)if(null==(e=C.value)?void 0:e.complete){if(C.value.naturalWidth||V(),"error"===E.value)return;x.value||O(C.value,null),"loading"===E.value&&D()}else x.value||O(C.value),R()})})}}function D(){var e;p.isUnmounted||(R(),O(C.value),E.value="loaded",r("load",(null==(e=C.value)?void 0:e.currentSrc)||A.value.src))}function V(){var e;p.isUnmounted||(E.value="error",r("error",(null==(e=C.value)?void 0:e.currentSrc)||A.value.src))}function R(){const e=C.value;e&&(S.value=e.currentSrc||e.src)}v(()=>e.src,()=>{N("idle"!==E.value)}),v(x,(e,t)=>{!e&&t&&C.value&&O(C.value)}),m(()=>N());let M=-1;function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=()=>{if(clearTimeout(M),p.isUnmounted)return;const{naturalHeight:r,naturalWidth:i}=e;r||i?(k.value=i,T.value=r):e.complete||"loading"!==E.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(k.value=1,T.value=1):M=window.setTimeout(n,t)};n()}y(()=>{clearTimeout(M)});const L=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),P=()=>{var t;if(!A.value.src||"idle"===E.value)return null;const n=l("img",{class:a(["v-img__img",L.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:A.value.src,srcset:A.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:D,onError:V},null),r=null==(t=s.sources)?void 0:t.call(s);return i(ob,{transition:e.transition,appear:!0},{default:()=>[w(r?l("picture",{class:"v-img__picture"},[r,n]):n,[[I,"loaded"===E.value]])]})},F=()=>i(ob,{transition:e.transition},{default:()=>[A.value.lazySrc&&"loaded"!==E.value&&l("img",{class:a(["v-img__img","v-img__img--preload",L.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:A.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),B=()=>s.placeholder?i(ob,{transition:e.transition,appear:!0},{default:()=>[("loading"===E.value||"error"===E.value&&!s.error)&&l("div",{class:"v-img__placeholder"},[s.placeholder()])]}):null,U=()=>s.error?i(ob,{transition:e.transition,appear:!0},{default:()=>["error"===E.value&&l("div",{class:"v-img__error"},[s.error()])]}):null,$=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,j=n(!1);{const e=v(x,t=>{t&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.value=!0})}),e())})}return fe(()=>{const t=rb.filterProps(e);return w(i(rb,h({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!j.value},u.value,d.value,e.class],style:[{width:de("auto"===e.width?k.value:e.width)},c.value,e.style]},t,{aspectRatio:x.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(_,null,[i(P,null,null),i(F,null,null),i($,null,null),i(B,null,null),i(U,null,null)]),default:s.default}),[[ub,{handler:N,options:e.options},null,{once:!0}]])}),{currentSrc:S,image:C,state:E,naturalWidth:k,naturalHeight:T}}}),hb=ne({border:[Boolean,Number,String]},"border");function pb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return{borderClasses:o(()=>{const n=e.border;return!0===n||""===n?`${t}--border`:"string"==typeof n||0===n?String(n).split(" ").map(e=>`border-${e}`):[]})}}const fb=[null,"default","comfortable","compact"],vb=ne({density:{type:String,default:"default",validator:e=>fb.includes(e)}},"density");function mb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return{densityClasses:b(()=>`${t}--density-${e.density}`)}}const gb=["elevated","flat","tonal","outlined","text","plain"];function yb(e,t){return l(_,null,[e&&l("span",{key:"overlay",class:a(`${t}__overlay`)},null),l("span",{key:"underlay",class:a(`${t}__underlay`)},null)])}const bb=ne({color:String,variant:{type:String,default:"elevated",validator:e=>gb.includes(e)}},"variant");function wb(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();const r=b(()=>{const{variant:r}=t(e);return`${n}--variant-${r}`}),{colorClasses:i,colorStyles:s}=Hy(()=>{const{variant:n,color:r}=t(e);return{[["elevated","flat"].includes(n)?"background":"text"]:r}});return{colorClasses:i,colorStyles:s,variantClasses:r}}const _b=ne({start:Boolean,end:Boolean,icon:ye,image:String,text:String,...hb(),...ge(),...vb(),...ib(),...Qy(),...Xy(),...me(),...bb({variant:"flat"})},"VAvatar"),Ib=te()({name:"VAvatar",props:_b(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Se(e),{borderClasses:o}=pb(e),{colorClasses:l,colorStyles:u,variantClasses:c}=wb(e),{densityClasses:d}=mb(e),{roundedClasses:h}=sb(e),{sizeClasses:p,sizeStyles:f}=Yy(e);return fe(()=>i(e.tag,{class:a(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},r.value,o.value,l.value,d.value,h.value,p.value,c.value,e.class]),style:s([u.value,f.value,e.style])},{default:()=>[n.default?i(qy,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?i(db,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?i(Zy,{key:"icon",icon:e.icon},null):e.text,yb(!1,"v-avatar")]})),{}}}),Sb=ne({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Cb(e){return{elevationClasses:b(()=>{const t=u(e)?e.value:e.elevation;return null==t?[]:[`elevation-${t}`]})}}const Eb=ne({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...hb(),...ge(),...vb(),...Sb(),...ib(),...Xy(),...me(),...bb()},"VBtnGroup"),kb=te()({name:"VBtnGroup",props:Eb(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Se(e),{densityClasses:o}=mb(e),{borderClasses:l}=pb(e),{elevationClasses:u}=Cb(e),{roundedClasses:c}=sb(e);re({VBtn:{height:b(()=>"horizontal"===e.direction?"auto":null),baseColor:b(()=>e.baseColor),color:b(()=>e.color),density:b(()=>e.density),flat:!0,variant:b(()=>e.variant)}}),fe(()=>i(e.tag,{class:a(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},r.value,l.value,o.value,u.value,c.value,e.class]),style:s(e.style)},n))}}),Tb=ne({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Ab=ne({value:null,disabled:Boolean,selectedClass:String},"group-item");function xb(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ie("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=k();T(Symbol.for(`${t.description}:id`),i);const s=A(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const a=b(()=>e.value),l=o(()=>!(!s.disabled.value&&!e.disabled));s.register({id:i,value:a,disabled:l},r),y(()=>{s.unregister(i)});const u=o(()=>s.isSelected(i)),c=o(()=>s.items.value[0].id===i),d=o(()=>s.items.value[s.items.value.length-1].id===i),h=o(()=>u.value&&[s.selectedClass.value,e.selectedClass]);return v(u,e=>{r.emit("group:selected",{value:e})},{flush:"sync"}),{id:i,isSelected:u,isFirst:c,isLast:d,toggle:()=>s.select(i,!u.value),select:e=>s.select(i,e),selectedClass:h,value:a,disabled:l,group:s}}function Nb(e,t){let n=!1;const r=S([]),i=Ce(e,"modelValue",[],e=>null==e?[]:Db(r,ke(e)),t=>{const n=function(e,t){const n=[];return t.forEach(t=>{const r=e.findIndex(e=>e.id===t);if(~r){const t=e[r];n.push(null!=t.value?t.value:r)}}),n}(r,t);return e.multiple?n:n[0]}),s=Ie("useGroup");function a(){const t=r.find(e=>!e.disabled);t&&"force"===e.mandatory&&!i.value.length&&(i.value=[t.id])}function o(t){if(e.multiple,i.value.length){const e=i.value[0],n=r.findIndex(t=>t.id===e);let s=(n+t)%r.length,a=r[s];for(;a.disabled&&s!==n;)s=(s+t)%r.length,a=r[s];if(a.disabled)return;i.value=[r[s].id]}else{const e=r.find(e=>!e.disabled);e&&(i.value=[e.id])}}C(()=>{a()}),y(()=>{n=!0}),E(()=>{for(let e=0;e<r.length;e++)r[e].useIndexAsValue&&(r[e].value=e)});const l={register:function(e,n){const i=e,a=Symbol.for(`${t.description}:id`),o=Te(a,null==s?void 0:s.vnode).indexOf(n);null==x(i.value)&&(i.value=o,i.useIndexAsValue=!0),o>-1?r.splice(o,0,i):r.push(i)},unregister:function(e){if(n)return;a();const t=r.findIndex(t=>t.id===e);r.splice(t,1)},selected:i,select:function(t,n){const s=r.find(e=>e.id===t);if(!n||!(null==s?void 0:s.disabled))if(e.multiple){const r=i.value.slice(),s=r.findIndex(e=>e===t),a=~s;if(n=n??!a,a&&e.mandatory&&r.length<=1)return;if(!a&&null!=e.max&&r.length+1>e.max)return;s<0&&n?r.push(t):s>=0&&!n&&r.splice(s,1),i.value=r}else{const r=i.value.includes(t);if(e.mandatory&&r)return;if(!r&&!n)return;i.value=n??!r?[t]:[]}},disabled:b(()=>e.disabled),prev:()=>o(r.length-1),next:()=>o(1),isSelected:e=>i.value.includes(e),selectedClass:b(()=>e.selectedClass),items:b(()=>r),getItemIndex:e=>function(e,t){const n=Db(e,[t]);return n.length?e.findIndex(e=>e.id===n[0]):-1}(r,e)};return T(t,l),l}function Db(e,t){const n=[];return t.forEach(t=>{const r=e.find(e=>Ee(t,e.value)),i=e[t];null!=(null==r?void 0:r.value)?n.push(r.id):(null==i?void 0:i.useIndexAsValue)&&n.push(i.id)}),n}const Vb=Symbol.for("vuetify:v-btn-toggle"),Rb=ne({...Eb(),...Tb()},"VBtnToggle");function Mb(e,t){const r=f(),i=n(!1);if(_e){const e=new IntersectionObserver(e=>{i.value=!!e.find(e=>e.isIntersecting)},t);N(()=>{e.disconnect()}),v(r,(t,n)=>{n&&(e.unobserve(n),i.value=!1),t&&e.observe(t)},{flush:"post"})}return{intersectionRef:r,isIntersecting:i}}te()({name:"VBtnToggle",props:Rb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,next:s,prev:a,select:o,selected:l}=Nb(e,Vb);return fe(()=>{const t=kb.filterProps(e);return i(kb,h({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:r,next:s,prev:a,select:o,selected:l})]}})}),{next:s,prev:a,select:o}}});const Ob=ne({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...ge(),...Qy(),...Xy({tag:"div"}),...me()},"VProgressCircular"),Lb=te()({name:"VProgressCircular",props:Ob(),setup(e,t){let{slots:n}=t;const r=2*Math.PI*20,o=f(),{themeClasses:u}=Se(e),{sizeClasses:c,sizeStyles:d}=Yy(e),{textColorClasses:h,textColorStyles:p}=Ky(()=>e.color),{textColorClasses:v,textColorStyles:m}=Ky(()=>e.bgColor),{intersectionRef:g,isIntersecting:y}=Mb(),{resizeRef:w,contentRect:_}=Ae(),I=b(()=>xe(parseFloat(e.modelValue),0,100)),S=b(()=>Number(e.width)),C=b(()=>d.value?Number(e.size):_.value?_.value.width:Math.max(S.value,32)),E=b(()=>20/(1-S.value/C.value)*2),k=b(()=>S.value/C.value*E.value),T=b(()=>de((100-I.value)/100*r));return D(()=>{g.value=o.value,w.value=o.value}),fe(()=>i(e.tag,{ref:o,class:a(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":y.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},u.value,c.value,h.value,e.class]),style:s([d.value,p.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:I.value},{default:()=>[l("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${E.value} ${E.value}`},[l("circle",{class:a(["v-progress-circular__underlay",v.value]),style:s(m.value),fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":k.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),l("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":k.value,"stroke-dasharray":r,"stroke-dashoffset":T.value},null)]),n.default&&l("div",{class:"v-progress-circular__content"},[n.default({value:I.value})])]})),{}}}),Pb={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Fb=ne({location:String},"location");function Bb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=Ne();return{locationStyles:o(()=>{if(!e.location)return{};const{side:i,align:s}=De(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function a(e){return n?n(e):0}const o={};return"center"!==i&&(t?o[Pb[i]]=`calc(100% - ${a(i)}px)`:o[i]=0),"center"!==s?t?o[Pb[s]]=`calc(100% - ${a(s)}px)`:o[s]=0:("center"===i?o.top=o.left="50%":o[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",o.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),o})}}const Ub=ne({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ge(),...Fb({location:"top"}),...ib(),...Xy(),...me()},"VProgressLinear"),$b=te()({name:"VProgressLinear",props:Ub(),emits:{"update:modelValue":e=>!0},setup(e,t){var n;let{slots:r}=t;const u=Ce(e,"modelValue"),{isRtl:c,rtlClasses:h}=Ne(),{themeClasses:p}=Se(e),{locationStyles:f}=Bb(e),{textColorClasses:v,textColorStyles:m}=Ky(()=>e.color),{backgroundColorClasses:g,backgroundColorStyles:y}=Gy(()=>e.bgColor||e.color),{backgroundColorClasses:b,backgroundColorStyles:w}=Gy(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:_,backgroundColorStyles:I}=Gy(()=>e.color),{roundedClasses:S}=sb(e),{intersectionRef:C,isIntersecting:E}=Mb(),k=o(()=>parseFloat(e.max)),T=o(()=>parseFloat(e.height)),A=o(()=>xe(parseFloat(e.bufferValue)/k.value*100,0,100)),x=o(()=>xe(parseFloat(u.value)/k.value*100,0,100)),N=o(()=>c.value!==e.reverse),D=o(()=>e.indeterminate?"fade-transition":"slide-x-transition"),V=Ve&&(null==(n=window.matchMedia)?void 0:n.call(window,"(forced-colors: active)").matches);function R(e){if(!C.value)return;const{left:t,right:n,width:r}=C.value.getBoundingClientRect(),i=N.value?r-e.clientX+(n-r):e.clientX-t;u.value=Math.round(i/r*k.value)}return fe(()=>i(e.tag,{ref:C,class:a(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&E.value,"v-progress-linear--reverse":N.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},S.value,p.value,h.value,e.class]),style:s([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?de(T.value):0,"--v-progress-linear-height":de(T.value),...e.absolute?f.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(u.value),k.value),onClick:e.clickable&&R},{default:()=>[e.stream&&l("div",{key:"stream",class:a(["v-progress-linear__stream",v.value]),style:{...m.value,[N.value?"left":"right"]:de(-T.value),borderTop:`${de(T.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${de(T.value/4)})`,width:de(100-A.value,"%"),"--v-progress-linear-stream-to":de(T.value*(N.value?1:-1))}},null),l("div",{class:a(["v-progress-linear__background",V?void 0:g.value]),style:s([y.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),l("div",{class:a(["v-progress-linear__buffer",V?void 0:b.value]),style:s([w.value,{opacity:parseFloat(e.bufferOpacity),width:de(A.value,"%")}])},null),i(d,{name:D.value},{default:()=>[e.indeterminate?l("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>l("div",{key:e,class:a(["v-progress-linear__indeterminate",e,V?void 0:_.value]),style:s(I.value)},null))]):l("div",{class:a(["v-progress-linear__determinate",V?void 0:_.value]),style:s([I.value,{width:de(x.value,"%")}])},null)]}),r.default&&l("div",{class:"v-progress-linear__content"},[r.default({value:x.value,buffer:A.value})])]})),{}}}),jb=ne({loading:[Boolean,String]},"loader");function zb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return{loaderClasses:b(()=>({[`${t}--loading`]:e.loading}))}}function qb(e,t){var n;let{slots:r}=t;return l("div",{class:a(`${e.name}__loader`)},[(null==(n=r.default)?void 0:n.call(r,{color:e.color,isActive:e.active}))||i($b,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Hb=["static","relative","fixed","absolute","sticky"],Kb=ne({position:{type:String,validator:e=>Hb.includes(e)}},"position");function Gb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();return{positionClasses:b(()=>e.position?`${t}--${e.position}`:void 0)}}function Wb(e,t){var n,r;const i=V("RouterLink"),s=b(()=>!(!e.href&&!e.to)),a=o(()=>(null==s?void 0:s.value)||Re(t,"click")||Re(e,"click"));if("string"==typeof i||!("useLink"in i)){const t=b(()=>e.href);return{isLink:s,isClickable:a,href:t,linkProps:S({href:t})}}const l=i.useLink({to:b(()=>e.to||""),replace:b(()=>e.replace)}),u=o(()=>e.to?l:void 0),c=function(){const e=Ie("useRoute");return o(()=>{var t;return null==(t=null==e?void 0:e.proxy)?void 0:t.$route})}(),d=o(()=>{var t,n,r;return!!u.value&&(e.exact?c.value?(null==(r=u.value.isExactActive)?void 0:r.value)&&Ee(u.value.route.value.query,c.value.query):(null==(n=u.value.isExactActive)?void 0:n.value)??!1:(null==(t=u.value.isActive)?void 0:t.value)??!1)}),h=o(()=>{var t;return e.to?null==(t=u.value)?void 0:t.route.value.href:e.href});return{isLink:s,isClickable:a,isActive:d,route:null==(n=u.value)?void 0:n.route,navigate:null==(r=u.value)?void 0:r.navigate,href:h,linkProps:S({href:h,"aria-current":b(()=>d.value?"page":void 0)})}}const Qb=ne({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Yb=!1;const Xb=Symbol("rippleStop");function Jb(e,t){e.style.transform=t,e.style.webkitTransform=t}function Zb(e){return"TouchEvent"===e.constructor.name}function ew(e){return"KeyboardEvent"===e.constructor.name}const tw={show(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null==(n=null==t?void 0:t._ripple)?void 0:n.enabled))return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",r.class&&(i.className+=` ${r.class}`);const{radius:a,scale:o,x:l,y:u,centerX:c,centerY:d}=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,s=0;if(!ew(e)){const n=t.getBoundingClientRect(),r=Zb(e)?e.touches[e.touches.length-1]:e;i=r.clientX-n.left,s=r.clientY-n.top}let a=0,o=.3;(null==(n=t._ripple)?void 0:n.circle)?(o=.15,a=t.clientWidth/2,a=r.center?a:a+Math.sqrt((i-a)**2+(s-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*a)/2+"px",u=(t.clientHeight-2*a)/2+"px";return{radius:a,scale:o,x:r.center?l:i-a+"px",y:r.center?u:s-a+"px",centerX:l,centerY:u}}(e,t,r),h=2*a+"px";s.className="v-ripple__animation",s.style.width=h,s.style.height=h,t.appendChild(i);const p=window.getComputedStyle(t);p&&"static"===p.position&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),Jb(s,`translate(${l}, ${u}) scale3d(${o},${o},${o})`),s.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),Jb(s,`translate(${c}, ${d}) scale3d(1,1,1)`)})})},hide(e){var t;if(!(null==(t=null==e?void 0:e._ripple)?void 0:t.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(0===n.length)return;const r=Array.from(n).findLast(e=>!e.dataset.isHiding);if(!r)return;r.dataset.isHiding="true";const i=performance.now()-Number(r.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{var t;1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),(null==(t=r.parentNode)?void 0:t.parentNode)===e&&e.removeChild(r.parentNode)},300)},s)}};function nw(e){return void 0===e||!!e}function rw(e){const t={},n=e.currentTarget;if((null==n?void 0:n._ripple)&&!n._ripple.touched&&!e[Xb]){if(e[Xb]=!0,Zb(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||ew(e),n._ripple.class&&(t.class=n._ripple.class),Zb(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{tw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var e;(null==(e=null==n?void 0:n._ripple)?void 0:e.showTimerCommit)&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},80)}else tw.show(e,n,t)}}function iw(e){e[Xb]=!0}function sw(e){const t=e.currentTarget;if(null==t?void 0:t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout(()=>{sw(e)}));window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),tw.hide(t)}}function aw(e){const t=e.currentTarget;(null==t?void 0:t._ripple)&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let ow=!1;function lw(e,t){!ow&&t.includes(e.key)&&(ow=!0,rw(e))}function uw(e){ow=!1,sw(e)}function cw(e){ow&&(ow=!1,sw(e))}function dw(e,t,n){const{value:r,modifiers:i}=t,s=nw(r);s||tw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=i.center,e._ripple.circle=i.circle;const a=be(r)?r:{};a.class&&(e._ripple.class=a.class);const o=a.keys??["Enter","Space"];if(e._ripple.keyDownHandler=e=>lw(e,o),s&&!n){if(i.stop)return e.addEventListener("touchstart",iw,{passive:!0}),void e.addEventListener("mousedown",iw);e.addEventListener("touchstart",rw,{passive:!0}),e.addEventListener("touchend",sw,{passive:!0}),e.addEventListener("touchmove",aw,{passive:!0}),e.addEventListener("touchcancel",sw),e.addEventListener("mousedown",rw),e.addEventListener("mouseup",sw),e.addEventListener("mouseleave",sw),e.addEventListener("keydown",e=>lw(e,o)),e.addEventListener("keyup",uw),e.addEventListener("blur",cw),e.addEventListener("dragstart",sw,{passive:!0})}else!s&&n&&hw(e)}function hw(e){var t;e.removeEventListener("mousedown",rw),e.removeEventListener("touchstart",rw),e.removeEventListener("touchend",sw),e.removeEventListener("touchmove",aw),e.removeEventListener("touchcancel",sw),e.removeEventListener("mouseup",sw),e.removeEventListener("mouseleave",sw),(null==(t=e._ripple)?void 0:t.keyDownHandler)&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",uw),e.removeEventListener("dragstart",sw),e.removeEventListener("blur",cw)}const pw={mounted:function(e,t){dw(e,t,!1)},unmounted:function(e){hw(e),delete e._ripple},updated:function(e,t){if(t.value===t.oldValue)return;dw(e,t,nw(t.oldValue))}},fw=ne({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Vb},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:ye,appendIcon:ye,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...hb(),...ge(),...vb(),...eb(),...Sb(),...Ab(),...jb(),...Fb(),...Kb(),...ib(),...Qb(),...Qy(),...Xy({tag:"button"}),...me(),...bb({variant:"elevated"})},"VBtn"),vw=te()({name:"VBtn",props:fw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:s}=Se(e),{borderClasses:a}=pb(e),{densityClasses:u}=mb(e),{dimensionStyles:c}=tb(e),{elevationClasses:d}=Cb(e),{loaderClasses:p}=zb(e),{locationStyles:f}=Bb(e),{positionClasses:m}=Gb(e),{roundedClasses:y}=sb(e),{sizeClasses:_,sizeStyles:I}=Yy(e),S=xb(e,e.symbol,!1),C=Wb(e,n),E=o(()=>{var t;return void 0!==e.active?e.active:C.isLink.value?null==(t=C.isActive)?void 0:t.value:null==S?void 0:S.isSelected.value}),k=b(()=>E.value?e.activeColor??e.color:e.color),T=o(()=>{var t,n;return{color:(null==S?void 0:S.isSelected.value)&&(!C.isLink.value||(null==(t=C.isActive)?void 0:t.value))||!S||(null==(n=C.isActive)?void 0:n.value)?k.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:A,colorStyles:x,variantClasses:N}=wb(T),D=o(()=>(null==S?void 0:S.disabled.value)||e.disabled),V=b(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),M=o(()=>{if(void 0!==e.value&&"symbol"!=typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function O(e){var t;D.value||C.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===n.target)||(null==(t=C.navigate)||t.call(C,e),null==S||S.toggle())}return function(e,t){v(()=>{var t;return null==(t=e.isActive)?void 0:t.value},n=>{e.isLink.value&&null!=n&&t&&g(()=>{t(n)})},{immediate:!0})}(C,null==S?void 0:S.select),fe(()=>{const t=C.isLink.value?"a":e.tag,n=!(!e.prependIcon&&!r.prepend),o=!(!e.appendIcon&&!r.append),v=!(!e.icon||!0===e.icon);return w(i(t,h({type:"a"===t?void 0:"button",class:["v-btn",null==S?void 0:S.selectedClass.value,{"v-btn--active":E.value,"v-btn--block":e.block,"v-btn--disabled":D.value,"v-btn--elevated":V.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},s.value,a.value,A.value,u.value,d.value,p.value,m.value,y.value,_.value,N.value,e.class],style:[x.value,c.value,f.value,I.value,e.style],"aria-busy":!!e.loading||void 0,disabled:D.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:O,value:M.value},C.linkProps),{default:()=>{var t;return[yb(!0,"v-btn"),!e.icon&&n&&l("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?i(qy,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},r.prepend):i(Zy,{key:"prepend-icon",icon:e.prependIcon},null)]),l("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&v?i(Zy,{key:"content-icon",icon:e.icon},null):i(qy,{key:"content-defaults",disabled:!v,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var t;return[(null==(t=r.default)?void 0:t.call(r))??R(e.text)]}})]),!e.icon&&o&&l("span",{key:"append",class:"v-btn__append"},[r.append?i(qy,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},r.append):i(Zy,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&l("span",{key:"loader",class:"v-btn__loader"},[(null==(t=r.loader)?void 0:t.call(r))??i(Lb,{color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[pw,!D.value&&e.ripple,"",{center:!!e.icon}]])}),{group:S}}}),mw=ne({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...ge(),...me()},"VDivider"),gw=te()({name:"VDivider",props:mw(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:i}=Se(e),{textColorClasses:u,textColorStyles:c}=Ky(()=>e.color),d=o(()=>{const t={};return e.length&&(t[e.vertical?"height":"width"]=de(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=de(e.thickness)),t});return fe(()=>{const t=l("hr",{class:a([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},i.value,u.value,e.class]),style:s([d.value,c.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":n.role&&"separator"!==n.role?void 0:e.vertical?"vertical":"horizontal",role:`${n.role||"separator"}`},null);return r.default?l("div",{class:a(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[t,l("div",{class:"v-divider__content"},[r.default()]),t]):t}),{}}}),yw=ne({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function bw(e,t,n){return te()({name:e,props:yw({mode:n,origin:t}),setup(t,n){let{slots:r}=n;const i={onBeforeEnter(e){t.origin&&(e.style.transformOrigin=t.origin)},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:i}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${r}px`,e.style.height=`${i}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&(null==e?void 0:e._transitionInitialStyles)){const{position:t,top:n,left:r,width:i,height:s}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=r||"",e.style.width=i||"",e.style.height=s||""}}};return()=>{const n=t.group?c:d;return p(n,{name:t.disabled?"":e,css:!t.disabled,...t.group?void 0:{mode:t.mode},...t.disabled?{}:i},r.default)}}})}function ww(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return te()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(n,r){let{slots:i}=r;const s=n.group?c:d;return()=>p(s,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},i.default)}})}function _w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"width":"height",n=M(`offset-${t}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[t]:e.style[t]}},onEnter(r){const i=r._initialStyle;if(!i)return;r.style.setProperty("transition","none","important"),r.style.overflow="hidden";const s=`${r[n]}px`;r.style[t]="0",r.offsetHeight,r.style.transition=i.transition,e&&r._parent&&r._parent.classList.add(e),requestAnimationFrame(()=>{r.style[t]=s})},onAfterEnter:i,onEnterCancelled:i,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[t]:e.style[t]},e.style.overflow="hidden",e.style[t]=`${e[n]}px`,e.offsetHeight,requestAnimationFrame(()=>e.style[t]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(t){e&&t._parent&&t._parent.classList.remove(e),i(t)}function i(e){if(!e._initialStyle)return;const n=e._initialStyle[t];e.style.overflow=e._initialStyle.overflow,null!=n&&(e.style[t]=n),delete e._initialStyle}}const Iw=ne({target:[Object,Array]},"v-dialog-transition"),Sw=new WeakMap,Cw=te()({name:"VDialogTransition",props:Iw(),setup(e,t){let{slots:n}=t;const r={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(t,n){var r;await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),t.style.visibility="";const i=kw(e.target,t),{x:s,y:a,sx:o,sy:l,speed:u}=i;Sw.set(t,i);const c=Me(t,[{transform:`translate(${s}px, ${a}px) scale(${o}, ${l})`,opacity:0},{}],{duration:225*u,easing:Pe});null==(r=Ew(t))||r.forEach(e=>{Me(e,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*u,easing:Le})}),c.finished.then(()=>n())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(t,n){var r;let i;await new Promise(e=>requestAnimationFrame(e)),i=!Sw.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?kw(e.target,t):Sw.get(t);const{x:s,y:a,sx:o,sy:l,speed:u}=i;Me(t,[{},{transform:`translate(${s}px, ${a}px) scale(${o}, ${l})`,opacity:0}],{duration:125*u,easing:Oe}).finished.then(()=>n()),null==(r=Ew(t))||r.forEach(e=>{Me(e,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*u,easing:Le})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>e.target?i(d,h({name:"dialog-transition"},r,{css:!1}),n):i(d,{name:"dialog-transition"},n)}});function Ew(e){var t;const n=null==(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))?void 0:t.children;return n&&[...n]}function kw(e,t){const n=Fe(e),r=Be(t),[i,s]=getComputedStyle(t).transformOrigin.split(" ").map(e=>parseFloat(e)),[a,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;"left"===a||"left"===o?l-=n.width/2:"right"!==a&&"right"!==o||(l+=n.width/2);let u=n.top+n.height/2;"top"===a||"top"===o?u-=n.height/2:"bottom"!==a&&"bottom"!==o||(u+=n.height/2);const c=n.width/r.width,d=n.height/r.height,h=Math.max(1,c,d),p=c/h||0,f=d/h||0,v=r.width*r.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,10*(v-.12)+1):1;return{x:l-(i+r.left),y:u-(s+r.top),sx:p,sy:f,speed:m}}bw("fab-transition","center center","out-in"),bw("dialog-bottom-transition"),bw("dialog-top-transition");const Tw=bw("fade-transition");bw("scale-transition"),bw("scroll-x-transition"),bw("scroll-x-reverse-transition"),bw("scroll-y-transition"),bw("scroll-y-reverse-transition"),bw("slide-x-transition"),bw("slide-x-reverse-transition");const Aw=bw("slide-y-transition");bw("slide-y-reverse-transition");const xw=ww("expand-transition",_w()),Nw=ww("expand-x-transition",_w("",!0)),Dw=Symbol.for("vuetify:list");function Vw(){let{filterable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterable:!1};const t=A(Dw,{filterable:!1,hasPrepend:n(!1),updateHasPrepend:()=>null}),r={filterable:t.filterable||e,hasPrepend:n(!1),updateHasPrepend:e=>{e&&(r.hasPrepend.value=e)}};return T(Dw,r),t}function Rw(){return A(Dw,null)}const Mw=e=>{const t={activate:t=>{let{id:n,value:r,activated:i}=t;return n=O(n),e&&!r&&1===i.size&&i.has(n)||(r?i.add(n):i.delete(n)),i},in:(e,n,r)=>{let i=new Set;if(null!=e)for(const s of ke(e))i=t.activate({id:s,value:!0,activated:new Set(i),children:n,parents:r});return i},out:e=>Array.from(e)};return t},Ow=e=>{const t=Mw(e);return{activate:e=>{let{activated:n,id:r,...i}=e;r=O(r);const s=n.has(r)?new Set([r]):new Set;return t.activate({...i,id:r,activated:s})},in:(e,n,r)=>{let i=new Set;if(null!=e){const s=ke(e);s.length&&(i=t.in(s.slice(0,1),n,r))}return i},out:(e,n,r)=>t.out(e,n,r)}},Lw={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){const e=new Set;e.add(t);let n=i.get(t);for(;null!=n;)e.add(n),n=i.get(n);return e}return r.delete(t),r},select:()=>null},Pw={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){let e=i.get(t);for(r.add(t);null!=e&&e!==t;)r.add(e),e=i.get(e);return r}return r.delete(t),r},select:()=>null},Fw={open:Pw.open,select:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(!n)return r;const s=[];let a=i.get(t);for(;null!=a;)s.push(a),a=i.get(a);return new Set(s)}},Bw=e=>{const t={select:t=>{let{id:n,value:r,selected:i}=t;if(n=O(n),e&&!r){const e=Array.from(i.entries()).reduce((e,t)=>{let[n,r]=t;return"on"===r&&e.push(n),e},[]);if(1===e.length&&e[0]===n)return i}return i.set(n,r?"on":"off"),i},in:(e,n,r,i)=>{const s=new Map;for(const a of e||[])t.select({id:a,value:!0,selected:s,children:n,parents:r,disabled:i});return s},out:e=>{const t=[];for(const[n,r]of e.entries())"on"===r&&t.push(n);return t}};return t},Uw=e=>{const t=Bw(e);return{select:e=>{let{selected:n,id:r,...i}=e;r=O(r);const s=n.has(r)?new Map([[r,n.get(r)]]):new Map;return t.select({...i,id:r,selected:s})},in:(e,n,r,i)=>(null==e?void 0:e.length)?t.in(e.slice(0,1),n,r,i):new Map,out:(e,n,r)=>t.out(e,n,r)}},$w=e=>{const t={select:t=>{let{id:n,value:r,selected:i,children:s,parents:a,disabled:o}=t;n=O(n);const l=new Map(i),u=[n];for(;u.length;){const e=u.shift();o.has(e)||i.set(O(e),r?"on":"off"),s.has(e)&&u.push(...s.get(e))}let c=O(a.get(n));for(;c;){let e=!0,t=!0;for(const n of s.get(c)){const r=O(n);if(!o.has(r)&&("on"!==i.get(r)&&(e=!1),i.has(r)&&"off"!==i.get(r)&&(t=!1),!e&&!t))break}i.set(c,e?"on":t?"off":"indeterminate"),c=O(a.get(c))}if(e&&!r){if(0===Array.from(i.entries()).reduce((e,t)=>{let[n,r]=t;return"on"===r&&e.push(n),e},[]).length)return l}return i},in:(e,n,r,i)=>{let s=new Map;for(const a of e||[])s=t.select({id:a,value:!0,selected:s,children:n,parents:r,disabled:i});return s},out:(e,t)=>{const n=[];for(const[r,i]of e.entries())"on"!==i||t.has(r)||n.push(r);return n}};return t},jw=Symbol.for("vuetify:nested"),zw={id:n(),root:{register:()=>null,unregister:()=>null,children:f(new Map),parents:f(new Map),disabled:f(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:f(!1),selectable:f(!1),opened:f(new Set),activated:f(new Set),selected:f(new Map),selectedValues:f([]),getPath:()=>[]}},qw=ne({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Hw=e=>{let t=!1;const r=n(new Map),i=n(new Map),s=n(new Set),a=Ce(e,"opened",e.opened,e=>new Set(Array.isArray(e)?e.map(e=>O(e)):e),e=>[...e.values()]),l=o(()=>{if("object"==typeof e.activeStrategy)return e.activeStrategy;if("function"==typeof e.activeStrategy)return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return(e=>{const t=Mw(e);return{activate:e=>{let{id:n,activated:r,children:i,...s}=e;return n=O(n),i.has(n)?r:t.activate({id:n,activated:r,children:i,...s})},in:t.in,out:t.out}})(e.mandatory);case"single-leaf":return(e=>{const t=Ow(e);return{activate:e=>{let{id:n,activated:r,children:i,...s}=e;return n=O(n),i.has(n)?r:t.activate({id:n,activated:r,children:i,...s})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Mw(e.mandatory);default:return Ow(e.mandatory)}}),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;if("function"==typeof e.selectStrategy)return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return(e=>{const t=Uw(e);return{select:e=>{let{id:n,selected:r,children:i,...s}=e;return n=O(n),i.has(n)?r:t.select({id:n,selected:r,children:i,...s})},in:t.in,out:t.out}})(e.mandatory);case"leaf":return(e=>{const t=Bw(e);return{select:e=>{let{id:n,selected:r,children:i,...s}=e;return n=O(n),i.has(n)?r:t.select({id:n,selected:r,children:i,...s})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Bw(e.mandatory);case"single-independent":return Uw(e.mandatory);case"trunk":return(e=>{const t=$w(e);return{select:t.select,in:t.in,out:(e,t,n)=>{const r=[];for(const[i,s]of e.entries())if("on"===s){if(n.has(i)){const t=n.get(i);if("on"===e.get(t))continue}r.push(i)}return r}}})(e.mandatory);default:return $w(e.mandatory)}}),c=o(()=>{if("object"==typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return Fw;case"single":return Lw;default:return Pw}}),d=Ce(e,"activated",e.activated,e=>l.value.in(e,r.value,i.value),e=>l.value.out(e,r.value,i.value)),h=Ce(e,"selected",e.selected,e=>u.value.in(e,r.value,i.value,s.value),e=>u.value.out(e,r.value,i.value));function p(e){const t=[];let n=O(e);for(;null!=n;)t.unshift(n),n=i.value.get(n);return t}y(()=>{t=!0});const f=Ie("nested"),v=new Set,m={id:n(),root:{opened:a,activatable:b(()=>e.activatable),selectable:b(()=>e.selectable),activated:d,selected:h,selectedValues:o(()=>{const e=[];for(const[t,n]of h.value.entries())"on"===n&&e.push(t);return e}),register:(e,t,n,a)=>{if(v.has(e))return p(e).map(String).join(" -> "),void p(t).concat(e).map(String).join(" -> ");v.add(e),t&&e!==t&&i.value.set(e,t),n&&s.value.add(e),a&&r.value.set(e,[]),null!=t&&r.value.set(t,[...r.value.get(t)||[],e])},unregister:e=>{if(t)return;v.delete(e),r.value.delete(e),s.value.delete(e);const n=i.value.get(e);if(n){const t=r.value.get(n)??[];r.value.set(n,t.filter(t=>t!==e))}i.value.delete(e)},open:(e,t,n)=>{f.emit("click:open",{id:e,value:t,path:p(e),event:n});const s=c.value.open({id:e,value:t,opened:new Set(a.value),children:r.value,parents:i.value,event:n});s&&(a.value=s)},openOnSelect:(e,t,n)=>{const s=c.value.select({id:e,value:t,selected:new Map(h.value),opened:new Set(a.value),children:r.value,parents:i.value,event:n});s&&(a.value=s)},select:(e,t,n)=>{f.emit("click:select",{id:e,value:t,path:p(e),event:n});const a=u.value.select({id:e,value:t,selected:new Map(h.value),children:r.value,parents:i.value,disabled:s.value,event:n});a&&(h.value=a),m.root.openOnSelect(e,t,n)},activate:(t,n,s)=>{if(!e.activatable)return m.root.select(t,!0,s);f.emit("click:activate",{id:t,value:n,path:p(t),event:s});const a=l.value.activate({id:t,value:n,activated:new Set(d.value),children:r.value,parents:i.value,event:s});if(a.size!==d.value.size)d.value=a;else{for(const e of a)if(!d.value.has(e))return void(d.value=a);for(const e of d.value)if(!a.has(e))return void(d.value=a)}},children:r,parents:i,disabled:s,getPath:p}};return T(jw,m),m.root},Kw=(e,n,r)=>{const i=A(jw,zw),s=Symbol("nested item"),a=o(()=>O(t(e))??s),l={...i,id:a,open:(e,t)=>i.root.open(a.value,e,t),openOnSelect:(e,t)=>i.root.openOnSelect(a.value,e,t),isOpen:o(()=>i.root.opened.value.has(a.value)),parent:o(()=>i.root.parents.value.get(a.value)),activate:(e,t)=>i.root.activate(a.value,e,t),isActivated:o(()=>i.root.activated.value.has(a.value)),select:(e,t)=>i.root.select(a.value,e,t),isSelected:o(()=>"on"===i.root.selected.value.get(a.value)),isIndeterminate:o(()=>"indeterminate"===i.root.selected.value.get(a.value)),isLeaf:o(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return m(()=>{i.isGroupActivator||i.root.register(a.value,i.id.value,t(n),r)}),y(()=>{i.isGroupActivator||i.root.unregister(a.value)}),r&&T(jw,l),l};function Gw(){const e=n(!1);C(()=>{window.requestAnimationFrame(()=>{e.value=!0})});return{ssrBootStyles:b(()=>e.value?void 0:{transition:"none !important"}),isBooted:L(e)}}const Ww=Ue({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return(()=>{const e=A(jw,zw);T(jw,{...e,isGroupActivator:!0})})(),()=>{var e;return null==(e=n.default)?void 0:e.call(n)}}}),Qw=ne({activeColor:String,baseColor:String,color:String,collapseIcon:{type:ye,default:"$collapse"},disabled:Boolean,expandIcon:{type:ye,default:"$expand"},rawId:[String,Number],prependIcon:ye,appendIcon:ye,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ge(),...Xy()},"VListGroup"),Yw=te()({name:"VListGroup",props:Qw(),setup(e,t){let{slots:n}=t;const{isOpen:r,open:u,id:c}=Kw(()=>e.value,()=>e.disabled,!0),d=o(()=>`v-list-group--id-${String(e.rawId??c.value)}`),h=Rw(),{isBooted:p}=Gw();function f(e){var t;["INPUT","TEXTAREA"].includes(null==(t=e.target)?void 0:t.tagName)||u(!r.value,e)}const v=o(()=>({onClick:f,class:"v-list-group__header",id:d.value})),m=o(()=>r.value?e.collapseIcon:e.expandIcon),g=o(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&m.value,appendIcon:e.appendIcon||!e.subgroup&&m.value,title:e.title,value:e.value}}));return fe(()=>i(e.tag,{class:a(["v-list-group",{"v-list-group--prepend":null==h?void 0:h.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":r.value},e.class]),style:s(e.style)},{default:()=>[n.activator&&i(qy,{defaults:g.value},{default:()=>[i(Ww,null,{default:()=>[n.activator({props:v.value,isOpen:r.value})]})]}),i(ob,{transition:{component:xw},disabled:!p.value},{default:()=>{var e;return[w(l("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[null==(e=n.default)?void 0:e.call(n)]),[[I,r.value]])]}})]})),{isOpen:r}}}),Xw=ne({opacity:[Number,String],...ge(),...Xy()},"VListItemSubtitle"),Jw=te()({name:"VListItemSubtitle",props:Xw(),setup(e,t){let{slots:n}=t;return fe(()=>i(e.tag,{class:a(["v-list-item-subtitle",e.class]),style:s([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),Zw=$e("v-list-item-title"),e_=ne({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:ye,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:ye,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:ze(),onClickOnce:ze(),...hb(),...ge(),...vb(),...eb(),...Sb(),...ib(),...Qb(),...Xy(),...me(),...bb({variant:"text"})},"VListItem"),t_=te()({name:"VListItem",directives:{vRipple:pw},props:e_(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:r,emit:s}=t;const a=Wb(e,n),u=o(()=>void 0===e.value?a.href.value:e.value),{activate:c,isActivated:d,select:p,isOpen:f,isSelected:g,isIndeterminate:y,isGroupActivator:I,root:S,parent:C,openOnSelect:E,id:k}=Kw(u,()=>e.disabled,!1),T=Rw(),A=o(()=>{var t;return!1!==e.active&&(e.active||(null==(t=a.isActive)?void 0:t.value)||(S.activatable.value?d.value:g.value))}),x=b(()=>!1!==e.link&&a.isLink.value),N=o(()=>!!T&&(S.selectable.value||S.activatable.value||null!=e.value)),D=o(()=>!e.disabled&&!1!==e.link&&(e.link||a.isClickable.value||N.value)),V=b(()=>e.rounded||e.nav),M=b(()=>e.color??e.activeColor),O=b(()=>({color:A.value?M.value??e.baseColor:e.baseColor,variant:e.variant}));function L(){null!=C.value&&S.open(C.value,!0),E(!0)}v(()=>{var e;return null==(e=a.isActive)?void 0:e.value},e=>{e&&L()}),m(()=>{var e;(null==(e=a.isActive)?void 0:e.value)&&L()});const{themeClasses:P}=Se(e),{borderClasses:F}=pb(e),{colorClasses:B,colorStyles:U,variantClasses:$}=wb(O),{densityClasses:j}=mb(e),{dimensionStyles:z}=tb(e),{elevationClasses:q}=Cb(e),{roundedClasses:H}=sb(V),K=b(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),G=b(()=>void 0!==e.ripple&&e.ripple&&(null==T?void 0:T.filterable)?{keys:["Enter"]}:e.ripple),W=o(()=>({isActive:A.value,select:p,isOpen:f.value,isSelected:g.value,isIndeterminate:y.value}));function Q(t){var n,r;s("click",t),["INPUT","TEXTAREA"].includes(null==(n=t.target)?void 0:n.tagName)||D.value&&(null==(r=a.navigate)||r.call(a,t),I||(S.activatable.value?c(!d.value,t):(S.selectable.value||null!=e.value)&&p(!g.value,t)))}function Y(e){const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||("Enter"===e.key||" "===e.key&&!(null==T?void 0:T.filterable))&&(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",e)))}return fe(()=>{const t=x.value?"a":e.tag,n=r.title||null!=e.title,s=r.subtitle||null!=e.subtitle,o=!(!e.appendAvatar&&!e.appendIcon),u=!(!o&&!r.append),c=!(!e.prependAvatar&&!e.prependIcon),p=!(!c&&!r.prepend);return null==T||T.updateHasPrepend(p),e.activeColor&&je("active-color",["color","base-color"]),w(i(t,h({class:["v-list-item",{"v-list-item--active":A.value,"v-list-item--disabled":e.disabled,"v-list-item--link":D.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!p&&(null==T?void 0:T.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&A.value},P.value,F.value,B.value,j.value,q.value,K.value,H.value,$.value,e.class],style:[U.value,z.value,e.style],tabindex:D.value?T?-2:0:void 0,"aria-selected":N.value?S.activatable.value?d.value:S.selectable.value?g.value:A.value:void 0,onClick:Q,onKeydown:D.value&&!x.value&&Y},a.linkProps),{default:()=>{var t;return[yb(D.value||A.value,"v-list-item"),p&&l("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?i(qy,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var e;return[null==(e=r.prepend)?void 0:e.call(r,W.value)]}}):l(_,null,[e.prependAvatar&&i(Ib,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(Zy,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),l("div",{class:"v-list-item__spacer"},null)]),l("div",{class:"v-list-item__content","data-no-activator":""},[n&&i(Zw,{key:"title"},{default:()=>{var t;return[(null==(t=r.title)?void 0:t.call(r,{title:e.title}))??R(e.title)]}}),s&&i(Jw,{key:"subtitle"},{default:()=>{var t;return[(null==(t=r.subtitle)?void 0:t.call(r,{subtitle:e.subtitle}))??R(e.subtitle)]}}),null==(t=r.default)?void 0:t.call(r,W.value)]),u&&l("div",{key:"append",class:"v-list-item__append"},[r.append?i(qy,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var e;return[null==(e=r.append)?void 0:e.call(r,W.value)]}}):l(_,null,[e.appendIcon&&i(Zy,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(Ib,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),l("div",{class:"v-list-item__spacer"},null)])]}}),[[pw,D.value&&G.value]])}),{activate:c,isActivated:d,isGroupActivator:I,isSelected:g,list:T,select:p,root:S,id:k,link:a}}}),n_=ne({color:String,inset:Boolean,sticky:Boolean,title:String,...ge(),...Xy()},"VListSubheader"),r_=te()({name:"VListSubheader",props:n_(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:o}=Ky(()=>e.color);return fe(()=>{const t=!(!n.default&&!e.title);return i(e.tag,{class:a(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},r.value,e.class]),style:s([{textColorStyles:o},e.style])},{default:()=>{var r;return[t&&l("div",{class:"v-list-subheader__text"},[(null==(r=n.default)?void 0:r.call(n))??e.title])]}})}),{}}}),i_=ne({items:Array,returnObject:Boolean},"VListChildren"),s_=te()({name:"VListChildren",props:i_(),setup(e,t){let{slots:n}=t;return Vw(),()=>{var t,r;return(null==(t=n.default)?void 0:t.call(n))??(null==(r=e.items)?void 0:r.map(t=>{var r,s;let{children:a,props:o,type:l,raw:u}=t;if("divider"===l)return(null==(r=n.divider)?void 0:r.call(n,{props:o}))??i(gw,o,null);if("subheader"===l)return(null==(s=n.subheader)?void 0:s.call(n,{props:o}))??i(r_,o,null);const c={subtitle:n.subtitle?e=>{var t;return null==(t=n.subtitle)?void 0:t.call(n,{...e,item:u})}:void 0,prepend:n.prepend?e=>{var t;return null==(t=n.prepend)?void 0:t.call(n,{...e,item:u})}:void 0,append:n.append?e=>{var t;return null==(t=n.append)?void 0:t.call(n,{...e,item:u})}:void 0,title:n.title?e=>{var t;return null==(t=n.title)?void 0:t.call(n,{...e,item:u})}:void 0},d=Yw.filterProps(o);return a?i(Yw,h(d,{value:e.returnObject?u:null==o?void 0:o.value,rawId:null==o?void 0:o.value}),{activator:t=>{let{props:r}=t;const s=h(o,r,{value:e.returnObject?u:o.value});return n.header?n.header({props:s}):i(t_,s,c)},default:()=>i(s_,{items:a,returnObject:e.returnObject},n)}):n.item?n.item({props:o}):i(t_,h(o,{value:e.returnObject?u:o.value}),c)}))}}}),a_=ne({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),o_=new Set(["item","divider","subheader"]);function l_(e,t){const n=Ke(t,e.itemTitle,t),r=Ke(t,e.itemValue,n),i=Ke(t,e.itemChildren),s=!0===e.itemProps?"object"!=typeof t||null==t||Array.isArray(t)?void 0:"children"in t?Ge(t,["children"]):t:Ke(t,e.itemProps);let a=Ke(t,e.itemType,"item");o_.has(a)||(a="item");const o={title:n,value:r,...s};return{type:a,title:String(o.title??""),value:o.value,props:o,children:"item"===a&&Array.isArray(i)?u_(e,i):void 0,raw:t}}function u_(e,t){const n=He(e,l_.neededProps),r=[];for(const i of t)r.push(l_(n,i));return r}l_.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];const c_=new Set(["item","divider","subheader"]);function d_(e,t){const n=qe(t)?t:Ke(t,e.itemTitle),r=qe(t)?t:Ke(t,e.itemValue,void 0),i=Ke(t,e.itemChildren),s=!0===e.itemProps?Ge(t,["children"]):Ke(t,e.itemProps);let a=Ke(t,e.itemType,"item");c_.has(a)||(a="item");const o={title:n,value:r,...s};return{type:a,title:o.title,value:o.value,props:o,children:"item"===a&&i?h_(e,i):void 0,raw:t}}function h_(e,t){const n=[];for(const r of t)n.push(d_(e,r));return n}const p_=ne({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:ye,collapseIcon:ye,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":ze(),"onClick:select":ze(),"onUpdate:opened":ze(),...qw({selectStrategy:"single-leaf",openStrategy:"list"}),...hb(),...ge(),...vb(),...eb(),...Sb(),...a_(),...ib(),...Xy(),...me(),...bb({variant:"text"})},"VList"),f_=te()({name:"VList",props:p_(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:r}=t;const{items:l}=function(e){return{items:o(()=>h_(e,e.items))}}(e),{themeClasses:u}=Se(e),{backgroundColorClasses:c,backgroundColorStyles:d}=Gy(()=>e.bgColor),{borderClasses:h}=pb(e),{densityClasses:p}=mb(e),{dimensionStyles:v}=tb(e),{elevationClasses:m}=Cb(e),{roundedClasses:g}=sb(e),{children:y,open:w,parents:_,select:I,getPath:S}=Hw(e),C=b(()=>e.lines?`v-list--${e.lines}-line`:void 0),E=b(()=>e.activeColor),k=b(()=>e.baseColor),T=b(()=>e.color);Vw({filterable:e.filterable}),re({VListGroup:{activeColor:E,baseColor:k,color:T,expandIcon:b(()=>e.expandIcon),collapseIcon:b(()=>e.collapseIcon)},VListItem:{activeClass:b(()=>e.activeClass),activeColor:E,baseColor:k,color:T,density:b(()=>e.density),disabled:b(()=>e.disabled),lines:b(()=>e.lines),nav:b(()=>e.nav),slim:b(()=>e.slim),variant:b(()=>e.variant)}});const A=n(!1),x=f();function N(e){A.value=!0}function D(e){A.value=!1}function V(e){var t;A.value||e.relatedTarget&&(null==(t=x.value)?void 0:t.contains(e.relatedTarget))||O()}function R(e){const t=e.target;if(x.value&&("INPUT"!==t.tagName||!["Home","End"].includes(e.key))&&"TEXTAREA"!==t.tagName){if("ArrowDown"===e.key)O("next");else if("ArrowUp"===e.key)O("prev");else if("Home"===e.key)O("first");else{if("End"!==e.key)return;O("last")}e.preventDefault()}}function M(e){A.value=!0}function O(e){if(x.value)return We(x.value,e)}return fe(()=>i(e.tag,{ref:x,class:a(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},u.value,c.value,h.value,p.value,m.value,C.value,g.value,e.class]),style:s([d.value,v.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:N,onFocusout:D,onFocus:V,onKeydown:R,onMousedown:M},{default:()=>[i(s_,{items:l.value,returnObject:e.returnObject},r)]})),{open:w,select:I,focus:O,children:y,parents:_,getPath:S}}});function v_(e,t){return{x:e.x+t.x,y:e.y+t.y}}function m_(e,t){if("top"===e.side||"bottom"===e.side){const{side:n,align:r}=e;return v_({x:"left"===r?0:"center"===r?t.width/2:"right"===r?t.width:r,y:"top"===n?0:"bottom"===n?t.height:n},t)}if("left"===e.side||"right"===e.side){const{side:n,align:r}=e;return v_({x:"left"===n?0:"right"===n?t.width:n,y:"top"===r?0:"center"===r?t.height/2:"bottom"===r?t.height:r},t)}return v_({x:t.width/2,y:t.height/2},t)}const g_={static:function(){},connected:function(e,t,n){(Array.isArray(e.target.value)||Ye(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:i}=ie(()=>{const n=De(t.location,e.isRtl.value),r="overlap"===t.origin?n:"auto"===t.origin?Xe(n):De(t.origin,e.isRtl.value);return n.side===r.side&&n.align===Je(r).align?{preferredAnchor:Ze(n),preferredOrigin:Ze(r)}:{preferredAnchor:n,preferredOrigin:r}}),[s,a,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>o(()=>{const n=parseFloat(t[e]);return isNaN(n)?1/0:n})),c=o(()=>{if(Array.isArray(t.offset))return t.offset;if("string"==typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"==typeof t.offset?[t.offset,0]:[0,0]});let d=!1,h=-1;const p=new et(4),f=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(e=>{e!==h&&p.clear(),requestAnimationFrame(e=>{h=e})}),p.isFull){const e=p.values();if(Ee(e.at(-1),e.at(-3))&&!Ee(e.at(-1),e.at(-2)))return}const e=y();e&&p.push(e.flipped)});let m=new tt({x:0,y:0,width:0,height:0});function y(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(m=Fe(e.target.value));const t=function(e,t){const n=Be(e);t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0);return n.y-=parseFloat(e.style.top||0),n}(e.contentEl.value,e.isRtl.value),o=nt(e.contentEl.value);o.length||(o.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(t.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),t.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const h=o.reduce((e,t)=>{const n=rt(t);return e?new tt({x:Math.max(e.left,n.left),y:Math.max(e.top,n.top),width:Math.min(e.right,n.right)-Math.max(e.left,n.left),height:Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)}):n},void 0);h.x+=12,h.y+=12,h.width-=24,h.height-=24;let p={anchor:r.value,origin:i.value};function f(e){const n=new tt(t),r=m_(e.anchor,m),i=m_(e.origin,n);let{x:s,y:a}=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(r,i);switch(e.anchor.side){case"top":a-=c.value[0];break;case"bottom":a+=c.value[0];break;case"left":s-=c.value[0];break;case"right":s+=c.value[0]}switch(e.anchor.align){case"top":a-=c.value[1];break;case"bottom":a+=c.value[1];break;case"left":s-=c.value[1];break;case"right":s+=c.value[1]}n.x+=s,n.y+=a,n.width=Math.min(n.width,l.value),n.height=Math.min(n.height,u.value);return{overflows:st(n,h),x:s,y:a}}let v=0,g=0;const y={x:0,y:0},b={x:!1,y:!1};let w=-1;for(;!(w++>10);){const{x:e,y:n,overflows:r}=f(p);v+=e,g+=n,t.x+=e,t.y+=n;{const e=it(p.anchor),t=r.x.before||r.x.after,n=r.y.before||r.y.after;let i=!1;if(["x","y"].forEach(s=>{if("x"===s&&t&&!b.x||"y"===s&&n&&!b.y){const t={anchor:{...p.anchor},origin:{...p.origin}},n="x"===s?"y"===e?Je:Xe:"y"===e?Xe:Je;t.anchor=n(t.anchor),t.origin=n(t.origin);const{overflows:a}=f(t);(a[s].before<=r[s].before&&a[s].after<=r[s].after||a[s].before+a[s].after<(r[s].before+r[s].after)/2)&&(p=t,i=b[s]=!0)}}),i)continue}r.x.before&&(v+=r.x.before,t.x+=r.x.before),r.x.after&&(v-=r.x.after,t.x-=r.x.after),r.y.before&&(g+=r.y.before,t.y+=r.y.before),r.y.after&&(g-=r.y.after,t.y-=r.y.after);{const e=st(t,h);y.x=h.width-e.x.before-e.x.after,y.y=h.height-e.y.before-e.y.after,v+=e.x.before,t.x+=e.x.before,g+=e.y.before,t.y+=e.y.before}break}const _=it(p.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${p.anchor.side} ${p.anchor.align}`,transformOrigin:`${p.origin.side} ${p.origin.align}`,top:de(b_(g)),left:e.isRtl.value?void 0:de(b_(v)),right:e.isRtl.value?de(b_(-v)):void 0,minWidth:de("y"===_?Math.min(s.value,m.width):s.value),maxWidth:de(w_(xe(y.x,s.value===1/0?0:s.value,l.value))),maxHeight:de(w_(xe(y.y,a.value===1/0?0:a.value,u.value)))}),{available:y,contentBox:t,flipped:b}}return v(e.target,(e,t)=>{t&&!Array.isArray(t)&&f.unobserve(t),Array.isArray(e)?Ee(e,t)||y():e&&f.observe(e)},{immediate:!0}),v(e.contentEl,(e,t)=>{t&&f.unobserve(t),e&&f.observe(e)},{immediate:!0}),N(()=>{f.disconnect()}),v(()=>[r.value,i.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>y()),g(()=>{const e=y();if(!e)return;const{available:t,contentBox:n}=e;n.height>t.y&&requestAnimationFrame(()=>{y(),requestAnimationFrame(()=>{y()})})}),{updateLocation:y}}},y_=ne({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"==typeof e||e in g_},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function b_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function w_(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let __=!0;const I_=[];let S_=-1;function C_(){cancelAnimationFrame(S_),S_=requestAnimationFrame(()=>{const e=I_.shift();e&&e(),I_.length?C_():__=!0})}const E_={none:null,close:function(e){A_(T_(e.target.value,e.contentEl.value),function(t){e.isActive.value=!1})},block:function(e,t){var n;const r=null==(n=e.root.value)?void 0:n.offsetParent,i=T_(e.target.value,e.contentEl.value),s=[...new Set([...nt(i,t.contained?r:void 0),...nt(e.contentEl.value,t.contained?r:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,o=(l=r||document.documentElement,at(l)&&l);var l;o&&e.root.value.classList.add("v-overlay--scroll-blocked");s.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",de(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",de(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",de(a)),e.classList.add("v-overlay-scroll-blocked")}),N(()=>{s.forEach((e,t)=>{const n=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),r=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),i=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-n,e.scrollTop=-r,e.style.scrollBehavior=i}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})},reposition:function(e,t,n){let r=!1,i=-1,s=-1;function a(t){var n;n=()=>{var n,i;const s=performance.now();null==(i=(n=e.updateLocation).value)||i.call(n,t);const a=performance.now()-s;r=a/(1e3/60)>2},!__||I_.length?(I_.push(n),C_()):(__=!1,n(),C_())}s=("undefined"==typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{n.run(()=>{A_(T_(e.target.value,e.contentEl.value),e=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{a(e)})})):a(e)})})}),N(()=>{"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(s),cancelAnimationFrame(i)})}},k_=ne({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"==typeof e||e in E_}},"VOverlay-scroll-strategies");function T_(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!(null==t?void 0:t.contains(e))):e??t}function A_(e,t){const n=[document,...nt(e)];n.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),N(()=>{n.forEach(e=>{e.removeEventListener("scroll",t)})})}const x_=Symbol.for("vuetify:v-menu"),N_=ne({closeDelay:[Number,String],openDelay:[Number,String]},"delay");const D_=ne({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...N_()},"VOverlay-activator");function V_(e,t){let{isActive:n,isTop:r,contentEl:i}=t;const s=Ie("useActivator"),a=f();let l=!1,u=!1,c=!0;const d=o(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),p=o(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:y}=function(e,t){let n=()=>{};function r(r){null==n||n();const i=Number(r?e.openDelay:e.closeDelay);return new Promise(e=>{n=ot(i,()=>{null==t||t(r),e(r)})})}return{clearDelay:n,runOpenDelay:function(){return r(!0)},runCloseDelay:function(){return r(!1)}}}(e,t=>{t!==(e.openOnHover&&l||d.value&&u)||e.openOnHover&&n.value&&!r.value||(n.value!==t&&(c=!0),n.value=t)}),b=f(),w=e=>{e.stopPropagation(),a.value=e.currentTarget||e.target,n.value||(b.value=[e.clientX,e.clientY]),n.value=!n.value},_=e=>{var t;(null==(t=e.sourceCapabilities)?void 0:t.firesTouchEvents)||(l=!0,a.value=e.currentTarget||e.target,m())},I=e=>{l=!1,y()},S=e=>{!1!==ut(e.target,":focus-visible")&&(u=!0,e.stopPropagation(),a.value=e.currentTarget||e.target,m())},C=e=>{u=!1,e.stopPropagation(),y()},E=o(()=>{const t={};return p.value&&(t.onClick=w),e.openOnHover&&(t.onMouseenter=_,t.onMouseleave=I),d.value&&(t.onFocus=S,t.onBlur=C),t}),k=o(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{l=!0,m()},t.onMouseleave=()=>{l=!1,y()}),d.value&&(t.onFocusin=()=>{u=!0,m()},t.onFocusout=()=>{u=!1,y()}),e.closeOnContentClick){const e=A(x_,null);t.onClick=()=>{n.value=!1,null==e||e.closeParents()}}return t}),T=o(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{c&&(l=!0,c=!1,m())},t.onMouseleave=()=>{l=!1,y()}),t});v(r,t=>{var r;!t||(!e.openOnHover||l||d.value&&u)&&(!d.value||u||e.openOnHover&&l)||(null==(r=i.value)?void 0:r.contains(document.activeElement))||(n.value=!1)}),v(n,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const x=lt();D(()=>{x.value&&g(()=>{a.value=x.el})});const V=lt(),R=o(()=>"cursor"===e.target&&b.value?b.value:V.value?V.el:R_(e.target,s)||a.value),M=o(()=>Array.isArray(R.value)?void 0:R.value);let O;return v(()=>!!e.activator,t=>{t&&Ve?(O=P(),O.run(()=>{!function(e,t,n){let{activatorEl:r,activatorEvents:i}=n;function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&ct(t,h(i.value,n))}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&dt(t,h(i.value,n))}function o(){const n=R_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator,t);return r.value=(null==n?void 0:n.nodeType)===Node.ELEMENT_NODE?n:void 0,r.value}v(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=o(t);e&&a(e)}e&&g(()=>s())},{immediate:!0}),v(()=>e.activatorProps,()=>{s()}),N(()=>{a()})}(e,s,{activatorEl:a,activatorEvents:E})})):O&&O.stop()},{flush:"post",immediate:!0}),N(()=>{null==O||O.stop()}),{activatorEl:a,activatorRef:x,target:R,targetEl:M,targetRef:V,activatorEvents:E,contentEvents:k,scrimEvents:T}}function R_(e,t){var n,r;if(!e)return;let i;if("parent"===e){let e=null==(r=null==(n=null==t?void 0:t.proxy)?void 0:n.$el)?void 0:r.parentNode;for(;null==e?void 0:e.hasAttribute("data-no-activator");)e=e.parentNode;i=e}else i="string"==typeof e?document.querySelector(e):"$el"in e?e.$el:e;return i}const M_=ne({eager:Boolean},"lazy");function O_(e,t){const r=n(!1),i=b(()=>r.value||e.eager||t.value);return v(t,()=>r.value=!0),{isBooted:r,hasContent:i,onAfterLeave:function(){e.eager||(r.value=!1)}}}function L_(){const e=Ie("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const P_=Symbol.for("vuetify:stack"),F_=S([]);function B_(){return!0}function U_(e,t,n){if(!e||!1===$_(e,n))return!1;const r=pt(t);if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&r.host===e.target)return!1;const i=("object"==typeof n.value&&n.value.include||(()=>[]))();return i.push(t),!i.some(t=>null==t?void 0:t.contains(e.target))}function $_(e,t){return("object"==typeof t.value&&t.value.closeConditional||B_)(e)}function j_(e,t){const n=pt(e);t(document),"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const z_={mounted(e,t){const n=n=>function(e,t,n){const r="function"==typeof n.value?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&U_(e,t,n)&&setTimeout(()=>{$_(e,n)&&r&&r(e)},0)}(n,e,t),r=n=>{e._clickOutside.lastMousedownWasOutside=U_(n,e,t)};j_(e,e=>{e.addEventListener("click",n,!0),e.addEventListener("mousedown",r,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:r}},beforeUnmount(e,t){e._clickOutside&&(j_(e,n=>{var r;if(!n||!(null==(r=e._clickOutside)?void 0:r[t.instance.$.uid]))return;const{onClick:i,onMousedown:s}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function q_(e){const{modelValue:t,color:n,...r}=e;return i(d,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&l("div",h({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},r),null)]})}const H_=ne({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...D_(),...ge(),...eb(),...M_(),...y_(),...k_(),...me(),...ab()},"VOverlay"),K_=te()({name:"VOverlay",directives:{vClickOutside:z_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...H_()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,r){let{slots:s,attrs:a,emit:u}=r;const c=Ie("VOverlay"),d=f(),p=f(),m=f(),E=Ce(e,"modelValue"),k=o({get:()=>E.value,set:t=>{t&&e.disabled||(E.value=t)}}),{themeClasses:x}=Se(e),{rtlClasses:V,isRtl:R}=Ne(),{hasContent:M,onAfterLeave:B}=O_(e,k),U=Gy(()=>"string"==typeof e.scrim?e.scrim:null),{globalTop:$,localTop:j,stackStyles:z}=function(e,r,i){const s=Ie("useStack"),a=!i,o=A(P_,void 0),l=S({activeChildren:new Set});T(P_,l);const u=n(Number(t(r)));Qe(e,()=>{var e;const n=null==(e=F_.at(-1))?void 0:e[1];u.value=n?n+10:Number(t(r)),a&&F_.push([s.uid,u.value]),null==o||o.activeChildren.add(s.uid),N(()=>{if(a){const e=O(F_).findIndex(e=>e[0]===s.uid);F_.splice(e,1)}null==o||o.activeChildren.delete(s.uid)})});const c=n(!0);a&&D(()=>{var e;const t=(null==(e=F_.at(-1))?void 0:e[0])===s.uid;setTimeout(()=>c.value=t)});const d=b(()=>!l.activeChildren.size);return{globalTop:L(c),localTop:d,stackStyles:b(()=>({zIndex:u.value}))}}(k,()=>e.zIndex,e._disableGlobalStack),{activatorEl:q,activatorRef:H,target:K,targetEl:G,targetRef:W,activatorEvents:Q,contentEvents:Y,scrimEvents:X}=V_(e,{isActive:k,isTop:j,contentEl:m}),{teleportTarget:J}=function(e){return{teleportTarget:o(()=>{const t=e();if(!0===t||!Ve)return;const n=!1===t?document.body:"string"==typeof t?document.querySelector(t):t;if(null==n)return;let r=[...n.children].find(e=>e.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",n.appendChild(r)),r})}}(()=>{var t,n,r;const i=e.attach||e.contained;if(i)return i;const s=(null==(t=null==q?void 0:q.value)?void 0:t.getRootNode())||(null==(r=null==(n=c.proxy)?void 0:n.$el)?void 0:r.getRootNode());return s instanceof ShadowRoot&&s}),{dimensionStyles:Z}=tb(e),ee=function(){if(!Ve)return n(!1);const{ssr:e}=ht();if(e){const e=n(!1);return C(()=>{e.value=!0}),e}return n(!0)}(),{scopeId:te}=L_();v(()=>e.disabled,e=>{e&&(k.value=!1)});const{contentStyles:ne,updateLocation:re}=function(e,t){const n=f({}),r=f();function i(e){var t;null==(t=r.value)||t.call(r,e)}function s(e){var t;null==(t=r.value)||t.call(r,e)}function a(e){var t;null==(t=r.value)||t.call(r,e)}return Ve&&Qe(()=>!(!t.isActive.value||!e.locationStrategy),o=>{var l,u;v(()=>e.locationStrategy,o),N(()=>{window.removeEventListener("resize",i),null==visualViewport||visualViewport.removeEventListener("resize",s),null==visualViewport||visualViewport.removeEventListener("scroll",a),r.value=void 0}),window.addEventListener("resize",i,{passive:!0}),null==visualViewport||visualViewport.addEventListener("resize",s,{passive:!0}),null==visualViewport||visualViewport.addEventListener("scroll",a,{passive:!0}),"function"==typeof e.locationStrategy?r.value=null==(l=e.locationStrategy(t,e,n))?void 0:l.updateLocation:r.value=null==(u=g_[e.locationStrategy](t,e,n))?void 0:u.updateLocation}),{contentStyles:n,updateLocation:r}}(e,{isRtl:R,contentEl:m,target:K,isActive:k});function ie(t){u("click:outside",t),e.persistent?pe():k.value=!1}function se(t){return k.value&&$.value&&(!e.scrim||t.target===p.value||t instanceof MouseEvent&&t.shadowTarget===p.value)}function ae(t){var n,r,i;"Escape"===t.key&&$.value&&((null==(n=m.value)?void 0:n.contains(document.activeElement))||u("keydown",t),e.persistent?pe():(k.value=!1,(null==(r=m.value)?void 0:r.contains(document.activeElement))&&(null==(i=q.value)||i.focus())))}function oe(e){("Escape"!==e.key||$.value)&&u("keydown",e)}!function(e,t){if(!Ve)return;let n;D(async()=>{null==n||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=P(),await new Promise(e=>setTimeout(e)),n.active&&n.run(()=>{var r;"function"==typeof e.scrollStrategy?e.scrollStrategy(t,e,n):null==(r=E_[e.scrollStrategy])||r.call(E_,t,e,n)}))}),N(()=>{null==n||n.stop()})}(e,{root:d,contentEl:m,targetEl:G,target:K,isActive:k,updateLocation:re}),Ve&&v(k,e=>{e?window.addEventListener("keydown",ae):window.removeEventListener("keydown",ae)},{immediate:!0}),y(()=>{Ve&&window.removeEventListener("keydown",ae)});const le=null==(ce=null==(ue=Ie("useRouter"))?void 0:ue.proxy)?void 0:ce.$router;var ue,ce;Qe(()=>e.closeOnBack,()=>{!function(e,t){let n,r,i=!1;function s(e){var t;(null==(t=e.state)?void 0:t.replaced)||(i=!0,setTimeout(()=>i=!1))}Ve&&(null==e?void 0:e.beforeEach)&&(g(()=>{window.addEventListener("popstate",s),n=e.beforeEach((e,n,r)=>{Yb?i?t(r):r():setTimeout(()=>i?t(r):r()),Yb=!0}),r=null==e?void 0:e.afterEach(()=>{Yb=!1})}),N(()=>{window.removeEventListener("popstate",s),null==n||n(),null==r||r()}))}(le,t=>{$.value&&k.value?(t(!1),e.persistent?pe():k.value=!1):t()})});const he=f();function pe(){e.noClickAnimation||m.value&&Me(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Le})}function ve(){u("afterEnter")}function me(){B(),u("afterLeave")}return v(()=>k.value&&(e.absolute||e.contained)&&null==J.value,e=>{if(e){const e=ft(d.value);e&&e!==document.scrollingElement&&(he.value=e.scrollTop)}}),fe(()=>{var t;return l(_,null,[null==(t=s.activator)?void 0:t.call(s,{isActive:k.value,targetRef:W,props:h({ref:H},Q.value,e.activatorProps)}),ee.value&&M.value&&i(F,{disabled:!J.value,to:J.value},{default:()=>[l("div",h({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":k.value,"v-overlay--contained":e.contained},x.value,V.value,e.class],style:[z.value,{"--v-overlay-opacity":e.opacity,top:de(he.value)},e.style],ref:d,onKeydown:oe},te,a),[i(q_,h({color:U,modelValue:k.value&&!!e.scrim,ref:p},X.value),null),i(ob,{appear:!0,persisted:!0,transition:e.transition,target:K.value,onAfterEnter:ve,onAfterLeave:me},{default:()=>{var t;return[w(l("div",h({ref:m,class:["v-overlay__content",e.contentClass],style:[Z.value,ne.value]},Y.value,e.contentProps),[null==(t=s.default)?void 0:t.call(s,{isActive:k})]),[[I,k.value],[z_,{handler:ie,closeConditional:se,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:p,target:K,animateClick:pe,contentEl:m,globalTop:$,localTop:j,updateLocation:re}}}),G_=Symbol("Forwarded refs");function W_(e,t){let n=e;for(;n;){const e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Object.getPrototypeOf(n)}}function Q_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e[G_]=n,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const r of n)if(r.value&&Reflect.has(r.value,t)){const e=Reflect.get(r.value,t);return"function"==typeof e?e.bind(r.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,t))return!0;return!1},set(e,t,r){if(Reflect.has(e,t))return Reflect.set(e,t,r);if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,t))return Reflect.set(i.value,t,r);return!1},getOwnPropertyDescriptor(e,t){var r;const i=Reflect.getOwnPropertyDescriptor(e,t);if(i)return i;if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of n){if(!e.value)continue;const n=W_(e.value,t)??("_"in e.value?W_(null==(r=e.value._)?void 0:r.setupState,t):void 0);if(n)return n}for(const e of n){const n=e.value&&e.value[G_];if(!n)continue;const r=n.slice();for(;r.length;){const e=r.shift(),n=W_(e.value,t);if(n)return n;const i=e.value&&e.value[G_];i&&r.push(...i)}}}}})}const Y_=ne({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Ge(H_({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Cw}}),["absolute"])},"VMenu"),X_=te()({name:"VMenu",props:Y_(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const s=Ce(e,"modelValue"),{scopeId:a}=L_(),{isRtl:l}=Ne(),u=k(),c=b(()=>e.id||`v-menu-${u}`),d=f(),p=A(x_,null),m=n(new Set);async function w(e){var t,n,r;const i=e.relatedTarget,a=e.target;if(await g(),s.value&&i!==a&&(null==(t=d.value)?void 0:t.contentEl)&&(null==(n=d.value)?void 0:n.globalTop)&&![document,d.value.contentEl].includes(a)&&!d.value.contentEl.contains(a)){null==(r=vt(d.value.contentEl)[0])||r.focus()}}function _(e){null==p||p.closeParents(e)}function I(t){var n,r,i,a,o;if(!e.disabled)if("Tab"===t.key||"Enter"===t.key&&!e.closeOnContentClick){if("Enter"===t.key&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;"Enter"===t.key&&t.preventDefault();mt(vt(null==(n=d.value)?void 0:n.contentEl,!1),t.shiftKey?"prev":"next",e=>e.tabIndex>=0)||(s.value=!1,null==(i=null==(r=d.value)?void 0:r.activatorEl)||i.focus())}else e.submenu&&t.key===(l.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,null==(o=null==(a=d.value)?void 0:a.activatorEl)||o.focus())}function S(t){var n;if(e.disabled)return;const r=null==(n=d.value)?void 0:n.contentEl;r&&s.value?"ArrowDown"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),We(r,"next")):"ArrowUp"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),We(r,"prev")):e.submenu&&(t.key===(l.value?"ArrowRight":"ArrowLeft")?s.value=!1:t.key===(l.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),We(r,"first"))):(e.submenu?t.key===(l.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(s.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>S(t))))}T(x_,{register(){m.value.add(u)},unregister(){m.value.delete(u)},closeParents(t){setTimeout(()=>{var n;m.value.size||e.persistent||null!=t&&(!(null==(n=d.value)?void 0:n.contentEl)||gt(t,d.value.contentEl))||(s.value=!1,null==p||p.closeParents())},40)}}),y(()=>{null==p||p.unregister(),document.removeEventListener("focusin",w)}),B(()=>s.value=!1),v(s,t=>{t?(null==p||p.register(),Ve&&!e.disableInitialFocus&&document.addEventListener("focusin",w,{once:!0})):(null==p||p.unregister(),Ve&&document.removeEventListener("focusin",w))},{immediate:!0});const C=o(()=>h({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":c.value,onKeydown:S},e.activatorProps));return fe(()=>{const t=K_.filterProps(e);return i(K_,h({ref:d,id:c.value,class:["v-menu",e.class],style:e.style},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,absolute:!0,activatorProps:C.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":_,onKeydown:I},a),{activator:r.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(qy,{root:"VMenu"},{default:()=>{var e;return[null==(e=r.default)?void 0:e.call(r,...t)]}})}})}),Q_({id:c,"ΨopenChildren":m},d)}}),J_={key:0},Z_={key:1,class:"text-body-2 font-weight-medium"},eI={key:1},tI=jy({__name:"AuthStatus",props:{user:{type:Object,default:null}},emits:["login","logout"],setup(e,{emit:t}){const n=t,r=()=>{n("login")},s=()=>{n("logout")};return(t,n)=>($(),U("div",null,[e.user?($(),U("div",J_,[i(X_,{location:"bottom"},{activator:j(({props:t})=>[i(vw,h({icon:""},t,{variant:"text",class:"minimal-user-button"}),{default:j(()=>[i(Ib,{color:"primary",size:"32",class:"minimal-avatar"},{default:j(()=>{var t;return[e.user.photoURL?($(),q(db,{key:0,src:e.user.photoURL,alt:e.user.displayName},null,8,["src","alt"])):($(),U("span",Z_,R(null==(t=e.user.displayName)?void 0:t.charAt(0)),1))]}),_:1})]),_:2},1040)]),default:j(()=>[i(f_,{class:"minimal-menu"},{default:j(()=>[i(t_,{title:e.user.displayName,subtitle:e.user.email,class:"minimal-menu-item"},null,8,["title","subtitle"]),i(gw,{class:"minimal-divider"}),i(t_,{onClick:s,"prepend-icon":"mdi-logout",class:"minimal-menu-item"},{default:j(()=>[i(Zw,{class:"text-body-2"},{default:j(()=>n[0]||(n[0]=[z("ログアウト",-1)])),_:1,__:[0]})]),_:1})]),_:1})]),_:1})])):($(),U("div",eI,[i(vw,{onClick:r,"prepend-icon":"mdi-google",variant:"outlined",color:"primary",class:"minimal-login-button"},{default:j(()=>n[1]||(n[1]=[z(" Googleでログイン ",-1)])),_:1,__:[1]})]))]))}},[["__scopeId","data-v-91d386da"]]),nI=ne({text:String,onClick:ze(),...ge(),...me()},"VLabel"),rI=te()({name:"VLabel",props:nI(),setup(e,t){let{slots:n}=t;return fe(()=>{var t;return l("label",{class:a(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:s(e.style),onClick:e.onClick},[e.text,null==(t=n.default)?void 0:t.call(n)])}),{}}}),iI=Symbol.for("vuetify:selection-control-group"),sI=ne({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:ye,trueIcon:ye,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ee},...ge(),...vb(),...me()},"SelectionControlGroup"),aI=ne({...sI({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");te()({name:"VSelectionControlGroup",props:aI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ce(e,"modelValue"),i=k(),o=b(()=>e.id||`v-selection-control-group-${i}`),u=b(()=>e.name||o.value),c=new Set;return T(iI,{modelValue:r,forceUpdate:()=>{c.forEach(e=>e())},onForceUpdate:e=>{c.add(e),N(()=>{c.delete(e)})}}),re({[e.defaultsTarget]:{color:b(()=>e.color),disabled:b(()=>e.disabled),density:b(()=>e.density),error:b(()=>e.error),inline:b(()=>e.inline),modelValue:r,multiple:b(()=>!!e.multiple||null==e.multiple&&Array.isArray(r.value)),name:u,falseIcon:b(()=>e.falseIcon),trueIcon:b(()=>e.trueIcon),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),type:b(()=>e.type),valueComparator:b(()=>e.valueComparator)}}),fe(()=>{var t;return l("div",{class:a(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:s(e.style),role:"radio"===e.type?"radiogroup":void 0},[null==(t=n.default)?void 0:t.call(n)])}),{}}});const oI=ne({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ge(),...sI()},"VSelectionControl");const lI=te()({name:"VSelectionControl",directives:{vRipple:pw},inheritAttrs:!1,props:oI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:u}=t;const{group:c,densityClasses:d,icon:p,model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,trueValue:C}=function(e){const t=A(iI,void 0),{densityClasses:n}=mb(e),r=Ce(e,"modelValue"),i=o(()=>void 0!==e.trueValue?e.trueValue:void 0===e.value||e.value),s=o(()=>void 0!==e.falseValue&&e.falseValue),a=o(()=>!!e.multiple||null==e.multiple&&Array.isArray(r.value)),l=o({get(){const n=t?t.modelValue.value:r.value;return a.value?ke(n).some(t=>e.valueComparator(t,i.value)):e.valueComparator(n,i.value)},set(n){if(e.readonly)return;const o=n?i.value:s.value;let l=o;a.value&&(l=n?[...ke(r.value),o]:ke(r.value).filter(t=>!e.valueComparator(t,i.value))),t?t.modelValue.value=l:r.value=l}}),{textColorClasses:u,textColorStyles:c}=Ky(()=>{if(!e.error&&!e.disabled)return l.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:h}=Gy(()=>!l.value||e.error||e.disabled?e.baseColor:e.color),p=o(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:i,falseValue:s,model:l,textColorClasses:u,textColorStyles:c,backgroundColorClasses:d,backgroundColorStyles:h,icon:p}}(e),E=k(),T=n(!1),x=n(!1),N=f(),D=b(()=>e.id||`input-${E}`),V=b(()=>!e.disabled&&!e.readonly);function R(e){V.value&&(T.value=!0,!1!==ut(e.target,":focus-visible")&&(x.value=!0))}function M(){T.value=!1,x.value=!1}function O(e){e.stopPropagation()}function L(t){V.value?(e.readonly&&c&&g(()=>c.forceUpdate()),v.value=t.target.checked):N.value&&(N.value.checked=v.value)}return null==c||c.onForceUpdate(()=>{N.value&&(N.value.checked=v.value)}),fe(()=>{var t,n;const o=u.label?u.label({label:e.label,props:{for:D.value}}):e.label,[c,f]=yt(r),g=l("input",h({ref:N,checked:v.value,disabled:!!e.disabled,id:D.value,onBlur:M,onFocus:R,onInput:L,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:C.value,name:e.name,"aria-checked":"checkbox"===e.type?v.value:void 0},f),null);return l("div",h({class:["v-selection-control",{"v-selection-control--dirty":v.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":T.value,"v-selection-control--focus-visible":x.value,"v-selection-control--inline":e.inline},d.value,e.class]},c,{style:e.style}),[l("div",{class:a(["v-selection-control__wrapper",m.value]),style:s(y.value)},[null==(t=u.default)?void 0:t.call(u,{backgroundColorClasses:I,backgroundColorStyles:S}),w(l("div",{class:a(["v-selection-control__input"])},[(null==(n=u.input)?void 0:n.call(u,{model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,inputNode:g,icon:p.value,props:{onFocus:R,onBlur:M,id:D.value}}))??l(_,null,[p.value&&i(Zy,{key:"icon",icon:p.value},null),g])]),[[pw,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),o&&i(rI,{for:D.value,onClick:O},{default:()=>[o]})])}),{isFocused:T,input:N}}}),uI=ne({indeterminate:Boolean,indeterminateIcon:{type:ye,default:"$checkboxIndeterminate"},...oI({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),cI=te()({name:"VCheckboxBtn",props:uI(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const r=Ce(e,"indeterminate"),s=Ce(e,"modelValue");function a(e){r.value&&(r.value=!1)}const o=b(()=>r.value?e.indeterminateIcon:e.falseIcon),l=b(()=>r.value?e.indeterminateIcon:e.trueIcon);return fe(()=>{const t=Ge(lI.filterProps(e),["modelValue"]);return i(lI,h(t,{modelValue:s.value,"onUpdate:modelValue":[e=>s.value=e,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});function dI(e){const{t:t}=bt();return{InputIcon:function(n){let{name:r,color:s,...a}=n;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],l=e[`onClick:${r}`],u=l&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return i(Zy,h({icon:e[`${r}Icon`],"aria-label":u,onClick:l,onKeydown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),wt(l,new PointerEvent("click",e)))},color:s},a),null)}}}const hI=ne({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ge(),...ab({transition:{component:Aw,leaveAbsolute:!0,group:!0}})},"VMessages"),pI=te()({name:"VMessages",props:hI(),setup(e,t){let{slots:n}=t;const r=o(()=>ke(e.messages)),{textColorClasses:u,textColorStyles:c}=Ky(()=>e.color);return fe(()=>i(ob,{transition:e.transition,tag:"div",class:a(["v-messages",u.value,e.class]),style:s([c.value,e.style])},{default:()=>[e.active&&r.value.map((e,t)=>l("div",{class:"v-messages__message",key:`${t}-${r.value}`},[n.message?n.message({message:e}):e]))]})),{}}}),fI=ne({focused:Boolean,"onUpdate:focused":ze()},"focus");function vI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue();const n=Ce(e,"focused");return{focusClasses:b(()=>({[`${t}--focused`]:n.value})),isFocused:n,focus:function(){n.value=!0},blur:function(){n.value=!1}}}const mI=Symbol.for("vuetify:form"),gI=ne({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function yI(e){const t=A(mI,null);return{...t,isReadonly:o(()=>!!((null==e?void 0:e.readonly)??(null==t?void 0:t.isReadonly.value))),isDisabled:o(()=>!!((null==e?void 0:e.disabled)??(null==t?void 0:t.isDisabled.value)))}}const bI=Symbol.for("vuetify:rules");const wI=ne({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...fI()},"validation");function _I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k();const i=Ce(e,"modelValue"),s=o(()=>void 0===e.validationValue?i.value:e.validationValue),a=yI(e),l=function(e){const t=A(bI,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return(null==t?void 0:t.resolve(e))??b(e)}(()=>e.rules),u=f([]),c=n(!0),d=o(()=>!(!ke(""===i.value?null:i.value).length&&!ke(""===s.value?null:s.value).length)),h=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)?ke(e.errorMessages).concat(u.value).slice(0,Math.max(0,Number(e.maxErrors))):u.value}),p=o(()=>{var t;let n=(e.validateOn??(null==(t=a.validateOn)?void 0:t.value))||"input";"lazy"===n&&(n="input lazy"),"eager"===n&&(n="input eager");const r=new Set((null==n?void 0:n.split(" "))??[]);return{input:r.has("input"),blur:r.has("blur")||r.has("input")||r.has("invalid-input"),invalidInput:r.has("invalid-input"),lazy:r.has("lazy"),eager:r.has("eager")}}),w=o(()=>{var t;return!e.error&&!(null==(t=e.errorMessages)?void 0:t.length)&&(!e.rules.length||(c.value?!u.value.length&&!p.value.lazy||null:!u.value.length))}),_=n(!1),I=o(()=>({[`${t}--error`]:!1===w.value,[`${t}--dirty`]:d.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),S=Ie("validation"),E=o(()=>e.name??x(r));async function T(){i.value=null,await g(),await N()}async function N(){c.value=!0,p.value.lazy?u.value=[]:await D(!p.value.eager)}async function D(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=[];_.value=!0;for(const r of l.value){if(n.length>=Number(e.maxErrors??1))break;const t="function"==typeof r?r:()=>r,i=await t(s.value);!0!==i&&(!1!==i&&"string"!=typeof i||n.push(i||""))}return u.value=n,_.value=!1,c.value=t,u.value}return m(()=>{var e;null==(e=a.register)||e.call(a,{id:E.value,vm:S,validate:D,reset:T,resetValidation:N})}),y(()=>{var e;null==(e=a.unregister)||e.call(a,E.value)}),C(async()=>{var e;p.value.lazy||await D(!p.value.eager),null==(e=a.update)||e.call(a,E.value,w.value,h.value)}),Qe(()=>p.value.input||p.value.invalidInput&&!1===w.value,()=>{v(s,()=>{if(null!=s.value)D();else if(e.focused){const t=v(()=>e.focused,e=>{e||D(),t()})}})}),Qe(()=>p.value.blur,()=>{v(()=>e.focused,e=>{e||D()})}),v([w,h],()=>{var e;null==(e=a.update)||e.call(a,E.value,w.value,h.value)}),{errorMessages:h,isDirty:d,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:c,isValid:w,isValidating:_,reset:T,resetValidation:N,validate:D,validationClasses:I}}const II=ne({id:String,appendIcon:ye,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:ye,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":ze(),"onClick:append":ze(),...ge(),...vb(),...He(eb(),["maxWidth","minWidth","width"]),...me(),...wI()},"VInput"),SI=te()({name:"VInput",props:{...II()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r,emit:u}=t;const{densityClasses:c}=mb(e),{dimensionStyles:d}=tb(e),{themeClasses:h}=Se(e),{rtlClasses:p}=Ne(),{InputIcon:f}=dI(e),v=k(),m=o(()=>e.id||`input-${v}`),{errorMessages:g,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,reset:E,resetValidation:T,validate:A,validationClasses:x}=_I(e,"v-input",m),N=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)||!I.value&&g.value.length?g.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),D=b(()=>N.value.length>0),V=b(()=>!e.hideDetails||"auto"===e.hideDetails&&(D.value||!!r.details)),R=o(()=>V.value?`${m.value}-messages`:void 0),M=o(()=>({id:m,messagesId:R,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,hasDetails:V,reset:E,resetValidation:T,validate:A})),O=b(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),L=b(()=>{if(e.iconColor)return!0===e.iconColor?O.value:e.iconColor});return fe(()=>{var t,n,o,u;const v=!(!r.prepend&&!e.prependIcon),m=!(!r.append&&!e.appendIcon);return l("div",{class:a(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},c.value,h.value,p.value,x.value,e.class]),style:s([d.value,e.style])},[v&&l("div",{key:"prepend",class:"v-input__prepend"},[null==(t=r.prepend)?void 0:t.call(r,M.value),e.prependIcon&&i(f,{key:"prepend-icon",name:"prepend",color:L.value},null)]),r.default&&l("div",{class:"v-input__control"},[null==(n=r.default)?void 0:n.call(r,M.value)]),m&&l("div",{key:"append",class:"v-input__append"},[e.appendIcon&&i(f,{key:"append-icon",name:"append",color:L.value},null),null==(o=r.append)?void 0:o.call(r,M.value)]),V.value&&l("div",{id:R.value,class:"v-input__details",role:"alert","aria-live":"polite"},[i(pI,{active:D.value,messages:N.value},{message:r.message}),null==(u=r.details)?void 0:u.call(r,M.value)])])}),{reset:E,resetValidation:T,validate:A,isValid:S,errorMessages:g}}}),CI=ne({...II(),...Ge(uI(),["inline"])},"VCheckbox"),EI=te()({name:"VCheckbox",inheritAttrs:!1,props:CI(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const s=Ce(e,"modelValue"),{isFocused:a,focus:o,blur:l}=vI(e),u=f(),c=k();return fe(()=>{const[t,d]=yt(n),p=SI.filterProps(e),f=cI.filterProps(e);return i(SI,h({ref:u,class:["v-checkbox",e.class]},t,p,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,id:e.id||`checkbox-${c}`,focused:a.value,style:e.style}),{...r,default:e=>{let{id:t,messagesId:n,isDisabled:a,isReadonly:u,isValid:c}=e;return i(cI,h(f,{id:t.value,"aria-describedby":n.value,disabled:a.value,readonly:u.value},d,{error:!1===c.value,modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,onFocus:o,onBlur:l}),r)}})}),Q_({},u)}});function kI(e,t){return(null==t?void 0:t[e?"scrollWidth":"scrollHeight"])||0}function TI(e,t,n){if(!n)return 0;const{scrollLeft:r,offsetWidth:i,scrollWidth:s}=n;return e?t?s-i+r:r:n.scrollTop}function AI(e,t){return(null==t?void 0:t[e?"offsetWidth":"offsetHeight"])||0}function xI(e,t){return(null==t?void 0:t[e?"offsetLeft":"offsetTop"])||0}const NI=Symbol.for("vuetify:v-slide-group"),DI=ne({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:NI},nextIcon:{type:ye,default:"$next"},prevIcon:{type:ye,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["always","desktop","mobile"].includes(e)},...ge(),...It({mobile:null}),...Xy(),...Tb({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),VI=te()({name:"VSlideGroup",props:DI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{isRtl:u}=Ne(),{displayClasses:c,mobile:d}=ht(e),h=Nb(e,e.symbol),p=n(!1),f=n(0),m=n(0),g=n(0),y=o(()=>"horizontal"===e.direction),{resizeRef:b,contentRect:w}=Ae(),{resizeRef:_,contentRect:I}=Ae(),S=_t(),C=o(()=>({container:b.el,duration:200,easing:"easeOutQuart"})),E=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[0]):-1),k=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[h.selected.value.length-1]):-1);if(Ve){let t=-1;v(()=>[h.selected.value,w.value,I.value,y.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(w.value&&I.value){const e=y.value?"width":"height";m.value=w.value[e],g.value=I.value[e],p.value=m.value+1<g.value}if(E.value>=0&&_.el){A(_.el.children[k.value],e.centerActive)}})})}const T=n(!1);function A(e,t){let n=0;n=t?function(e){let{selectedElement:t,containerElement:n,isHorizontal:r}=e;const i=AI(r,n);return xI(r,t)-i/2+AI(r,t)/2}({containerElement:b.el,isHorizontal:y.value,selectedElement:e}):function(e){let{selectedElement:t,containerElement:n,isRtl:r,isHorizontal:i}=e;const s=AI(i,n),a=TI(i,r,n),o=AI(i,t),l=xI(i,t),u=.4*o;return a>l?l-u:a+s<l+o?l-s+o+u:a}({containerElement:b.el,isHorizontal:y.value,isRtl:u.value,selectedElement:e}),x(n)}function x(e){if(!Ve||!b.el)return;const t=AI(y.value,b.el),n=TI(y.value,u.value,b.el);if(!(kI(y.value,b.el)<=t||Math.abs(e-n)<16)){if(y.value&&u.value&&b.el){const{scrollWidth:t,offsetWidth:n}=b.el;e=t-n-e}y.value?S.horizontal(e,C.value):S(e,C.value)}}function N(e){const{scrollTop:t,scrollLeft:n}=e.target;f.value=y.value?n:t}function D(e){if(T.value=!0,p.value&&_.el)for(const t of e.composedPath())for(const e of _.el.children)if(e===t)return void A(e)}function V(e){T.value=!1}let R=!1;function M(e){var t;R||T.value||e.relatedTarget&&(null==(t=_.el)?void 0:t.contains(e.relatedTarget))||F(),R=!1}function O(){R=!0}function L(e){function t(t){e.preventDefault(),F(t)}_.el&&(y.value?"ArrowRight"===e.key?t(u.value?"prev":"next"):"ArrowLeft"===e.key&&t(u.value?"next":"prev"):"ArrowDown"===e.key?t("next"):"ArrowUp"===e.key&&t("prev"),"Home"===e.key?t("first"):"End"===e.key&&t("last"))}function P(e,t){if(!e)return;let n=e;do{n=null==n?void 0:n["next"===t?"nextElementSibling":"previousElementSibling"]}while(null==n?void 0:n.hasAttribute("disabled"));return n}function F(e){if(!_.el)return;let t;if(e)if("next"===e){if(t=P(_.el.querySelector(":focus"),e),!t)return F("first")}else if("prev"===e){if(t=P(_.el.querySelector(":focus"),e),!t)return F("last")}else"first"===e?(t=_.el.firstElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=P(t,"next"))):"last"===e&&(t=_.el.lastElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=P(t,"prev")));else{t=vt(_.el)[0]}t&&t.focus({preventScroll:!0})}function B(e){const t=y.value&&u.value?-1:1,n=("prev"===e?-t:t)*m.value;let r=f.value+n;if(y.value&&u.value&&b.el){const{scrollWidth:e,offsetWidth:t}=b.el;r+=e-t}x(r)}const U=o(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),$=o(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return p.value||Math.abs(f.value)>0;case"mobile":return d.value||p.value||Math.abs(f.value)>0;default:return!d.value&&(p.value||Math.abs(f.value)>0)}}),j=o(()=>Math.abs(f.value)>1),z=o(()=>{if(!b.value)return!1;const e=kI(y.value,b.el),t=function(e,t){return(null==t?void 0:t[e?"clientWidth":"clientHeight"])||0}(y.value,b.el);return e-t-Math.abs(f.value)>1});return fe(()=>i(e.tag,{class:a(["v-slide-group",{"v-slide-group--vertical":!y.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":p.value},c.value,e.class]),style:s(e.style),tabindex:T.value||h.selected.value.length?-1:0,onFocus:M},{default:()=>{var t,n,s;return[$.value&&l("div",{key:"prev",class:a(["v-slide-group__prev",{"v-slide-group__prev--disabled":!j.value}]),onMousedown:O,onClick:()=>j.value&&B("prev")},[(null==(t=r.prev)?void 0:t.call(r,U.value))??i(Tw,null,{default:()=>[i(Zy,{icon:u.value?e.nextIcon:e.prevIcon},null)]})]),l("div",{key:"container",ref:b,class:a(["v-slide-group__container",e.contentClass]),onScroll:N},[l("div",{ref:_,class:"v-slide-group__content",onFocusin:D,onFocusout:V,onKeydown:L},[null==(n=r.default)?void 0:n.call(r,U.value)])]),$.value&&l("div",{key:"next",class:a(["v-slide-group__next",{"v-slide-group__next--disabled":!z.value}]),onMousedown:O,onClick:()=>z.value&&B("next")},[(null==(s=r.next)?void 0:s.call(r,U.value))??i(Tw,null,{default:()=>[i(Zy,{icon:u.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:B,scrollOffset:f,focus:F,hasPrev:j,hasNext:z}}}),RI=Symbol.for("vuetify:v-chip-group"),MI=ne({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ee},...DI(),...ge(),...Tb({selectedClass:"v-chip--selected"}),...Xy(),...me(),...bb({variant:"tonal"})},"VChipGroup");te()({name:"VChipGroup",props:MI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=Se(e),{isSelected:s,select:a,next:o,prev:l,selected:u}=Nb(e,RI);return re({VChip:{baseColor:b(()=>e.baseColor),color:b(()=>e.color),disabled:b(()=>e.disabled),filter:b(()=>e.filter),variant:b(()=>e.variant)}}),fe(()=>{const t=VI.filterProps(e);return i(VI,h(t,{class:["v-chip-group",{"v-chip-group--column":e.column},r.value,e.class],style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:s,select:a,next:o,prev:l,selected:u.value})]}})}),{}}});const OI=ne({activeClass:String,appendAvatar:String,appendIcon:ye,baseColor:String,closable:Boolean,closeIcon:{type:ye,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:ye,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ye,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...hb(),...ge(),...vb(),...Sb(),...Ab(),...ib(),...Qb(),...Qy(),...Xy({tag:"span"}),...me(),...bb({variant:"tonal"})},"VChip"),LI=te()({name:"VChip",directives:{vRipple:pw},props:OI(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{t:a}=bt(),{borderClasses:u}=pb(e),{densityClasses:c}=mb(e),{elevationClasses:d}=Cb(e),{roundedClasses:p}=sb(e),{sizeClasses:f}=Yy(e),{themeClasses:v}=Se(e),m=Ce(e,"modelValue"),g=xb(e,RI,!1),y=Wb(e,n),S=b(()=>!1!==e.link&&y.isLink.value),C=o(()=>!e.disabled&&!1!==e.link&&(!!g||e.link||y.isClickable.value)),E=b(()=>({"aria-label":a(e.closeLabel),disabled:e.disabled,onClick(e){e.preventDefault(),e.stopPropagation(),m.value=!1,r("click:close",e)}})),{colorClasses:k,colorStyles:T,variantClasses:A}=wb(()=>({color:!g||g.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function x(e){var t;r("click",e),C.value&&(null==(t=y.navigate)||t.call(y,e),null==g||g.toggle())}function N(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(e))}return()=>{var t;const n=y.isLink.value?"a":e.tag,r=!(!e.appendIcon&&!e.appendAvatar),a=!(!r&&!s.append),o=!(!s.close&&!e.closable),b=!(!s.filter&&!e.filter)&&g,D=!(!e.prependIcon&&!e.prependAvatar),V=!(!D&&!s.prepend);return m.value&&w(i(n,h({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":C.value,"v-chip--filter":b,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&(null==(t=y.isActive)?void 0:t.value)},v.value,u.value,k.value,c.value,d.value,p.value,f.value,A.value,null==g?void 0:g.selectedClass.value,e.class],style:[T.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:C.value?0:void 0,onClick:x,onKeydown:C.value&&!S.value&&N},y.linkProps),{default:()=>{var t;return[yb(C.value,"v-chip"),b&&i(Nw,{key:"filter"},{default:()=>[w(l("div",{class:"v-chip__filter"},[s.filter?i(qy,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):i(Zy,{key:"filter-icon",icon:e.filterIcon},null)]),[[I,g.isSelected.value]])]}),V&&l("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?i(qy,{key:"prepend-defaults",disabled:!D,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):l(_,null,[e.prependIcon&&i(Zy,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&i(Ib,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),l("div",{class:"v-chip__content","data-no-activator":""},[(null==(t=s.default)?void 0:t.call(s,{isSelected:null==g?void 0:g.isSelected.value,selectedClass:null==g?void 0:g.selectedClass.value,select:null==g?void 0:g.select,toggle:null==g?void 0:g.toggle,value:null==g?void 0:g.value.value,disabled:e.disabled}))??R(e.text)]),a&&l("div",{key:"append",class:"v-chip__append"},[s.append?i(qy,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):l(_,null,[e.appendIcon&&i(Zy,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&i(Ib,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),o&&l("button",h({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},E.value),[s.close?i(qy,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):i(Zy,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[pw,C.value&&e.ripple,null]])}}}),PI=ne({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ge(),...ab({transition:{component:Aw}})},"VCounter"),FI=te()({name:"VCounter",functional:!0,props:PI(),setup(e,t){let{slots:n}=t;const r=b(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return fe(()=>i(ob,{transition:e.transition},{default:()=>[w(l("div",{class:a(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:s(e.style)},[n.default?n.default({counter:r.value,max:e.max,value:e.value}):r.value]),[[I,e.active]])]})),{}}}),BI=ne({floating:Boolean,...ge()},"VFieldLabel"),UI=te()({name:"VFieldLabel",props:BI(),setup(e,t){let{slots:n}=t;return fe(()=>i(rI,{class:a(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:s(e.style)},n)),{}}}),$I=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],jI=ne({appendInnerIcon:ye,bgColor:String,clearable:Boolean,clearIcon:{type:ye,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:ye,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>$I.includes(e)},"onClick:clear":ze(),"onClick:appendInner":ze(),"onClick:prependInner":ze(),...ge(),...jb(),...ib(),...me()},"VField"),zI=te()({name:"VField",inheritAttrs:!1,props:{id:String,...fI(),...jI()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:u}=t;const{themeClasses:c}=Se(e),{loaderClasses:d}=zb(e),{focusClasses:p,isFocused:m,focus:g,blur:y}=vI(e),{InputIcon:S}=dI(e),{roundedClasses:C}=sb(e),{rtlClasses:E}=Ne(),T=b(()=>e.dirty||e.active),A=b(()=>!(!e.label&&!u.label)),x=b(()=>!e.singleLine&&A.value),N=k(),D=o(()=>e.id||`input-${N}`),V=b(()=>e.details?`${D.value}-messages`:void 0),R=f(),M=f(),O=f(),L=o(()=>["plain","underlined"].includes(e.variant)),P=o(()=>e.error||e.disabled?void 0:T.value&&m.value?e.color:e.baseColor),F=o(()=>{if(e.iconColor&&(!e.glow||m.value))return!0===e.iconColor?P.value:e.iconColor}),{backgroundColorClasses:B,backgroundColorStyles:U}=Gy(()=>e.bgColor),{textColorClasses:$,textColorStyles:j}=Ky(P);v(T,e=>{if(x.value){const t=R.value.$el,n=M.value.$el;requestAnimationFrame(()=>{const r=Be(t),i=n.getBoundingClientRect(),s=i.x-r.x,a=i.y-r.y-(r.height/2-i.height/2),o=i.width/.75,l=Math.abs(o-r.width)>1?{maxWidth:de(o)}:void 0,u=getComputedStyle(t),c=getComputedStyle(n),d=1e3*parseFloat(u.transitionDuration)||150,h=parseFloat(c.getPropertyValue("--v-field-label-scale")),p=c.getPropertyValue("color");t.style.visibility="visible",n.style.visibility="hidden",Me(t,{transform:`translate(${s}px, ${a}px) scale(${h})`,color:p,...l},{duration:d,easing:Le,direction:e?"normal":"reverse"}).finished.then(()=>{t.style.removeProperty("visibility"),n.style.removeProperty("visibility")})})}},{flush:"post"});const z=o(()=>({isActive:T,isFocused:m,controlRef:O,blur:y,focus:g}));function q(e){e.target!==document.activeElement&&e.preventDefault()}return fe(()=>{var t,r,o;const f="outlined"===e.variant,v=!(!u["prepend-inner"]&&!e.prependInnerIcon),m=!(!e.clearable&&!u.clear||e.disabled),b=!!(u["append-inner"]||e.appendInnerIcon||m),k=()=>u.label?u.label({...z.value,label:e.label,props:{for:D.value}}):e.label;return l("div",h({class:["v-field",{"v-field--active":T.value,"v-field--appended":b,"v-field--center-affix":e.centerAffix??!L.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":v,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!k(),[`v-field--variant-${e.variant}`]:!0},c.value,B.value,p.value,d.value,C.value,E.value,e.class],style:[U.value,e.style],onClick:q},n),[l("div",{class:"v-field__overlay"},null),i(qb,{name:"v-field",active:!!e.loading,color:e.error?"error":"string"==typeof e.loading?e.loading:e.color},{default:u.loader}),v&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&i(S,{key:"prepend-icon",name:"prependInner",color:F.value},null),null==(t=u["prepend-inner"])?void 0:t.call(u,z.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&x.value&&i(UI,{key:"floating-label",ref:M,class:a([$.value]),floating:!0,for:D.value,"aria-hidden":!T.value,style:s(j.value)},{default:()=>[k()]}),A.value&&i(UI,{key:"label",ref:R,for:D.value},{default:()=>[k()]}),(null==(r=u.default)?void 0:r.call(u,{...z.value,props:{id:D.value,class:"v-field__input","aria-describedby":V.value},focus:g,blur:y}))??l("div",{id:D.value,class:"v-field__input","aria-describedby":V.value},null)]),m&&i(Nw,{key:"clear"},{default:()=>[w(l("div",{class:"v-field__clearable",onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},[i(qy,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[u.clear?u.clear({...z.value,props:{onFocus:g,onBlur:y,onClick:e["onClick:clear"],tabindex:-1}}):i(S,{name:"clear",onFocus:g,onBlur:y,tabindex:-1},null)]})]),[[I,e.dirty]])]}),b&&l("div",{key:"append",class:"v-field__append-inner"},[null==(o=u["append-inner"])?void 0:o.call(u,z.value),e.appendInnerIcon&&i(S,{key:"append-icon",name:"appendInner",color:F.value},null)]),l("div",{class:a(["v-field__outline",$.value]),style:s(j.value)},[f&&l(_,null,[l("div",{class:"v-field__outline__start"},null),x.value&&l("div",{class:"v-field__outline__notch"},[i(UI,{ref:M,floating:!0,for:D.value,"aria-hidden":!T.value},{default:()=>[k()]})]),l("div",{class:"v-field__outline__end"},null)]),L.value&&x.value&&i(UI,{ref:M,floating:!0,for:D.value,"aria-hidden":!T.value},{default:()=>[k()]})])])}),{controlRef:O,fieldIconColor:F}}});const qI=["color","file","time","date","datetime-local","week","month"],HI=ne({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...II(),...jI()},"VTextField"),KI=te()({name:"VTextField",directives:{vIntersect:ub},inheritAttrs:!1,props:HI(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const u=Ce(e,"modelValue"),{isFocused:c,focus:d,blur:p}=vI(e),{onIntersect:v}=function(e){return{onIntersect:function(t,n){var r,i;e.autofocus&&t&&(null==(i=null==(r=n[0].target)?void 0:r.focus)||i.call(r))}}}(e),m=o(()=>"function"==typeof e.counterValue?e.counterValue(u.value):"number"==typeof e.counterValue?e.counterValue:(u.value??"").toString().length),y=o(()=>n.maxlength?n.maxlength:!e.counter||"number"!=typeof e.counter&&"string"!=typeof e.counter?void 0:e.counter),b=o(()=>["plain","underlined"].includes(e.variant)),I=f(),S=f(),C=f(),E=o(()=>qI.includes(e.type)||e.persistentPlaceholder||c.value||e.active);function k(){c.value||d(),g(()=>{var e;C.value!==document.activeElement&&(null==(e=C.value)||e.focus())})}function T(e){r("mousedown:control",e),e.target!==C.value&&(k(),e.preventDefault())}function A(e){r("click:control",e)}function x(t){var n;const r=t.target;if(u.value=r.value,(null==(n=e.modelModifiers)?void 0:n.trim)&&["text","search","password","tel","url"].includes(e.type)){const e=[r.selectionStart,r.selectionEnd];g(()=>{r.selectionStart=e[0],r.selectionEnd=e[1]})}}return fe(()=>{const t=!!(s.counter||!1!==e.counter&&null!=e.counter),r=!(!t&&!s.details),[o,f]=yt(n),{modelValue:N,...D}=SI.filterProps(e),V=zI.filterProps(e);return i(SI,h({ref:I,modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":b.value},e.class],style:e.style},o,D,{centerAffix:!b.value,focused:c.value}),{...s,default:t=>{let{id:n,isDisabled:r,isDirty:o,isReadonly:m,isValid:y,hasDetails:b,reset:I}=t;return i(zI,h({ref:S,onMousedown:T,onClick:A,"onClick:clear":t=>function(t,n){t.stopPropagation(),k(),g(()=>{u.value=null,n(),wt(e["onClick:clear"],t)})}(t,I),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},V,{id:n.value,active:E.value||o.value,dirty:o.value||e.dirty,disabled:r.value,focused:c.value,details:b.value,error:!1===y.value}),{...s,default:t=>{let{props:{class:n,...i}}=t;const o=w(l("input",h({ref:C,value:u.value,onInput:x,autofocus:e.autofocus,readonly:m.value,disabled:r.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:d,onBlur:p},i,f),null),[[ub,{handler:v},null,{once:!0}]]);return l(_,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),s.default?l("div",{class:a(n),"data-no-activator":""},[s.default(),o]):K(o,{class:n}),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:r?n=>{var r;return l(_,null,[null==(r=s.details)?void 0:r.call(s,n),t&&l(_,null,[l("span",null,null),i(FI,{active:e.persistentCounter||c.value,value:m.value,max:y.value,disabled:e.disabled},s.counter)])])}:void 0})}),Q_({},I,S,C)}}),GI=ne({renderless:Boolean,...ge()},"VVirtualScrollItem"),WI=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:GI(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{resizeRef:s,contentRect:a}=Ae(void 0,"border");v(()=>{var e;return null==(e=a.value)?void 0:e.height},e=>{null!=e&&r("update:height",e)}),fe(()=>{var t,r;return e.renderless?l(_,null,[null==(t=i.default)?void 0:t.call(i,{itemRef:s})]):l("div",h({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[null==(r=i.default)?void 0:r.call(i)])})}}),QI=ne({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");const YI=ne({items:{type:Array,default:()=>[]},renderless:Boolean,...QI(),...ge(),...eb()},"VVirtualScroll"),XI=te()({name:"VVirtualScroll",props:YI(),setup(e,t){let{slots:r}=t;const u=Ie("VVirtualScroll"),{dimensionStyles:c}=tb(e),{calculateVisibleItems:d,containerRef:h,markerRef:p,handleScroll:m,handleScrollend:y,handleItemResize:w,scrollToIndex:I,paddingTop:S,paddingBottom:E,computedItems:k}=function(e,t){const r=ht(),i=n(0);D(()=>{i.value=parseFloat(e.itemHeight||0)});const s=n(0),a=n(Math.ceil((parseInt(e.height)||r.height.value)/(i.value||16))||1),l=n(0),u=n(0),c=f(),d=f();let h=0;const{resizeRef:p,contentRect:m}=Ae();D(()=>{p.value=c.value});const y=o(()=>{var t;return c.value===document.documentElement?r.height.value:(null==(t=m.value)?void 0:t.height)||parseInt(e.height)||0}),b=o(()=>!!(c.value&&d.value&&y.value&&i.value));let w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length});const I=n(0);let S=-1;function C(e){return w[e]||i.value}const E=St(()=>{const e=performance.now();_[0]=0;const n=t.value.length;for(let t=1;t<=n-1;t++)_[t]=(_[t-1]||0)+C(t-1);I.value=Math.max(I.value,performance.now()-e)},I),k=v(b,e=>{e&&(k(),h=d.value.offsetTop,E.immediate(),P(),~S&&g(()=>{Ve&&window.requestAnimationFrame(()=>{B(S),S=-1})}))});function T(e){e=xe(e,0,t.value.length-1);const n=Math.floor(e),r=e%1,i=n+1,s=_[n]||0;return s+((_[i]||s)-s)*r}function A(e){return function(e,t){let n=e.length-1,r=0,i=0,s=null,a=-1;if(e[n]<t)return n;for(;r<=n;)if(i=r+n>>1,s=e[i],s>t)n=i-1;else{if(!(s<t))return s===t?i:r;a=i,r=i+1}return a}(_,e)}N(()=>{E.clear()});let x=0,V=0,R=0;v(y,(e,t)=>{t&&(P(),e<t&&requestAnimationFrame(()=>{V=0,P()}))});let M=-1;function O(){c.value&&d.value&&(V=0,R=0,window.clearTimeout(M),P())}let L=-1;function P(){cancelAnimationFrame(L),L=requestAnimationFrame(F)}function F(){if(!c.value||!y.value||!i.value)return;const e=x-h,n=Math.sign(V),r=Math.max(0,e-100),o=xe(A(r),0,t.value.length),d=e+y.value+100,p=xe(A(d)+1,o+1,t.value.length);if((-1!==n||o<s.value)&&(1!==n||p>a.value)){const e=T(s.value)-T(o),n=T(p)-T(a.value);Math.max(e,n)>100?(s.value=o,a.value=p):(o<=0&&(s.value=o),p>=t.value.length&&(a.value=p))}l.value=T(s.value),u.value=T(t.value.length)-T(a.value)}function B(e){const t=T(e);!c.value||e&&!t?S=e:c.value.scrollTop=t}const U=o(()=>t.value.slice(s.value,a.value).map((t,n)=>{const r=n+s.value;return{raw:t,index:r,key:Ke(t,e.itemKey,r)}}));return v(t,()=>{w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length}),E.immediate(),P()},{deep:1}),{calculateVisibleItems:P,containerRef:c,markerRef:d,computedItems:U,paddingTop:l,paddingBottom:u,scrollToIndex:B,handleScroll:function(){if(!c.value||!d.value)return;const e=c.value.scrollTop,t=performance.now();t-R>500?(V=Math.sign(e-x),h=d.value.offsetTop):V=e-x,x=e,R=t,window.clearTimeout(M),M=window.setTimeout(O,500),P()},handleScrollend:O,handleItemResize:function(e,t){const n=w[e],r=i.value;i.value=r?Math.min(i.value,t):t,n===t&&r===i.value||(w[e]=t,E())}}}(e,b(()=>e.items));return Qe(()=>e.renderless,()=>{function e(){var e,t;const n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[n]("scroll",m,{passive:!0}),document[n]("scrollend",y)):(null==(e=h.value)||e[n]("scroll",m,{passive:!0}),null==(t=h.value)||t[n]("scrollend",y))}C(()=>{h.value=ft(u.vnode.el,!0),e(!0)}),N(e)}),fe(()=>{const t=k.value.map(t=>i(WI,{key:t.key,renderless:e.renderless,"onUpdate:height":e=>w(t.index,e)},{default:e=>{var n;return null==(n=r.default)?void 0:n.call(r,{item:t.raw,index:t.index,...e})}}));return e.renderless?l(_,null,[l("div",{ref:p,class:"v-virtual-scroll__spacer",style:{paddingTop:de(S.value)}},null),t,l("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:de(E.value)}},null)]):l("div",{ref:h,class:a(["v-virtual-scroll",e.class]),onScrollPassive:m,onScrollend:y,style:s([c.value,e.style])},[l("div",{ref:p,class:"v-virtual-scroll__container",style:{paddingTop:de(S.value),paddingBottom:de(E.value)}},[t])])}),{calculateVisibleItems:d,scrollToIndex:I}}});function JI(e,t){const r=n(!1);let i;return{onScrollPassive:function(e){cancelAnimationFrame(i),r.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{r.value=!1})})},onKeydown:async function(n){var i,s;if("Tab"===n.key&&(null==(i=t.value)||i.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const a=null==(s=e.value)?void 0:s.$el;if(!a)return;"Home"!==n.key&&"End"!==n.key||a.scrollTo({top:"Home"===n.key?0:a.scrollHeight,behavior:"smooth"}),await async function(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(r.value){const t=v(r,()=>{t(),e()})}else e()})}();const o=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if("PageDown"===n.key||"Home"===n.key){const e=a.getBoundingClientRect().top;for(const t of o)if(t.getBoundingClientRect().top>=e){t.focus();break}}else{const e=a.getBoundingClientRect().bottom;for(const t of[...o].reverse())if(t.getBoundingClientRect().bottom<=e){t.focus();break}}}}}const ZI=ne({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ye,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...a_({itemChildren:!1})},"Select"),eS=ne({...ZI(),...Ge(HI({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ab({transition:{component:Cw}})},"VSelect"),tS=te()({name:"VSelect",props:eS(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:r}=t;const{t:s}=bt(),a=f(),u=f(),c=f(),{items:d,transformIn:p,transformOut:m}=function(e){const t=o(()=>u_(e,e.items)),r=o(()=>t.value.some(e=>null===e.value)),i=n(new Map),s=n([]);return D(()=>{const e=t.value,n=new Map,r=[];for(let t=0;t<e.length;t++){const i=e[t];if(qe(i.value)||null===i.value){let e=n.get(i.value);e||(e=[],n.set(i.value,e)),e.push(i)}else r.push(i)}i.value=n,s.value=r}),{items:t,transformIn:function(n){const a=i.value,o=t.value,l=s.value,u=r.value,c=e.returnObject,d=!!e.valueComparator,h=e.valueComparator||Ee,p=He(e,l_.neededProps),f=[];e:for(const e of n){if(!u&&null===e)continue;if(c&&"string"==typeof e){f.push(l_(p,e));continue}const t=a.get(e);if(!d&&t)f.push(...t);else{for(const t of d?o:l)if(h(e,t.value)){f.push(t);continue e}f.push(l_(p,e))}}return f},transformOut:function(t){return e.returnObject?t.map(e=>{let{raw:t}=e;return t}):t.map(e=>{let{value:t}=e;return t})}}}(e),y=Ce(e,"modelValue",[],e=>p(null===e?[null]:ke(e)),t=>{const n=m(t);return e.multiple?n:n[0]??null}),w=o(()=>"function"==typeof e.counterValue?e.counterValue(y.value):"number"==typeof e.counterValue?e.counterValue:y.value.length),I=yI(e),S=o(()=>y.value.map(e=>e.value)),C=n(!1);let E,k="",T=-1;const A=o(()=>e.hideSelected?d.value.filter(t=>!y.value.some(n=>(e.valueComparator||Ee)(n,t))):d.value),x=o(()=>e.hideNoData&&!A.value.length||I.isReadonly.value||I.isDisabled.value),N=Ce(e,"menu"),V=o({get:()=>N.value,set:e=>{var t;N.value&&!e&&(null==(t=u.value)?void 0:t.ΨopenChildren.size)||e&&x.value||(N.value=e)}}),R=b(()=>V.value?e.closeText:e.openText),M=o(()=>{var t;return{...e.menuProps,activatorProps:{...(null==(t=e.menuProps)?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),O=f(),L=JI(O,a);function P(t){e.openOnClear&&(V.value=!0)}function F(){x.value||(V.value=!V.value)}function B(e){kt(e)&&U(e)}function U(t){var n,r,i;if(!t.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(V.value=!0),["Escape","Tab"].includes(t.key)&&(V.value=!1),"Home"===t.key?null==(n=O.value)||n.focus("first"):"End"===t.key&&(null==(r=O.value)||r.focus("last"));if(!kt(t))return;const s=performance.now();s-E>1e3&&(k="",T=-1),k+=t.key.toLowerCase(),E=s;const a=A.value;function o(){for(let e=T+1;e<a.length;e++){const t=a[e];if(t.title.toLowerCase().startsWith(k))return[t,e]}}const l=function(){let e=o();return e||(k.at(-1)===k.at(-2)&&(k=k.slice(0,-1),e=o(),e)?e:(T=-1,e=o(),e||(k=t.key.toLowerCase(),o())))}();if(!l)return;const[u,c]=l;T=c,null==(i=O.value)||i.focus(c),e.multiple||(y.value=[u])}function $(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.props.disabled)if(e.multiple){const r=y.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),i=null==n?!~r:n;if(~r){const e=i?[...y.value,t]:[...y.value];e.splice(r,1),y.value=e}else i&&(y.value=[...y.value,t])}else{const e=!1!==n;y.value=e?[t]:[],g(()=>{V.value=!1})}}function j(e){var t;(null==(t=O.value)?void 0:t.$el.contains(e.relatedTarget))||(V.value=!1)}function q(){var t;e.eager&&(null==(t=c.value)||t.calculateVisibleItems())}function H(){var e;C.value&&(null==(e=a.value)||e.focus())}function K(e){C.value=!0}function G(e){if(null==e)y.value=[];else if(ut(a.value,":autofill")||ut(a.value,":-webkit-autofill")){const t=d.value.find(t=>t.title===e);t&&$(t)}else a.value&&(a.value.value="")}return v(V,()=>{if(!e.hideSelected&&V.value&&y.value.length){const t=A.value.findIndex(t=>y.value.some(n=>(e.valueComparator||Ee)(n.value,t.value)));Ve&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var e;t>=0&&(null==(e=c.value)||e.scrollToIndex(t))})}}),v(()=>e.items,(t,n)=>{V.value||C.value&&e.hideNoData&&!n.length&&t.length&&(V.value=!0)}),fe(()=>{const t=!(!e.chips&&!r.chip),n=!!(!e.hideNoData||A.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),o=y.value.length>0,d=KI.filterProps(e),p=o||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return i(KI,h({ref:a},d,{modelValue:y.value.map(e=>e.props.value).join(", "),"onUpdate:modelValue":G,focused:C.value,"onUpdate:focused":e=>C.value=e,validationValue:y.externalValue,counterValue:w.value,dirty:o,class:["v-select",{"v-select--active-menu":V.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":y.value.length,"v-select--selection-slot":!!r.selection},e.class],style:e.style,inputmode:"none",placeholder:p,"onClick:clear":P,"onMousedown:control":F,onBlur:j,onKeydown:U,"aria-label":s(R.value),title:s(R.value)}),{...r,default:()=>l(_,null,[i(X_,h({ref:u,modelValue:V.value,"onUpdate:modelValue":e=>V.value=e,activator:"parent",contentClass:"v-select__content",disabled:x.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:q,onAfterLeave:H},M.value),{default:()=>[n&&i(f_,h({ref:O,selected:S.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:B,onFocusin:K,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},L,e.listProps),{default:()=>{var t,n,a;return[null==(t=r["prepend-item"])?void 0:t.call(r),!A.value.length&&!e.hideNoData&&((null==(n=r["no-data"])?void 0:n.call(r))??i(t_,{key:"no-data",title:s(e.noDataText)},null)),i(XI,{ref:c,renderless:!0,items:A.value,itemKey:"value"},{default:t=>{var n,s,a;let{item:o,index:u,itemRef:c}=t;const d=Ct(o.props),p=h(o.props,{ref:c,key:o.value,onClick:()=>$(o,null)});return"divider"===o.type?(null==(n=r.divider)?void 0:n.call(r,{props:o.raw,index:u}))??i(gw,h(o.props,{key:`divider-${u}`}),null):"subheader"===o.type?(null==(s=r.subheader)?void 0:s.call(r,{props:o.raw,index:u}))??i(r_,h(o.props,{key:`subheader-${u}`}),null):(null==(a=r.item)?void 0:a.call(r,{item:o,index:u,props:p}))??i(t_,h(p,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?i(cI,{key:o.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,d.prependAvatar&&i(Ib,{image:d.prependAvatar},null),d.prependIcon&&i(Zy,{icon:d.prependIcon},null)])}})}}),null==(a=r["append-item"])?void 0:a.call(r)]}})]}),y.value.map((n,s)=>{function a(e){e.stopPropagation(),e.preventDefault(),$(n,!1)}const o={"onClick:close":a,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),a(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},u=t?!!r.chip:!!r.selection,c=u?Et(t?r.chip({item:n,index:s,props:o}):r.selection({item:n,index:s})):void 0;if(!u||c)return l("div",{key:n.value,class:"v-select__selection"},[t?r.chip?i(qy,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[c]}):i(LI,h({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},o),null):c??l("span",{class:"v-select__selection-text"},[n.title,e.multiple&&s<y.value.length-1&&l("span",{class:"v-select__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];return l(_,null,[null==(t=r["append-inner"])?void 0:t.call(r,...o),e.menuIcon?i(Zy,{class:"v-select__menu-icon",color:null==(n=a.value)?void 0:n.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Q_({isFocused:C,menu:V,select:$},a)}}),nS={id:"account-controls",class:"minimal-account-selector"},rS=jy({__name:"AccountSelector",props:{accounts:{type:Array,required:!0},modelValue:{type:String,default:null},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,s=o({get:()=>n.modelValue,set(e){r("update:modelValue",e)}});return(t,n)=>w(($(),U("div",nS,[i(tS,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),items:e.accounts,"item-title":"name","item-value":"id",label:"管理対象アカウント",variant:"outlined",density:"compact",color:"primary","prepend-inner-icon":"mdi-account-multiple",class:"minimal-select","hide-details":""},null,8,["modelValue","items"])],512)),[[I,e.visible]])}},[["__scopeId","data-v-eb89f250"]]),iS=te()({name:"VCardActions",props:ge(),setup(e,t){let{slots:n}=t;return re({VBtn:{slim:!0,variant:"text"}}),fe(()=>{var t;return l("div",{class:a(["v-card-actions",e.class]),style:s(e.style)},[null==(t=n.default)?void 0:t.call(n)])}),{}}}),sS=ne({opacity:[Number,String],...ge(),...Xy()},"VCardSubtitle"),aS=te()({name:"VCardSubtitle",props:sS(),setup(e,t){let{slots:n}=t;return fe(()=>i(e.tag,{class:a(["v-card-subtitle",e.class]),style:s([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),oS=$e("v-card-title"),lS=ne({appendAvatar:String,appendIcon:ye,prependAvatar:String,prependIcon:ye,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ge(),...vb()},"VCardItem"),uS=te()({name:"VCardItem",props:lS(),setup(e,t){let{slots:n}=t;return fe(()=>{var t;const r=!(!e.prependAvatar&&!e.prependIcon),o=!(!r&&!n.prepend),u=!(!e.appendAvatar&&!e.appendIcon),c=!(!u&&!n.append),d=!(null==e.title&&!n.title),h=!(null==e.subtitle&&!n.subtitle);return l("div",{class:a(["v-card-item",e.class]),style:s(e.style)},[o&&l("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?i(qy,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):l(_,null,[e.prependAvatar&&i(Ib,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(Zy,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&i(oS,{key:"title"},{default:()=>{var t;return[(null==(t=n.title)?void 0:t.call(n))??R(e.title)]}}),h&&i(aS,{key:"subtitle"},{default:()=>{var t;return[(null==(t=n.subtitle)?void 0:t.call(n))??R(e.subtitle)]}}),null==(t=n.default)?void 0:t.call(n)]),c&&l("div",{key:"append",class:"v-card-item__append"},[n.append?i(qy,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):l(_,null,[e.appendIcon&&i(Zy,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(Ib,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),cS=ne({opacity:[Number,String],...ge(),...Xy()},"VCardText"),dS=te()({name:"VCardText",props:cS(),setup(e,t){let{slots:n}=t;return fe(()=>i(e.tag,{class:a(["v-card-text",e.class]),style:s([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),hS=ne({appendAvatar:String,appendIcon:ye,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ye,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...hb(),...ge(),...vb(),...eb(),...Sb(),...jb(),...Fb(),...Kb(),...ib(),...Qb(),...Xy(),...me(),...bb({variant:"elevated"})},"VCard"),pS=te()({name:"VCard",directives:{vRipple:pw},props:hS(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:s}=Se(e),{borderClasses:a}=pb(e),{colorClasses:o,colorStyles:u,variantClasses:c}=wb(e),{densityClasses:d}=mb(e),{dimensionStyles:p}=tb(e),{elevationClasses:f}=Cb(e),{loaderClasses:v}=zb(e),{locationStyles:m}=Bb(e),{positionClasses:g}=Gb(e),{roundedClasses:y}=sb(e),b=Wb(e,n);return fe(()=>{const t=!1!==e.link&&b.isLink.value,n=!e.disabled&&!1!==e.link&&(e.link||b.isClickable.value),_=t?"a":e.tag,I=!(!r.title&&null==e.title),S=!(!r.subtitle&&null==e.subtitle),C=I||S,E=!!(r.append||e.appendAvatar||e.appendIcon),k=!!(r.prepend||e.prependAvatar||e.prependIcon),T=!(!r.image&&!e.image),A=C||k||E,x=!(!r.text&&null==e.text);return w(i(_,h({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":n},s.value,a.value,o.value,d.value,f.value,v.value,g.value,y.value,c.value,e.class],style:[u.value,p.value,m.value,e.style],onClick:n&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>{var t;return[T&&l("div",{key:"image",class:"v-card__image"},[r.image?i(qy,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):i(db,{key:"image-img",cover:!0,src:e.image},null)]),i(qb,{name:"v-card",active:!!e.loading,color:"boolean"==typeof e.loading?void 0:e.loading},{default:r.loader}),A&&i(uS,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),x&&i(dS,{key:"text"},{default:()=>{var t;return[(null==(t=r.text)?void 0:t.call(r))??e.text]}}),null==(t=r.default)?void 0:t.call(r),r.actions&&i(iS,null,{default:r.actions}),yb(n,"v-card")]}}),[[pw,n&&e.ripple]])}),{}}}),fS=Symbol.for("vuetify:v-expansion-panel"),vS=ne({...ge(),...M_()},"VExpansionPanelText"),mS=te()({name:"VExpansionPanelText",props:vS(),setup(e,t){let{slots:n}=t;const r=A(fS);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:o,onAfterLeave:u}=O_(e,r.isSelected);return fe(()=>i(xw,{onAfterLeave:u},{default:()=>{var t;return[w(l("div",{class:a(["v-expansion-panel-text",e.class]),style:s(e.style)},[n.default&&o.value&&l("div",{class:"v-expansion-panel-text__wrapper"},[null==(t=n.default)?void 0:t.call(n)])]),[[I,r.isSelected.value]])]}})),{}}}),gS=ne({color:String,expandIcon:{type:ye,default:"$expand"},collapseIcon:{type:ye,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...ge(),...eb()},"VExpansionPanelTitle"),yS=te()({name:"VExpansionPanelTitle",directives:{vRipple:pw},props:gS(),setup(e,t){let{slots:n}=t;const r=A(fS);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:c}=Gy(()=>e.color),{dimensionStyles:d}=tb(e),h=o(()=>({collapseIcon:e.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),p=b(()=>r.isSelected.value?e.collapseIcon:e.expandIcon);return fe(()=>{var t;return w(l("button",{class:a(["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class]),style:s([c.value,d.value,e.style]),type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:e.readonly?void 0:r.toggle},[l("span",{class:"v-expansion-panel-title__overlay"},null),null==(t=n.default)?void 0:t.call(n,h.value),!e.hideActions&&i(qy,{defaults:{VIcon:{icon:p.value}}},{default:()=>{var e;return[l("span",{class:"v-expansion-panel-title__icon"},[(null==(e=n.actions)?void 0:e.call(n,h.value))??i(Zy,null,null)])]}})]),[[pw,e.ripple]])}),{}}}),bS=ne({title:String,text:String,bgColor:String,...Sb(),...Ab(),...ib(),...Xy(),...gS(),...vS()},"VExpansionPanel"),wS=te()({name:"VExpansionPanel",props:bS(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=xb(e,fS),{backgroundColorClasses:u,backgroundColorStyles:c}=Gy(()=>e.bgColor),{elevationClasses:d}=Cb(e),{roundedClasses:h}=sb(e),p=b(()=>(null==r?void 0:r.disabled.value)||e.disabled),f=o(()=>r.group.items.value.reduce((e,t,n)=>(r.group.selected.value.includes(t.id)&&e.push(n),e),[])),v=o(()=>{const e=r.group.items.value.findIndex(e=>e.id===r.id);return!r.isSelected.value&&f.value.some(t=>t-e===1)}),m=o(()=>{const e=r.group.items.value.findIndex(e=>e.id===r.id);return!r.isSelected.value&&f.value.some(t=>t-e===-1)});return T(fS,r),fe(()=>{const t=!(!n.text&&!e.text),o=!(!n.title&&!e.title),f=yS.filterProps(e),g=mS.filterProps(e);return i(e.tag,{class:a(["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":m.value,"v-expansion-panel--disabled":p.value},h.value,u.value,e.class]),style:s([c.value,e.style])},{default:()=>[l("div",{class:a(["v-expansion-panel__shadow",...d.value])},null),i(qy,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...g}}},{default:()=>{var r;return[o&&i(yS,{key:"title"},{default:()=>[n.title?n.title():e.title]}),t&&i(mS,{key:"text"},{default:()=>[n.text?n.text():e.text]}),null==(r=n.default)?void 0:r.call(n)]}})]})}),{groupItem:r}}}),_S=["default","accordion","inset","popout"],IS=ne({flat:Boolean,...Tb(),...He(bS(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...me(),...ge(),...Xy(),variant:{type:String,default:"default",validator:e=>_S.includes(e)}},"VExpansionPanels"),SS=te()({name:"VExpansionPanels",props:IS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:r,prev:o}=Nb(e,fS),{themeClasses:l}=Se(e),u=b(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return re({VExpansionPanel:{bgColor:b(()=>e.bgColor),collapseIcon:b(()=>e.collapseIcon),color:b(()=>e.color),eager:b(()=>e.eager),elevation:b(()=>e.elevation),expandIcon:b(()=>e.expandIcon),focusable:b(()=>e.focusable),hideActions:b(()=>e.hideActions),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),rounded:b(()=>e.rounded),static:b(()=>e.static)}}),fe(()=>i(e.tag,{class:a(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},l.value,u.value,e.class]),style:s(e.style)},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{prev:o,next:r})]}})),{next:r,prev:o}}}),CS=ne({fluid:{type:Boolean,default:!1},...ge(),...eb(),...Xy()},"VContainer"),ES=te()({name:"VContainer",props:CS(),setup(e,t){let{slots:n}=t;const{rtlClasses:r}=Ne(),{dimensionStyles:o}=tb(e);return fe(()=>i(e.tag,{class:a(["v-container",{"v-container--fluid":e.fluid},r.value,e.class]),style:s([o.value,e.style])},n)),{}}}),kS=Tt.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),TS=Tt.reduce((e,t)=>(e["offset"+G(t)]={type:[String,Number],default:null},e),{}),AS=Tt.reduce((e,t)=>(e["order"+G(t)]={type:[String,Number],default:null},e),{}),xS={col:Object.keys(kS),offset:Object.keys(TS),order:Object.keys(AS)};function NS(e,t,n){let r=e;if(null!=n&&!1!==n){if(t){r+=`-${t.replace(e,"")}`}return"col"===e&&(r="v-"+r),"col"!==e||""!==n&&!0!==n?(r+=`-${n}`,r.toLowerCase()):r.toLowerCase()}}const DS=["auto","start","end","center","baseline","stretch"],VS=ne({cols:{type:[Boolean,String,Number],default:!1},...kS,offset:{type:[String,Number],default:null},...TS,order:{type:[String,Number],default:null},...AS,alignSelf:{type:String,default:null,validator:e=>DS.includes(e)},...ge(),...Xy()},"VCol"),RS=te()({name:"VCol",props:VS(),setup(e,t){let{slots:n}=t;const r=o(()=>{const t=[];let n;for(n in xS)xS[n].forEach(r=>{const i=e[r],s=NS(n,r,i);s&&t.push(s)});const r=t.some(e=>e.startsWith("v-col-"));return t.push({"v-col":!r||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t});return()=>{var t;return p(e.tag,{class:[r.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),MS=["start","end","center"],OS=["space-between","space-around","space-evenly"];function LS(e,t){return Tt.reduce((n,r)=>(n[e+G(r)]=t(),n),{})}const PS=[...MS,"baseline","stretch"],FS=e=>PS.includes(e),BS=LS("align",()=>({type:String,default:null,validator:FS})),US=[...MS,...OS],$S=e=>US.includes(e),jS=LS("justify",()=>({type:String,default:null,validator:$S})),zS=[...MS,...OS,"stretch"],qS=e=>zS.includes(e),HS=LS("alignContent",()=>({type:String,default:null,validator:qS})),KS={align:Object.keys(BS),justify:Object.keys(jS),alignContent:Object.keys(HS)},GS={align:"align",justify:"justify",alignContent:"align-content"};function WS(e,t,n){let r=GS[e];if(null!=n){if(t){r+=`-${t.replace(e,"")}`}return r+=`-${n}`,r.toLowerCase()}}const QS=ne({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:FS},...BS,justify:{type:String,default:null,validator:$S},...jS,alignContent:{type:String,default:null,validator:qS},...HS,...ge(),...Xy()},"VRow"),YS=te()({name:"VRow",props:QS(),setup(e,t){let{slots:n}=t;const r=o(()=>{const t=[];let n;for(n in KS)KS[n].forEach(r=>{const i=e[r],s=WS(n,r,i);s&&t.push(s)});return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t});return()=>{var t;return p(e.tag,{class:["v-row",r.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),XS=$e("v-spacer","div","VSpacer"),JS=ne({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...ge(),...vb(),...Xy(),...me()},"VTable"),ZS=te()({name:"VTable",props:JS(),setup(e,t){let{slots:n,emit:r}=t;const{themeClasses:o}=Se(e),{densityClasses:u}=mb(e);return fe(()=>{const t={VCheckboxBtn:{density:e.density}};return i(e.tag,{class:a(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},o.value,u.value,e.class]),style:s(e.style)},{default:()=>{var r,s;return[null==(r=n.top)?void 0:r.call(n),i(qy,{defaults:t},{default:()=>{var t;return[n.default?l("div",{class:"v-table__wrapper",style:{height:de(e.height)}},[l("table",null,[n.default()])]):null==(t=n.wrapper)?void 0:t.call(n)]}}),null==(s=n.bottom)?void 0:s.call(n)]}})}),{}}}),eC=ne({id:String,interactive:Boolean,text:String,...Ge(H_({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),tC=te()({name:"VTooltip",props:eC(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ce(e,"modelValue"),{scopeId:s}=L_(),a=k(),l=b(()=>e.id||`v-tooltip-${a}`),u=f(),c=o(()=>e.location.split(" ").length>1?e.location:e.location+" center"),d=o(()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=b(()=>null!=e.transition?e.transition:r.value?"scale-transition":"fade-transition"),v=o(()=>h({"aria-describedby":l.value},e.activatorProps));return fe(()=>{const t=K_.filterProps(e);return i(K_,h({ref:u,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,transition:p.value,absolute:!0,location:c.value,origin:d.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},s),{activator:n.activator,default:function(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(null==(t=n.default)?void 0:t.call(n,...i))??e.text}})}),Q_({},u)}}),nC={class:"pa-6"},rC={class:"d-flex align-center mb-6"},iC={class:"d-flex align-center mb-3"},sC={class:"d-flex justify-space-between align-center"},aC={class:"d-flex align-center"},oC={class:"text-body-1 font-weight-medium"},lC={rowspan:"2",class:"text-center pa-4"},uC={rowspan:"2",class:"text-center pa-4"},cC={rowspan:"2",class:"text-center pa-4"},dC={class:"d-flex align-center justify-center"},hC={class:"text-caption text-white font-weight-bold"},pC={key:0},fC=["colspan"],vC={class:"d-flex flex-column align-center"},mC={key:1},gC=["colspan"],yC={class:"d-flex flex-column align-center"},bC={class:"text-center pa-4 font-weight-bold"},wC={class:"pa-4"},_C={class:"d-flex align-center"},IC={class:"text-caption text-white font-weight-bold"},SC={class:"font-weight-medium"},CC={class:"text-center pa-4"},EC={class:"text-center pa-4"},kC={class:"text-caption"},TC=["innerHTML"],AC=["innerHTML"],xC=["innerHTML"],NC=["innerHTML"],DC=jy({__name:"ViewAllCharactersTab",props:{dataLoaded:{type:Boolean,required:!0},accounts:{type:Array,required:!0},characterMasters:{type:Array,required:!0},itemMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0},ownedCountMap:{type:Map,required:!0},ownedCharactersData:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},setup(e){const t=e,n=f(!1),r=S({charSearch:"",element:"",itemSearch:"",type:"",gachaSearch:"",totalOwnership:"",account:"",ownership:""}),s=o(()=>Array.from(new Set(t.characterMasters.map(e=>e.type).filter(Boolean))).sort()),u=o(()=>{if(!t.dataLoaded)return[];const{charSearch:e,element:n,itemSearch:i,type:s,gachaSearch:a,totalOwnership:o,account:l,ownership:u}=r,d=e.toLowerCase(),h=i?Number(i):null;return t.characterMasters.filter(e=>{if(d&&!e.monsterName.toLowerCase().includes(d)&&!(e.indexNumber+"").includes(d))return!1;if(n&&e.element!==n)return!1;if(s)if("恒常_or_限定"===s){if("恒常"!==e.type&&"限定"!==e.type)return!1}else if(e.type!==s)return!1;if(a&&(e.ejectionGacha||"")!==a)return!1;if(h){let n=!1;const r=l||null;if(r)n=(t.ownedCharactersData.get(r)||[]).some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===h))});else for(const i of t.ownedCharactersData.values())if(i.some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===h))})){n=!0;break}if(!n)return!1}const r=t.accounts.reduce((t,n)=>t+c(e.id,n.id),0);if("all_unowned"===o&&r>0)return!1;if("four_or_more"===o&&r<4)return!1;if("one_in_each"===o&&!t.accounts.every(t=>c(e.id,t.id)>=1))return!1;if(l&&u){const t=c(e.id,l);if("owned"===u&&0===t)return!1;if("unowned"===u&&t>0)return!1;if("one"===u&&1!==t)return!1;if("two"===u&&2!==t)return!1}return!0})}),c=(e,n)=>t.ownedCountMap.get(`${e}-${n}`)||0,d=(e,n,r)=>{const i=(t.ownedCharactersData.get(n)||[]).filter(t=>t.characterMasterId===e);if(!i||i.length<=r)return"—";const s=(i[r].items||[]).map(e=>t.itemMastersMap.get(Number(e))).filter(Boolean).join("<br>");return s?`✔️<br>${s}`:"✔️"},p=(e,n,r)=>{const i=(t.ownedCharactersData.get(n)||[]).filter(t=>t.characterMasterId===e);if(!i||i.length<=r)return"未所持";return(i[r].items||[]).map(e=>t.itemMastersMap.get(Number(e))).filter(Boolean).join("<br>")||"アイテムなし"},v=(e,t,n)=>c(e,t)>=n?"status-owned":"status-unowned",m=e=>({"火":"red","水":"blue","木":"green","光":"amber","闇":"deep-purple"}[e]||"grey"),g=()=>{Object.assign(r,{charSearch:"",element:"",itemSearch:"",type:"",gachaSearch:"",totalOwnership:"",account:"",ownership:""})};return(t,o)=>{const c=W("v-subheader");return $(),U("div",nC,[l("div",rC,[i(Zy,{icon:"mdi-account-multiple",size:"28",color:"primary",class:"mr-3"}),o[9]||(o[9]=l("h2",{class:"text-h5 font-weight-medium text-primary"},"所持状況一覧",-1))]),i(pS,{class:"mb-6 minimal-filter-card"},{default:j(()=>[i(oS,{class:"minimal-card-title pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-filter-variant",class:"mr-2",size:"20"}),o[10]||(o[10]=z(" フィルターとオプション ",-1))]),_:1,__:[10]}),i(SS,null,{default:j(()=>[i(wS,null,{default:j(()=>[i(yS,{class:"pa-4 minimal-panel-title"},{default:j(()=>[i(Zy,{start:"",icon:"mdi-filter-variant",color:"primary",size:"20"}),o[11]||(o[11]=l("span",{class:"text-body-1 font-weight-medium"},"詳細フィルターを開く",-1))]),_:1,__:[11]}),i(mS,{class:"pa-6"},{default:j(()=>[i(ES,null,{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12",md:"4"},{default:j(()=>[i(KI,{modelValue:r.charSearch,"onUpdate:modelValue":o[0]||(o[0]=e=>r.charSearch=e),modelModifiers:{lazy:!0},label:"キャラクター名 or 図鑑番号",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-search",class:"minimal-input"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[i(tS,{modelValue:r.element,"onUpdate:modelValue":o[1]||(o[1]=e=>r.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-fire",class:"minimal-select"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[i(tS,{modelValue:r.itemSearch,"onUpdate:modelValue":o[2]||(o[2]=e=>r.itemSearch=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム名",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-sword-cross",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[i(tS,{modelValue:r.type,"onUpdate:modelValue":o[3]||(o[3]=e=>r.type=e),items:["恒常_or_限定",...s.value],label:"分類 (Type)",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-tag",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[i(tS,{modelValue:r.gachaSearch,"onUpdate:modelValue":o[4]||(o[4]=e=>r.gachaSearch=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-gift",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[i(tS,{modelValue:r.totalOwnership,"onUpdate:modelValue":o[5]||(o[5]=e=>r.totalOwnership=e),items:[{value:"all_unowned",title:"全アカウントで未所持"},{value:"four_or_more",title:"合計4体以上"},{value:"one_in_each",title:"各アカウントで1体以上所持"}],label:"全体の所持状況",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-group",class:"minimal-select"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12"},{default:j(()=>[i(gw,{class:"my-4 minimal-divider"}),l("div",iC,[i(Zy,{icon:"mdi-account",color:"secondary",class:"mr-2",size:"20"}),i(c,{class:"text-body-1 font-weight-medium"},{default:j(()=>o[12]||(o[12]=[z("単一アカウントでの絞り込み",-1)])),_:1,__:[12]})])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:r.account,"onUpdate:modelValue":o[6]||(o[6]=e=>r.account=e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-account",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:r.ownership,"onUpdate:modelValue":o[7]||(o[7]=e=>r.ownership=e),items:[{value:"owned",title:"所持"},{value:"unowned",title:"未所持"},{value:"one",title:"1体所持"},{value:"two",title:"2体所持"}],label:"所持状況 (指定アカウント内)",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-check-circle",class:"minimal-select"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(iS,{class:"pa-4 minimal-actions"},{default:j(()=>[i(vw,{onClick:o[8]||(o[8]=e=>n.value=!n.value),variant:"outlined",color:"info","prepend-icon":"mdi-eye",class:"minimal-button"},{default:j(()=>[z(R(n.value?"詳細を非表示":"詳細を表示"),1)]),_:1}),i(XS),i(vw,{onClick:g,color:"secondary",variant:"outlined","prepend-icon":"mdi-refresh",class:"minimal-button"},{default:j(()=>o[13]||(o[13]=[z(" リセット ",-1)])),_:1,__:[13]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(pS,{class:"mb-4 minimal-stats-card"},{default:j(()=>[i(dS,{class:"pa-4"},{default:j(()=>[l("div",sC,[l("div",aC,[i(Zy,{icon:"mdi-chart-bar",color:"primary",class:"mr-2",size:"20"}),l("span",oC,"表示件数: "+R(u.value.length)+" / "+R(e.characterMasters.length),1)]),i(LI,{color:u.value.length===e.characterMasters.length?"success":"warning",variant:"outlined",class:"minimal-chip"},{default:j(()=>[z(R(u.value.length===e.characterMasters.length?"全件表示":"フィルター適用中"),1)]),_:1},8,["color"])])]),_:1})]),_:1}),i(pS,{elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-table",class:"mr-2"}),o[14]||(o[14]=z(" キャラクター所持状況 ",-1))]),_:1,__:[14]}),i(dS,{class:"pa-0"},{default:j(()=>[i(ZS,{"fixed-header":"",height:"70vh",density:"compact",class:"table-fixed"},{default:j(()=>[l("thead",null,[l("tr",null,[o[15]||(o[15]=l("th",{rowspan:"2",class:"text-center pa-4"},"図鑑No.",-1)),o[16]||(o[16]=l("th",{rowspan:"2",class:"text-center pa-4"},"キャラ名",-1)),w(l("th",lC," 属性 ",512),[[I,n.value]]),w(l("th",uC," 分類 ",512),[[I,n.value]]),w(l("th",cC," 排出ガチャ ",512),[[I,n.value]]),($(!0),U(_,null,Q(e.accounts,e=>($(),U("th",{key:e.id,colspan:"2",class:"text-center pa-4 bg-grey-lighten-4"},[l("div",dC,[i(Ib,{size:"24",color:"primary",class:"mr-2"},{default:j(()=>[l("span",hC,R(e.name.charAt(0)),1)]),_:2},1024),z(" "+R(e.name),1)])]))),128))]),l("tr",null,[($(!0),U(_,null,Q(e.accounts,e=>($(),U(_,{key:e.id},[o[17]||(o[17]=l("th",{class:"text-center pa-2 bg-grey-lighten-4"},"1",-1)),o[18]||(o[18]=l("th",{class:"text-center pa-2 bg-grey-lighten-4"},"2",-1))],64))),128))])]),l("tbody",null,[e.dataLoaded?0===u.value.length?($(),U("tr",mC,[l("td",{colspan:5+2*e.accounts.length,class:"text-center pa-8"},[l("div",yC,[i(Zy,{icon:"mdi-inbox-outline",size:"64",color:"grey-lighten-1"}),o[20]||(o[20]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," 該当するキャラクターがいません ",-1))])],8,gC)])):Y("",!0):($(),U("tr",pC,[l("td",{colspan:5+2*e.accounts.length,class:"text-center pa-8"},[l("div",vC,[i(Lb,{indeterminate:"",color:"primary",size:"48"}),o[19]||(o[19]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))])],8,fC)])),($(!0),U(_,null,Q(u.value,t=>{return $(),U("tr",{key:t.id,class:"character-row"},[l("td",bC,R(t.indexNumber||"—"),1),l("td",wC,[l("div",_C,[i(Ib,{size:"32",color:m(t.element),class:"mr-3"},{default:j(()=>[l("span",IC,R(t.element||"?"),1)]),_:2},1032,["color"]),l("span",SC,R(t.monsterName||"—"),1)])]),w(l("td",{class:a(["element-"+(t.element||"").toLowerCase(),"text-center pa-4"])},[i(LI,{color:m(t.element),variant:"tonal",size:"small"},{default:j(()=>[z(R(t.element||"—"),1)]),_:2},1032,["color"])],2),[[I,n.value]]),w(l("td",CC,[i(LI,{color:(r=t.type,{"恒常":"success","限定":"warning","コラボ":"info","イベント":"secondary"}[r]||"grey"),variant:"tonal",size:"small"},{default:j(()=>[z(R(t.type||"—"),1)]),_:2},1032,["color"])],512),[[I,n.value]]),w(l("td",EC,[l("span",kC,R(t.ejectionGacha||"—"),1)],512),[[I,n.value]]),($(!0),U(_,null,Q(e.accounts,e=>($(),U(_,{key:e.id},[l("td",{class:a([v(t.id,e.id,1),"text-center pa-2"])},[i(tC,{location:"bottom"},{activator:j(({props:n})=>[l("div",h({ref_for:!0},n,{class:"cell-content",innerHTML:d(t.id,e.id,0)}),null,16,TC)]),default:j(()=>[l("span",{innerHTML:p(t.id,e.id,0)},null,8,AC)]),_:2},1024)],2),l("td",{class:a([v(t.id,e.id,2),"text-center pa-2"])},[i(tC,{location:"bottom"},{activator:j(({props:n})=>[l("div",h({ref_for:!0},n,{class:"cell-content",innerHTML:d(t.id,e.id,1)}),null,16,xC)]),default:j(()=>[l("span",{innerHTML:p(t.id,e.id,1)},null,8,NC)]),_:2},1024)],2)],64))),128))]);var r}),128))])]),_:1})]),_:1})]),_:1})])}}},[["__scopeId","data-v-e3f667de"]]),VC={class:"text-h6"},RC={class:"d-flex align-center w-100"},MC={class:"flex-grow-1 premium-text-content"},OC={class:"d-flex align-center"},LC=jy({__name:"CharacterSelector",props:{modelValue:{type:[String,null],required:!0},items:{type:Array,required:!0},itemTitle:{type:[String,Function],default:"monsterName"},disabledItems:{type:Array,default:()=>[]},label:{type:String,default:"キャラクター名で検索"},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:"mdi-magnify"},listHeight:{type:[String,Number],default:"400px"},listCardVariant:{type:String,default:"elevated"},noDataText:{type:String,default:"該当するキャラクターがいません"},density:{type:String,default:"comfortable"},listDensity:{type:String,default:"compact"},primaryColor:{type:String,default:"primary"},searchBgColor:{type:String,default:"grey-lighten-5"},cardElevation:{type:[Number,String],default:2},cardBorder:{type:[Boolean,String],default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,s=f(""),u=f(!1),c=o(()=>{if(!s.value)return n.items;const e=s.value.toLowerCase();return n.items.filter(t=>d(t).toLowerCase().includes(e))}),d=e=>"function"==typeof n.itemTitle?n.itemTitle(e):e[n.itemTitle]||"",h=e=>n.modelValue===e.id?n.primaryColor:n.disabledItems.includes(e.id)?"grey-lighten-3":"primary-lighten-5",p=e=>"player"===e.type?"mdi-account":"monster"===e.type?"mdi-dragon":"npc"===e.type?"mdi-account-tie":"mdi-account-circle",v=e=>{const t=e.length>0?e[0]:null;n.modelValue!==t&&r("update:modelValue",t)};return(t,o)=>($(),U(_,null,[i(KI,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),label:e.label,variant:e.variant,clearable:e.clearable,"prepend-inner-icon":e.prependInnerIcon,disabled:e.disabled,"hide-details":"",class:"mb-4 character-selector-search premium-search",density:e.density,color:e.primaryColor,"bg-color":e.searchBgColor,focused:u.value,onFocus:o[1]||(o[1]=e=>u.value=!0),onBlur:o[2]||(o[2]=e=>u.value=!1)},{"prepend-inner":j(()=>[i(Zy,{color:u.value?e.primaryColor:"grey",icon:e.prependInnerIcon,size:"20",class:"search-icon"},null,8,["color","icon"])]),_:1},8,["modelValue","label","variant","clearable","prepend-inner-icon","disabled","density","color","bg-color","focused"]),i(pS,{variant:e.listCardVariant,height:e.listHeight,disabled:e.disabled,class:"character-selector-card premium-card",elevation:e.cardElevation,border:e.cardBorder,style:{display:"flex","flex-direction":"column"}},{default:j(()=>[e.modelValue?($(),q(oS,{key:0,class:"d-flex align-center justify-end pa-4 pb-3 premium-card-header"},{default:j(()=>[i(LI,{size:"small",color:"success",variant:"tonal",class:"premium-chip"},{default:j(()=>o[3]||(o[3]=[z(" 選択中 ",-1)])),_:1,__:[3]})]),_:1})):Y("",!0),i(f_,{"model-value":[e.modelValue],"onUpdate:selected":v,class:"character-selector-list premium-list",density:e.listDensity,style:{"overflow-y":"auto","max-height":"calc(100% - 60px)"}},{default:j(()=>[0===c.value.length?($(),q(t_,{key:0,class:"no-data-item premium-no-data"},{default:j(()=>[i(Zw,{class:"text-center text-grey-darken-1 py-12"},{default:j(()=>[i(Zy,{icon:"mdi-information-outline",size:"64",class:"mb-4 no-data-icon",color:"grey-lighten-1"}),l("div",VC,R(e.noDataText),1)]),_:1})]),_:1})):Y("",!0),($(!0),U(_,null,Q(c.value,(s,u)=>($(),q(t_,{key:s.id,value:s.id,disabled:e.disabledItems.includes(s.id),class:a(["character-item premium-item",{"character-item--selected":e.modelValue===s.id,"character-item--disabled":e.disabledItems.includes(s.id)}]),onClick:e=>(e=>{n.disabledItems.includes(e.id)||r("update:modelValue",e.id)})(s)},{default:j(()=>[X(t.$slots,"item",{item:s},()=>[l("div",RC,[i(Ib,{size:"40",class:a(["mr-4 premium-avatar",{"selected-avatar":e.modelValue===s.id}]),color:h(s)},{default:j(()=>[i(Zy,{icon:p(s),color:e.modelValue===s.id?"white":"primary",size:"20",class:"avatar-icon"},null,8,["icon","color"])]),_:2},1032,["color","class"]),l("div",MC,[i(Zw,{class:a(["font-weight-bold text-h6",{"text-primary":e.modelValue===s.id}])},{default:j(()=>[z(R(d(s)),1)]),_:2},1032,["class"]),s.subtitle?($(),q(Jw,{key:0,class:"text-body-2 text-grey-darken-1 mt-1"},{default:j(()=>[z(R(s.subtitle),1)]),_:2},1024)):Y("",!0)])])],!0)]),append:j(()=>[l("div",OC,[e.disabledItems.includes(s.id)?($(),q(LI,{key:0,size:"small",color:"warning",variant:"tonal",class:"mr-3 premium-status-chip"},{default:j(()=>o[4]||(o[4]=[z(" 選択済 ",-1)])),_:1,__:[4]})):Y("",!0),e.modelValue===s.id?($(),q(Zy,{key:1,icon:"mdi-check-circle",color:"success",size:"24",class:"selection-indicator premium-check"})):Y("",!0)])]),_:2},1032,["value","disabled","class","onClick"]))),128))]),_:3},8,["model-value","density"])]),_:3},8,["variant","height","disabled","elevation","border"])],64))}},[["__scopeId","data-v-a7887c2a"]]),PC=ne({...ge(),...gI()},"VForm"),FC=te()({name:"VForm",props:PC(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:r,emit:i}=t;const o=function(e){const t=Ce(e,"modelValue"),r=b(()=>e.disabled),i=b(()=>e.readonly),s=n(!1),a=f([]),o=f([]);return v(a,()=>{let e=0,n=0;const r=[];for(const t of a.value)!1===t.isValid?(n++,r.push({id:t.id,errorMessages:t.errorMessages})):!0===t.isValid&&e++;o.value=r,t.value=!(n>0)&&(e===a.value.length||null)},{deep:!0,flush:"post"}),T(mI,{register:e=>{let{id:t,vm:n,validate:r,reset:i,resetValidation:s}=e;a.value.some(e=>e.id===t),a.value.push({id:t,validate:r,reset:i,resetValidation:s,vm:H(n),isValid:null,errorMessages:[]})},unregister:e=>{a.value=a.value.filter(t=>t.id!==e)},update:(e,t,n)=>{const r=a.value.find(t=>t.id===e);r&&(r.isValid=t,r.errorMessages=n)},isDisabled:r,isReadonly:i,isValidating:s,isValid:t,items:a,validateOn:b(()=>e.validateOn)}),{errors:o,isDisabled:r,isReadonly:i,isValidating:s,isValid:t,items:a,validate:async function(){const t=[];let n=!0;o.value=[],s.value=!0;for(const r of a.value){const i=await r.validate();if(i.length>0&&(n=!1,t.push({id:r.id,errorMessages:i})),!n&&e.fastFail)break}return o.value=t,s.value=!1,{valid:n,errors:o.value}},reset:function(){a.value.forEach(e=>e.reset())},resetValidation:function(){a.value.forEach(e=>e.resetValidation())}}}(e),u=f();function c(e){e.preventDefault(),o.reset()}function d(e){const t=e,n=o.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),i("submit",t),t.defaultPrevented||n.then(e=>{var t;let{valid:n}=e;n&&(null==(t=u.value)||t.submit())}),t.preventDefault()}return fe(()=>{var t;return l("form",{ref:u,class:a(["v-form",e.class]),style:s(e.style),novalidate:!0,onReset:c,onSubmit:d},[null==(t=r.default)?void 0:t.call(r,o)])}),Q_(o,u)}}),BC={class:"pa-6"},UC={class:"d-flex align-center mb-6"},$C={class:"mb-4"},jC={class:"d-flex align-center mb-3"},zC={__name:"AddOwnedCharacterTab",props:{characterMasters:{type:Array,required:!0},characterMastersMap:{type:Map,required:!0},selectedAccountId:{type:String,default:null},ownedCountMap:{type:Map,required:!0}},emits:["character-added"],setup(e,{emit:t}){const n=e,r=t,s=f(null),a=f(!1),u=o(()=>n.selectedAccountId?n.characterMasters.filter(e=>c(e.id)<2):[]);v(()=>n.selectedAccountId,()=>{s.value=null});const c=e=>n.selectedAccountId&&n.ownedCountMap.get(`${e}-${n.selectedAccountId}`)||0,d=e=>{const t=c(e.id);return`[${e.indexNumber||"?"}] ${e.monsterName} | 所持数: ${t} / 2`},h=async()=>{if(!s.value||!n.selectedAccountId)return alert("追加するキャラとアカウントを選択してください。");if(c(s.value)>=2)return alert("このキャラは既に2体所持しています。");a.value=!0;try{const e=n.characterMastersMap.get(s.value);if(!e)throw new Error("キャラのマスター情報が見つかりません。");const t={characterMasterId:s.value,monsterName:e.monsterName,items:[],createdAt:Yv()},i=await Oy(n.selectedAccountId,t),a={...t,id:i.id,createdAt:{toDate:()=>new Date}};r("character-added",{accountId:n.selectedAccountId,newCharacter:a}),alert(`「${e.monsterName}」を所持リストに追加しました。`),s.value=null}catch(e){alert("エラー: "+e.message)}finally{a.value=!1}};return(e,t)=>($(),U("div",BC,[l("div",UC,[i(Zy,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),t[1]||(t[1]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," 所持キャラクター追加 ",-1))]),i(FC,{onSubmit:J(h,["prevent"])},{default:j(()=>[i(pS,{elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-account-search",class:"mr-2"}),t[2]||(t[2]=z(" キャラクター選択 ",-1))]),_:1,__:[2]}),i(dS,{class:"pa-6"},{default:j(()=>[i(ES,{class:"pa-0"},{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12"},{default:j(()=>[l("div",$C,[l("div",jC,[i(Zy,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),t[3]||(t[3]=l("h6",{class:"text-h6 font-weight-medium"}," 追加するキャラクター ",-1))]),i(LC,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),items:u.value,"item-title":d,label:"追加するキャラクター名で検索","list-height":"400px","no-data-text":"追加できるキャラクターがいません",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),i(iS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(XS),i(vw,{loading:a.value,disabled:!s.value||a.value,onClick:h,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-account-plus",class:"px-8"},{default:j(()=>[z(R(a.value?"追加中...":"このキャラクターを所持リストに追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},qC=(e,t,n,r,i,s=null)=>{if(!e)return"キャラクター情報なし";const a=n.get(e.characterMasterId),o=a?a.monsterName:"不明",l=e.accountId||s;if(!l)return`${o} (アカウント不明)`;const u=(r.get(l)||[]).filter(t=>t.characterMasterId===e.characterMasterId).findIndex(t=>t.id===e.id);let c=`${o} (${u>=0?u+1:"？"}体目)`;{const t=(e.items||[]).map(e=>i.get(Number(e))).filter(Boolean).join("、");t&&(c+=`[${t}]`)}return c},HC=$e("v-alert-title"),KC=ne({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");const GC=["success","info","warning","error"],WC=ne({border:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:ye,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>GC.includes(e)},...ge(),...vb(),...eb(),...Sb(),...KC(),...Fb(),...Kb(),...ib(),...Xy(),...me(),...bb({variant:"flat"})},"VAlert"),QC=te()({name:"VAlert",props:WC(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const u=Ce(e,"modelValue"),c=b(()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=function(e,t){return{iconSize:o(()=>{const n=new Map(e.iconSizes),r=e.iconSize??t()??"default";return n.has(r)?n.get(r):r})}}(e,()=>e.prominent?44:void 0),{themeClasses:p}=Se(e),{colorClasses:f,colorStyles:v,variantClasses:m}=wb(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:g}=mb(e),{dimensionStyles:y}=tb(e),{elevationClasses:w}=Cb(e),{locationStyles:_}=Bb(e),{positionClasses:I}=Gb(e),{roundedClasses:S}=sb(e),{textColorClasses:C,textColorStyles:E}=Ky(()=>e.borderColor),{t:k}=bt(),T=b(()=>({"aria-label":k(e.closeLabel),onClick(e){u.value=!1,n("click:close",e)}}));return()=>{const t=!(!r.prepend&&!c.value),n=!(!r.title&&!e.title),o=!(!r.close&&!e.closable),b={density:e.density,icon:c.value,size:e.iconSize||e.prominent?d.value:void 0};return u.value&&i(e.tag,{class:a(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},p.value,f.value,g.value,w.value,I.value,S.value,m.value,e.class]),style:s([v.value,y.value,_.value,e.style]),role:"alert"},{default:()=>{var u,d;return[yb(!1,"v-alert"),e.border&&l("div",{key:"border",class:a(["v-alert__border",C.value]),style:s(E.value)},null),t&&l("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?i(qy,{key:"prepend-defaults",disabled:!c.value,defaults:{VIcon:{...b}}},r.prepend):i(Zy,h({key:"prepend-icon"},b),null)]),l("div",{class:"v-alert__content"},[n&&i(HC,{key:"title"},{default:()=>{var t;return[(null==(t=r.title)?void 0:t.call(r))??e.title]}}),(null==(u=r.text)?void 0:u.call(r))??e.text,null==(d=r.default)?void 0:d.call(r)]),r.append&&l("div",{key:"append",class:"v-alert__append"},[r.append()]),o&&l("div",{key:"close",class:"v-alert__close"},[r.close?i(qy,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var e;return[null==(e=r.close)?void 0:e.call(r,{props:T.value})]}}):i(vw,h({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},T.value),null)])]}})}}}),YC={class:"pa-6"},XC={class:"d-flex align-center mb-6"},JC={class:"mb-4"},ZC={class:"d-flex align-center mb-3"},eE={class:"mb-4"},tE={class:"d-flex align-center mb-3"},nE={class:"text-center mb-4"},rE={class:"text-center mb-4"},iE={key:0,class:"text-center pa-4"},sE={key:1,class:"text-center pa-4"},aE={key:2},oE={class:"mb-3"},lE={class:"text-center mb-4"},uE={class:"d-flex justify-center"},cE={__name:"ManageItemsTab",props:{selectedAccountId:{type:String,default:null},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["items-updated","items-moved"],setup(e,{emit:t}){const n=e,r=t,s=S({selectedOwnedId:null,items:[]}),a=S({from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]}),u=f(!1),c=f(!1),d=o(()=>{if(!n.selectedAccountId||!n.ownedCharactersData.has(n.selectedAccountId))return[];return(n.ownedCharactersData.get(n.selectedAccountId)||[]).map(e=>{const t=n.characterMastersMap.get(e.characterMasterId);return{...e,id:e.id,indexNumber:(null==t?void 0:t.indexNumber)||999999,monsterName:(null==t?void 0:t.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)}),h=o(()=>{if(!a.from.selectedId)return[];const e=d.value.find(e=>e.id===a.from.selectedId);return e&&e.items?e.items.map(e=>({id:Number(e),name:n.itemMastersMap.get(Number(e))||`不明(ID:${e})`})):[]});v(()=>n.selectedAccountId,()=>{Object.assign(s,{selectedOwnedId:null,items:[]}),Object.assign(a,{from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]})}),v(()=>s.selectedOwnedId,e=>{var t;if(!e)return void(s.items=[]);const n=d.value.find(t=>t.id===e);s.items=(null==(t=null==n?void 0:n.items)?void 0:t.map(Number))||[]}),v(()=>a.from.selectedId,()=>{a.selectedItemIds=[]});const p=async()=>{if(s.selectedOwnedId){if(s.items.length>3)return alert("アイテムは3つまでです。");u.value=!0;try{await Ly(n.selectedAccountId,s.selectedOwnedId,s.items),r("items-updated",{accountId:n.selectedAccountId,ownedCharacterId:s.selectedOwnedId,items:s.items}),alert("アイテムを更新しました。")}catch(e){alert("エラー: "+e.message)}finally{u.value=!1}}},m=async()=>{var e;c.value=!0;try{const t=a.from.selectedId,i=a.to.selectedId,s=a.selectedItemIds;if(t===i||!t||!i)throw new Error("有効な移動元と移動先を選択してください。");if(0===s.length)throw new Error("移動するアイテムを選択してください。");const o=d.value.find(e=>e.id===t),l=d.value.find(e=>e.id===i);if(!o||!l)throw new Error("キャラクター情報が見つかりません。");if(((null==(e=l.items)?void 0:e.length)||0)+s.length>3)throw new Error("移動先のアイテム所持数が上限を超えます。");const u=(o.items||[]).map(Number).filter(e=>!s.includes(e)),c=[...(l.items||[]).map(Number),...s];await Py(n.selectedAccountId,{id:t,items:u},{id:i,items:c}),r("items-moved",{accountId:n.selectedAccountId,from:{id:t,items:u},to:{id:i,items:c}}),alert("アイテムを移動しました。"),a.from.selectedId=null,a.to.selectedId=null,a.selectedItemIds=[]}catch(t){alert(`エラー: ${t.message}`)}finally{c.value=!1}},g=(e,t)=>qC(e,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,n.selectedAccountId);return(t,n)=>($(),U("div",YC,[l("div",XC,[i(Zy,{icon:"mdi-sword-cross",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"アイテム管理",-1))]),i(FC,null,{default:j(()=>[i(pS,{elevation:"3",rounded:"lg",class:"mb-6"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-update",class:"mr-2"}),n[6]||(n[6]=z(" 所持キャラクターのアイテムを変更 ",-1))]),_:1,__:[6]}),i(dS,{class:"pa-6"},{default:j(()=>[i(ES,null,{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12",md:"6"},{default:j(()=>[l("div",JC,[l("div",ZC,[i(Zy,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),n[7]||(n[7]=l("h6",{class:"text-h6 font-weight-medium"},"対象キャラクター",-1))]),i(LC,{modelValue:s.selectedOwnedId,"onUpdate:modelValue":n[0]||(n[0]=e=>s.selectedOwnedId=e),items:d.value,label:"変更対象のキャラクターを検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[i(Zw,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items"])])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[l("div",eE,[l("div",tE,[i(Zy,{icon:"mdi-sword-cross",color:"primary",class:"mr-2"}),n[8]||(n[8]=l("h6",{class:"text-h6 font-weight-medium"},"アイテム選択",-1))]),i(tS,{modelValue:s.items,"onUpdate:modelValue":n[1]||(n[1]=e=>s.items=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム (最大3つまで)",multiple:"",chips:"",clearable:"",variant:"outlined",disabled:!s.selectedOwnedId,color:"primary","prepend-inner-icon":"mdi-sword-cross"},null,8,["modelValue","items","disabled"]),i(vw,{loading:u.value,disabled:!s.selectedOwnedId||u.value||s.items.length>3,onClick:p,color:"primary",block:"",size:"large",variant:"elevated","prepend-icon":"mdi-update",class:"mt-4"},{default:j(()=>[z(R(u.value?"更新中...":"アイテムを更新"),1)]),_:1},8,["loading","disabled"]),s.items.length>3?($(),q(QC,{key:0,type:"error",variant:"tonal",class:"mt-3","prepend-icon":"mdi-alert-circle"},{default:j(()=>n[9]||(n[9]=[z(" アイテムは3つまでしか選択できません。 ",-1)])),_:1,__:[9]})):Y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(pS,{elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-swap-horizontal",class:"mr-2"}),n[10]||(n[10]=z(" キャラクター間でアイテムを移動 ",-1))]),_:1,__:[10]}),i(dS,{class:"pa-6"},{default:j(()=>[i(ES,null,{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12",md:"4"},{default:j(()=>[l("div",nE,[i(Ib,{size:"48",color:"secondary",class:"mb-2"},{default:j(()=>[i(Zy,{icon:"mdi-arrow-left",size:"24",color:"white"})]),_:1}),n[11]||(n[11]=l("h6",{class:"text-h6 font-weight-bold text-secondary"}," 移動元 ",-1))]),i(LC,{modelValue:a.from.selectedId,"onUpdate:modelValue":n[2]||(n[2]=e=>a.from.selectedId=e),items:d.value,label:"移動元キャラクターを検索","list-height":"250px","disabled-items":[a.to.selectedId].filter(Boolean),color:"secondary","prepend-inner-icon":"mdi-account-arrow-left"},{item:j(({item:e})=>[i(Zw,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[l("div",rE,[i(Ib,{size:"48",color:"info",class:"mb-2"},{default:j(()=>[i(Zy,{icon:"mdi-sword-cross",size:"24",color:"white"})]),_:1}),n[12]||(n[12]=l("h6",{class:"text-h6 font-weight-bold text-info"}," 移動するアイテム ",-1))]),i(pS,{elevation:"2",rounded:"lg",style:{height:"318px","overflow-y":"auto"},class:"border-info border"},{default:j(()=>[i(dS,{class:"pa-4"},{default:j(()=>[a.from.selectedId?h.value.length?($(),U("div",aE,[l("div",oE,[i(LI,{color:"info",variant:"tonal",size:"small",class:"mb-2"},{default:j(()=>[z(R(h.value.length)+"個のアイテム ",1)]),_:1})]),($(!0),U(_,null,Q(h.value,e=>($(),q(EI,{key:e.id,modelValue:a.selectedItemIds,"onUpdate:modelValue":n[3]||(n[3]=e=>a.selectedItemIds=e),label:e.name,value:e.id,density:"compact","hide-details":"",color:"info",class:"mb-2"},null,8,["modelValue","label","value"]))),128))])):($(),U("div",sE,[i(Zy,{icon:"mdi-inbox-outline",size:"48",color:"grey-lighten-1"}),n[14]||(n[14]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動できるアイテムがありません。 ",-1))])):($(),U("div",iE,[i(Zy,{icon:"mdi-information",size:"48",color:"grey-lighten-1"}),n[13]||(n[13]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動元キャラクターを選択してください。 ",-1))]))]),_:1})]),_:1})]),_:1}),i(RS,{cols:"12",md:"4"},{default:j(()=>[l("div",lE,[i(Ib,{size:"48",color:"success",class:"mb-2"},{default:j(()=>[i(Zy,{icon:"mdi-arrow-right",size:"24",color:"white"})]),_:1}),n[15]||(n[15]=l("h6",{class:"text-h6 font-weight-bold text-success"},"移動先",-1))]),i(LC,{modelValue:a.to.selectedId,"onUpdate:modelValue":n[4]||(n[4]=e=>a.to.selectedId=e),items:d.value,label:"移動先キャラクターを検索","list-height":"250px","disabled-items":[a.from.selectedId].filter(Boolean),color:"success","prepend-inner-icon":"mdi-account-arrow-right"},{item:j(({item:e})=>[i(Zw,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1})]),_:1}),i(YS,{class:"mt-6"},{default:j(()=>[i(RS,null,{default:j(()=>[l("div",uE,[i(vw,{loading:c.value,disabled:!a.from.selectedId||!a.to.selectedId||0===a.selectedItemIds.length||c.value,onClick:m,color:"success",size:"large",variant:"elevated","prepend-icon":"mdi-swap-horizontal",class:"px-8"},{default:j(()=>[z(R(c.value?"移動中...":"選択したアイテムを移動"),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},dE={class:"team-list-container",style:{height:"65vh","overflow-y":"auto"}},hE={key:0,class:"text-center pa-8"},pE={key:1,class:"text-center pa-8"},fE=["onClick"],vE={class:"d-flex align-center justify-space-between mb-3"},mE={class:"flex-grow-1"},gE={class:"text-h6 font-weight-bold text-primary mb-1"},yE=["title"],bE=["title"],wE=["title"],_E={__name:"TeamList",props:{dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},selectedTeamId:{type:String,default:null}},emits:["select-team","delete-team"],setup(e,{emit:t}){const n=e,r=t,s=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],u=S({type:""}),c=o(()=>u.type?n.teams.filter(e=>e.type===u.type):n.teams),d=(e,t)=>{if(!e.characters||!n.dataLoaded||t>=e.characters.length)return{characterName:"—",accountName:"—",items:[]};const r=e.characters[t],i=n.accounts.find(e=>e.id===r.accountId),s=(n.ownedCharactersData.get(r.accountId)||[]).find(e=>e.id===r.ownedCharacterId);if(!s)return{characterName:"キャラ不明",accountName:(null==i?void 0:i.name)||"不明",items:[]};const a=n.characterMastersMap.get(s.characterMasterId);return{characterName:(null==a?void 0:a.monsterName)||"不明",accountName:(null==i?void 0:i.name)||"不明",items:(s.items||[]).map(e=>n.itemMastersMap.get(Number(e))||`不明ID:${e}`).filter(Boolean)}};return(t,n)=>($(),q(pS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-format-list-bulleted",class:"mr-2"}),n[1]||(n[1]=z(" 編成一覧 ",-1))]),_:1,__:[1]}),i(dS,{class:"pa-4"},{default:j(()=>[i(tS,{modelValue:u.type,"onUpdate:modelValue":n[0]||(n[0]=e=>u.type=e),items:["",...s],label:"タイプで絞り込み",variant:"outlined",clearable:"",density:"compact","prepend-inner-icon":"mdi-filter",class:"mb-4",color:"primary"},null,8,["modelValue","items"]),l("div",dE,[e.dataLoaded?0===c.value.length?($(),U("div",pE,[i(Zy,{icon:"mdi-inbox-outline",size:"64",color:"grey-lighten-1"}),n[3]||(n[3]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," 該当する編成がありません ",-1))])):Y("",!0):($(),U("div",hE,[i(Lb,{indeterminate:"",color:"primary",size:"48"}),n[2]||(n[2]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))])),($(!0),U(_,null,Q(c.value,t=>{return $(),U("div",{key:t.id,onClick:e=>(e=>{r("select-team",e)})(t),class:a(["team-item mb-3 pa-4 rounded-lg cursor-pointer transition-all",e.selectedTeamId===t.id?"bg-primary-lighten-5 border-primary border-2":"bg-grey-lighten-5 border-grey-lighten-3 border"]),style:{"min-height":"120px"}},[l("div",vE,[l("div",mE,[l("h3",gE,R(t.name),1),i(LI,{color:(n=t.type,{"禁忌":"deep-purple","天魔(試練)":"red-darken-2","天魔(庭園)":"green-darken-2","星墓":"blue-darken-2","轟絶":"orange-darken-2","黎絶":"blue-darken-2"}[n]||"grey"),size:"small",variant:"tonal",class:"font-weight-medium"},{default:j(()=>[z(R(t.type),1)]),_:2},1032,["color"])]),i(vw,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:J(e=>{return n=t.id,void r("delete-team",n);var n},["stop"]),class:"ml-2"},null,8,["onClick"])]),i(YS,{dense:""},{default:j(()=>[($(!0),U(_,null,Q(Array(4),(e,n)=>($(),q(RS,{key:n,cols:"3"},{default:j(()=>[l("div",{class:a(["character-slot pa-2 rounded text-center","—"!==d(t,n).characterName?"bg-white":"bg-grey-lighten-4"])},[l("div",{class:"text-caption font-weight-bold text-truncate mb-1",title:d(t,n).characterName},R(d(t,n).characterName),9,yE),l("div",{class:"text-caption text-truncate mb-1",title:d(t,n).accountName},R(d(t,n).accountName),9,bE),i(gw,{class:"my-1"}),($(),U(_,null,Q(4,e=>l("div",{key:e,class:"text-caption text-truncate",title:d(t,n).items[e-1]},R(d(t,n).items[e-1]||"—"),9,wE)),64))],2)]),_:2},1024))),128))]),_:2},1024)],10,fE);var n}),128))])]),_:1})]),_:1}))}},IE={class:"character-formation-section"},SE={class:"d-flex align-center mb-4"},CE={class:"d-flex align-center mb-4"},EE={class:"text-white font-weight-bold"},kE={class:"text-h6 font-weight-bold"},TE={key:1,class:"pa-8 text-center"},AE={__name:"TeamForm",props:{team:{type:Object,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},isSaving:{type:Boolean,default:!1}},emits:["save-team","reset-form","update:team"],setup(e,{emit:t}){const n=e,r=t,s=(e,t)=>{const i=JSON.parse(JSON.stringify(n.team));i[e]=t,r("update:team",i)},u=(e,t,i)=>{const s={...n.team,slots:n.team.slots.map((n,r)=>r===e?{...n,[t]:i}:n)};"selectedAccountId"===t&&(s.slots[e].selectedOwnedId=null),r("update:team",s)},c=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],d=o(()=>n.team.name&&n.team.type&&n.team.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)),h=e=>{if(!e.selectedAccountId)return[];return(n.ownedCharactersData.get(e.selectedAccountId)||[]).map(t=>{const r=n.characterMastersMap.get(t.characterMasterId);return{...t,accountId:e.selectedAccountId,indexNumber:(null==r?void 0:r.indexNumber)||999999,monsterName:(null==r?void 0:r.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)};return(t,r)=>($(),q(pS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-account-edit",class:"mr-2"}),z(" "+R(e.team.id?"編成編集":"新規編成作成"),1)]),_:1}),i(aS,{class:"pa-4 bg-grey-lighten-5"},{default:j(()=>[i(vw,{onClick:r[0]||(r[0]=e=>t.$emit("reset-form")),size:"small",variant:"tonal",color:"primary","prepend-icon":"mdi-plus"},{default:j(()=>r[4]||(r[4]=[z(" 新規作成フォームを開く ",-1)])),_:1,__:[4]})]),_:1}),e.accounts.length>0&&e.ownedCharactersData.size>0&&e.characterMastersMap.size>0?($(),U(_,{key:0},[i(dS,{class:"pa-6"},{default:j(()=>[i(KI,{"model-value":e.team.name,"onUpdate:modelValue":r[1]||(r[1]=e=>s("name",e)),label:"編成名",variant:"outlined",placeholder:"例: 天魔の孤城 第1の間",class:"mb-6",color:"primary","prepend-inner-icon":"mdi-format-title"},null,8,["model-value"]),i(tS,{"model-value":e.team.type,"onUpdate:modelValue":r[2]||(r[2]=e=>s("type",e)),items:c,label:"タイプ",variant:"outlined",class:"mb-8",color:"primary","prepend-inner-icon":"mdi-tag"},null,8,["model-value"]),l("div",IE,[l("div",SE,[i(Zy,{icon:"mdi-account-multiple",color:"primary",class:"mr-2"}),r[5]||(r[5]=l("h4",{class:"text-h5 font-weight-bold text-primary"}," キャラクター編成 (4体) ",-1))]),i(YS,null,{default:j(()=>[($(!0),U(_,null,Q(e.team.slots,(t,r)=>($(),q(RS,{key:r,cols:"12",md:"6"},{default:j(()=>[i(pS,{elevation:"2",class:a(["pa-4 h-100 character-slot-card",t.selectedAccountId?"border-primary border-2":"border-grey-lighten-3 border"]),rounded:"lg",style:{"min-height":"400px"}},{default:j(()=>{return[l("div",CE,[i(Ib,{size:"32",color:"primary",class:"mr-3"},{default:j(()=>[l("span",EE,R(r+1),1)]),_:2},1024),l("h5",kE," スロット "+R(r+1),1)]),i(tS,{"model-value":t.selectedAccountId,"onUpdate:modelValue":e=>u(r,"selectedAccountId",e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",class:"mb-3",color:"primary","prepend-inner-icon":"mdi-account"},null,8,["model-value","onUpdate:modelValue","items"]),i(LC,{"model-value":t.selectedOwnedId,"onUpdate:modelValue":e=>((e,t)=>{u(e,"selectedOwnedId",t)})(r,e),items:h(t),label:"キャラクターを選択","list-height":"280px",variant:"filled",disabled:!t.selectedAccountId,"disabled-items":(s=r,n.team.slots.filter((e,t)=>t!==s&&e.selectedOwnedId).map(e=>e.selectedOwnedId)),"no-data-text":"先にアカウントを選択",density:"comfortable","list-density":"comfortable","primary-color":"primary","search-bg-color":"grey-lighten-5","card-elevation":2,"prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[i(Zw,null,{default:j(()=>{return[z(R((t=e,qC(t,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,t.accountId))),1)];var t}),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue","items","disabled","disabled-items"])];var s}),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})])]),_:1}),i(iS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(XS),i(vw,{loading:e.isSaving,disabled:!d.value||e.isSaving,onClick:r[3]||(r[3]=e=>t.$emit("save-team")),color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(e.isSaving?"保存中...":e.team.id?"編成を更新":"編成を保存"),1)]),_:1},8,["loading","disabled"])]),_:1})],64)):($(),U("div",TE,[i(Lb,{indeterminate:"",color:"primary",size:"48"}),r[6]||(r[6]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))]))]),_:1}))}},xE={class:"pa-6"},NE={class:"d-flex align-center mb-6"},DE=jy({__name:"ManageTeamsTab",props:{userId:{type:String,required:!0},dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["team-added","team-updated","team-deleted"],setup(e,{emit:t}){const n=e,r=t,s=f(!1),a=()=>({id:null,name:"",type:"",slots:Array(4).fill().map(()=>({selectedAccountId:"",selectedOwnedId:"",characterSearch:""}))}),o=S(a()),u=e=>{Object.assign(o,e)},c=e=>{Object.assign(o,{id:e.id,name:e.name,type:e.type,slots:JSON.parse(JSON.stringify(e.characters.map(e=>({selectedAccountId:e.accountId,selectedOwnedId:e.ownedCharacterId,characterSearch:""}))))})},d=()=>{Object.assign(o,a())},h=async()=>{if(!(o.name&&o.type&&o.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)))return void alert("編成名、タイプ、4体のキャラを全て選択してください。");s.value=!0;const e={userId:n.userId,name:o.name,type:o.type,characters:o.slots.map(e=>({accountId:e.selectedAccountId,ownedCharacterId:e.selectedOwnedId}))};try{const t=o.id;Object.assign(e,t?{updatedAt:Yv()}:{createdAt:Yv()});const n=await Uy(t,e);if(t)r("team-updated",{...e,id:t}),alert("編成を更新しました。");else{const t={...e,id:n.id,createdAt:{toDate:()=>new Date}};r("team-added",t),alert("編成を保存しました。"),d()}}catch(t){alert("エラー: "+t.message)}finally{s.value=!1}},p=async e=>{if(confirm("この編成を本当に削除しますか？"))try{await $y(e),r("team-deleted",e),alert("編成を削除しました。"),o.id===e&&d()}catch(t){alert("エラー: "+t.message)}};return(t,n)=>($(),U("div",xE,[l("div",NE,[i(Zy,{icon:"mdi-account-group",size:"32",color:"primary",class:"mr-3"}),n[0]||(n[0]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"編成管理",-1))]),i(YS,null,{default:j(()=>[i(RS,{cols:"12",lg:"5"},{default:j(()=>[i(_E,{"data-loaded":e.dataLoaded,teams:e.teams,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"selected-team-id":o.id,onSelectTeam:c,onDeleteTeam:p},null,8,["data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map","selected-team-id"])]),_:1}),i(RS,{cols:"12",lg:"7"},{default:j(()=>[i(AE,{team:o,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"is-saving":s.value,onSaveTeam:h,onResetForm:d,"onUpdate:team":u},null,8,["team","accounts","owned-characters-data","character-masters-map","item-masters-map","is-saving"])]),_:1})]),_:1})]))}},[["__scopeId","data-v-42576069"]]),VE={class:"pa-6"},RE={class:"d-flex align-center mb-6"},ME={__name:"AddMasterCharacterTab",props:{gachaMasters:{type:Array,required:!0}},emits:["master-added"],setup(e,{emit:t}){const n=t,r=S({no:"",name:"",element:"",type:"恒常",gacha:""}),s=f(!1),a=async()=>{if(!r.name)return alert("キャラクター名は必須です。");s.value=!0;try{const e={indexNumber:r.no?Number(r.no):0,monsterName:r.name,element:r.element||"",type:r.type||"恒常",ejectionGacha:r.gacha||""};await Fy(e),alert("マスターを追加しました。ページをリロードして反映してください。"),n("master-added")}catch(e){alert("エラー: "+e.message)}finally{s.value=!1}};return(t,n)=>($(),U("div",VE,[l("div",RE,[i(Zy,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター新規追加 ",-1))]),i(FC,{onSubmit:J(a,["prevent"])},{default:j(()=>[i(pS,{elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-account-plus",class:"mr-2"}),n[6]||(n[6]=z(" 新規キャラクター情報 ",-1))]),_:1,__:[6]}),i(dS,{class:"pa-6"},{default:j(()=>[i(ES,null,{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12",md:"6"},{default:j(()=>[i(KI,{modelValue:r.no,"onUpdate:modelValue":n[0]||(n[0]=e=>r.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",placeholder:"例: 1234",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(KI,{modelValue:r.name,"onUpdate:modelValue":n[1]||(n[1]=e=>r.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:r.element,"onUpdate:modelValue":n[2]||(n[2]=e=>r.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:r.type,"onUpdate:modelValue":n[3]||(n[3]=e=>r.type=e),items:["恒常","限定","コラボ","α"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12"},{default:j(()=>[i(tS,{modelValue:r.gacha,"onUpdate:modelValue":n[4]||(n[4]=e=>r.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),i(iS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(XS),i(vw,{loading:s.value,disabled:!r.name||s.value,onClick:a,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(s.value?"追加中...":"マスターリストに新規追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},OE={class:"pa-6"},LE={class:"d-flex align-center mb-6"},PE={__name:"EditMasterCharacterTab",props:{characterMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0}},emits:["master-updated"],setup(e,{emit:t}){const n=e,r=t,s=S({search:"",selectedMasterId:null,no:"",name:"",element:"",type:"",gacha:""}),a=f(!1),u=o(()=>new Map(n.characterMasters.map(e=>[e.id,e])));v(()=>s.selectedMasterId,e=>{if(!e)return void Object.assign(s,{name:"",no:"",element:"",type:"",gacha:""});const t=u.value.get(e);t&&Object.assign(s,{name:t.monsterName,no:t.indexNumber,element:t.element,type:t.type,gacha:t.ejectionGacha})});const c=async()=>{if(!s.selectedMasterId||!s.name)return alert("キャラを選択し名前を入力してください。");a.value=!0;try{const e={monsterName:s.name,indexNumber:s.no?Number(s.no):0,element:s.element,type:s.type,ejectionGacha:s.gacha};await By(s.selectedMasterId,e),alert("マスター情報を更新しました。ページをリロードしてください。"),r("master-updated")}catch(e){alert("更新に失敗: "+e.message)}finally{a.value=!1}};return(t,r)=>($(),U("div",OE,[l("div",LE,[i(Zy,{icon:"mdi-account-edit",size:"32",color:"primary",class:"mr-3"}),r[6]||(r[6]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター編集 ",-1))]),i(FC,null,{default:j(()=>[i(ES,{class:"pa-0"},{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12"},{default:j(()=>[i(pS,{elevation:"2",rounded:"lg",class:"mb-4"},{default:j(()=>[i(oS,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-account-search",class:"mr-2"}),r[7]||(r[7]=z(" 編集対象キャラクター選択 ",-1))]),_:1,__:[7]}),i(dS,{class:"pa-4"},{default:j(()=>[i(LC,{modelValue:s.selectedMasterId,"onUpdate:modelValue":r[0]||(r[0]=e=>s.selectedMasterId=e),items:n.characterMasters,"item-title":e=>`[${e.indexNumber||"?"}] ${e.monsterName}`,label:"編集したいキャラクター名で検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items","item-title"])]),_:1})]),_:1})]),_:1})]),_:1}),s.selectedMasterId?($(),q(YS,{key:0,class:"mt-4"},{default:j(()=>[i(RS,{cols:"12"},{default:j(()=>[i(pS,{elevation:"3",rounded:"lg"},{default:j(()=>[i(oS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[i(Zy,{icon:"mdi-account-edit",class:"mr-2"}),r[8]||(r[8]=z(" 編集フォーム ",-1))]),_:1,__:[8]}),i(dS,{class:"pa-6"},{default:j(()=>[i(ES,null,{default:j(()=>[i(YS,null,{default:j(()=>[i(RS,{cols:"12",md:"6"},{default:j(()=>[i(KI,{modelValue:s.no,"onUpdate:modelValue":r[1]||(r[1]=e=>s.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(KI,{modelValue:s.name,"onUpdate:modelValue":r[2]||(r[2]=e=>s.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:s.element,"onUpdate:modelValue":r[3]||(r[3]=e=>s.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12",md:"6"},{default:j(()=>[i(tS,{modelValue:s.type,"onUpdate:modelValue":r[4]||(r[4]=e=>s.type=e),items:["恒常","限定","コラボ","イベント"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(RS,{cols:"12"},{default:j(()=>[i(tS,{modelValue:s.gacha,"onUpdate:modelValue":r[5]||(r[5]=e=>s.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),i(iS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(XS),i(vw,{loading:a.value,disabled:!s.selectedMasterId||a.value,onClick:c,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(a.value?"更新中...":"マスター情報を更新"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):Y("",!0)]),_:1})]),_:1})]))}},FE=ne({...ge(),...Ge(At(),["fullHeight"]),...me()},"VApp"),BE=te()({name:"VApp",props:FE(),setup(e,t){let{slots:n}=t;const r=Se(e),{layoutClasses:i,getLayoutItem:o,items:u,layoutRef:c}=xt({...e,fullHeight:!0}),{rtlClasses:d}=Ne();return fe(()=>{var t;return l("div",{ref:c,class:a(["v-application",r.themeClasses.value,i.value,d.value,e.class]),style:s([e.style])},[l("div",{class:"v-application__wrap"},[null==(t=n.default)?void 0:t.call(n)])])}),{getLayoutItem:o,items:u,theme:r}}}),UE=ne({text:String,...ge(),...Xy()},"VToolbarTitle"),$E=te()({name:"VToolbarTitle",props:UE(),setup(e,t){let{slots:n}=t;return fe(()=>{const t=!!(n.default||n.text||e.text);return i(e.tag,{class:a(["v-toolbar-title",e.class]),style:s(e.style)},{default:()=>{var r;return[t&&l("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,null==(r=n.default)?void 0:r.call(n)])]}})}),{}}}),jE=[null,"prominent","default","comfortable","compact"],zE=ne({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>jE.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...hb(),...ge(),...Sb(),...ib(),...Xy({tag:"header"}),...me()},"VToolbar"),qE=te()({name:"VToolbar",props:zE(),setup(e,t){var r;let{slots:u}=t;const{backgroundColorClasses:c,backgroundColorStyles:d}=Gy(()=>e.color),{borderClasses:h}=pb(e),{elevationClasses:p}=Cb(e),{roundedClasses:f}=sb(e),{themeClasses:v}=Se(e),{rtlClasses:m}=Ne(),g=n(null===e.extended?!!(null==(r=u.extension)?void 0:r.call(u)):e.extended),y=o(()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10)),b=o(()=>g.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0);return re({VBtn:{variant:"text"}}),fe(()=>{var t;const n=!(!e.title&&!u.title),r=!(!u.image&&!e.image),o=null==(t=u.extension)?void 0:t.call(u);return g.value=null===e.extended?!!o:e.extended,i(e.tag,{class:a(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},c.value,h.value,p.value,f.value,v.value,m.value,e.class]),style:s([d.value,e.style])},{default:()=>[r&&l("div",{key:"image",class:"v-toolbar__image"},[u.image?i(qy,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},u.image):i(db,{key:"image-img",cover:!0,src:e.image},null)]),i(qy,{defaults:{VTabs:{height:de(y.value)}}},{default:()=>{var t,r,s;return[l("div",{class:"v-toolbar__content",style:{height:de(y.value)}},[u.prepend&&l("div",{class:"v-toolbar__prepend"},[null==(t=u.prepend)?void 0:t.call(u)]),n&&i($E,{key:"title",text:e.title},{text:u.title}),null==(r=u.default)?void 0:r.call(u),u.append&&l("div",{class:"v-toolbar__append"},[null==(s=u.append)?void 0:s.call(u)])])]}}),i(qy,{defaults:{VTabs:{height:de(b.value)}}},{default:()=>[i(xw,null,{default:()=>[g.value&&l("div",{class:"v-toolbar__extension",style:{height:de(b.value)}},[o])]})]})]})}),{contentHeight:y,extensionHeight:b}}}),HE=ne({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");const KE=ne({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...zE(),...Dt(),...HE(),height:{type:[Number,String],default:64}},"VAppBar"),GE=te()({name:"VAppBar",props:KE(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const s=f(),a=Ce(e,"modelValue"),l=o(()=>{var t;const n=new Set((null==(t=e.scrollBehavior)?void 0:t.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),u=o(()=>{const e=l.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!a.value}),{currentScroll:c,scrollThreshold:d,isScrollingUp:p,scrollRatio:m}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:r}=t;let i=0,s=0;const a=f(null),l=n(0),u=n(0),c=n(0),d=n(!1),h=n(!1),p=o(()=>Number(e.scrollThreshold)),m=o(()=>xe((p.value-l.value)/p.value||0)),g=()=>{const e=a.value;if(!e||r&&!r.value)return;i=l.value,l.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;s===t?(h.value=l.value<i,c.value=Math.abs(l.value-p.value)):s=t};return v(h,()=>{u.value=u.value||l.value}),v(d,()=>{u.value=0}),C(()=>{v(()=>e.scrollTarget,e=>{var t;const n=e?document.querySelector(e):window;n&&n!==a.value&&(null==(t=a.value)||t.removeEventListener("scroll",g),a.value=n,a.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),y(()=>{var e;null==(e=a.value)||e.removeEventListener("scroll",g)}),r&&v(r,g,{immediate:!0}),{scrollThreshold:p,currentScroll:l,currentThreshold:c,isScrollActive:d,scrollRatio:m,isScrollingUp:h,savedScroll:u}}(e,{canScroll:u}),g=b(()=>l.value.hide||l.value.fullyHide),w=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?m.value>0:0===m.value)),_=o(()=>e.flat||l.value.fullyHide&&!a.value||l.value.elevate&&(l.value.inverted?c.value>0:0===c.value)),I=o(()=>l.value.fadeImage?l.value.inverted?1-m.value:m.value:void 0),S=o(()=>{var e,t;if(l.value.hide&&l.value.inverted)return 0;const n=(null==(e=s.value)?void 0:e.contentHeight)??0,r=(null==(t=s.value)?void 0:t.extensionHeight)??0;return g.value?c.value<d.value||l.value.fullyHide?n+r:n:n+r});Qe(()=>!!e.scrollBehavior,()=>{D(()=>{g.value?l.value.inverted?a.value=c.value>d.value:a.value=p.value||c.value<d.value:a.value=!0})});const{ssrBootStyles:E}=Gw(),{layoutItemStyles:k}=Nt({id:e.name,order:o(()=>parseInt(e.order,10)),position:b(()=>e.location),layoutSize:S,elementSize:n(void 0),active:a,absolute:b(()=>e.absolute)});return fe(()=>{const t=qE.filterProps(e);return i(qE,h({ref:s,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...k.value,"--v-toolbar-image-opacity":I.value,height:void 0,...E.value},e.style]},t,{collapse:w.value,flat:_.value}),r)}),{}}}),WE=ne({scrollable:Boolean,...ge(),...eb(),...Xy({tag:"main"})},"VMain"),QE=te()({name:"VMain",props:WE(),setup(e,t){let{slots:n}=t;const{dimensionStyles:r}=tb(e),{mainStyles:o}=Vt(),{ssrBootStyles:u}=Gw();return fe(()=>i(e.tag,{class:a(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:s([o.value,u.value,r.value,e.style])},{default:()=>{var t,r;return[e.scrollable?l("div",{class:"v-main__scroller"},[null==(t=n.default)?void 0:t.call(n)]):null==(r=n.default)?void 0:r.call(n)]}})),{}}}),YE=Symbol.for("vuetify:v-tabs"),XE=ne({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ge(fw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),JE=te()({name:"VTab",props:XE(),setup(e,t){let{slots:n,attrs:r}=t;const{textColorClasses:u,textColorStyles:c}=Ky(()=>e.sliderColor),d=f(),p=f(),v=o(()=>"horizontal"===e.direction),m=o(()=>{var e,t;return(null==(t=null==(e=d.value)?void 0:e.group)?void 0:t.isSelected.value)??!1});function g(e){var t,n;let{value:r}=e;if(r){const e=null==(n=null==(t=d.value)?void 0:t.$el.parentElement)?void 0:n.querySelector(".v-tab--selected .v-tab__slider"),r=p.value;if(!e||!r)return;const i=getComputedStyle(e).color,s=e.getBoundingClientRect(),a=r.getBoundingClientRect(),o=v.value?"x":"y",l=v.value?"X":"Y",u=v.value?"right":"bottom",c=v.value?"width":"height",h=s[o]>a[o]?s[u]-a[u]:s[o]-a[o],f=Math.sign(h)>0?v.value?"right":"bottom":Math.sign(h)<0?v.value?"left":"top":"center",m=(Math.abs(h)+(Math.sign(h)<0?s[c]:a[c]))/Math.max(s[c],a[c])||0,g=s[c]/a[c]||0,y=1.5;Me(r,{backgroundColor:[i,"currentcolor"],transform:[`translate${l}(${h}px) scale${l}(${g})`,`translate${l}(${h/y}px) scale${l}(${(m-1)/y+1})`,"none"],transformOrigin:Array(3).fill(f)},{duration:225,easing:Le})}}return fe(()=>{const t=vw.filterProps(e);return i(vw,h({symbol:YE,ref:d,class:["v-tab",e.class],style:e.style,tabindex:m.value?0:-1,role:"tab","aria-selected":String(m.value),active:!1},t,r,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":g}),{...n,default:()=>{var t;return l(_,null,[(null==(t=n.default)?void 0:t.call(n))??e.text,!e.hideSlider&&l("div",{ref:p,class:a(["v-tab__slider",u.value]),style:s(c.value)},null)])}})}),Q_({},d)}});function ZE(e,t){var n;const r=e.changedTouches[0];t.touchendX=r.clientX,t.touchendY=r.clientY,null==(n=t.end)||n.call(t,{originalEvent:e,...t}),(e=>{const{touchstartX:t,touchendX:n,touchstartY:r,touchendY:i}=e;e.offsetX=n-t,e.offsetY=i-r,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&i<r-16&&e.up(e),e.down&&i>r+16&&e.down(e))})(t)}const ek={mounted:function(e,t){var n;const r=t.value,i=(null==r?void 0:r.parent)?e.parentElement:e,s=(null==r?void 0:r.options)??{passive:!0},a=null==(n=t.instance)?void 0:n.$.uid;if(!i||!a)return;const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>function(e,t){var n;const r=e.changedTouches[0];t.touchstartX=r.clientX,t.touchstartY=r.clientY,null==(n=t.start)||n.call(t,{originalEvent:e,...t})}(e,t),touchend:e=>ZE(e,t),touchmove:e=>function(e,t){var n;const r=e.changedTouches[0];t.touchmoveX=r.clientX,t.touchmoveY=r.clientY,null==(n=t.move)||n.call(t,{originalEvent:e,...t})}(e,t)}}(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[a]=o,Rt(o).forEach(e=>{i.addEventListener(e,o[e],s)})},unmounted:function(e,t){var n,r;const i=(null==(n=t.value)?void 0:n.parent)?e.parentElement:e,s=null==(r=t.instance)?void 0:r.$.uid;if(!(null==i?void 0:i._touchHandlers)||!s)return;const a=i._touchHandlers[s];Rt(a).forEach(e=>{i.removeEventListener(e,a[e])}),delete i._touchHandlers[s]}},tk=Symbol.for("vuetify:v-window"),nk=Symbol.for("vuetify:v-window-group"),rk=ne({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||"hover"===e},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ge(),...Xy(),...me()},"VWindow"),ik=te()({name:"VWindow",directives:{vTouch:ek},props:rk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{themeClasses:u}=Se(e),{isRtl:c}=Ne(),{t:d}=bt(),h=Nb(e,nk),p=f(),m=o(()=>c.value?!e.reverse:e.reverse),g=n(!1),y=o(()=>`v-window-${"vertical"===e.direction?"y":"x"}${(m.value?!g.value:g.value)?"-reverse":""}-transition`),_=n(0),I=f(void 0),S=o(()=>h.items.value.findIndex(e=>h.selected.value.includes(e.id)));v(S,(e,t)=>{const n=h.items.value.length,r=n-1;g.value=n<=2?e<t:e===r&&0===t||(0!==e||t!==r)&&e<t}),T(tk,{transition:y,isReversed:g,transitionCount:_,transitionHeight:I,rootRef:p});const C=b(()=>e.continuous||0!==S.value),E=b(()=>e.continuous||S.value!==h.items.value.length-1);function k(){C.value&&h.prev()}function A(){E.value&&h.next()}const x=o(()=>{const t=[],n={icon:c.value?e.nextIcon:e.prevIcon,class:"v-window__"+(m.value?"right":"left"),onClick:h.prev,"aria-label":d("$vuetify.carousel.prev")};t.push(C.value?r.prev?r.prev({props:n}):i(vw,n,null):l("div",null,null));const s={icon:c.value?e.prevIcon:e.nextIcon,class:"v-window__"+(m.value?"left":"right"),onClick:h.next,"aria-label":d("$vuetify.carousel.next")};return t.push(E.value?r.next?r.next({props:s}):i(vw,s,null):l("div",null,null)),t}),N=o(()=>{if(!1===e.touch)return e.touch;return{...{left:()=>{m.value?k():A()},right:()=>{m.value?A():k()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}},...!0===e.touch?{}:e.touch}});return fe(()=>w(i(e.tag,{ref:p,class:a(["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows,"v-window--vertical-arrows":!!e.verticalArrows},u.value,e.class]),style:s(e.style)},{default:()=>{var t,n;return[l("div",{class:"v-window__container",style:{height:I.value}},[null==(t=r.default)?void 0:t.call(r,{group:h}),!1!==e.showArrows&&l("div",{class:a(["v-window__controls",{"v-window__controls--left":"left"===e.verticalArrows||!0===e.verticalArrows},{"v-window__controls--right":"right"===e.verticalArrows}])},[x.value])]),null==(n=r.additional)?void 0:n.call(r,{group:h})]}}),[[ek,N.value]])),{group:h}}}),sk=ne({...Ge(rk(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),ak=te()({name:"VTabsWindow",props:sk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=A(YE,null),s=Ce(e,"modelValue"),a=o({get(){var e;return null==s.value&&r?null==(e=r.items.value.find(e=>r.selected.value.includes(e.id)))?void 0:e.value:s.value},set(e){s.value=e}});return fe(()=>{const t=ik.filterProps(e);return i(ik,h({_as:"VTabsWindow"},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),ok=ne({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ge(),...Ab(),...M_()},"VWindowItem"),lk=te()({name:"VWindowItem",directives:{vTouch:ek},props:ok(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:r}=t;const u=A(tk),c=xb(e,nk),{isBooted:d}=Gw();if(!u||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=n(!1),p=o(()=>d.value&&(u.isReversed.value?!1!==e.reverseTransition:!1!==e.transition));function f(){h.value&&u&&(h.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,0===u.transitionCount.value&&(u.transitionHeight.value=void 0)))}function v(){var e;!h.value&&u&&(h.value=!0,0===u.transitionCount.value&&(u.transitionHeight.value=de(null==(e=u.rootRef.value)?void 0:e.clientHeight)),u.transitionCount.value+=1)}function m(){f()}function y(e){h.value&&g(()=>{p.value&&h.value&&u&&(u.transitionHeight.value=de(e.clientHeight))})}const b=o(()=>{const t=u.isReversed.value?e.reverseTransition:e.transition;return!!p.value&&{name:"string"!=typeof t?u.transition.value:t,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:m,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:m,onEnter:y}}),{hasContent:_}=O_(e,c.isSelected);return fe(()=>i(ob,{transition:b.value,disabled:!d.value},{default:()=>{var t;return[w(l("div",{class:a(["v-window-item",c.selectedClass.value,e.class]),style:s(e.style)},[_.value&&(null==(t=r.default)?void 0:t.call(r))]),[[I,c.isSelected.value]])]}})),{groupItem:c}}}),uk=ne({...ok()},"VTabsWindowItem"),ck=te()({name:"VTabsWindowItem",props:uk(),setup(e,t){let{slots:n}=t;return fe(()=>{const t=lk.filterProps(e);return i(lk,h({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});const dk=ne({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...DI({mandatory:"force",selectedClass:"v-tab-item--selected"}),...vb(),...Xy()},"VTabs"),hk=te()({name:"VTabs",props:dk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const s=Ce(e,"modelValue"),a=o(()=>function(e){return e?e.map(e=>be(e)?e:{text:e,value:e}):[]}(e.items)),{densityClasses:u}=mb(e),{backgroundColorClasses:c,backgroundColorStyles:d}=Gy(()=>e.bgColor),{scopeId:p}=L_();return re({VTab:{color:b(()=>e.color),direction:b(()=>e.direction),stacked:b(()=>e.stacked),fixed:b(()=>e.fixedTabs),sliderColor:b(()=>e.sliderColor),hideSlider:b(()=>e.hideSlider)}}),fe(()=>{const t=VI.filterProps(e),o=!!(r.window||e.items.length>0);return l(_,null,[i(VI,h(t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,c.value,e.class],style:[{"--v-tabs-height":de(e.height)},d.value,e.style],role:"tablist",symbol:YE},p,n),{default:()=>{var e;return[(null==(e=r.default)?void 0:e.call(r))??a.value.map(e=>{var t;return(null==(t=r.tab)?void 0:t.call(r,{item:e}))??i(JE,h(e,{key:e.text,value:e.value}),{default:r[`tab.${e.value}`]?()=>{var t;return null==(t=r[`tab.${e.value}`])?void 0:t.call(r,{item:e})}:void 0})})]}}),o&&i(ak,h({modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,key:"tabs-window"},p),{default:()=>{var e;return[a.value.map(e=>{var t;return(null==(t=r.item)?void 0:t.call(r,{item:e}))??i(ck,{value:e.value},{default:()=>{var t;return null==(t=r[`item.${e.value}`])?void 0:t.call(r,{item:e})}})}),null==(e=r.window)?void 0:e.call(r)]}})])}),{}}}),pk={class:"d-flex align-center w-100"},fk={class:"d-flex align-center mr-8"},vk={class:"w-100 minimal-tabs-container"},mk={key:0},gk={key:1,class:"text-center pa-16 minimal-loading"},yk={key:1,class:"text-center pa-16 minimal-welcome"},bk=jy({__name:"App",setup(e){const t=f(null),n=f(!1),r=f(!1),s=f([]),a=f([]),u=f([]),c=f([]),d=f([]),h=f(new Map),p=f(new Map),v=f(new Map),m=f(new Map),g=f("view-all"),y=f(null),b=f([{id:"view-all",name:"所持状況一覧",icon:"mdi-account-multiple"},{id:"add-owned",name:"所持キャラ追加",icon:"mdi-account-plus"},{id:"manage-items",name:"アイテム管理",icon:"mdi-sword-cross"},{id:"manage-teams",name:"編成管理",icon:"mdi-account-group"},{id:"add-master",name:"マスター追加",icon:"mdi-database-plus"},{id:"edit-master",name:"マスター編集",icon:"mdi-database-edit"}]),w=o(()=>"add-owned"===g.value||"manage-items"===g.value);Qr(e=>{t.value=e,n.value=!0,e?async function(){if(r.value)return;if(!t.value)return;try{const e=await My(t.value.uid);s.value=e.accounts,a.value=e.characterMasters,u.value=e.itemMasters,c.value=e.gachaMasters,d.value=e.teams,h.value=e.itemMastersMap,p.value=e.ownedCountMap,v.value=e.ownedCharactersData,m.value=e.characterMastersMap,s.value.length>0&&(y.value=s.value[0].id),r.value=!0}catch(e){alert(`データ読み込みエラー: ${e.message}`)}}():C()});const I=()=>{Gr().catch(()=>alert("ログインに失敗しました。"))},S=()=>{Wr()},C=()=>{r.value=!1,s.value=[],a.value=[],u.value=[],c.value=[],d.value=[],h.value=new Map,p.value=new Map,v.value=new Map,m.value=new Map,y.value=null};const E=({accountId:e,newCharacter:t})=>{v.value.has(e)||v.value.set(e,[]),v.value.get(e).push(t);const n=`${t.characterMasterId}-${e}`,r=p.value.get(n)||0;p.value.set(n,r+1)},k=({accountId:e,ownedCharacterId:t,items:n})=>{const r=(v.value.get(e)||[]).find(e=>e.id===t);r&&(r.items=n)},T=({accountId:e,from:t,to:n})=>{const r=v.value.get(e)||[],i=r.find(e=>e.id===t.id),s=r.find(e=>e.id===n.id);i&&(i.items=t.items),s&&(s.items=n.items)},A=e=>{d.value.unshift(e)},x=e=>{const t=d.value.findIndex(t=>t.id===e.id);t>-1&&(d.value[t]={...d.value[t],...e})},N=e=>{d.value=d.value.filter(t=>t.id!==e)},D=()=>{location.reload()};return(e,n)=>($(),q(BE,null,{default:j(()=>[i(GE,{app:"",color:"white",elevation:"0",class:"minimal-header",height:"64"},Z({default:j(()=>[l("div",pk,[l("div",fk,[i(Zy,{icon:"mdi-dragon",size:"28",class:"mr-3",color:"primary"}),i($E,{class:"text-h5 font-weight-medium text-primary"},{default:j(()=>n[3]||(n[3]=[z(" キャラクター管理 ",-1)])),_:1,__:[3]})]),i(XS),i(tI,{user:t.value,onLogin:I,onLogout:S,class:"mr-4"},null,8,["user"])])]),_:2},[t.value?{name:"extension",fn:j(()=>[l("div",vk,[i(hk,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=e=>g.value=e),"align-with-title":"",color:"primary",class:"minimal-tabs",height:"48"},{default:j(()=>[($(!0),U(_,null,Q(b.value,e=>($(),q(JE,{key:e.id,value:e.id,class:"minimal-tab"},{default:j(()=>[i(Zy,{icon:e.icon,class:"mr-2",size:"20"},null,8,["icon"]),z(" "+R(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),key:"0"}:void 0]),1024),i(QE,null,{default:j(()=>[i(ES,{class:"pa-6 main-container"},{default:j(()=>[t.value?($(),U("div",mk,[i(rS,{accounts:s.value,modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=e=>y.value=e),visible:w.value,class:"mb-6 minimal-account-selector"},null,8,["accounts","modelValue","visible"]),r.value?($(),q(ik,{key:0,modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=e=>g.value=e),class:"minimal-window"},{default:j(()=>[i(lk,{value:"view-all",key:"view-all"},{default:j(()=>[i(DC,{"data-loaded":r.value,accounts:s.value,"character-masters":a.value,"item-masters":u.value,"gacha-masters":c.value,"owned-count-map":p.value,"owned-characters-data":v.value,"item-masters-map":h.value},null,8,["data-loaded","accounts","character-masters","item-masters","gacha-masters","owned-count-map","owned-characters-data","item-masters-map"])]),_:1}),i(lk,{value:"add-owned",key:"add-owned"},{default:j(()=>[i(zC,{"character-masters":a.value,"character-masters-map":m.value,"selected-account-id":y.value,"owned-count-map":p.value,onCharacterAdded:E},null,8,["character-masters","character-masters-map","selected-account-id","owned-count-map"])]),_:1}),i(lk,{value:"manage-items",key:"manage-items"},{default:j(()=>[i(cE,{"selected-account-id":y.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters":u.value,"item-masters-map":h.value,onItemsUpdated:k,onItemsMoved:T},null,8,["selected-account-id","owned-characters-data","character-masters-map","item-masters","item-masters-map"])]),_:1}),i(lk,{value:"manage-teams",key:"manage-teams"},{default:j(()=>[i(DE,{"user-id":t.value.uid,"data-loaded":r.value,teams:d.value,accounts:s.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters-map":h.value,onTeamAdded:A,onTeamUpdated:x,onTeamDeleted:N},null,8,["user-id","data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map"])]),_:1}),i(lk,{value:"add-master",key:"add-master"},{default:j(()=>[i(ME,{"gacha-masters":c.value,onMasterAdded:D},null,8,["gacha-masters"])]),_:1}),i(lk,{value:"edit-master",key:"edit-master"},{default:j(()=>[i(PE,{"character-masters":a.value,"gacha-masters":c.value,onMasterUpdated:D},null,8,["character-masters","gacha-masters"])]),_:1})]),_:1},8,["modelValue"])):($(),U("div",gk,[i(Lb,{indeterminate:"",color:"primary",size:"64",width:"4",class:"mb-6"}),n[4]||(n[4]=l("p",{class:"text-body-1 text-grey-darken-1"}," データを読み込んでいます... ",-1))]))])):($(),U("div",yk,[i(Zy,{icon:"mdi-dragon",size:"80",color:"primary",class:"mb-6"}),n[6]||(n[6]=l("h1",{class:"text-h4 font-weight-medium text-primary mb-4"}," キャラクター管理システム ",-1)),n[7]||(n[7]=l("p",{class:"text-body-1 text-grey-darken-1 mb-8"}," ログインして、あなたのキャラクターを管理しましょう ",-1)),i(vw,{color:"primary",size:"large",variant:"outlined",class:"px-8",onClick:I},{default:j(()=>[i(Zy,{icon:"mdi-login",class:"mr-2"}),n[5]||(n[5]=z(" ログイン ",-1))]),_:1,__:[5]})]))]),_:1})]),_:1})]),_:1}))}},[["__scopeId","data-v-daacf9d1"]]),wk=Mt({theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976d2",secondary:"#424242",accent:"#42a5f5",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3",surface:"#ffffff",background:"#fafafa","on-surface":"#212121","on-background":"#212121"}}}},defaults:{VCard:{variant:"outlined",elevation:0,rounded:"md"},VBtn:{variant:"outlined",rounded:"md",class:"text-none font-weight-medium"},VTextField:{variant:"outlined",density:"compact",rounded:"md"},VSelect:{variant:"outlined",density:"compact",rounded:"md"},VList:{density:"compact"},VListItem:{rounded:"sm"},VChip:{rounded:"md",variant:"outlined"},VAvatar:{rounded:"md"},VIcon:{size:"20"}}});const _k=new class{constructor(){this.markers=new Map,this.measures=new Map}startMarker(e){this.markers.set(e,performance.now()),performance.mark(`${e}-start`)}endMarker(e){const t=this.markers.get(e);if(t){const n=performance.now()-t;return performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`),this.measures.set(e,n),n}return 0}getMeasure(e){return this.measures.get(e)}getAllMeasures(){return Object.fromEntries(this.measures)}clear(){this.markers.clear(),this.measures.clear()}};_k.startMarker("app-init");const Ik=ee(bk);Ik.use(wk),((e={})=>{const{loadTime:t=3e3,memoryUsage:n=50}=e;window.addEventListener("load",()=>{performance.now();e.loadTime}),"memory"in performance&&setInterval(()=>{const t=performance.memory;t.usedJSHeapSize,t.jsHeapSizeLimit;e.memoryUsage},1e4)})({loadTime:2e3,memoryUsage:60}),Ik.mount("#app"),_k.endMarker("app-init");export{Kf as P,Ev as R,Xv as W,$f as _,zf as a,Tv as b,qv as c,zv as d,Vy as g,_r as i,jf as m,Kv as p,Nv as x,Hv as y};
