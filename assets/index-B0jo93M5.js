const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-init-Dnr5XpSN.js","assets/vue-DclqBZsD.js","assets/vuetify-18a99E9i.js"])))=>i.map(i=>d[i]);
import{B as e,l as t,s as n,T as a,j as r,J as i,n as s,e as o,k as l,K as u,L as c,M as d,m as h,h as p,b as f,o as v,N as m,I as g,z as y,t as b,O as w,F as _,P as I,r as S,D as C,Q as k,E,p as x,d as T,u as A,v as N,w as V,R as D,S as M,c as R,y as P,A as O,x as L,U as F,G as B,V as U,W as $,X as j,Y as z,Z as q,_ as H,$ as K,a as G,a0 as W,a1 as Q,a2 as Y,a3 as X,a4 as J,a5 as Z,a6 as ee,a7 as te}from"./vue-DclqBZsD.js";import{g as ne,p as ae,a as re,d as ie,i as se,b as oe,c as le,e as ue,f as ce,h as de,j as he,u as pe,k as fe,l as ve,m as me,n as ge,o as ye,I as be,q as we,r as _e,S as Ie,s as Se,t as Ce,v as ke,w as Ee,x as xe,y as Te,z as Ae,A as Ne,B as Ve,C as De,D as Me,E as Re,F as Pe,G as Oe,H as Le,J as Fe,K as Be,L as Ue,M as $e,N as je,O as ze,P as qe,Q as He,R as Ke,T as Ge,U as We,V as Qe,W as Ye,X as Xe,Y as Je,Z as Ze,_ as et,$ as tt,a0 as nt,a1 as at,a2 as rt,a3 as it,a4 as st,a5 as ot,a6 as lt,a7 as ut,a8 as ct,a9 as dt,aa as ht,ab as pt,ac as ft,ad as vt,ae as mt,af as gt,ag as yt,ah as bt,ai as wt,aj as _t,ak as It,al as St,am as Ct,an as kt,ao as Et,ap as xt,aq as Tt,ar as At,as as Nt,at as Vt,au as Dt,av as Mt,aw as Rt,ax as Pt,ay as Ot,az as Lt,aA as Ft,aB as Bt,aC as Ut,aD as $t,aE as jt,aF as zt}from"./vuetify-18a99E9i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var qt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&a+1<e.length&&56320==(64512&e.charCodeAt(a+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++a)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Kt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,s=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),a.push(n[u],n[c],n[d],n[h])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ht(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[a++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[a++]=String.fromCharCode(55296+(i>>10)),t[a++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[a++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const s=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==s||null==o)throw new Gt;const l=t<<2|i>>4;if(a.push(l),64!==s){const e=i<<4&240|s>>2;if(a.push(e),64!==o){const e=s<<6&192|o;a.push(e)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wt=function(e){return function(e){const t=Ht(e);return Kt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Qt=function(e){try{return Kt.decodeString(e,!0)}catch(t){}return null};function Yt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Xt(n)&&(e[n]=Yt(e[n],t[n]));return e}function Xt(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Zt=()=>{try{return Jt()||(()=>{if("undefined"==typeof process)return;const e=qt.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Qt(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},en=e=>{var t,n;return null===(n=null===(t=Zt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},tn=()=>{var e;return null===(e=Zt())||void 0===e?void 0:e.config},nn=e=>{var t;return null===(t=Zt())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class an{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class sn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(ln,(e,n)=>{const a=t[n];return null!=a?String(a):`<${n}?>`})}(r,n):"Error",s=`${this.serviceName}: ${i} (${a}).`;return new sn(a,s,n)}}const ln=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cn(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const n=e[r],i=t[r];if(dn(n)&&dn(i)){if(!cn(n,i))return!1}else if(n!==i)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function dn(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function pn(e,t){const n=new fn(e,t);return n.subscribe.bind(n)}class fn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");a=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===a.next&&(a.next=vn),void 0===a.error&&(a.error=vn),void 0===a.complete&&(a.complete=vn);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch(e){}}),this.observers.push(a),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){return e&&e._delegate?e._delegate:e}class gn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new an;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),a=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(a)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(a)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:yn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:a});n.resolve(e)}catch(t){}}}}clearInstance(e=yn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=yn){return this.instances.has(e)}getOptions(e=yn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(a)}return a}onInit(e,t){var n;const a=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(a))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(a,r);const i=this.instances.get(a);return i&&e(i,a),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(a=e,a===yn?void 0:a),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}var a;return n||null}normalizeInstanceIdentifier(e=yn){return this.component?this.component.multipleInstances?e:yn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=[];var In,Sn;(Sn=In||(In={}))[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";const Cn={debug:In.DEBUG,verbose:In.VERBOSE,info:In.INFO,warn:In.WARN,error:In.ERROR,silent:In.SILENT},kn=In.INFO,En={[In.DEBUG]:"log",[In.VERBOSE]:"log",[In.INFO]:"info",[In.WARN]:"warn",[In.ERROR]:"error"},xn=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!En[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tn{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=xn,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in In))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Cn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,In.DEBUG,...e),this._logHandler(this,In.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,In.VERBOSE,...e),this._logHandler(this,In.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,In.INFO,...e),this._logHandler(this,In.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,In.WARN,...e),this._logHandler(this,In.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,In.ERROR,...e),this._logHandler(this,In.ERROR,...e)}}let An,Nn;const Vn=new WeakMap,Dn=new WeakMap,Mn=new WeakMap,Rn=new WeakMap,Pn=new WeakMap;let On={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ln(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Un(this),t),Bn(Vn.get(this))}:function(...t){return Bn(e.apply(Un(this),t))}:function(t,...n){const a=e.call(Un(this),t,...n);return Mn.set(a,t.sort?t.sort():[t]),Bn(a)}}function Fn(e){return"function"==typeof e?Ln(e):(e instanceof IDBTransaction&&function(e){if(Dn.has(e))return;const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});Dn.set(e,t)}(e),t=e,(An||(An=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,On):e);var t}function Bn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(Bn(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Vn.set(t,e)}).catch(()=>{}),Pn.set(t,e),t}(e);if(Rn.has(e))return Rn.get(e);const t=Fn(e);return t!==e&&(Rn.set(e,t),Pn.set(t,e)),t}const Un=e=>Pn.get(e);const $n=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],zn=new Map;function qn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(zn.get(t))return zn.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=jn.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!r&&!$n.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let s=i.store;return a&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&i.done]))[0]};return zn.set(t,i),i}On=(e=>({...e,get:(t,n,a)=>qn(t,n)||e.get(t,n,a),has:(t,n)=>!!qn(t,n)||e.has(t,n)}))(On);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Kn="@firebase/app",Gn="0.9.13",Wn=new Tn("@firebase/app"),Qn="@firebase/app-compat",Yn="@firebase/analytics-compat",Xn="@firebase/analytics",Jn="@firebase/app-check-compat",Zn="@firebase/app-check",ea="@firebase/auth",ta="@firebase/auth-compat",na="@firebase/database",aa="@firebase/database-compat",ra="@firebase/functions",ia="@firebase/functions-compat",sa="@firebase/installations",oa="@firebase/installations-compat",la="@firebase/messaging",ua="@firebase/messaging-compat",ca="@firebase/performance",da="@firebase/performance-compat",ha="@firebase/remote-config",pa="@firebase/remote-config-compat",fa="@firebase/storage",va="@firebase/storage-compat",ma="@firebase/firestore",ga="@firebase/firestore-compat",ya="firebase",ba="[DEFAULT]",wa={[Kn]:"fire-core",[Qn]:"fire-core-compat",[Xn]:"fire-analytics",[Yn]:"fire-analytics-compat",[Zn]:"fire-app-check",[Jn]:"fire-app-check-compat",[ea]:"fire-auth",[ta]:"fire-auth-compat",[na]:"fire-rtdb",[aa]:"fire-rtdb-compat",[ra]:"fire-fn",[ia]:"fire-fn-compat",[sa]:"fire-iid",[oa]:"fire-iid-compat",[la]:"fire-fcm",[ua]:"fire-fcm-compat",[ca]:"fire-perf",[da]:"fire-perf-compat",[ha]:"fire-rc",[pa]:"fire-rc-compat",[fa]:"fire-gcs",[va]:"fire-gcs-compat",[ma]:"fire-fst",[ga]:"fire-fst-compat","fire-js":"fire-js",[ya]:"fire-js-all"},_a=new Map,Ia=new Map;function Sa(e,t){try{e.container.addComponent(t)}catch(n){Wn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ca(e,t){e.container.addOrOverwriteComponent(t)}function ka(e){const t=e.name;if(Ia.has(t))return Wn.debug(`There were multiple attempts to register component ${t}.`),!1;Ia.set(t,e);for(const n of _a.values())Sa(n,e);return!0}function Ea(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xa=new on("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ta=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xa.create("app-deleted",{appName:this._name})}};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="9.23.0";function Na(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const a=Object.assign({name:ba,automaticDataCollectionEnabled:!1},t),r=a.name;if("string"!=typeof r||!r)throw xa.create("bad-app-name",{appName:String(r)});if(n||(n=tn()),!n)throw xa.create("no-options");const i=_a.get(r);if(i){if(cn(n,i.options)&&cn(a,i.config))return i;throw xa.create("duplicate-app",{appName:r})}const s=new wn(r);for(const l of Ia.values())s.addComponent(l);const o=new Ta(n,a,s);return _a.set(r,o),o}function Va(e=ba){const t=_a.get(e);if(!t&&e===ba&&tn())return Na();if(!t)throw xa.create("no-app",{appName:e});return t}async function Da(e){const t=e.name;_a.has(t)&&(_a.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Ma(e,t,n){var a;let r=null!==(a=wa[e])&&void 0!==a?a:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Wn.warn(e.join(" "))}ka(new gn(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function Ra(e,t){if(null!==e&&"function"!=typeof e)throw xa.create("invalid-log-argument");!function(e,t){for(const n of _n){let a=null;t&&t.level&&(a=Cn[t.level]),n.userLogHandler=null===e?null:(t,n,...r)=>{const i=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=a?a:t.logLevel)&&e({level:In[n].toLowerCase(),message:i,args:r,type:t.name})}}}(e,t)}function Pa(e){var t;t=e,_n.forEach(e=>{e.setLogLevel(t)})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="firebase-heartbeat-store";let La=null;function Fa(){return La||(La=function(e,t,{blocked:n,upgrade:a,blocking:r,terminated:i}={}){const s=indexedDB.open(e,t),o=Bn(s);return a&&s.addEventListener("upgradeneeded",e=>{a(Bn(s.result),e.oldVersion,e.newVersion,Bn(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Oa)}}).catch(e=>{throw xa.create("idb-open",{originalErrorMessage:e.message})})),La}async function Ba(e,t){try{const n=(await Fa()).transaction(Oa,"readwrite"),a=n.objectStore(Oa);await a.put(t,Ua(e)),await n.done}catch(n){if(n instanceof sn)Wn.warn(n.message);else{const e=xa.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Wn.warn(e.message)}}}function Ua(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new za(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ja();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ja(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let a=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),qa(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qa(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}(this._heartbeatsCache.heartbeats),a=Wt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}}function ja(){return(new Date).toISOString().substring(0,10)}class za{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await Fa();return await t.transaction(Oa).objectStore(Oa).get(Ua(e))}catch(t){if(t instanceof sn)Wn.warn(t.message);else{const e=xa.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Wn.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ba(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ba(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qa(e){return Wt(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha;Ha="",ka(new gn("platform-logger",e=>new Hn(e),"PRIVATE")),ka(new gn("heartbeat",e=>new $a(e),"PRIVATE")),Ma(Kn,Gn,Ha),Ma(Kn,Gn,"esm2017"),Ma("fire-js","");const Ka=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:sn,SDK_VERSION:Aa,_DEFAULT_ENTRY_NAME:ba,_addComponent:Sa,_addOrOverwriteComponent:Ca,_apps:_a,_clearComponents:function(){Ia.clear()},_components:Ia,_getProvider:Ea,_registerComponent:ka,_removeServiceInstance:function(e,t,n=ba){Ea(e,t).clearInstance(n)},deleteApp:Da,getApp:Va,getApps:function(){return Array.from(_a.values())},initializeApp:Na,onLog:Ra,registerVersion:Ma,setLogLevel:Pa},Symbol.toStringTag,{value:"Module"}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this._delegate=e,this.firebase=t,Sa(e,new gn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Da(this._delegate)))}_getService(e,t=ba){var n;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return a.isInitialized()||"EXPLICIT"!==(null===(n=a.getComponent())||void 0===n?void 0:n.instantiationMode)||a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=ba){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sa(this._delegate,e)}_addOrOverwriteComponent(e){Ca(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new on("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Qa=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(a,r={}){const i=Na(a,r);if(un(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:a,registerVersion:Ma,setLogLevel:Pa,onLog:Ra,apps:null,SDK_VERSION:Aa,INTERNAL:{registerComponent:function(t){const r=t.name,i=r.replace("-compat","");if(ka(t)&&"PUBLIC"===t.type){const s=(e=a())=>{if("function"!=typeof e[i])throw Wa.create("invalid-app-argument",{appName:r});return e[i]()};void 0!==t.serviceProps&&Yt(s,t.serviceProps),n[i]=s,e.prototype[i]=function(...e){return this._getService.bind(this,r).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[i]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Ka}};function a(e){if(!un(t,e=e||ba))throw Wa.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),a.App=e,n}(Ga);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Yt(t,e)},createSubscribe:pn,ErrorFactory:on,deepExtend:Yt}),t}(),Ya=new Tn("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ya.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ya.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xa=Qa;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Ma("@firebase/app-compat","0.2.13",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Xa.registerVersion("firebase","9.23.0","app-compat");const Ja={},Za=async()=>{const{getFirebaseInstances:e}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/MS_DB_UI/"+e}(e))in Ja)return;Ja[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(async()=>{const{getFirebaseInstances:e}=await import("./firebase-init-Dnr5XpSN.js");return{getFirebaseInstances:e}},__vite__mapDeps([0,1,2]));return e()},er=async()=>{const{db:e}=await Za();return e},tr=async()=>{const{auth:e}=await Za();return e},nr=async()=>{const e=await tr(),t=new Xa.auth.GoogleAuthProvider;return e.signInWithPopup(t).catch(e=>{throw e})},ar=async()=>(await tr()).signOut(),rr=async e=>(await tr()).onAuthStateChanged(e),ir=e=>{return e?(e=>{if(!Array.isArray(e)||0===e.length)return!1;const t=e[0];return"number"==typeof t||"string"==typeof t})(e)?(t=e,Array.isArray(t)?t.map(e=>{const t=Number(e);return isNaN(t)?null:{itemId:t,isVirtual:!1}}).filter(e=>null!==e):[]):e:[];var t},sr=e=>ir(e).filter(e=>!e.isVirtual);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ma("firebase","9.23.0","app");var or,lr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ur=ur||{},cr=lr||self;function dr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function pr(e,t,n){return e.call.apply(e.bind,arguments)}function fr(e,t,n){if(!e)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,a),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vr(e,t,n){return(vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pr:fr).apply(null,arguments)}function mr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,a){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}function yr(){this.s=this.s,this.o=this.o}yr.prototype.s=!1,yr.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},yr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const br=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function wr(e){const t=e.length;if(0<t){const n=Array(t);for(let a=0;a<t;a++)n[a]=e[a];return n}return[]}function _r(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(dr(t)){const n=e.length||0,a=t.length||0;e.length=n+a;for(let r=0;r<a;r++)e[n+r]=t[r]}else e.push(t)}}function Ir(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var Sr=function(){if(!cr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{cr.addEventListener("test",()=>{},t),cr.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Cr(e){return/^[\s\xa0]*$/.test(e)}function kr(){var e=cr.navigator;return e&&(e=e.userAgent)?e:""}function Er(e){return-1!=kr().indexOf(e)}function xr(e){return xr[" "](e),e}xr[" "]=function(){};var Tr,Ar,Nr,Vr=Er("Opera"),Dr=Er("Trident")||Er("MSIE"),Mr=Er("Edge"),Rr=Mr||Dr,Pr=Er("Gecko")&&!(-1!=kr().toLowerCase().indexOf("webkit")&&!Er("Edge"))&&!(Er("Trident")||Er("MSIE"))&&!Er("Edge"),Or=-1!=kr().toLowerCase().indexOf("webkit")&&!Er("Edge");function Lr(){var e=cr.document;return e?e.documentMode:void 0}e:{var Fr="",Br=(Ar=kr(),Pr?/rv:([^\);]+)(\)|;)/.exec(Ar):Mr?/Edge\/([\d\.]+)/.exec(Ar):Dr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ar):Or?/WebKit\/(\S+)/.exec(Ar):Vr?/(?:Version)[ \/]?(\S+)/.exec(Ar):void 0);if(Br&&(Fr=Br?Br[1]:""),Dr){var Ur=Lr();if(null!=Ur&&Ur>parseFloat(Fr)){Tr=String(Ur);break e}}Tr=Fr}if(cr.document&&Dr){var $r=Lr();Nr=$r||(parseInt(Tr,10)||void 0)}else Nr=void 0;var jr=Nr;function zr(e,t){if(Ir.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,a=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Pr){e:{try{xr(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:qr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zr.$.h.call(this)}}gr(zr,Ir);var qr={2:"touch",3:"pen",4:"mouse"};zr.prototype.h=function(){zr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hr="closure_listenable_"+(1e6*Math.random()|0),Kr=0;function Gr(e,t,n,a,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!a,this.la=r,this.key=++Kr,this.fa=this.ia=!1}function Wr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qr(e,t,n){for(const a in e)t.call(n,e[a],a,e)}function Yr(e){const t={};for(const n in e)t[n]=e[n];return t}const Xr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jr(e,t){let n,a;for(let r=1;r<arguments.length;r++){for(n in a=arguments[r],a)e[n]=a[n];for(let t=0;t<Xr.length;t++)n=Xr[t],Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}}function Zr(e){this.src=e,this.g={},this.h=0}function ei(e,t){var n=t.type;if(n in e.g){var a,r=e.g[n],i=br(r,t);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Wr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ti(e,t,n,a){for(var r=0;r<e.length;++r){var i=e[r];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==a)return r}return-1}Zr.prototype.add=function(e,t,n,a,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=ti(e,t,a,r);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Gr(t,this.src,i,!!a,r)).ia=n,e.push(t)),t};var ni="closure_lm_"+(1e6*Math.random()|0),ai={};function ri(e,t,n,a,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)ri(e,t[i],n,a,r);return null}return n=di(n),e&&e[Hr]?e.O(t,n,!!hr(a)&&!!a.capture,r):function(e,t,n,a,r,i){if(!t)throw Error("Invalid event type");var s=hr(r)?!!r.capture:!!r,o=ui(e);if(o||(e[ni]=o=new Zr(e)),n=o.add(t,n,a,s,i),n.proxy)return n;if(a=function(){function e(n){return t.call(e.src,e.listener,n)}const t=li;return e}(),n.proxy=a,a.src=e,a.listener=n,e.addEventListener)Sr||(r=s),void 0===r&&(r=!1),e.addEventListener(t.toString(),a,r);else if(e.attachEvent)e.attachEvent(oi(t.toString()),a);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(a)}return n}(e,t,n,!1,a,r)}function ii(e,t,n,a,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)ii(e,t[i],n,a,r);else a=hr(a)?!!a.capture:!!a,n=di(n),e&&e[Hr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ti(i=e.g[t],n,a,r))&&(Wr(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ui(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ti(t,n,a,r)),(n=-1<e?t[e]:null)&&si(n))}function si(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Hr])ei(t.i,e);else{var n=e.type,a=e.proxy;t.removeEventListener?t.removeEventListener(n,a,e.capture):t.detachEvent?t.detachEvent(oi(n),a):t.addListener&&t.removeListener&&t.removeListener(a),(n=ui(t))?(ei(n,e),0==n.h&&(n.src=null,t[ni]=null)):Wr(e)}}}function oi(e){return e in ai?ai[e]:ai[e]="on"+e}function li(e,t){if(e.fa)e=!0;else{t=new zr(t,this);var n=e.listener,a=e.la||e.src;e.ia&&si(e),e=n.call(a,t)}return e}function ui(e){return(e=e[ni])instanceof Zr?e:null}var ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function di(e){return"function"==typeof e?e:(e[ci]||(e[ci]=function(t){return e.handleEvent(t)}),e[ci])}function hi(){yr.call(this),this.i=new Zr(this),this.S=this,this.J=null}function pi(e,t){var n,a=e.J;if(a)for(n=[];a;a=a.J)n.push(a);if(e=e.S,a=t.type||t,"string"==typeof t)t=new Ir(t,e);else if(t instanceof Ir)t.target=t.target||e;else{var r=t;Jr(t=new Ir(a,e),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var s=t.g=n[i];r=fi(s,a,!0,t)&&r}if(r=fi(s=t.g=e,a,!0,t)&&r,r=fi(s,a,!1,t)&&r,n)for(i=0;i<n.length;i++)r=fi(s=t.g=n[i],a,!1,t)&&r}function fi(e,t,n,a){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.fa&&s.capture==n){var o=s.listener,l=s.la||s.src;s.ia&&ei(e.i,s),r=!1!==o.call(l,a)&&r}}return r&&!a.defaultPrevented}gr(hi,yr),hi.prototype[Hr]=!0,hi.prototype.removeEventListener=function(e,t,n,a){ii(this,e,t,n,a)},hi.prototype.N=function(){if(hi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],a=0;a<n.length;a++)Wr(n[a]);delete t.g[e],t.h--}}this.J=null},hi.prototype.O=function(e,t,n,a){return this.i.add(String(e),t,!1,n,a)},hi.prototype.P=function(e,t,n,a){return this.i.add(String(e),t,!0,n,a)};var vi=cr.JSON.stringify;function mi(){var e=Si;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new yi,e=>e.reset());class yi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function wi(e){cr.setTimeout(()=>{throw e},0)}let _i,Ii=!1,Si=new class{constructor(){this.h=this.g=null}add(e,t){const n=gi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ci=()=>{const e=cr.Promise.resolve(void 0);_i=()=>{e.then(ki)}};var ki=()=>{for(var e;e=mi();){try{e.h.call(e.g)}catch(n){wi(n)}var t=gi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ii=!1};function Ei(e,t){hi.call(this),this.h=e||1,this.g=t||cr,this.j=vr(this.qb,this),this.l=Date.now()}function xi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ti(e,t,n){if("function"==typeof e)n&&(e=vr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vr(e.handleEvent,e)}return 2147483647<Number(t)?-1:cr.setTimeout(e,t||0)}function Ai(e){e.g=Ti(()=>{e.g=null,e.i&&(e.i=!1,Ai(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}gr(Ei,hi),(or=Ei.prototype).ga=!1,or.T=null,or.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pi(this,"tick"),this.ga&&(xi(this),this.start()))}},or.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},or.N=function(){Ei.$.N.call(this),xi(this),delete this.g};class Ni extends yr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(cr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(e){yr.call(this),this.h=e,this.g={}}gr(Vi,yr);var Di=[];function Mi(e,t,n,a){Array.isArray(n)||(n&&(Di[0]=n.toString()),n=Di);for(var r=0;r<n.length;r++){var i=ri(t,n[r],a||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Ri(e){Qr(e.g,function(e,t){this.g.hasOwnProperty(t)&&si(e)},e),e.g={}}function Pi(){this.g=!0}function Oi(e,t,n,a){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var a=n[e];if(!(2>a.length)){var r=a[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<r.length;s++)r[s]=""}}}return vi(n)}catch(o){return t}}(e,n)+(a?" "+a:"")})}Vi.prototype.N=function(){Vi.$.N.call(this),Ri(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pi.prototype.Ea=function(){this.g=!1},Pi.prototype.info=function(){};var Li={},Fi=null;function Bi(){return Fi=Fi||new hi}function Ui(e){Ir.call(this,Li.Ta,e)}function $i(e){const t=Bi();pi(t,new Ui(t))}function ji(e,t){Ir.call(this,Li.STAT_EVENT,e),this.stat=t}function zi(e){const t=Bi();pi(t,new ji(t,e))}function qi(e,t){Ir.call(this,Li.Ua,e),this.size=t}function Hi(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return cr.setTimeout(function(){e()},t)}Li.Ta="serverreachability",gr(Ui,Ir),Li.STAT_EVENT="statevent",gr(ji,Ir),Li.Ua="timingevent",gr(qi,Ir);var Ki={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Gi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wi(){}function Qi(e){return e.h||(e.h=e.i())}function Yi(){}Wi.prototype.h=null;var Xi,Ji={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zi(){Ir.call(this,"d")}function es(){Ir.call(this,"c")}function ts(){}function ns(e,t,n,a){this.l=e,this.j=t,this.m=n,this.W=a||1,this.U=new Vi(this),this.P=rs,e=Rr?125:void 0,this.V=new Ei(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new as}function as(){this.i=null,this.g="",this.h=!1}gr(Zi,Ir),gr(es,Ir),gr(ts,Wi),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Xi=new ts;var rs=45e3,is={},ss={};function os(e,t,n){e.L=1,e.v=Es(_s(t)),e.s=n,e.S=!0,ls(e,null)}function ls(e,t){e.G=Date.now(),hs(e),e.A=_s(e.v);var n=e.A,a=e.W;Array.isArray(a)||(a=[String(a)]),Bs(n.i,"t",a),e.C=0,n=e.l.J,e.h=new as,e.g=Uo(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ni(vr(e.Pa,e,e.g),e.O)),Mi(e.U,e.g,"readystatechange",e.nb),t=e.I?Yr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),$i(),function(e,t,n,a,r,i){e.info(function(){if(e.g)if(i)for(var s="",o=i.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");s=2<=d.length&&"type"==d[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+a+") [attempt "+r+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function us(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function cs(e,t,n){let a,r=!0;for(;!e.J&&e.C<n.length;){if(a=ds(e,n),a==ss){4==t&&(e.o=4,zi(14),r=!1),Oi(e.j,e.m,null,"[Incomplete Response]");break}if(a==is){e.o=4,zi(15),Oi(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Oi(e.j,e.m,a,null),gs(e,a)}us(e)&&a!=ss&&a!=is&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,zi(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Do(t),t.M=!0,zi(11))):(Oi(e.j,e.m,n,"[Invalid Chunked Response]"),ms(e),vs(e))}function ds(e,t){var n=e.C,a=t.indexOf("\n",n);return-1==a?ss:(n=Number(t.substring(n,a)),isNaN(n)?is:(a+=1)+n>t.length?ss:(t=t.slice(a,a+n),e.C=a+n,t))}function hs(e){e.Y=Date.now()+e.P,ps(e,e.P)}function ps(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hi(vr(e.lb,e),t)}function fs(e){e.B&&(cr.clearTimeout(e.B),e.B=null)}function vs(e){0==e.l.H||e.J||Po(e.l,e)}function ms(e){fs(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,xi(e.V),Ri(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function gs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ks(n.i,e)))if(!e.K&&Ks(n.i,e)&&3==n.H){try{var a=n.Ja.g.parse(t)}catch(u){a=null}if(Array.isArray(a)&&3==a.length){var r=a;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ro(n),Co(n)}Vo(n),zi(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hi(vr(n.ib,n),6e3));if(1>=Hs(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Lo(n,11)}else if((e.K||n.g==e)&&Ro(n),!Cr(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let u=r[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=u[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(a=1.5*c,n.L=a,n.l.info("backChannelRequestTimeoutMs_="+a)),a=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=a.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Gs(i,i.h),i.h=null))}if(a.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(a.Da=e,ks(a.I,a.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((a=n).wa=Bo(a,a.J?a.pa:null,a.Y),s.K){Ws(a.i,s);var o=s,l=a.L;l&&o.setTimeout(l),o.B&&(fs(o),hs(o)),a.g=s}else No(a);0<n.j.length&&Eo(n)}else"stop"!=u[0]&&"close"!=u[0]||Lo(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Lo(n,7):So(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}$i()}catch(u){}}function ys(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(dr(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(dr(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const a in e)t[n++]=a;return t}}}(e),a=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(dr(e)){for(var t=[],n=e.length,a=0;a<n;a++)t.push(e[a]);return t}for(a in t=[],n=0,e)t[n++]=e[a];return t}(e),r=a.length,i=0;i<r;i++)t.call(void 0,a[i],n&&n[i],e)}(or=ns.prototype).setTimeout=function(e){this.P=e},or.nb=function(e){e=e.target;const t=this.M;t&&3==go(e)?t.l():this.Pa(e)},or.Pa=function(e){try{if(e==this.g)e:{const c=go(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Rr||this.g&&(this.h.h||this.g.ja()||yo(this.g)))){this.J||4!=c||7==t||$i(),fs(this);var n=this.g.da();this.ca=n;t:if(us(this)){var a=yo(this.g);e="";var r=a.length,i=4==go(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ms(this),vs(this);var s="";break t}this.h.i=new cr.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(a[t],{stream:i&&t==r-1});a.splice(0,r),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,a,r,i,s){e.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+s})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cr(o)){var u=o;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,zi(12),ms(this),vs(this);break e}Oi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,n)}this.S?(cs(this,c,s),Rr&&this.i&&3==c&&(Mi(this.U,this.V,"tick",this.mb),this.V.start())):(Oi(this.j,this.m,s,null),gs(this,s)),4==c&&ms(this),this.i&&!this.J&&(4==c?Po(this.l,this):(this.i=!1,hs(this)))}else(function(e){const t={};e=(e.g&&2<=go(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<e.length;a++){if(Cr(e[a]))continue;var n=bi(e[a]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),ms(this),vs(this)}}}catch(c){}},or.mb=function(){if(this.g){var e=go(this.g),t=this.g.ja();this.C<t.length&&(fs(this),cs(this,e,t),this.i&&4!=e&&hs(this))}},or.cancel=function(){this.J=!0,ms(this)},or.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&($i(),zi(17)),ms(this),this.o=2,vs(this)):ps(this,this.Y-e)};var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ws(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ws){this.h=e.h,Is(this,e.j),this.s=e.s,this.g=e.g,Ss(this,e.m),this.l=e.l;var t=e.i,n=new Ps;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Cs(this,n),this.o=e.o}else e&&(t=String(e).match(bs))?(this.h=!1,Is(this,t[1]||"",!0),this.s=xs(t[2]||""),this.g=xs(t[3]||"",!0),Ss(this,t[4]),this.l=xs(t[5]||"",!0),Cs(this,t[6]||"",!0),this.o=xs(t[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}function _s(e){return new ws(e)}function Is(e,t,n){e.j=n?xs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ss(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cs(e,t,n){t instanceof Ps?(e.i=t,function(e,t){t&&!e.j&&(Os(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ls(this,t),Bs(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Ts(t,Ms)),e.i=new Ps(t,e.h))}function ks(e,t,n){e.i.set(t,n)}function Es(e){return ks(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ts(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,As),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function As(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ws.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ts(t,Ns,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ts(t,Ns,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ts(n,"/"==n.charAt(0)?Ds:Vs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ts(n,Rs)),e.join("")};var Ns=/[#\/\?@]/g,Vs=/[#\?:]/g,Ds=/[#\?]/g,Ms=/[#\?@]/g,Rs=/#/g;function Ps(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Os(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var a=e[n].indexOf("="),r=null;if(0<=a){var i=e[n].substring(0,a);r=e[n].substring(a+1)}else i=e[n];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ls(e,t){Os(e),t=Us(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Fs(e,t){return Os(e),t=Us(e,t),e.g.has(t)}function Bs(e,t,n){Ls(e,t),0<n.length&&(e.i=null,e.g.set(Us(e,t),wr(n)),e.h+=n.length)}function Us(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(or=Ps.prototype).add=function(e,t){Os(this),this.i=null,e=Us(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},or.forEach=function(e,t){Os(this),this.g.forEach(function(n,a){n.forEach(function(n){e.call(t,n,a,this)},this)},this)},or.ta=function(){Os(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let a=0;a<t.length;a++){const r=e[a];for(let e=0;e<r.length;e++)n.push(t[a])}return n},or.Z=function(e){Os(this);let t=[];if("string"==typeof e)Fs(this,e)&&(t=t.concat(this.g.get(Us(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},or.set=function(e,t){return Os(this),this.i=null,Fs(this,e=Us(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},or.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},or.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var a=t[n];const i=encodeURIComponent(String(a)),s=this.Z(a);for(a=0;a<s.length;a++){var r=i;""!==s[a]&&(r+="="+encodeURIComponent(String(s[a]))),e.push(r)}}return this.i=e.join("&")};var $s=class{constructor(e,t){this.g=e,this.map=t}};function js(e){this.l=e||zs,cr.PerformanceNavigationTiming?e=0<(e=cr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(cr.g&&cr.g.Ka&&cr.g.Ka()&&cr.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zs=10;function qs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hs(e){return e.h?1:e.g?e.g.size:0}function Ks(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Gs(e,t){e.g?e.g.add(t):e.h=t}function Ws(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return wr(e.i)}js.prototype.cancel=function(){if(this.i=Qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ys=class{stringify(e){return cr.JSON.stringify(e,void 0)}parse(e){return cr.JSON.parse(e,void 0)}};function Xs(){this.g=new Ys}function Js(e,t,n){const a=n||"";try{ys(e,function(e,n){let r=e;hr(e)&&(r=vi(e)),t.push(a+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(a+"type="+encodeURIComponent("_badmap")),r}}function Zs(e,t,n,a,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(a)}catch(i){}}function eo(e){this.l=e.fc||null,this.j=e.ob||!1}function to(e,t){hi.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=no,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gr(eo,Wi),eo.prototype.g=function(){return new to(this.l,this.j)},eo.prototype.i=function(e){return function(){return e}}({}),gr(to,hi);var no=0;function ao(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ro(e){e.readyState=4,e.l=null,e.j=null,e.A=null,io(e)}function io(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(or=to.prototype).open=function(e,t){if(this.readyState!=no)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,io(this)},or.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||cr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},or.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ro(this)),this.readyState=no},or.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==cr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ao(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},or.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ro(this):io(this),3==this.readyState&&ao(this)}},or.Za=function(e){this.g&&(this.response=this.responseText=e,ro(this))},or.Ya=function(e){this.g&&(this.response=e,ro(this))},or.ka=function(){this.g&&ro(this)},or.setRequestHeader=function(e,t){this.v.append(e,t)},or.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},or.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(to.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var so=cr.JSON.parse;function oo(e){hi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lo,this.L=this.M=!1}gr(oo,hi);var lo="",uo=/^https?$/i,co=["POST","PUT"];function ho(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,po(e),vo(e)}function po(e){e.F||(e.F=!0,pi(e,"complete"),pi(e,"error"))}function fo(e){if(e.h&&void 0!==ur&&(!e.C[1]||4!=go(e)||2!=e.da()))if(e.v&&4==go(e))Ti(e.La,0,e);else if(pi(e,"readystatechange"),4==go(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===o){var r=String(e.I).match(bs)[1]||null;!r&&cr.self&&cr.self.location&&(r=cr.self.location.protocol.slice(0,-1)),a=!uo.test(r?r.toLowerCase():"")}n=a}if(n)pi(e,"complete"),pi(e,"success");else{e.m=6;try{var i=2<go(e)?e.g.statusText:""}catch(s){i=""}e.j=i+" ["+e.da()+"]",po(e)}}finally{vo(e)}}}function vo(e,t){if(e.g){mo(e);const a=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||pi(e,"ready");try{a.onreadystatechange=r}catch(n){}}}function mo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(cr.clearTimeout(e.A),e.A=null)}function go(e){return e.g?e.g.readyState:0}function yo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case lo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function bo(e){let t="";return Qr(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function wo(e,t,n){e:{for(a in n){var a=!1;break e}a=!0}a||(n=bo(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ks(e,t,n))}function _o(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Io(e){this.Ga=0,this.j=[],this.l=new Pi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_o("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_o("baseRetryDelayMs",5e3,e),this.hb=_o("retryDelaySeedMs",1e4,e),this.eb=_o("forwardChannelMaxRetries",2,e),this.xa=_o("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new js(e&&e.concurrentRequestLimit),this.Ja=new Xs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function So(e){if(ko(e),3==e.H){var t=e.W++,n=_s(e.I);if(ks(n,"SID",e.K),ks(n,"RID",t),ks(n,"TYPE","terminate"),To(e,n),(t=new ns(e,e.l,t)).L=2,t.v=Es(_s(n)),n=!1,cr.navigator&&cr.navigator.sendBeacon)try{n=cr.navigator.sendBeacon(t.v.toString(),"")}catch(a){}!n&&cr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Uo(t.l,null),t.g.ha(t.v)),t.G=Date.now(),hs(t)}Fo(e)}function Co(e){e.g&&(Do(e),e.g.cancel(),e.g=null)}function ko(e){Co(e),e.u&&(cr.clearTimeout(e.u),e.u=null),Ro(e),e.i.cancel(),e.m&&("number"==typeof e.m&&cr.clearTimeout(e.m),e.m=null)}function Eo(e){if(!qs(e.i)&&!e.m){e.m=!0;var t=e.Na;_i||Ci(),Ii||(_i(),Ii=!0),Si.add(t,e),e.C=0}}function xo(e,t){var n;n=t?t.m:e.W++;const a=_s(e.I);ks(a,"SID",e.K),ks(a,"RID",n),ks(a,"AID",e.V),To(e,a),e.o&&e.s&&wo(a,e.o,e.s),n=new ns(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ao(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Gs(e.i,n),os(n,a,t)}function To(e,t){e.na&&Qr(e.na,function(e,n){ks(t,n,e)}),e.h&&ys({},function(e,n){ks(t,n,e)})}function Ao(e,t,n){n=Math.min(e.j.length,n);var a=e.h?vr(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const l=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{Js(l,e,"req"+n+"_")}catch(i){a&&a(l)}}if(s){a=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,a}function No(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_i||Ci(),Ii||(_i(),Ii=!0),Si.add(t,e),e.A=0}}function Vo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Hi(vr(e.Ma,e),Oo(e,e.A)),e.A++,!0)}function Do(e){null!=e.B&&(cr.clearTimeout(e.B),e.B=null)}function Mo(e){e.g=new ns(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_s(e.wa);ks(t,"RID","rpc"),ks(t,"SID",e.K),ks(t,"AID",e.V),ks(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ks(t,"TO",e.qa),ks(t,"TYPE","xmlhttp"),To(e,t),e.o&&e.s&&wo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Es(_s(t)),n.s=null,n.S=!0,ls(n,e)}function Ro(e){null!=e.v&&(cr.clearTimeout(e.v),e.v=null)}function Po(e,t){var n=null;if(e.g==t){Ro(e),Do(e),e.g=null;var a=2}else{if(!Ks(e.i,t))return;n=t.F,Ws(e.i,t),a=1}if(0!=e.H)if(t.i)if(1==a){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;pi(a=Bi(),new qi(a,n)),Eo(e)}else No(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==a&&function(e,t){return!(Hs(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Hi(vr(e.Na,e,t),Oo(e,e.C)),e.C++,0)))}(e,t)||2==a&&Vo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Lo(e,5);break;case 4:Lo(e,10);break;case 3:Lo(e,6);break;default:Lo(e,2)}}function Oo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Lo(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var a=vr(e.pb,e);n||(n=new ws("//www.google.com/images/cleardot.gif"),cr.location&&"http"==cr.location.protocol||Is(n,"https"),Es(n)),function(e,t){const n=new Pi;if(cr.Image){const a=new Image;a.onload=mr(Zs,n,a,"TestLoadImage: loaded",!0,t),a.onerror=mr(Zs,n,a,"TestLoadImage: error",!1,t),a.onabort=mr(Zs,n,a,"TestLoadImage: abort",!1,t),a.ontimeout=mr(Zs,n,a,"TestLoadImage: timeout",!1,t),cr.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=e}else t(!1)}(n.toString(),a)}else zi(2);e.H=0,e.h&&e.h.za(t),Fo(e),ko(e)}function Fo(e){if(e.H=0,e.ma=[],e.h){const t=Qs(e.i);0==t.length&&0==e.j.length||(_r(e.ma,t),_r(e.ma,e.j),e.i.i.length=0,wr(e.j),e.j.length=0),e.h.ya()}}function Bo(e,t,n){var a=n instanceof ws?_s(n):new ws(n);if(""!=a.g)t&&(a.g=t+"."+a.g),Ss(a,a.m);else{var r=cr.location;a=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var i=new ws(null);a&&Is(i,a),t&&(i.g=t),r&&Ss(i,r),n&&(i.l=n),a=i}return n=e.F,t=e.Da,n&&t&&ks(a,n,t),ks(a,"VER",e.ra),To(e,a),a}function Uo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new oo(new eo({ob:!0})):new oo(e.va)).Oa(e.J),t}function $o(){}function jo(){if(Dr&&!(10<=Number(jr)))throw Error("Environmental error: no available transport.")}function zo(e,t){hi.call(this),this.g=new Io(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Cr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ko(this)}function qo(e){Zi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ho(){es.call(this),this.status=1}function Ko(e){this.g=e}function Go(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Wo(e,t,n){n||(n=0);var a=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)a[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)a[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var i=e.g[3],s=t+(i^n&(r^i))+a[0]+3614090360&4294967295;s=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=n+(s<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(r^i&(n^r))+a[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^r^i)+a[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^(n|~i))+a[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(n|~i))+a[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(n|~i))+a[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((i=(t=n+((s=t+(r^(n|~i))+a[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=i+((s=r+(t^(i|~n))+a[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+a[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function Qo(e,t){this.h=t;for(var n=[],a=!0,r=e.length-1;0<=r;r--){var i=0|e[r];a&&i==t||(n[r]=i,a=!1)}this.g=n}(or=oo.prototype).Oa=function(e){this.M=e},or.ha=function(e,t,n,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xi.g(),this.C=this.u?Qi(this.u):Qi(Xi),this.g.onreadystatechange=vr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void ho(this,i)}if(e=n||"",n=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var r in a)n.set(r,a[r]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const e of a.keys())n.set(e,a.get(e))}a=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=cr.FormData&&e instanceof cr.FormData,!(0<=br(co,t))||a||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mo(this),0<this.B&&((this.L=function(e){return Dr&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vr(this.ua,this)):this.A=Ti(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){ho(this,i)}},or.ua=function(){void 0!==ur&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},or.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pi(this,"complete"),pi(this,"abort"),vo(this))},or.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vo(this,!0)),oo.$.N.call(this)},or.La=function(){this.s||(this.G||this.v||this.l?fo(this):this.kb())},or.kb=function(){fo(this)},or.isActive=function(){return!!this.g},or.da=function(){try{return 2<go(this)?this.g.status:-1}catch(Ar){return-1}},or.ja=function(){try{return this.g?this.g.responseText:""}catch(Ar){return""}},or.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),so(t)}},or.Ia=function(){return this.m},or.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(or=Io.prototype).ra=8,or.H=1,or.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ns(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Yr(i),Jr(i,this.U)):i=this.U),null!==this.o||this.O||(r.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var a=this.j[n];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(t+=a)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ao(this,r,t),ks(n=_s(this.I),"RID",e),ks(n,"CVER",22),this.F&&ks(n,"X-HTTP-Session-Id",this.F),To(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(bo(i)))+"&"+t:this.o&&wo(n,this.o,i)),Gs(this.i,r),this.bb&&ks(n,"TYPE","init"),this.P?(ks(n,"$req",t),ks(n,"SID","null"),r.aa=!0,os(r,n,null)):os(r,n,t),this.H=2}}else 3==this.H&&(e?xo(this,e):0==this.j.length||qs(this.i)||xo(this))},or.Ma=function(){if(this.u=null,Mo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Hi(vr(this.jb,this),e)}},or.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zi(10),Co(this),Mo(this))},or.ib=function(){null!=this.v&&(this.v=null,Co(this),Vo(this),zi(19))},or.pb=function(e){e?(this.l.info("Successfully pinged google.com"),zi(2)):(this.l.info("Failed to ping google.com"),zi(1))},or.isActive=function(){return!!this.h&&this.h.isActive(this)},(or=$o.prototype).Ba=function(){},or.Aa=function(){},or.za=function(){},or.ya=function(){},or.isActive=function(){return!0},or.Va=function(){},jo.prototype.g=function(e,t){return new zo(e,t)},gr(zo,hi),zo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;zi(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Bo(e,null,e.Y),Eo(e)},zo.prototype.close=function(){So(this.g)},zo.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=vi(e),e=n);t.j.push(new $s(t.fb++,e)),3==t.H&&Eo(t)},zo.prototype.N=function(){this.g.h=null,delete this.j,So(this.g),delete this.g,zo.$.N.call(this)},gr(qo,Zi),gr(Ho,es),gr(Ko,$o),Ko.prototype.Ba=function(){pi(this.g,"a")},Ko.prototype.Aa=function(e){pi(this.g,new qo(e))},Ko.prototype.za=function(e){pi(this.g,new Ho)},Ko.prototype.ya=function(){pi(this.g,"b")},gr(Go,function(){this.blockSize=-1}),Go.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Go.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,a=this.m,r=this.h,i=0;i<t;){if(0==r)for(;i<=n;)Wo(this,e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(a[r++]=e.charCodeAt(i++),r==this.blockSize){Wo(this,a),r=0;break}}else for(;i<t;)if(a[r++]=e[i++],r==this.blockSize){Wo(this,a),r=0;break}}this.h=r,this.i+=t},Go.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var a=0;32>a;a+=8)e[n++]=this.g[t]>>>a&255;return e};var Yo={};function Xo(e){return-128<=e&&128>e?function(e,t){var n=Yo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Qo([0|e],0>e?-1:0)}):new Qo([0|e],0>e?-1:0)}function Jo(e){if(isNaN(e)||!isFinite(e))return el;if(0>e)return il(Jo(-e));for(var t=[],n=1,a=0;e>=n;a++)t[a]=e/n|0,n*=Zo;return new Qo(t,0)}var Zo=4294967296,el=Xo(0),tl=Xo(1),nl=Xo(16777216);function al(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function rl(e){return-1==e.h}function il(e){for(var t=e.g.length,n=[],a=0;a<t;a++)n[a]=~e.g[a];return new Qo(n,~e.h).add(tl)}function sl(e,t){return e.add(il(t))}function ol(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ll(e,t){this.g=e,this.h=t}function ul(e,t){if(al(t))throw Error("division by zero");if(al(e))return new ll(el,el);if(rl(e))return t=ul(il(e),t),new ll(il(t.g),il(t.h));if(rl(t))return t=ul(e,il(t)),new ll(il(t.g),t.h);if(30<e.g.length){if(rl(e)||rl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tl,a=t;0>=a.X(e);)n=cl(n),a=cl(a);var r=dl(n,1),i=dl(a,1);for(a=dl(a,2),n=dl(n,2);!al(a);){var s=i.add(a);0>=s.X(e)&&(r=r.add(n),i=s),a=dl(a,1),n=dl(n,1)}return t=sl(e,r.R(t)),new ll(r,t)}for(r=el;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),a=48>=(a=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,a-48),s=(i=Jo(n)).R(t);rl(s)||0<s.X(e);)s=(i=Jo(n-=a)).R(t);al(i)&&(i=tl),r=r.add(i),e=sl(e,s)}return new ll(r,e)}function cl(e){for(var t=e.g.length+1,n=[],a=0;a<t;a++)n[a]=e.D(a)<<1|e.D(a-1)>>>31;return new Qo(n,e.h)}function dl(e,t){var n=t>>5;t%=32;for(var a=e.g.length-n,r=[],i=0;i<a;i++)r[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new Qo(r,e.h)}(or=Qo.prototype).ea=function(){if(rl(this))return-il(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var a=this.D(n);e+=(0<=a?a:Zo+a)*t,t*=Zo}return e},or.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(al(this))return"0";if(rl(this))return"-"+il(this).toString(e);for(var t=Jo(Math.pow(e,6)),n=this,a="";;){var r=ul(n,t).g,i=((0<(n=sl(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(al(n=r))return i+a;for(;6>i.length;)i="0"+i;a=i+a}},or.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},or.X=function(e){return rl(e=sl(this,e))?-1:al(e)?0:1},or.abs=function(){return rl(this)?il(this):this},or.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0,r=0;r<=t;r++){var i=a+(65535&this.D(r))+(65535&e.D(r)),s=(i>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);a=s>>>16,i&=65535,s&=65535,n[r]=s<<16|i}return new Qo(n,-2147483648&n[n.length-1]?-1:0)},or.R=function(e){if(al(this)||al(e))return el;if(rl(this))return rl(e)?il(this).R(il(e)):il(il(this).R(e));if(rl(e))return il(this.R(il(e)));if(0>this.X(nl)&&0>e.X(nl))return Jo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var r=0;r<e.g.length;r++){var i=this.D(a)>>>16,s=65535&this.D(a),o=e.D(r)>>>16,l=65535&e.D(r);n[2*a+2*r]+=s*l,ol(n,2*a+2*r),n[2*a+2*r+1]+=i*l,ol(n,2*a+2*r+1),n[2*a+2*r+1]+=s*o,ol(n,2*a+2*r+1),n[2*a+2*r+2]+=i*o,ol(n,2*a+2*r+2)}for(a=0;a<t;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=t;a<2*t;a++)n[a]=0;return new Qo(n,0)},or.gb=function(e){return ul(this,e).h},or.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)&e.D(a);return new Qo(n,this.h&e.h)},or.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)|e.D(a);return new Qo(n,this.h|e.h)},or.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)^e.D(a);return new Qo(n,this.h^e.h)},jo.prototype.createWebChannel=jo.prototype.g,zo.prototype.send=zo.prototype.u,zo.prototype.open=zo.prototype.m,zo.prototype.close=zo.prototype.close,Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,Gi.COMPLETE="complete",Yi.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",hi.prototype.listen=hi.prototype.O,oo.prototype.listenOnce=oo.prototype.P,oo.prototype.getLastError=oo.prototype.Sa,oo.prototype.getLastErrorCode=oo.prototype.Ia,oo.prototype.getStatus=oo.prototype.da,oo.prototype.getResponseJson=oo.prototype.Wa,oo.prototype.getResponseText=oo.prototype.ja,oo.prototype.send=oo.prototype.ha,oo.prototype.setWithCredentials=oo.prototype.Oa,Go.prototype.digest=Go.prototype.l,Go.prototype.reset=Go.prototype.reset,Go.prototype.update=Go.prototype.j,Qo.prototype.add=Qo.prototype.add,Qo.prototype.multiply=Qo.prototype.R,Qo.prototype.modulo=Qo.prototype.gb,Qo.prototype.compare=Qo.prototype.X,Qo.prototype.toNumber=Qo.prototype.ea,Qo.prototype.toString=Qo.prototype.toString,Qo.prototype.getBits=Qo.prototype.D,Qo.fromNumber=Jo,Qo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return il(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Jo(Math.pow(n,8)),r=el,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),n);8>s?(s=Jo(Math.pow(n,s)),r=r.R(s).add(Jo(o))):r=(r=r.R(a)).add(Jo(o))}return r};var hl=Ki,pl=Gi,fl=Li,vl=10,ml=11,gl=eo,yl=Yi,bl=oo,wl=Go,_l=Qo;const Il="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sl.UNAUTHENTICATED=new Sl(null),Sl.GOOGLE_CREDENTIALS=new Sl("google-credentials-uid"),Sl.FIRST_PARTY=new Sl("first-party-uid"),Sl.MOCK_USER=new Sl("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Cl="9.23.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Tn("@firebase/firestore");function El(){return kl.logLevel}function xl(e,...t){if(kl.logLevel<=In.DEBUG){const n=t.map(Nl);kl.debug(`Firestore (${Cl}): ${e}`,...n)}}function Tl(e,...t){if(kl.logLevel<=In.ERROR){const n=t.map(Nl);kl.error(`Firestore (${Cl}): ${e}`,...n)}}function Al(e,...t){if(kl.logLevel<=In.WARN){const n=t.map(Nl);kl.warn(`Firestore (${Cl}): ${e}`,...n)}}function Nl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e="Unexpected state"){const t=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: `+e;throw Tl(t),new Error(t)}function Dl(e,t){e||Vl()}function Ml(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pl extends sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sl.UNAUTHENTICATED))}shutdown(){}}class Bl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ul{constructor(e){this.t=e,this.currentUser=Sl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const a=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Ol;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ol,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await a(this.currentUser)})},s=e=>{xl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(xl("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ol)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(xl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dl("string"==typeof t.accessToken),new Ll(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dl(null===e||"string"==typeof e),new Sl(e)}}class $l{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Sl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class jl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new $l(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Sl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ql{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&xl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,xl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const a=e=>{xl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>a(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?a(e):xl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Dl("string"==typeof e.token),this.T=e.token,new zl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const a=Hl(40);for(let r=0;r<a.length;++r)n.length<20&&a[r]<t&&(n+=e.charAt(a[r]%62))}return n}}function Gl(e,t){return e<t?-1:e>t?1:0}function Wl(e,t,n){return e.length===t.length&&e.every((e,a)=>n(e,t[a]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pl(Rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pl(Rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pl(Rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pl(Rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ql.fromMillis(Date.now())}static fromDate(e){return Ql.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ql(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gl(this.nanoseconds,e.nanoseconds):Gl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yl(e)}static min(){return new Yl(new Ql(0,0))}static max(){return new Yl(new Ql(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vl(),void 0===n?n=e.length-t:n>e.length-t&&Vl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const n=e.get(a),r=t.get(a);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jl extends Xl{construct(e,t,n){return new Jl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pl(Rl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Jl(t)}static emptyPath(){return new Jl([])}}const Zl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class eu extends Xl{construct(e,t,n){return new eu(e,t,n)}static isValidIdentifier(e){return Zl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),eu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new eu(["__name__"])}static fromServerFormat(e){const t=[];let n="",a=0;const r=()=>{if(0===n.length)throw new Pl(Rl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;a<e.length;){const t=e[a];if("\\"===t){if(a+1===e.length)throw new Pl(Rl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[a+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Pl(Rl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,a+=2}else"`"===t?(i=!i,a++):"."!==t||i?(n+=t,a++):(r(),a++)}if(r(),i)throw new Pl(Rl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new eu(t)}static emptyPath(){return new eu([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.path=e}static fromPath(e){return new tu(Jl.fromString(e))}static fromName(e){return new tu(Jl.fromString(e).popFirst(5))}static empty(){return new tu(Jl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tu(new Jl(e.slice()))}}function nu(e){return new au(e.readTime,e.key,-1)}class au{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new au(Yl.min(),tu.empty(),-1)}static max(){return new au(Yl.max(),tu.empty(),-1)}}function ru(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=tu.comparator(e.documentKey,t.documentKey),0!==n?n:Gl(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class iu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(e){if(e.code!==Rl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;xl("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ou((n,a)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,a)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ou?t:ou.resolve(t)}catch(t){return ou.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ou.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ou.reject(t)}static resolve(e){return new ou((t,n)=>{t(e)})}static reject(e){return new ou((t,n)=>{n(e)})}static waitFor(e){return new ou((t,n)=>{let a=0,r=0,i=!1;e.forEach(e=>{++a,e.next(()=>{++r,i&&r===a&&t()},e=>n(e))}),i=!0,r===a&&t()})}static or(e){let t=ou.resolve(!1);for(const n of e)t=t.next(e=>e?ou.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,a)=>{n.push(t.call(this,e,a))}),this.waitFor(n)}static mapArray(e,t){return new ou((n,a)=>{const r=e.length,i=new Array(r);let s=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++s,s===r&&n(i)},e=>a(e))}})}static doWhile(e,t){return new ou((n,a)=>{const r=()=>{!0===e()?t().next(()=>{r()},a):n()};r()})}}function lu(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function cu(e){return null==e}function du(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uu.ct=-1;class vu{constructor(e,t){this.comparator=e,this.root=t||gu.EMPTY}insert(e,t){return new vu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gu.BLACK,null,null))}remove(e){return new vu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(0===a)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&a&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gu{constructor(e,t,n,a,r){this.key=e,this.value=t,this.color=null!=n?n:gu.RED,this.left=null!=a?a:gu.EMPTY,this.right=null!=r?r:gu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,r){return new gu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=a?a:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const r=n(e,a.key);return a=r<0?a.copy(null,null,null,a.left.insert(e,t,n),null):0===r?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return gu.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vl();if(this.right.isRed())throw Vl();const e=this.left.check();if(e!==this.right.check())throw Vl();return e+(this.isRed()?0:1)}}gu.EMPTY=null,gu.RED=!0,gu.BLACK=!1,gu.EMPTY=new class{constructor(){this.size=0}get key(){throw Vl()}get value(){throw Vl()}get color(){throw Vl()}get left(){throw Vl()}get right(){throw Vl()}copy(e,t,n,a,r){return this}insert(e,t,n){return new gu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yu{constructor(e){this.comparator=e,this.data=new vu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bu(this.data.getIterator())}getIteratorFrom(e){return new bu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof yu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,a=n.getNext().key;if(0!==this.comparator(e,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yu(this.comparator);return t.data=e,t}}class bu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.fields=e,e.sort(eu.comparator)}static empty(){return new wu([])}unionWith(e){let t=new yu(eu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new _u("Invalid base64 string: "+t):t}}(e);return new Iu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Iu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Iu.EMPTY_BYTE_STRING=new Iu("");const Su=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(e){if(Dl(!!e),"string"==typeof e){let t=0;const n=Su.exec(e);if(Dl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:ku(e.seconds),nanos:ku(e.nanos)}}function ku(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Eu(e){return"string"==typeof e?Iu.fromBase64String(e):Iu.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Tu(e){const t=e.mapValue.fields.__previous_value__;return xu(t)?Tu(t):t}function Au(e){const t=Cu(e.mapValue.fields.__local_write_time__.timestampValue);return new Ql(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,n,a,r,i,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}class Vu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={};function Mu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xu(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:10:Vl()}function Ru(e,t){if(e===t)return!0;const n=Mu(e);if(n!==Mu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Au(e).isEqual(Au(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Cu(e.timestampValue),a=Cu(t.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return a=t,Eu(e.bytesValue).isEqual(Eu(a.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ku(e.geoPointValue.latitude)===ku(t.geoPointValue.latitude)&&ku(e.geoPointValue.longitude)===ku(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ku(e.integerValue)===ku(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ku(e.doubleValue),a=ku(t.doubleValue);return n===a?du(n)===du(a):isNaN(n)&&isNaN(a)}return!1}(e,t);case 9:return Wl(e.arrayValue.values||[],t.arrayValue.values||[],Ru);case 10:return function(e,t){const n=e.mapValue.fields||{},a=t.mapValue.fields||{};if(hu(n)!==hu(a))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===a[r]||!Ru(n[r],a[r])))return!1;return!0}(e,t);default:return Vl()}var a}function Pu(e,t){return void 0!==(e.values||[]).find(e=>Ru(e,t))}function Ou(e,t){if(e===t)return 0;const n=Mu(e),a=Mu(t);if(n!==a)return Gl(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ku(e.integerValue||e.doubleValue),a=ku(t.integerValue||t.doubleValue);return n<a?-1:n>a?1:n===a?0:isNaN(n)?isNaN(a)?0:-1:1}(e,t);case 3:return Lu(e.timestampValue,t.timestampValue);case 4:return Lu(Au(e),Au(t));case 5:return Gl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Eu(e),a=Eu(t);return n.compareTo(a)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),a=t.split("/");for(let r=0;r<n.length&&r<a.length;r++){const e=Gl(n[r],a[r]);if(0!==e)return e}return Gl(n.length,a.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Gl(ku(e.latitude),ku(t.latitude));return 0!==n?n:Gl(ku(e.longitude),ku(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],a=t.values||[];for(let r=0;r<n.length&&r<a.length;++r){const e=Ou(n[r],a[r]);if(e)return e}return Gl(n.length,a.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Du&&t===Du)return 0;if(e===Du)return 1;if(t===Du)return-1;const n=e.fields||{},a=Object.keys(n),r=t.fields||{},i=Object.keys(r);a.sort(),i.sort();for(let s=0;s<a.length&&s<i.length;++s){const e=Gl(a[s],i[s]);if(0!==e)return e;const t=Ou(n[a[s]],r[i[s]]);if(0!==t)return t}return Gl(a.length,i.length)}(e.mapValue,t.mapValue);default:throw Vl()}}function Lu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gl(e,t);const n=Cu(e),a=Cu(t),r=Gl(n.seconds,a.seconds);return 0!==r?r:Gl(n.nanos,a.nanos)}function Fu(e){return Bu(e)}function Bu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Cu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Eu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,tu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const a of e.values||[])n?n=!1:t+=",",t+=Bu(a);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",a=!0;for(const r of t)a?a=!1:n+=",",n+=`${r}:${Bu(e.fields[r])}`;return n+"}"}(e.mapValue):Vl();var t,n}function Uu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function $u(e){return!!e&&"integerValue"in e}function ju(e){return!!e&&"arrayValue"in e}function zu(e){return!!e&&"nullValue"in e}function qu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hu(e){return!!e&&"mapValue"in e}function Ku(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return pu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ku(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ku(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Gu{constructor(e){this.value=e}static empty(){return new Gu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(t)}setAll(e){let t=eu.emptyPath(),n={},a=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,a),n={},a=[],t=r.popLast()}e?n[r.lastSegment()]=Ku(e):a.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,a)}delete(e){const t=this.field(e.popLast());Hu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ru(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];Hu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){pu(t,(t,n)=>e[t]=n);for(const a of n)delete e[a]}clone(){return new Gu(Ku(this.value))}}function Wu(e){const t=[];return pu(e.fields,(e,n)=>{const a=new eu([e]);if(Hu(n)){const e=Wu(n.mapValue).fields;if(0===e.length)t.push(a);else for(const n of e)t.push(a.child(n))}else t.push(a)}),new wu(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Qu{constructor(e,t,n,a,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Qu(e,0,Yl.min(),Yl.min(),Yl.min(),Gu.empty(),0)}static newFoundDocument(e,t,n,a){return new Qu(e,1,t,Yl.min(),n,a,0)}static newNoDocument(e,t){return new Qu(e,2,t,Yl.min(),Yl.min(),Gu.empty(),0)}static newUnknownDocument(e,t){return new Qu(e,3,t,Yl.min(),Yl.min(),Gu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.position=e,this.inclusive=t}}function Xu(e,t,n){let a=0;for(let r=0;r<e.position.length;r++){const i=t[r],s=e.position[r];if(a=i.field.isKeyField()?tu.comparator(tu.fromName(s.referenceValue),n.key):Ou(s,n.data.field(i.field)),"desc"===i.dir&&(a*=-1),0!==a)break}return a}function Ju(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ru(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ec(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{}class nc extends tc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new uc(e,t,n):"array-contains"===t?new pc(e,n):"in"===t?new fc(e,n):"not-in"===t?new vc(e,n):"array-contains-any"===t?new mc(e,n):new nc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new cc(e,n):new dc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ou(t,this.value)):null!==t&&Mu(this.value)===Mu(t)&&this.matchesComparison(Ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ac extends tc{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ac(e,t)}matches(e){return rc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rc(e){return"and"===e.op}function ic(e){return function(e){for(const t of e.filters)if(t instanceof ac)return!1;return!0}(e)&&rc(e)}function sc(e){if(e instanceof nc)return e.field.canonicalString()+e.op.toString()+Fu(e.value);if(ic(e))return e.filters.map(e=>sc(e)).join(",");{const t=e.filters.map(e=>sc(e)).join(",");return`${e.op}(${t})`}}function oc(e,t){return e instanceof nc?(n=e,(a=t)instanceof nc&&n.op===a.op&&n.field.isEqual(a.field)&&Ru(n.value,a.value)):e instanceof ac?function(e,t){return t instanceof ac&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,a)=>e&&oc(n,t.filters[a]),!0)}(e,t):void Vl();var n,a}function lc(e){return e instanceof nc?`${(t=e).field.canonicalString()} ${t.op} ${Fu(t.value)}`:e instanceof ac?function(e){return e.op.toString()+" {"+e.getFilters().map(lc).join(" ,")+"}"}(e):"Filter";var t}class uc extends nc{constructor(e,t,n){super(e,t,n),this.key=tu.fromName(n.referenceValue)}matches(e){const t=tu.comparator(e.key,this.key);return this.matchesComparison(t)}}class cc extends nc{constructor(e,t){super(e,"in",t),this.keys=hc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dc extends nc{constructor(e,t){super(e,"not-in",t),this.keys=hc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>tu.fromName(e.referenceValue))}class pc extends nc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ju(t)&&Pu(t.arrayValue,this.value)}}class fc extends nc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pu(this.value.arrayValue,t)}}class vc extends nc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pu(this.value.arrayValue,t)}}class mc extends nc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ju(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Pu(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t=null,n=[],a=[],r=null,i=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=r,this.startAt=i,this.endAt=s,this.dt=null}}function yc(e,t=null,n=[],a=[],r=null,i=null,s=null){return new gc(e,t,n,a,r,i,s)}function bc(e){const t=Ml(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>sc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),cu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Fu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Fu(e)).join(",")),t.dt=e}return t.dt}function wc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ec(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!oc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ju(e.startAt,t.startAt)&&Ju(e.endAt,t.endAt)}function _c(e){return tu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t=null,n=[],a=[],r=null,i="F",s=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=r,this.limitType=i,this.startAt=s,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function Sc(e){return new Ic(e)}function Cc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ec(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function xc(e){return null!==e.collectionGroup}function Tc(e){const t=Ml(e);if(null===t.wt){t.wt=[];const e=Ec(t),n=kc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Zu(e)),t.wt.push(new Zu(eu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Zu(eu.keyField(),e))}}}return t.wt}function Ac(e){const t=Ml(e);if(!t._t)if("F"===t.limitType)t._t=yc(t.path,t.collectionGroup,Tc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of Tc(t)){const t="desc"===r.dir?"asc":"desc";e.push(new Zu(r.field,t))}const n=t.endAt?new Yu(t.endAt.position,t.endAt.inclusive):null,a=t.startAt?new Yu(t.startAt.position,t.startAt.inclusive):null;t._t=yc(t.path,t.collectionGroup,e,t.filters,t.limit,n,a)}return t._t}function Nc(e,t){t.getFirstInequalityField(),Ec(e);const n=e.filters.concat([t]);return new Ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vc(e,t,n){return new Ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dc(e,t){return wc(Ac(e),Ac(t))&&e.limitType===t.limitType}function Mc(e){return`${bc(Ac(e))}|lt:${e.limitType}`}function Rc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>lc(e)).join(", ")}]`),cu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Fu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Fu(e)).join(",")),`Target(${t})`}(Ac(e))}; limitType=${e.limitType})`}function Pc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Tc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(a=t,!((n=e).startAt&&!function(e,t,n){const a=Xu(e,t,n);return e.inclusive?a<=0:a<0}(n.startAt,Tc(n),a)||n.endAt&&!function(e,t,n){const a=Xu(e,t,n);return e.inclusive?a>=0:a>0}(n.endAt,Tc(n),a)));var n,a}function Oc(e){return(t,n)=>{let a=!1;for(const r of Tc(e)){const e=Lc(r,t,n);if(0!==e)return e;a=a||r.field.isKeyField()}return 0}}function Lc(e,t,n){const a=e.field.isKeyField()?tu.comparator(t.key,n.key):function(e,t,n){const a=t.data.field(e),r=n.data.field(e);return null!==a&&null!==r?Ou(a,r):Vl()}(e.field,t,n);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return Vl()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[a,r]of n)if(this.equalsFn(a,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0===a)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<a.length;r++)if(this.equalsFn(a[r][0],e))return void(a[r]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return 1===n.length?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,(t,n)=>{for(const[a,r]of n)e(a,r)})}isEmpty(){return fu(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new vu(tu.comparator);function Uc(){return Bc}const $c=new vu(tu.comparator);function jc(...e){let t=$c;for(const n of e)t=t.insert(n.key,n);return t}function zc(e){let t=$c;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function qc(){return Kc()}function Hc(){return Kc()}function Kc(){return new Fc(e=>e.toString(),(e,t)=>e.isEqual(t))}const Gc=new vu(tu.comparator),Wc=new yu(tu.comparator);function Qc(...e){let t=Wc;for(const n of e)t=t.add(n);return t}const Yc=new yu(Gl);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(t)?"-0":t}}function Jc(e){return{integerValue:""+e}}function Zc(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!du(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Jc(t):Xc(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function td(e,t,n){return e instanceof rd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xu(t)&&(t=Tu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof id?sd(e,t):e instanceof od?ld(e,t):function(e,t){const n=ad(e,t),a=cd(n)+cd(e.gt);return $u(n)&&$u(e.gt)?Jc(a):Xc(e.serializer,a)}(e,t)}function nd(e,t,n){return e instanceof id?sd(e,t):e instanceof od?ld(e,t):n}function ad(e,t){return e instanceof ud?$u(a=t)||(n=a)&&"doubleValue"in n?t:{integerValue:0}:null;var n,a}class rd extends ed{}class id extends ed{constructor(e){super(),this.elements=e}}function sd(e,t){const n=dd(t);for(const a of e.elements)n.some(e=>Ru(e,a))||n.push(a);return{arrayValue:{values:n}}}class od extends ed{constructor(e){super(),this.elements=e}}function ld(e,t){let n=dd(t);for(const a of e.elements)n=n.filter(e=>!Ru(e,a));return{arrayValue:{values:n}}}class ud extends ed{constructor(e,t){super(),this.serializer=e,this.gt=t}}function cd(e){return ku(e.integerValue||e.doubleValue)}function dd(e){return ju(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.field=e,this.transform=t}}class pd{constructor(e,t){this.version=e,this.transformResults=t}}class fd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fd}static exists(e){return new fd(void 0,e)}static updateTime(e){return new fd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class md{}function gd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xd(e.key,fd.none()):new Id(e.key,e.data,fd.none());{const n=e.data,a=Gu.empty();let r=new yu(eu.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?a.delete(e):a.set(e,t),r=r.add(e)}return new Sd(e.key,a,new wu(r.toArray()),fd.none())}}function yd(e,t,n){var a;e instanceof Id?function(e,t,n){const a=e.value.clone(),r=kd(e.fieldTransforms,t,n.transformResults);a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Sd?function(e,t,n){if(!vd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const a=kd(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Cd(e)),r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(a=n,t.convertToNoDocument(a.version).setHasCommittedMutations())}function bd(e,t,n,a){return e instanceof Id?function(e,t,n,a){if(!vd(e.precondition,t))return n;const r=e.value.clone(),i=Ed(e.fieldTransforms,a,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,a):e instanceof Sd?function(e,t,n,a){if(!vd(e.precondition,t))return n;const r=Ed(e.fieldTransforms,a,t),i=t.data;return i.setAll(Cd(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,a):(r=t,i=n,vd(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function wd(e,t){let n=null;for(const a of e.fieldTransforms){const e=t.data.field(a.field),r=ad(a.transform,e||null);null!=r&&(null===n&&(n=Gu.empty()),n.set(a.field,r))}return n||null}function _d(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,a=t.fieldTransforms,!!(void 0===n&&void 0===a||n&&a&&Wl(n,a,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,a=t.transform,n instanceof id&&a instanceof id||n instanceof od&&a instanceof od?Wl(n.elements,a.elements,Ru):n instanceof ud&&a instanceof ud?Ru(n.gt,a.gt):n instanceof rd&&a instanceof rd);var n,a}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,a}class Id extends md{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Sd extends md{constructor(e,t,n,a,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Cd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=e.data.field(n);t.set(n,a)}}),t}function kd(e,t,n){const a=new Map;Dl(e.length===n.length);for(let r=0;r<n.length;r++){const i=e[r],s=i.transform,o=t.data.field(i.field);a.set(i.field,nd(s,o,n[r]))}return a}function Ed(e,t,n){const a=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);a.set(r.field,td(e,i,t))}return a}class xd extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Td extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const t=this.mutations[a];t.key.isEqual(e.key)&&yd(t,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=bd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=bd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Hc();return this.mutations.forEach(a=>{const r=e.get(a.key),i=r.overlayedDocument;let s=this.applyToLocalView(i,r.mutatedFields);s=t.has(a.key)?null:s;const o=gd(i,s);null!==o&&n.set(a.key,o),i.isValidDocument()||i.convertToNoDocument(Yl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qc())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,(e,t)=>_d(e,t))&&Wl(this.baseMutations,e.baseMutations,(e,t)=>_d(e,t))}}class Nd{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){Dl(e.mutations.length===n.length);let a=Gc;const r=e.mutations;for(let i=0;i<r.length;i++)a=a.insert(r[i].key,n[i].version);return new Nd(e,t,n,a)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Md,Rd;function Pd(e){if(void 0===e)return Tl("GRPC error has no .code"),Rl.UNKNOWN;switch(e){case Md.OK:return Rl.OK;case Md.CANCELLED:return Rl.CANCELLED;case Md.UNKNOWN:return Rl.UNKNOWN;case Md.DEADLINE_EXCEEDED:return Rl.DEADLINE_EXCEEDED;case Md.RESOURCE_EXHAUSTED:return Rl.RESOURCE_EXHAUSTED;case Md.INTERNAL:return Rl.INTERNAL;case Md.UNAVAILABLE:return Rl.UNAVAILABLE;case Md.UNAUTHENTICATED:return Rl.UNAUTHENTICATED;case Md.INVALID_ARGUMENT:return Rl.INVALID_ARGUMENT;case Md.NOT_FOUND:return Rl.NOT_FOUND;case Md.ALREADY_EXISTS:return Rl.ALREADY_EXISTS;case Md.PERMISSION_DENIED:return Rl.PERMISSION_DENIED;case Md.FAILED_PRECONDITION:return Rl.FAILED_PRECONDITION;case Md.ABORTED:return Rl.ABORTED;case Md.OUT_OF_RANGE:return Rl.OUT_OF_RANGE;case Md.UNIMPLEMENTED:return Rl.UNIMPLEMENTED;case Md.DATA_LOSS:return Rl.DATA_LOSS;default:return Vl()}}(Rd=Md||(Md={}))[Rd.OK=0]="OK",Rd[Rd.CANCELLED=1]="CANCELLED",Rd[Rd.UNKNOWN=2]="UNKNOWN",Rd[Rd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rd[Rd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rd[Rd.NOT_FOUND=5]="NOT_FOUND",Rd[Rd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rd[Rd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rd[Rd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rd[Rd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rd[Rd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rd[Rd.ABORTED=10]="ABORTED",Rd[Rd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rd[Rd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rd[Rd.INTERNAL=13]="INTERNAL",Rd[Rd.UNAVAILABLE=14]="UNAVAILABLE",Rd[Rd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Od{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ld}static getOrCreateInstance(){return null===Ld&&(Ld=new Od),Ld}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Ld=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fd=new _l([4294967295,4294967295],0);function Bd(e){const t=(new TextEncoder).encode(e),n=new wl;return n.update(t),new Uint8Array(n.digest())}function Ud(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),a=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new _l([n,a],0),new _l([r,i],0)]}class $d{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jd(`Invalid padding: ${t}`);if(n<0)throw new jd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new jd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new jd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=_l.fromNumber(this.It)}Et(e,t,n){let a=e.add(t.multiply(_l.fromNumber(n)));return 1===a.compare(Fd)&&(a=new _l([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Bd(e),[n,a]=Ud(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,a,r);if(!this.At(e))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new $d(r,a,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Bd(e),[n,a]=Ud(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,a,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class jd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,n,a,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zd(Yl.min(),a,new vu(Gl),Uc(),Qc())}}class qd{constructor(e,t,n,a,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new qd(n,t,Qc(),Qc(),Qc())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,n,a){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=a}}class Kd{constructor(e,t){this.targetId=e,this.Vt=t}}class Gd{constructor(e,t,n=Iu.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class Wd{constructor(){this.St=0,this.Dt=Xd(),this.Ct=Iu.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Qc(),t=Qc(),n=Qc();return this.Dt.forEach((a,r)=>{switch(r){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:Vl()}}),new qd(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Xd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Qd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Uc(),this.zt=Yd(),this.Wt=new vu(Gl)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Vl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,a=e.Vt.count,r=this.se(n);if(r){const i=r.target;if(_c(i))if(0===a){const e=new tu(i.path);this.Yt(n,e,Qu.newNoDocument(e,Yl.min()))}else Dl(1===a);else{const r=this.ie(n);if(r!==a){const a=this.re(e,r);if(0!==a){this.ee(n);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Od.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var a,r,i,s,o,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(a=null==c?void 0:c.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(i=null===(r=null==c?void 0:c.bits)||void 0===r?void 0:r.bitmap)||void 0===i?void 0:i.length)&&void 0!==s?s:0,padding:null!==(l=null===(o=null==c?void 0:c.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),u}(a,r,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:a}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Eu(r).toUint8Array()}catch(u){if(u instanceof _u)return Al("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new $d(o,i,s)}catch(u){return Al(u instanceof jd?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===l.It?1:a!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let a=0;return n.forEach(n=>{const r=this.Gt.ue(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.vt(i)||(this.Yt(e,n,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((n,a)=>{const r=this.se(a);if(r){if(n.current&&_c(r.target)){const t=new tu(r.target.path);null!==this.jt.get(t)||this.ae(a,t)||this.Yt(a,t,Qu.newNoDocument(t,e))}n.Mt&&(t.set(a,n.Ot()),n.Ft())}});let n=Qc();this.zt.forEach((e,t)=>{let a=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(a=!1,!1)}),a&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const a=new zd(e,t,this.Wt,this.jt,n);return this.jt=Uc(),this.zt=Yd(),this.Wt=new vu(Gl),a}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Wd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new yu(Gl),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Wd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Yd(){return new vu(tu.comparator)}function Xd(){return new vu(tu.comparator)}const Jd=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Zd=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),eh=(()=>({and:"AND",or:"OR"}))();class th{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nh(e,t){return e.useProto3Json||cu(t)?t:{value:t}}function ah(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ih(e,t){return ah(e,t.toTimestamp())}function sh(e){return Dl(!!e),Yl.fromTimestamp(function(e){const t=Cu(e);return new Ql(t.seconds,t.nanos)}(e))}function oh(e,t){return(n=e,new Jl(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function lh(e){const t=Jl.fromString(e);return Dl(Eh(t)),t}function uh(e,t){return oh(e.databaseId,t.path)}function ch(e,t){const n=lh(t);if(n.get(1)!==e.databaseId.projectId)throw new Pl(Rl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pl(Rl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tu(ph(n))}function dh(e,t){return oh(e.databaseId,t)}function hh(e){return new Jl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ph(e){return Dl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function fh(e,t,n){return{name:uh(e,t),fields:n.value.mapValue.fields}}function vh(e,t){return{documents:[dh(e,t.path)]}}function mh(e,t){const n={structuredQuery:{}},a=t.path;null!==t.collectionGroup?(n.parent=dh(e,a),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=dh(e,a.popLast()),n.structuredQuery.from=[{collectionId:a.lastSegment()}]);const r=function(e){if(0!==e.length)return Ch(ac.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const i=function(e){if(0!==e.length)return e.map(e=>{return{field:Ih((t=e).field),direction:bh(t.dir)};var t})}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const s=nh(e,t.limit);var o,l;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),n}function gh(e){let t=function(e){const t=lh(e);return 4===t.length?Jl.emptyPath():ph(t)}(e.parent);const n=e.structuredQuery,a=n.from?n.from.length:0;let r=null;if(a>0){Dl(1===a);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=yh(e);return t instanceof ac&&ic(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>{return new Zu(Sh((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,cu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Yu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Yu(n,t)}(n.endAt)),function(e,t,n,a,r,i,s,o){return new Ic(e,t,n,a,r,i,s,o)}(t,r,s,i,o,"F",l,u)}function yh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sh(e.unaryFilter.field);return nc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sh(e.unaryFilter.field);return nc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sh(e.unaryFilter.field);return nc.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Sh(e.unaryFilter.field);return nc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Vl()}}(e):void 0!==e.fieldFilter?(t=e,nc.create(Sh(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vl()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return ac.create(e.compositeFilter.filters.map(e=>yh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Vl()}}(e.compositeFilter.op))}(e):Vl();var t}function bh(e){return Jd[e]}function wh(e){return Zd[e]}function _h(e){return eh[e]}function Ih(e){return{fieldPath:e.canonicalString()}}function Sh(e){return eu.fromServerFormat(e.fieldPath)}function Ch(e){return e instanceof nc?function(e){if("=="===e.op){if(qu(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NAN"}};if(zu(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qu(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NAN"}};if(zu(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(e.field),op:wh(e.op),value:e.value}}}(e):e instanceof ac?function(e){const t=e.getFilters().map(e=>Ch(e));return 1===t.length?t[0]:{compositeFilter:{op:_h(e.op),filters:t}}}(e):Vl()}function kh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Eh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t,n,a,r=Yl.min(),i=Yl.min(),s=Iu.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new xh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.fe=e}}function Ah(e){const t=gh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vc(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.rn=new Vh}addToCollectionParentIndex(e,t){return this.rn.add(t),ou.resolve()}getCollectionParents(e,t){return ou.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ou.resolve()}deleteFieldIndex(e,t){return ou.resolve()}getDocumentsMatchingTarget(e,t){return ou.resolve(null)}getIndexType(e,t){return ou.resolve(0)}getFieldIndexes(e,t){return ou.resolve([])}getNextCollectionGroupToUpdate(e){return ou.resolve(null)}getMinOffset(e,t){return ou.resolve(au.min())}getMinOffsetFromCollectionGroup(e,t){return ou.resolve(au.min())}updateCollectionGroup(e,t,n){return ou.resolve()}updateIndexEntries(e,t){return ou.resolve()}}class Vh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new yu(Jl.comparator),r=!a.has(n);return this.index[t]=a.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new yu(Jl.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Dh(0)}static Mn(){return new Dh(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this.changes=new Fc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ou.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&bd(n.mutation,e,wu.empty(),Ql.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Qc()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Qc()){const a=qc();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,n).next(e=>{let t=jc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=qc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Qc()))}populateOverlays(e,t,n){const a=[];return n.forEach(e=>{t.has(e)||a.push(e)}),this.documentOverlayCache.getOverlays(e,a).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,a){let r=Uc();const i=Kc(),s=Kc();return t.forEach((e,t)=>{const s=n.get(t.key);a.has(t.key)&&(void 0===s||s.mutation instanceof Sd)?r=r.insert(t.key,t):void 0!==s?(i.set(t.key,s.mutation.getFieldMask()),bd(s.mutation,t,s.mutation.getFieldMask(),Ql.now())):i.set(t.key,wu.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Rh(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Kc();let a=new vu((e,t)=>e-t),r=Qc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let s=n.get(e)||wu.empty();s=r.applyToLocalView(i,s),n.set(e,s);const o=(a.get(r.batchId)||Qc()).add(e);a=a.insert(r.batchId,o)})}).next(()=>{const i=[],s=a.getReverseIterator();for(;s.hasNext();){const a=s.getNext(),o=a.key,l=a.value,u=Hc();l.forEach(e=>{if(!r.has(e)){const a=gd(t.get(e),n.get(e));null!==a&&u.set(e,a),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,u))}return ou.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return a=t,tu.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):xc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var a}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next(r=>{const i=a-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-r.size):ou.resolve(qc());let s=-1,o=r;return i.next(t=>ou.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(t)?ou.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,Qc())).next(e=>({batchId:s,changes:zc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tu(t)).next(e=>{let t=jc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const a=t.collectionGroup;let r=jc();return this.indexManager.getCollectionParents(e,a).next(i=>ou.forEach(i,i=>{const s=(o=t,l=i.child(a),new Ic(l,null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt));var o,l;return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{r=r.insert(e,t)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,n){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a))).next(e=>{a.forEach((t,n)=>{const a=n.getKey();null===e.get(a)&&(e=e.insert(a,Qu.newInvalidDocument(a)))});let n=jc();return e.forEach((e,r)=>{const i=a.get(e);void 0!==i&&bd(i.mutation,r,wu.empty(),Ql.now()),Pc(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ou.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:sh(n.createTime)}),ou.resolve()}getNamedQuery(e,t){return ou.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(n=t).name,query:Ah(n.bundledQuery),readTime:sh(n.readTime)}),ou.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.overlays=new vu(tu.comparator),this.ls=new Map}getOverlay(e,t){return ou.resolve(this.overlays.get(t))}getOverlays(e,t){const n=qc();return ou.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,a)=>{this.we(e,t,a)}),ou.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.ls.get(n);return void 0!==a&&(a.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),ou.resolve()}getOverlaysForCollection(e,t,n){const a=qc(),r=t.length+1,i=new tu(t.child("")),s=this.overlays.getIteratorFrom(i);for(;s.hasNext();){const e=s.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&a.set(e.getKey(),e)}return ou.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let r=new vu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=qc(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=qc(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=a)););return ou.resolve(s)}we(e,t,n){const a=this.overlays.get(n.key);if(null!==a){const e=this.ls.get(a.largestBatchId).delete(n.key);this.ls.set(a.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vd(t,n));let r=this.ls.get(t);void 0===r&&(r=Qc(),this.ls.set(t,r)),this.ls.set(t,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this.fs=new yu(Bh.ds),this.ws=new yu(Bh._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Bh(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Bh(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new tu(new Jl([])),n=new Bh(t,e),a=new Bh(t,e+1),r=[];return this.ws.forEachInRange([n,a],e=>{this.ys(e),r.push(e.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new tu(new Jl([])),n=new Bh(t,e),a=new Bh(t,e+1);let r=Qc();return this.ws.forEachInRange([n,a],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Bh(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Bh{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return tu.comparator(e.key,t.key)||Gl(e.As,t.As)}static _s(e,t){return Gl(e.As,t.As)||tu.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new yu(Bh.ds)}checkEmpty(e){return ou.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,a){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ad(r,t,n,a);this.mutationQueue.push(i);for(const s of a)this.Rs=this.Rs.add(new Bh(s.key,r)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return ou.resolve(i)}lookupMutationBatch(e,t){return ou.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.bs(n),r=a<0?0:a;return ou.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ou.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ou.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Bh(t,0),a=new Bh(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,a],e=>{const t=this.Ps(e.As);r.push(t)}),ou.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yu(Gl);return t.forEach(e=>{const t=new Bh(e,0),a=new Bh(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,a],e=>{n=n.add(e.As)})}),ou.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let r=n;tu.isDocumentKey(r)||(r=r.child(""));const i=new Bh(new tu(r),0);let s=new yu(Gl);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===a&&(s=s.add(e.As)),!0)},i),ou.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Dl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return ou.forEach(t.mutations,a=>{const r=new Bh(a.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Bh(t,0),a=this.Rs.firstAfterOrEqual(n);return ou.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ou.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.Ds=e,this.docs=new vu(tu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),r=a?a.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ou.resolve(n?n.document.mutableCopy():Qu.newInvalidDocument(t))}getEntries(e,t){let n=Uc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qu.newInvalidDocument(e))}),ou.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let r=Uc();const i=t.path,s=new tu(i.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ru(nu(s),n)<=0||(a.has(s.key)||Pc(t,s))&&(r=r.insert(s.key,s.mutableCopy()))}return ou.resolve(r)}getAllFromCollectionGroup(e,t,n,a){Vl()}Cs(e,t){return ou.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new jh(this)}getSize(e){return ou.resolve(this.size)}}class jh extends Mh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(n)}),ou.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.persistence=e,this.xs=new Fc(e=>bc(e),wc),this.lastRemoteSnapshotVersion=Yl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Fh,this.targetCount=0,this.Ms=Dh.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),ou.resolve()}getLastRemoteSnapshotVersion(e){return ou.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ou.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ou.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),ou.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Dh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ou.resolve()}updateTargetData(e,t){return this.Fn(t),ou.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ou.resolve()}removeTargets(e,t,n){let a=0;const r=[];return this.xs.forEach((i,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(i),r.push(this.removeMatchingKeysForTargetId(e,s.targetId)),a++)}),ou.waitFor(r).next(()=>a)}getTargetCount(e){return ou.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return ou.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),ou.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const a=this.persistence.referenceDelegate,r=[];return a&&t.forEach(t=>{r.push(a.markPotentiallyOrphaned(e,t))}),ou.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ou.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return ou.resolve(n)}containsKey(e,t){return ou.resolve(this.ks.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){this.$s={},this.overlays={},this.Os=new uu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new zh(this),this.indexManager=new Nh,this.remoteDocumentCache=new $h(e=>this.referenceDelegate.Ls(e)),this.serializer=new Th(t),this.qs=new Oh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Uh(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){xl("MemoryPersistence","Starting transaction:",e);const a=new Hh(this.Os.next());return this.referenceDelegate.Us(),n(a).next(e=>this.referenceDelegate.Ks(a).next(()=>e)).toPromise().then(e=>(a.raiseOnCommittedEvent(),e))}Gs(e,t){return ou.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Hh extends iu{constructor(e){super(),this.currentSequenceNumber=e}}class Kh{constructor(e){this.persistence=e,this.Qs=new Fh,this.js=null}static zs(e){return new Kh(e)}get Ws(){if(this.js)return this.js;throw Vl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),ou.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),ou.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ou.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ou.forEach(this.Ws,n=>{const a=tu.fromPath(n);return this.Hs(e,a).next(e=>{e||t.removeEntry(a,Yl.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ou.or([()=>ou.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=a}static Li(e,t){let n=Qc(),a=Qc();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:a=a.add(r.doc.key)}return new Gh(e,t.fromCache,n,a)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,a){return this.Ki(e,t).next(r=>r||this.Gi(e,t,a,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Cc(t))return ou.resolve(null);let n=Ac(t);return this.indexManager.getIndexType(e,n).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Vc(t,null,"F"),n=Ac(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const r=Qc(...a);return this.Ui.getDocuments(e,r).next(a=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,a);return this.zi(t,i,r,n.readTime)?this.Ki(e,Vc(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,a){return Cc(t)||a.isEqual(Yl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(r=>{const i=this.ji(t,r);return this.zi(t,i,n,a)?this.Qi(e,t):(El()<=In.DEBUG&&xl("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Rc(t)),this.Wi(e,i,t,function(e,t){const n=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,r=Yl.fromTimestamp(1e9===a?new Ql(n+1,0):new Ql(n,a));return new au(r,tu.empty(),t)}(a,-1)))})}ji(e,t){let n=new yu(Oc(e));return t.forEach((t,a)=>{Pc(e,a)&&(n=n.add(a))}),n}zi(e,t,n,a){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(a)>0)}Qi(e,t){return El()<=In.DEBUG&&xl("QueryEngine","Using full collection scan to execute query:",Rc(t)),this.Ui.getDocumentsMatchingQuery(e,t,au.min())}Wi(e,t,n,a){return this.Ui.getDocumentsMatchingQuery(e,n,a).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,n,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new vu(Gl),this.Yi=new Fc(e=>bc(e),wc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ph(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}async function Yh(e,t){const n=Ml(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let a;return n.mutationQueue.getAllMutationBatches(e).next(r=>(a=r,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let s=Qc();for(const e of a){r.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:r,addedBatchIds:i}))})})}function Xh(e){const t=Ml(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Jh(e,t){const n=Ml(e),a=t.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const s=[];t.targetChanges.forEach((i,o)=>{const l=r.get(o);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);var c,d,h;null!==t.targetMismatches.get(o)?u=u.withResumeToken(Iu.EMPTY_BYTE_STRING,Yl.min()).withLastLimboFreeSnapshotVersion(Yl.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,a)),r=r.insert(o,u),d=u,h=i,(0===(c=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&s.push(n.Bs.updateTargetData(e,u))});let o=Uc(),l=Qc();if(t.documentUpdates.forEach(a=>{t.resolvedLimboDocuments.has(a)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,a))}),s.push(function(e,t,n){let a=Qc(),r=Qc();return n.forEach(e=>a=a.add(e)),t.getEntries(e,a).next(e=>{let a=Uc();return n.forEach((n,i)=>{const s=e.get(n);i.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(Yl.min())?(t.removeEntry(n,i.readTime),a=a.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),a=a.insert(n,i)):xl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),{nr:a,sr:r}})}(e,i,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!a.isEqual(Yl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,a));s.push(t)}return ou.waitFor(s).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=r,e))}function Zh(e,t){const n=Ml(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function ep(e,t,n){const a=Ml(e),r=a.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",i,e=>a.persistence.referenceDelegate.removeTarget(e,r))}catch(s){if(!lu(s))throw s;xl("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}a.Ji=a.Ji.remove(t),a.Yi.delete(r.target)}function tp(e,t,n){const a=Ml(e);let r=Yl.min(),i=Qc();return a.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const a=Ml(e),r=a.Yi.get(n);return void 0!==r?ou.resolve(a.Ji.get(r)):a.Bs.getTargetData(t,n)}(a,e,Ac(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>a.Hi.getDocumentsMatchingQuery(e,t,n?r:Yl.min(),n?i:Qc())).next(e=>(function(e,t,n){let a=e.Xi.get(t)||Yl.min();n.forEach((e,t)=>{t.readTime.compareTo(a)>0&&(a=t.readTime)}),e.Xi.set(t,a)}(a,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:i})))}class np{constructor(){this.activeTargetIds=Yc}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ap{constructor(){this.Hr=new np,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new np,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{Yr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp=null;function op(){return null===sp?sp=268435456+Math.round(2147483648*Math.random()):sp++,"0x"+sp.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="WebChannelConnection";class dp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,a,r){const i=op(),s=this.To(e,t);xl("RestConnection",`Sending RPC '${e}' ${i}:`,s,n);const o={};return this.Eo(o,a,r),this.Ao(e,s,o,n).then(t=>(xl("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw Al("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",s,"request:",n),t})}vo(e,t,n,a,r,i){return this.Io(e,t,n,a,r)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=lp[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,a){const r=op();return new Promise((i,s)=>{const o=new bl;o.setWithCredentials(!0),o.listenOnce(pl.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case hl.NO_ERROR:const t=o.getResponseJson();xl(cp,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),i(t);break;case hl.TIMEOUT:xl(cp,`RPC '${e}' ${r} timed out`),s(new Pl(Rl.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const n=o.getStatus();if(xl(cp,`RPC '${e}' ${r} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rl).indexOf(t)>=0?t:Rl.UNKNOWN}(t.status);s(new Pl(e,t.message))}else s(new Pl(Rl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Pl(Rl.UNAVAILABLE,"Connection failed."));break;default:Vl()}}finally{xl(cp,`RPC '${e}' ${r} completed.`)}});const l=JSON.stringify(a);xl(cp,`RPC '${e}' ${r} sending request:`,a),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const a=op(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new jo,s=Bi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new gl({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=r.join("");xl(cp,`Creating RPC '${e}' stream ${a}: ${u}`,o);const c=i.createWebChannel(u,o);let d=!1,h=!1;const p=new up({ro:t=>{h?xl(cp,`Not sending because RPC '${e}' stream ${a} is closed:`,t):(d||(xl(cp,`Opening RPC '${e}' stream ${a} transport.`),c.open(),d=!0),xl(cp,`RPC '${e}' stream ${a} sending:`,t),c.send(t))},oo:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(c,yl.EventType.OPEN,()=>{h||xl(cp,`RPC '${e}' stream ${a} transport opened.`)}),f(c,yl.EventType.CLOSE,()=>{h||(h=!0,xl(cp,`RPC '${e}' stream ${a} transport closed`),p.wo())}),f(c,yl.EventType.ERROR,t=>{h||(h=!0,Al(cp,`RPC '${e}' stream ${a} transport errored:`,t),p.wo(new Pl(Rl.UNAVAILABLE,"The operation could not be completed")))}),f(c,yl.EventType.MESSAGE,t=>{var n;if(!h){const r=t.data[0];Dl(!!r);const i=r,s=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){xl(cp,`RPC '${e}' stream ${a} received error:`,s);const t=s.status;let n=function(e){const t=Md[e];if(void 0!==t)return Pd(t)}(t),r=s.message;void 0===n&&(n=Rl.INTERNAL,r="Unknown error status: "+t+" with message "+s.message),h=!0,p.wo(new Pl(n,r)),c.close()}else xl(cp,`RPC '${e}' stream ${a} received:`,r),p._o(r)}}),f(s,fl.STAT_EVENT,t=>{t.stat===vl?xl(cp,`RPC '${e}' stream ${a} detected buffering proxy`):t.stat===ml&&xl(cp,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function hp(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(e){return new th(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,n=1e3,a=1.5,r=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=a,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-n);a>0&&xl("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,n,a,r,i,s,o){this.ii=e,this.$o=n,this.Oo=a,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new fp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Rl.RESOURCE_EXHAUSTED?(Tl(t.toString()),Tl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Rl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new Pl(Rl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return xl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mp extends vp{constructor(e,t,n,a,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,i),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(a=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===a?1:"REMOVE"===a?2:"CURRENT"===a?3:"RESET"===a?4:Vl(),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Dl(void 0===t||"string"==typeof t),Iu.fromBase64String(t||"")):(Dl(void 0===t||t instanceof Uint8Array),Iu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Rl.UNKNOWN:Pd(e.code);return new Pl(t,e.message||"")}(o);n=new Gd(r,i,s,l||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const r=ch(e,a.document.name),i=sh(a.document.updateTime),s=a.document.createTime?sh(a.document.createTime):Yl.min(),o=new Gu({mapValue:{fields:a.document.fields}}),l=Qu.newFoundDocument(r,i,s,o),u=a.targetIds||[],c=a.removedTargetIds||[];n=new Hd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const r=ch(e,a.document),i=a.readTime?sh(a.readTime):Yl.min(),s=Qu.newNoDocument(r,i),o=a.removedTargetIds||[];n=new Hd([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const r=ch(e,a.document),i=a.removedTargetIds||[];n=new Hd([],i,r,null)}else{if(!("filter"in t))return Vl();{t.filter;const e=t.filter;e.targetId;const{count:a=0,unchangedNames:r}=e,i=new Dd(a,r),s=e.targetId;n=new Kd(s,i)}}var a;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Yl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Yl.min():t.readTime?sh(t.readTime):Yl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=hh(this.serializer),t.addTarget=function(e,t){let n;const a=t.target;if(n=_c(a)?{documents:vh(e,a)}:{query:mh(e,a)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=rh(e,t.resumeToken);const a=nh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}else if(t.snapshotVersion.compareTo(Yl.min())>0){n.readTime=ah(e,t.snapshotVersion.toTimestamp());const a=nh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=hh(this.serializer),t.removeTarget=e,this.Wo(t)}}class gp extends vp{constructor(e,t,n,a,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,i),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Dl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Dl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?sh(e.updateTime):sh(t);return n.isEqual(Yl.min())&&(n=sh(t)),new pd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=sh(e.commitTime);return this.listener.cu(n,t)}return Dl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Id)n={update:fh(e,t.key,t.value)};else if(t instanceof xd)n={delete:uh(e,t.key)};else if(t instanceof Sd)n={update:fh(e,t.key,t.data),updateMask:kh(t.fieldMask)};else{if(!(t instanceof Td))return Vl();n={verify:uh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof rd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof id)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof od)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ud)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Vl()}(0,e))),t.precondition.isNone||(n.currentDocument=(a=e,void 0!==(r=t.precondition).updateTime?{updateTime:ih(a,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Vl())),n;var a,r}(this.serializer,e))};this.Wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends class{}{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Pl(Rl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Io(e,t,n,a,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Rl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pl(Rl.UNKNOWN,e.toString())})}vo(e,t,n,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.vo(e,t,n,r,i,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Rl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pl(Rl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class bp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Tl(t),this.mu=!1):xl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,n,a,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Ap(this)&&(xl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ml(e);t.vu.add(4),await Ip(t),t.bu.set("Unknown"),t.vu.delete(4),await _p(t)}(this))})}),this.bu=new bp(n,a)}}async function _p(e){if(Ap(e))for(const t of e.Ru)await t(!0)}async function Ip(e){for(const t of e.Ru)await t(!1)}function Sp(e,t){const n=Ml(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Tp(n)?xp(n):Kp(n).Ko()&&kp(n,t))}function Cp(e,t){const n=Ml(e),a=Kp(n);n.Au.delete(t),a.Ko()&&Ep(n,t),0===n.Au.size&&(a.Ko()?a.jo():Ap(n)&&n.bu.set("Unknown"))}function kp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Kp(e).su(t)}function Ep(e,t){e.Vu.qt(t),Kp(e).iu(t)}function xp(e){e.Vu=new Qd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Kp(e).start(),e.bu.gu()}function Tp(e){return Ap(e)&&!Kp(e).Uo()&&e.Au.size>0}function Ap(e){return 0===Ml(e).vu.size}function Np(e){e.Vu=void 0}async function Vp(e){e.Au.forEach((t,n)=>{kp(e,t)})}async function Dp(e,t){Np(e),Tp(e)?(e.bu.Iu(t),xp(e)):e.bu.set("Unknown")}async function Mp(e,t,n){if(e.bu.set("Online"),t instanceof Gd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const a of t.targetIds)e.Au.has(a)&&(await e.remoteSyncer.rejectListen(a,n),e.Au.delete(a),e.Vu.removeTarget(a))}(e,t)}catch(a){xl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Rp(e,a)}else if(t instanceof Hd?e.Vu.Ht(t):t instanceof Kd?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Yl.min()))try{const t=await Xh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,a)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Au.get(a);r&&e.Au.set(a,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const a=e.Au.get(t);if(!a)return;e.Au.set(t,a.withResumeToken(Iu.EMPTY_BYTE_STRING,a.snapshotVersion)),Ep(e,t);const r=new xh(a.target,t,n,a.sequenceNumber);kp(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(r){xl("RemoteStore","Failed to raise snapshot:",r),await Rp(e,r)}}async function Rp(e,t,n){if(!lu(t))throw t;e.vu.add(1),await Ip(e),e.bu.set("Offline"),n||(n=()=>Xh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await _p(e)})}function Pp(e,t){return t().catch(n=>Rp(e,n,t))}async function Op(e){const t=Ml(e),n=Gp(t);let a=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Lp(t);)try{const e=await Zh(t.localStore,a);if(null===e){0===t.Eu.length&&n.jo();break}a=e.batchId,Fp(t,e)}catch(r){await Rp(t,r)}Bp(t)&&Up(t)}function Lp(e){return Ap(e)&&e.Eu.length<10}function Fp(e,t){e.Eu.push(t);const n=Gp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Bp(e){return Ap(e)&&!Gp(e).Uo()&&e.Eu.length>0}function Up(e){Gp(e).start()}async function $p(e){Gp(e).hu()}async function jp(e){const t=Gp(e);for(const n of e.Eu)t.uu(n.mutations)}async function zp(e,t,n){const a=e.Eu.shift(),r=Nd.from(a,t,n);await Pp(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Op(e)}async function qp(e,t){t&&Gp(e).ou&&await async function(e,t){if(function(e){switch(e){default:return Vl();case Rl.CANCELLED:case Rl.UNKNOWN:case Rl.DEADLINE_EXCEEDED:case Rl.RESOURCE_EXHAUSTED:case Rl.INTERNAL:case Rl.UNAVAILABLE:case Rl.UNAUTHENTICATED:return!1;case Rl.INVALID_ARGUMENT:case Rl.NOT_FOUND:case Rl.ALREADY_EXISTS:case Rl.PERMISSION_DENIED:case Rl.FAILED_PRECONDITION:case Rl.ABORTED:case Rl.OUT_OF_RANGE:case Rl.UNIMPLEMENTED:case Rl.DATA_LOSS:return!0}}(n=t.code)&&n!==Rl.ABORTED){const n=e.Eu.shift();Gp(e).Qo(),await Pp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Op(e)}var n}(e,t),Bp(e)&&Up(e)}async function Hp(e,t){const n=Ml(e);n.asyncQueue.verifyOperationInProgress(),xl("RemoteStore","RemoteStore received new credentials");const a=Ap(n);n.vu.add(3),await Ip(n),a&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await _p(n)}function Kp(e){return e.Su||(e.Su=function(e,t,n){const a=Ml(e);return a.fu(),new mp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,n)}(e.datastore,e.asyncQueue,{uo:Vp.bind(null,e),ao:Dp.bind(null,e),nu:Mp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Tp(e)?xp(e):e.bu.set("Unknown")):(await e.Su.stop(),Np(e))})),e.Su}function Gp(e){return e.Du||(e.Du=function(e,t,n){const a=Ml(e);return a.fu(),new gp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,n)}(e.datastore,e.asyncQueue,{uo:$p.bind(null,e),ao:qp.bind(null,e),au:jp.bind(null,e),cu:zp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Op(e)):(await e.Du.stop(),e.Eu.length>0&&(xl("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Wp{constructor(e,t,n,a,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=r,this.deferred=new Ol,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,a,r){const i=Date.now()+n,s=new Wp(e,t,i,a,r);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pl(Rl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(e,t){if(Tl("AsyncQueue",`${t}: ${e}`),lu(e))return new Pl(Rl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||tu.comparator(t.key,n.key):(e,t)=>tu.comparator(e.key,t.key),this.keyedMap=jc(),this.sortedSet=new vu(this.comparator)}static emptySet(e){return new Yp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,a=n.getNext().key;if(!e.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Yp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Cu=new vu(tu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Vl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Jp{constructor(e,t,n,a,r,i,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,a,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Jp(e,t,Yp.emptySet(t),i,n,a,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.Nu=void 0,this.listeners=[]}}class ef{constructor(){this.queries=new Fc(e=>Mc(e),Dc),this.onlineState="Unknown",this.ku=new Set}}function tf(e,t){const n=Ml(e);let a=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(r)&&(a=!0);t.Nu=r}}a&&af(n)}function nf(e,t,n){const a=Ml(e),r=a.queries.get(t);if(r)for(const i of r.listeners)i.onError(n);a.queries.delete(t)}function af(e){e.ku.forEach(e=>{e.next()})}class rf{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.key=e}}class of{constructor(e){this.key=e}}class lf{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Qc(),this.mutatedKeys=Qc(),this.tc=Oc(e),this.ec=new Yp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Xp,a=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,i=a,s=!1;const o="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,l="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((e,t)=>{const u=a.get(e),c=Pc(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.rc(u,c)||(n.track({type:2,doc:c}),p=!0,(o&&this.tc(c,o)>0||l&&this.tc(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(o||l)&&(s=!0)),p&&(c?(i=i.add(c),r=h?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:s,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,o=s!==this.Xu;return this.Xu=s,0!==r.length||o?{snapshot:new Jp(this.query,e.ec,a,r,e.mutatedKeys,0===s,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Qc(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new of(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new sf(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Qc();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Jp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class uf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cf{constructor(e){this.key=e,this.fc=!1}}class df{constructor(e,t,n,a,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Fc(e=>Mc(e),Dc),this._c=new Map,this.mc=new Set,this.gc=new vu(tu.comparator),this.yc=new Map,this.Ic=new Fh,this.Tc={},this.Ec=new Map,this.Ac=Dh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function hf(e,t){const n=function(e){const t=Ml(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gf.bind(null,t),t.dc.nu=tf.bind(null,t.eventManager),t.dc.Pc=nf.bind(null,t.eventManager),t}(e);let a,r;const i=n.wc.get(t);if(i)a=i.targetId,n.sharedClientState.addLocalQueryTarget(a),r=i.view.lc();else{const e=await function(e,t){const n=Ml(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let a;return n.Bs.getTargetData(e,t).next(r=>r?(a=r,ou.resolve(a)):n.Bs.allocateTargetId(e).next(r=>(a=new xh(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,a).next(()=>a))))}).then(e=>{const a=n.Ji.get(e.targetId);return(null===a||e.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}(n.localStore,Ac(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);a=e.targetId,r=await async function(e,t,n,a,r){e.Rc=(t,n,a)=>async function(e,t,n,a){let r=t.view.sc(n);r.zi&&(r=await tp(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,r)));const i=a&&a.targetChanges.get(t.targetId),s=t.view.applyChanges(r,e.isPrimaryClient,i);return Cf(e,t.targetId,s.cc),s.snapshot}(e,t,n,a);const i=await tp(e.localStore,t,!0),s=new lf(t,i.ir),o=s.sc(i.documents),l=qd.createSynthesizedTargetChangeForCurrentChange(n,a&&"Offline"!==e.onlineState,r),u=s.applyChanges(o,e.isPrimaryClient,l);Cf(e,n,u.cc);const c=new uf(t,n,s);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}(n,t,a,"current"===i,e.resumeToken),n.isPrimaryClient&&Sp(n.remoteStore,e)}return r}async function pf(e,t){const n=Ml(e),a=n.wc.get(t),r=n._c.get(a.targetId);if(r.length>1)return n._c.set(a.targetId,r.filter(e=>!Dc(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await ep(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),Cp(n.remoteStore,a.targetId),If(n,a.targetId)}).catch(su)):(If(n,a.targetId),await ep(n.localStore,a.targetId,!0))}async function ff(e,t,n){const a=function(e){const t=Ml(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bf.bind(null,t),t}(e);try{const e=await function(e,t){const n=Ml(e),a=Ql.now(),r=t.reduce((e,t)=>e.add(t.key),Qc());let i,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Uc(),l=Qc();return n.Zi.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(r=>{i=r;const s=[];for(const e of t){const t=wd(e,i.get(e.key).overlayedDocument);null!=t&&s.push(new Sd(e.key,t,Wu(t.value.mapValue),fd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,a,s,t)}).next(t=>{s=t;const a=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,a)})}).then(()=>({batchId:s.batchId,changes:zc(i)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let a=e.Tc[e.currentUser.toKey()];a||(a=new vu(Gl)),a=a.insert(t,n),e.Tc[e.currentUser.toKey()]=a}(a,e.batchId,n),await xf(a,e.changes),await Op(a.remoteStore)}catch(r){const e=Qp(r,"Failed to persist write");n.reject(e)}}async function vf(e,t){const n=Ml(e);try{const e=await Jh(n.localStore,t);t.targetChanges.forEach((e,t)=>{const a=n.yc.get(t);a&&(Dl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?a.fc=!0:e.modifiedDocuments.size>0?Dl(a.fc):e.removedDocuments.size>0&&(Dl(a.fc),a.fc=!1))}),await xf(n,e,t)}catch(a){await su(a)}}function mf(e,t,n){const a=Ml(e);if(a.isPrimaryClient&&0===n||!a.isPrimaryClient&&1===n){const e=[];a.wc.forEach((n,a)=>{const r=a.view.Mu(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Ml(e);n.onlineState=t;let a=!1;n.queries.forEach((e,n)=>{for(const r of n.listeners)r.Mu(t)&&(a=!0)}),a&&af(n)}(a.eventManager,t),e.length&&a.dc.nu(e),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function gf(e,t,n){const a=Ml(e);a.sharedClientState.updateQueryState(t,"rejected",n);const r=a.yc.get(t),i=r&&r.key;if(i){let e=new vu(tu.comparator);e=e.insert(i,Qu.newNoDocument(i,Yl.min()));const n=Qc().add(i),r=new zd(Yl.min(),new Map,new vu(Gl),e,n);await vf(a,r),a.gc=a.gc.remove(i),a.yc.delete(t),Ef(a)}else await ep(a.localStore,t,!1).then(()=>If(a,t,n)).catch(su)}async function yf(e,t){const n=Ml(e),a=t.batch.batchId;try{const e=await function(e,t){const n=Ml(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const a=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,a){const r=n.batch,i=r.keys();let s=ou.resolve();return i.forEach(e=>{s=s.next(()=>a.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Dl(null!==i),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),a.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Qc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,a))})}(n.localStore,t);_f(n,a,null),wf(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await xf(n,e)}catch(r){await su(r)}}async function bf(e,t,n){const a=Ml(e);try{const e=await function(e,t){const n=Ml(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let a;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Dl(null!==t),a=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,a,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,a)).next(()=>n.localDocuments.getDocuments(e,a))})}(a.localStore,t);_f(a,t,n),wf(a,t),a.sharedClientState.updateMutationState(t,"rejected",n),await xf(a,e)}catch(r){await su(r)}}function wf(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function _f(e,t,n){const a=Ml(e);let r=a.Tc[a.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),a.Tc[a.currentUser.toKey()]=r}}function If(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const a of e._c.get(t))e.wc.delete(a),n&&e.dc.Pc(a,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Sf(e,t)})}function Sf(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Cp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Ef(e))}function Cf(e,t,n){for(const a of n)a instanceof sf?(e.Ic.addReference(a.key,t),kf(e,a)):a instanceof of?(xl("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||Sf(e,a.key)):Vl()}function kf(e,t){const n=t.key,a=n.path.canonicalString();e.gc.get(n)||e.mc.has(a)||(xl("SyncEngine","New document in limbo: "+n),e.mc.add(a),Ef(e))}function Ef(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new tu(Jl.fromString(t)),a=e.Ac.next();e.yc.set(a,new cf(n)),e.gc=e.gc.insert(n,a),Sp(e.remoteStore,new xh(Ac(Sc(n.path)),a,"TargetPurposeLimboResolution",uu.ct))}}async function xf(e,t,n){const a=Ml(e),r=[],i=[],s=[];a.wc.isEmpty()||(a.wc.forEach((e,o)=>{s.push(a.Rc(o,t,n).then(e=>{if((e||n)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=Gh.Li(o.targetId,e);i.push(t)}}))}),await Promise.all(s),a.dc.nu(r),await async function(e,t){const n=Ml(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ou.forEach(t,t=>ou.forEach(t.Fi,a=>n.persistence.referenceDelegate.addReference(e,t.targetId,a)).next(()=>ou.forEach(t.Bi,a=>n.persistence.referenceDelegate.removeReference(e,t.targetId,a)))))}catch(a){if(!lu(a))throw a;xl("LocalStore","Failed to update sequence numbers: "+a)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),a=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(a);n.Ji=n.Ji.insert(e,r)}}}(a.localStore,i))}async function Tf(e,t){const n=Ml(e);if(!n.currentUser.isEqual(t)){xl("SyncEngine","User change. New user:",t.toKey());const e=await Yh(n.localStore,t);n.currentUser=t,(a=n).Ec.forEach(e=>{e.forEach(e=>{e.reject(new Pl(Rl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xf(n,e.er)}var a}function Af(e,t){const n=Ml(e),a=n.yc.get(t);if(a&&a.fc)return Qc().add(a.key);{let e=Qc();const a=n._c.get(t);if(!a)return e;for(const t of a){const a=n.wc.get(t);e=e.unionWith(a.view.nc)}return e}}class Nf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,a){return new Qh(e,t,n,a)}(this.persistence,new Wh,e.initialUser,this.serializer)}createPersistence(e){return new qh(Kh.zs,this.serializer)}createSharedClientState(e){return new ap}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tf.bind(null,this.syncEngine),await async function(e,t){const n=Ml(e);t?(n.vu.delete(2),await _p(n)):t||(n.vu.add(2),await Ip(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ef}createDatastore(e){const t=pp(e.databaseInfo.databaseId),n=(a=e.databaseInfo,new dp(a));var a,r,i;return r=e.authCredentials,i=e.appCheckCredentials,new yp(r,i,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,a=e.asyncQueue,r=e=>mf(this.syncEngine,e,0),i=ip.D()?new ip:new rp,new wp(t,n,a,r,i);var t,n,a,r,i}createSyncEngine(e,t){return function(e,t,n,a,r,i,s){const o=new df(e,t,n,a,r,i);return s&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ml(e);xl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ip(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Tl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,n,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=a,this.user=Sl.UNAUTHENTICATED,this.clientId=Kl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{xl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(xl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pl(Rl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ol;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Rf(e,t){e.asyncQueue.verifyOperationInProgress(),xl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let a=n.initialUser;e.setCredentialChangeListener(async e=>{a.isEqual(e)||(await Yh(t.localStore,e),a=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Pf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xl("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rf(e,e._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!function(e){return"FirebaseError"===e.name?e.code===Rl.FAILED_PRECONDITION||e.code===Rl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(a))throw a;Al("Error using user provided cache. Falling back to memory cache: "+a),await Rf(e,new Nf)}}else xl("FirestoreClient","Using default OfflineComponentProvider"),await Rf(e,new Nf);return e._offlineComponents}(e);xl("FirestoreClient","Initializing OnlineComponentProvider");const a=await e.getConfiguration();await t.initialize(n,a),e.setCredentialChangeListener(e=>Hp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Hp(t.remoteStore,n)),e._onlineComponents=t}async function Of(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xl("FirestoreClient","Using user provided OnlineComponentProvider"),await Pf(e,e._uninitializedComponentsProvider._online)):(xl("FirestoreClient","Using default OnlineComponentProvider"),await Pf(e,new Vf))),e._onlineComponents}async function Lf(e){const t=await Of(e),n=t.eventManager;return n.onListen=hf.bind(null,t.syncEngine),n.onUnlisten=pf.bind(null,t.syncEngine),n}function Ff(e,t,n={}){const a=new Ol;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,a,r){const i=new Df({next:n=>{t.enqueueAndForget(()=>async function(e,t){const n=Ml(e),a=t.query;let r=!1;const i=n.queries.get(a);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),r=0===i.listeners.length)}if(r)return n.queries.delete(a),n.onUnlisten(a)}(e,s)),n.fromCache&&"server"===a.source?r.reject(new Pl(Rl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),s=new rf(n,i,{includeMetadataChanges:!0,Ku:!0});return async function(t,n){const a=Ml(t),r=n.query;let i=!1,s=a.queries.get(r);if(s||(i=!0,s=new Zp),i)try{s.Nu=await a.onListen(r)}catch(e){const a=Qp(e,`Initialization of query '${Rc(n.query)}' failed`);return void n.onError(a)}a.queries.set(r,s),s.listeners.push(n),n.Mu(a.onlineState),s.Nu&&n.$u(s.Nu)&&af(a)}(e,s)}(await Lf(e),e.asyncQueue,t,n,a)),a.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Bf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Uf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(e,t,n){if(!n)throw new Pl(Rl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jf(e){if(!tu.isDocumentKey(e))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function zf(e){if(tu.isDocumentKey(e))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Vl()}function Hf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pl(Rl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qf(e);throw new Pl(Rl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Pl(Rl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pl(Rl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,a){if(!0===t&&!0===a)throw new Pl(Rl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Pl(Rl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Pl(Rl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Pl(Rl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Gf{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pl(Rl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pl(Rl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fl;switch(e.type){case"firstParty":return new jl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Pl(Rl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Uf.get(e);t&&(xl("ComponentProvider","Removing Datastore"),Uf.delete(e),t.terminate())}(this),Promise.resolve()}}function Wf(e,t,n,a={}){var r;const i=(e=Hf(e,Gf))._getSettings(),s=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==s&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:s,ssl:!1})),a.mockUserToken){let t,n;if("string"==typeof a.mockUserToken)t=a.mockUserToken,n=Sl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",a=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Wt(JSON.stringify({alg:"none",type:"JWT"})),Wt(JSON.stringify(i)),""].join(".")}(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const i=a.mockUserToken.sub||a.mockUserToken.user_id;if(!i)throw new Pl(Rl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sl(i)}e._authCredentials=new Bl(new Ll(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qf(this.firestore,e,this._key)}}class Yf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yf(this.firestore,e,this._query)}}class Xf extends Yf{constructor(e,t,n){super(e,t,Sc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qf(this.firestore,null,new tu(e))}withConverter(e){return new Xf(this.firestore,e,this._path)}}function Jf(e,t,...n){if(e=mn(e),$f("collection","path",t),e instanceof Gf){const a=Jl.fromString(t,...n);return zf(a),new Xf(e,null,a)}{if(!(e instanceof Qf||e instanceof Xf))throw new Pl(Rl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Jl.fromString(t,...n));return zf(a),new Xf(e.firestore,null,a)}}function Zf(e,t){if(e=Hf(e,Gf),$f("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pl(Rl.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yf(e,null,(n=t,new Ic(Jl.emptyPath(),n)));var n}function ev(e,t,...n){if(e=mn(e),1===arguments.length&&(t=Kl.A()),$f("doc","path",t),e instanceof Gf){const a=Jl.fromString(t,...n);return jf(a),new Qf(e,null,new tu(a))}{if(!(e instanceof Qf||e instanceof Xf))throw new Pl(Rl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Jl.fromString(t,...n));return jf(a),new Qf(e.firestore,e instanceof Xf?e.converter:null,new tu(a))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new fp(this,"async_queue_retry"),this.Xc=()=>{const e=hp();e&&xl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=hp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=hp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ol;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!lu(e))throw e;xl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;throw Tl("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Wp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(a),a}Zc(){this.Wc&&Vl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class nv extends Gf{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new tv,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iv(this),this._firestoreClient.terminate()}}function av(e,t){const n="string"==typeof e?e:"(default)",a=Ea("object"==typeof e?e:Va(),"firestore").getImmediate({identifier:n});if(!a._initialized){const e=(e=>{const t=en(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),a]:[t.substring(0,n),a]})("firestore");e&&Wf(a,...e)}return a}function rv(e){return e._firestoreClient||iv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function iv(e){var t,n,a;const r=e._freezeSettings(),i=(s=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,new Nu(s,o,l,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Bf(u.experimentalLongPollingOptions),u.useFetchStreams));var s,o,l,u;e._firestoreClient=new Mf(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(a=r.cache)||void 0===a?void 0:a._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sv(Iu.fromBase64String(e))}catch(t){throw new Pl(Rl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sv(Iu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pl(Rl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eu(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pl(Rl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pl(Rl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gl(this._lat,e._lat)||Gl(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=/^__.*__$/;class dv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Id(e,this.data,t,this.fieldTransforms)}}class hv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vl()}}class fv{constructor(e,t,n,a,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:n,la:!1});return a.fa(e),a}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:n,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Av(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(pv(this.ca)&&cv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||pp(e)}ya(e,t,n,a=!1){return new fv({ca:e,methodName:t,ga:n,path:eu.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mv(e){const t=e._freezeSettings(),n=pp(e._databaseId);return new vv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gv(e,t,n,a,r,i={}){const s=e.ya(i.merge||i.mergeFields?2:0,t,n,r);kv("Data must be an object, but it was:",s,a);const o=Sv(a,s);let l,u;if(i.merge)l=new wu(s.fieldMask),u=s.fieldTransforms;else if(i.mergeFields){const e=[];for(const a of i.mergeFields){const r=Ev(t,a,n);if(!s.contains(r))throw new Pl(Rl.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Nv(e,r)||e.push(r)}l=new wu(e),u=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=s.fieldTransforms;return new dv(new Gu(o),l,u)}class yv extends lv{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yv}}class bv extends lv{_toFieldTransform(e){return new hd(e.path,new rd)}isEqual(e){return e instanceof bv}}function wv(e,t,n,a){const r=e.ya(1,t,n);kv("Data must be an object, but it was:",r,a);const i=[],s=Gu.empty();pu(a,(e,a)=>{const o=Tv(t,e,n);a=mn(a);const l=r.da(o);if(a instanceof yv)i.push(o);else{const e=Iv(a,l);null!=e&&(i.push(o),s.set(o,e))}});const o=new wu(i);return new hv(s,o,r.fieldTransforms)}function _v(e,t,n,a,r,i){const s=e.ya(1,t,n),o=[Ev(t,a,n)],l=[r];if(i.length%2!=0)throw new Pl(Rl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(Ev(t,i[h])),l.push(i[h+1]);const u=[],c=Gu.empty();for(let h=o.length-1;h>=0;--h)if(!Nv(u,o[h])){const e=o[h];let t=l[h];t=mn(t);const n=s.da(e);if(t instanceof yv)u.push(e);else{const a=Iv(t,n);null!=a&&(u.push(e),c.set(e,a))}}const d=new wu(u);return new hv(c,d,s.fieldTransforms)}function Iv(e,t){if(Cv(e=mn(e)))return kv("Unsupported field value:",t,e),Sv(e,t);if(e instanceof lv)return function(e,t){if(!pv(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let a=0;for(const r of e){let e=Iv(r,t.wa(a));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),a++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=mn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ql.fromDate(e);return{timestampValue:ah(t.serializer,n)}}if(e instanceof Ql){const n=new Ql(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ah(t.serializer,n)}}if(e instanceof uv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sv)return{bytesValue:rh(t.serializer,e._byteString)};if(e instanceof Qf){const n=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(n))throw t._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:oh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${qf(e)}`)}(e,t)}function Sv(e,t){const n={};return fu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pu(e,(e,a)=>{const r=Iv(a,t.ha(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Cv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ql||e instanceof uv||e instanceof sv||e instanceof Qf||e instanceof lv)}function kv(e,t,n){if(!Cv(n)||("object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a))){const a=qf(n);throw"an object"===a?t._a(e+" a custom object"):t._a(e+" "+a)}var a}function Ev(e,t,n){if((t=mn(t))instanceof ov)return t._internalPath;if("string"==typeof t)return Tv(e,t);throw Av("Field path arguments must be of type string or ",e,!1,void 0,n)}const xv=new RegExp("[~\\*/\\[\\]]");function Tv(e,t,n){if(t.search(xv)>=0)throw Av(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ov(...t.split("."))._internalPath}catch(a){throw Av(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Av(e,t,n,a,r){const i=a&&!a.isEmpty(),s=void 0!==r;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${a}`),s&&(l+=` in document ${r}`),l+=")"),new Pl(Rl.INVALID_ARGUMENT,o+e+l)}function Nv(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,n,a,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Qf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dv extends Vv{data(){return super.data()}}function Mv(e,t){return"string"==typeof t?Tv(e,t):t instanceof ov?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{}class Pv extends Rv{}function Ov(e,t,...n){let a=[];t instanceof Rv&&a.push(t),a=a.concat(n),function(e){const t=e.filter(e=>e instanceof Bv).length,n=e.filter(e=>e instanceof Lv).length;if(t>1||t>0&&n>0)throw new Pl(Rl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const r of a)e=r._apply(e);return e}class Lv extends Pv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Lv(e,t,n)}_apply(e){const t=this._parse(e);return qv(e._query,t),new Yf(e.firestore,e.converter,Nc(e._query,t))}_parse(e){const t=mv(e.firestore),n=function(e,t,n,a,r,i,s){let o;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Pl(Rl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){zv(s,i);const t=[];for(const n of s)t.push(jv(a,e,n));o={arrayValue:{values:t}}}else o=jv(a,e,s)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||zv(s,i),o=function(e,t,n,a=!1){return Iv(n,e.ya(a?4:3,t))}(n,"where",s,"in"===i||"not-in"===i);return nc.create(r,i,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Fv(e,t,n){const a=t,r=Mv("where",e);return Lv._create(r,a,n)}class Bv extends Rv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ac.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const a=t.getFlattenedFilters();for(const r of a)qv(n,r),n=Nc(n,r)}(e._query,t),new Yf(e.firestore,e.converter,Nc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Uv extends Pv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Pl(Rl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pl(Rl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Zu(t,n);return function(e,t){if(null===kc(e)){const n=Ec(e);null!==n&&Hv(e,n,t.field)}}(e,a),a}(e._query,this._field,this._direction);return new Yf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ic(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function $v(e,t="asc"){const n=t,a=Mv("orderBy",e);return Uv._create(a,n)}function jv(e,t,n){if("string"==typeof(n=mn(n))){if(""===n)throw new Pl(Rl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xc(t)&&-1!==n.indexOf("/"))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=t.path.child(Jl.fromString(n));if(!tu.isDocumentKey(a))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Uu(e,new tu(a))}if(n instanceof Qf)return Uu(e,n._key);throw new Pl(Rl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(n)}.`)}function zv(e,t){if(!Array.isArray(e)||0===e.length)throw new Pl(Rl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qv(e,t){if(t.isInequality()){const n=Ec(e),a=t.field;if(null!==n&&!n.isEqual(a))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${a.toString()}'`);const r=kc(e);null!==r&&Hv(e,a,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Pl(Rl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Pl(Rl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Hv(e,t,n){if(!n.isEqual(t))throw new Pl(Rl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Kv{convertValue(e,t="none"){switch(Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ku(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return pu(e,(e,a)=>{n[e]=this.convertValue(a,t)}),n}convertGeoPoint(e){return new uv(ku(e.latitude),ku(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Tu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=Cu(e);return new Ql(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Jl.fromString(e);Dl(Eh(n));const a=new Vu(n.get(1),n.get(3)),r=new tu(n.popFirst(5));return a.isEqual(t)||Tl(`Document ${r} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e,t,n){let a;return a=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,a
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Wv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qv extends Vv{constructor(e,t,n,a,r,i){super(e,t,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Mv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Yv extends Qv{data(e={}){return super.data(e)}}class Xv{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Wv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Yv(this._firestore,this._userDataWriter,n.key,n,new Wv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pl(Rl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const a=new Yv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Wv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:a,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const a=new Yv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Wv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Jv(t.type),doc:a,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Jv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vl()}}class Zv extends Kv{constructor(e){super(),this.firestore=e}convertBytes(e){return new sv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qf(this.firestore,null,t)}}function em(e){e=Hf(e,Yf);const t=Hf(e.firestore,nv),n=rv(t),a=new Zv(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pl(Rl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Ff(n,e._query).then(n=>new Xv(t,a,e,n))}function tm(e,t,n,...a){e=Hf(e,Qf);const r=Hf(e.firestore,nv),i=mv(r);let s;return s="string"==typeof(t=mn(t))||t instanceof ov?_v(i,"updateDoc",e._key,t,n,a):wv(i,"updateDoc",e._key,t),rm(r,[s.toMutation(e._key,fd.exists(!0))])}function nm(e){return rm(Hf(e.firestore,nv),[new xd(e._key,fd.none())])}function am(e,t){const n=Hf(e.firestore,nv),a=ev(e),r=Gv(e.converter,t);return rm(n,[gv(mv(e.firestore),"addDoc",a._key,r,null!==e.converter,{}).toMutation(a._key,fd.exists(!1))]).then(()=>a)}function rm(e,t){return function(e,t){const n=new Ol;return e.asyncQueue.enqueueAndForget(async()=>ff(await function(e){return Of(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(rv(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mv(e)}set(e,t,n){this._verifyNotCommitted();const a=sm(e,this._firestore),r=Gv(a.converter,t,n),i=gv(this._dataReader,"WriteBatch.set",a._key,r,null!==a.converter,n);return this._mutations.push(i.toMutation(a._key,fd.none())),this}update(e,t,n,...a){this._verifyNotCommitted();const r=sm(e,this._firestore);let i;return i="string"==typeof(t=mn(t))||t instanceof ov?_v(this._dataReader,"WriteBatch.update",r._key,t,n,a):wv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,fd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sm(e,this._firestore);return this._mutations=this._mutations.concat(new xd(t._key,fd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pl(Rl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sm(e,t){if((e=mn(e)).firestore!==t)throw new Pl(Rl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function om(){return new bv("serverTimestamp")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(e){return rv(e=Hf(e,nv)),new im(e,t=>rm(e,t))}function um(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}function cm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(e,t=!0){Cl=Aa,ka(new gn("firestore",(e,{instanceIdentifier:n,options:a})=>{const r=e.getProvider("app").getImmediate(),i=new nv(new Ul(e.getProvider("auth-internal")),new ql(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pl(Rl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(e.options.projectId,t)}(r,n),r);return a=Object.assign({useFetchStreams:t},a),i._setSettings(a),i},"PUBLIC").setMultipleInstances(!0)),Ma(Il,"3.13.0",e),Ma(Il,"3.13.0","esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const dm=cm,hm=new on("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pm=new Tn("@firebase/auth");function fm(e,...t){pm.logLevel<=In.ERROR&&pm.error(`Auth (${Aa}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,...t){throw gm(e,...t)}function mm(e,...t){return gm(e,...t)}function gm(e,...t){if("string"!=typeof e){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return hm.create(e,...t)}function ym(e,t,...n){if(!e)throw gm(t,...n)}function bm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fm(t),new Error(t)}function wm(e,t){e||bm(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Im(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Im()&&"https:"!==Im()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cm{constructor(e,t){this.shortDelay=e,this.longDelay=t,wm(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Sm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(e,t){wm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void bm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void bm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void bm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Tm=new Cm(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Nm(e,t,n,a,r={}){return Vm(e,r,async()=>{let r={},i={};a&&("GET"===t?i=a:r={body:JSON.stringify(a)});const s=hn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),Em.fetch()(Dm(e,e.config.apiHost,n,s),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},r))})}async function Vm(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},xm),t);try{const t=new Mm(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw Rm(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rm(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Rm(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Rm(e,"user-disabled",i);const o=a[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw function(e,t,n){const a=Object.assign(Object.assign({},dm()),{[t]:n});return new on("auth","Firebase",a).create(t,{appName:e.name})}(e,o,s);vm(e,o)}}catch(r){if(r instanceof sn)throw r;vm(e,"network-request-failed",{message:String(r)})}}function Dm(e,t,n,a){const r=`${t}${n}?${a}`;return e.config.emulator?km(e.config,r):`${e.config.apiScheme}://${r}`}class Mm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(mm(this.auth,"network-request-failed")),Tm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rm(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=mm(e,t,a);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Om(e){return 1e3*Number(e)}function Lm(e){const[t,n,a]=e.split(".");if(void 0===t||void 0===n||void 0===a)return fm("JWT malformed, contained fewer than 3 sections"),null;try{const e=Qt(n);return e?JSON.parse(e):(fm("Failed to decode base64 JWT payload"),null)}catch(r){return fm("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Fm(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof sn&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}class Bm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pm(this.lastLoginAt),this.creationTime=Pm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(e){var t;const n=e.auth,a=await e.getIdToken(),r=await Fm(e,async function(e,t){return Nm(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:a}));ym(null==r?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=um(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,u=s,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&i.passwordHash||(null==o?void 0:o.length)),h=!!c&&d,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Um(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ym(e.idToken,"internal-error"),ym(void 0!==e.idToken,"internal-error"),ym(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Lm(e);return ym(t,"internal-error"),ym(void 0!==t.exp,"internal-error"),ym(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ym(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:r}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const n=await Vm(e,{},async()=>{const n=hn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:r}=e.config,i=Dm(e,a,"/v1/token",`key=${r}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Em.fetch()(i,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,a,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:r}=t,i=new jm;return n&&(ym("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),a&&(ym("string"==typeof a,"internal-error",{appName:e}),i.accessToken=a),r&&(ym("number"==typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jm,this.toJSON())}_performRefresh(){return bm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e,t){ym("string"==typeof e||void 0===e,"internal-error",{appName:t})}class qm{constructor(e){var{uid:t,auth:n,stsTokenManager:a}=e,r=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Um(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Fm(this,this.stsTokenManager.getToken(this.auth,e));return ym(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=mn(e),a=await n.getIdToken(t),r=Lm(a);ym(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i="object"==typeof r.firebase?r.firebase:void 0,s=null==i?void 0:i.sign_in_provider;return{claims:r,token:a,authTime:Pm(Om(r.auth_time)),issuedAtTime:Pm(Om(r.iat)),expirationTime:Pm(Om(r.exp)),signInProvider:s||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=mn(e);await $m(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ym(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ym(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $m(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Fm(this,async function(e,t){return Nm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,a,r,i,s,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(a=t.email)&&void 0!==a?a:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,v=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:I}=t;ym(y&&I,e,"internal-error");const S=jm.fromJSON(this.name,I);ym("string"==typeof y,e,"internal-error"),zm(c,e.name),zm(d,e.name),ym("boolean"==typeof b,e,"internal-error"),ym("boolean"==typeof w,e,"internal-error"),zm(h,e.name),zm(p,e.name),zm(f,e.name),zm(v,e.name),zm(m,e.name),zm(g,e.name);const C=new qm({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map(e=>Object.assign({},e))),v&&(C._redirectEventId=v),C}static async _fromIdTokenResponse(e,t,n=!1){const a=new jm;a.updateFromServerResponse(t);const r=new qm({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await $m(r),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new Map;function Km(e){wm(e instanceof Function,"Expected a class definition");let t=Hm.get(e);return t?(wm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hm.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gm.type="NONE";const Wm=Gm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(e,t,n){return`firebase:${e}:${t}:${n}`}class Ym{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:r}=this.auth;this.fullUserKey=Qm(this.userKey,a.apiKey,r),this.fullPersistenceKey=Qm("persistence",a.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ym(Km(Wm),e,n);const a=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=a[0]||Km(Wm);const i=Qm(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(i);if(t){const n=qm._fromJSON(e,t);u!==r&&(s=n),r=u;break}}catch(l){}const o=a.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],s&&await r._set(i,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(i)}catch(l){}})),new Ym(r,e,n)):new Ym(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ag(t))return"Blackberry";if(rg(t))return"Webos";if(Zm(t))return"Safari";if((t.includes("chrome/")||eg(t))&&!t.includes("edge/"))return"Chrome";if(ng(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Jm(e=rn()){return/firefox\//i.test(e)}function Zm(e=rn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eg(e=rn()){return/crios\//i.test(e)}function tg(e=rn()){return/iemobile/i.test(e)}function ng(e=rn()){return/android/i.test(e)}function ag(e=rn()){return/blackberry/i.test(e)}function rg(e=rn()){return/webos/i.test(e)}function ig(e=rn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sg(){return function(){const e=rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function og(e=rn()){return ig(e)||ng(e)||rg(e)||ag(e)||/windows phone/i.test(e)||tg(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function lg(e,t=[]){let n;switch(e){case"Browser":n=Xm(rn());break;case"Worker":n=`${Xm(rn())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${a}`}async function ug(e,t){return Nm(e,"GET","/v2/recaptchaConfig",Am(e,t))}function cg(e){return void 0!==e&&void 0!==e.enterprise}class dg{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(e){return new Promise((t,n)=>{const a=document.createElement("script");var r,i;a.setAttribute("src",e),a.onload=t,a.onerror=e=>{const t=mm("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)})}class pg{constructor(e){this.type="recaptcha-enterprise",this.auth=mg(e)}async verify(e="verify",t=!1){function n(t,n,a){const r=window.grecaptcha;cg(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,a)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{ug(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(void 0!==a.recaptchaKey){const n=new dg(a);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&cg(window.grecaptcha))n(r,e,a);else{if("undefined"==typeof window)return void a(new Error("RecaptchaVerifier is only supported in browser"));hg("https://www.google.com/recaptcha/enterprise.js?render="+r).then(()=>{n(r,e,a)}).catch(e=>{a(e)})}}).catch(e=>{a(e)})})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,a)=>{try{n(e(t))}catch(r){a(r)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gg(this),this.idTokenSubscription=new gg(this),this.beforeStateQueue=new fg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Km(t)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ym.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(a=this.currentUser)||void 0===a?void 0:a.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let a=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==a?void 0:a._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==i||!(null==s?void 0:s.user)||(a=s.user,r=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ym(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $m(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?mn(e):null;return t&&ym(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ym(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Km(e))})}async initializeRecaptchaConfig(){const e=await ug(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new dg(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new pg(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Km(e)||this._popupRedirectResolver;ym(t,this,"argument-error"),this.redirectPersistenceManager=await Ym.create(this,[Km(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return ym(i,this,"internal-error"),i.then(()=>r(this.currentUser)),"function"==typeof t?e.addObserver(t,n,a):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ym(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){pm.logLevel<=In.WARN&&pm.warn(`Auth (${Aa}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function mg(e){return mn(e)}class gg{constructor(e){this.auth=e,this.observer=null,this.addObserver=pn(e=>this.observer=e)}get next(){return ym(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(e,t,n){const a=mg(e);ym(a._canInitEmulator,a,"emulator-config-failed"),ym(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=bg(t),{host:i,port:s}=function(e){const t=bg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const e=r[1];return{host:e,port:wg(a.substr(e.length+1))}}{const[e,t]=a.split(":");return{host:e,port:wg(t)}}}(t),o=null===s?"":`:${s}`;a.config.emulator={url:`${r}//${i}${o}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:i,port:s,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function bg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _g{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bm("not implemented")}_getIdTokenResponse(e){return bm("not implemented")}_linkToIdToken(e,t){return bm("not implemented")}_getReauthenticationResolver(e){return bm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ig(e,t){return async function(e,t,n,a,r={}){const i=await Nm(e,t,n,a,r);return"mfaPendingCredential"in i&&vm(e,"multi-factor-auth-required",{_serverResponse:i}),i}(e,"POST","/v1/accounts:signInWithIdp",Am(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends _g{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:a}=t,r=um(t,["providerId","signInMethod"]);if(!n||!a)return null;const i=new Sg(n,a);return i.idToken=r.idToken||void 0,i.accessToken=r.accessToken||void 0,i.secret=r.secret,i.nonce=r.nonce,i.pendingToken=r.pendingToken||null,i}_getIdTokenResponse(e){return Ig(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ig(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ig(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hn(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Cg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends kg{constructor(){super("facebook.com")}static credential(e){return Sg._fromParams({providerId:Eg.PROVIDER_ID,signInMethod:Eg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eg.credentialFromTaggedObject(e)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Eg.credential(e.oauthAccessToken)}catch(t){return null}}}Eg.FACEBOOK_SIGN_IN_METHOD="facebook.com",Eg.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xg extends kg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sg._fromParams({providerId:xg.PROVIDER_ID,signInMethod:xg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xg.credentialFromTaggedObject(e)}static credentialFromError(e){return xg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return xg.credential(t,n)}catch(a){return null}}}xg.GOOGLE_SIGN_IN_METHOD="google.com",xg.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tg extends kg{constructor(){super("github.com")}static credential(e){return Sg._fromParams({providerId:Tg.PROVIDER_ID,signInMethod:Tg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tg.credentialFromTaggedObject(e)}static credentialFromError(e){return Tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Tg.credential(e.oauthAccessToken)}catch(t){return null}}}Tg.GITHUB_SIGN_IN_METHOD="github.com",Tg.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ag extends kg{constructor(){super("twitter.com")}static credential(e,t){return Sg._fromParams({providerId:Ag.PROVIDER_ID,signInMethod:Ag.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ag.credentialFromTaggedObject(e)}static credentialFromError(e){return Ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ag.credential(t,n)}catch(a){return null}}}Ag.TWITTER_SIGN_IN_METHOD="twitter.com",Ag.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ng{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const r=await qm._fromIdTokenResponse(e,n,a),i=Vg(n);return new Ng({user:r,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=Vg(n);return new Ng({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function Vg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends sn{constructor(e,t,n,a){var r;super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Dg.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new Dg(e,t,n,a)}}function Mg(e,t,n,a){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Dg._fromErrorAndOperation(e,n,t,a);throw n})}const Rg="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rg,"1"),this.storage.removeItem(Rg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rn();return Zm(e)||ig(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=og(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const a=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);sg()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Og.type="LOCAL";const Lg=Og;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fg.type="SESSION";const Bg=Fg;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ug{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ug(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:r}=t.data,i=this.handlersMap[a];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const s=Array.from(i).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $g(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ug.receivers=[];class jg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let r,i;return new Promise((s,o)=>{const l=$g("",20);a.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),s(t.data.response);break;default:clearTimeout(u),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qg(){return void 0!==zg().WorkerGlobalScope&&"function"==typeof zg().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hg="firebaseLocalStorageDb",Kg="firebaseLocalStorage",Gg="fbase_key";class Wg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qg(e,t){return e.transaction([Kg],t?"readwrite":"readonly").objectStore(Kg)}function Yg(){const e=indexedDB.open(Hg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Kg,{keyPath:Gg})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Kg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Hg);return new Wg(e).toPromise()}(),t(await Yg()))})})}async function Xg(e,t,n){const a=Qg(e,!0).put({[Gg]:t,value:n});return new Wg(a).toPromise()}function Jg(e,t){const n=Qg(e,!0).delete(t);return new Wg(n).toPromise()}class Zg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Yg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ug._getInstance(qg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new jg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yg();return await Xg(e,Rg,"1"),await Jg(e,Rg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Qg(e,!1).get(t),a=await new Wg(n).toPromise();return void 0===a?null:a.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Qg(e,!1).getAll();return new Wg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:a,value:r}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(r)&&(this.notifyListeners(a,r),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zg.type="LOCAL";const ey=Zg;new Cm(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ty extends _g{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ig(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ig(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ig(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ny(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){const a="signIn",r=await Mg(e,a,t),i=await Ng._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(i.user),i}(e.auth,new ty(e),e.bypassAuthState)}function ay(e){const{auth:t,user:n}=e;return ym(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:a}=e,r="reauthenticate";try{const i=await Fm(e,Mg(a,r,t,e),n);ym(i.idToken,a,"internal-error");const s=Lm(i.idToken);ym(s,a,"internal-error");const{sub:o}=s;return ym(e.uid===o,a,"user-mismatch"),Ng._forOperation(e,r,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&vm(a,"user-mismatch"),i}}(n,new ty(e),e.bypassAuthState)}async function ry(e){const{auth:t,user:n}=e;return ym(n,t,"internal-error"),async function(e,t,n=!1){const a=await Fm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ng._forOperation(e,"link",a)}(n,new ty(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t,n,a,r=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:r,error:i,type:s}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ny;case"linkViaPopup":case"linkViaRedirect":return ry;case"reauthViaPopup":case"reauthViaRedirect":return ay;default:vm(this.auth,"internal-error")}}resolve(e){wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Cm(2e3,1e4);class oy extends iy{constructor(e,t,n,a,r){super(e,t,a,r),this.provider=n,this.authWindow=null,this.pollId=null,oy.currentPopupAction&&oy.currentPopupAction.cancel(),oy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ym(e,this.auth,"internal-error"),e}async onExecution(){wm(1===this.filter.length,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(mm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mm(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,sy.get())};e()}}oy.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ly="pendingRedirect",uy=new Map;class cy extends iy{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=uy.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Qm(ly,e.config.apiKey,e.name)}(t),a=function(e){return Km(e._redirectPersistence)}(e);if(!(await a._isAvailable()))return!1;const r="true"===await a._get(n);return await a._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}uy.set(this.auth._key(),e)}return this.bypassAuthState||uy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function dy(e,t){uy.set(e._key(),t)}async function hy(e,t,n=!1){const a=mg(e),r=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Km(t):(ym(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(a,t),i=new cy(a,r,n),s=await i.execute();return s&&!n&&(delete s.user._redirectEventId,await a._persistUserIfCurrent(s.user),await a._setRedirectUser(null,t)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vy(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vy(e)){const a=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mm(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vy({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const my=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gy=/^https?/;async function yy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Nm(e,"GET","/v1/projects",t)}(e);for(const a of t)try{if(by(a))return}catch(n){}vm(e,"unauthorized-domain")}function by(e){const t=_m(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===a?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===a}if(!gy.test(n))return!1;if(my.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Cm(3e4,6e4);function _y(){const e=zg().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Iy(e){return new Promise((t,n)=>{var a,r,i;function s(){_y(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_y(),n(mm(e,"network-request-failed"))},timeout:wy.get()})}if(null===(r=null===(a=zg().gapi)||void 0===a?void 0:a.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=zg().gapi)||void 0===i?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return zg()[t]=()=>{gapi.load?s():n(mm(e,"network-request-failed"))},hg(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}s()}}).catch(e=>{throw Sy=null,e})}let Sy=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cy=new Cm(5e3,15e3),ky={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ey=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xy(e){const t=e.config;ym(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?km(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,a={apiKey:t.apiKey,appName:e.name,v:Aa},r=Ey.get(e.config.apiHost);r&&(a.eid=r);const i=e._getFrameworks();return i.length&&(a.fw=i.join(",")),`${n}?${hn(a).slice(1)}`}async function Ty(e){const t=await function(e){return Sy=Sy||Iy(e),Sy}(e),n=zg().gapi;return ym(n,e,"internal-error"),t.open({where:document.body,url:xy(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ky,dontclear:!0},t=>new Promise(async(n,a)=>{await t.restyle({setHideOnLeave:!1});const r=mm(e,"network-request-failed"),i=zg().setTimeout(()=>{a(r)},Cy.get());function s(){zg().clearTimeout(i),n(t)}t.ping(s).then(s,()=>{a(r)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Vy(e,t,n,a=500,r=600){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-a)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ay),{width:a.toString(),height:r.toString(),top:i,left:s}),u=rn().toLowerCase();n&&(o=eg(u)?"_blank":n),Jm(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=rn()){var t;return ig(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Ny(null);const d=window.open(t||"",o,c);ym(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Ny(d)}const Dy="__/auth/handler",My="emulator/auth/handler",Ry=encodeURIComponent("fac");async function Py(e,t,n,a,r,i){ym(e.config.authDomain,e,"auth-domain-config-required"),ym(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:Aa,eventId:r};if(t instanceof Cg){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))s[e]=t}if(t instanceof kg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Ry}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Dy}`;return km(e,My)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${hn(o).slice(1)}${u}`}const Oy="webStorageSupport";const Ly=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bg,this._completeRedirectFn=hy,this._overrideRedirectResult=dy}async _openPopup(e,t,n,a){var r;wm(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Vy(e,await Py(e,t,n,_m(),a),$g())}async _openRedirect(e,t,n,a){await this._originValidation(e);return function(e){zg().location.href=e}(await Py(e,t,n,_m(),a)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ty(e),n=new py(e);return t.register("authEvent",t=>{ym(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oy,{type:Oy},n=>{var a;const r=null===(a=null==n?void 0:n[0])||void 0===a?void 0:a[Oy];void 0!==r&&t(!!r),vm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return og()||Zm()||ig()}};var Fy="@firebase/auth",By="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ym(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $y=nn("authIdTokenMaxAge")||300;let jy=null;function zy(e=Va()){const t=Ea(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ea(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(cn(n.getOptions(),null!=t?t:{}))return e;vm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ly,persistence:[ey,Lg,Bg]}),a=nn("authTokenSyncURL");if(a){const e=(r=a,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>$y)return;const a=null==t?void 0:t.token;jy!==a&&(jy=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});!function(e,t,n){mn(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,a){mn(e).onIdTokenChanged(t,n,a)}(n,t=>e(t))}var r;const i=en("auth");return i&&yg(n,`http://${i}`),n}var qy;qy="Browser",ka(new gn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:i,authDomain:s}=n.options;ym(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:s,clientPlatform:qy,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lg(qy)},l=new vg(n,a,r,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Km);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ka(new gn("auth-internal",e=>{const t=mg(e.getProvider("auth").getImmediate());return new Uy(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ma(Fy,By,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qy)),Ma(Fy,By,"esm2017");const Hy=async e=>{const[t,n,a,r,i,s]=await(async e=>{if(!e)throw new Error("User ID is required to load initial data.");try{const t=await er();return Promise.all([em(Jf(t,"accounts")),em(Jf(t,"character_masters")),em(Jf(t,"itemMasters")),em(Zf(t,"owned_characters")),em(Jf(t,"gachaMasters")),em(Ov(Jf(t,"teams"),Fv("userId","==",e),$v("createdAt","desc")))])}catch(t){throw t}})(e),o=t.docs.map(e=>{const t=e.data();return{id:e.id,name:t.Name||`${t.id}`,numericId:t.id,indexNumber:t.indexNumber}}).sort((e,t)=>(e.numericId||999)-(t.numericId||999)),l=n.docs.map(e=>({...e.data(),id:e.id})).sort((e,t)=>(e.indexNumber||999999)-(t.indexNumber||999999)),u=new Map(l.map(e=>[e.id,e])),c=a.docs.map(e=>({...e.data(),id:Number(e.data().id)})).sort((e,t)=>e.id-t.id),d=new Map(c.map(e=>[e.id,e.name])),h=i.docs.map(e=>e.data()).sort((e,t)=>e.id-t.id),p=s.docs.map(e=>({...e.data(),id:e.id})),f=new Map,v=new Map;return r.forEach(e=>{const t=e.data(),n=e.ref.parent.parent.id,a=`${t.characterMasterId}-${n}`;v.set(a,(v.get(a)||0)+1),f.has(n)||f.set(n,[]);const r=ir(t.items);f.get(n).push({...t,items:r,id:e.id})}),{accounts:o,characterMasters:l,characterMastersMap:u,itemMasters:c,itemMastersMap:d,gachaMasters:h,teams:p,ownedCharactersData:f,ownedCountMap:v}},Ky=async(e,t)=>am(Jf(await er(),"accounts",e,"owned_characters"),t),Gy=async(e,t,n)=>tm(ev(await er(),"accounts",e,"owned_characters",t),{items:n}),Wy=async(e,t,n)=>{const a=await er(),r=lm(a),i=ev(a,"accounts",e,"owned_characters",t.id),s=ev(a,"accounts",e,"owned_characters",n.id);return r.update(i,{items:t.items}),r.update(s,{items:n.items}),r.commit()},Qy=async e=>am(Jf(await er(),"character_masters"),e),Yy=async(e,t)=>tm(ev(await er(),"character_masters",e),t),Xy=async(e,t)=>{const n=await er();return e?tm(ev(n,"teams",e),t):am(Jf(n,"teams"),t)},Jy=async e=>nm(ev(await er(),"teams",e)),Zy=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},eb=ae({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),tb=ne(!1)({name:"VDefaultsProvider",props:eb(),setup(t,n){let{slots:a}=n;const{defaults:r,disabled:i,reset:s,root:o,scoped:l}=e(t);return re(r,{reset:s,root:o,scoped:l,disabled:i}),()=>{var e;return null==(e=a.default)?void 0:e.call(a)}}});function nb(e){return ie(()=>{const n=t(e),a=[],r={};if(n.background)if(se(n.background)){if(r.backgroundColor=n.background,!n.text&&oe(n.background)){const e=le(n.background);if(null==e.a||1===e.a){const t=ue(e);r.color=t,r.caretColor=t}}}else a.push(`bg-${n.background}`);return n.text&&(se(n.text)?(r.color=n.text,r.caretColor=n.text):a.push(`text-${n.text}`)),{colorClasses:a,colorStyles:r}})}function ab(e){const{colorClasses:n,colorStyles:a}=nb(()=>({text:t(e)}));return{textColorClasses:n,textColorStyles:a}}function rb(e){const{colorClasses:n,colorStyles:a}=nb(()=>({background:t(e)}));return{backgroundColorClasses:n,backgroundColorStyles:a}}const ib=["x-small","small","default","large","x-large"],sb=ae({size:{type:[String,Number],default:"default"}},"size");function ob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return ie(()=>{const n=e.size;let a,r;return de(ib,n)?a=`${t}--size-${n}`:n&&(r={width:he(n),height:he(n)}),{sizeClasses:a,sizeStyles:r}})}const lb=ae({tag:{type:[String,Object,Function],default:"div"}},"tag"),ub=ae({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:be,opacity:[String,Number],...ye(),...sb(),...lb({tag:"i"}),...ge()},"VIcon"),cb=ne()({name:"VIcon",props:ub(),setup(e,t){let{attrs:o,slots:l}=t;const u=n(),{themeClasses:c}=pe(),{iconData:d}=fe(()=>u.value||e.icon),{sizeClasses:h}=ob(e),{textColorClasses:p,textColorStyles:f}=ab(()=>e.color);return ve(()=>{var t,n;const v=null==(t=l.default)?void 0:t.call(l);v&&(u.value=null==(n=me(v).filter(e=>e.type===a&&e.children&&"string"==typeof e.children)[0])?void 0:n.children);const m=!(!o.onClick&&!o.onClickOnce);return r(d.value.component,{tag:e.tag,icon:d.value.icon,class:s(["v-icon","notranslate",c.value,h.value,p.value,{"v-icon--clickable":m,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:i([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:he(e.size),height:he(e.size),width:he(e.size)},f.value,e.style]),role:m?"button":void 0,"aria-hidden":!m,tabindex:m?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}}),db=ae({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function hb(e){return{dimensionStyles:o(()=>{const t={},n=he(e.height),a=he(e.maxHeight),r=he(e.maxWidth),i=he(e.minHeight),s=he(e.minWidth),o=he(e.width);return null!=n&&(t.height=n),null!=a&&(t.maxHeight=a),null!=r&&(t.maxWidth=r),null!=i&&(t.minHeight=i),null!=s&&(t.minWidth=s),null!=o&&(t.width=o),t})}}const pb=ae({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...ye(),...db()},"VResponsive"),fb=ne()({name:"VResponsive",props:pb(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=function(e){return{aspectStyles:o(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}(e),{dimensionStyles:r}=hb(e);return ve(()=>{var t;return l("div",{class:s(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:i([r.value,e.style])},[l("div",{class:"v-responsive__sizer",style:i(a.value)},null),null==(t=n.additional)?void 0:t.call(n),n.default&&l("div",{class:s(["v-responsive__content",e.contentClass])},[n.default()])])}),{}}}),vb=ae({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function mb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{roundedClasses:o(()=>{const n=u(e)?e.value:e.rounded,a=u(e)?e.value:e.tile,r=[];if(!0===n||""===n)r.push(`${t}--rounded`);else if("string"==typeof n||0===n)for(const e of String(n).split(" "))r.push(`rounded-${e}`);else(a||!1===n)&&r.push("rounded-0");return r})}}const gb=ae({transition:{type:null,default:"fade-transition",validator:e=>!0!==e}},"transition"),yb=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:i,...s}=e,{component:o=(i?c:d),...l}=we(a)?a:{};let u;return u=we(a)?h(l,_e({disabled:r,group:i}),s):h({name:r||!a?"":a},s),p(o,u,n)};function bb(e,t){var n;const a=null==(n=e._observe)?void 0:n[t.instance.$.uid];a&&(a.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const wb={mounted:function(e,t){if(!Ie)return;const n=t.modifiers||{},a=t.value,{handler:r,options:i}="object"==typeof a?a:{handler:a,options:{}},s=new IntersectionObserver(function(){var a;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const o=null==(a=e._observe)?void 0:a[t.instance.$.uid];if(!o)return;const l=i.some(e=>e.isIntersecting);!r||n.quiet&&!o.init||n.once&&!l&&!o.init||r(l,i,s),l&&n.once?bb(e,t):o.init=!0},i);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:s},s.observe(e)},unmounted:bb},_b=ae({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...pb(),...ye(),...vb(),...gb()},"VImg"),Ib=ne()({name:"VImg",directives:{vIntersect:wb},props:_b(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:a,slots:i}=t;const{backgroundColorClasses:u,backgroundColorStyles:c}=rb(()=>e.color),{roundedClasses:d}=mb(e),p=Se("VImg"),S=n(""),C=f(),k=n(e.eager?"loading":"idle"),E=n(),x=n(),T=o(()=>e.src&&"object"==typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),A=o(()=>T.value.aspect||E.value/x.value||0);function N(t){if((!e.eager||!t)&&(!Ie||t||e.eager)){if(k.value="loading",T.value.lazySrc){const e=new Image;e.src=T.value.lazySrc,P(e,null)}T.value.src&&g(()=>{var e;a("loadstart",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src),setTimeout(()=>{var e;if(!p.isUnmounted)if(null==(e=C.value)?void 0:e.complete){if(C.value.naturalWidth||D(),"error"===k.value)return;A.value||P(C.value,null),"loading"===k.value&&V()}else A.value||P(C.value),M()})})}}function V(){var e;p.isUnmounted||(M(),P(C.value),k.value="loaded",a("load",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src))}function D(){var e;p.isUnmounted||(k.value="error",a("error",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src))}function M(){const e=C.value;e&&(S.value=e.currentSrc||e.src)}v(()=>e.src,()=>{N("idle"!==k.value)}),v(A,(e,t)=>{!e&&t&&C.value&&P(C.value)}),m(()=>N());let R=-1;function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=()=>{if(clearTimeout(R),p.isUnmounted)return;const{naturalHeight:a,naturalWidth:r}=e;a||r?(E.value=r,x.value=a):e.complete||"loading"!==k.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(E.value=1,x.value=1):R=window.setTimeout(n,t)};n()}y(()=>{clearTimeout(R)});const O=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),L=()=>{var t;if(!T.value.src||"idle"===k.value)return null;const n=l("img",{class:s(["v-img__img",O.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:T.value.src,srcset:T.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:V,onError:D},null),a=null==(t=i.sources)?void 0:t.call(i);return r(yb,{transition:e.transition,appear:!0},{default:()=>[w(a?l("picture",{class:"v-img__picture"},[a,n]):n,[[I,"loaded"===k.value]])]})},F=()=>r(yb,{transition:e.transition},{default:()=>[T.value.lazySrc&&"loaded"!==k.value&&l("img",{class:s(["v-img__img","v-img__img--preload",O.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:T.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),B=()=>i.placeholder?r(yb,{transition:e.transition,appear:!0},{default:()=>[("loading"===k.value||"error"===k.value&&!i.error)&&l("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,U=()=>i.error?r(yb,{transition:e.transition,appear:!0},{default:()=>["error"===k.value&&l("div",{class:"v-img__error"},[i.error()])]}):null,$=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,j=n(!1);{const e=v(A,t=>{t&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.value=!0})}),e())})}return ve(()=>{const t=fb.filterProps(e);return w(r(fb,h({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!j.value},u.value,d.value,e.class],style:[{width:he("auto"===e.width?E.value:e.width)},c.value,e.style]},t,{aspectRatio:A.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(_,null,[r(L,null,null),r(F,null,null),r($,null,null),r(B,null,null),r(U,null,null)]),default:i.default}),[[wb,{handler:N,options:e.options},null,{once:!0}]])}),{currentSrc:S,image:C,state:k,naturalWidth:E,naturalHeight:x}}}),Sb=ae({border:[Boolean,Number,String]},"border");function Cb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{borderClasses:o(()=>{const n=e.border;return!0===n||""===n?`${t}--border`:"string"==typeof n||0===n?String(n).split(" ").map(e=>`border-${e}`):[]})}}const kb=[null,"default","comfortable","compact"],Eb=ae({density:{type:String,default:"default",validator:e=>kb.includes(e)}},"density");function xb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{densityClasses:b(()=>`${t}--density-${e.density}`)}}const Tb=["elevated","flat","tonal","outlined","text","plain"];function Ab(e,t){return l(_,null,[e&&l("span",{key:"overlay",class:s(`${t}__overlay`)},null),l("span",{key:"underlay",class:s(`${t}__underlay`)},null)])}const Nb=ae({color:String,variant:{type:String,default:"elevated",validator:e=>Tb.includes(e)}},"variant");function Vb(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const a=b(()=>{const{variant:a}=t(e);return`${n}--variant-${a}`}),{colorClasses:r,colorStyles:i}=nb(()=>{const{variant:n,color:a}=t(e);return{[["elevated","flat"].includes(n)?"background":"text"]:a}});return{colorClasses:r,colorStyles:i,variantClasses:a}}const Db=ae({start:Boolean,end:Boolean,icon:be,image:String,text:String,...Sb(),...ye(),...Eb(),...vb(),...sb(),...lb(),...ge(),...Nb({variant:"flat"})},"VAvatar"),Mb=ne()({name:"VAvatar",props:Db(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{borderClasses:o}=Cb(e),{colorClasses:l,colorStyles:u,variantClasses:c}=Vb(e),{densityClasses:d}=xb(e),{roundedClasses:h}=mb(e),{sizeClasses:p,sizeStyles:f}=ob(e);return ve(()=>r(e.tag,{class:s(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,o.value,l.value,d.value,h.value,p.value,c.value,e.class]),style:i([u.value,f.value,e.style])},{default:()=>[n.default?r(tb,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?r(Ib,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?r(cb,{key:"icon",icon:e.icon},null):e.text,Ab(!1,"v-avatar")]})),{}}}),Rb=ae({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Pb(e){return{elevationClasses:b(()=>{const t=u(e)?e.value:e.elevation;return null==t?[]:[`elevation-${t}`]})}}const Ob=ae({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...Sb(),...ye(),...Eb(),...Rb(),...vb(),...lb(),...ge(),...Nb()},"VBtnGroup"),Lb=ne()({name:"VBtnGroup",props:Ob(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{densityClasses:o}=xb(e),{borderClasses:l}=Cb(e),{elevationClasses:u}=Pb(e),{roundedClasses:c}=mb(e);re({VBtn:{height:b(()=>"horizontal"===e.direction?"auto":null),baseColor:b(()=>e.baseColor),color:b(()=>e.color),density:b(()=>e.density),flat:!0,variant:b(()=>e.variant)}}),ve(()=>r(e.tag,{class:s(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,l.value,o.value,u.value,c.value,e.class]),style:i(e.style)},n))}}),Fb=ae({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Bb=ae({value:null,disabled:Boolean,selectedClass:String},"group-item");function Ub(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=Se("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=E();x(Symbol.for(`${t.description}:id`),r);const i=T(t,null);if(!i){if(!n)return i;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const s=b(()=>e.value),l=o(()=>!(!i.disabled.value&&!e.disabled));i.register({id:r,value:s,disabled:l},a),y(()=>{i.unregister(r)});const u=o(()=>i.isSelected(r)),c=o(()=>i.items.value[0].id===r),d=o(()=>i.items.value[i.items.value.length-1].id===r),h=o(()=>u.value&&[i.selectedClass.value,e.selectedClass]);return v(u,e=>{a.emit("group:selected",{value:e})},{flush:"sync"}),{id:r,isSelected:u,isFirst:c,isLast:d,toggle:()=>i.select(r,!u.value),select:e=>i.select(r,e),selectedClass:h,value:s,disabled:l,group:i}}function $b(e,t){let n=!1;const a=S([]),r=ke(e,"modelValue",[],e=>null==e?[]:jb(a,xe(e)),t=>{const n=function(e,t){const n=[];return t.forEach(t=>{const a=e.findIndex(e=>e.id===t);if(~a){const t=e[a];n.push(null!=t.value?t.value:a)}}),n}(a,t);return e.multiple?n:n[0]}),i=Se("useGroup");function s(){const t=a.find(e=>!e.disabled);t&&"force"===e.mandatory&&!r.value.length&&(r.value=[t.id])}function o(t){if(e.multiple,r.value.length){const e=r.value[0],n=a.findIndex(t=>t.id===e);let i=(n+t)%a.length,s=a[i];for(;s.disabled&&i!==n;)i=(i+t)%a.length,s=a[i];if(s.disabled)return;r.value=[a[i].id]}else{const e=a.find(e=>!e.disabled);e&&(r.value=[e.id])}}C(()=>{s()}),y(()=>{n=!0}),k(()=>{for(let e=0;e<a.length;e++)a[e].useIndexAsValue&&(a[e].value=e)});const l={register:function(e,n){const r=e,s=Symbol.for(`${t.description}:id`),o=Te(s,null==i?void 0:i.vnode).indexOf(n);null==A(r.value)&&(r.value=o,r.useIndexAsValue=!0),o>-1?a.splice(o,0,r):a.push(r)},unregister:function(e){if(n)return;s();const t=a.findIndex(t=>t.id===e);a.splice(t,1)},selected:r,select:function(t,n){const i=a.find(e=>e.id===t);if(!n||!(null==i?void 0:i.disabled))if(e.multiple){const a=r.value.slice(),i=a.findIndex(e=>e===t),s=~i;if(n=n??!s,s&&e.mandatory&&a.length<=1)return;if(!s&&null!=e.max&&a.length+1>e.max)return;i<0&&n?a.push(t):i>=0&&!n&&a.splice(i,1),r.value=a}else{const a=r.value.includes(t);if(e.mandatory&&a)return;if(!a&&!n)return;r.value=n??!a?[t]:[]}},disabled:b(()=>e.disabled),prev:()=>o(a.length-1),next:()=>o(1),isSelected:e=>r.value.includes(e),selectedClass:b(()=>e.selectedClass),items:b(()=>a),getItemIndex:e=>function(e,t){const n=jb(e,[t]);return n.length?e.findIndex(e=>e.id===n[0]):-1}(a,e)};return x(t,l),l}function jb(e,t){const n=[];return t.forEach(t=>{const a=e.find(e=>Ee(t,e.value)),r=e[t];null!=(null==a?void 0:a.value)?n.push(a.id):(null==r?void 0:r.useIndexAsValue)&&n.push(r.id)}),n}const zb=Symbol.for("vuetify:v-btn-toggle"),qb=ae({...Ob(),...Fb()},"VBtnToggle"),Hb=ne()({name:"VBtnToggle",props:qb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:i,prev:s,select:o,selected:l}=$b(e,zb);return ve(()=>{const t=Lb.filterProps(e);return r(Lb,h({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:a,next:i,prev:s,select:o,selected:l})]}})}),{next:i,prev:s,select:o}}});function Kb(e,t){const a=f(),r=n(!1);if(Ie){const e=new IntersectionObserver(e=>{r.value=!!e.find(e=>e.isIntersecting)},t);N(()=>{e.disconnect()}),v(a,(t,n)=>{n&&(e.unobserve(n),r.value=!1),t&&e.observe(t)},{flush:"post"})}return{intersectionRef:a,isIntersecting:r}}const Gb=ae({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...ye(),...sb(),...lb({tag:"div"}),...ge()},"VProgressCircular"),Wb=ne()({name:"VProgressCircular",props:Gb(),setup(e,t){let{slots:n}=t;const a=2*Math.PI*20,o=f(),{themeClasses:u}=Ce(e),{sizeClasses:c,sizeStyles:d}=ob(e),{textColorClasses:h,textColorStyles:p}=ab(()=>e.color),{textColorClasses:v,textColorStyles:m}=ab(()=>e.bgColor),{intersectionRef:g,isIntersecting:y}=Kb(),{resizeRef:w,contentRect:_}=Ae(),I=b(()=>Ne(parseFloat(e.modelValue),0,100)),S=b(()=>Number(e.width)),C=b(()=>d.value?Number(e.size):_.value?_.value.width:Math.max(S.value,32)),k=b(()=>20/(1-S.value/C.value)*2),E=b(()=>S.value/C.value*k.value),x=b(()=>he((100-I.value)/100*a));return V(()=>{g.value=o.value,w.value=o.value}),ve(()=>r(e.tag,{ref:o,class:s(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":y.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},u.value,c.value,h.value,e.class]),style:i([d.value,p.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:I.value},{default:()=>[l("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${k.value} ${k.value}`},[l("circle",{class:s(["v-progress-circular__underlay",v.value]),style:i(m.value),fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":a,"stroke-dashoffset":0},null),l("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":a,"stroke-dashoffset":x.value},null)]),n.default&&l("div",{class:"v-progress-circular__content"},[n.default({value:I.value})])]})),{}}}),Qb={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Yb=ae({location:String},"location");function Xb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=Ve();return{locationStyles:o(()=>{if(!e.location)return{};const{side:r,align:i}=De(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function s(e){return n?n(e):0}const o={};return"center"!==r&&(t?o[Qb[r]]=`calc(100% - ${s(r)}px)`:o[r]=0),"center"!==i?t?o[Qb[i]]=`calc(100% - ${s(i)}px)`:o[i]=0:("center"===r?o.top=o.left="50%":o[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",o.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),o})}}const Jb=ae({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ye(),...Yb({location:"top"}),...vb(),...lb(),...ge()},"VProgressLinear"),Zb=ne()({name:"VProgressLinear",props:Jb(),emits:{"update:modelValue":e=>!0},setup(e,t){var n;let{slots:a}=t;const u=ke(e,"modelValue"),{isRtl:c,rtlClasses:h}=Ve(),{themeClasses:p}=Ce(e),{locationStyles:f}=Xb(e),{textColorClasses:v,textColorStyles:m}=ab(()=>e.color),{backgroundColorClasses:g,backgroundColorStyles:y}=rb(()=>e.bgColor||e.color),{backgroundColorClasses:b,backgroundColorStyles:w}=rb(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:_,backgroundColorStyles:I}=rb(()=>e.color),{roundedClasses:S}=mb(e),{intersectionRef:C,isIntersecting:k}=Kb(),E=o(()=>parseFloat(e.max)),x=o(()=>parseFloat(e.height)),T=o(()=>Ne(parseFloat(e.bufferValue)/E.value*100,0,100)),A=o(()=>Ne(parseFloat(u.value)/E.value*100,0,100)),N=o(()=>c.value!==e.reverse),V=o(()=>e.indeterminate?"fade-transition":"slide-x-transition"),D=Me&&(null==(n=window.matchMedia)?void 0:n.call(window,"(forced-colors: active)").matches);function M(e){if(!C.value)return;const{left:t,right:n,width:a}=C.value.getBoundingClientRect(),r=N.value?a-e.clientX+(n-a):e.clientX-t;u.value=Math.round(r/a*E.value)}return ve(()=>r(e.tag,{ref:C,class:s(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&k.value,"v-progress-linear--reverse":N.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},S.value,p.value,h.value,e.class]),style:i([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?he(x.value):0,"--v-progress-linear-height":he(x.value),...e.absolute?f.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(u.value),E.value),onClick:e.clickable&&M},{default:()=>[e.stream&&l("div",{key:"stream",class:s(["v-progress-linear__stream",v.value]),style:{...m.value,[N.value?"left":"right"]:he(-x.value),borderTop:`${he(x.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${he(x.value/4)})`,width:he(100-T.value,"%"),"--v-progress-linear-stream-to":he(x.value*(N.value?1:-1))}},null),l("div",{class:s(["v-progress-linear__background",D?void 0:g.value]),style:i([y.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),l("div",{class:s(["v-progress-linear__buffer",D?void 0:b.value]),style:i([w.value,{opacity:parseFloat(e.bufferOpacity),width:he(T.value,"%")}])},null),r(d,{name:V.value},{default:()=>[e.indeterminate?l("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>l("div",{key:e,class:s(["v-progress-linear__indeterminate",e,D?void 0:_.value]),style:i(I.value)},null))]):l("div",{class:s(["v-progress-linear__determinate",D?void 0:_.value]),style:i([I.value,{width:he(A.value,"%")}])},null)]}),a.default&&l("div",{class:"v-progress-linear__content"},[a.default({value:A.value,buffer:T.value})])]})),{}}}),ew=ae({loading:[Boolean,String]},"loader");function tw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{loaderClasses:b(()=>({[`${t}--loading`]:e.loading}))}}function nw(e,t){var n;let{slots:a}=t;return l("div",{class:s(`${e.name}__loader`)},[(null==(n=a.default)?void 0:n.call(a,{color:e.color,isActive:e.active}))||r(Zb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const aw=["static","relative","fixed","absolute","sticky"],rw=ae({position:{type:String,validator:e=>aw.includes(e)}},"position");function iw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{positionClasses:b(()=>e.position?`${t}--${e.position}`:void 0)}}function sw(e,t){var n,a;const r=D("RouterLink"),i=b(()=>!(!e.href&&!e.to)),s=o(()=>(null==i?void 0:i.value)||Re(t,"click")||Re(e,"click"));if("string"==typeof r||!("useLink"in r)){const t=b(()=>e.href);return{isLink:i,isClickable:s,href:t,linkProps:S({href:t})}}const l=r.useLink({to:b(()=>e.to||""),replace:b(()=>e.replace)}),u=o(()=>e.to?l:void 0),c=function(){const e=Se("useRoute");return o(()=>{var t;return null==(t=null==e?void 0:e.proxy)?void 0:t.$route})}(),d=o(()=>{var t,n,a;return!!u.value&&(e.exact?c.value?(null==(a=u.value.isExactActive)?void 0:a.value)&&Ee(u.value.route.value.query,c.value.query):(null==(n=u.value.isExactActive)?void 0:n.value)??!1:(null==(t=u.value.isActive)?void 0:t.value)??!1)}),h=o(()=>{var t;return e.to?null==(t=u.value)?void 0:t.route.value.href:e.href});return{isLink:i,isClickable:s,isActive:d,route:null==(n=u.value)?void 0:n.route,navigate:null==(a=u.value)?void 0:a.navigate,href:h,linkProps:S({href:h,"aria-current":b(()=>d.value?"page":void 0)})}}const ow=ae({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let lw=!1;const uw=Symbol("rippleStop");function cw(e,t){e.style.transform=t,e.style.webkitTransform=t}function dw(e){return"TouchEvent"===e.constructor.name}function hw(e){return"KeyboardEvent"===e.constructor.name}const pw={show(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null==(n=null==t?void 0:t._ripple)?void 0:n.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",a.class&&(r.className+=` ${a.class}`);const{radius:s,scale:o,x:l,y:u,centerX:c,centerY:d}=function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0,i=0;if(!hw(e)){const n=t.getBoundingClientRect(),a=dw(e)?e.touches[e.touches.length-1]:e;r=a.clientX-n.left,i=a.clientY-n.top}let s=0,o=.3;(null==(n=t._ripple)?void 0:n.circle)?(o=.15,s=t.clientWidth/2,s=a.center?s:s+Math.sqrt((r-s)**2+(i-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*s)/2+"px",u=(t.clientHeight-2*s)/2+"px";return{radius:s,scale:o,x:a.center?l:r-s+"px",y:a.center?u:i-s+"px",centerX:l,centerY:u}}(e,t,a),h=2*s+"px";i.className="v-ripple__animation",i.style.width=h,i.style.height=h,t.appendChild(r);const p=window.getComputedStyle(t);p&&"static"===p.position&&(t.style.position="relative",t.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),cw(i,`translate(${l}, ${u}) scale3d(${o},${o},${o})`),i.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),cw(i,`translate(${c}, ${d}) scale3d(1,1,1)`)})})},hide(e){var t;if(!(null==(t=null==e?void 0:e._ripple)?void 0:t.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(0===n.length)return;const a=Array.from(n).findLast(e=>!e.dataset.isHiding);if(!a)return;a.dataset.isHiding="true";const r=performance.now()-Number(a.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{a.classList.remove("v-ripple__animation--in"),a.classList.add("v-ripple__animation--out"),setTimeout(()=>{var t;1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),(null==(t=a.parentNode)?void 0:t.parentNode)===e&&e.removeChild(a.parentNode)},300)},i)}};function fw(e){return void 0===e||!!e}function vw(e){const t={},n=e.currentTarget;if((null==n?void 0:n._ripple)&&!n._ripple.touched&&!e[uw]){if(e[uw]=!0,dw(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||hw(e),n._ripple.class&&(t.class=n._ripple.class),dw(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{pw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var e;(null==(e=null==n?void 0:n._ripple)?void 0:e.showTimerCommit)&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},80)}else pw.show(e,n,t)}}function mw(e){e[uw]=!0}function gw(e){const t=e.currentTarget;if(null==t?void 0:t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout(()=>{gw(e)}));window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),pw.hide(t)}}function yw(e){const t=e.currentTarget;(null==t?void 0:t._ripple)&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let bw=!1;function ww(e,t){!bw&&t.includes(e.key)&&(bw=!0,vw(e))}function _w(e){bw=!1,gw(e)}function Iw(e){bw&&(bw=!1,gw(e))}function Sw(e,t,n){const{value:a,modifiers:r}=t,i=fw(a);i||pw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=i,e._ripple.centered=r.center,e._ripple.circle=r.circle;const s=we(a)?a:{};s.class&&(e._ripple.class=s.class);const o=s.keys??["Enter","Space"];if(e._ripple.keyDownHandler=e=>ww(e,o),i&&!n){if(r.stop)return e.addEventListener("touchstart",mw,{passive:!0}),void e.addEventListener("mousedown",mw);e.addEventListener("touchstart",vw,{passive:!0}),e.addEventListener("touchend",gw,{passive:!0}),e.addEventListener("touchmove",yw,{passive:!0}),e.addEventListener("touchcancel",gw),e.addEventListener("mousedown",vw),e.addEventListener("mouseup",gw),e.addEventListener("mouseleave",gw),e.addEventListener("keydown",e=>ww(e,o)),e.addEventListener("keyup",_w),e.addEventListener("blur",Iw),e.addEventListener("dragstart",gw,{passive:!0})}else!i&&n&&Cw(e)}function Cw(e){var t;e.removeEventListener("mousedown",vw),e.removeEventListener("touchstart",vw),e.removeEventListener("touchend",gw),e.removeEventListener("touchmove",yw),e.removeEventListener("touchcancel",gw),e.removeEventListener("mouseup",gw),e.removeEventListener("mouseleave",gw),(null==(t=e._ripple)?void 0:t.keyDownHandler)&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",_w),e.removeEventListener("dragstart",gw),e.removeEventListener("blur",Iw)}const kw={mounted:function(e,t){Sw(e,t,!1)},unmounted:function(e){Cw(e),delete e._ripple},updated:function(e,t){if(t.value===t.oldValue)return;Sw(e,t,fw(t.oldValue))}},Ew=ae({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:zb},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:be,appendIcon:be,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Sb(),...ye(),...Eb(),...db(),...Rb(),...Bb(),...ew(),...Yb(),...rw(),...vb(),...ow(),...sb(),...lb({tag:"button"}),...ge(),...Nb({variant:"elevated"})},"VBtn"),xw=ne()({name:"VBtn",props:Ew(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:i}=Ce(e),{borderClasses:s}=Cb(e),{densityClasses:u}=xb(e),{dimensionStyles:c}=hb(e),{elevationClasses:d}=Pb(e),{loaderClasses:p}=tw(e),{locationStyles:f}=Xb(e),{positionClasses:m}=iw(e),{roundedClasses:y}=mb(e),{sizeClasses:_,sizeStyles:I}=ob(e),S=Ub(e,e.symbol,!1),C=sw(e,n),k=o(()=>{var t;return void 0!==e.active?e.active:C.isLink.value?null==(t=C.isActive)?void 0:t.value:null==S?void 0:S.isSelected.value}),E=b(()=>k.value?e.activeColor??e.color:e.color),x=o(()=>{var t,n;return{color:(null==S?void 0:S.isSelected.value)&&(!C.isLink.value||(null==(t=C.isActive)?void 0:t.value))||!S||(null==(n=C.isActive)?void 0:n.value)?E.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:T,colorStyles:A,variantClasses:N}=Vb(x),V=o(()=>(null==S?void 0:S.disabled.value)||e.disabled),D=b(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),R=o(()=>{if(void 0!==e.value&&"symbol"!=typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function P(e){var t;V.value||C.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===n.target)||(null==(t=C.navigate)||t.call(C,e),null==S||S.toggle())}return function(e,t){v(()=>{var t;return null==(t=e.isActive)?void 0:t.value},n=>{e.isLink.value&&null!=n&&t&&g(()=>{t(n)})},{immediate:!0})}(C,null==S?void 0:S.select),ve(()=>{const t=C.isLink.value?"a":e.tag,n=!(!e.prependIcon&&!a.prepend),o=!(!e.appendIcon&&!a.append),v=!(!e.icon||!0===e.icon);return w(r(t,h({type:"a"===t?void 0:"button",class:["v-btn",null==S?void 0:S.selectedClass.value,{"v-btn--active":k.value,"v-btn--block":e.block,"v-btn--disabled":V.value,"v-btn--elevated":D.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},i.value,s.value,T.value,u.value,d.value,p.value,m.value,y.value,_.value,N.value,e.class],style:[A.value,c.value,f.value,I.value,e.style],"aria-busy":!!e.loading||void 0,disabled:V.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:P,value:R.value},C.linkProps),{default:()=>{var t;return[Ab(!0,"v-btn"),!e.icon&&n&&l("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?r(tb,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):r(cb,{key:"prepend-icon",icon:e.prependIcon},null)]),l("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&v?r(cb,{key:"content-icon",icon:e.icon},null):r(tb,{key:"content-defaults",disabled:!v,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var t;return[(null==(t=a.default)?void 0:t.call(a))??M(e.text)]}})]),!e.icon&&o&&l("span",{key:"append",class:"v-btn__append"},[a.append?r(tb,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):r(cb,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&l("span",{key:"loader",class:"v-btn__loader"},[(null==(t=a.loader)?void 0:t.call(a))??r(Wb,{color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[kw,!V.value&&e.ripple,"",{center:!!e.icon}]])}),{group:S}}}),Tw=ae({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...ye(),...ge()},"VDivider"),Aw=ne()({name:"VDivider",props:Tw(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=Ce(e),{textColorClasses:u,textColorStyles:c}=ab(()=>e.color),d=o(()=>{const t={};return e.length&&(t[e.vertical?"height":"width"]=he(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=he(e.thickness)),t});return ve(()=>{const t=l("hr",{class:s([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,u.value,e.class]),style:i([d.value,c.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":n.role&&"separator"!==n.role?void 0:e.vertical?"vertical":"horizontal",role:`${n.role||"separator"}`},null);return a.default?l("div",{class:s(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[t,l("div",{class:"v-divider__content"},[a.default()]),t]):t}),{}}}),Nw=ae({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Vw(e,t,n){return ne()({name:e,props:Nw({mode:n,origin:t}),setup(t,n){let{slots:a}=n;const r={onBeforeEnter(e){t.origin&&(e.style.transformOrigin=t.origin)},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:n,offsetWidth:a,offsetHeight:r}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${a}px`,e.style.height=`${r}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&(null==e?void 0:e._transitionInitialStyles)){const{position:t,top:n,left:a,width:r,height:i}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=a||"",e.style.width=r||"",e.style.height=i||""}}};return()=>{const n=t.group?c:d;return p(n,{name:t.disabled?"":e,css:!t.disabled,...t.group?void 0:{mode:t.mode},...t.disabled?{}:r},a.default)}}})}function Dw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return ne()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(n,a){let{slots:r}=a;const i=n.group?c:d;return()=>p(i,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},r.default)}})}function Mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"width":"height",n=R(`offset-${t}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[t]:e.style[t]}},onEnter(a){const r=a._initialStyle;if(!r)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const i=`${a[n]}px`;a.style[t]="0",a.offsetHeight,a.style.transition=r.transition,e&&a._parent&&a._parent.classList.add(e),requestAnimationFrame(()=>{a.style[t]=i})},onAfterEnter:r,onEnterCancelled:r,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[t]:e.style[t]},e.style.overflow="hidden",e.style[t]=`${e[n]}px`,e.offsetHeight,requestAnimationFrame(()=>e.style[t]="0")},onAfterLeave:a,onLeaveCancelled:a};function a(t){e&&t._parent&&t._parent.classList.remove(e),r(t)}function r(e){if(!e._initialStyle)return;const n=e._initialStyle[t];e.style.overflow=e._initialStyle.overflow,null!=n&&(e.style[t]=n),delete e._initialStyle}}const Rw=ae({target:[Object,Array]},"v-dialog-transition"),Pw=new WeakMap,Ow=ne()({name:"VDialogTransition",props:Rw(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(t,n){var a;await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),t.style.visibility="";const r=Fw(e.target,t),{x:i,y:s,sx:o,sy:l,speed:u}=r;Pw.set(t,r);const c=Pe(t,[{transform:`translate(${i}px, ${s}px) scale(${o}, ${l})`,opacity:0},{}],{duration:225*u,easing:Fe});null==(a=Lw(t))||a.forEach(e=>{Pe(e,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*u,easing:Le})}),c.finished.then(()=>n())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(t,n){var a;let r;await new Promise(e=>requestAnimationFrame(e)),r=!Pw.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?Fw(e.target,t):Pw.get(t);const{x:i,y:s,sx:o,sy:l,speed:u}=r;Pe(t,[{},{transform:`translate(${i}px, ${s}px) scale(${o}, ${l})`,opacity:0}],{duration:125*u,easing:Oe}).finished.then(()=>n()),null==(a=Lw(t))||a.forEach(e=>{Pe(e,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*u,easing:Le})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>e.target?r(d,h({name:"dialog-transition"},a,{css:!1}),n):r(d,{name:"dialog-transition"},n)}});function Lw(e){var t;const n=null==(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))?void 0:t.children;return n&&[...n]}function Fw(e,t){const n=Be(e),a=Ue(t),[r,i]=getComputedStyle(t).transformOrigin.split(" ").map(e=>parseFloat(e)),[s,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;"left"===s||"left"===o?l-=n.width/2:"right"!==s&&"right"!==o||(l+=n.width/2);let u=n.top+n.height/2;"top"===s||"top"===o?u-=n.height/2:"bottom"!==s&&"bottom"!==o||(u+=n.height/2);const c=n.width/a.width,d=n.height/a.height,h=Math.max(1,c,d),p=c/h||0,f=d/h||0,v=a.width*a.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,10*(v-.12)+1):1;return{x:l-(r+a.left),y:u-(i+a.top),sx:p,sy:f,speed:m}}Vw("fab-transition","center center","out-in"),Vw("dialog-bottom-transition"),Vw("dialog-top-transition");const Bw=Vw("fade-transition");Vw("scale-transition"),Vw("scroll-x-transition"),Vw("scroll-x-reverse-transition"),Vw("scroll-y-transition"),Vw("scroll-y-reverse-transition"),Vw("slide-x-transition"),Vw("slide-x-reverse-transition");const Uw=Vw("slide-y-transition");Vw("slide-y-reverse-transition");const $w=Dw("expand-transition",Mw()),jw=Dw("expand-x-transition",Mw("",!0)),zw=Symbol.for("vuetify:list");function qw(){let{filterable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterable:!1};const t=T(zw,{filterable:!1,hasPrepend:n(!1),updateHasPrepend:()=>null}),a={filterable:t.filterable||e,hasPrepend:n(!1),updateHasPrepend:e=>{e&&(a.hasPrepend.value=e)}};return x(zw,a),t}function Hw(){return T(zw,null)}const Kw=e=>{const t={activate:t=>{let{id:n,value:a,activated:r}=t;return n=P(n),e&&!a&&1===r.size&&r.has(n)||(a?r.add(n):r.delete(n)),r},in:(e,n,a)=>{let r=new Set;if(null!=e)for(const i of xe(e))r=t.activate({id:i,value:!0,activated:new Set(r),children:n,parents:a});return r},out:e=>Array.from(e)};return t},Gw=e=>{const t=Kw(e);return{activate:e=>{let{activated:n,id:a,...r}=e;a=P(a);const i=n.has(a)?new Set([a]):new Set;return t.activate({...r,id:a,activated:i})},in:(e,n,a)=>{let r=new Set;if(null!=e){const i=xe(e);i.length&&(r=t.in(i.slice(0,1),n,a))}return r},out:(e,n,a)=>t.out(e,n,a)}},Ww={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const e=new Set;e.add(t);let n=r.get(t);for(;null!=n;)e.add(n),n=r.get(n);return e}return a.delete(t),a},select:()=>null},Qw={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let e=r.get(t);for(a.add(t);null!=e&&e!==t;)a.add(e),e=r.get(e);return a}return a.delete(t),a},select:()=>null},Yw={open:Qw.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const i=[];let s=r.get(t);for(;null!=s;)i.push(s),s=r.get(s);return new Set(i)}},Xw=e=>{const t={select:t=>{let{id:n,value:a,selected:r}=t;if(n=P(n),e&&!a){const e=Array.from(r.entries()).reduce((e,t)=>{let[n,a]=t;return"on"===a&&e.push(n),e},[]);if(1===e.length&&e[0]===n)return r}return r.set(n,a?"on":"off"),r},in:(e,n,a,r)=>{const i=new Map;for(const s of e||[])t.select({id:s,value:!0,selected:i,children:n,parents:a,disabled:r});return i},out:e=>{const t=[];for(const[n,a]of e.entries())"on"===a&&t.push(n);return t}};return t},Jw=e=>{const t=Xw(e);return{select:e=>{let{selected:n,id:a,...r}=e;a=P(a);const i=n.has(a)?new Map([[a,n.get(a)]]):new Map;return t.select({...r,id:a,selected:i})},in:(e,n,a,r)=>(null==e?void 0:e.length)?t.in(e.slice(0,1),n,a,r):new Map,out:(e,n,a)=>t.out(e,n,a)}},Zw=e=>{const t={select:t=>{let{id:n,value:a,selected:r,children:i,parents:s,disabled:o}=t;n=P(n);const l=new Map(r),u=[n];for(;u.length;){const e=u.shift();o.has(e)||r.set(P(e),a?"on":"off"),i.has(e)&&u.push(...i.get(e))}let c=P(s.get(n));for(;c;){let e=!0,t=!0;for(const n of i.get(c)){const a=P(n);if(!o.has(a)&&("on"!==r.get(a)&&(e=!1),r.has(a)&&"off"!==r.get(a)&&(t=!1),!e&&!t))break}r.set(c,e?"on":t?"off":"indeterminate"),c=P(s.get(c))}if(e&&!a){if(0===Array.from(r.entries()).reduce((e,t)=>{let[n,a]=t;return"on"===a&&e.push(n),e},[]).length)return l}return r},in:(e,n,a,r)=>{let i=new Map;for(const s of e||[])i=t.select({id:s,value:!0,selected:i,children:n,parents:a,disabled:r});return i},out:(e,t)=>{const n=[];for(const[a,r]of e.entries())"on"!==r||t.has(a)||n.push(a);return n}};return t},e_=Symbol.for("vuetify:nested"),t_={id:n(),root:{register:()=>null,unregister:()=>null,children:f(new Map),parents:f(new Map),disabled:f(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:f(!1),selectable:f(!1),opened:f(new Set),activated:f(new Set),selected:f(new Map),selectedValues:f([]),getPath:()=>[]}},n_=ae({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),a_=e=>{let t=!1;const a=n(new Map),r=n(new Map),i=n(new Set),s=ke(e,"opened",e.opened,e=>new Set(Array.isArray(e)?e.map(e=>P(e)):e),e=>[...e.values()]),l=o(()=>{if("object"==typeof e.activeStrategy)return e.activeStrategy;if("function"==typeof e.activeStrategy)return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return(e=>{const t=Kw(e);return{activate:e=>{let{id:n,activated:a,children:r,...i}=e;return n=P(n),r.has(n)?a:t.activate({id:n,activated:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"single-leaf":return(e=>{const t=Gw(e);return{activate:e=>{let{id:n,activated:a,children:r,...i}=e;return n=P(n),r.has(n)?a:t.activate({id:n,activated:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Kw(e.mandatory);default:return Gw(e.mandatory)}}),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;if("function"==typeof e.selectStrategy)return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return(e=>{const t=Jw(e);return{select:e=>{let{id:n,selected:a,children:r,...i}=e;return n=P(n),r.has(n)?a:t.select({id:n,selected:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"leaf":return(e=>{const t=Xw(e);return{select:e=>{let{id:n,selected:a,children:r,...i}=e;return n=P(n),r.has(n)?a:t.select({id:n,selected:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Xw(e.mandatory);case"single-independent":return Jw(e.mandatory);case"trunk":return(e=>{const t=Zw(e);return{select:t.select,in:t.in,out:(e,t,n)=>{const a=[];for(const[r,i]of e.entries())if("on"===i){if(n.has(r)){const t=n.get(r);if("on"===e.get(t))continue}a.push(r)}return a}}})(e.mandatory);default:return Zw(e.mandatory)}}),c=o(()=>{if("object"==typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return Yw;case"single":return Ww;default:return Qw}}),d=ke(e,"activated",e.activated,e=>l.value.in(e,a.value,r.value),e=>l.value.out(e,a.value,r.value)),h=ke(e,"selected",e.selected,e=>u.value.in(e,a.value,r.value,i.value),e=>u.value.out(e,a.value,r.value));function p(e){const t=[];let n=P(e);for(;null!=n;)t.unshift(n),n=r.value.get(n);return t}y(()=>{t=!0});const f=Se("nested"),v=new Set,m={id:n(),root:{opened:s,activatable:b(()=>e.activatable),selectable:b(()=>e.selectable),activated:d,selected:h,selectedValues:o(()=>{const e=[];for(const[t,n]of h.value.entries())"on"===n&&e.push(t);return e}),register:(e,t,n,s)=>{if(v.has(e))return p(e).map(String).join(" -> "),void p(t).concat(e).map(String).join(" -> ");v.add(e),t&&e!==t&&r.value.set(e,t),n&&i.value.add(e),s&&a.value.set(e,[]),null!=t&&a.value.set(t,[...a.value.get(t)||[],e])},unregister:e=>{if(t)return;v.delete(e),a.value.delete(e),i.value.delete(e);const n=r.value.get(e);if(n){const t=a.value.get(n)??[];a.value.set(n,t.filter(t=>t!==e))}r.value.delete(e)},open:(e,t,n)=>{f.emit("click:open",{id:e,value:t,path:p(e),event:n});const i=c.value.open({id:e,value:t,opened:new Set(s.value),children:a.value,parents:r.value,event:n});i&&(s.value=i)},openOnSelect:(e,t,n)=>{const i=c.value.select({id:e,value:t,selected:new Map(h.value),opened:new Set(s.value),children:a.value,parents:r.value,event:n});i&&(s.value=i)},select:(e,t,n)=>{f.emit("click:select",{id:e,value:t,path:p(e),event:n});const s=u.value.select({id:e,value:t,selected:new Map(h.value),children:a.value,parents:r.value,disabled:i.value,event:n});s&&(h.value=s),m.root.openOnSelect(e,t,n)},activate:(t,n,i)=>{if(!e.activatable)return m.root.select(t,!0,i);f.emit("click:activate",{id:t,value:n,path:p(t),event:i});const s=l.value.activate({id:t,value:n,activated:new Set(d.value),children:a.value,parents:r.value,event:i});if(s.size!==d.value.size)d.value=s;else{for(const e of s)if(!d.value.has(e))return void(d.value=s);for(const e of d.value)if(!s.has(e))return void(d.value=s)}},children:a,parents:r,disabled:i,getPath:p}};return x(e_,m),m.root},r_=(e,n,a)=>{const r=T(e_,t_),i=Symbol("nested item"),s=o(()=>P(t(e))??i),l={...r,id:s,open:(e,t)=>r.root.open(s.value,e,t),openOnSelect:(e,t)=>r.root.openOnSelect(s.value,e,t),isOpen:o(()=>r.root.opened.value.has(s.value)),parent:o(()=>r.root.parents.value.get(s.value)),activate:(e,t)=>r.root.activate(s.value,e,t),isActivated:o(()=>r.root.activated.value.has(s.value)),select:(e,t)=>r.root.select(s.value,e,t),isSelected:o(()=>"on"===r.root.selected.value.get(s.value)),isIndeterminate:o(()=>"indeterminate"===r.root.selected.value.get(s.value)),isLeaf:o(()=>!r.root.children.value.get(s.value)),isGroupActivator:r.isGroupActivator};return m(()=>{r.isGroupActivator||r.root.register(s.value,r.id.value,t(n),a)}),y(()=>{r.isGroupActivator||r.root.unregister(s.value)}),a&&x(e_,l),l};function i_(){const e=n(!1);C(()=>{window.requestAnimationFrame(()=>{e.value=!0})});return{ssrBootStyles:b(()=>e.value?void 0:{transition:"none !important"}),isBooted:O(e)}}const s_=$e({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return(()=>{const e=T(e_,t_);x(e_,{...e,isGroupActivator:!0})})(),()=>{var e;return null==(e=n.default)?void 0:e.call(n)}}}),o_=ae({activeColor:String,baseColor:String,color:String,collapseIcon:{type:be,default:"$collapse"},disabled:Boolean,expandIcon:{type:be,default:"$expand"},rawId:[String,Number],prependIcon:be,appendIcon:be,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ye(),...lb()},"VListGroup"),l_=ne()({name:"VListGroup",props:o_(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:u,id:c}=r_(()=>e.value,()=>e.disabled,!0),d=o(()=>`v-list-group--id-${String(e.rawId??c.value)}`),h=Hw(),{isBooted:p}=i_();function f(e){var t;["INPUT","TEXTAREA"].includes(null==(t=e.target)?void 0:t.tagName)||u(!a.value,e)}const v=o(()=>({onClick:f,class:"v-list-group__header",id:d.value})),m=o(()=>a.value?e.collapseIcon:e.expandIcon),g=o(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&m.value,appendIcon:e.appendIcon||!e.subgroup&&m.value,title:e.title,value:e.value}}));return ve(()=>r(e.tag,{class:s(["v-list-group",{"v-list-group--prepend":null==h?void 0:h.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:i(e.style)},{default:()=>[n.activator&&r(tb,{defaults:g.value},{default:()=>[r(s_,null,{default:()=>[n.activator({props:v.value,isOpen:a.value})]})]}),r(yb,{transition:{component:$w},disabled:!p.value},{default:()=>{var e;return[w(l("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[null==(e=n.default)?void 0:e.call(n)]),[[I,a.value]])]}})]})),{isOpen:a}}}),u_=ae({opacity:[Number,String],...ye(),...lb()},"VListItemSubtitle"),c_=ne()({name:"VListItemSubtitle",props:u_(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-list-item-subtitle",e.class]),style:i([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),d_=je("v-list-item-title"),h_=ae({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:be,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:qe(),onClickOnce:qe(),...Sb(),...ye(),...Eb(),...db(),...Rb(),...vb(),...ow(),...lb(),...ge(),...Nb({variant:"text"})},"VListItem"),p_=ne()({name:"VListItem",directives:{vRipple:kw},props:h_(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:i}=t;const s=sw(e,n),u=o(()=>void 0===e.value?s.href.value:e.value),{activate:c,isActivated:d,select:p,isOpen:f,isSelected:g,isIndeterminate:y,isGroupActivator:I,root:S,parent:C,openOnSelect:k,id:E}=r_(u,()=>e.disabled,!1),x=Hw(),T=o(()=>{var t;return!1!==e.active&&(e.active||(null==(t=s.isActive)?void 0:t.value)||(S.activatable.value?d.value:g.value))}),A=b(()=>!1!==e.link&&s.isLink.value),N=o(()=>!!x&&(S.selectable.value||S.activatable.value||null!=e.value)),V=o(()=>!e.disabled&&!1!==e.link&&(e.link||s.isClickable.value||N.value)),D=b(()=>e.rounded||e.nav),R=b(()=>e.color??e.activeColor),P=b(()=>({color:T.value?R.value??e.baseColor:e.baseColor,variant:e.variant}));function O(){null!=C.value&&S.open(C.value,!0),k(!0)}v(()=>{var e;return null==(e=s.isActive)?void 0:e.value},e=>{e&&O()}),m(()=>{var e;(null==(e=s.isActive)?void 0:e.value)&&O()});const{themeClasses:L}=Ce(e),{borderClasses:F}=Cb(e),{colorClasses:B,colorStyles:U,variantClasses:$}=Vb(P),{densityClasses:j}=xb(e),{dimensionStyles:z}=hb(e),{elevationClasses:q}=Pb(e),{roundedClasses:H}=mb(D),K=b(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),G=b(()=>void 0!==e.ripple&&e.ripple&&(null==x?void 0:x.filterable)?{keys:["Enter"]}:e.ripple),W=o(()=>({isActive:T.value,select:p,isOpen:f.value,isSelected:g.value,isIndeterminate:y.value}));function Q(t){var n,a;i("click",t),["INPUT","TEXTAREA"].includes(null==(n=t.target)?void 0:n.tagName)||V.value&&(null==(a=s.navigate)||a.call(s,t),I||(S.activatable.value?c(!d.value,t):(S.selectable.value||null!=e.value)&&p(!g.value,t)))}function Y(e){const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||("Enter"===e.key||" "===e.key&&!(null==x?void 0:x.filterable))&&(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",e)))}return ve(()=>{const t=A.value?"a":e.tag,n=a.title||null!=e.title,i=a.subtitle||null!=e.subtitle,o=!(!e.appendAvatar&&!e.appendIcon),u=!(!o&&!a.append),c=!(!e.prependAvatar&&!e.prependIcon),p=!(!c&&!a.prepend);return null==x||x.updateHasPrepend(p),e.activeColor&&ze("active-color",["color","base-color"]),w(r(t,h({class:["v-list-item",{"v-list-item--active":T.value,"v-list-item--disabled":e.disabled,"v-list-item--link":V.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!p&&(null==x?void 0:x.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&T.value},L.value,F.value,B.value,j.value,q.value,K.value,H.value,$.value,e.class],style:[U.value,z.value,e.style],tabindex:V.value?x?-2:0:void 0,"aria-selected":N.value?S.activatable.value?d.value:S.selectable.value?g.value:T.value:void 0,onClick:Q,onKeydown:V.value&&!A.value&&Y},s.linkProps),{default:()=>{var t;return[Ab(V.value||T.value,"v-list-item"),p&&l("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?r(tb,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var e;return[null==(e=a.prepend)?void 0:e.call(a,W.value)]}}):l(_,null,[e.prependAvatar&&r(Mb,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&r(cb,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),l("div",{class:"v-list-item__spacer"},null)]),l("div",{class:"v-list-item__content","data-no-activator":""},[n&&r(d_,{key:"title"},{default:()=>{var t;return[(null==(t=a.title)?void 0:t.call(a,{title:e.title}))??M(e.title)]}}),i&&r(c_,{key:"subtitle"},{default:()=>{var t;return[(null==(t=a.subtitle)?void 0:t.call(a,{subtitle:e.subtitle}))??M(e.subtitle)]}}),null==(t=a.default)?void 0:t.call(a,W.value)]),u&&l("div",{key:"append",class:"v-list-item__append"},[a.append?r(tb,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var e;return[null==(e=a.append)?void 0:e.call(a,W.value)]}}):l(_,null,[e.appendIcon&&r(cb,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&r(Mb,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),l("div",{class:"v-list-item__spacer"},null)])]}}),[[kw,V.value&&G.value]])}),{activate:c,isActivated:d,isGroupActivator:I,isSelected:g,list:x,select:p,root:S,id:E,link:s}}}),f_=ae({color:String,inset:Boolean,sticky:Boolean,title:String,...ye(),...lb()},"VListSubheader"),v_=ne()({name:"VListSubheader",props:f_(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:o}=ab(()=>e.color);return ve(()=>{const t=!(!n.default&&!e.title);return r(e.tag,{class:s(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:i([{textColorStyles:o},e.style])},{default:()=>{var a;return[t&&l("div",{class:"v-list-subheader__text"},[(null==(a=n.default)?void 0:a.call(n))??e.title])]}})}),{}}}),m_=ae({items:Array,returnObject:Boolean},"VListChildren"),g_=ne()({name:"VListChildren",props:m_(),setup(e,t){let{slots:n}=t;return qw(),()=>{var t,a;return(null==(t=n.default)?void 0:t.call(n))??(null==(a=e.items)?void 0:a.map(t=>{var a,i;let{children:s,props:o,type:l,raw:u}=t;if("divider"===l)return(null==(a=n.divider)?void 0:a.call(n,{props:o}))??r(Aw,o,null);if("subheader"===l)return(null==(i=n.subheader)?void 0:i.call(n,{props:o}))??r(v_,o,null);const c={subtitle:n.subtitle?e=>{var t;return null==(t=n.subtitle)?void 0:t.call(n,{...e,item:u})}:void 0,prepend:n.prepend?e=>{var t;return null==(t=n.prepend)?void 0:t.call(n,{...e,item:u})}:void 0,append:n.append?e=>{var t;return null==(t=n.append)?void 0:t.call(n,{...e,item:u})}:void 0,title:n.title?e=>{var t;return null==(t=n.title)?void 0:t.call(n,{...e,item:u})}:void 0},d=l_.filterProps(o);return s?r(l_,h(d,{value:e.returnObject?u:null==o?void 0:o.value,rawId:null==o?void 0:o.value}),{activator:t=>{let{props:a}=t;const i=h(o,a,{value:e.returnObject?u:o.value});return n.header?n.header({props:i}):r(p_,i,c)},default:()=>r(g_,{items:s,returnObject:e.returnObject},n)}):n.item?n.item({props:o}):r(p_,h(o,{value:e.returnObject?u:o.value}),c)}))}}}),y_=ae({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),b_=new Set(["item","divider","subheader"]);function w_(e,t){const n=Ge(t,e.itemTitle,t),a=Ge(t,e.itemValue,n),r=Ge(t,e.itemChildren),i=!0===e.itemProps?"object"!=typeof t||null==t||Array.isArray(t)?void 0:"children"in t?We(t,["children"]):t:Ge(t,e.itemProps);let s=Ge(t,e.itemType,"item");b_.has(s)||(s="item");const o={title:n,value:a,...i};return{type:s,title:String(o.title??""),value:o.value,props:o,children:"item"===s&&Array.isArray(r)?__(e,r):void 0,raw:t}}function __(e,t){const n=Ke(e,w_.neededProps),a=[];for(const r of t)a.push(w_(n,r));return a}function I_(e){const t=o(()=>__(e,e.items)),a=o(()=>t.value.some(e=>null===e.value)),r=n(new Map),i=n([]);return V(()=>{const e=t.value,n=new Map,a=[];for(let t=0;t<e.length;t++){const r=e[t];if(He(r.value)||null===r.value){let e=n.get(r.value);e||(e=[],n.set(r.value,e)),e.push(r)}else a.push(r)}r.value=n,i.value=a}),{items:t,transformIn:function(n){const s=r.value,o=t.value,l=i.value,u=a.value,c=e.returnObject,d=!!e.valueComparator,h=e.valueComparator||Ee,p=Ke(e,w_.neededProps),f=[];e:for(const e of n){if(!u&&null===e)continue;if(c&&"string"==typeof e){f.push(w_(p,e));continue}const t=s.get(e);if(!d&&t)f.push(...t);else{for(const t of d?o:l)if(h(e,t.value)){f.push(t);continue e}f.push(w_(p,e))}}return f},transformOut:function(t){return e.returnObject?t.map(e=>{let{raw:t}=e;return t}):t.map(e=>{let{value:t}=e;return t})}}}w_.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];const S_=new Set(["item","divider","subheader"]);function C_(e,t){const n=He(t)?t:Ge(t,e.itemTitle),a=He(t)?t:Ge(t,e.itemValue,void 0),r=Ge(t,e.itemChildren),i=!0===e.itemProps?We(t,["children"]):Ge(t,e.itemProps);let s=Ge(t,e.itemType,"item");S_.has(s)||(s="item");const o={title:n,value:a,...i};return{type:s,title:o.title,value:o.value,props:o,children:"item"===s&&r?k_(e,r):void 0,raw:t}}function k_(e,t){const n=[];for(const a of t)n.push(C_(e,a));return n}const E_=ae({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:be,collapseIcon:be,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":qe(),"onClick:select":qe(),"onUpdate:opened":qe(),...n_({selectStrategy:"single-leaf",openStrategy:"list"}),...Sb(),...ye(),...Eb(),...db(),...Rb(),...y_(),...vb(),...lb(),...ge(),...Nb({variant:"text"})},"VList"),x_=ne()({name:"VList",props:E_(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:a}=t;const{items:l}=function(e){return{items:o(()=>k_(e,e.items))}}(e),{themeClasses:u}=Ce(e),{backgroundColorClasses:c,backgroundColorStyles:d}=rb(()=>e.bgColor),{borderClasses:h}=Cb(e),{densityClasses:p}=xb(e),{dimensionStyles:v}=hb(e),{elevationClasses:m}=Pb(e),{roundedClasses:g}=mb(e),{children:y,open:w,parents:_,select:I,getPath:S}=a_(e),C=b(()=>e.lines?`v-list--${e.lines}-line`:void 0),k=b(()=>e.activeColor),E=b(()=>e.baseColor),x=b(()=>e.color);qw({filterable:e.filterable}),re({VListGroup:{activeColor:k,baseColor:E,color:x,expandIcon:b(()=>e.expandIcon),collapseIcon:b(()=>e.collapseIcon)},VListItem:{activeClass:b(()=>e.activeClass),activeColor:k,baseColor:E,color:x,density:b(()=>e.density),disabled:b(()=>e.disabled),lines:b(()=>e.lines),nav:b(()=>e.nav),slim:b(()=>e.slim),variant:b(()=>e.variant)}});const T=n(!1),A=f();function N(e){T.value=!0}function V(e){T.value=!1}function D(e){var t;T.value||e.relatedTarget&&(null==(t=A.value)?void 0:t.contains(e.relatedTarget))||P()}function M(e){const t=e.target;if(A.value&&("INPUT"!==t.tagName||!["Home","End"].includes(e.key))&&"TEXTAREA"!==t.tagName){if("ArrowDown"===e.key)P("next");else if("ArrowUp"===e.key)P("prev");else if("Home"===e.key)P("first");else{if("End"!==e.key)return;P("last")}e.preventDefault()}}function R(e){T.value=!0}function P(e){if(A.value)return Qe(A.value,e)}return ve(()=>r(e.tag,{ref:A,class:s(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},u.value,c.value,h.value,p.value,m.value,C.value,g.value,e.class]),style:i([d.value,v.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:N,onFocusout:V,onFocus:D,onKeydown:M,onMousedown:R},{default:()=>[r(g_,{items:l.value,returnObject:e.returnObject},a)]})),{open:w,select:I,focus:P,children:y,parents:_,getPath:S}}});function T_(e,t){return{x:e.x+t.x,y:e.y+t.y}}function A_(e,t){if("top"===e.side||"bottom"===e.side){const{side:n,align:a}=e;return T_({x:"left"===a?0:"center"===a?t.width/2:"right"===a?t.width:a,y:"top"===n?0:"bottom"===n?t.height:n},t)}if("left"===e.side||"right"===e.side){const{side:n,align:a}=e;return T_({x:"left"===n?0:"right"===n?t.width:n,y:"top"===a?0:"center"===a?t.height/2:"bottom"===a?t.height:a},t)}return T_({x:t.width/2,y:t.height/2},t)}const N_={static:function(){},connected:function(e,t,n){(Array.isArray(e.target.value)||Xe(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:r}=ie(()=>{const n=De(t.location,e.isRtl.value),a="overlap"===t.origin?n:"auto"===t.origin?Je(n):De(t.origin,e.isRtl.value);return n.side===a.side&&n.align===Ze(a).align?{preferredAnchor:et(n),preferredOrigin:et(a)}:{preferredAnchor:n,preferredOrigin:a}}),[i,s,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>o(()=>{const n=parseFloat(t[e]);return isNaN(n)?1/0:n})),c=o(()=>{if(Array.isArray(t.offset))return t.offset;if("string"==typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"==typeof t.offset?[t.offset,0]:[0,0]});let d=!1,h=-1;const p=new tt(4),f=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(e=>{e!==h&&p.clear(),requestAnimationFrame(e=>{h=e})}),p.isFull){const e=p.values();if(Ee(e.at(-1),e.at(-3))&&!Ee(e.at(-1),e.at(-2)))return}const e=y();e&&p.push(e.flipped)});let m=new nt({x:0,y:0,width:0,height:0});function y(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(m=Be(e.target.value));const t=function(e,t){const n=Ue(e);t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0);return n.y-=parseFloat(e.style.top||0),n}(e.contentEl.value,e.isRtl.value),o=at(e.contentEl.value);o.length||(o.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(t.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),t.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const h=o.reduce((e,t)=>{const n=rt(t);return e?new nt({x:Math.max(e.left,n.left),y:Math.max(e.top,n.top),width:Math.min(e.right,n.right)-Math.max(e.left,n.left),height:Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)}):n},void 0);h.x+=12,h.y+=12,h.width-=24,h.height-=24;let p={anchor:a.value,origin:r.value};function f(e){const n=new nt(t),a=A_(e.anchor,m),r=A_(e.origin,n);let{x:i,y:s}=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(a,r);switch(e.anchor.side){case"top":s-=c.value[0];break;case"bottom":s+=c.value[0];break;case"left":i-=c.value[0];break;case"right":i+=c.value[0]}switch(e.anchor.align){case"top":s-=c.value[1];break;case"bottom":s+=c.value[1];break;case"left":i-=c.value[1];break;case"right":i+=c.value[1]}n.x+=i,n.y+=s,n.width=Math.min(n.width,l.value),n.height=Math.min(n.height,u.value);return{overflows:st(n,h),x:i,y:s}}let v=0,g=0;const y={x:0,y:0},b={x:!1,y:!1};let w=-1;for(;!(w++>10);){const{x:e,y:n,overflows:a}=f(p);v+=e,g+=n,t.x+=e,t.y+=n;{const e=it(p.anchor),t=a.x.before||a.x.after,n=a.y.before||a.y.after;let r=!1;if(["x","y"].forEach(i=>{if("x"===i&&t&&!b.x||"y"===i&&n&&!b.y){const t={anchor:{...p.anchor},origin:{...p.origin}},n="x"===i?"y"===e?Ze:Je:"y"===e?Je:Ze;t.anchor=n(t.anchor),t.origin=n(t.origin);const{overflows:s}=f(t);(s[i].before<=a[i].before&&s[i].after<=a[i].after||s[i].before+s[i].after<(a[i].before+a[i].after)/2)&&(p=t,r=b[i]=!0)}}),r)continue}a.x.before&&(v+=a.x.before,t.x+=a.x.before),a.x.after&&(v-=a.x.after,t.x-=a.x.after),a.y.before&&(g+=a.y.before,t.y+=a.y.before),a.y.after&&(g-=a.y.after,t.y-=a.y.after);{const e=st(t,h);y.x=h.width-e.x.before-e.x.after,y.y=h.height-e.y.before-e.y.after,v+=e.x.before,t.x+=e.x.before,g+=e.y.before,t.y+=e.y.before}break}const _=it(p.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${p.anchor.side} ${p.anchor.align}`,transformOrigin:`${p.origin.side} ${p.origin.align}`,top:he(D_(g)),left:e.isRtl.value?void 0:he(D_(v)),right:e.isRtl.value?he(D_(-v)):void 0,minWidth:he("y"===_?Math.min(i.value,m.width):i.value),maxWidth:he(M_(Ne(y.x,i.value===1/0?0:i.value,l.value))),maxHeight:he(M_(Ne(y.y,s.value===1/0?0:s.value,u.value)))}),{available:y,contentBox:t,flipped:b}}return v(e.target,(e,t)=>{t&&!Array.isArray(t)&&f.unobserve(t),Array.isArray(e)?Ee(e,t)||y():e&&f.observe(e)},{immediate:!0}),v(e.contentEl,(e,t)=>{t&&f.unobserve(t),e&&f.observe(e)},{immediate:!0}),N(()=>{f.disconnect()}),v(()=>[a.value,r.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>y()),g(()=>{const e=y();if(!e)return;const{available:t,contentBox:n}=e;n.height>t.y&&requestAnimationFrame(()=>{y(),requestAnimationFrame(()=>{y()})})}),{updateLocation:y}}},V_=ae({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"==typeof e||e in N_},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function D_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function M_(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let R_=!0;const P_=[];let O_=-1;function L_(){cancelAnimationFrame(O_),O_=requestAnimationFrame(()=>{const e=P_.shift();e&&e(),P_.length?L_():R_=!0})}const F_={none:null,close:function(e){$_(U_(e.target.value,e.contentEl.value),function(t){e.isActive.value=!1})},block:function(e,t){var n;const a=null==(n=e.root.value)?void 0:n.offsetParent,r=U_(e.target.value,e.contentEl.value),i=[...new Set([...at(r,t.contained?a:void 0),...at(e.contentEl.value,t.contained?a:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(l=a||document.documentElement,ot(l)&&l);var l;o&&e.root.value.classList.add("v-overlay--scroll-blocked");i.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",he(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",he(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",he(s)),e.classList.add("v-overlay-scroll-blocked")}),N(()=>{i.forEach((e,t)=>{const n=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),a=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),r=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-n,e.scrollTop=-a,e.style.scrollBehavior=r}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})},reposition:function(e,t,n){let a=!1,r=-1,i=-1;function s(t){var n;n=()=>{var n,r;const i=performance.now();null==(r=(n=e.updateLocation).value)||r.call(n,t);const s=performance.now()-i;a=s/(1e3/60)>2},!R_||P_.length?(P_.push(n),L_()):(R_=!1,n(),L_())}i=("undefined"==typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{n.run(()=>{$_(U_(e.target.value,e.contentEl.value),e=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{s(e)})})):s(e)})})}),N(()=>{"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(i),cancelAnimationFrame(r)})}},B_=ae({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"==typeof e||e in F_}},"VOverlay-scroll-strategies");function U_(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!(null==t?void 0:t.contains(e))):e??t}function $_(e,t){const n=[document,...at(e)];n.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),N(()=>{n.forEach(e=>{e.removeEventListener("scroll",t)})})}const j_=Symbol.for("vuetify:v-menu"),z_=ae({closeDelay:[Number,String],openDelay:[Number,String]},"delay");const q_=ae({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...z_()},"VOverlay-activator");function H_(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const i=Se("useActivator"),s=f();let l=!1,u=!1,c=!0;const d=o(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),p=o(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:y}=function(e,t){let n=()=>{};function a(a){null==n||n();const r=Number(a?e.openDelay:e.closeDelay);return new Promise(e=>{n=lt(r,()=>{null==t||t(a),e(a)})})}return{clearDelay:n,runOpenDelay:function(){return a(!0)},runCloseDelay:function(){return a(!1)}}}(e,t=>{t!==(e.openOnHover&&l||d.value&&u)||e.openOnHover&&n.value&&!a.value||(n.value!==t&&(c=!0),n.value=t)}),b=f(),w=e=>{e.stopPropagation(),s.value=e.currentTarget||e.target,n.value||(b.value=[e.clientX,e.clientY]),n.value=!n.value},_=e=>{var t;(null==(t=e.sourceCapabilities)?void 0:t.firesTouchEvents)||(l=!0,s.value=e.currentTarget||e.target,m())},I=e=>{l=!1,y()},S=e=>{!1!==ct(e.target,":focus-visible")&&(u=!0,e.stopPropagation(),s.value=e.currentTarget||e.target,m())},C=e=>{u=!1,e.stopPropagation(),y()},k=o(()=>{const t={};return p.value&&(t.onClick=w),e.openOnHover&&(t.onMouseenter=_,t.onMouseleave=I),d.value&&(t.onFocus=S,t.onBlur=C),t}),E=o(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{l=!0,m()},t.onMouseleave=()=>{l=!1,y()}),d.value&&(t.onFocusin=()=>{u=!0,m()},t.onFocusout=()=>{u=!1,y()}),e.closeOnContentClick){const e=T(j_,null);t.onClick=()=>{n.value=!1,null==e||e.closeParents()}}return t}),x=o(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{c&&(l=!0,c=!1,m())},t.onMouseleave=()=>{l=!1,y()}),t});v(a,t=>{var a;!t||(!e.openOnHover||l||d.value&&u)&&(!d.value||u||e.openOnHover&&l)||(null==(a=r.value)?void 0:a.contains(document.activeElement))||(n.value=!1)}),v(n,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const A=ut();V(()=>{A.value&&g(()=>{s.value=A.el})});const D=ut(),M=o(()=>"cursor"===e.target&&b.value?b.value:D.value?D.el:K_(e.target,i)||s.value),R=o(()=>Array.isArray(M.value)?void 0:M.value);let P;return v(()=>!!e.activator,t=>{t&&Me?(P=L(),P.run(()=>{!function(e,t,n){let{activatorEl:a,activatorEvents:r}=n;function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&dt(t,h(r.value,n))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&ht(t,h(r.value,n))}function o(){const n=K_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator,t);return a.value=(null==n?void 0:n.nodeType)===Node.ELEMENT_NODE?n:void 0,a.value}v(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=o(t);e&&s(e)}e&&g(()=>i())},{immediate:!0}),v(()=>e.activatorProps,()=>{i()}),N(()=>{s()})}(e,i,{activatorEl:s,activatorEvents:k})})):P&&P.stop()},{flush:"post",immediate:!0}),N(()=>{null==P||P.stop()}),{activatorEl:s,activatorRef:A,target:M,targetEl:R,targetRef:D,activatorEvents:k,contentEvents:E,scrimEvents:x}}function K_(e,t){var n,a;if(!e)return;let r;if("parent"===e){let e=null==(a=null==(n=null==t?void 0:t.proxy)?void 0:n.$el)?void 0:a.parentNode;for(;null==e?void 0:e.hasAttribute("data-no-activator");)e=e.parentNode;r=e}else r="string"==typeof e?document.querySelector(e):"$el"in e?e.$el:e;return r}const G_=ae({eager:Boolean},"lazy");function W_(e,t){const a=n(!1),r=b(()=>a.value||e.eager||t.value);return v(t,()=>a.value=!0),{isBooted:a,hasContent:r,onAfterLeave:function(){e.eager||(a.value=!1)}}}function Q_(){const e=Se("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const Y_=Symbol.for("vuetify:stack"),X_=S([]);function J_(){return!0}function Z_(e,t,n){if(!e||!1===eI(e,n))return!1;const a=ft(t);if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=("object"==typeof n.value&&n.value.include||(()=>[]))();return r.push(t),!r.some(t=>null==t?void 0:t.contains(e.target))}function eI(e,t){return("object"==typeof t.value&&t.value.closeConditional||J_)(e)}function tI(e,t){const n=ft(e);t(document),"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const nI={mounted(e,t){const n=n=>function(e,t,n){const a="function"==typeof n.value?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&Z_(e,t,n)&&setTimeout(()=>{eI(e,n)&&a&&a(e)},0)}(n,e,t),a=n=>{e._clickOutside.lastMousedownWasOutside=Z_(n,e,t)};tI(e,e=>{e.addEventListener("click",n,!0),e.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(tI(e,n=>{var a;if(!n||!(null==(a=e._clickOutside)?void 0:a[t.instance.$.uid]))return;const{onClick:r,onMousedown:i}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete e._clickOutside[t.instance.$.uid])}};function aI(e){const{modelValue:t,color:n,...a}=e;return r(d,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&l("div",h({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const rI=ae({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...q_(),...ye(),...db(),...G_(),...V_(),...B_(),...ge(),...gb()},"VOverlay"),iI=ne()({name:"VOverlay",directives:{vClickOutside:nI},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...rI()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,a){let{slots:i,attrs:s,emit:u}=a;const c=Se("VOverlay"),d=f(),p=f(),m=f(),k=ke(e,"modelValue"),E=o({get:()=>k.value,set:t=>{t&&e.disabled||(k.value=t)}}),{themeClasses:A}=Ce(e),{rtlClasses:D,isRtl:M}=Ve(),{hasContent:R,onAfterLeave:B}=W_(e,E),U=rb(()=>"string"==typeof e.scrim?e.scrim:null),{globalTop:$,localTop:j,stackStyles:z}=function(e,a,r){const i=Se("useStack"),s=!r,o=T(Y_,void 0),l=S({activeChildren:new Set});x(Y_,l);const u=n(Number(t(a)));Ye(e,()=>{var e;const n=null==(e=X_.at(-1))?void 0:e[1];u.value=n?n+10:Number(t(a)),s&&X_.push([i.uid,u.value]),null==o||o.activeChildren.add(i.uid),N(()=>{if(s){const e=P(X_).findIndex(e=>e[0]===i.uid);X_.splice(e,1)}null==o||o.activeChildren.delete(i.uid)})});const c=n(!0);s&&V(()=>{var e;const t=(null==(e=X_.at(-1))?void 0:e[0])===i.uid;setTimeout(()=>c.value=t)});const d=b(()=>!l.activeChildren.size);return{globalTop:O(c),localTop:d,stackStyles:b(()=>({zIndex:u.value}))}}(E,()=>e.zIndex,e._disableGlobalStack),{activatorEl:q,activatorRef:H,target:K,targetEl:G,targetRef:W,activatorEvents:Q,contentEvents:Y,scrimEvents:X}=H_(e,{isActive:E,isTop:j,contentEl:m}),{teleportTarget:J}=function(e){return{teleportTarget:o(()=>{const t=e();if(!0===t||!Me)return;const n=!1===t?document.body:"string"==typeof t?document.querySelector(t):t;if(null==n)return;let a=[...n.children].find(e=>e.matches(".v-overlay-container"));return a||(a=document.createElement("div"),a.className="v-overlay-container",n.appendChild(a)),a})}}(()=>{var t,n,a;const r=e.attach||e.contained;if(r)return r;const i=(null==(t=null==q?void 0:q.value)?void 0:t.getRootNode())||(null==(a=null==(n=c.proxy)?void 0:n.$el)?void 0:a.getRootNode());return i instanceof ShadowRoot&&i}),{dimensionStyles:Z}=hb(e),ee=function(){if(!Me)return n(!1);const{ssr:e}=pt();if(e){const e=n(!1);return C(()=>{e.value=!0}),e}return n(!0)}(),{scopeId:te}=Q_();v(()=>e.disabled,e=>{e&&(E.value=!1)});const{contentStyles:ne,updateLocation:ae}=function(e,t){const n=f({}),a=f();function r(e){var t;null==(t=a.value)||t.call(a,e)}function i(e){var t;null==(t=a.value)||t.call(a,e)}function s(e){var t;null==(t=a.value)||t.call(a,e)}return Me&&Ye(()=>!(!t.isActive.value||!e.locationStrategy),o=>{var l,u;v(()=>e.locationStrategy,o),N(()=>{window.removeEventListener("resize",r),null==visualViewport||visualViewport.removeEventListener("resize",i),null==visualViewport||visualViewport.removeEventListener("scroll",s),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),null==visualViewport||visualViewport.addEventListener("resize",i,{passive:!0}),null==visualViewport||visualViewport.addEventListener("scroll",s,{passive:!0}),"function"==typeof e.locationStrategy?a.value=null==(l=e.locationStrategy(t,e,n))?void 0:l.updateLocation:a.value=null==(u=N_[e.locationStrategy](t,e,n))?void 0:u.updateLocation}),{contentStyles:n,updateLocation:a}}(e,{isRtl:M,contentEl:m,target:K,isActive:E});function re(t){u("click:outside",t),e.persistent?pe():E.value=!1}function ie(t){return E.value&&$.value&&(!e.scrim||t.target===p.value||t instanceof MouseEvent&&t.shadowTarget===p.value)}function se(t){var n,a,r;"Escape"===t.key&&$.value&&((null==(n=m.value)?void 0:n.contains(document.activeElement))||u("keydown",t),e.persistent?pe():(E.value=!1,(null==(a=m.value)?void 0:a.contains(document.activeElement))&&(null==(r=q.value)||r.focus())))}function oe(e){("Escape"!==e.key||$.value)&&u("keydown",e)}!function(e,t){if(!Me)return;let n;V(async()=>{null==n||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=L(),await new Promise(e=>setTimeout(e)),n.active&&n.run(()=>{var a;"function"==typeof e.scrollStrategy?e.scrollStrategy(t,e,n):null==(a=F_[e.scrollStrategy])||a.call(F_,t,e,n)}))}),N(()=>{null==n||n.stop()})}(e,{root:d,contentEl:m,targetEl:G,target:K,isActive:E,updateLocation:ae}),Me&&v(E,e=>{e?window.addEventListener("keydown",se):window.removeEventListener("keydown",se)},{immediate:!0}),y(()=>{Me&&window.removeEventListener("keydown",se)});const le=null==(ce=null==(ue=Se("useRouter"))?void 0:ue.proxy)?void 0:ce.$router;var ue,ce;Ye(()=>e.closeOnBack,()=>{!function(e,t){let n,a,r=!1;function i(e){var t;(null==(t=e.state)?void 0:t.replaced)||(r=!0,setTimeout(()=>r=!1))}Me&&(null==e?void 0:e.beforeEach)&&(g(()=>{window.addEventListener("popstate",i),n=e.beforeEach((e,n,a)=>{lw?r?t(a):a():setTimeout(()=>r?t(a):a()),lw=!0}),a=null==e?void 0:e.afterEach(()=>{lw=!1})}),N(()=>{window.removeEventListener("popstate",i),null==n||n(),null==a||a()}))}(le,t=>{$.value&&E.value?(t(!1),e.persistent?pe():E.value=!1):t()})});const de=f();function pe(){e.noClickAnimation||m.value&&Pe(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Le})}function fe(){u("afterEnter")}function me(){B(),u("afterLeave")}return v(()=>E.value&&(e.absolute||e.contained)&&null==J.value,e=>{if(e){const e=vt(d.value);e&&e!==document.scrollingElement&&(de.value=e.scrollTop)}}),ve(()=>{var t;return l(_,null,[null==(t=i.activator)?void 0:t.call(i,{isActive:E.value,targetRef:W,props:h({ref:H},Q.value,e.activatorProps)}),ee.value&&R.value&&r(F,{disabled:!J.value,to:J.value},{default:()=>[l("div",h({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":E.value,"v-overlay--contained":e.contained},A.value,D.value,e.class],style:[z.value,{"--v-overlay-opacity":e.opacity,top:he(de.value)},e.style],ref:d,onKeydown:oe},te,s),[r(aI,h({color:U,modelValue:E.value&&!!e.scrim,ref:p},X.value),null),r(yb,{appear:!0,persisted:!0,transition:e.transition,target:K.value,onAfterEnter:fe,onAfterLeave:me},{default:()=>{var t;return[w(l("div",h({ref:m,class:["v-overlay__content",e.contentClass],style:[Z.value,ne.value]},Y.value,e.contentProps),[null==(t=i.default)?void 0:t.call(i,{isActive:E})]),[[I,E.value],[nI,{handler:re,closeConditional:ie,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:p,target:K,animateClick:pe,contentEl:m,globalTop:$,localTop:j,updateLocation:ae}}}),sI=Symbol("Forwarded refs");function oI(e,t){let n=e;for(;n;){const e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Object.getPrototypeOf(n)}}function lI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[sI]=n,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const a of n)if(a.value&&Reflect.has(a.value,t)){const e=Reflect.get(a.value,t);return"function"==typeof e?e.bind(a.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,t))return!0;return!1},set(e,t,a){if(Reflect.has(e,t))return Reflect.set(e,t,a);if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,t))return Reflect.set(r.value,t,a);return!1},getOwnPropertyDescriptor(e,t){var a;const r=Reflect.getOwnPropertyDescriptor(e,t);if(r)return r;if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of n){if(!e.value)continue;const n=oI(e.value,t)??("_"in e.value?oI(null==(a=e.value._)?void 0:a.setupState,t):void 0);if(n)return n}for(const e of n){const n=e.value&&e.value[sI];if(!n)continue;const a=n.slice();for(;a.length;){const e=a.shift(),n=oI(e.value,t);if(n)return n;const r=e.value&&e.value[sI];r&&a.push(...r)}}}}})}const uI=ae({id:String,submenu:Boolean,disableInitialFocus:Boolean,...We(rI({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ow}}),["absolute"])},"VMenu"),cI=ne()({name:"VMenu",props:uI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=ke(e,"modelValue"),{scopeId:s}=Q_(),{isRtl:l}=Ve(),u=E(),c=b(()=>e.id||`v-menu-${u}`),d=f(),p=T(j_,null),m=n(new Set);async function w(e){var t,n,a;const r=e.relatedTarget,s=e.target;if(await g(),i.value&&r!==s&&(null==(t=d.value)?void 0:t.contentEl)&&(null==(n=d.value)?void 0:n.globalTop)&&![document,d.value.contentEl].includes(s)&&!d.value.contentEl.contains(s)){null==(a=mt(d.value.contentEl)[0])||a.focus()}}function _(e){null==p||p.closeParents(e)}function I(t){var n,a,r,s,o;if(!e.disabled)if("Tab"===t.key||"Enter"===t.key&&!e.closeOnContentClick){if("Enter"===t.key&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;"Enter"===t.key&&t.preventDefault();gt(mt(null==(n=d.value)?void 0:n.contentEl,!1),t.shiftKey?"prev":"next",e=>e.tabIndex>=0)||(i.value=!1,null==(r=null==(a=d.value)?void 0:a.activatorEl)||r.focus())}else e.submenu&&t.key===(l.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,null==(o=null==(s=d.value)?void 0:s.activatorEl)||o.focus())}function S(t){var n;if(e.disabled)return;const a=null==(n=d.value)?void 0:n.contentEl;a&&i.value?"ArrowDown"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(a,"next")):"ArrowUp"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(a,"prev")):e.submenu&&(t.key===(l.value?"ArrowRight":"ArrowLeft")?i.value=!1:t.key===(l.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),Qe(a,"first"))):(e.submenu?t.key===(l.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(i.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>S(t))))}x(j_,{register(){m.value.add(u)},unregister(){m.value.delete(u)},closeParents(t){setTimeout(()=>{var n;m.value.size||e.persistent||null!=t&&(!(null==(n=d.value)?void 0:n.contentEl)||yt(t,d.value.contentEl))||(i.value=!1,null==p||p.closeParents())},40)}}),y(()=>{null==p||p.unregister(),document.removeEventListener("focusin",w)}),B(()=>i.value=!1),v(i,t=>{t?(null==p||p.register(),Me&&!e.disableInitialFocus&&document.addEventListener("focusin",w,{once:!0})):(null==p||p.unregister(),Me&&document.removeEventListener("focusin",w))},{immediate:!0});const C=o(()=>h({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":c.value,onKeydown:S},e.activatorProps));return ve(()=>{const t=iI.filterProps(e);return r(iI,h({ref:d,id:c.value,class:["v-menu",e.class],style:e.style},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,absolute:!0,activatorProps:C.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":_,onKeydown:I},s),{activator:a.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(tb,{root:"VMenu"},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a,...t)]}})}})}),lI({id:c,"openChildren":m},d)}}),dI={key:0},hI={key:1,class:"text-body-2 font-weight-medium"},pI={key:1},fI=Zy({__name:"AuthStatus",props:{user:{type:Object,default:null}},emits:["login","logout"],setup(e,{emit:t}){const n=t,a=()=>{n("login")},i=()=>{n("logout")};return(t,n)=>($(),U("div",null,[e.user?($(),U("div",dI,[r(cI,{location:"bottom"},{activator:j(({props:t})=>[r(xw,h({icon:""},t,{variant:"text",class:"minimal-user-button"}),{default:j(()=>[r(Mb,{color:"primary",size:"32",class:"minimal-avatar"},{default:j(()=>{var t;return[e.user.photoURL?($(),q(Ib,{key:0,src:e.user.photoURL,alt:e.user.displayName},null,8,["src","alt"])):($(),U("span",hI,M(null==(t=e.user.displayName)?void 0:t.charAt(0)),1))]}),_:1})]),_:2},1040)]),default:j(()=>[r(x_,{class:"minimal-menu"},{default:j(()=>[r(p_,{title:e.user.displayName,subtitle:e.user.email,class:"minimal-menu-item"},null,8,["title","subtitle"]),r(Aw,{class:"minimal-divider"}),r(p_,{onClick:i,"prepend-icon":"mdi-logout",class:"minimal-menu-item"},{default:j(()=>[r(d_,{class:"text-body-2"},{default:j(()=>n[0]||(n[0]=[z("",-1)])),_:1,__:[0]})]),_:1})]),_:1})]),_:1})])):($(),U("div",pI,[r(xw,{onClick:a,"prepend-icon":"mdi-google",variant:"outlined",color:"primary",class:"minimal-login-button"},{default:j(()=>n[1]||(n[1]=[z(" Google ",-1)])),_:1,__:[1]})]))]))}},[["__scopeId","data-v-91d386da"]]),vI=ae({text:String,onClick:qe(),...ye(),...ge()},"VLabel"),mI=ne()({name:"VLabel",props:vI(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;return l("label",{class:s(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:i(e.style),onClick:e.onClick},[e.text,null==(t=n.default)?void 0:t.call(n)])}),{}}}),gI=Symbol.for("vuetify:selection-control-group"),yI=ae({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:be,trueIcon:be,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ee},...ye(),...Eb(),...ge()},"SelectionControlGroup"),bI=ae({...yI({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");ne()({name:"VSelectionControlGroup",props:bI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"modelValue"),r=E(),o=b(()=>e.id||`v-selection-control-group-${r}`),u=b(()=>e.name||o.value),c=new Set;return x(gI,{modelValue:a,forceUpdate:()=>{c.forEach(e=>e())},onForceUpdate:e=>{c.add(e),N(()=>{c.delete(e)})}}),re({[e.defaultsTarget]:{color:b(()=>e.color),disabled:b(()=>e.disabled),density:b(()=>e.density),error:b(()=>e.error),inline:b(()=>e.inline),modelValue:a,multiple:b(()=>!!e.multiple||null==e.multiple&&Array.isArray(a.value)),name:u,falseIcon:b(()=>e.falseIcon),trueIcon:b(()=>e.trueIcon),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),type:b(()=>e.type),valueComparator:b(()=>e.valueComparator)}}),ve(()=>{var t;return l("div",{class:s(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:i(e.style),role:"radio"===e.type?"radiogroup":void 0},[null==(t=n.default)?void 0:t.call(n)])}),{}}});const wI=ae({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ye(),...yI()},"VSelectionControl");const _I=ne()({name:"VSelectionControl",directives:{vRipple:kw},inheritAttrs:!1,props:wI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:a,slots:u}=t;const{group:c,densityClasses:d,icon:p,model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,trueValue:C}=function(e){const t=T(gI,void 0),{densityClasses:n}=xb(e),a=ke(e,"modelValue"),r=o(()=>void 0!==e.trueValue?e.trueValue:void 0===e.value||e.value),i=o(()=>void 0!==e.falseValue&&e.falseValue),s=o(()=>!!e.multiple||null==e.multiple&&Array.isArray(a.value)),l=o({get(){const n=t?t.modelValue.value:a.value;return s.value?xe(n).some(t=>e.valueComparator(t,r.value)):e.valueComparator(n,r.value)},set(n){if(e.readonly)return;const o=n?r.value:i.value;let l=o;s.value&&(l=n?[...xe(a.value),o]:xe(a.value).filter(t=>!e.valueComparator(t,r.value))),t?t.modelValue.value=l:a.value=l}}),{textColorClasses:u,textColorStyles:c}=ab(()=>{if(!e.error&&!e.disabled)return l.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:h}=rb(()=>!l.value||e.error||e.disabled?e.baseColor:e.color),p=o(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:i,model:l,textColorClasses:u,textColorStyles:c,backgroundColorClasses:d,backgroundColorStyles:h,icon:p}}(e),k=E(),x=n(!1),A=n(!1),N=f(),V=b(()=>e.id||`input-${k}`),D=b(()=>!e.disabled&&!e.readonly);function M(e){D.value&&(x.value=!0,!1!==ct(e.target,":focus-visible")&&(A.value=!0))}function R(){x.value=!1,A.value=!1}function P(e){e.stopPropagation()}function O(t){D.value?(e.readonly&&c&&g(()=>c.forceUpdate()),v.value=t.target.checked):N.value&&(N.value.checked=v.value)}return null==c||c.onForceUpdate(()=>{N.value&&(N.value.checked=v.value)}),ve(()=>{var t,n;const o=u.label?u.label({label:e.label,props:{for:V.value}}):e.label,[c,f]=bt(a),g=l("input",h({ref:N,checked:v.value,disabled:!!e.disabled,id:V.value,onBlur:R,onFocus:M,onInput:O,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:C.value,name:e.name,"aria-checked":"checkbox"===e.type?v.value:void 0},f),null);return l("div",h({class:["v-selection-control",{"v-selection-control--dirty":v.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":x.value,"v-selection-control--focus-visible":A.value,"v-selection-control--inline":e.inline},d.value,e.class]},c,{style:e.style}),[l("div",{class:s(["v-selection-control__wrapper",m.value]),style:i(y.value)},[null==(t=u.default)?void 0:t.call(u,{backgroundColorClasses:I,backgroundColorStyles:S}),w(l("div",{class:s(["v-selection-control__input"])},[(null==(n=u.input)?void 0:n.call(u,{model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,inputNode:g,icon:p.value,props:{onFocus:M,onBlur:R,id:V.value}}))??l(_,null,[p.value&&r(cb,{key:"icon",icon:p.value},null),g])]),[[kw,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),o&&r(mI,{for:V.value,onClick:P},{default:()=>[o]})])}),{isFocused:x,input:N}}}),II=ae({indeterminate:Boolean,indeterminateIcon:{type:be,default:"$checkboxIndeterminate"},...wI({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),SI=ne()({name:"VCheckboxBtn",props:II(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"indeterminate"),i=ke(e,"modelValue");function s(e){a.value&&(a.value=!1)}const o=b(()=>a.value?e.indeterminateIcon:e.falseIcon),l=b(()=>a.value?e.indeterminateIcon:e.trueIcon);return ve(()=>{const t=We(_I.filterProps(e),["modelValue"]);return r(_I,h(t,{modelValue:i.value,"onUpdate:modelValue":[e=>i.value=e,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function CI(e){const{t:t}=wt();return{InputIcon:function(n){let{name:a,color:i,...s}=n;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[a],l=e[`onClick:${a}`],u=l&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return r(cb,h({icon:e[`${a}Icon`],"aria-label":u,onClick:l,onKeydown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),_t(l,new PointerEvent("click",e)))},color:i},s),null)}}}const kI=ae({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ye(),...gb({transition:{component:Uw,leaveAbsolute:!0,group:!0}})},"VMessages"),EI=ne()({name:"VMessages",props:kI(),setup(e,t){let{slots:n}=t;const a=o(()=>xe(e.messages)),{textColorClasses:u,textColorStyles:c}=ab(()=>e.color);return ve(()=>r(yb,{transition:e.transition,tag:"div",class:s(["v-messages",u.value,e.class]),style:i([c.value,e.style])},{default:()=>[e.active&&a.value.map((e,t)=>l("div",{class:"v-messages__message",key:`${t}-${a.value}`},[n.message?n.message({message:e}):e]))]})),{}}}),xI=ae({focused:Boolean,"onUpdate:focused":qe()},"focus");function TI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const n=ke(e,"focused");return{focusClasses:b(()=>({[`${t}--focused`]:n.value})),isFocused:n,focus:function(){n.value=!0},blur:function(){n.value=!1}}}const AI=Symbol.for("vuetify:form"),NI=ae({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function VI(e){const t=T(AI,null);return{...t,isReadonly:o(()=>!!((null==e?void 0:e.readonly)??(null==t?void 0:t.isReadonly.value))),isDisabled:o(()=>!!((null==e?void 0:e.disabled)??(null==t?void 0:t.isDisabled.value)))}}const DI=Symbol.for("vuetify:rules");const MI=ae({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...xI()},"validation");function RI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E();const r=ke(e,"modelValue"),i=o(()=>void 0===e.validationValue?r.value:e.validationValue),s=VI(e),l=function(e){const t=T(DI,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return(null==t?void 0:t.resolve(e))??b(e)}(()=>e.rules),u=f([]),c=n(!0),d=o(()=>!(!xe(""===r.value?null:r.value).length&&!xe(""===i.value?null:i.value).length)),h=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)?xe(e.errorMessages).concat(u.value).slice(0,Math.max(0,Number(e.maxErrors))):u.value}),p=o(()=>{var t;let n=(e.validateOn??(null==(t=s.validateOn)?void 0:t.value))||"input";"lazy"===n&&(n="input lazy"),"eager"===n&&(n="input eager");const a=new Set((null==n?void 0:n.split(" "))??[]);return{input:a.has("input"),blur:a.has("blur")||a.has("input")||a.has("invalid-input"),invalidInput:a.has("invalid-input"),lazy:a.has("lazy"),eager:a.has("eager")}}),w=o(()=>{var t;return!e.error&&!(null==(t=e.errorMessages)?void 0:t.length)&&(!e.rules.length||(c.value?!u.value.length&&!p.value.lazy||null:!u.value.length))}),_=n(!1),I=o(()=>({[`${t}--error`]:!1===w.value,[`${t}--dirty`]:d.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),S=Se("validation"),k=o(()=>e.name??A(a));async function x(){r.value=null,await g(),await N()}async function N(){c.value=!0,p.value.lazy?u.value=[]:await V(!p.value.eager)}async function V(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=[];_.value=!0;for(const a of l.value){if(n.length>=Number(e.maxErrors??1))break;const t="function"==typeof a?a:()=>a,r=await t(i.value);!0!==r&&(!1!==r&&"string"!=typeof r||n.push(r||""))}return u.value=n,_.value=!1,c.value=t,u.value}return m(()=>{var e;null==(e=s.register)||e.call(s,{id:k.value,vm:S,validate:V,reset:x,resetValidation:N})}),y(()=>{var e;null==(e=s.unregister)||e.call(s,k.value)}),C(async()=>{var e;p.value.lazy||await V(!p.value.eager),null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),Ye(()=>p.value.input||p.value.invalidInput&&!1===w.value,()=>{v(i,()=>{if(null!=i.value)V();else if(e.focused){const t=v(()=>e.focused,e=>{e||V(),t()})}})}),Ye(()=>p.value.blur,()=>{v(()=>e.focused,e=>{e||V()})}),v([w,h],()=>{var e;null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),{errorMessages:h,isDirty:d,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:w,isValidating:_,reset:x,resetValidation:N,validate:V,validationClasses:I}}const PI=ae({id:String,appendIcon:be,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:be,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":qe(),"onClick:append":qe(),...ye(),...Eb(),...Ke(db(),["maxWidth","minWidth","width"]),...ge(),...MI()},"VInput"),OI=ne()({name:"VInput",props:{...PI()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:u}=t;const{densityClasses:c}=xb(e),{dimensionStyles:d}=hb(e),{themeClasses:h}=Ce(e),{rtlClasses:p}=Ve(),{InputIcon:f}=CI(e),v=E(),m=o(()=>e.id||`input-${v}`),{errorMessages:g,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,reset:k,resetValidation:x,validate:T,validationClasses:A}=RI(e,"v-input",m),N=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)||!I.value&&g.value.length?g.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),V=b(()=>N.value.length>0),D=b(()=>!e.hideDetails||"auto"===e.hideDetails&&(V.value||!!a.details)),M=o(()=>D.value?`${m.value}-messages`:void 0),R=o(()=>({id:m,messagesId:M,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,hasDetails:D,reset:k,resetValidation:x,validate:T})),P=b(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),O=b(()=>{if(e.iconColor)return!0===e.iconColor?P.value:e.iconColor});return ve(()=>{var t,n,o,u;const v=!(!a.prepend&&!e.prependIcon),m=!(!a.append&&!e.appendIcon);return l("div",{class:s(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},c.value,h.value,p.value,A.value,e.class]),style:i([d.value,e.style])},[v&&l("div",{key:"prepend",class:"v-input__prepend"},[null==(t=a.prepend)?void 0:t.call(a,R.value),e.prependIcon&&r(f,{key:"prepend-icon",name:"prepend",color:O.value},null)]),a.default&&l("div",{class:"v-input__control"},[null==(n=a.default)?void 0:n.call(a,R.value)]),m&&l("div",{key:"append",class:"v-input__append"},[e.appendIcon&&r(f,{key:"append-icon",name:"append",color:O.value},null),null==(o=a.append)?void 0:o.call(a,R.value)]),D.value&&l("div",{id:M.value,class:"v-input__details",role:"alert","aria-live":"polite"},[r(EI,{active:V.value,messages:N.value},{message:a.message}),null==(u=a.details)?void 0:u.call(a,R.value)])])}),{reset:k,resetValidation:x,validate:T,isValid:S,errorMessages:g}}}),LI=ae({...PI(),...We(II(),["inline"])},"VCheckbox"),FI=ne()({name:"VCheckbox",inheritAttrs:!1,props:LI(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const i=ke(e,"modelValue"),{isFocused:s,focus:o,blur:l}=TI(e),u=f(),c=E();return ve(()=>{const[t,d]=bt(n),p=OI.filterProps(e),f=SI.filterProps(e);return r(OI,h({ref:u,class:["v-checkbox",e.class]},t,p,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,id:e.id||`checkbox-${c}`,focused:s.value,style:e.style}),{...a,default:e=>{let{id:t,messagesId:n,isDisabled:s,isReadonly:u,isValid:c}=e;return r(SI,h(f,{id:t.value,"aria-describedby":n.value,disabled:s.value,readonly:u.value},d,{error:!1===c.value,modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,onFocus:o,onBlur:l}),a)}})}),lI({},u)}});function BI(e,t){return(null==t?void 0:t[e?"scrollWidth":"scrollHeight"])||0}function UI(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:i}=n;return e?t?i-r+a:a:n.scrollTop}function $I(e,t){return(null==t?void 0:t[e?"offsetWidth":"offsetHeight"])||0}function jI(e,t){return(null==t?void 0:t[e?"offsetLeft":"offsetTop"])||0}const zI=Symbol.for("vuetify:v-slide-group"),qI=ae({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:zI},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["always","desktop","mobile"].includes(e)},...ye(),...St({mobile:null}),...lb(),...Fb({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),HI=ne()({name:"VSlideGroup",props:qI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{isRtl:u}=Ve(),{displayClasses:c,mobile:d}=pt(e),h=$b(e,e.symbol),p=n(!1),f=n(0),m=n(0),g=n(0),y=o(()=>"horizontal"===e.direction),{resizeRef:b,contentRect:w}=Ae(),{resizeRef:_,contentRect:I}=Ae(),S=It(),C=o(()=>({container:b.el,duration:200,easing:"easeOutQuart"})),k=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[0]):-1),E=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[h.selected.value.length-1]):-1);if(Me){let t=-1;v(()=>[h.selected.value,w.value,I.value,y.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(w.value&&I.value){const e=y.value?"width":"height";m.value=w.value[e],g.value=I.value[e],p.value=m.value+1<g.value}if(k.value>=0&&_.el){T(_.el.children[E.value],e.centerActive)}})})}const x=n(!1);function T(e,t){let n=0;n=t?function(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=$I(a,n);return jI(a,t)-r/2+$I(a,t)/2}({containerElement:b.el,isHorizontal:y.value,selectedElement:e}):function(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const i=$I(r,n),s=UI(r,a,n),o=$I(r,t),l=jI(r,t),u=.4*o;return s>l?l-u:s+i<l+o?l-i+o+u:s}({containerElement:b.el,isHorizontal:y.value,isRtl:u.value,selectedElement:e}),A(n)}function A(e){if(!Me||!b.el)return;const t=$I(y.value,b.el),n=UI(y.value,u.value,b.el);if(!(BI(y.value,b.el)<=t||Math.abs(e-n)<16)){if(y.value&&u.value&&b.el){const{scrollWidth:t,offsetWidth:n}=b.el;e=t-n-e}y.value?S.horizontal(e,C.value):S(e,C.value)}}function N(e){const{scrollTop:t,scrollLeft:n}=e.target;f.value=y.value?n:t}function V(e){if(x.value=!0,p.value&&_.el)for(const t of e.composedPath())for(const e of _.el.children)if(e===t)return void T(e)}function D(e){x.value=!1}let M=!1;function R(e){var t;M||x.value||e.relatedTarget&&(null==(t=_.el)?void 0:t.contains(e.relatedTarget))||F(),M=!1}function P(){M=!0}function O(e){function t(t){e.preventDefault(),F(t)}_.el&&(y.value?"ArrowRight"===e.key?t(u.value?"prev":"next"):"ArrowLeft"===e.key&&t(u.value?"next":"prev"):"ArrowDown"===e.key?t("next"):"ArrowUp"===e.key&&t("prev"),"Home"===e.key?t("first"):"End"===e.key&&t("last"))}function L(e,t){if(!e)return;let n=e;do{n=null==n?void 0:n["next"===t?"nextElementSibling":"previousElementSibling"]}while(null==n?void 0:n.hasAttribute("disabled"));return n}function F(e){if(!_.el)return;let t;if(e)if("next"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("first")}else if("prev"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("last")}else"first"===e?(t=_.el.firstElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"next"))):"last"===e&&(t=_.el.lastElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"prev")));else{t=mt(_.el)[0]}t&&t.focus({preventScroll:!0})}function B(e){const t=y.value&&u.value?-1:1,n=("prev"===e?-t:t)*m.value;let a=f.value+n;if(y.value&&u.value&&b.el){const{scrollWidth:e,offsetWidth:t}=b.el;a+=e-t}A(a)}const U=o(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),$=o(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return p.value||Math.abs(f.value)>0;case"mobile":return d.value||p.value||Math.abs(f.value)>0;default:return!d.value&&(p.value||Math.abs(f.value)>0)}}),j=o(()=>Math.abs(f.value)>1),z=o(()=>{if(!b.value)return!1;const e=BI(y.value,b.el),t=function(e,t){return(null==t?void 0:t[e?"clientWidth":"clientHeight"])||0}(y.value,b.el);return e-t-Math.abs(f.value)>1});return ve(()=>r(e.tag,{class:s(["v-slide-group",{"v-slide-group--vertical":!y.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":p.value},c.value,e.class]),style:i(e.style),tabindex:x.value||h.selected.value.length?-1:0,onFocus:R},{default:()=>{var t,n,i;return[$.value&&l("div",{key:"prev",class:s(["v-slide-group__prev",{"v-slide-group__prev--disabled":!j.value}]),onMousedown:P,onClick:()=>j.value&&B("prev")},[(null==(t=a.prev)?void 0:t.call(a,U.value))??r(Bw,null,{default:()=>[r(cb,{icon:u.value?e.nextIcon:e.prevIcon},null)]})]),l("div",{key:"container",ref:b,class:s(["v-slide-group__container",e.contentClass]),onScroll:N},[l("div",{ref:_,class:"v-slide-group__content",onFocusin:V,onFocusout:D,onKeydown:O},[null==(n=a.default)?void 0:n.call(a,U.value)])]),$.value&&l("div",{key:"next",class:s(["v-slide-group__next",{"v-slide-group__next--disabled":!z.value}]),onMousedown:P,onClick:()=>z.value&&B("next")},[(null==(i=a.next)?void 0:i.call(a,U.value))??r(Bw,null,{default:()=>[r(cb,{icon:u.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:B,scrollOffset:f,focus:F,hasPrev:j,hasNext:z}}}),KI=Symbol.for("vuetify:v-chip-group"),GI=ae({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ee},...qI(),...ye(),...Fb({selectedClass:"v-chip--selected"}),...lb(),...ge(),...Nb({variant:"tonal"})},"VChipGroup");ne()({name:"VChipGroup",props:GI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{isSelected:i,select:s,next:o,prev:l,selected:u}=$b(e,KI);return re({VChip:{baseColor:b(()=>e.baseColor),color:b(()=>e.color),disabled:b(()=>e.disabled),filter:b(()=>e.filter),variant:b(()=>e.variant)}}),ve(()=>{const t=HI.filterProps(e);return r(HI,h(t,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:i,select:s,next:o,prev:l,selected:u.value})]}})}),{}}});const WI=ae({activeClass:String,appendAvatar:String,appendIcon:be,baseColor:String,closable:Boolean,closeIcon:{type:be,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:be,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:qe(),onClickOnce:qe(),...Sb(),...ye(),...Eb(),...Rb(),...Bb(),...vb(),...ow(),...sb(),...lb({tag:"span"}),...ge(),...Nb({variant:"tonal"})},"VChip"),QI=ne()({name:"VChip",directives:{vRipple:kw},props:WI(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:i}=t;const{t:s}=wt(),{borderClasses:u}=Cb(e),{densityClasses:c}=xb(e),{elevationClasses:d}=Pb(e),{roundedClasses:p}=mb(e),{sizeClasses:f}=ob(e),{themeClasses:v}=Ce(e),m=ke(e,"modelValue"),g=Ub(e,KI,!1),y=sw(e,n),S=b(()=>!1!==e.link&&y.isLink.value),C=o(()=>!e.disabled&&!1!==e.link&&(!!g||e.link||y.isClickable.value)),k=b(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(e){e.preventDefault(),e.stopPropagation(),m.value=!1,a("click:close",e)}})),{colorClasses:E,colorStyles:x,variantClasses:T}=Vb(()=>({color:!g||g.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function A(e){var t;a("click",e),C.value&&(null==(t=y.navigate)||t.call(y,e),null==g||g.toggle())}function N(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),A(e))}return()=>{var t;const n=y.isLink.value?"a":e.tag,a=!(!e.appendIcon&&!e.appendAvatar),s=!(!a&&!i.append),o=!(!i.close&&!e.closable),b=!(!i.filter&&!e.filter)&&g,V=!(!e.prependIcon&&!e.prependAvatar),D=!(!V&&!i.prepend);return m.value&&w(r(n,h({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":C.value,"v-chip--filter":b,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&(null==(t=y.isActive)?void 0:t.value)},v.value,u.value,E.value,c.value,d.value,p.value,f.value,T.value,null==g?void 0:g.selectedClass.value,e.class],style:[x.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:C.value?0:void 0,onClick:A,onKeydown:C.value&&!S.value&&N},y.linkProps),{default:()=>{var t;return[Ab(C.value,"v-chip"),b&&r(jw,{key:"filter"},{default:()=>[w(l("div",{class:"v-chip__filter"},[i.filter?r(tb,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},i.filter):r(cb,{key:"filter-icon",icon:e.filterIcon},null)]),[[I,g.isSelected.value]])]}),D&&l("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?r(tb,{key:"prepend-defaults",disabled:!V,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},i.prepend):l(_,null,[e.prependIcon&&r(cb,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&r(Mb,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),l("div",{class:"v-chip__content","data-no-activator":""},[(null==(t=i.default)?void 0:t.call(i,{isSelected:null==g?void 0:g.isSelected.value,selectedClass:null==g?void 0:g.selectedClass.value,select:null==g?void 0:g.select,toggle:null==g?void 0:g.toggle,value:null==g?void 0:g.value.value,disabled:e.disabled}))??M(e.text)]),s&&l("div",{key:"append",class:"v-chip__append"},[i.append?r(tb,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},i.append):l(_,null,[e.appendIcon&&r(cb,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&r(Mb,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),o&&l("button",h({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},k.value),[i.close?r(tb,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},i.close):r(cb,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[kw,C.value&&e.ripple,null]])}}}),YI=ae({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ye(),...gb({transition:{component:Uw}})},"VCounter"),XI=ne()({name:"VCounter",functional:!0,props:YI(),setup(e,t){let{slots:n}=t;const a=b(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ve(()=>r(yb,{transition:e.transition},{default:()=>[w(l("div",{class:s(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:i(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[I,e.active]])]})),{}}}),JI=ae({floating:Boolean,...ye()},"VFieldLabel"),ZI=ne()({name:"VFieldLabel",props:JI(),setup(e,t){let{slots:n}=t;return ve(()=>r(mI,{class:s(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:i(e.style)},n)),{}}}),eS=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],tS=ae({appendInnerIcon:be,bgColor:String,clearable:Boolean,clearIcon:{type:be,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:be,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>eS.includes(e)},"onClick:clear":qe(),"onClick:appendInner":qe(),"onClick:prependInner":qe(),...ye(),...ew(),...vb(),...ge()},"VField"),nS=ne()({name:"VField",inheritAttrs:!1,props:{id:String,...xI(),...tS()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:u}=t;const{themeClasses:c}=Ce(e),{loaderClasses:d}=tw(e),{focusClasses:p,isFocused:m,focus:g,blur:y}=TI(e),{InputIcon:S}=CI(e),{roundedClasses:C}=mb(e),{rtlClasses:k}=Ve(),x=b(()=>e.dirty||e.active),T=b(()=>!(!e.label&&!u.label)),A=b(()=>!e.singleLine&&T.value),N=E(),V=o(()=>e.id||`input-${N}`),D=b(()=>e.details?`${V.value}-messages`:void 0),M=f(),R=f(),P=f(),O=o(()=>["plain","underlined"].includes(e.variant)),L=o(()=>e.error||e.disabled?void 0:x.value&&m.value?e.color:e.baseColor),F=o(()=>{if(e.iconColor&&(!e.glow||m.value))return!0===e.iconColor?L.value:e.iconColor}),{backgroundColorClasses:B,backgroundColorStyles:U}=rb(()=>e.bgColor),{textColorClasses:$,textColorStyles:j}=ab(L);v(x,e=>{if(A.value){const t=M.value.$el,n=R.value.$el;requestAnimationFrame(()=>{const a=Ue(t),r=n.getBoundingClientRect(),i=r.x-a.x,s=r.y-a.y-(a.height/2-r.height/2),o=r.width/.75,l=Math.abs(o-a.width)>1?{maxWidth:he(o)}:void 0,u=getComputedStyle(t),c=getComputedStyle(n),d=1e3*parseFloat(u.transitionDuration)||150,h=parseFloat(c.getPropertyValue("--v-field-label-scale")),p=c.getPropertyValue("color");t.style.visibility="visible",n.style.visibility="hidden",Pe(t,{transform:`translate(${i}px, ${s}px) scale(${h})`,color:p,...l},{duration:d,easing:Le,direction:e?"normal":"reverse"}).finished.then(()=>{t.style.removeProperty("visibility"),n.style.removeProperty("visibility")})})}},{flush:"post"});const z=o(()=>({isActive:x,isFocused:m,controlRef:P,blur:y,focus:g}));function q(e){e.target!==document.activeElement&&e.preventDefault()}return ve(()=>{var t,a,o;const f="outlined"===e.variant,v=!(!u["prepend-inner"]&&!e.prependInnerIcon),m=!(!e.clearable&&!u.clear||e.disabled),b=!!(u["append-inner"]||e.appendInnerIcon||m),E=()=>u.label?u.label({...z.value,label:e.label,props:{for:V.value}}):e.label;return l("div",h({class:["v-field",{"v-field--active":x.value,"v-field--appended":b,"v-field--center-affix":e.centerAffix??!O.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":v,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!E(),[`v-field--variant-${e.variant}`]:!0},c.value,B.value,p.value,d.value,C.value,k.value,e.class],style:[U.value,e.style],onClick:q},n),[l("div",{class:"v-field__overlay"},null),r(nw,{name:"v-field",active:!!e.loading,color:e.error?"error":"string"==typeof e.loading?e.loading:e.color},{default:u.loader}),v&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&r(S,{key:"prepend-icon",name:"prependInner",color:F.value},null),null==(t=u["prepend-inner"])?void 0:t.call(u,z.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&A.value&&r(ZI,{key:"floating-label",ref:R,class:s([$.value]),floating:!0,for:V.value,"aria-hidden":!x.value,style:i(j.value)},{default:()=>[E()]}),T.value&&r(ZI,{key:"label",ref:M,for:V.value},{default:()=>[E()]}),(null==(a=u.default)?void 0:a.call(u,{...z.value,props:{id:V.value,class:"v-field__input","aria-describedby":D.value},focus:g,blur:y}))??l("div",{id:V.value,class:"v-field__input","aria-describedby":D.value},null)]),m&&r(jw,{key:"clear"},{default:()=>[w(l("div",{class:"v-field__clearable",onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},[r(tb,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[u.clear?u.clear({...z.value,props:{onFocus:g,onBlur:y,onClick:e["onClick:clear"],tabindex:-1}}):r(S,{name:"clear",onFocus:g,onBlur:y,tabindex:-1},null)]})]),[[I,e.dirty]])]}),b&&l("div",{key:"append",class:"v-field__append-inner"},[null==(o=u["append-inner"])?void 0:o.call(u,z.value),e.appendInnerIcon&&r(S,{key:"append-icon",name:"appendInner",color:F.value},null)]),l("div",{class:s(["v-field__outline",$.value]),style:i(j.value)},[f&&l(_,null,[l("div",{class:"v-field__outline__start"},null),A.value&&l("div",{class:"v-field__outline__notch"},[r(ZI,{ref:R,floating:!0,for:V.value,"aria-hidden":!x.value},{default:()=>[E()]})]),l("div",{class:"v-field__outline__end"},null)]),O.value&&A.value&&r(ZI,{ref:R,floating:!0,for:V.value,"aria-hidden":!x.value},{default:()=>[E()]})])])}),{controlRef:P,fieldIconColor:F}}});const aS=["color","file","time","date","datetime-local","week","month"],rS=ae({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...PI(),...tS()},"VTextField"),iS=ne()({name:"VTextField",directives:{vIntersect:wb},inheritAttrs:!1,props:rS(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:i}=t;const u=ke(e,"modelValue"),{isFocused:c,focus:d,blur:p}=TI(e),{onIntersect:v}=function(e){return{onIntersect:function(t,n){var a,r;e.autofocus&&t&&(null==(r=null==(a=n[0].target)?void 0:a.focus)||r.call(a))}}}(e),m=o(()=>"function"==typeof e.counterValue?e.counterValue(u.value):"number"==typeof e.counterValue?e.counterValue:(u.value??"").toString().length),y=o(()=>n.maxlength?n.maxlength:!e.counter||"number"!=typeof e.counter&&"string"!=typeof e.counter?void 0:e.counter),b=o(()=>["plain","underlined"].includes(e.variant)),I=f(),S=f(),C=f(),k=o(()=>aS.includes(e.type)||e.persistentPlaceholder||c.value||e.active);function E(){c.value||d(),g(()=>{var e;C.value!==document.activeElement&&(null==(e=C.value)||e.focus())})}function x(e){a("mousedown:control",e),e.target!==C.value&&(E(),e.preventDefault())}function T(e){a("click:control",e)}function A(t){var n;const a=t.target;if(u.value=a.value,(null==(n=e.modelModifiers)?void 0:n.trim)&&["text","search","password","tel","url"].includes(e.type)){const e=[a.selectionStart,a.selectionEnd];g(()=>{a.selectionStart=e[0],a.selectionEnd=e[1]})}}return ve(()=>{const t=!!(i.counter||!1!==e.counter&&null!=e.counter),a=!(!t&&!i.details),[o,f]=bt(n),{modelValue:N,...V}=OI.filterProps(e),D=nS.filterProps(e);return r(OI,h({ref:I,modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":b.value},e.class],style:e.style},o,V,{centerAffix:!b.value,focused:c.value}),{...i,default:t=>{let{id:n,isDisabled:a,isDirty:o,isReadonly:m,isValid:y,hasDetails:b,reset:I}=t;return r(nS,h({ref:S,onMousedown:x,onClick:T,"onClick:clear":t=>function(t,n){t.stopPropagation(),E(),g(()=>{u.value=null,n(),_t(e["onClick:clear"],t)})}(t,I),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},D,{id:n.value,active:k.value||o.value,dirty:o.value||e.dirty,disabled:a.value,focused:c.value,details:b.value,error:!1===y.value}),{...i,default:t=>{let{props:{class:n,...r}}=t;const o=w(l("input",h({ref:C,value:u.value,onInput:A,autofocus:e.autofocus,readonly:m.value,disabled:a.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:d,onBlur:p},r,f),null),[[wb,{handler:v},null,{once:!0}]]);return l(_,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?l("div",{class:s(n),"data-no-activator":""},[i.default(),o]):K(o,{class:n}),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:a?n=>{var a;return l(_,null,[null==(a=i.details)?void 0:a.call(i,n),t&&l(_,null,[l("span",null,null),r(XI,{active:e.persistentCounter||c.value,value:m.value,max:y.value,disabled:e.disabled},i.counter)])])}:void 0})}),lI({},I,S,C)}}),sS=ae({renderless:Boolean,...ye()},"VVirtualScrollItem"),oS=ne()({name:"VVirtualScrollItem",inheritAttrs:!1,props:sS(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:i,contentRect:s}=Ae(void 0,"border");v(()=>{var e;return null==(e=s.value)?void 0:e.height},e=>{null!=e&&a("update:height",e)}),ve(()=>{var t,a;return e.renderless?l(_,null,[null==(t=r.default)?void 0:t.call(r,{itemRef:i})]):l("div",h({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},n),[null==(a=r.default)?void 0:a.call(r)])})}}),lS=ae({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function uS(e,t){const a=pt(),r=n(0);V(()=>{r.value=parseFloat(e.itemHeight||0)});const i=n(0),s=n(Math.ceil((parseInt(e.height)||a.height.value)/(r.value||16))||1),l=n(0),u=n(0),c=f(),d=f();let h=0;const{resizeRef:p,contentRect:m}=Ae();V(()=>{p.value=c.value});const y=o(()=>{var t;return c.value===document.documentElement?a.height.value:(null==(t=m.value)?void 0:t.height)||parseInt(e.height)||0}),b=o(()=>!!(c.value&&d.value&&y.value&&r.value));let w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length});const I=n(0);let S=-1;function C(e){return w[e]||r.value}const k=Ct(()=>{const e=performance.now();_[0]=0;const n=t.value.length;for(let t=1;t<=n-1;t++)_[t]=(_[t-1]||0)+C(t-1);I.value=Math.max(I.value,performance.now()-e)},I),E=v(b,e=>{e&&(E(),h=d.value.offsetTop,k.immediate(),L(),~S&&g(()=>{Me&&window.requestAnimationFrame(()=>{B(S),S=-1})}))});function x(e){e=Ne(e,0,t.value.length-1);const n=Math.floor(e),a=e%1,r=n+1,i=_[n]||0;return i+((_[r]||i)-i)*a}function T(e){return function(e,t){let n=e.length-1,a=0,r=0,i=null,s=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,i=e[r],i>t)n=r-1;else{if(!(i<t))return i===t?r:a;s=r,a=r+1}return s}(_,e)}N(()=>{k.clear()});let A=0,D=0,M=0;v(y,(e,t)=>{t&&(L(),e<t&&requestAnimationFrame(()=>{D=0,L()}))});let R=-1;function P(){c.value&&d.value&&(D=0,M=0,window.clearTimeout(R),L())}let O=-1;function L(){cancelAnimationFrame(O),O=requestAnimationFrame(F)}function F(){if(!c.value||!y.value||!r.value)return;const e=A-h,n=Math.sign(D),a=Math.max(0,e-100),o=Ne(T(a),0,t.value.length),d=e+y.value+100,p=Ne(T(d)+1,o+1,t.value.length);if((-1!==n||o<i.value)&&(1!==n||p>s.value)){const e=x(i.value)-x(o),n=x(p)-x(s.value);Math.max(e,n)>100?(i.value=o,s.value=p):(o<=0&&(i.value=o),p>=t.value.length&&(s.value=p))}l.value=x(i.value),u.value=x(t.value.length)-x(s.value)}function B(e){const t=x(e);!c.value||e&&!t?S=e:c.value.scrollTop=t}const U=o(()=>t.value.slice(i.value,s.value).map((t,n)=>{const a=n+i.value;return{raw:t,index:a,key:Ge(t,e.itemKey,a)}}));return v(t,()=>{w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length}),k.immediate(),L()},{deep:1}),{calculateVisibleItems:L,containerRef:c,markerRef:d,computedItems:U,paddingTop:l,paddingBottom:u,scrollToIndex:B,handleScroll:function(){if(!c.value||!d.value)return;const e=c.value.scrollTop,t=performance.now();t-M>500?(D=Math.sign(e-A),h=d.value.offsetTop):D=e-A,A=e,M=t,window.clearTimeout(R),R=window.setTimeout(P,500),L()},handleScrollend:P,handleItemResize:function(e,t){const n=w[e],a=r.value;r.value=a?Math.min(r.value,t):t,n===t&&a===r.value||(w[e]=t,k())}}}const cS=ae({items:{type:Array,default:()=>[]},renderless:Boolean,...lS(),...ye(),...db()},"VVirtualScroll"),dS=ne()({name:"VVirtualScroll",props:cS(),setup(e,t){let{slots:n}=t;const a=Se("VVirtualScroll"),{dimensionStyles:o}=hb(e),{calculateVisibleItems:u,containerRef:c,markerRef:d,handleScroll:h,handleScrollend:p,handleItemResize:f,scrollToIndex:v,paddingTop:m,paddingBottom:g,computedItems:y}=uS(e,b(()=>e.items));return Ye(()=>e.renderless,()=>{function e(){var e,t;const n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"addEventListener":"removeEventListener";c.value===document.documentElement?(document[n]("scroll",h,{passive:!0}),document[n]("scrollend",p)):(null==(e=c.value)||e[n]("scroll",h,{passive:!0}),null==(t=c.value)||t[n]("scrollend",p))}C(()=>{c.value=vt(a.vnode.el,!0),e(!0)}),N(e)}),ve(()=>{const t=y.value.map(t=>r(oS,{key:t.key,renderless:e.renderless,"onUpdate:height":e=>f(t.index,e)},{default:e=>{var a;return null==(a=n.default)?void 0:a.call(n,{item:t.raw,index:t.index,...e})}}));return e.renderless?l(_,null,[l("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:he(m.value)}},null),t,l("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:he(g.value)}},null)]):l("div",{ref:c,class:s(["v-virtual-scroll",e.class]),onScrollPassive:h,onScrollend:p,style:i([o.value,e.style])},[l("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:he(m.value),paddingBottom:he(g.value)}},[t])])}),{calculateVisibleItems:u,scrollToIndex:v}}});function hS(e,t){const a=n(!1);let r;return{onScrollPassive:function(e){cancelAnimationFrame(r),a.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{a.value=!1})})},onKeydown:async function(n){var r,i;if("Tab"===n.key&&(null==(r=t.value)||r.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const s=null==(i=e.value)?void 0:i.$el;if(!s)return;"Home"!==n.key&&"End"!==n.key||s.scrollTo({top:"Home"===n.key?0:s.scrollHeight,behavior:"smooth"}),await async function(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(a.value){const t=v(a,()=>{t(),e()})}else e()})}();const o=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if("PageDown"===n.key||"Home"===n.key){const e=s.getBoundingClientRect().top;for(const t of o)if(t.getBoundingClientRect().top>=e){t.focus();break}}else{const e=s.getBoundingClientRect().bottom;for(const t of[...o].reverse())if(t.getBoundingClientRect().bottom<=e){t.focus();break}}}}}const pS=ae({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:be,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...y_({itemChildren:!1})},"Select"),fS=ae({...pS(),...We(rS({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...gb({transition:{component:Ow}})},"VSelect"),vS=ne()({name:"VSelect",props:fS(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:i}=wt(),s=f(),u=f(),c=f(),{items:d,transformIn:p,transformOut:m}=I_(e),y=ke(e,"modelValue",[],e=>p(null===e?[null]:xe(e)),t=>{const n=m(t);return e.multiple?n:n[0]??null}),w=o(()=>"function"==typeof e.counterValue?e.counterValue(y.value):"number"==typeof e.counterValue?e.counterValue:y.value.length),I=VI(e),S=o(()=>y.value.map(e=>e.value)),C=n(!1);let k,E="",x=-1;const T=o(()=>e.hideSelected?d.value.filter(t=>!y.value.some(n=>(e.valueComparator||Ee)(n,t))):d.value),A=o(()=>e.hideNoData&&!T.value.length||I.isReadonly.value||I.isDisabled.value),N=ke(e,"menu"),V=o({get:()=>N.value,set:e=>{var t;N.value&&!e&&(null==(t=u.value)?void 0:t.openChildren.size)||e&&A.value||(N.value=e)}}),D=b(()=>V.value?e.closeText:e.openText),M=o(()=>{var t;return{...e.menuProps,activatorProps:{...(null==(t=e.menuProps)?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=f(),P=hS(R,s);function O(t){e.openOnClear&&(V.value=!0)}function L(){A.value||(V.value=!V.value)}function F(e){xt(e)&&B(e)}function B(t){var n,a,r;if(!t.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(V.value=!0),["Escape","Tab"].includes(t.key)&&(V.value=!1),"Home"===t.key?null==(n=R.value)||n.focus("first"):"End"===t.key&&(null==(a=R.value)||a.focus("last"));if(!xt(t))return;const i=performance.now();i-k>1e3&&(E="",x=-1),E+=t.key.toLowerCase(),k=i;const s=T.value;function o(){for(let e=x+1;e<s.length;e++){const t=s[e];if(t.title.toLowerCase().startsWith(E))return[t,e]}}const l=function(){let e=o();return e||(E.at(-1)===E.at(-2)&&(E=E.slice(0,-1),e=o(),e)?e:(x=-1,e=o(),e||(E=t.key.toLowerCase(),o())))}();if(!l)return;const[u,c]=l;x=c,null==(r=R.value)||r.focus(c),e.multiple||(y.value=[u])}function U(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.props.disabled)if(e.multiple){const a=y.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),r=null==n?!~a:n;if(~a){const e=r?[...y.value,t]:[...y.value];e.splice(a,1),y.value=e}else r&&(y.value=[...y.value,t])}else{const e=!1!==n;y.value=e?[t]:[],g(()=>{V.value=!1})}}function $(e){var t;(null==(t=R.value)?void 0:t.$el.contains(e.relatedTarget))||(V.value=!1)}function j(){var t;e.eager&&(null==(t=c.value)||t.calculateVisibleItems())}function q(){var e;C.value&&(null==(e=s.value)||e.focus())}function H(e){C.value=!0}function K(e){if(null==e)y.value=[];else if(ct(s.value,":autofill")||ct(s.value,":-webkit-autofill")){const t=d.value.find(t=>t.title===e);t&&U(t)}else s.value&&(s.value.value="")}return v(V,()=>{if(!e.hideSelected&&V.value&&y.value.length){const t=T.value.findIndex(t=>y.value.some(n=>(e.valueComparator||Ee)(n.value,t.value)));Me&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var e;t>=0&&(null==(e=c.value)||e.scrollToIndex(t))})}}),v(()=>e.items,(t,n)=>{V.value||C.value&&e.hideNoData&&!n.length&&t.length&&(V.value=!0)}),ve(()=>{const t=!(!e.chips&&!a.chip),n=!!(!e.hideNoData||T.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),o=y.value.length>0,d=iS.filterProps(e),p=o||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(iS,h({ref:s},d,{modelValue:y.value.map(e=>e.props.value).join(", "),"onUpdate:modelValue":K,focused:C.value,"onUpdate:focused":e=>C.value=e,validationValue:y.externalValue,counterValue:w.value,dirty:o,class:["v-select",{"v-select--active-menu":V.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":y.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:p,"onClick:clear":O,"onMousedown:control":L,onBlur:$,onKeydown:B,"aria-label":i(D.value),title:i(D.value)}),{...a,default:()=>l(_,null,[r(cI,h({ref:u,modelValue:V.value,"onUpdate:modelValue":e=>V.value=e,activator:"parent",contentClass:"v-select__content",disabled:A.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:j,onAfterLeave:q},M.value),{default:()=>[n&&r(x_,h({ref:R,selected:S.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:F,onFocusin:H,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},P,e.listProps),{default:()=>{var t,n,s;return[null==(t=a["prepend-item"])?void 0:t.call(a),!T.value.length&&!e.hideNoData&&((null==(n=a["no-data"])?void 0:n.call(a))??r(p_,{key:"no-data",title:i(e.noDataText)},null)),r(dS,{ref:c,renderless:!0,items:T.value,itemKey:"value"},{default:t=>{var n,i,s;let{item:o,index:u,itemRef:c}=t;const d=kt(o.props),p=h(o.props,{ref:c,key:o.value,onClick:()=>U(o,null)});return"divider"===o.type?(null==(n=a.divider)?void 0:n.call(a,{props:o.raw,index:u}))??r(Aw,h(o.props,{key:`divider-${u}`}),null):"subheader"===o.type?(null==(i=a.subheader)?void 0:i.call(a,{props:o.raw,index:u}))??r(v_,h(o.props,{key:`subheader-${u}`}),null):(null==(s=a.item)?void 0:s.call(a,{item:o,index:u,props:p}))??r(p_,h(p,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?r(SI,{key:o.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,d.prependAvatar&&r(Mb,{image:d.prependAvatar},null),d.prependIcon&&r(cb,{icon:d.prependIcon},null)])}})}}),null==(s=a["append-item"])?void 0:s.call(a)]}})]}),y.value.map((n,i)=>{function s(e){e.stopPropagation(),e.preventDefault(),U(n,!1)}const o={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},u=t?!!a.chip:!!a.selection,c=u?Et(t?a.chip({item:n,index:i,props:o}):a.selection({item:n,index:i})):void 0;if(!u||c)return l("div",{key:n.value,class:"v-select__selection"},[t?a.chip?r(tb,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[c]}):r(QI,h({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},o),null):c??l("span",{class:"v-select__selection-text"},[n.title,e.multiple&&i<y.value.length-1&&l("span",{class:"v-select__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return l(_,null,[null==(t=a["append-inner"])?void 0:t.call(a,...o),e.menuIcon?r(cb,{class:"v-select__menu-icon",color:null==(n=s.value)?void 0:n.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),lI({isFocused:C,menu:V,select:U},s)}}),mS={id:"account-controls",class:"minimal-account-selector"},gS=Zy({__name:"AccountSelector",props:{accounts:{type:Array,required:!0},modelValue:{type:String,default:null},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,i=o({get:()=>n.modelValue,set(e){a("update:modelValue",e)}});return(t,n)=>w(($(),U("div",mS,[r(vS,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),items:e.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",color:"primary","prepend-inner-icon":"mdi-account-multiple",class:"minimal-select","hide-details":""},null,8,["modelValue","items"])],512)),[[I,e.visible]])}},[["__scopeId","data-v-eb89f250"]]),yS=je("v-alert-title"),bS=ae({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");const wS=["success","info","warning","error"],_S=ae({border:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:be,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>wS.includes(e)},...ye(),...Eb(),...db(),...Rb(),...bS(),...Yb(),...rw(),...vb(),...lb(),...ge(),...Nb({variant:"flat"})},"VAlert"),IS=ne()({name:"VAlert",props:_S(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const u=ke(e,"modelValue"),c=b(()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=function(e,t){return{iconSize:o(()=>{const n=new Map(e.iconSizes),a=e.iconSize??t()??"default";return n.has(a)?n.get(a):a})}}(e,()=>e.prominent?44:void 0),{themeClasses:p}=Ce(e),{colorClasses:f,colorStyles:v,variantClasses:m}=Vb(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:g}=xb(e),{dimensionStyles:y}=hb(e),{elevationClasses:w}=Pb(e),{locationStyles:_}=Xb(e),{positionClasses:I}=iw(e),{roundedClasses:S}=mb(e),{textColorClasses:C,textColorStyles:k}=ab(()=>e.borderColor),{t:E}=wt(),x=b(()=>({"aria-label":E(e.closeLabel),onClick(e){u.value=!1,n("click:close",e)}}));return()=>{const t=!(!a.prepend&&!c.value),n=!(!a.title&&!e.title),o=!(!a.close&&!e.closable),b={density:e.density,icon:c.value,size:e.iconSize||e.prominent?d.value:void 0};return u.value&&r(e.tag,{class:s(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},p.value,f.value,g.value,w.value,I.value,S.value,m.value,e.class]),style:i([v.value,y.value,_.value,e.style]),role:"alert"},{default:()=>{var u,d;return[Ab(!1,"v-alert"),e.border&&l("div",{key:"border",class:s(["v-alert__border",C.value]),style:i(k.value)},null),t&&l("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?r(tb,{key:"prepend-defaults",disabled:!c.value,defaults:{VIcon:{...b}}},a.prepend):r(cb,h({key:"prepend-icon"},b),null)]),l("div",{class:"v-alert__content"},[n&&r(yS,{key:"title"},{default:()=>{var t;return[(null==(t=a.title)?void 0:t.call(a))??e.title]}}),(null==(u=a.text)?void 0:u.call(a))??e.text,null==(d=a.default)?void 0:d.call(a)]),a.append&&l("div",{key:"append",class:"v-alert__append"},[a.append()]),o&&l("div",{key:"close",class:"v-alert__close"},[a.close?r(tb,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var e;return[null==(e=a.close)?void 0:e.call(a,{props:x.value})]}}):r(xw,h({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},x.value),null)])]}})}}}),SS=(e,t,n)=>{if(null==e||null==t)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function CS(e,t){if(null!=e&&"boolean"!=typeof e&&-1!==e)return"number"==typeof e?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const kS=ae({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ES(e,t,a,r){const i=n([]),s=n(new Map),l=o(()=>(null==r?void 0:r.transform)?A(t).map(e=>[e,r.transform(e)]):A(t));return V(()=>{const n="function"==typeof a?a():A(a),o="string"!=typeof n&&"number"!=typeof n?"":String(n),u=function(e,t,n){var a;const r=[],i=(null==n?void 0:n.default)??SS,s=!!(null==n?void 0:n.filterKeys)&&xe(n.filterKeys),o=Object.keys((null==n?void 0:n.customKeyFilter)??{}).length;if(!(null==e?void 0:e.length))return r;e:for(let l=0;l<e.length;l++){const[u,c=u]=xe(e[l]),d={},h={};let p=-1;if((t||o>0)&&!(null==n?void 0:n.noFilter)){if("object"==typeof u){if("divider"===u.type||"subheader"===u.type)continue;const e=s||Object.keys(c);for(const r of e){const e=Ge(c,r),s=null==(a=null==n?void 0:n.customKeyFilter)?void 0:a[r];if(p=s?s(e,t,u):i(e,t,u),-1!==p&&!1!==p)s?d[r]=CS(p,t):h[r]=CS(p,t);else if("every"===(null==n?void 0:n.filterMode))continue e}}else p=i(u,t,u),-1!==p&&!1!==p&&(h.title=CS(p,t));const e=Object.keys(h).length,r=Object.keys(d).length;if(!e&&!r)continue;if("union"===(null==n?void 0:n.filterMode)&&r!==o&&!e)continue;if("intersection"===(null==n?void 0:n.filterMode)&&(r!==o||!e))continue}r.push({index:l,matches:{...h,...d}})}return r}(l.value,o,{customKeyFilter:{...e.customKeyFilter,...A(null==r?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=A(t),d=[],h=new Map;u.forEach(e=>{let{index:t,matches:n}=e;const a=c[t];d.push(a),h.set(a.value,n)}),i.value=d,s.value=h}),{filteredItems:i,filteredMatches:s,getMatches:function(e){return s.value.get(e.value)}}}const xS=ae({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...kS({filterKeys:["title"]}),...pS(),...We(rS({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...gb({transition:!1})},"VAutocomplete"),TS=ne()({name:"VAutocomplete",props:xS(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:u}=wt(),c=f(),d=n(!1),p=n(!0),m=n(!1),y=f(),b=f(),w=n(-1),{items:I,transformIn:S,transformOut:C}=I_(e),{textColorClasses:k,textColorStyles:E}=ab(()=>{var e;return null==(e=c.value)?void 0:e.color}),x=ke(e,"search",""),T=ke(e,"modelValue",[],e=>S(null===e?[null]:xe(e)),t=>{const n=C(t);return e.multiple?n:n[0]??null}),A=o(()=>"function"==typeof e.counterValue?e.counterValue(T.value):"number"==typeof e.counterValue?e.counterValue:T.value.length),N=VI(e),{filteredItems:V,getMatches:D}=ES(e,I,()=>p.value?"":x.value),M=o(()=>e.hideSelected?V.value.filter(e=>!T.value.some(t=>t.value===e.value)):V.value),R=o(()=>!(!e.chips&&!a.chip)),P=o(()=>R.value||!!a.selection),O=o(()=>T.value.map(e=>e.props.value)),L=o(()=>{var t;return(!0===e.autoSelectFirst||"exact"===e.autoSelectFirst&&x.value===(null==(t=M.value[0])?void 0:t.title))&&M.value.length>0&&!p.value&&!m.value}),F=o(()=>e.hideNoData&&!M.value.length||N.isReadonly.value||N.isDisabled.value),B=ke(e,"menu"),U=o({get:()=>B.value,set:e=>{var t;B.value&&!e&&(null==(t=y.value)?void 0:t.openChildren.size)||e&&F.value||(B.value=e)}}),$=o(()=>U.value?e.closeText:e.openText),j=f(),q=hS(j,c);function H(t){e.openOnClear&&(U.value=!0),x.value=""}function K(){F.value||(U.value=!0)}function G(e){F.value||(d.value&&(e.preventDefault(),e.stopPropagation()),U.value=!U.value)}function W(e){var t;(xt(e)||"Backspace"===e.key)&&(null==(t=c.value)||t.focus())}function Q(t){var n,a,r,i,s;if(N.isReadonly.value)return;const o=null==(n=c.value)?void 0:n.selectionStart,l=T.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(U.value=!0),["Escape"].includes(t.key)&&(U.value=!1),L.value&&["Enter","Tab"].includes(t.key)&&!T.value.some(e=>{let{value:t}=e;return t===M.value[0].value})&&ae(M.value[0]),"ArrowDown"===t.key&&L.value&&(null==(a=j.value)||a.focus("next")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&P.value&&T.value.length>0&&!x.value)return ae(T.value[0],!1);if(~w.value){t.preventDefault();const e=w.value;ae(T.value[w.value],!1),w.value=e>=l-1?l-2:e}else"Backspace"!==t.key||x.value||(w.value=l-1)}else if(e.multiple)if("ArrowLeft"===t.key){if(w.value<0&&o&&o>0)return;const e=w.value>-1?w.value-1:l-1;if(T.value[e])w.value=e;else{const e=(null==(r=x.value)?void 0:r.length)??null;w.value=-1,null==(i=c.value)||i.setSelectionRange(e,e)}}else if("ArrowRight"===t.key){if(w.value<0)return;const e=w.value+1;T.value[e]?w.value=e:(w.value=-1,null==(s=c.value)||s.setSelectionRange(0,0))}else~w.value&&xt(t)&&(w.value=-1)}function Y(e){if(ct(c.value,":autofill")||ct(c.value,":-webkit-autofill")){const t=I.value.find(t=>t.title===e.target.value);t&&ae(t)}}function X(){var t;e.eager&&(null==(t=b.value)||t.calculateVisibleItems())}function J(){var e;d.value&&(p.value=!0,null==(e=c.value)||e.focus())}function Z(e){d.value=!0,setTimeout(()=>{m.value=!0})}function ee(e){m.value=!1}function te(t){null!=t&&(""!==t||e.multiple||P.value)||(T.value=[])}const ne=n(!1);function ae(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&!t.props.disabled)if(e.multiple){const a=T.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),r=null==n?!~a:n;if(~a){const e=r?[...T.value,t]:[...T.value];e.splice(a,1),T.value=e}else r&&(T.value=[...T.value,t]);e.clearOnSelect&&(x.value="")}else{const e=!1!==n;T.value=e?[t]:[],x.value=e&&!P.value?t.title:"",g(()=>{U.value=!1,p.value=!0})}}return v(d,(t,n)=>{var a;t!==n&&(t?(ne.value=!0,x.value=e.multiple||P.value?"":String((null==(a=T.value.at(-1))?void 0:a.props.title)??""),p.value=!0,g(()=>ne.value=!1)):(e.multiple||null!=x.value||(T.value=[]),U.value=!1,(e.multiple||P.value)&&(x.value=""),w.value=-1))}),v(x,e=>{d.value&&!ne.value&&(e&&(U.value=!0),p.value=!e)}),v(U,()=>{if(!e.hideSelected&&U.value&&T.value.length){const e=M.value.findIndex(e=>T.value.some(t=>e.value===t.value));Me&&window.requestAnimationFrame(()=>{var t;e>=0&&(null==(t=b.value)||t.scrollToIndex(e))})}}),v(()=>e.items,(e,t)=>{U.value||d.value&&!t.length&&e.length&&(U.value=!0)}),ve(()=>{const t=!!(!e.hideNoData||M.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),n=T.value.length>0,o=iS.filterProps(e);return r(iS,h({ref:c},o,{modelValue:x.value,"onUpdate:modelValue":[e=>x.value=e,te],focused:d.value,"onUpdate:focused":e=>d.value=e,validationValue:T.externalValue,counterValue:A.value,dirty:n,onChange:Y,class:["v-autocomplete","v-autocomplete--"+(e.multiple?"multiple":"single"),{"v-autocomplete--active-menu":U.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!P.value,"v-autocomplete--selecting-index":w.value>-1},e.class],style:e.style,readonly:N.isReadonly.value,placeholder:n?void 0:e.placeholder,"onClick:clear":H,"onMousedown:control":K,onKeydown:Q}),{...a,default:()=>l(_,null,[r(cI,h({ref:y,modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,activator:"parent",contentClass:"v-autocomplete__content",disabled:F.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:X,onAfterLeave:J},e.menuProps),{default:()=>[t&&r(x_,h({ref:j,filterable:!0,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:W,onFocusin:Z,onFocusout:ee,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},q,e.listProps),{default:()=>{var t,n,i;return[null==(t=a["prepend-item"])?void 0:t.call(a),!M.value.length&&!e.hideNoData&&((null==(n=a["no-data"])?void 0:n.call(a))??r(p_,{key:"no-data",title:u(e.noDataText)},null)),r(dS,{ref:b,renderless:!0,items:M.value,itemKey:"value"},{default:t=>{var n,i,o;let{item:u,index:c,itemRef:d}=t;const f=h(u.props,{ref:d,key:u.value,active:!(!L.value||0!==c)||void 0,onClick:()=>ae(u,null)});return"divider"===u.type?(null==(n=a.divider)?void 0:n.call(a,{props:u.raw,index:c}))??r(Aw,h(u.props,{key:`divider-${c}`}),null):"subheader"===u.type?(null==(i=a.subheader)?void 0:i.call(a,{props:u.raw,index:c}))??r(v_,h(u.props,{key:`subheader-${c}`}),null):(null==(o=a.item)?void 0:o.call(a,{item:u,index:c,props:f}))??r(p_,h(f,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?r(SI,{key:u.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependAvatar&&r(Mb,{image:u.props.prependAvatar},null),u.props.prependIcon&&r(cb,{icon:u.props.prependIcon},null)])},title:()=>{var e,t,n,a;return p.value?u.title:(t="v-autocomplete",n=u.title,null!=(a=null==(e=D(u))?void 0:e.title)&&a.length?a.map((e,r)=>{const i=0===r?0:a[r-1][1],o=[l("span",{class:s(`${t}__unmask`)},[n.slice(i,e[0])]),l("span",{class:s(`${t}__mask`)},[n.slice(e[0],e[1])])];return r===a.length-1&&o.push(l("span",{class:s(`${t}__unmask`)},[n.slice(e[1])])),l(_,null,[o])}):n)}})}}),null==(i=a["append-item"])?void 0:i.call(a)]}})]}),T.value.map((t,n)=>{function o(e){e.stopPropagation(),e.preventDefault(),ae(t,!1)}const u={"onClick:close":o,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),o(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},c=R.value?!!a.chip:!!a.selection,d=c?Et(R.value?a.chip({item:t,index:n,props:u}):a.selection({item:t,index:n})):void 0;if(!c||d)return l("div",{key:t.value,class:s(["v-autocomplete__selection",n===w.value&&["v-autocomplete__selection--selected",k.value]]),style:i(n===w.value?E.value:{})},[R.value?a.chip?r(tb,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[d]}):r(QI,h({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},u),null):d??l("span",{class:"v-autocomplete__selection-text"},[t.title,e.multiple&&n<T.value.length-1&&l("span",{class:"v-autocomplete__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return l(_,null,[null==(t=a["append-inner"])?void 0:t.call(a,...s),e.menuIcon?r(cb,{class:"v-autocomplete__menu-icon",color:null==(n=c.value)?void 0:n.fieldIconColor,icon:e.menuIcon,onMousedown:G,onClick:Tt,"aria-label":u($.value),title:u($.value),tabindex:"-1"},null):void 0])}})}),lI({isFocused:d,isPristine:p,menu:U,search:x,filteredItems:V,select:ae},c)}}),AS=ne()({name:"VCardActions",props:ye(),setup(e,t){let{slots:n}=t;return re({VBtn:{slim:!0,variant:"text"}}),ve(()=>{var t;return l("div",{class:s(["v-card-actions",e.class]),style:i(e.style)},[null==(t=n.default)?void 0:t.call(n)])}),{}}}),NS=ae({opacity:[Number,String],...ye(),...lb()},"VCardSubtitle"),VS=ne()({name:"VCardSubtitle",props:NS(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-card-subtitle",e.class]),style:i([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),DS=je("v-card-title"),MS=ae({appendAvatar:String,appendIcon:be,prependAvatar:String,prependIcon:be,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ye(),...Eb()},"VCardItem"),RS=ne()({name:"VCardItem",props:MS(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;const a=!(!e.prependAvatar&&!e.prependIcon),o=!(!a&&!n.prepend),u=!(!e.appendAvatar&&!e.appendIcon),c=!(!u&&!n.append),d=!(null==e.title&&!n.title),h=!(null==e.subtitle&&!n.subtitle);return l("div",{class:s(["v-card-item",e.class]),style:i(e.style)},[o&&l("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?r(tb,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):l(_,null,[e.prependAvatar&&r(Mb,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&r(cb,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&r(DS,{key:"title"},{default:()=>{var t;return[(null==(t=n.title)?void 0:t.call(n))??M(e.title)]}}),h&&r(VS,{key:"subtitle"},{default:()=>{var t;return[(null==(t=n.subtitle)?void 0:t.call(n))??M(e.subtitle)]}}),null==(t=n.default)?void 0:t.call(n)]),c&&l("div",{key:"append",class:"v-card-item__append"},[n.append?r(tb,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):l(_,null,[e.appendIcon&&r(cb,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&r(Mb,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),PS=ae({opacity:[Number,String],...ye(),...lb()},"VCardText"),OS=ne()({name:"VCardText",props:PS(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-card-text",e.class]),style:i([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),LS=ae({appendAvatar:String,appendIcon:be,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Sb(),...ye(),...Eb(),...db(),...Rb(),...ew(),...Yb(),...rw(),...vb(),...ow(),...lb(),...ge(),...Nb({variant:"elevated"})},"VCard"),FS=ne()({name:"VCard",directives:{vRipple:kw},props:LS(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:i}=Ce(e),{borderClasses:s}=Cb(e),{colorClasses:o,colorStyles:u,variantClasses:c}=Vb(e),{densityClasses:d}=xb(e),{dimensionStyles:p}=hb(e),{elevationClasses:f}=Pb(e),{loaderClasses:v}=tw(e),{locationStyles:m}=Xb(e),{positionClasses:g}=iw(e),{roundedClasses:y}=mb(e),b=sw(e,n);return ve(()=>{const t=!1!==e.link&&b.isLink.value,n=!e.disabled&&!1!==e.link&&(e.link||b.isClickable.value),_=t?"a":e.tag,I=!(!a.title&&null==e.title),S=!(!a.subtitle&&null==e.subtitle),C=I||S,k=!!(a.append||e.appendAvatar||e.appendIcon),E=!!(a.prepend||e.prependAvatar||e.prependIcon),x=!(!a.image&&!e.image),T=C||E||k,A=!(!a.text&&null==e.text);return w(r(_,h({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":n},i.value,s.value,o.value,d.value,f.value,v.value,g.value,y.value,c.value,e.class],style:[u.value,p.value,m.value,e.style],onClick:n&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>{var t;return[x&&l("div",{key:"image",class:"v-card__image"},[a.image?r(tb,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):r(Ib,{key:"image-img",cover:!0,src:e.image},null)]),r(nw,{name:"v-card",active:!!e.loading,color:"boolean"==typeof e.loading?void 0:e.loading},{default:a.loader}),T&&r(RS,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),A&&r(OS,{key:"text"},{default:()=>{var t;return[(null==(t=a.text)?void 0:t.call(a))??e.text]}}),null==(t=a.default)?void 0:t.call(a),a.actions&&r(AS,null,{default:a.actions}),Ab(n,"v-card")]}}),[[kw,n&&e.ripple]])}),{}}}),BS=ae({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...rI({origin:"center center",scrollStrategy:"block",transition:{component:Ow},zIndex:2400})},"VDialog"),US=ne()({name:"VDialog",props:BS(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const i=ke(e,"modelValue"),{scopeId:s}=Q_(),o=f();function l(e){var t,n;const a=e.relatedTarget,r=e.target;if(a!==r&&(null==(t=o.value)?void 0:t.contentEl)&&(null==(n=o.value)?void 0:n.globalTop)&&![document,o.value.contentEl].includes(r)&&!o.value.contentEl.contains(r)){const e=mt(o.value.contentEl);if(!e.length)return;const t=e[0],n=e[e.length-1];a===t?n.focus():t.focus()}}function u(){var t;n("afterEnter"),(e.scrim||e.retainFocus)&&(null==(t=o.value)?void 0:t.contentEl)&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function c(){n("afterLeave")}return y(()=>{document.removeEventListener("focusin",l)}),Me&&v(()=>i.value&&e.retainFocus,e=>{e?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0}),v(i,async e=>{var t;e||(await g(),null==(t=o.value.activatorEl)||t.focus({preventScroll:!0}))}),ve(()=>{const t=iI.filterProps(e),n=h({"aria-haspopup":"dialog"},e.activatorProps),l=h({tabindex:-1},e.contentProps);return r(iI,h({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,"aria-modal":"true",activatorProps:n,contentProps:l,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:u,onAfterLeave:c},s),{activator:a.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(tb,{root:"VDialog"},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a,...t)]}})}})}),lI({},o)}}),$S=ae({fluid:{type:Boolean,default:!1},...ye(),...db(),...lb()},"VContainer"),jS=ne()({name:"VContainer",props:$S(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Ve(),{dimensionStyles:o}=hb(e);return ve(()=>r(e.tag,{class:s(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:i([o.value,e.style])},n)),{}}}),zS=At.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),qS=At.reduce((e,t)=>(e["offset"+G(t)]={type:[String,Number],default:null},e),{}),HS=At.reduce((e,t)=>(e["order"+G(t)]={type:[String,Number],default:null},e),{}),KS={col:Object.keys(zS),offset:Object.keys(qS),order:Object.keys(HS)};function GS(e,t,n){let a=e;if(null!=n&&!1!==n){if(t){a+=`-${t.replace(e,"")}`}return"col"===e&&(a="v-"+a),"col"!==e||""!==n&&!0!==n?(a+=`-${n}`,a.toLowerCase()):a.toLowerCase()}}const WS=["auto","start","end","center","baseline","stretch"],QS=ae({cols:{type:[Boolean,String,Number],default:!1},...zS,offset:{type:[String,Number],default:null},...qS,order:{type:[String,Number],default:null},...HS,alignSelf:{type:String,default:null,validator:e=>WS.includes(e)},...ye(),...lb()},"VCol"),YS=ne()({name:"VCol",props:QS(),setup(e,t){let{slots:n}=t;const a=o(()=>{const t=[];let n;for(n in KS)KS[n].forEach(a=>{const r=e[a],i=GS(n,a,r);i&&t.push(i)});const a=t.some(e=>e.startsWith("v-col-"));return t.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t});return()=>{var t;return p(e.tag,{class:[a.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),XS=["start","end","center"],JS=["space-between","space-around","space-evenly"];function ZS(e,t){return At.reduce((n,a)=>(n[e+G(a)]=t(),n),{})}const eC=[...XS,"baseline","stretch"],tC=e=>eC.includes(e),nC=ZS("align",()=>({type:String,default:null,validator:tC})),aC=[...XS,...JS],rC=e=>aC.includes(e),iC=ZS("justify",()=>({type:String,default:null,validator:rC})),sC=[...XS,...JS,"stretch"],oC=e=>sC.includes(e),lC=ZS("alignContent",()=>({type:String,default:null,validator:oC})),uC={align:Object.keys(nC),justify:Object.keys(iC),alignContent:Object.keys(lC)},cC={align:"align",justify:"justify",alignContent:"align-content"};function dC(e,t,n){let a=cC[e];if(null!=n){if(t){a+=`-${t.replace(e,"")}`}return a+=`-${n}`,a.toLowerCase()}}const hC=ae({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:tC},...nC,justify:{type:String,default:null,validator:rC},...iC,alignContent:{type:String,default:null,validator:oC},...lC,...ye(),...lb()},"VRow"),pC=ne()({name:"VRow",props:hC(),setup(e,t){let{slots:n}=t;const a=o(()=>{const t=[];let n;for(n in uC)uC[n].forEach(a=>{const r=e[a],i=dC(n,a,r);i&&t.push(i)});return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t});return()=>{var t;return p(e.tag,{class:["v-row",a.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),fC=je("v-spacer","div","VSpacer"),vC={key:0,class:"mb-4"},mC={key:1,class:"mt-6"},gC={class:"text-h6 font-weight-medium mb-3"},yC={class:"d-flex align-center gap-2"},bC=Zy({__name:"ItemEditModal",props:{modelValue:{type:Boolean,default:!1},character:{type:Object,default:null},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},isNewCharacter:{type:Boolean,default:!1}},emits:["update:modelValue","save"],setup(e,{emit:t}){const n=e,a=t,i=o({get:()=>n.modelValue,set:e=>a("update:modelValue",e)}),s=f([]),u=f([]),c=f(""),d=f(!1),p=o(()=>n.character?n.characterMastersMap.get(n.character.characterMasterId):null),m=o(()=>n.itemMasters.map(e=>({id:e.id,name:e.name}))),g=e=>{if(!e)return!0;const t=u.value.filter(e=>!e.isVirtual).length,n=u.value.filter(e=>e.isVirtual).length;return t>3?"3":n>3?"3":!(e.length>6)||"6"},y=e=>{const t=u.value.find(t=>t.itemId===e);return t?t.isVirtual?"orange":"success":"primary"},b=e=>{const t=e.filter(e=>!u.value.some(t=>t.itemId===e));u.value=u.value.filter(t=>e.includes(t.itemId)),t.forEach(e=>{u.value.push({itemId:Number(e),isVirtual:!1,willRemove:!1})})},w=()=>{i.value=!1,c.value=""},I=async()=>{const e=u.value.filter(e=>!e.isVirtual).length,t=u.value.filter(e=>e.isVirtual).length;if(e>3)c.value="3";else if(t>3)c.value="3";else if(u.value.length>6)c.value="6";else{d.value=!0;try{a("save",{character:n.character,items:u.value,isNew:n.isNewCharacter}),w()}catch(r){c.value=`: ${r.message}`}finally{d.value=!1}}};return v(()=>n.character,e=>{if(!e)return u.value=[],void(s.value=[]);const t=ir(e.items||[]);u.value=t.map(e=>({itemId:e.itemId,isVirtual:e.isVirtual||!1,willRemove:e.willRemove||!1})),s.value=t.map(e=>e.itemId)},{immediate:!0}),(t,a)=>($(),q(US,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),"max-width":"600px",persistent:""},{default:j(()=>[r(FS,{class:"dialog-card"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:e.isNewCharacter?"mdi-plus-circle":"mdi-pencil",class:"mr-2"},null,8,["icon"]),z(" "+M(e.isNewCharacter?"+":""),1)]),_:1}),r(OS,{class:"pa-6"},{default:j(()=>[p.value?($(),U("div",vC,[r(QI,{color:"primary",variant:"tonal",class:"mb-2"},{default:j(()=>[z(M(p.value.monsterName),1)]),_:1})])):W("",!0),r(TS,{modelValue:s.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>s.value=e),b],items:m.value,"item-title":"name","item-value":"id",label:"3+3=6",multiple:"",chips:"","closable-chips":"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-sword-cross",rules:[g]},{chip:j(({props:e,item:t})=>[r(QI,h(e,{color:y(t.value),closable:""}),{default:j(()=>[z(M(t.title),1)]),_:2},1040,["color"])]),_:1},8,["modelValue","items","rules"]),u.value.length>0?($(),U("div",mC,[r(Aw,{class:"mb-4"}),l("h6",gC,[r(cb,{icon:"mdi-cog",class:"mr-2",color:"secondary"}),a[3]||(a[3]=z("  ",-1))]),r(x_,null,{default:j(()=>[($(!0),U(_,null,Q(u.value,e=>($(),q(p_,{key:e.itemId,class:"mb-2 border rounded"},{prepend:j(()=>[r(cb,{icon:e.isVirtual?"mdi-clipboard-text-outline":"mdi-check-circle",color:e.isVirtual?"orange":"success"},null,8,["icon","color"])]),append:j(()=>[l("div",yC,[r(Hb,{"model-value":e.isVirtual?"virtual":"real","onUpdate:modelValue":t=>((e,t)=>{const n=u.value.find(t=>t.itemId===e);n&&(n.isVirtual="virtual"===t)})(e.itemId,t),mandatory:"",density:"compact",color:"primary"},{default:j(()=>[r(xw,{value:"real",size:"small"},{default:j(()=>[r(cb,{icon:"mdi-check",class:"mr-1"}),a[4]||(a[4]=z("  ",-1))]),_:1,__:[4]}),r(xw,{value:"virtual",size:"small"},{default:j(()=>[r(cb,{icon:"mdi-clipboard-text-outline",class:"mr-1"}),a[5]||(a[5]=z("  ",-1))]),_:1,__:[5]})]),_:2},1032,["model-value","onUpdate:modelValue"]),e.isVirtual?W("",!0):($(),q(FI,{key:0,modelValue:e.willRemove,"onUpdate:modelValue":t=>e.willRemove=t,label:"",density:"compact","hide-details":"",color:"warning"},null,8,["modelValue","onUpdate:modelValue"]))])]),default:j(()=>[r(d_,null,{default:j(()=>{return[z(M((t=e.itemId,n.itemMastersMap.get(Number(t))||"")),1)];var t}),_:2},1024)]),_:2},1024))),128))]),_:1})])):W("",!0),c.value?($(),q(IS,{key:2,type:"error",variant:"tonal",class:"mt-4",closable:"","onClick:close":a[1]||(a[1]=e=>c.value="")},{default:j(()=>[z(M(c.value),1)]),_:1})):W("",!0)]),_:1}),r(AS,{class:"pa-4"},{default:j(()=>[r(fC),r(xw,{onClick:w,variant:"outlined",color:"secondary"},{default:j(()=>a[6]||(a[6]=[z("  ",-1)])),_:1,__:[6]}),r(xw,{onClick:I,variant:"elevated",color:"primary",loading:d.value},{default:j(()=>a[7]||(a[7]=[z("  ",-1)])),_:1,__:[7]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-a79958d5"]]);const wC=ae({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1==0},totalVisible:[Number,String],firstIcon:{type:be,default:"$first"},prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},lastIcon:{type:be,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Sb(),...ye(),...Eb(),...Rb(),...vb(),...sb(),...lb({tag:"nav"}),...ge(),...Nb({variant:"text"})},"VPagination"),_C=ne()({name:"VPagination",props:wC(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:u}=t;const c=ke(e,"modelValue"),{t:d,n:p}=wt(),{isRtl:v}=Ve(),{themeClasses:m}=Ce(e),{width:y}=pt(),w=n(-1);re(void 0,{scoped:!0});const{resizeRef:_}=Ae(e=>{if(!e.length)return;const{target:t,contentRect:n}=e[0],a=t.querySelector(".v-pagination__list > *");if(!a)return;const r=n.width,i=a.offsetWidth+2*parseFloat(getComputedStyle(a).marginRight);w.value=k(r,i)}),I=o(()=>parseInt(e.length,10)),S=o(()=>parseInt(e.start,10)),C=o(()=>null!=e.totalVisible?parseInt(e.totalVisible,10):w.value>=0?w.value:k(y.value,58));function k(t,n){const a=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((t-n*a)/n).toFixed(2))))}const E=o(()=>{if(I.value<=0||isNaN(I.value)||I.value>Number.MAX_SAFE_INTEGER)return[];if(C.value<=0)return[];if(1===C.value)return[c.value];if(I.value<=C.value)return Nt(I.value,S.value);const t=C.value%2==0,n=t?C.value/2:Math.floor(C.value/2),a=t?n:n+1,r=I.value-n;if(a-c.value>=0)return[...Nt(Math.max(1,C.value-1),S.value),e.ellipsis,I.value];if(c.value-r>=(t?1:0)){const t=C.value-1,n=I.value-t+S.value;return[S.value,e.ellipsis,...Nt(t,n)]}{const t=Math.max(1,C.value-2),n=1===t?c.value:c.value-Math.ceil(t/2)+S.value;return[S.value,e.ellipsis,...Nt(t,n),e.ellipsis,I.value]}});function x(e,t,n){e.preventDefault(),c.value=t,n&&u(n,t)}const{refs:T,updateRef:A}=function(){const e=f([]);return Y(()=>e.value=[]),{refs:e,updateRef:function(t,n){e.value[n]=t}}}();re({VPaginationBtn:{color:b(()=>e.color),border:b(()=>e.border),density:b(()=>e.density),size:b(()=>e.size),variant:b(()=>e.variant),rounded:b(()=>e.rounded),elevation:b(()=>e.elevation)}});const N=o(()=>E.value.map((t,n)=>{const a=e=>A(e,n);if("string"==typeof t)return{isActive:!1,key:`ellipsis-${n}`,page:t,props:{ref:a,ellipsis:!0,icon:!0,disabled:!0}};{const n=t===c.value;return{isActive:n,key:t,page:p(t),props:{ref:a,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:n?e.activeColor:e.color,"aria-current":n,"aria-label":d(n?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>x(e,t)}}}})),V=o(()=>{const t=!!e.disabled||c.value<=S.value,n=!!e.disabled||c.value>=S.value+I.value-1;return{first:e.showFirstLastPage?{icon:v.value?e.lastIcon:e.firstIcon,onClick:e=>x(e,S.value,"first"),disabled:t,"aria-label":d(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:v.value?e.nextIcon:e.prevIcon,onClick:e=>x(e,c.value-1,"prev"),disabled:t,"aria-label":d(e.previousAriaLabel),"aria-disabled":t},next:{icon:v.value?e.prevIcon:e.nextIcon,onClick:e=>x(e,c.value+1,"next"),disabled:n,"aria-label":d(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:v.value?e.firstIcon:e.lastIcon,onClick:e=>x(e,S.value+I.value-1,"last"),disabled:n,"aria-label":d(e.lastAriaLabel),"aria-disabled":n}:void 0}});function D(){var e;const t=c.value-S.value;null==(e=T.value[t])||e.$el.focus()}function M(t){t.key===Vt.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,g(D)):t.key===Vt.right&&!e.disabled&&c.value<S.value+I.value-1&&(c.value=c.value+1,g(D))}return ve(()=>r(e.tag,{ref:_,class:s(["v-pagination",m.value,e.class]),style:i(e.style),role:"navigation","aria-label":d(e.ariaLabel),onKeydown:M,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(V.value.first):r(xw,h({_as:"VPaginationBtn"},V.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(V.value.prev):r(xw,h({_as:"VPaginationBtn"},V.value.prev),null)]),N.value.map((e,t)=>l("li",{key:e.key,class:s(["v-pagination__item",{"v-pagination__item--is-active":e.isActive}]),"data-test":"v-pagination-item"},[a.item?a.item(e):r(xw,h({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(V.value.next):r(xw,h({_as:"VPaginationBtn"},V.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(V.value.last):r(xw,h({_as:"VPaginationBtn"},V.value.last),null)])])]})),{}}}),IC=ae({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),SC=Symbol.for("vuetify:data-table-pagination");const CC=ae({prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},firstIcon:{type:be,default:"$first"},lastIcon:{type:be,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),kC=ne()({name:"VDataTableFooter",props:CC(),setup(e,t){let{slots:n}=t;const{t:a}=wt(),{page:i,pageCount:s,startIndex:u,stopIndex:c,itemsLength:d,itemsPerPage:p,setItemsPerPage:f}=function(){const e=T(SC);if(!e)throw new Error("Missing pagination!");return e}(),v=o(()=>e.itemsPerPageOptions.map(e=>"number"==typeof e?{value:e,title:-1===e?a("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?a(e.title):e.title}));return ve(()=>{var t;const o=_C.filterProps(e);return l("div",{class:"v-data-table-footer"},[null==(t=n.prepend)?void 0:t.call(n),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),r(vS,{items:v.value,modelValue:p.value,"onUpdate:modelValue":e=>f(Number(e)),density:"compact",variant:"outlined",hideDetails:!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[a(e.pageText,d.value?u.value+1:0,c.value,d.value)])]),l("div",{class:"v-data-table-footer__pagination"},[r(_C,h({modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},o),null)])])}),{}}}),EC=Dt({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",i="string"==typeof e.fixed?e.fixed:e.fixed?"start":"none";return r(a,{class:s(["v-data-table__td",{"v-data-table-column--fixed":"start"===i,"v-data-table-column--fixed-end":"end"===i,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:he(e.height),width:he(e.width),maxWidth:he(e.maxWidth),left:"start"===i?he(e.fixedOffset||null):void 0,right:"end"===i?he(e.fixedEndOffset||null):void 0}},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n)]}})}),xC=ae({headers:Array},"DataTable-header"),TC=Symbol.for("vuetify:data-table-headers"),AC={title:"",sortable:!1},NC={...AC,width:48};function VC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const n of e.children)VC(n,t);else t.push(e);return t}function DC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&DC(n.children,t);return t}function MC(e){if(e.key)return"data-table-group"===e.key?AC:["data-table-expand","data-table-select"].includes(e.key)?NC:void 0}function RC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map(e=>RC(e,t+1))):t}function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=PC(n,t)}else e.fixed&&"end"!==e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function OC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=OC(n,t)}else"end"===e.fixed&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function LC(e,t){const n=[];let a=0;const r=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({element:e,priority:0}));return{enqueue:(t,n)=>{let a=!1;for(let r=0;r<e.length;r++)if(e[r].priority>n){e.splice(r,0,{element:t,priority:n}),a=!0;break}a||e.push({element:t,priority:n})},size:()=>e.length,count:()=>{let t=0;if(!e.length)return 0;const n=Math.floor(e[0].priority);for(let a=0;a<e.length;a++)Math.floor(e[a].priority)===n&&(t+=1);return t},dequeue:()=>e.shift()}}(e);for(;r.size()>0;){let e=r.count();const i=[];let s=1;for(;e>0;){const{element:n,priority:o}=r.dequeue(),l=t-a-RC(n);if(i.push({...n,rowspan:l??1,colspan:n.children?VC(n).length:1}),n.children)for(const e of n.children){const t=o%1+s/Math.pow(10,a+2);r.enqueue(e,a+l+t)}s+=1,e-=1}a+=1,n.push(i)}return{columns:e.map(e=>VC(e)).flat(),headers:n}}function FC(e){const t=[];for(const n of e){const e={...MC(n),...n},a=e.key??("string"==typeof e.value?e.value:null),r=e.value??a??null,i={...e,key:a,value:r,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?FC(e.children):void 0};t.push(i)}return t}function BC(e,t){const n=f([]),a=f([]),r=f({}),i=f({}),s=f({});V(()=>{var o,l,u;const c=(e.headers||Object.keys(e.items[0]??{}).map(e=>({key:e,title:G(e)}))).slice(),d=DC(c);(null==(o=null==t?void 0:t.groupBy)?void 0:o.value.length)&&!d.has("data-table-group")&&c.unshift({key:"data-table-group",title:"Group"}),(null==(l=null==t?void 0:t.showSelect)?void 0:l.value)&&!d.has("data-table-select")&&c.unshift({key:"data-table-select"}),(null==(u=null==t?void 0:t.showExpand)?void 0:u.value)&&!d.has("data-table-expand")&&c.push({key:"data-table-expand"});const h=FC(c);!function(e){let t=!1;function n(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";if(e)if("none"!==r&&(e.fixed=r),!0===e.fixed&&(e.fixed="start"),e.fixed===a)if(e.children)if("start"===a)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],a,a);else for(let t=0;t<e.children.length;t++)n(e.children[t],a,a);else t||"start"!==a?t||"end"!==a?isNaN(Number(e.width))?Mt(`Multiple fixed columns should have a static width (key: ${e.key})`):e.minWidth=Math.max(Number(e.width)||0,Number(e.minWidth)||0):e.firstFixedEnd=!0:e.lastFixed=!0,t=!0;else if(e.children)if("start"===a)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],a);else for(let t=0;t<e.children.length;t++)n(e.children[t],a);else t=!1}for(let i=e.length-1;i>=0;i--)n(e[i],"start");for(let i=0;i<e.length;i++)n(e[i],"end");let a=0;for(let i=0;i<e.length;i++)a=PC(e[i],a);let r=0;for(let i=e.length-1;i>=0;i--)r=OC(e[i],r)}(h);const p=Math.max(...h.map(e=>RC(e)))+1,f=LC(h,p);n.value=f.headers,a.value=f.columns;const v=f.headers.flat(1);for(const e of v)e.key&&(e.sortable&&(e.sort&&(r.value[e.key]=e.sort),e.sortRaw&&(i.value[e.key]=e.sortRaw)),e.filter&&(s.value[e.key]=e.filter))});const o={headers:n,columns:a,sortFunctions:r,sortRawFunctions:i,filterFunctions:s};return x(TC,o),o}function UC(){const e=T(TC);if(!e)throw new Error("Missing headers!");return e}const $C={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:n,value:a}=e;return new Set(a?[null==(t=n[0])?void 0:t.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},jC={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return jC.select({items:n,value:t,selected:a})}},zC={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return zC.select({items:n,value:t,selected:a})}},qC=ae({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ee}},"DataTable-select"),HC=Symbol.for("vuetify:data-table-selection");function KC(e,t){let{allItems:a,currentPage:r}=t;const i=ke(e,"modelValue",e.modelValue,t=>new Set(xe(t).map(t=>{var n;return(null==(n=a.value.find(n=>e.valueComparator(t,n.value)))?void 0:n.value)??t})),e=>[...e.values()]),s=o(()=>a.value.filter(e=>e.selectable)),l=o(()=>r.value.filter(e=>e.selectable)),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return $C;case"all":return zC;default:return jC}}),c=n(null);function d(e){return xe(e).every(e=>i.value.has(e.value))}function h(e,t){const n=u.value.select({items:e,value:t,selected:new Set(i.value)});i.value=n}const p=o(()=>i.value.size>0),f=o(()=>{const e=u.value.allSelected({allItems:s.value,currentPage:l.value});return!!e.length&&d(e)}),v={toggleSelect:function(t,n,a){const i=[];if(n=n??r.value.findIndex(e=>e.value===t.value),"single"!==e.selectStrategy&&(null==a?void 0:a.shiftKey)&&null!==c.value){const[e,t]=[c.value,n].sort((e,t)=>e-t);i.push(...r.value.slice(e,t+1).filter(e=>e.selectable))}else i.push(t),c.value=n;h(i,!d([t]))},select:h,selectAll:function(e){const t=u.value.selectAll({value:e,allItems:s.value,currentPage:l.value,selected:new Set(i.value)});i.value=t},isSelected:d,isSomeSelected:function(e){return xe(e).some(e=>i.value.has(e.value))},someSelected:p,allSelected:f,showSelectAll:b(()=>u.value.showSelectAll),lastSelectedIndex:c,selectStrategy:u};return x(HC,v),v}function GC(){const e=T(HC);if(!e)throw new Error("Missing selection!");return e}const WC=ae({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),QC=Symbol.for("vuetify:data-table-sort");function YC(e){return{sortBy:ke(e,"sortBy"),mustSort:b(()=>e.mustSort),multiSort:b(()=>e.multiSort)}}function XC(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e;const i={sortBy:t,toggleSort:e=>{if(null==e.key)return;let i=t.value.map(e=>({...e}))??[];const s=i.find(t=>t.key===e.key);s?"desc"===s.order?n.value&&1===i.length?s.order="asc":i=i.filter(t=>t.key!==e.key):s.order="desc":a.value?i.push({key:e.key,order:"asc"}):i=[{key:e.key,order:"asc"}],t.value=i,r&&(r.value=1)},isSorted:function(e){return!!t.value.find(t=>t.key===e.key)}};return x(QC,i),i}function JC(){const e=T(QC);if(!e)throw new Error("Missing sort!");return e}function ZC(e,t,n,a){const r=wt(),i=o(()=>{var i,s;return n.value.length?function(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"}),i=e.map(e=>[e,(null==a?void 0:a.transform)?a.transform(e):e]);return i.sort((e,n)=>{var i,s;for(let o=0;o<t.length;o++){let l=!1;const u=t[o].key,c=t[o].order??"asc";if(!1===c)continue;let d=Rt(e[1],u),h=Rt(n[1],u),p=e[0].raw,f=n[0].raw;if("desc"===c&&([d,h]=[h,d],[p,f]=[f,p]),null==(i=null==a?void 0:a.sortRawFunctions)?void 0:i[u]){const e=a.sortRawFunctions[u](p,f);if(null==e)continue;if(l=!0,e)return e}if(null==(s=null==a?void 0:a.sortFunctions)?void 0:s[u]){const e=a.sortFunctions[u](d,h);if(null==e)continue;if(l=!0,e)return e}if(!l&&(d instanceof Date&&h instanceof Date&&(d=d.getTime(),h=h.getTime()),[d,h]=[d,h].map(e=>null!=e?e.toString().toLocaleLowerCase():e),d!==h))return Pt(d)&&Pt(h)?0:Pt(d)?-1:Pt(h)?1:isNaN(d)||isNaN(h)?r.compare(d,h):Number(d)-Number(h)}return 0}).map(e=>{let[t]=e;return t})}(t.value,n.value,r.current.value,{transform:null==a?void 0:a.transform,sortFunctions:{...e.customKeySort,...null==(i=null==a?void 0:a.sortFunctions)?void 0:i.value},sortRawFunctions:null==(s=null==a?void 0:a.sortRawFunctions)?void 0:s.value}):t.value});return{sortedItems:i}}const ek=ae({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:be,default:"$sortAsc"},sortDescIcon:{type:be,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...St(),...ew()},"VDataTableHeaders"),tk=ne()({name:"VDataTableHeaders",props:ek(),setup(e,t){let{slots:n}=t;const{t:a}=wt(),{toggleSort:u,sortBy:c,isSorted:d}=JC(),{someSelected:p,allSelected:f,selectAll:v,showSelectAll:m}=GC(),{columns:g,headers:y}=UC(),{loaderClasses:b}=tw(e);function w(t,n){if(!e.sticky&&!e.fixedHeader&&!t.fixed)return;const a="string"==typeof t.fixed?t.fixed:t.fixed?"start":"none";return{position:"sticky",left:"start"===a?he(t.fixedOffset):void 0,right:"end"===a?he(t.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${n})`:void 0}}function I(t){const n=c.value.find(e=>e.key===t.key);return n?"asc"===n.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:S,backgroundColorStyles:C}=rb(()=>e.color),{displayClasses:k,mobile:E}=pt(e),x=o(()=>({headers:y.value,columns:g.value,toggleSort:u,isSorted:d,sortBy:c.value,someSelected:p.value,allSelected:f.value,selectAll:v,getSortIcon:I})),T=o(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},k.value,b.value]),A=t=>{let{column:a,x:o,y:g}=t;const y="data-table-select"===a.key||"data-table-expand"===a.key,b=h(e.headerProps??{},a.headerProps??{});return r(EC,h({tag:"th",align:a.align,class:[{"v-data-table__th--sortable":a.sortable&&!e.disableSort,"v-data-table__th--sorted":d(a),"v-data-table__th--fixed":a.fixed},...T.value],style:{width:he(a.width),minWidth:he(a.minWidth),maxWidth:he(a.maxWidth),...w(a,g)},colspan:a.colspan,rowspan:a.rowspan,fixed:a.fixed,nowrap:a.nowrap,lastFixed:a.lastFixed,firstFixedEnd:a.firstFixedEnd,noPadding:y,tabindex:a.sortable?0:void 0,onClick:a.sortable?()=>u(a):void 0,onKeydown:a.sortable?t=>function(t,n){"Enter"!==t.key||e.disableSort||u(n)}(t,a):void 0},b),{default:()=>{var t;const o=`header.${a.key}`,h={column:a,selectAll:v,isSorted:d,toggleSort:u,sortBy:c.value,someSelected:p.value,allSelected:f.value,getSortIcon:I};return n[o]?n[o](h):"data-table-select"===a.key?(null==(t=n["header.data-table-select"])?void 0:t.call(n,h))??(m.value&&r(SI,{modelValue:f.value,indeterminate:p.value&&!f.value,"onUpdate:modelValue":v},null)):l("div",{class:"v-data-table-header__content"},[l("span",null,[a.title]),a.sortable&&!e.disableSort&&r(cb,{key:"icon",class:"v-data-table-header__sort-icon",icon:I(a)},null),e.multiSort&&d(a)&&l("div",{key:"badge",class:s(["v-data-table-header__sort-badge",...S.value]),style:i(C.value)},[c.value.findIndex(e=>e.key===a.key)+1])])}})},N=()=>{const t=o(()=>g.value.filter(t=>(null==t?void 0:t.sortable)&&!e.disableSort)),n=o(()=>{if(null!=g.value.find(e=>"data-table-select"===e.key))return f.value?"$checkboxOn":p.value?"$checkboxIndeterminate":"$checkboxOff"});return r(EC,h({tag:"th",class:[...T.value],colspan:y.value.length+1},e.headerProps),{default:()=>[l("div",{class:"v-data-table-header__content"},[r(vS,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:t.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>c.value=[],appendIcon:n.value,"onClick:append":()=>v(!f.value)},{chip:e=>{var t;return r(QI,{onClick:(null==(t=e.item.raw)?void 0:t.sortable)?()=>u(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,r(cb,{class:s(["v-data-table__td-sort-icon",d(e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:I(e.item.raw),size:"small"},null)]})}})])]})};ve(()=>E.value?l("tr",null,[r(N,null,null)]):l(_,null,[n.headers?n.headers(x.value):y.value.map((e,t)=>l("tr",null,[e.map((e,n)=>r(A,{column:e,x:n,y:t},null))])),e.loading&&l("tr",{class:"v-data-table-progress"},[l("th",{colspan:g.value.length},[r(nw,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),nk=ae({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),ak=Symbol.for("vuetify:data-table-group");function rk(e){return{groupBy:ke(e,"groupBy")}}function ik(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=f(new Set);function i(e){return r.value.has(e.id)}const s={sortByWithGroups:o(()=>n.value.map(e=>({...e,order:e.order??!1})).concat((null==t?void 0:t.value)?[]:a.value)),toggleGroup:function(e){const t=new Set(r.value);i(e)?t.delete(e.id):t.add(e.id),r.value=t},opened:r,groupBy:n,extractRows:function(e){return function e(t){const n=[];for(const a of t.items)"type"in a&&"group"===a.type?n.push(...e(a)):n.push(a);return[...new Set(n)]}({items:e})},isGroupOpen:i};return x(ak,s),s}function sk(){const e=T(ak);if(!e)throw new Error("Missing group!");return e}function ok(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const r=function(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const e=Rt(a.raw,t);n.has(e)||n.set(e,[]),n.get(e).push(a)}return n}(e,t[0]),i=[],s=t.slice(1);return r.forEach((e,r)=>{const o=t[0],l=`${a}_${o}_${r}`;i.push({depth:n,id:l,key:o,value:r,items:s.length?ok(e,s,n+1,l):e,type:"group"})}),i}function lk(e,t){const n=[];for(const a of e)"type"in a&&"group"===a.type?(null!=a.value&&n.push(a),(t.has(a.id)||null==a.value)&&n.push(...lk(a.items,t))):n.push(a);return n}function uk(e,t,n){return{flatItems:o(()=>{if(!t.value.length)return e.value;return lk(ok(e.value,t.value.map(e=>e.key)),n.value)})}}const ck=ae({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),dk=ne()({name:"VDataTableGroupHeaderRow",props:ck(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:i,extractRows:s}=sk(),{isSelected:u,isSomeSelected:c,select:d}=GC(),{columns:h}=UC(),p=o(()=>s([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[h.value.map(t=>{var s,o;if("data-table-group"===t.key){const t=a(e.item)?"$expand":"$next",o=()=>i(e.item);return(null==(s=n["data-table-group"])?void 0:s.call(n,{item:e.item,count:p.value.length,props:{icon:t,onClick:o}}))??r(EC,{class:"v-data-table-group-header-row__column"},{default:()=>[r(xw,{size:"small",variant:"text",icon:t,onClick:o},null),l("span",null,[e.item.value]),l("span",null,[z("("),p.value.length,z(")")])]})}if("data-table-select"===t.key){const e=u(p.value),t=c(p.value)&&!e,a=e=>d(p.value,e);return(null==(o=n["data-table-select"])?void 0:o.call(n,{props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":a}}))??l("td",null,[r(SI,{modelValue:e,indeterminate:t,"onUpdate:modelValue":a},null)])}return l("td",null,null)})])}}),hk=ae({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),pk=Symbol.for("vuetify:datatable:expanded");function fk(e){const t=b(()=>e.expandOnClick),n=ke(e,"expanded",e.expanded,e=>new Set(e),e=>[...e.values()]);function a(e,t){const a=new Set(n.value);t?a.add(e.value):a.delete(e.value),n.value=a}function r(e){return n.value.has(e.value)}const i={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:function(e){a(e,!r(e))}};return x(pk,i),i}function vk(){const e=T(pk);if(!e)throw new Error("foo");return e}const mk=ae({index:Number,item:Object,cellProps:[Object,Function],onClick:qe(),onContextmenu:qe(),onDblclick:qe(),...St()},"VDataTableRow"),gk=ne()({name:"VDataTableRow",props:mk(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:i}=pt(e,"v-data-table__tr"),{isSelected:o,toggleSelect:u,someSelected:c,allSelected:d,selectAll:p}=GC(),{isExpanded:f,toggleExpand:v}=vk(),{toggleSort:m,sortBy:g,isSorted:y}=JC(),{columns:b}=UC();ve(()=>l("tr",{class:s(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&b.value.map((t,a)=>{const s=e.item,b=`item.${t.key}`,w=`header.${t.key}`,I={index:e.index,item:s.raw,internalItem:s,value:Rt(s.columns,t.key),column:t,isSelected:o,toggleSelect:u,isExpanded:f,toggleExpand:v},S={column:t,selectAll:p,isSorted:y,toggleSort:m,sortBy:g.value,someSelected:c.value,allSelected:d.value,getSortIcon:()=>""},C="function"==typeof e.cellProps?e.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value,column:t}):e.cellProps,k="function"==typeof t.cellProps?t.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value}):t.cellProps;return r(EC,h({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,fixedEndOffset:t.fixedEndOffset,lastFixed:t.lastFixed,firstFixedEnd:t.firstFixedEnd,maxWidth:i.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:i.value?void 0:t.width},C,k),{default:()=>{var a,c,d,h;if("data-table-select"===t.key)return(null==(a=n["item.data-table-select"])?void 0:a.call(n,{...I,props:{disabled:!s.selectable,modelValue:o([s]),onClick:X(()=>u(s),["stop"])}}))??r(SI,{disabled:!s.selectable,modelValue:o([s]),onClick:X(t=>u(s,e.index,t),["stop"])},null);if("data-table-expand"===t.key)return(null==(c=n["item.data-table-expand"])?void 0:c.call(n,{...I,props:{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:X(()=>v(s),["stop"])}}))??r(xw,{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:X(()=>v(s),["stop"])},null);if(n[b]&&!i.value)return n[b](I);const p=M(I.value);return i.value?l(_,null,[l("div",{class:"v-data-table__td-title"},[(null==(d=n[w])?void 0:d.call(n,S))??t.title]),l("div",{class:"v-data-table__td-value"},[(null==(h=n[b])?void 0:h.call(n,I))??p])]):p}})})]))}}),yk=ae({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...St()},"VDataTableRows"),bk=ne()({name:"VDataTableRows",inheritAttrs:!1,props:yk(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:i}=UC(),{expandOnClick:s,toggleExpand:o,isExpanded:u}=vk(),{isSelected:c,toggleSelect:d}=GC(),{toggleGroup:p,isGroupOpen:f}=sk(),{t:v}=wt(),{mobile:m}=pt(e);return ve(()=>{var t,g;return!e.loading||e.items.length&&!a.loading?e.loading||e.items.length||e.hideNoData?l(_,null,[e.items.map((t,v)=>{var g;if("group"===t.type){const e={index:v,item:t,columns:i.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d,toggleGroup:p,isGroupOpen:f};return a["group-header"]?a["group-header"](e):r(dk,h({key:`group-header_${t.id}`,item:t},Ot(n,":group-header",()=>e)),a)}const y={index:v,item:t.raw,internalItem:t,columns:i.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d},b={...y,props:h({key:`item_${t.key??t.index}`,onClick:s.value?()=>{o(t)}:void 0,index:v,item:t,cellProps:e.cellProps,mobile:m.value},Ot(n,":row",()=>y),"function"==typeof e.rowProps?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return l(_,{key:b.props.key},[a.item?a.item(b):r(gk,b.props,a),u(t)&&(null==(g=a["expanded-row"])?void 0:g.call(a,y))])})]):l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:i.value.length},[(null==(g=a["no-data"])?void 0:g.call(a))??v(e.noDataText)])]):l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:i.value.length},[(null==(t=a.loading)?void 0:t.call(a))??v(e.loadingText)])])}),{}}}),wk=ae({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...ye(),...Eb(),...lb(),...ge()},"VTable"),_k=ne()({name:"VTable",props:wk(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:o}=Ce(e),{densityClasses:u}=xb(e);return ve(()=>{const t={VCheckboxBtn:{density:e.density}};return r(e.tag,{class:s(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},o.value,u.value,e.class]),style:i(e.style)},{default:()=>{var a,i;return[null==(a=n.top)?void 0:a.call(n),r(tb,{defaults:t},{default:()=>{var t;return[n.default?l("div",{class:"v-table__wrapper",style:{height:he(e.height)}},[l("table",null,[n.default()])]):null==(t=n.wrapper)?void 0:t.call(n)]}}),null==(i=n.bottom)?void 0:i.call(n)]}})}),{}}}),Ik=ae({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Sk(e,t,n){return t.map((t,a)=>function(e,t,n,a){const r=e.returnObject?t:Ge(t,e.itemValue),i=Ge(t,e.itemSelectable,!0),s=a.reduce((e,n)=>(null!=n.key&&(e[n.key]=Ge(t,n.value)),e),{});return{type:"item",key:e.returnObject?Ge(t,e.itemValue):r,index:n,value:r,selectable:i,columns:s,raw:t}}(e,t,a,n))}function Ck(e,t){return{items:o(()=>Sk(e,e.items,t.value))}}function kk(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:i}=e;const s=Se("VDataTable");let o=null;v(()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:i.value}),e=>{Ee(o,e)||(o&&o.search!==e.search&&(t.value=1),s.emit("update:options",e),o=e)},{deep:!0,immediate:!0})}const Ek=ae({...yk(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...hk(),...nk(),...xC(),...Ik(),...qC(),...WC(),...ek(),...wk()},"DataTable"),xk=ae({...IC(),...Ek(),...kS(),...CC()},"VDataTable");ne()({name:"VDataTable",props:xk(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(t,n){let{attrs:a,slots:i}=n;const{groupBy:s}=rk(t),{sortBy:u,multiSort:c,mustSort:d}=YC(t),{page:p,itemsPerPage:f}=function(e){return{page:ke(e,"page",void 0,e=>Number(e??1)),itemsPerPage:ke(e,"itemsPerPage",void 0,e=>Number(e??10))}}(t),{disableSort:m}=e(t),{columns:g,headers:y,sortFunctions:w,sortRawFunctions:I,filterFunctions:S}=BC(t,{groupBy:s,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:C}=Ck(t,g),k=b(()=>t.search),{filteredItems:E}=ES(t,C,k,{transform:e=>e.columns,customKeyFilter:S}),{toggleSort:T}=XC({sortBy:u,multiSort:c,mustSort:d,page:p}),{sortByWithGroups:A,opened:N,extractRows:V,isGroupOpen:D,toggleGroup:M}=ik({groupBy:s,sortBy:u,disableSort:m}),{sortedItems:R}=ZC(t,E,A,{transform:e=>({...e.raw,...e.columns}),sortFunctions:w,sortRawFunctions:I}),{flatItems:P}=uk(R,s,N),O=o(()=>P.value.length),{startIndex:L,stopIndex:F,pageCount:B,setItemsPerPage:U}=function(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=o(()=>-1===n.value?0:n.value*(t.value-1)),i=o(()=>-1===n.value?a.value:Math.min(a.value,r.value+n.value)),s=o(()=>-1===n.value||0===a.value?1:Math.ceil(a.value/n.value));v([t,s],()=>{t.value>s.value&&(t.value=s.value)});const l={page:t,itemsPerPage:n,startIndex:r,stopIndex:i,pageCount:s,itemsLength:a,nextPage:function(){t.value=Ne(t.value+1,1,s.value)},prevPage:function(){t.value=Ne(t.value-1,1,s.value)},setPage:function(e){t.value=Ne(e,1,s.value)},setItemsPerPage:function(e){n.value=e,t.value=1}};return x(SC,l),l}({page:p,itemsPerPage:f,itemsLength:O}),{paginatedItems:$}=function(e){const t=Se("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:i}=e,s=o(()=>i.value<=0?n.value:n.value.slice(a.value,r.value));return v(s,e=>{t.emit("update:currentItems",e)},{immediate:!0}),{paginatedItems:s}}({items:P,startIndex:L,stopIndex:F,itemsPerPage:f}),j=o(()=>V($.value)),{isSelected:z,select:q,selectAll:H,toggleSelect:K,someSelected:G,allSelected:W}=KC(t,{allItems:C,currentPage:j}),{isExpanded:Q,toggleExpand:Y}=fk(t);kk({page:p,itemsPerPage:f,sortBy:u,groupBy:s,search:k}),re({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const X=o(()=>({page:p.value,itemsPerPage:f.value,sortBy:u.value,pageCount:B.value,toggleSort:T,setItemsPerPage:U,someSelected:G.value,allSelected:W.value,isSelected:z,select:q,selectAll:H,toggleSelect:K,isExpanded:Q,toggleExpand:Y,isGroupOpen:D,toggleGroup:M,items:j.value.map(e=>e.raw),internalItems:j.value,groupedItems:$.value,columns:g.value,headers:y.value}));return ve(()=>{const e=kC.filterProps(t),n=tk.filterProps(t),s=bk.filterProps(t),o=_k.filterProps(t);return r(_k,h({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},o,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=i.top)?void 0:e.call(i,X.value)},default:()=>{var e,o,u,c,d,p;return i.default?i.default(X.value):l(_,null,[null==(e=i.colgroup)?void 0:e.call(i,X.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[r(tk,n,i)]),null==(o=i.thead)?void 0:o.call(i,X.value),!t.hideDefaultBody&&l("tbody",null,[null==(u=i["body.prepend"])?void 0:u.call(i,X.value),i.body?i.body(X.value):r(bk,h(a,s,{items:$.value}),i),null==(c=i["body.append"])?void 0:c.call(i,X.value)]),null==(d=i.tbody)?void 0:d.call(i,X.value),null==(p=i.tfoot)?void 0:p.call(i,X.value)])},bottom:()=>i.bottom?i.bottom(X.value):!t.hideDefaultFooter&&l(_,null,[r(Aw,null,null),r(kC,e,{prepend:i["footer.prepend"]})])})}),{}}});const Tk=ae({...We(Ek(),["hideDefaultFooter"]),...nk(),...lS(),...kS()},"VDataTableVirtual"),Ak=ne()({name:"VDataTableVirtual",props:Tk(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(t,a){let{attrs:i,slots:s}=a;const{groupBy:u}=rk(t),{sortBy:c,multiSort:d,mustSort:p}=YC(t),{disableSort:f}=e(t),{columns:v,headers:m,filterFunctions:g,sortFunctions:y,sortRawFunctions:w}=BC(t,{groupBy:u,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:_}=Ck(t,v),I=b(()=>t.search),{filteredItems:S}=ES(t,_,I,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:C}=XC({sortBy:c,multiSort:d,mustSort:p}),{sortByWithGroups:k,opened:E,extractRows:x,isGroupOpen:T,toggleGroup:A}=ik({groupBy:u,sortBy:c,disableSort:f}),{sortedItems:N}=ZC(t,S,k,{transform:e=>({...e.raw,...e.columns}),sortFunctions:y,sortRawFunctions:w}),{flatItems:V}=uk(N,u,E),D=o(()=>x(V.value)),{isSelected:M,select:R,selectAll:P,toggleSelect:O,someSelected:L,allSelected:F}=KC(t,{allItems:D,currentPage:D}),{isExpanded:B,toggleExpand:U}=fk(t),{containerRef:$,markerRef:j,paddingTop:z,paddingBottom:q,computedItems:H,handleItemResize:K,handleScroll:G,handleScrollend:W,calculateVisibleItems:Q,scrollToIndex:Y}=uS(t,V),X=o(()=>H.value.map(e=>e.raw));kk({sortBy:c,page:n(1),itemsPerPage:n(-1),groupBy:u,search:I}),re({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const J=o(()=>({sortBy:c.value,toggleSort:C,someSelected:L.value,allSelected:F.value,isSelected:M,select:R,selectAll:P,toggleSelect:O,isExpanded:B,toggleExpand:U,isGroupOpen:T,toggleGroup:A,items:D.value.map(e=>e.raw),internalItems:D.value,groupedItems:V.value,columns:v.value,headers:m.value}));return ve(()=>{const e=tk.filterProps(t),n=bk.filterProps(t),a=_k.filterProps(t);return r(_k,h({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},a,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=s.top)?void 0:e.call(s,J.value)},wrapper:()=>{var a,o,u,c,d,p;return l("div",{ref:$,onScrollPassive:G,onScrollend:W,class:"v-table__wrapper",style:{height:he(t.height)}},[l("table",null,[null==(a=s.colgroup)?void 0:a.call(s,J.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[r(tk,e,s)]),null==(o=s.thead)?void 0:o.call(s,J.value),!t.hideDefaultBody&&l("tbody",{key:"tbody"},[l("tr",{ref:j,style:{height:he(z.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)]),null==(u=s["body.prepend"])?void 0:u.call(s,J.value),r(bk,h(i,n,{items:X.value}),{...s,item:e=>r(oS,{key:e.internalItem.index,renderless:!0,"onUpdate:height":t=>K(e.internalItem.index,t)},{default:t=>{var n;let{itemRef:a}=t;return(null==(n=s.item)?void 0:n.call(s,{...e,itemRef:a}))??r(gk,h(e.props,{ref:a,key:e.internalItem.index,index:e.internalItem.index}),s)}})}),null==(c=s["body.append"])?void 0:c.call(s,J.value),l("tr",{style:{height:he(q.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)])]),null==(d=s.tbody)?void 0:d.call(s,J.value),null==(p=s.tfoot)?void 0:p.call(s,J.value)])])},bottom:()=>{var e;return null==(e=s.bottom)?void 0:e.call(s,J.value)}})}),{calculateVisibleItems:Q,scrollToIndex:Y}}}),Nk=Symbol.for("vuetify:v-expansion-panel"),Vk=ae({...ye(),...G_()},"VExpansionPanelText"),Dk=ne()({name:"VExpansionPanelText",props:Vk(),setup(e,t){let{slots:n}=t;const a=T(Nk);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:o,onAfterLeave:u}=W_(e,a.isSelected);return ve(()=>r($w,{onAfterLeave:u},{default:()=>{var t;return[w(l("div",{class:s(["v-expansion-panel-text",e.class]),style:i(e.style)},[n.default&&o.value&&l("div",{class:"v-expansion-panel-text__wrapper"},[null==(t=n.default)?void 0:t.call(n)])]),[[I,a.isSelected.value]])]}})),{}}}),Mk=ae({color:String,expandIcon:{type:be,default:"$expand"},collapseIcon:{type:be,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...ye(),...db()},"VExpansionPanelTitle"),Rk=ne()({name:"VExpansionPanelTitle",directives:{vRipple:kw},props:Mk(),setup(e,t){let{slots:n}=t;const a=T(Nk);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:c}=rb(()=>e.color),{dimensionStyles:d}=hb(e),h=o(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),p=b(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return ve(()=>{var t;return w(l("button",{class:s(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class]),style:i([c.value,d.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[l("span",{class:"v-expansion-panel-title__overlay"},null),null==(t=n.default)?void 0:t.call(n,h.value),!e.hideActions&&r(tb,{defaults:{VIcon:{icon:p.value}}},{default:()=>{var e;return[l("span",{class:"v-expansion-panel-title__icon"},[(null==(e=n.actions)?void 0:e.call(n,h.value))??r(cb,null,null)])]}})]),[[kw,e.ripple]])}),{}}}),Pk=ae({title:String,text:String,bgColor:String,...Rb(),...Bb(),...vb(),...lb(),...Mk(),...Vk()},"VExpansionPanel"),Ok=ne()({name:"VExpansionPanel",props:Pk(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Ub(e,Nk),{backgroundColorClasses:u,backgroundColorStyles:c}=rb(()=>e.bgColor),{elevationClasses:d}=Pb(e),{roundedClasses:h}=mb(e),p=b(()=>(null==a?void 0:a.disabled.value)||e.disabled),f=o(()=>a.group.items.value.reduce((e,t,n)=>(a.group.selected.value.includes(t.id)&&e.push(n),e),[])),v=o(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&f.value.some(t=>t-e===1)}),m=o(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&f.value.some(t=>t-e===-1)});return x(Nk,a),ve(()=>{const t=!(!n.text&&!e.text),o=!(!n.title&&!e.title),f=Rk.filterProps(e),g=Dk.filterProps(e);return r(e.tag,{class:s(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":m.value,"v-expansion-panel--disabled":p.value},h.value,u.value,e.class]),style:i([c.value,e.style])},{default:()=>[l("div",{class:s(["v-expansion-panel__shadow",...d.value])},null),r(tb,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...g}}},{default:()=>{var a;return[o&&r(Rk,{key:"title"},{default:()=>[n.title?n.title():e.title]}),t&&r(Dk,{key:"text"},{default:()=>[n.text?n.text():e.text]}),null==(a=n.default)?void 0:a.call(n)]}})]})}),{groupItem:a}}}),Lk=["default","accordion","inset","popout"],Fk=ae({flat:Boolean,...Fb(),...Ke(Pk(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ge(),...ye(),...lb(),variant:{type:String,default:"default",validator:e=>Lk.includes(e)}},"VExpansionPanels"),Bk=ne()({name:"VExpansionPanels",props:Fk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:o}=$b(e,Nk),{themeClasses:l}=Ce(e),u=b(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return re({VExpansionPanel:{bgColor:b(()=>e.bgColor),collapseIcon:b(()=>e.collapseIcon),color:b(()=>e.color),eager:b(()=>e.eager),elevation:b(()=>e.elevation),expandIcon:b(()=>e.expandIcon),focusable:b(()=>e.focusable),hideActions:b(()=>e.hideActions),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),rounded:b(()=>e.rounded),static:b(()=>e.static)}}),ve(()=>r(e.tag,{class:s(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},l.value,u.value,e.class]),style:i(e.style)},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{prev:o,next:a})]}})),{next:a,prev:o}}}),Uk=ae({id:String,interactive:Boolean,text:String,...We(rI({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),$k=ne()({name:"VTooltip",props:Uk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"modelValue"),{scopeId:i}=Q_(),s=E(),l=b(()=>e.id||`v-tooltip-${s}`),u=f(),c=o(()=>e.location.split(" ").length>1?e.location:e.location+" center"),d=o(()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=b(()=>null!=e.transition?e.transition:a.value?"scale-transition":"fade-transition"),v=o(()=>h({"aria-describedby":l.value},e.activatorProps));return ve(()=>{const t=iI.filterProps(e);return r(iI,h({ref:u,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,transition:p.value,absolute:!0,location:c.value,origin:d.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},i),{activator:n.activator,default:function(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(null==(t=n.default)?void 0:t.call(n,...r))??e.text}})}),lI({},u)}}),jk={class:"pa-6"},zk={class:"d-flex align-center mb-6"},qk={class:"d-flex align-center mb-3"},Hk={class:"d-flex justify-space-between align-center"},Kk={class:"d-flex align-center gap-4"},Gk={class:"d-flex align-center"},Wk={class:"text-body-1 font-weight-medium"},Qk={class:"character-name-cell"},Yk={class:"d-flex align-center"},Xk={class:"text-caption text-white font-weight-bold"},Jk={class:"character-name"},Zk={class:"ml-1"},eE={class:"text-caption"},tE=["onClick"],nE=["innerHTML"],aE=["innerHTML"],rE=["onClick"],iE=["innerHTML"],sE=["innerHTML"],oE=Zy({__name:"ViewAllCharactersTab",props:{dataLoaded:{type:Boolean,required:!0},accounts:{type:Array,required:!0},characterMasters:{type:Array,required:!0},itemMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0},ownedCountMap:{type:Map,required:!0},ownedCharactersData:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0}},emits:["items-updated"],setup(e,{expose:t,emit:n}){const a=e,i=n,u=f(!1),c=f(!1),d=f(null),p=f(null),m=f(new Map),g=f("current");v(g,e=>{a.characterMasters.forEach(t=>{V(t.id)&&m.value.set(t.id,e)})});const y=S({charSearch:"",element:[],itemSearch:[],type:[],gachaSearch:[],totalOwnership:[],account:"",ownership:"",columnFilter:[]}),b=o(()=>Array.from(new Set(a.characterMasters.map(e=>e.type).filter(Boolean))).sort()),w=o(()=>{const e=[{title:"No.",key:"indexNumber",align:"center",sortable:!0,width:80},{title:"",key:"monsterName",align:"start",sortable:!0,width:200}];return u.value&&e.push({title:"",key:"element",align:"center",sortable:!0,width:100},{title:"",key:"type",align:"center",sortable:!0,width:100},{title:"",key:"ejectionGacha",align:"center",sortable:!0,width:100}),a.accounts.forEach(t=>{var n;const a=t.indexNumber||(null==(n=t.name.match(/\d+/))?void 0:n[0])||t.id;e.push({title:`${a}-1`,key:`account_${t.id}_1`,align:"center",sortable:!1,width:78},{title:`${a}-2`,key:`account_${t.id}_2`,align:"center",sortable:!1,width:78})}),e}),_=o(()=>{if(!a.dataLoaded)return[];const{charSearch:e,element:t,itemSearch:n,type:r,gachaSearch:i,totalOwnership:s,account:o,ownership:l,columnFilter:u}=y,c=e.toLowerCase(),d=n.map(e=>Number(e));return a.characterMasters.filter(e=>{if(c&&!e.monsterName.toLowerCase().includes(c)&&!(e.indexNumber+"").includes(c))return!1;if(t.length>0&&!t.includes(e.element))return!1;if(r.length>0){let t=!1;for(const n of r)if("_or_"===n){if(""===e.type||""===e.type){t=!0;break}}else if(e.type===n){t=!0;break}if(!t)return!1}if(i.length>0&&!i.includes(e.ejectionGacha||""))return!1;if(d.length>0){let t=!1;const n=o||null;for(const r of d)if(n){if((a.ownedCharactersData.get(n)||[]).some(t=>{if(t.characterMasterId!==e.id)return!1;if(!t.items||0===t.items.length)return!1;return ir(t.items).some(e=>e.itemId===r)})){t=!0;break}}else{let n=!1;for(const t of a.ownedCharactersData.values())if(t.some(t=>{if(t.characterMasterId!==e.id)return!1;if(!t.items||0===t.items.length)return!1;return ir(t.items).some(e=>e.itemId===r)})){n=!0;break}if(n){t=!0;break}}if(!t)return!1}if(s&&s.length>0){const t=a.accounts.reduce((t,n)=>t+I(e.id,n.id),0);let n=!1;for(const r of s){if("all_unowned"===r&&0===t){n=!0;break}if("one_total"===r&&1===t){n=!0;break}if("two_total"===r&&2===t){n=!0;break}if("three_total"===r&&3===t){n=!0;break}if("four_total"===r&&4===t){n=!0;break}if("five_or_more"===r&&t>=5){n=!0;break}if("one_in_each"===r&&a.accounts.every(t=>I(e.id,t.id)>=1)){n=!0;break}}if(!n)return!1}if(o&&l){const t=I(e.id,o);if("owned"===l&&0===t)return!1;if("unowned"===l&&t>0)return!1;if("one"===l&&1!==t)return!1;if("two"===l&&2!==t)return!1}if(u&&u.length>0){let t=!1;for(const n of u){let r=!1;for(const t of a.accounts){const i=(a.ownedCharactersData.get(t.id)||[]).filter(t=>t.characterMasterId===e.id);if("has_zero_item_character"===n&&i.some(e=>!e.items||0===e.items.length)){r=!0;break}if("has_one_item_character"===n&&i.some(e=>e.items&&1===e.items.length)){r=!0;break}if("has_two_item_character"===n&&i.some(e=>e.items&&2===e.items.length)){r=!0;break}if("has_three_item_character"===n&&i.some(e=>e.items&&3===e.items.length)){r=!0;break}if("has_virtual_item_character"===n&&i.some(e=>(e.items||[]).some(e=>"object"==typeof e&&!0===e.isVirtual))){r=!0;break}}if(r){t=!0;break}}if(!t)return!1}return!0})}),I=(e,t)=>a.ownedCountMap.get(`${e}-${t}`)||0,C=(e,t,n)=>{const r=(a.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);if(!r||r.length<=n)return"";const i=r[n].items||[],s=D(e),o=i.filter(e=>{const t="object"==typeof e&&e.isVirtual,n="object"==typeof e&&e.willRemove;return"current"===s?!t:!n}).map(e=>{const t="object"==typeof e?e.itemId:e,n="object"==typeof e&&e.isVirtual,r="object"==typeof e&&e.willRemove,i=a.itemMastersMap.get(Number(t));return i?"current"===s&&r?`<span class="will-remove-item item-name">${i}</span>`:n?`<span class="virtual-item item-name">${i}</span>`:`<span class="item-name">${i}</span>`:null}).filter(Boolean).join("<br>");return o?`<br>${o}`:""},k=(e,t,n)=>{const r=(a.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);if(!r||r.length<=n)return"";return(r[n].items||[]).map(e=>{const t="object"==typeof e?e.itemId:e,n=("object"==typeof e&&e.isVirtual,a.itemMastersMap.get(Number(t)));return n||null}).filter(Boolean).join("<br>")||""},E=(e,t,n)=>I(e,t)>=n?"status-owned":"status-unowned",x=e=>({"":"red","":"blue","":"green","":"amber","":"deep-purple"}[e]||"grey"),T=()=>{Object.assign(y,{charSearch:"",element:[],itemSearch:[],type:[],gachaSearch:[],totalOwnership:[],account:"",ownership:"",columnFilter:[]})},A=e=>m.value.get(e)||"current",N=e=>{const t="current"===A(e)?"planned":"current";m.value.set(e,t)},V=e=>{for(const t of a.accounts){const n=(a.ownedCharactersData.get(t.id)||[]).filter(t=>t.characterMasterId===e);for(const e of n){if((e.items||[]).some(e=>"object"==typeof e&&!0===e.isVirtual))return!0}}return!1},D=(e,t,n)=>A(e),R=(e,t,n)=>{const r=(a.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);if(!r||r.length<=n)return d.value={characterMasterId:e,accountId:t,items:[],isNew:!0},p.value=t,void(c.value=!0);d.value=r[n],p.value=t,c.value=!0},P=async({character:e,items:t,isNew:n})=>{i("items-updated",n?{accountId:p.value,characterMasterId:e.characterMasterId,items:t,isNew:!0}:{accountId:p.value,ownedCharacterId:e.id,items:t,isNew:!1})};return t({rowDisplayModes:m,cellDisplayModes:m,getRowDisplayMode:A,getCellDisplayMode:D,toggleRowDisplayMode:N,toggleCellDisplayMode:(e,t,n)=>{N(e)},isModalOpen:c,editingCharacter:d,filters:y}),(t,n)=>{var a;const i=J("v-subheader");return $(),U("div",jk,[l("div",zk,[r(cb,{icon:"mdi-account-multiple",size:"28",color:"primary",class:"mr-3"}),n[12]||(n[12]=l("h2",{class:"text-h5 font-weight-medium text-primary"},"",-1))]),r(FS,{class:"mb-6 minimal-filter-card"},{default:j(()=>[r(DS,{class:"minimal-card-title pa-4"},{default:j(()=>[r(cb,{icon:"mdi-filter-variant",class:"mr-2",size:"20"}),n[13]||(n[13]=z("  ",-1))]),_:1,__:[13]}),r(Bk,null,{default:j(()=>[r(Ok,null,{default:j(()=>[r(Rk,{class:"pa-4 minimal-panel-title"},{default:j(()=>[r(cb,{start:"",icon:"mdi-filter-variant",color:"primary",size:"20"}),n[14]||(n[14]=l("span",{class:"text-body-1 font-weight-medium"},"",-1))]),_:1,__:[14]}),r(Dk,{class:"pa-6"},{default:j(()=>[r(jS,null,{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12",md:"4"},{default:j(()=>[r(iS,{modelValue:y.charSearch,"onUpdate:modelValue":n[0]||(n[0]=e=>y.charSearch=e),modelModifiers:{lazy:!0},label:" or ",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-search",class:"minimal-input"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[r(vS,{modelValue:y.element,"onUpdate:modelValue":n[1]||(n[1]=e=>y.element=e),items:["","","","",""],label:"",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-fire",class:"minimal-select",multiple:""},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[r(vS,{modelValue:y.itemSearch,"onUpdate:modelValue":n[2]||(n[2]=e=>y.itemSearch=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-sword-cross",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[r(vS,{modelValue:y.type,"onUpdate:modelValue":n[3]||(n[3]=e=>y.type=e),items:["_or_",...b.value],label:" (Type)",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-tag",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[r(vS,{modelValue:y.gachaSearch,"onUpdate:modelValue":n[4]||(n[4]=e=>y.gachaSearch=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-gift",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[r(vS,{modelValue:y.totalOwnership,"onUpdate:modelValue":n[5]||(n[5]=e=>y.totalOwnership=e),items:[{value:"all_unowned",title:""},{value:"one_total",title:"1"},{value:"two_total",title:"2"},{value:"three_total",title:"3"},{value:"four_total",title:"4"},{value:"five_or_more",title:"5"},{value:"one_in_each",title:"1"}],multiple:"",label:"",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-group",class:"minimal-select"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:y.columnFilter,"onUpdate:modelValue":n[6]||(n[6]=e=>y.columnFilter=e),items:[{value:"has_zero_item_character",title:"0"},{value:"has_one_item_character",title:"1"},{value:"has_two_item_character",title:"2"},{value:"has_three_item_character",title:"3"},{value:"has_virtual_item_character",title:""}],multiple:"",label:"",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-view-column",class:"minimal-select"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12"},{default:j(()=>[r(Aw,{class:"my-4 minimal-divider"}),l("div",qk,[r(cb,{icon:"mdi-account",color:"secondary",class:"mr-2",size:"20"}),r(i,{class:"text-body-1 font-weight-medium"},{default:j(()=>n[15]||(n[15]=[z("",-1)])),_:1,__:[15]})])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:y.account,"onUpdate:modelValue":n[7]||(n[7]=e=>y.account=e),items:e.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-account",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:y.ownership,"onUpdate:modelValue":n[8]||(n[8]=e=>y.ownership=e),items:[{value:"owned",title:""},{value:"unowned",title:""},{value:"one",title:"1"},{value:"two",title:"2"}],label:" ()",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-check-circle",class:"minimal-select"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(AS,{class:"pa-4 minimal-actions"},{default:j(()=>[r(xw,{onClick:n[9]||(n[9]=e=>u.value=!u.value),variant:"outlined",color:"info","prepend-icon":"mdi-eye",class:"minimal-button"},{default:j(()=>[z(M(u.value?"":""),1)]),_:1}),r(fC),r(xw,{onClick:T,color:"secondary",variant:"outlined","prepend-icon":"mdi-refresh",class:"minimal-button"},{default:j(()=>n[16]||(n[16]=[z("  ",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(FS,{class:"mb-4 minimal-stats-card"},{default:j(()=>[r(OS,{class:"pa-4"},{default:j(()=>[l("div",Hk,[l("div",Kk,[l("div",Gk,[r(cb,{icon:"mdi-chart-bar",color:"primary",class:"mr-2",size:"20"}),l("span",Wk,": "+M(_.value.length)+" / "+M(e.characterMasters.length),1)]),r(Hb,{modelValue:g.value,"onUpdate:modelValue":n[10]||(n[10]=e=>g.value=e),mandatory:"",density:"comfortable",color:"primary"},{default:j(()=>[r(xw,{value:"current",size:"small"},{default:j(()=>[r(cb,{size:"small",class:"mr-1"},{default:j(()=>n[17]||(n[17]=[z("mdi-eye",-1)])),_:1,__:[17]}),n[18]||(n[18]=z("  ",-1))]),_:1,__:[18]}),r(xw,{value:"planned",size:"small"},{default:j(()=>[r(cb,{size:"small",class:"mr-1"},{default:j(()=>n[19]||(n[19]=[z("mdi-eye-outline",-1)])),_:1,__:[19]}),n[20]||(n[20]=z("  ",-1))]),_:1,__:[20]})]),_:1},8,["modelValue"])]),r(QI,{color:_.value.length===e.characterMasters.length?"success":"warning",variant:"outlined",class:"minimal-chip"},{default:j(()=>[z(M(_.value.length===e.characterMasters.length?"":""),1)]),_:1},8,["color"])])]),_:1})]),_:1}),r(FS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-table",class:"mr-2"}),n[21]||(n[21]=z("  ",-1))]),_:1,__:[21]}),r(OS,{class:"pa-0"},{default:j(()=>[r(Ak,{items:_.value,headers:w.value,loading:!e.dataLoaded,height:"70vh",density:"compact","fixed-header":"",class:"table-fixed","fixed-columns":!0},Z({"item.monsterName":j(({item:e})=>[l("div",Qk,[l("div",Yk,[r(Mb,{size:"32",color:x(e.element),class:"mr-2"},{default:j(()=>[l("span",Xk,M(e.element||"?"),1)]),_:2},1032,["color"]),l("span",Jk,M(e.monsterName||""),1)]),V(e.id)?($(),q(xw,{key:0,onClick:X(t=>N(e.id),["stop"]),color:"current"===A(e.id)?"primary":"orange",variant:"tonal",size:"x-small",class:"row-toggle-btn mt-1"},{default:j(()=>[r(cb,{size:"x-small"},{default:j(()=>[z(M("current"===A(e.id)?"mdi-eye":"mdi-eye-outline"),1)]),_:2},1024),l("span",Zk,M("current"===A(e.id)?"":""),1)]),_:2},1032,["onClick","color"])):W("",!0)])]),"item.element":j(({item:e})=>[r(QI,{color:x(e.element),variant:"tonal",size:"small"},{default:j(()=>[z(M(e.element||""),1)]),_:2},1032,["color"])]),"item.type":j(({item:e})=>{return[r(QI,{color:(t=e.type,{"":"success","":"warning","":"info","":"secondary"}[t]||"grey"),variant:"tonal",size:"small"},{default:j(()=>[z(M(e.type||""),1)]),_:2},1032,["color"])];var t}),"item.ejectionGacha":j(({item:e})=>[l("span",eE,M(e.ejectionGacha||""),1)]),_:2},[Q(e.accounts,e=>({name:`item.account_${e.id}_1`,fn:j(({item:t})=>[l("div",{class:s([[E(t.id,e.id,1),"account-cell"],"text-center"]),onClick:n=>R(t.id,e.id,0),style:{cursor:"pointer"}},[r($k,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:C(t.id,e.id,0)}),null,16,nE)]),default:j(()=>[l("span",{innerHTML:k(t.id,e.id,0)},null,8,aE)]),_:2},1024)],10,tE)])})),Q(e.accounts,e=>({name:`item.account_${e.id}_2`,fn:j(({item:t})=>[l("div",{class:s([[E(t.id,e.id,2),"account-cell"],"text-center"]),onClick:n=>R(t.id,e.id,1),style:{cursor:"pointer"}},[r($k,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:C(t.id,e.id,1)}),null,16,iE)]),default:j(()=>[l("span",{innerHTML:k(t.id,e.id,1)},null,8,sE)]),_:2},1024)],10,rE)])}))]),1032,["items","headers","loading"])]),_:1})]),_:1}),r(bC,{modelValue:c.value,"onUpdate:modelValue":n[11]||(n[11]=e=>c.value=e),character:d.value,"item-masters":e.itemMasters,"item-masters-map":e.itemMastersMap,"character-masters-map":e.characterMastersMap,"is-new-character":(null==(a=d.value)?void 0:a.isNew)||!1,onSave:P},null,8,["modelValue","character","item-masters","item-masters-map","character-masters-map","is-new-character"])])}}},[["__scopeId","data-v-8f6e35c9"]]),lE={class:"text-h6"},uE={class:"d-flex align-center w-100"},cE={class:"flex-grow-1 premium-text-content"},dE={class:"d-flex align-center"},hE=Zy({__name:"CharacterSelector",props:{modelValue:{type:[String,null],required:!0},items:{type:Array,required:!0},itemTitle:{type:[String,Function],default:"monsterName"},disabledItems:{type:Array,default:()=>[]},label:{type:String,default:""},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:"mdi-magnify"},listHeight:{type:[String,Number],default:"400px"},listCardVariant:{type:String,default:"elevated"},noDataText:{type:String,default:""},density:{type:String,default:"comfortable"},listDensity:{type:String,default:"compact"},primaryColor:{type:String,default:"primary"},searchBgColor:{type:String,default:"grey-lighten-5"},cardElevation:{type:[Number,String],default:2},cardBorder:{type:[Boolean,String],default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,i=f(""),u=f(!1),c=o(()=>{if(!i.value)return n.items;const e=i.value.toLowerCase();return n.items.filter(t=>d(t).toLowerCase().includes(e))}),d=e=>"function"==typeof n.itemTitle?n.itemTitle(e):e[n.itemTitle]||"",h=e=>n.modelValue===e.id?n.primaryColor:n.disabledItems.includes(e.id)?"grey-lighten-3":"primary-lighten-5",p=e=>"player"===e.type?"mdi-account":"monster"===e.type?"mdi-dragon":"npc"===e.type?"mdi-account-tie":"mdi-account-circle",v=e=>{const t=e.length>0?e[0]:null;n.modelValue!==t&&a("update:modelValue",t)};return(t,o)=>($(),U(_,null,[r(iS,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e),label:e.label,variant:e.variant,clearable:e.clearable,"prepend-inner-icon":e.prependInnerIcon,disabled:e.disabled,"hide-details":"",class:"mb-4 character-selector-search premium-search",density:e.density,color:e.primaryColor,"bg-color":e.searchBgColor,focused:u.value,onFocus:o[1]||(o[1]=e=>u.value=!0),onBlur:o[2]||(o[2]=e=>u.value=!1)},{"prepend-inner":j(()=>[r(cb,{color:u.value?e.primaryColor:"grey",icon:e.prependInnerIcon,size:"20",class:"search-icon"},null,8,["color","icon"])]),_:1},8,["modelValue","label","variant","clearable","prepend-inner-icon","disabled","density","color","bg-color","focused"]),r(FS,{variant:e.listCardVariant,height:e.listHeight,disabled:e.disabled,class:"character-selector-card premium-card",elevation:e.cardElevation,border:e.cardBorder,style:{display:"flex","flex-direction":"column"}},{default:j(()=>[e.modelValue?($(),q(DS,{key:0,class:"d-flex align-center justify-end pa-4 pb-3 premium-card-header"},{default:j(()=>[r(QI,{size:"small",color:"success",variant:"tonal",class:"premium-chip"},{default:j(()=>o[3]||(o[3]=[z("  ",-1)])),_:1,__:[3]})]),_:1})):W("",!0),r(x_,{"model-value":[e.modelValue],"onUpdate:selected":v,class:"character-selector-list premium-list",density:e.listDensity,style:{"overflow-y":"auto","max-height":"calc(100% - 60px)"}},{default:j(()=>[0===c.value.length?($(),q(p_,{key:0,class:"no-data-item premium-no-data"},{default:j(()=>[r(d_,{class:"text-center text-grey-darken-1 py-12"},{default:j(()=>[r(cb,{icon:"mdi-information-outline",size:"64",class:"mb-4 no-data-icon",color:"grey-lighten-1"}),l("div",lE,M(e.noDataText),1)]),_:1})]),_:1})):W("",!0),($(!0),U(_,null,Q(c.value,(i,u)=>($(),q(p_,{key:i.id,value:i.id,disabled:e.disabledItems.includes(i.id),class:s(["character-item premium-item",{"character-item--selected":e.modelValue===i.id,"character-item--disabled":e.disabledItems.includes(i.id)}]),onClick:e=>(e=>{n.disabledItems.includes(e.id)||a("update:modelValue",e.id)})(i)},{default:j(()=>[ee(t.$slots,"item",{item:i},()=>[l("div",uE,[r(Mb,{size:"40",class:s(["mr-4 premium-avatar",{"selected-avatar":e.modelValue===i.id}]),color:h(i)},{default:j(()=>[r(cb,{icon:p(i),color:e.modelValue===i.id?"white":"primary",size:"20",class:"avatar-icon"},null,8,["icon","color"])]),_:2},1032,["color","class"]),l("div",cE,[r(d_,{class:s(["font-weight-bold text-h6",{"text-primary":e.modelValue===i.id}])},{default:j(()=>[z(M(d(i)),1)]),_:2},1032,["class"]),i.subtitle?($(),q(c_,{key:0,class:"text-body-2 text-grey-darken-1 mt-1"},{default:j(()=>[z(M(i.subtitle),1)]),_:2},1024)):W("",!0)])])],!0)]),append:j(()=>[l("div",dE,[e.disabledItems.includes(i.id)?($(),q(QI,{key:0,size:"small",color:"warning",variant:"tonal",class:"mr-3 premium-status-chip"},{default:j(()=>o[4]||(o[4]=[z("  ",-1)])),_:1,__:[4]})):W("",!0),e.modelValue===i.id?($(),q(cb,{key:1,icon:"mdi-check-circle",color:"success",size:"24",class:"selection-indicator premium-check"})):W("",!0)])]),_:2},1032,["value","disabled","class","onClick"]))),128))]),_:3},8,["model-value","density"])]),_:3},8,["variant","height","disabled","elevation","border"])],64))}},[["__scopeId","data-v-a7887c2a"]]),pE=ae({...ye(),...NI()},"VForm"),fE=ne()({name:"VForm",props:pE(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const o=function(e){const t=ke(e,"modelValue"),a=b(()=>e.disabled),r=b(()=>e.readonly),i=n(!1),s=f([]),o=f([]);return v(s,()=>{let e=0,n=0;const a=[];for(const t of s.value)!1===t.isValid?(n++,a.push({id:t.id,errorMessages:t.errorMessages})):!0===t.isValid&&e++;o.value=a,t.value=!(n>0)&&(e===s.value.length||null)},{deep:!0,flush:"post"}),x(AI,{register:e=>{let{id:t,vm:n,validate:a,reset:r,resetValidation:i}=e;s.value.some(e=>e.id===t),s.value.push({id:t,validate:a,reset:r,resetValidation:i,vm:H(n),isValid:null,errorMessages:[]})},unregister:e=>{s.value=s.value.filter(t=>t.id!==e)},update:(e,t,n)=>{const a=s.value.find(t=>t.id===e);a&&(a.isValid=t,a.errorMessages=n)},isDisabled:a,isReadonly:r,isValidating:i,isValid:t,items:s,validateOn:b(()=>e.validateOn)}),{errors:o,isDisabled:a,isReadonly:r,isValidating:i,isValid:t,items:s,validate:async function(){const t=[];let n=!0;o.value=[],i.value=!0;for(const a of s.value){const r=await a.validate();if(r.length>0&&(n=!1,t.push({id:a.id,errorMessages:r})),!n&&e.fastFail)break}return o.value=t,i.value=!1,{valid:n,errors:o.value}},reset:function(){s.value.forEach(e=>e.reset())},resetValidation:function(){s.value.forEach(e=>e.resetValidation())}}}(e),u=f();function c(e){e.preventDefault(),o.reset()}function d(e){const t=e,n=o.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),r("submit",t),t.defaultPrevented||n.then(e=>{var t;let{valid:n}=e;n&&(null==(t=u.value)||t.submit())}),t.preventDefault()}return ve(()=>{var t;return l("form",{ref:u,class:s(["v-form",e.class]),style:i(e.style),novalidate:!0,onReset:c,onSubmit:d},[null==(t=a.default)?void 0:t.call(a,o)])}),lI(o,u)}}),vE={class:"pa-6"},mE={class:"d-flex align-center mb-6"},gE={class:"mb-4"},yE={class:"d-flex align-center mb-3"},bE={__name:"AddOwnedCharacterTab",props:{characterMasters:{type:Array,required:!0},characterMastersMap:{type:Map,required:!0},selectedAccountId:{type:String,default:null},ownedCountMap:{type:Map,required:!0}},emits:["character-added"],setup(e,{emit:t}){const n=e,a=t,i=f(null),s=f(!1),u=o(()=>n.selectedAccountId?n.characterMasters.filter(e=>c(e.id)<2):[]);v(()=>n.selectedAccountId,()=>{i.value=null});const c=e=>n.selectedAccountId&&n.ownedCountMap.get(`${e}-${n.selectedAccountId}`)||0,d=e=>{const t=c(e.id);return`[${e.indexNumber||"?"}] ${e.monsterName} | : ${t} / 2`},h=async()=>{if(!i.value||!n.selectedAccountId)return alert("");if(c(i.value)>=2)return alert("2");s.value=!0;try{const e=n.characterMastersMap.get(i.value);if(!e)throw new Error("");const t={characterMasterId:i.value,monsterName:e.monsterName,items:[],createdAt:om()},r=await Ky(n.selectedAccountId,t),s={...t,id:r.id,createdAt:{toDate:()=>new Date}};a("character-added",{accountId:n.selectedAccountId,newCharacter:s}),alert(`${e.monsterName}`),i.value=null}catch(e){alert(": "+e.message)}finally{s.value=!1}};return(e,t)=>($(),U("div",vE,[l("div",mE,[r(cb,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),t[1]||(t[1]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"  ",-1))]),r(fE,{onSubmit:X(h,["prevent"])},{default:j(()=>[r(FS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-account-search",class:"mr-2"}),t[2]||(t[2]=z("  ",-1))]),_:1,__:[2]}),r(OS,{class:"pa-6"},{default:j(()=>[r(jS,{class:"pa-0"},{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12"},{default:j(()=>[l("div",gE,[l("div",yE,[r(cb,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),t[3]||(t[3]=l("h6",{class:"text-h6 font-weight-medium"},"  ",-1))]),r(hE,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),items:u.value,"item-title":d,label:"","list-height":"400px","no-data-text":"",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),r(AS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(fC),r(xw,{loading:s.value,disabled:!i.value||s.value,onClick:h,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-account-plus",class:"px-8"},{default:j(()=>[z(M(s.value?"...":""),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},wE=(e,t,n,a,r,i=null)=>{if(!e)return"";const s=n.get(e.characterMasterId),o=s?s.monsterName:"",l=e.accountId||i;if(!l)return`${o} ()`;const u=(a.get(l)||[]).filter(t=>t.characterMasterId===e.characterMasterId).findIndex(t=>t.id===e.id);let c=`${o} (${u>=0?u+1:""})`;{const t=sr(e.items||[]).map(e=>r.get(e.itemId)).filter(Boolean).join("");t&&(c+=`[${t}]`)}return c},_E={class:"pa-6"},IE={class:"d-flex align-center mb-6"},SE={class:"mb-4"},CE={class:"d-flex align-center mb-3"},kE={class:"mb-4"},EE={class:"d-flex align-center mb-3"},xE={class:"text-center mb-4"},TE={class:"text-center mb-4"},AE={key:0,class:"text-center pa-4"},NE={key:1,class:"text-center pa-4"},VE={key:2},DE={class:"mb-3"},ME={class:"text-center mb-4"},RE={class:"d-flex justify-center"},PE={__name:"ManageItemsTab",props:{selectedAccountId:{type:String,default:null},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["items-updated","items-moved"],setup(e,{emit:t}){const n=e,a=t,i=S({selectedOwnedId:null,items:[]}),s=S({from:{selectedId:null},to:{selectedId:null},selectedItemIds:[],itemFilter:null}),u=f(!1),c=f(!1),d=o(()=>{if(!n.selectedAccountId||!n.ownedCharactersData.has(n.selectedAccountId))return[];return(n.ownedCharactersData.get(n.selectedAccountId)||[]).map(e=>{const t=n.characterMastersMap.get(e.characterMasterId);return{...e,id:e.id,indexNumber:(null==t?void 0:t.indexNumber)||999999,monsterName:(null==t?void 0:t.monsterName)||""}}).sort((e,t)=>e.indexNumber-t.indexNumber)}),h=o(()=>{let e=[...d.value];if(s.itemFilter){const t=Number(s.itemFilter);e=e.filter(e=>{if(!e.items||0===e.items.length)return!1;return ir(e.items).some(e=>e.itemId===t&&!e.isVirtual)}),e.sort((e,n)=>{const a=ir(e.items||[]),r=ir(n.items||[]),i=a.find(e=>e.itemId===t),s=r.find(e=>e.itemId===t),o=(null==i?void 0:i.willRemove)||!1,l=(null==s?void 0:s.willRemove)||!1;return o&&!l?-1:!o&&l?1:e.indexNumber-n.indexNumber})}return e}),p=o(()=>d.value),m=o(()=>{if(!s.from.selectedId)return[];const e=p.value.find(e=>e.id===s.from.selectedId);if(!e||!e.items)return[];return sr(e.items).map(e=>({id:e.itemId,name:n.itemMastersMap.get(e.itemId)||`(ID:${e.itemId})`}))});v(()=>n.selectedAccountId,()=>{Object.assign(i,{selectedOwnedId:null,items:[]}),Object.assign(s,{from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]})}),v(()=>i.selectedOwnedId,e=>{if(!e)return void(i.items=[]);const t=p.value.find(t=>t.id===e),n=sr((null==t?void 0:t.items)||[]);i.items=n.map(e=>e.itemId)}),v(()=>s.from.selectedId,()=>{s.selectedItemIds=[]});const g=async()=>{if(i.selectedOwnedId){if(i.items.length>3)return alert("3");u.value=!0;try{const e=i.items.map(e=>({itemId:Number(e),isVirtual:!1}));await Gy(n.selectedAccountId,i.selectedOwnedId,e),a("items-updated",{accountId:n.selectedAccountId,ownedCharacterId:i.selectedOwnedId,items:e}),alert("")}catch(e){alert(": "+e.message)}finally{u.value=!1}}},y=async()=>{c.value=!0;try{const e=s.from.selectedId,t=s.to.selectedId,r=s.selectedItemIds;if(e===t||!e||!t)throw new Error("");if(0===r.length)throw new Error("");const i=p.value.find(t=>t.id===e),o=p.value.find(e=>e.id===t);if(!i||!o)throw new Error("");const l=sr(i.items||[]),u=sr(o.items||[]);if(u.length+r.length>3)throw new Error("");const c=l.filter(e=>!r.includes(e.itemId)).map(e=>({itemId:e.itemId,isVirtual:!1})),d=[...u.map(e=>({itemId:e.itemId,isVirtual:!1})),...r.map(e=>({itemId:Number(e),isVirtual:!1}))];await Wy(n.selectedAccountId,{id:e,items:c},{id:t,items:d}),a("items-moved",{accountId:n.selectedAccountId,from:{id:e,items:c},to:{id:t,items:d}}),alert(""),s.from.selectedId=null,s.to.selectedId=null,s.selectedItemIds=[]}catch(e){alert(`: ${e.message}`)}finally{c.value=!1}},b=(e,t)=>wE(e,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,n.selectedAccountId);return(t,n)=>($(),U("div",_E,[l("div",IE,[r(cb,{icon:"mdi-sword-cross",size:"32",color:"primary",class:"mr-3"}),n[6]||(n[6]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"",-1))]),r(fE,null,{default:j(()=>[r(FS,{elevation:"3",rounded:"lg",class:"mb-6"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-update",class:"mr-2"}),n[7]||(n[7]=z("  ",-1))]),_:1,__:[7]}),r(OS,{class:"pa-6"},{default:j(()=>[r(jS,null,{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12",md:"6"},{default:j(()=>[l("div",SE,[l("div",CE,[r(cb,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),n[8]||(n[8]=l("h6",{class:"text-h6 font-weight-medium"},"",-1))]),r(hE,{modelValue:i.selectedOwnedId,"onUpdate:modelValue":n[0]||(n[0]=e=>i.selectedOwnedId=e),items:p.value,label:"","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[r(d_,null,{default:j(()=>[z(M(b(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items"])])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[l("div",kE,[l("div",EE,[r(cb,{icon:"mdi-sword-cross",color:"primary",class:"mr-2"}),n[9]||(n[9]=l("h6",{class:"text-h6 font-weight-medium"},"",-1))]),r(vS,{modelValue:i.items,"onUpdate:modelValue":n[1]||(n[1]=e=>i.items=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:" (3)",multiple:"",chips:"",clearable:"",variant:"outlined",disabled:!i.selectedOwnedId,color:"primary","prepend-inner-icon":"mdi-sword-cross"},null,8,["modelValue","items","disabled"]),r(xw,{loading:u.value,disabled:!i.selectedOwnedId||u.value||i.items.length>3,onClick:g,color:"primary",block:"",size:"large",variant:"elevated","prepend-icon":"mdi-update",class:"mt-4"},{default:j(()=>[z(M(u.value?"...":""),1)]),_:1},8,["loading","disabled"]),i.items.length>3?($(),q(IS,{key:0,type:"error",variant:"tonal",class:"mt-3","prepend-icon":"mdi-alert-circle"},{default:j(()=>n[10]||(n[10]=[z(" 3 ",-1)])),_:1,__:[10]})):W("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(FS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-swap-horizontal",class:"mr-2"}),n[11]||(n[11]=z("  ",-1))]),_:1,__:[11]}),r(OS,{class:"pa-6"},{default:j(()=>[r(jS,null,{default:j(()=>[r(pC,{class:"mb-4"},{default:j(()=>[r(YS,{cols:"12"},{default:j(()=>[r(vS,{modelValue:s.itemFilter,"onUpdate:modelValue":n[2]||(n[2]=e=>s.itemFilter=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"",clearable:"",variant:"outlined",color:"secondary","prepend-inner-icon":"mdi-filter",density:"comfortable"},{"prepend-inner":j(()=>[r(cb,{icon:"mdi-filter",color:"secondary"})]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),r(pC,null,{default:j(()=>[r(YS,{cols:"12",md:"4"},{default:j(()=>[l("div",xE,[r(Mb,{size:"48",color:"secondary",class:"mb-2"},{default:j(()=>[r(cb,{icon:"mdi-arrow-left",size:"24",color:"white"})]),_:1}),n[12]||(n[12]=l("h6",{class:"text-h6 font-weight-bold text-secondary"},"  ",-1))]),r(hE,{modelValue:s.from.selectedId,"onUpdate:modelValue":n[3]||(n[3]=e=>s.from.selectedId=e),items:h.value,label:"","list-height":"250px","disabled-items":[s.to.selectedId].filter(Boolean),color:"secondary","prepend-inner-icon":"mdi-account-arrow-left"},{item:j(({item:e})=>[r(d_,null,{default:j(()=>[z(M(b(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[l("div",TE,[r(Mb,{size:"48",color:"info",class:"mb-2"},{default:j(()=>[r(cb,{icon:"mdi-sword-cross",size:"24",color:"white"})]),_:1}),n[13]||(n[13]=l("h6",{class:"text-h6 font-weight-bold text-info"},"  ",-1))]),r(FS,{elevation:"2",rounded:"lg",style:{height:"318px","overflow-y":"auto"},class:"border-info border"},{default:j(()=>[r(OS,{class:"pa-4"},{default:j(()=>[s.from.selectedId?m.value.length?($(),U("div",VE,[l("div",DE,[r(QI,{color:"info",variant:"tonal",size:"small",class:"mb-2"},{default:j(()=>[z(M(m.value.length)+" ",1)]),_:1})]),($(!0),U(_,null,Q(m.value,e=>($(),q(FI,{key:e.id,modelValue:s.selectedItemIds,"onUpdate:modelValue":n[4]||(n[4]=e=>s.selectedItemIds=e),label:e.name,value:e.id,density:"compact","hide-details":"",color:"info",class:"mb-2"},null,8,["modelValue","label","value"]))),128))])):($(),U("div",NE,[r(cb,{icon:"mdi-inbox-outline",size:"48",color:"grey-lighten-1"}),n[15]||(n[15]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"},"  ",-1))])):($(),U("div",AE,[r(cb,{icon:"mdi-information",size:"48",color:"grey-lighten-1"}),n[14]||(n[14]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"},"  ",-1))]))]),_:1})]),_:1})]),_:1}),r(YS,{cols:"12",md:"4"},{default:j(()=>[l("div",ME,[r(Mb,{size:"48",color:"success",class:"mb-2"},{default:j(()=>[r(cb,{icon:"mdi-arrow-right",size:"24",color:"white"})]),_:1}),n[16]||(n[16]=l("h6",{class:"text-h6 font-weight-bold text-success"},"",-1))]),r(hE,{modelValue:s.to.selectedId,"onUpdate:modelValue":n[5]||(n[5]=e=>s.to.selectedId=e),items:d.value,label:"","list-height":"250px","disabled-items":[s.from.selectedId].filter(Boolean),color:"success","prepend-inner-icon":"mdi-account-arrow-right"},{item:j(({item:e})=>[r(d_,null,{default:j(()=>[z(M(b(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1})]),_:1}),r(pC,{class:"mt-6"},{default:j(()=>[r(YS,null,{default:j(()=>[l("div",RE,[r(xw,{loading:c.value,disabled:!s.from.selectedId||!s.to.selectedId||0===s.selectedItemIds.length||c.value,onClick:y,color:"success",size:"large",variant:"elevated","prepend-icon":"mdi-swap-horizontal",class:"px-8"},{default:j(()=>[z(M(c.value?"...":""),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},OE={class:"team-list-container",style:{height:"65vh","overflow-y":"auto"}},LE={key:0,class:"text-center pa-8"},FE={key:1,class:"text-center pa-8"},BE=["onClick"],UE={class:"d-flex align-center justify-space-between mb-3"},$E={class:"flex-grow-1"},jE={class:"text-h6 font-weight-bold text-primary mb-1"},zE=["title"],qE=["title"],HE=["title"],KE={__name:"TeamList",props:{dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},selectedTeamId:{type:String,default:null}},emits:["select-team","delete-team"],setup(e,{emit:t}){const n=e,a=t,i=["","()","()","","",""],u=S({type:""}),c=o(()=>u.type?n.teams.filter(e=>e.type===u.type):n.teams),d=(e,t)=>{if(!e.characters||!n.dataLoaded||t>=e.characters.length)return{characterName:"",accountName:"",items:[]};const a=e.characters[t],r=n.accounts.find(e=>e.id===a.accountId),i=(n.ownedCharactersData.get(a.accountId)||[]).find(e=>e.id===a.ownedCharacterId);if(!i)return{characterName:"",accountName:(null==r?void 0:r.name)||"",items:[]};const s=n.characterMastersMap.get(i.characterMasterId),o=sr(i.items||[]).map(e=>n.itemMastersMap.get(e.itemId)||`ID:${e.itemId}`).filter(Boolean);return{characterName:(null==s?void 0:s.monsterName)||"",accountName:(null==r?void 0:r.name)||"",items:o}};return(t,n)=>($(),q(FS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-format-list-bulleted",class:"mr-2"}),n[1]||(n[1]=z("  ",-1))]),_:1,__:[1]}),r(OS,{class:"pa-4"},{default:j(()=>[r(vS,{modelValue:u.type,"onUpdate:modelValue":n[0]||(n[0]=e=>u.type=e),items:["",...i],label:"",variant:"outlined",clearable:"",density:"compact","prepend-inner-icon":"mdi-filter",class:"mb-4",color:"primary"},null,8,["modelValue","items"]),l("div",OE,[e.dataLoaded?0===c.value.length?($(),U("div",FE,[r(cb,{icon:"mdi-inbox-outline",size:"64",color:"grey-lighten-1"}),n[3]||(n[3]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"},"  ",-1))])):W("",!0):($(),U("div",LE,[r(Wb,{indeterminate:"",color:"primary",size:"48"}),n[2]||(n[2]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," ... ",-1))])),($(!0),U(_,null,Q(c.value,t=>{return $(),U("div",{key:t.id,onClick:e=>(e=>{a("select-team",e)})(t),class:s(["team-item mb-3 pa-4 rounded-lg cursor-pointer transition-all",e.selectedTeamId===t.id?"bg-primary-lighten-5 border-primary border-2":"bg-grey-lighten-5 border-grey-lighten-3 border"]),style:{"min-height":"120px"}},[l("div",UE,[l("div",$E,[l("h3",jE,M(t.name),1),r(QI,{color:(n=t.type,{"":"deep-purple","()":"red-darken-2","()":"green-darken-2","":"blue-darken-2","":"orange-darken-2","":"blue-darken-2"}[n]||"grey"),size:"small",variant:"tonal",class:"font-weight-medium"},{default:j(()=>[z(M(t.type),1)]),_:2},1032,["color"])]),r(xw,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:X(e=>{return n=t.id,void a("delete-team",n);var n},["stop"]),class:"ml-2"},null,8,["onClick"])]),r(pC,{dense:""},{default:j(()=>[($(!0),U(_,null,Q(Array(4),(e,n)=>($(),q(YS,{key:n,cols:"3"},{default:j(()=>[l("div",{class:s(["character-slot pa-2 rounded text-center",""!==d(t,n).characterName?"bg-white":"bg-grey-lighten-4"])},[l("div",{class:"text-caption font-weight-bold text-truncate mb-1",title:d(t,n).characterName},M(d(t,n).characterName),9,zE),l("div",{class:"text-caption text-truncate mb-1",title:d(t,n).accountName},M(d(t,n).accountName),9,qE),r(Aw,{class:"my-1"}),($(),U(_,null,Q(4,e=>l("div",{key:e,class:"text-caption text-truncate",title:d(t,n).items[e-1]},M(d(t,n).items[e-1]||""),9,HE)),64))],2)]),_:2},1024))),128))]),_:2},1024)],10,BE);var n}),128))])]),_:1})]),_:1}))}},GE={class:"character-formation-section"},WE={class:"d-flex align-center mb-4"},QE={class:"d-flex align-center mb-4"},YE={class:"text-white font-weight-bold"},XE={class:"text-h6 font-weight-bold"},JE={key:1,class:"pa-8 text-center"},ZE={__name:"TeamForm",props:{team:{type:Object,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},isSaving:{type:Boolean,default:!1}},emits:["save-team","reset-form","update:team"],setup(e,{emit:t}){const n=e,a=t,i=(e,t)=>{const r=JSON.parse(JSON.stringify(n.team));r[e]=t,a("update:team",r)},u=(e,t,r)=>{const i={...n.team,slots:n.team.slots.map((n,a)=>a===e?{...n,[t]:r}:n)};"selectedAccountId"===t&&(i.slots[e].selectedOwnedId=null),a("update:team",i)},c=["","()","()","","",""],d=o(()=>n.team.name&&n.team.type&&n.team.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)),h=e=>{if(!e.selectedAccountId)return[];return(n.ownedCharactersData.get(e.selectedAccountId)||[]).map(t=>{const a=n.characterMastersMap.get(t.characterMasterId);return{...t,accountId:e.selectedAccountId,indexNumber:(null==a?void 0:a.indexNumber)||999999,monsterName:(null==a?void 0:a.monsterName)||""}}).sort((e,t)=>e.indexNumber-t.indexNumber)};return(t,a)=>($(),q(FS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-account-edit",class:"mr-2"}),z(" "+M(e.team.id?"":""),1)]),_:1}),r(VS,{class:"pa-4 bg-grey-lighten-5"},{default:j(()=>[r(xw,{onClick:a[0]||(a[0]=e=>t.$emit("reset-form")),size:"small",variant:"tonal",color:"primary","prepend-icon":"mdi-plus"},{default:j(()=>a[4]||(a[4]=[z("  ",-1)])),_:1,__:[4]})]),_:1}),e.accounts.length>0&&e.ownedCharactersData.size>0&&e.characterMastersMap.size>0?($(),U(_,{key:0},[r(OS,{class:"pa-6"},{default:j(()=>[r(iS,{"model-value":e.team.name,"onUpdate:modelValue":a[1]||(a[1]=e=>i("name",e)),label:"",variant:"outlined",placeholder:":  1",class:"mb-6",color:"primary","prepend-inner-icon":"mdi-format-title"},null,8,["model-value"]),r(vS,{"model-value":e.team.type,"onUpdate:modelValue":a[2]||(a[2]=e=>i("type",e)),items:c,label:"",variant:"outlined",class:"mb-8",color:"primary","prepend-inner-icon":"mdi-tag"},null,8,["model-value"]),l("div",GE,[l("div",WE,[r(cb,{icon:"mdi-account-multiple",color:"primary",class:"mr-2"}),a[5]||(a[5]=l("h4",{class:"text-h5 font-weight-bold text-primary"},"  (4) ",-1))]),r(pC,null,{default:j(()=>[($(!0),U(_,null,Q(e.team.slots,(t,a)=>($(),q(YS,{key:a,cols:"12",md:"6"},{default:j(()=>[r(FS,{elevation:"2",class:s(["pa-4 h-100 character-slot-card",t.selectedAccountId?"border-primary border-2":"border-grey-lighten-3 border"]),rounded:"lg",style:{"min-height":"400px"}},{default:j(()=>{return[l("div",QE,[r(Mb,{size:"32",color:"primary",class:"mr-3"},{default:j(()=>[l("span",YE,M(a+1),1)]),_:2},1024),l("h5",XE,"  "+M(a+1),1)]),r(vS,{"model-value":t.selectedAccountId,"onUpdate:modelValue":e=>u(a,"selectedAccountId",e),items:e.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",class:"mb-3",color:"primary","prepend-inner-icon":"mdi-account"},null,8,["model-value","onUpdate:modelValue","items"]),r(hE,{"model-value":t.selectedOwnedId,"onUpdate:modelValue":e=>((e,t)=>{u(e,"selectedOwnedId",t)})(a,e),items:h(t),label:"","list-height":"280px",variant:"filled",disabled:!t.selectedAccountId,"disabled-items":(i=a,n.team.slots.filter((e,t)=>t!==i&&e.selectedOwnedId).map(e=>e.selectedOwnedId)),"no-data-text":"",density:"comfortable","list-density":"comfortable","primary-color":"primary","search-bg-color":"grey-lighten-5","card-elevation":2,"prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[r(d_,null,{default:j(()=>{return[z(M((t=e,wE(t,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,t.accountId))),1)];var t}),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue","items","disabled","disabled-items"])];var i}),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})])]),_:1}),r(AS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(fC),r(xw,{loading:e.isSaving,disabled:!d.value||e.isSaving,onClick:a[3]||(a[3]=e=>t.$emit("save-team")),color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(M(e.isSaving?"...":e.team.id?"":""),1)]),_:1},8,["loading","disabled"])]),_:1})],64)):($(),U("div",JE,[r(Wb,{indeterminate:"",color:"primary",size:"48"}),a[6]||(a[6]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," ... ",-1))]))]),_:1}))}},ex={class:"pa-6"},tx={class:"d-flex align-center mb-6"},nx=Zy({__name:"ManageTeamsTab",props:{userId:{type:String,required:!0},dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["team-added","team-updated","team-deleted"],setup(e,{emit:t}){const n=e,a=t,i=f(!1),s=()=>({id:null,name:"",type:"",slots:Array(4).fill().map(()=>({selectedAccountId:"",selectedOwnedId:"",characterSearch:""}))}),o=S(s()),u=e=>{Object.assign(o,e)},c=e=>{Object.assign(o,{id:e.id,name:e.name,type:e.type,slots:JSON.parse(JSON.stringify(e.characters.map(e=>({selectedAccountId:e.accountId,selectedOwnedId:e.ownedCharacterId,characterSearch:""}))))})},d=()=>{Object.assign(o,s())},h=async()=>{if(!(o.name&&o.type&&o.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)))return void alert("4");i.value=!0;const e={userId:n.userId,name:o.name,type:o.type,characters:o.slots.map(e=>({accountId:e.selectedAccountId,ownedCharacterId:e.selectedOwnedId}))};try{const t=o.id;Object.assign(e,t?{updatedAt:om()}:{createdAt:om()});const n=await Xy(t,e);if(t)a("team-updated",{...e,id:t}),alert("");else{const t={...e,id:n.id,createdAt:{toDate:()=>new Date}};a("team-added",t),alert(""),d()}}catch(t){alert(": "+t.message)}finally{i.value=!1}},p=async e=>{if(confirm(""))try{await Jy(e),a("team-deleted",e),alert(""),o.id===e&&d()}catch(t){alert(": "+t.message)}};return(t,n)=>($(),U("div",ex,[l("div",tx,[r(cb,{icon:"mdi-account-group",size:"32",color:"primary",class:"mr-3"}),n[0]||(n[0]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"",-1))]),r(pC,null,{default:j(()=>[r(YS,{cols:"12",lg:"5"},{default:j(()=>[r(KE,{"data-loaded":e.dataLoaded,teams:e.teams,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"selected-team-id":o.id,onSelectTeam:c,onDeleteTeam:p},null,8,["data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map","selected-team-id"])]),_:1}),r(YS,{cols:"12",lg:"7"},{default:j(()=>[r(ZE,{team:o,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"is-saving":i.value,onSaveTeam:h,onResetForm:d,"onUpdate:team":u},null,8,["team","accounts","owned-characters-data","character-masters-map","item-masters-map","is-saving"])]),_:1})]),_:1})]))}},[["__scopeId","data-v-42576069"]]),ax={class:"pa-6"},rx={class:"d-flex align-center mb-6"},ix={__name:"AddMasterCharacterTab",props:{gachaMasters:{type:Array,required:!0}},emits:["master-added"],setup(e,{emit:t}){const n=t,a=S({no:"",name:"",element:"",type:"",gacha:""}),i=f(!1),s=async()=>{if(!a.name)return alert("");i.value=!0;try{const e={indexNumber:a.no?Number(a.no):0,monsterName:a.name,element:a.element||"",type:a.type||"",ejectionGacha:a.gacha||""};await Qy(e),alert(""),n("master-added")}catch(e){alert(": "+e.message)}finally{i.value=!1}};return(t,n)=>($(),U("div",ax,[l("div",rx,[r(cb,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"  ",-1))]),r(fE,{onSubmit:X(s,["prevent"])},{default:j(()=>[r(FS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-account-plus",class:"mr-2"}),n[6]||(n[6]=z("  ",-1))]),_:1,__:[6]}),r(OS,{class:"pa-6"},{default:j(()=>[r(jS,null,{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12",md:"6"},{default:j(()=>[r(iS,{modelValue:a.no,"onUpdate:modelValue":n[0]||(n[0]=e=>a.no=e),modelModifiers:{number:!0},label:"",type:"number",placeholder:": 1234",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(iS,{modelValue:a.name,"onUpdate:modelValue":n[1]||(n[1]=e=>a.name=e),modelModifiers:{trim:!0},label:"",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:a.element,"onUpdate:modelValue":n[2]||(n[2]=e=>a.element=e),items:["","","","",""],label:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:a.type,"onUpdate:modelValue":n[3]||(n[3]=e=>a.type=e),items:["","","",""],label:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12"},{default:j(()=>[r(vS,{modelValue:a.gacha,"onUpdate:modelValue":n[4]||(n[4]=e=>a.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:" ()",placeholder:"(/)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(AS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(fC),r(xw,{loading:i.value,disabled:!a.name||i.value,onClick:s,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(M(i.value?"...":""),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},sx={class:"pa-6"},ox={class:"d-flex align-center mb-6"},lx={__name:"EditMasterCharacterTab",props:{characterMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0}},emits:["master-updated"],setup(e,{emit:t}){const n=e,a=t,i=S({search:"",selectedMasterId:null,no:"",name:"",element:"",type:"",gacha:""}),s=f(!1),u=o(()=>new Map(n.characterMasters.map(e=>[e.id,e])));v(()=>i.selectedMasterId,e=>{if(!e)return void Object.assign(i,{name:"",no:"",element:"",type:"",gacha:""});const t=u.value.get(e);t&&Object.assign(i,{name:t.monsterName,no:t.indexNumber,element:t.element,type:t.type,gacha:t.ejectionGacha})});const c=async()=>{if(!i.selectedMasterId||!i.name)return alert("");s.value=!0;try{const e={monsterName:i.name,indexNumber:i.no?Number(i.no):0,element:i.element,type:i.type,ejectionGacha:i.gacha};await Yy(i.selectedMasterId,e),alert(""),a("master-updated")}catch(e){alert(": "+e.message)}finally{s.value=!1}};return(t,a)=>($(),U("div",sx,[l("div",ox,[r(cb,{icon:"mdi-account-edit",size:"32",color:"primary",class:"mr-3"}),a[6]||(a[6]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"  ",-1))]),r(fE,null,{default:j(()=>[r(jS,{class:"pa-0"},{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12"},{default:j(()=>[r(FS,{elevation:"2",rounded:"lg",class:"mb-4"},{default:j(()=>[r(DS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-account-search",class:"mr-2"}),a[7]||(a[7]=z("  ",-1))]),_:1,__:[7]}),r(OS,{class:"pa-4"},{default:j(()=>[r(hE,{modelValue:i.selectedMasterId,"onUpdate:modelValue":a[0]||(a[0]=e=>i.selectedMasterId=e),items:n.characterMasters,"item-title":e=>`[${e.indexNumber||"?"}] ${e.monsterName}`,label:"","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items","item-title"])]),_:1})]),_:1})]),_:1})]),_:1}),i.selectedMasterId?($(),q(pC,{key:0,class:"mt-4"},{default:j(()=>[r(YS,{cols:"12"},{default:j(()=>[r(FS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(DS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[r(cb,{icon:"mdi-account-edit",class:"mr-2"}),a[8]||(a[8]=z("  ",-1))]),_:1,__:[8]}),r(OS,{class:"pa-6"},{default:j(()=>[r(jS,null,{default:j(()=>[r(pC,null,{default:j(()=>[r(YS,{cols:"12",md:"6"},{default:j(()=>[r(iS,{modelValue:i.no,"onUpdate:modelValue":a[1]||(a[1]=e=>i.no=e),modelModifiers:{number:!0},label:"",type:"number",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(iS,{modelValue:i.name,"onUpdate:modelValue":a[2]||(a[2]=e=>i.name=e),modelModifiers:{trim:!0},label:"",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:i.element,"onUpdate:modelValue":a[3]||(a[3]=e=>i.element=e),items:["","","","",""],label:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12",md:"6"},{default:j(()=>[r(vS,{modelValue:i.type,"onUpdate:modelValue":a[4]||(a[4]=e=>i.type=e),items:["","","",""],label:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(YS,{cols:"12"},{default:j(()=>[r(vS,{modelValue:i.gacha,"onUpdate:modelValue":a[5]||(a[5]=e=>i.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:" ()",placeholder:"(/)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(AS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(fC),r(xw,{loading:s.value,disabled:!i.selectedMasterId||s.value,onClick:c,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(M(s.value?"...":""),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):W("",!0)]),_:1})]),_:1})]))}},ux=ae({...ye(),...We(Lt(),["fullHeight"]),...ge()},"VApp"),cx=ne()({name:"VApp",props:ux(),setup(e,t){let{slots:n}=t;const a=Ce(e),{layoutClasses:r,getLayoutItem:o,items:u,layoutRef:c}=Ft({...e,fullHeight:!0}),{rtlClasses:d}=Ve();return ve(()=>{var t;return l("div",{ref:c,class:s(["v-application",a.themeClasses.value,r.value,d.value,e.class]),style:i([e.style])},[l("div",{class:"v-application__wrap"},[null==(t=n.default)?void 0:t.call(n)])])}),{getLayoutItem:o,items:u,theme:a}}}),dx=ae({text:String,...ye(),...lb()},"VToolbarTitle"),hx=ne()({name:"VToolbarTitle",props:dx(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=!!(n.default||n.text||e.text);return r(e.tag,{class:s(["v-toolbar-title",e.class]),style:i(e.style)},{default:()=>{var a;return[t&&l("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,null==(a=n.default)?void 0:a.call(n)])]}})}),{}}}),px=[null,"prominent","default","comfortable","compact"],fx=ae({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>px.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Sb(),...ye(),...Rb(),...vb(),...lb({tag:"header"}),...ge()},"VToolbar"),vx=ne()({name:"VToolbar",props:fx(),setup(e,t){var a;let{slots:u}=t;const{backgroundColorClasses:c,backgroundColorStyles:d}=rb(()=>e.color),{borderClasses:h}=Cb(e),{elevationClasses:p}=Pb(e),{roundedClasses:f}=mb(e),{themeClasses:v}=Ce(e),{rtlClasses:m}=Ve(),g=n(null===e.extended?!!(null==(a=u.extension)?void 0:a.call(u)):e.extended),y=o(()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10)),b=o(()=>g.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0);return re({VBtn:{variant:"text"}}),ve(()=>{var t;const n=!(!e.title&&!u.title),a=!(!u.image&&!e.image),o=null==(t=u.extension)?void 0:t.call(u);return g.value=null===e.extended?!!o:e.extended,r(e.tag,{class:s(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},c.value,h.value,p.value,f.value,v.value,m.value,e.class]),style:i([d.value,e.style])},{default:()=>[a&&l("div",{key:"image",class:"v-toolbar__image"},[u.image?r(tb,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},u.image):r(Ib,{key:"image-img",cover:!0,src:e.image},null)]),r(tb,{defaults:{VTabs:{height:he(y.value)}}},{default:()=>{var t,a,i;return[l("div",{class:"v-toolbar__content",style:{height:he(y.value)}},[u.prepend&&l("div",{class:"v-toolbar__prepend"},[null==(t=u.prepend)?void 0:t.call(u)]),n&&r(hx,{key:"title",text:e.title},{text:u.title}),null==(a=u.default)?void 0:a.call(u),u.append&&l("div",{class:"v-toolbar__append"},[null==(i=u.append)?void 0:i.call(u)])])]}}),r(tb,{defaults:{VTabs:{height:he(b.value)}}},{default:()=>[r($w,null,{default:()=>[g.value&&l("div",{class:"v-toolbar__extension",style:{height:he(b.value)}},[o])]})]})]})}),{contentHeight:y,extensionHeight:b}}}),mx=ae({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");const gx=ae({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...fx(),...Ut(),...mx(),height:{type:[Number,String],default:64}},"VAppBar"),yx=ne()({name:"VAppBar",props:gx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=f(),s=ke(e,"modelValue"),l=o(()=>{var t;const n=new Set((null==(t=e.scrollBehavior)?void 0:t.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),u=o(()=>{const e=l.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!s.value}),{currentScroll:c,scrollThreshold:d,isScrollingUp:p,scrollRatio:m}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:a}=t;let r=0,i=0;const s=f(null),l=n(0),u=n(0),c=n(0),d=n(!1),h=n(!1),p=o(()=>Number(e.scrollThreshold)),m=o(()=>Ne((p.value-l.value)/p.value||0)),g=()=>{const e=s.value;if(!e||a&&!a.value)return;r=l.value,l.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;i===t?(h.value=l.value<r,c.value=Math.abs(l.value-p.value)):i=t};return v(h,()=>{u.value=u.value||l.value}),v(d,()=>{u.value=0}),C(()=>{v(()=>e.scrollTarget,e=>{var t;const n=e?document.querySelector(e):window;n&&n!==s.value&&(null==(t=s.value)||t.removeEventListener("scroll",g),s.value=n,s.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),y(()=>{var e;null==(e=s.value)||e.removeEventListener("scroll",g)}),a&&v(a,g,{immediate:!0}),{scrollThreshold:p,currentScroll:l,currentThreshold:c,isScrollActive:d,scrollRatio:m,isScrollingUp:h,savedScroll:u}}(e,{canScroll:u}),g=b(()=>l.value.hide||l.value.fullyHide),w=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?m.value>0:0===m.value)),_=o(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?c.value>0:0===c.value)),I=o(()=>l.value.fadeImage?l.value.inverted?1-m.value:m.value:void 0),S=o(()=>{var e,t;if(l.value.hide&&l.value.inverted)return 0;const n=(null==(e=i.value)?void 0:e.contentHeight)??0,a=(null==(t=i.value)?void 0:t.extensionHeight)??0;return g.value?c.value<d.value||l.value.fullyHide?n+a:n:n+a});Ye(()=>!!e.scrollBehavior,()=>{V(()=>{g.value?l.value.inverted?s.value=c.value>d.value:s.value=p.value||c.value<d.value:s.value=!0})});const{ssrBootStyles:k}=i_(),{layoutItemStyles:E}=Bt({id:e.name,order:o(()=>parseInt(e.order,10)),position:b(()=>e.location),layoutSize:S,elementSize:n(void 0),active:s,absolute:b(()=>e.absolute)});return ve(()=>{const t=vx.filterProps(e);return r(vx,h({ref:i,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...E.value,"--v-toolbar-image-opacity":I.value,height:void 0,...k.value},e.style]},t,{collapse:w.value,flat:_.value}),a)}),{}}}),bx=ae({scrollable:Boolean,...ye(),...db(),...lb({tag:"main"})},"VMain"),wx=ne()({name:"VMain",props:bx(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=hb(e),{mainStyles:o}=$t(),{ssrBootStyles:u}=i_();return ve(()=>r(e.tag,{class:s(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:i([o.value,u.value,a.value,e.style])},{default:()=>{var t,a;return[e.scrollable?l("div",{class:"v-main__scroller"},[null==(t=n.default)?void 0:t.call(n)]):null==(a=n.default)?void 0:a.call(n)]}})),{}}}),_x=Symbol.for("vuetify:v-tabs"),Ix=ae({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...We(Ew({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Sx=ne()({name:"VTab",props:Ix(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:u,textColorStyles:c}=ab(()=>e.sliderColor),d=f(),p=f(),v=o(()=>"horizontal"===e.direction),m=o(()=>{var e,t;return(null==(t=null==(e=d.value)?void 0:e.group)?void 0:t.isSelected.value)??!1});function g(e){var t,n;let{value:a}=e;if(a){const e=null==(n=null==(t=d.value)?void 0:t.$el.parentElement)?void 0:n.querySelector(".v-tab--selected .v-tab__slider"),a=p.value;if(!e||!a)return;const r=getComputedStyle(e).color,i=e.getBoundingClientRect(),s=a.getBoundingClientRect(),o=v.value?"x":"y",l=v.value?"X":"Y",u=v.value?"right":"bottom",c=v.value?"width":"height",h=i[o]>s[o]?i[u]-s[u]:i[o]-s[o],f=Math.sign(h)>0?v.value?"right":"bottom":Math.sign(h)<0?v.value?"left":"top":"center",m=(Math.abs(h)+(Math.sign(h)<0?i[c]:s[c]))/Math.max(i[c],s[c])||0,g=i[c]/s[c]||0,y=1.5;Pe(a,{backgroundColor:[r,"currentcolor"],transform:[`translate${l}(${h}px) scale${l}(${g})`,`translate${l}(${h/y}px) scale${l}(${(m-1)/y+1})`,"none"],transformOrigin:Array(3).fill(f)},{duration:225,easing:Le})}}return ve(()=>{const t=xw.filterProps(e);return r(xw,h({symbol:_x,ref:d,class:["v-tab",e.class],style:e.style,tabindex:m.value?0:-1,role:"tab","aria-selected":String(m.value),active:!1},t,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":g}),{...n,default:()=>{var t;return l(_,null,[(null==(t=n.default)?void 0:t.call(n))??e.text,!e.hideSlider&&l("div",{ref:p,class:s(["v-tab__slider",u.value]),style:i(c.value)},null)])}})}),lI({},d)}});function Cx(e,t){var n;const a=e.changedTouches[0];t.touchendX=a.clientX,t.touchendY=a.clientY,null==(n=t.end)||n.call(t,{originalEvent:e,...t}),(e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&r<a-16&&e.up(e),e.down&&r>a+16&&e.down(e))})(t)}const kx={mounted:function(e,t){var n;const a=t.value,r=(null==a?void 0:a.parent)?e.parentElement:e,i=(null==a?void 0:a.options)??{passive:!0},s=null==(n=t.instance)?void 0:n.$.uid;if(!r||!s)return;const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>function(e,t){var n;const a=e.changedTouches[0];t.touchstartX=a.clientX,t.touchstartY=a.clientY,null==(n=t.start)||n.call(t,{originalEvent:e,...t})}(e,t),touchend:e=>Cx(e,t),touchmove:e=>function(e,t){var n;const a=e.changedTouches[0];t.touchmoveX=a.clientX,t.touchmoveY=a.clientY,null==(n=t.move)||n.call(t,{originalEvent:e,...t})}(e,t)}}(t.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[s]=o,jt(o).forEach(e=>{r.addEventListener(e,o[e],i)})},unmounted:function(e,t){var n,a;const r=(null==(n=t.value)?void 0:n.parent)?e.parentElement:e,i=null==(a=t.instance)?void 0:a.$.uid;if(!(null==r?void 0:r._touchHandlers)||!i)return;const s=r._touchHandlers[i];jt(s).forEach(e=>{r.removeEventListener(e,s[e])}),delete r._touchHandlers[i]}},Ex=Symbol.for("vuetify:v-window"),xx=Symbol.for("vuetify:v-window-group"),Tx=ae({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||"hover"===e},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ye(),...lb(),...ge()},"VWindow"),Ax=ne()({name:"VWindow",directives:{vTouch:kx},props:Tx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:u}=Ce(e),{isRtl:c}=Ve(),{t:d}=wt(),h=$b(e,xx),p=f(),m=o(()=>c.value?!e.reverse:e.reverse),g=n(!1),y=o(()=>`v-window-${"vertical"===e.direction?"y":"x"}${(m.value?!g.value:g.value)?"-reverse":""}-transition`),_=n(0),I=f(void 0),S=o(()=>h.items.value.findIndex(e=>h.selected.value.includes(e.id)));v(S,(e,t)=>{const n=h.items.value.length,a=n-1;g.value=n<=2?e<t:e===a&&0===t||(0!==e||t!==a)&&e<t}),x(Ex,{transition:y,isReversed:g,transitionCount:_,transitionHeight:I,rootRef:p});const C=b(()=>e.continuous||0!==S.value),k=b(()=>e.continuous||S.value!==h.items.value.length-1);function E(){C.value&&h.prev()}function T(){k.value&&h.next()}const A=o(()=>{const t=[],n={icon:c.value?e.nextIcon:e.prevIcon,class:"v-window__"+(m.value?"right":"left"),onClick:h.prev,"aria-label":d("$vuetify.carousel.prev")};t.push(C.value?a.prev?a.prev({props:n}):r(xw,n,null):l("div",null,null));const i={icon:c.value?e.prevIcon:e.nextIcon,class:"v-window__"+(m.value?"left":"right"),onClick:h.next,"aria-label":d("$vuetify.carousel.next")};return t.push(k.value?a.next?a.next({props:i}):r(xw,i,null):l("div",null,null)),t}),N=o(()=>{if(!1===e.touch)return e.touch;return{...{left:()=>{m.value?E():T()},right:()=>{m.value?T():E()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}},...!0===e.touch?{}:e.touch}});return ve(()=>w(r(e.tag,{ref:p,class:s(["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows,"v-window--vertical-arrows":!!e.verticalArrows},u.value,e.class]),style:i(e.style)},{default:()=>{var t,n;return[l("div",{class:"v-window__container",style:{height:I.value}},[null==(t=a.default)?void 0:t.call(a,{group:h}),!1!==e.showArrows&&l("div",{class:s(["v-window__controls",{"v-window__controls--left":"left"===e.verticalArrows||!0===e.verticalArrows},{"v-window__controls--right":"right"===e.verticalArrows}])},[A.value])]),null==(n=a.additional)?void 0:n.call(a,{group:h})]}}),[[kx,N.value]])),{group:h}}}),Nx=ae({...We(Tx(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Vx=ne()({name:"VTabsWindow",props:Nx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=T(_x,null),i=ke(e,"modelValue"),s=o({get(){var e;return null==i.value&&a?null==(e=a.items.value.find(e=>a.selected.value.includes(e.id)))?void 0:e.value:i.value},set(e){i.value=e}});return ve(()=>{const t=Ax.filterProps(e);return r(Ax,h({_as:"VTabsWindow"},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Dx=ae({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ye(),...Bb(),...G_()},"VWindowItem"),Mx=ne()({name:"VWindowItem",directives:{vTouch:kx},props:Dx(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:a}=t;const u=T(Ex),c=Ub(e,xx),{isBooted:d}=i_();if(!u||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=n(!1),p=o(()=>d.value&&(u.isReversed.value?!1!==e.reverseTransition:!1!==e.transition));function f(){h.value&&u&&(h.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,0===u.transitionCount.value&&(u.transitionHeight.value=void 0)))}function v(){var e;!h.value&&u&&(h.value=!0,0===u.transitionCount.value&&(u.transitionHeight.value=he(null==(e=u.rootRef.value)?void 0:e.clientHeight)),u.transitionCount.value+=1)}function m(){f()}function y(e){h.value&&g(()=>{p.value&&h.value&&u&&(u.transitionHeight.value=he(e.clientHeight))})}const b=o(()=>{const t=u.isReversed.value?e.reverseTransition:e.transition;return!!p.value&&{name:"string"!=typeof t?u.transition.value:t,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:m,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:m,onEnter:y}}),{hasContent:_}=W_(e,c.isSelected);return ve(()=>r(yb,{transition:b.value,disabled:!d.value},{default:()=>{var t;return[w(l("div",{class:s(["v-window-item",c.selectedClass.value,e.class]),style:i(e.style)},[_.value&&(null==(t=a.default)?void 0:t.call(a))]),[[I,c.isSelected.value]])]}})),{groupItem:c}}}),Rx=ae({...Dx()},"VTabsWindowItem"),Px=ne()({name:"VTabsWindowItem",props:Rx(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=Mx.filterProps(e);return r(Mx,h({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});const Ox=ae({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...qI({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Eb(),...lb()},"VTabs"),Lx=ne()({name:"VTabs",props:Ox(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const i=ke(e,"modelValue"),s=o(()=>function(e){return e?e.map(e=>we(e)?e:{text:e,value:e}):[]}(e.items)),{densityClasses:u}=xb(e),{backgroundColorClasses:c,backgroundColorStyles:d}=rb(()=>e.bgColor),{scopeId:p}=Q_();return re({VTab:{color:b(()=>e.color),direction:b(()=>e.direction),stacked:b(()=>e.stacked),fixed:b(()=>e.fixedTabs),sliderColor:b(()=>e.sliderColor),hideSlider:b(()=>e.hideSlider)}}),ve(()=>{const t=HI.filterProps(e),o=!!(a.window||e.items.length>0);return l(_,null,[r(HI,h(t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,c.value,e.class],style:[{"--v-tabs-height":he(e.height)},d.value,e.style],role:"tablist",symbol:_x},p,n),{default:()=>{var e;return[(null==(e=a.default)?void 0:e.call(a))??s.value.map(e=>{var t;return(null==(t=a.tab)?void 0:t.call(a,{item:e}))??r(Sx,h(e,{key:e.text,value:e.value}),{default:a[`tab.${e.value}`]?()=>{var t;return null==(t=a[`tab.${e.value}`])?void 0:t.call(a,{item:e})}:void 0})})]}}),o&&r(Vx,h({modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,key:"tabs-window"},p),{default:()=>{var e;return[s.value.map(e=>{var t;return(null==(t=a.item)?void 0:t.call(a,{item:e}))??r(Px,{value:e.value},{default:()=>{var t;return null==(t=a[`item.${e.value}`])?void 0:t.call(a,{item:e})}})}),null==(e=a.window)?void 0:e.call(a)]}})])}),{}}}),Fx={class:"d-flex align-center w-100"},Bx={class:"d-flex align-center mr-8"},Ux={class:"w-100 minimal-tabs-container"},$x={key:0},jx={key:1,class:"text-center pa-16 minimal-loading"},zx={key:1,class:"text-center pa-16 minimal-welcome"},qx=Zy({__name:"App",setup(e){const t=f(null),n=f(!1),a=f(!1),i=f([]),s=f([]),u=f([]),c=f([]),d=f([]),h=f(new Map),p=f(new Map),v=f(new Map),m=f(new Map),g=f("view-all"),y=f(null),b=f([{id:"view-all",name:"",icon:"mdi-account-multiple"},{id:"add-owned",name:"",icon:"mdi-account-plus"},{id:"manage-items",name:"",icon:"mdi-sword-cross"},{id:"manage-teams",name:"",icon:"mdi-account-group"},{id:"add-master",name:"",icon:"mdi-database-plus"},{id:"edit-master",name:"",icon:"mdi-database-edit"}]),w=o(()=>"add-owned"===g.value||"manage-items"===g.value);rr(e=>{t.value=e,n.value=!0,e?async function(){if(a.value)return;if(!t.value)return;try{const e=await Hy(t.value.uid);i.value=e.accounts,s.value=e.characterMasters,u.value=e.itemMasters,c.value=e.gachaMasters,d.value=e.teams,h.value=e.itemMastersMap,p.value=e.ownedCountMap,v.value=e.ownedCharactersData,m.value=e.characterMastersMap,i.value.length>0&&(y.value=i.value[0].id),a.value=!0}catch(e){alert(`: ${e.message}`)}}():C()});const I=()=>{nr().catch(()=>alert(""))},S=()=>{ar()},C=()=>{a.value=!1,i.value=[],s.value=[],u.value=[],c.value=[],d.value=[],h.value=new Map,p.value=new Map,v.value=new Map,m.value=new Map,y.value=null};const k=({accountId:e,newCharacter:t})=>{v.value.has(e)||v.value.set(e,[]),v.value.get(e).push(t);const n=`${t.characterMasterId}-${e}`,a=p.value.get(n)||0;p.value.set(n,a+1)},E=async({accountId:e,ownedCharacterId:t,characterMasterId:n,items:a,isNew:r})=>{try{if(r){const t={characterMasterId:n,items:a},r={id:(await Ky(e,t)).id,characterMasterId:n,items:a};v.value.has(e)||v.value.set(e,[]),v.value.get(e).push(r);const i=`${n}-${e}`,s=p.value.get(i)||0;p.value.set(i,s+1),alert("")}else{await Gy(e,t,a);const n=(v.value.get(e)||[]).find(e=>e.id===t);n&&(n.items=a),alert("")}}catch(i){alert(`: ${i.message}`)}},x=({accountId:e,from:t,to:n})=>{const a=v.value.get(e)||[],r=a.find(e=>e.id===t.id),i=a.find(e=>e.id===n.id);r&&(r.items=t.items),i&&(i.items=n.items)},T=e=>{d.value.unshift(e)},A=e=>{const t=d.value.findIndex(t=>t.id===e.id);t>-1&&(d.value[t]={...d.value[t],...e})},N=e=>{d.value=d.value.filter(t=>t.id!==e)},V=()=>{location.reload()};return(e,n)=>($(),q(cx,null,{default:j(()=>[r(yx,{app:"",color:"white",elevation:"0",class:"minimal-header",height:"64"},Z({default:j(()=>[l("div",Fx,[l("div",Bx,[r(cb,{icon:"mdi-dragon",size:"28",class:"mr-3",color:"primary"}),r(hx,{class:"text-h5 font-weight-medium text-primary"},{default:j(()=>n[3]||(n[3]=[z("  ",-1)])),_:1,__:[3]})]),r(fC),r(fI,{user:t.value,onLogin:I,onLogout:S,class:"mr-4"},null,8,["user"])])]),_:2},[t.value?{name:"extension",fn:j(()=>[l("div",Ux,[r(Lx,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=e=>g.value=e),"align-with-title":"",color:"primary",class:"minimal-tabs",height:"48"},{default:j(()=>[($(!0),U(_,null,Q(b.value,e=>($(),q(Sx,{key:e.id,value:e.id,class:"minimal-tab"},{default:j(()=>[r(cb,{icon:e.icon,class:"mr-2",size:"20"},null,8,["icon"]),z(" "+M(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),key:"0"}:void 0]),1024),r(wx,null,{default:j(()=>[r(jS,{class:"pa-6 main-container"},{default:j(()=>[t.value?($(),U("div",$x,[r(gS,{accounts:i.value,modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=e=>y.value=e),visible:w.value,class:"mb-6 minimal-account-selector"},null,8,["accounts","modelValue","visible"]),a.value?($(),q(Ax,{key:0,modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=e=>g.value=e),class:"minimal-window"},{default:j(()=>[r(Mx,{value:"view-all",key:"view-all"},{default:j(()=>[r(oE,{"data-loaded":a.value,accounts:i.value,"character-masters":s.value,"item-masters":u.value,"gacha-masters":c.value,"owned-count-map":p.value,"owned-characters-data":v.value,"item-masters-map":h.value,"character-masters-map":m.value,onItemsUpdated:E},null,8,["data-loaded","accounts","character-masters","item-masters","gacha-masters","owned-count-map","owned-characters-data","item-masters-map","character-masters-map"])]),_:1}),r(Mx,{value:"add-owned",key:"add-owned"},{default:j(()=>[r(bE,{"character-masters":s.value,"character-masters-map":m.value,"selected-account-id":y.value,"owned-count-map":p.value,onCharacterAdded:k},null,8,["character-masters","character-masters-map","selected-account-id","owned-count-map"])]),_:1}),r(Mx,{value:"manage-items",key:"manage-items"},{default:j(()=>[r(PE,{"selected-account-id":y.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters":u.value,"item-masters-map":h.value,onItemsUpdated:E,onItemsMoved:x},null,8,["selected-account-id","owned-characters-data","character-masters-map","item-masters","item-masters-map"])]),_:1}),r(Mx,{value:"manage-teams",key:"manage-teams"},{default:j(()=>[r(nx,{"user-id":t.value.uid,"data-loaded":a.value,teams:d.value,accounts:i.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters-map":h.value,onTeamAdded:T,onTeamUpdated:A,onTeamDeleted:N},null,8,["user-id","data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map"])]),_:1}),r(Mx,{value:"add-master",key:"add-master"},{default:j(()=>[r(ix,{"gacha-masters":c.value,onMasterAdded:V},null,8,["gacha-masters"])]),_:1}),r(Mx,{value:"edit-master",key:"edit-master"},{default:j(()=>[r(lx,{"character-masters":s.value,"gacha-masters":c.value,onMasterUpdated:V},null,8,["character-masters","gacha-masters"])]),_:1})]),_:1},8,["modelValue"])):($(),U("div",jx,[r(Wb,{indeterminate:"",color:"primary",size:"64",width:"4",class:"mb-6"}),n[4]||(n[4]=l("p",{class:"text-body-1 text-grey-darken-1"}," ... ",-1))]))])):($(),U("div",zx,[r(cb,{icon:"mdi-dragon",size:"80",color:"primary",class:"mb-6"}),n[6]||(n[6]=l("h1",{class:"text-h4 font-weight-medium text-primary mb-4"},"  ",-1)),n[7]||(n[7]=l("p",{class:"text-body-1 text-grey-darken-1 mb-8"},"  ",-1)),r(xw,{color:"primary",size:"large",variant:"outlined",class:"px-8",onClick:I},{default:j(()=>[r(cb,{icon:"mdi-login",class:"mr-2"}),n[5]||(n[5]=z("  ",-1))]),_:1,__:[5]})]))]),_:1})]),_:1})]),_:1}))}},[["__scopeId","data-v-a3ab6169"]]),Hx=zt({theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976d2",secondary:"#424242",accent:"#42a5f5",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3",surface:"#ffffff",background:"#fafafa","on-surface":"#212121","on-background":"#212121"}}}},defaults:{VCard:{variant:"outlined",elevation:0,rounded:"md"},VBtn:{variant:"outlined",rounded:"md",class:"text-none font-weight-medium"},VTextField:{variant:"outlined",density:"compact",rounded:"md"},VSelect:{variant:"outlined",density:"compact",rounded:"md"},VList:{density:"compact"},VListItem:{rounded:"sm"},VChip:{rounded:"md",variant:"outlined"},VAvatar:{rounded:"md"},VIcon:{size:"20"}}});const Kx=new class{constructor(){this.markers=new Map,this.measures=new Map}startMarker(e){this.markers.set(e,performance.now()),performance.mark(`${e}-start`)}endMarker(e){const t=this.markers.get(e);if(t){const n=performance.now()-t;return performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`),this.measures.set(e,n),n}return 0}getMeasure(e){return this.measures.get(e)}getAllMeasures(){return Object.fromEntries(this.measures)}clear(){this.markers.clear(),this.measures.clear()}};Kx.startMarker("app-init");const Gx=te(qx);Gx.use(Hx),((e={})=>{const{loadTime:t=3e3,memoryUsage:n=50}=e;window.addEventListener("load",()=>{performance.now();e.loadTime}),"memory"in performance&&setInterval(()=>{const t=performance.memory;t.usedJSHeapSize,t.jsHeapSizeLimit;e.memoryUsage},1e4)})({loadTime:2e3,memoryUsage:60}),Gx.mount("#app"),Kx.endMarker("app-init");export{av as P,Ov as R,lm as W,Jf as _,ev as a,Fv as b,tm as c,em as d,zy as g,Na as i,Zf as m,am as p,$v as x,nm as y};
