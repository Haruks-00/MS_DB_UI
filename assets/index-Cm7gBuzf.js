(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Fg(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const at={},zo=[],qr=()=>{},kx=()=>!1,Wd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Bg=t=>t.startsWith("onUpdate:"),Ut=Object.assign,$g=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ax=Object.prototype.hasOwnProperty,Ze=(t,e)=>Ax.call(t,e),De=Array.isArray,Ho=t=>Gd(t)==="[object Map]",b_=t=>Gd(t)==="[object Set]",Ne=t=>typeof t=="function",St=t=>typeof t=="string",Si=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",I_=t=>(ct(t)||Ne(t))&&Ne(t.then)&&Ne(t.catch),__=Object.prototype.toString,Gd=t=>__.call(t),xx=t=>Gd(t).slice(8,-1),S_=t=>Gd(t)==="[object Object]",Ug=t=>St(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gl=Fg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kd=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Dx=/-(\w)/g,xn=Kd(t=>t.replace(Dx,(e,n)=>n?n.toUpperCase():"")),Px=/\B([A-Z])/g,bo=Kd(t=>t.replace(Px,"-$1").toLowerCase()),Ti=Kd(t=>t.charAt(0).toUpperCase()+t.slice(1)),mf=Kd(t=>t?`on${Ti(t)}`:""),Xi=(t,e)=>!Object.is(t,e),gf=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},dm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Nx=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Rx=t=>{const e=St(t)?Number(t):NaN;return isNaN(e)?t:e};let Oy;const Yd=()=>Oy||(Oy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xe(t){if(De(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=St(r)?Lx(r):xe(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(St(t)||ct(t))return t}const Ox=/;(?![^(]*\))/g,Mx=/:([^]+)/,Vx=/\/\*[^]*?\*\//g;function Lx(t){const e={};return t.replace(Vx,"").split(Ox).forEach(n=>{if(n){const r=n.split(Mx);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ce(t){let e="";if(St(t))e=t;else if(De(t))for(let n=0;n<t.length;n++){const r=ce(t[n]);r&&(e+=r+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Fx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bx=Fg(Fx);function T_(t){return!!t||t===""}const E_=t=>!!(t&&t.__v_isRef===!0),qe=t=>St(t)?t:t==null?"":De(t)||ct(t)&&(t.toString===__||!Ne(t.toString))?E_(t)?qe(t.value):JSON.stringify(t,C_,2):String(t),C_=(t,e)=>E_(e)?C_(t,e.value):Ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[vf(r,s)+" =>"]=i,n),{})}:b_(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>vf(n))}:Si(e)?vf(e):ct(e)&&!De(e)&&!S_(e)?String(e):e,vf=(t,e="")=>{var n;return Si(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class k_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=fn;try{return fn=this,e()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Rl(t){return new k_(t)}function A_(){return fn}function dn(t,e=!1){fn&&fn.cleanups.push(t)}let ut;const pf=new WeakSet;class x_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pf.has(this)&&(pf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||P_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,My(this),N_(this);const e=ut,n=pr;ut=this,pr=!0;try{return this.fn()}finally{R_(this),ut=e,pr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zg(e);this.deps=this.depsTail=void 0,My(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hm(this)&&this.run()}get dirty(){return hm(this)}}let D_=0,vl,pl;function P_(t,e=!1){if(t.flags|=8,e){t.next=pl,pl=t;return}t.next=vl,vl=t}function jg(){D_++}function qg(){if(--D_>0)return;if(pl){let e=pl;for(pl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;vl;){let e=vl;for(vl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function N_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function R_(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),zg(r),$x(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function hm(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(O_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function O_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ol)||(t.globalVersion=Ol,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!hm(t))))return;t.flags|=2;const e=t.dep,n=ut,r=pr;ut=t,pr=!0;try{N_(t);const i=t.fn(t._value);(e.version===0||Xi(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ut=n,pr=r,R_(t),t.flags&=-3}}function zg(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)zg(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $x(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let pr=!0;const M_=[];function gi(){M_.push(pr),pr=!1}function vi(){const t=M_.pop();pr=t===void 0?!0:t}function My(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ut;ut=void 0;try{e()}finally{ut=n}}}let Ol=0;class Ux{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ut||!pr||ut===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ut)n=this.activeLink=new Ux(ut,this),ut.deps?(n.prevDep=ut.depsTail,ut.depsTail.nextDep=n,ut.depsTail=n):ut.deps=ut.depsTail=n,V_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ut.depsTail,n.nextDep=void 0,ut.depsTail.nextDep=n,ut.depsTail=n,ut.deps===n&&(ut.deps=r)}return n}trigger(e){this.version++,Ol++,this.notify(e)}notify(e){jg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{qg()}}}function V_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)V_(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Kc=new WeakMap,Qs=Symbol(""),fm=Symbol(""),Ml=Symbol("");function mn(t,e,n){if(pr&&ut){let r=Kc.get(t);r||Kc.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Hg),i.map=r,i.key=n),i.track()}}function ii(t,e,n,r,i,s){const o=Kc.get(t);if(!o){Ol++;return}const a=l=>{l&&l.trigger()};if(jg(),e==="clear")o.forEach(a);else{const l=De(t),u=l&&Ug(n);if(l&&n==="length"){const c=Number(r);o.forEach((d,h)=>{(h==="length"||h===Ml||!Si(h)&&h>=c)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Ml)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Qs)),Ho(t)&&a(o.get(fm)));break;case"delete":l||(a(o.get(Qs)),Ho(t)&&a(o.get(fm)));break;case"set":Ho(t)&&a(o.get(Qs));break}}qg()}function jx(t,e){const n=Kc.get(t);return n&&n.get(e)}function xo(t){const e=ke(t);return e===t?e:(mn(e,"iterate",Ml),ir(t)?e:e.map(Zt))}function Qd(t){return mn(t=ke(t),"iterate",Ml),t}const qx={__proto__:null,[Symbol.iterator](){return yf(this,Symbol.iterator,Zt)},concat(...t){return xo(this).concat(...t.map(e=>De(e)?xo(e):e))},entries(){return yf(this,"entries",t=>(t[1]=Zt(t[1]),t))},every(t,e){return ti(this,"every",t,e,void 0,arguments)},filter(t,e){return ti(this,"filter",t,e,n=>n.map(Zt),arguments)},find(t,e){return ti(this,"find",t,e,Zt,arguments)},findIndex(t,e){return ti(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ti(this,"findLast",t,e,Zt,arguments)},findLastIndex(t,e){return ti(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ti(this,"forEach",t,e,void 0,arguments)},includes(...t){return wf(this,"includes",t)},indexOf(...t){return wf(this,"indexOf",t)},join(t){return xo(this).join(t)},lastIndexOf(...t){return wf(this,"lastIndexOf",t)},map(t,e){return ti(this,"map",t,e,void 0,arguments)},pop(){return Wa(this,"pop")},push(...t){return Wa(this,"push",t)},reduce(t,...e){return Vy(this,"reduce",t,e)},reduceRight(t,...e){return Vy(this,"reduceRight",t,e)},shift(){return Wa(this,"shift")},some(t,e){return ti(this,"some",t,e,void 0,arguments)},splice(...t){return Wa(this,"splice",t)},toReversed(){return xo(this).toReversed()},toSorted(t){return xo(this).toSorted(t)},toSpliced(...t){return xo(this).toSpliced(...t)},unshift(...t){return Wa(this,"unshift",t)},values(){return yf(this,"values",Zt)}};function yf(t,e,n){const r=Qd(t),i=r[e]();return r!==t&&!ir(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const zx=Array.prototype;function ti(t,e,n,r,i,s){const o=Qd(t),a=o!==t&&!ir(t),l=o[e];if(l!==zx[e]){const d=l.apply(t,s);return a?Zt(d):d}let u=n;o!==t&&(a?u=function(d,h){return n.call(this,Zt(d),h,t)}:n.length>2&&(u=function(d,h){return n.call(this,d,h,t)}));const c=l.call(o,u,r);return a&&i?i(c):c}function Vy(t,e,n,r){const i=Qd(t);let s=n;return i!==t&&(ir(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Zt(a),l,t)}),i[e](s,...r)}function wf(t,e,n){const r=ke(t);mn(r,"iterate",Ml);const i=r[e](...n);return(i===-1||i===!1)&&Kg(n[0])?(n[0]=ke(n[0]),r[e](...n)):i}function Wa(t,e,n=[]){gi(),jg();const r=ke(t)[e].apply(t,n);return qg(),vi(),r}const Hx=Fg("__proto__,__v_isRef,__isVue"),L_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Si));function Wx(t){Si(t)||(t=String(t));const e=ke(this);return mn(e,"has",t),e.hasOwnProperty(t)}class F_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?n1:j_:s?U_:$_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=De(e);if(!i){let l;if(o&&(l=qx[n]))return l;if(n==="hasOwnProperty")return Wx}const a=Reflect.get(e,n,Nt(e)?e:r);return(Si(n)?L_.has(n):Hx(n))||(i||mn(e,"get",n),s)?a:Nt(a)?o&&Ug(n)?a:a.value:ct(a)?i?Su(a):wt(a):a}}class B_ extends F_{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=es(s);if(!ir(r)&&!es(r)&&(s=ke(s),r=ke(r)),!De(e)&&Nt(s)&&!Nt(r))return l?!1:(s.value=r,!0)}const o=De(e)&&Ug(n)?Number(n)<e.length:Ze(e,n),a=Reflect.set(e,n,r,Nt(e)?e:i);return e===ke(i)&&(o?Xi(r,s)&&ii(e,"set",n,r):ii(e,"add",n,r)),a}deleteProperty(e,n){const r=Ze(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ii(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Si(n)||!L_.has(n))&&mn(e,"has",n),r}ownKeys(e){return mn(e,"iterate",De(e)?"length":Qs),Reflect.ownKeys(e)}}class Gx extends F_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Kx=new B_,Yx=new Gx,Qx=new B_(!0);const mm=t=>t,lc=t=>Reflect.getPrototypeOf(t);function Xx(t,e,n){return function(...r){const i=this.__v_raw,s=ke(i),o=Ho(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?mm:e?Yc:Zt;return!e&&mn(s,"iterate",l?fm:Qs),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:a?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function uc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Jx(t,e){const n={get(i){const s=this.__v_raw,o=ke(s),a=ke(i);t||(Xi(i,a)&&mn(o,"get",i),mn(o,"get",a));const{has:l}=lc(o),u=e?mm:t?Yc:Zt;if(l.call(o,i))return u(s.get(i));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&mn(ke(i),"iterate",Qs),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=ke(s),a=ke(i);return t||(Xi(i,a)&&mn(o,"has",i),mn(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=ke(a),u=e?mm:t?Yc:Zt;return!t&&mn(l,"iterate",Qs),a.forEach((c,d)=>i.call(s,u(c),u(d),o))}};return Ut(n,t?{add:uc("add"),set:uc("set"),delete:uc("delete"),clear:uc("clear")}:{add(i){!e&&!ir(i)&&!es(i)&&(i=ke(i));const s=ke(this);return lc(s).has.call(s,i)||(s.add(i),ii(s,"add",i,i)),this},set(i,s){!e&&!ir(s)&&!es(s)&&(s=ke(s));const o=ke(this),{has:a,get:l}=lc(o);let u=a.call(o,i);u||(i=ke(i),u=a.call(o,i));const c=l.call(o,i);return o.set(i,s),u?Xi(s,c)&&ii(o,"set",i,s):ii(o,"add",i,s),this},delete(i){const s=ke(this),{has:o,get:a}=lc(s);let l=o.call(s,i);l||(i=ke(i),l=o.call(s,i)),a&&a.call(s,i);const u=s.delete(i);return l&&ii(s,"delete",i,void 0),u},clear(){const i=ke(this),s=i.size!==0,o=i.clear();return s&&ii(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Xx(i,t,e)}),n}function Wg(t,e){const n=Jx(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ze(n,i)&&i in r?n:r,i,s)}const Zx={get:Wg(!1,!1)},e1={get:Wg(!1,!0)},t1={get:Wg(!0,!1)};const $_=new WeakMap,U_=new WeakMap,j_=new WeakMap,n1=new WeakMap;function r1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function i1(t){return t.__v_skip||!Object.isExtensible(t)?0:r1(xx(t))}function wt(t){return es(t)?t:Gg(t,!1,Kx,Zx,$_)}function s1(t){return Gg(t,!1,Qx,e1,U_)}function Su(t){return Gg(t,!0,Yx,t1,j_)}function Gg(t,e,n,r,i){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i1(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Wo(t){return es(t)?Wo(t.__v_raw):!!(t&&t.__v_isReactive)}function es(t){return!!(t&&t.__v_isReadonly)}function ir(t){return!!(t&&t.__v_isShallow)}function Kg(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function q_(t){return!Ze(t,"__v_skip")&&Object.isExtensible(t)&&dm(t,"__v_skip",!0),t}const Zt=t=>ct(t)?wt(t):t,Yc=t=>ct(t)?Su(t):t;function Nt(t){return t?t.__v_isRef===!0:!1}function te(t){return z_(t,!1)}function ge(t){return z_(t,!0)}function z_(t,e){return Nt(t)?t:new o1(t,e)}class o1{constructor(e,n){this.dep=new Hg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:Zt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ir(e)||es(e);e=r?e:ke(e),Xi(e,n)&&(this._rawValue=e,this._value=r?e:Zt(e),this.dep.trigger())}}function oi(t){return Nt(t)?t.value:t}function Kr(t){return Ne(t)?t():oi(t)}const a1={get:(t,e,n)=>e==="__v_raw"?t:oi(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Nt(i)&&!Nt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function H_(t){return Wo(t)?t:new Proxy(t,a1)}function W_(t){const e=De(t)?new Array(t.length):{};for(const n in t)e[n]=G_(t,n);return e}class l1{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return jx(ke(this._object),this._key)}}class u1{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function V(t,e,n){return Nt(t)?t:Ne(t)?new u1(t):ct(t)&&arguments.length>1?G_(t,e,n):te(t)}function G_(t,e,n){const r=t[e];return Nt(r)?r:new l1(t,e,n)}class c1{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Hg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ol-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ut!==this)return P_(this,!0),!0}get value(){const e=this.dep.track();return O_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function d1(t,e,n=!1){let r,i;return Ne(t)?r=t:(r=t.get,i=t.set),new c1(r,i,n)}const cc={},Qc=new WeakMap;let Ms;function h1(t,e=!1,n=Ms){if(n){let r=Qc.get(n);r||Qc.set(n,r=[]),r.push(t)}}function f1(t,e,n=at){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,u=b=>i?b:ir(b)||i===!1||i===0?si(b,1):si(b);let c,d,h,f,m=!1,g=!1;if(Nt(t)?(d=()=>t.value,m=ir(t)):Wo(t)?(d=()=>u(t),m=!0):De(t)?(g=!0,m=t.some(b=>Wo(b)||ir(b)),d=()=>t.map(b=>{if(Nt(b))return b.value;if(Wo(b))return u(b);if(Ne(b))return l?l(b,2):b()})):Ne(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){gi();try{h()}finally{vi()}}const b=Ms;Ms=c;try{return l?l(t,3,[f]):t(f)}finally{Ms=b}}:d=qr,e&&i){const b=d,T=i===!0?1/0:i;d=()=>si(b(),T)}const v=A_(),y=()=>{c.stop(),v&&v.active&&$g(v.effects,c)};if(s&&e){const b=e;e=(...T)=>{b(...T),y()}}let w=g?new Array(t.length).fill(cc):cc;const _=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(e){const T=c.run();if(i||m||(g?T.some((E,A)=>Xi(E,w[A])):Xi(T,w))){h&&h();const E=Ms;Ms=c;try{const A=[T,w===cc?void 0:g&&w[0]===cc?[]:w,f];w=T,l?l(e,3,A):e(...A)}finally{Ms=E}}}else c.run()};return a&&a(_),c=new x_(d),c.scheduler=o?()=>o(_,!1):_,f=b=>h1(b,!1,c),h=c.onStop=()=>{const b=Qc.get(c);if(b){if(l)l(b,4);else for(const T of b)T();Qc.delete(c)}},e?r?_(!0):w=c.run():o?o(_.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function si(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Nt(t))si(t.value,e,n);else if(De(t))for(let r=0;r<t.length;r++)si(t[r],e,n);else if(b_(t)||Ho(t))t.forEach(r=>{si(r,e,n)});else if(S_(t)){for(const r in t)si(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&si(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tu(t,e,n,r){try{return r?t(...r):t()}catch(i){Xd(i,e,n)}}function wr(t,e,n,r){if(Ne(t)){const i=Tu(t,e,n,r);return i&&I_(i)&&i.catch(s=>{Xd(s,e,n)}),i}if(De(t)){const i=[];for(let s=0;s<t.length;s++)i.push(wr(t[s],e,n,r));return i}}function Xd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||at;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}a=a.parent}if(s){gi(),Tu(s,null,10,[t,l,u]),vi();return}}m1(t,n,i,r,o)}function m1(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Tn=[];let Dr=-1;const Go=[];let qi=null,Lo=0;const K_=Promise.resolve();let Xc=null;function sn(t){const e=Xc||K_;return t?e.then(this?t.bind(this):t):e}function g1(t){let e=Dr+1,n=Tn.length;for(;e<n;){const r=e+n>>>1,i=Tn[r],s=Vl(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Yg(t){if(!(t.flags&1)){const e=Vl(t),n=Tn[Tn.length-1];!n||!(t.flags&2)&&e>=Vl(n)?Tn.push(t):Tn.splice(g1(e),0,t),t.flags|=1,Y_()}}function Y_(){Xc||(Xc=K_.then(X_))}function v1(t){De(t)?Go.push(...t):qi&&t.id===-1?qi.splice(Lo+1,0,t):t.flags&1||(Go.push(t),t.flags|=1),Y_()}function Ly(t,e,n=Dr+1){for(;n<Tn.length;n++){const r=Tn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Tn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Q_(t){if(Go.length){const e=[...new Set(Go)].sort((n,r)=>Vl(n)-Vl(r));if(Go.length=0,qi){qi.push(...e);return}for(qi=e,Lo=0;Lo<qi.length;Lo++){const n=qi[Lo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}qi=null,Lo=0}}const Vl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function X_(t){try{for(Dr=0;Dr<Tn.length;Dr++){const e=Tn[Dr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Tu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Dr<Tn.length;Dr++){const e=Tn[Dr];e&&(e.flags&=-2)}Dr=-1,Tn.length=0,Q_(),Xc=null,(Tn.length||Go.length)&&X_()}}let rn=null,J_=null;function Jc(t){const e=rn;return rn=t,J_=t&&t.type.__scopeId||null,e}function R(t,e=rn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Xy(-1);const s=Jc(e);let o;try{o=t(...i)}finally{Jc(s),r._d&&Xy(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function yt(t,e){if(rn===null)return t;const n=th(rn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=at]=e[i];s&&(Ne(s)&&(s={mounted:s,updated:s}),s.deep&&si(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function xs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(gi(),wr(l,n,8,[t.el,a,t,e]),vi())}}const Z_=Symbol("_vte"),eS=t=>t.__isTeleport,yl=t=>t&&(t.disabled||t.disabled===""),Fy=t=>t&&(t.defer||t.defer===""),By=t=>typeof SVGElement<"u"&&t instanceof SVGElement,$y=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,gm=(t,e)=>{const n=t&&t.to;return St(n)?e?e(n):null:n},tS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:m,createText:g,createComment:v}}=u,y=yl(e.props);let{shapeFlag:w,children:_,dynamicChildren:b}=e;if(t==null){const T=e.el=g(""),E=e.anchor=g("");f(T,n,r),f(E,n,r);const A=(P,U)=>{w&16&&(i&&i.isCE&&(i.ce._teleportTarget=P),c(_,P,U,i,s,o,a,l))},D=()=>{const P=e.target=gm(e.props,m),U=nS(P,e,g,f);P&&(o!=="svg"&&By(P)?o="svg":o!=="mathml"&&$y(P)&&(o="mathml"),y||(A(P,U),Dc(e,!1)))};y&&(A(n,E),Dc(e,!0)),Fy(e.props)?(e.el.__isMounted=!1,In(()=>{D(),delete e.el.__isMounted},s)):D()}else{if(Fy(e.props)&&t.el.__isMounted===!1){In(()=>{tS.process(t,e,n,r,i,s,o,a,l,u)},s);return}e.el=t.el,e.targetStart=t.targetStart;const T=e.anchor=t.anchor,E=e.target=t.target,A=e.targetAnchor=t.targetAnchor,D=yl(t.props),P=D?n:E,U=D?T:A;if(o==="svg"||By(E)?o="svg":(o==="mathml"||$y(E))&&(o="mathml"),b?(h(t.dynamicChildren,b,P,i,s,o,a),tv(t,e,!0)):l||d(t,e,P,U,i,s,o,a,!1),y)D?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):dc(e,n,T,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const z=e.target=gm(e.props,m);z&&dc(e,z,null,u,0)}else D&&dc(e,E,A,u,1);Dc(e,y)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:d,props:h}=t;if(d&&(i(u),i(c)),s&&i(l),o&16){const f=s||!yl(h);for(let m=0;m<a.length;m++){const g=a[m];r(g,e,n,f,!!g.dynamicChildren)}}},move:dc,hydrate:p1};function dc(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=s===2;if(d&&r(o,e,n),(!d||yl(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,n,2);d&&r(a,e,n)}function p1(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},d){const h=e.target=gm(e.props,l);if(h){const f=yl(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(o(t),e,a(t),n,r,i,s),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||nS(h,e,c,u),d(m&&o(m),e,h,n,r,i,s)}Dc(e,f)}return e.anchor&&o(e.anchor)}const y1=tS;function Dc(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function nS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[Z_]=s,t&&(r(i,t),r(s,t)),s}const zi=Symbol("_leaveCb"),hc=Symbol("_enterCb");function rS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ki(()=>{t.isMounted=!0}),Qn(()=>{t.isUnmounting=!0}),t}const tr=[Function,Array],iS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tr,onEnter:tr,onAfterEnter:tr,onEnterCancelled:tr,onBeforeLeave:tr,onLeave:tr,onAfterLeave:tr,onLeaveCancelled:tr,onBeforeAppear:tr,onAppear:tr,onAfterAppear:tr,onAppearCancelled:tr},sS=t=>{const e=t.subTree;return e.component?sS(e.component):e},w1={name:"BaseTransition",props:iS,setup(t,{slots:e}){const n=ku(),r=rS();return()=>{const i=e.default&&Qg(e.default(),!0);if(!i||!i.length)return;const s=oS(i),o=ke(t),{mode:a}=o;if(r.isLeaving)return bf(s);const l=Uy(s);if(!l)return bf(s);let u=Ll(l,o,r,n,d=>u=d);l.type!==tn&&io(l,u);let c=n.subTree&&Uy(n.subTree);if(c&&c.type!==tn&&!Fs(l,c)&&sS(n).type!==tn){let d=Ll(c,o,r,n);if(io(c,d),a==="out-in"&&l.type!==tn)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},bf(s);a==="in-out"&&l.type!==tn?d.delayLeave=(h,f,m)=>{const g=aS(r,c);g[String(c.key)]=c,h[zi]=()=>{f(),h[zi]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{m(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function oS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==tn){e=n;break}}return e}const b1=w1;function aS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ll(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:w,onAppearCancelled:_}=e,b=String(t.key),T=aS(n,t),E=(P,U)=>{P&&wr(P,r,9,U)},A=(P,U)=>{const z=U[1];E(P,U),De(P)?P.every(k=>k.length<=1)&&z():P.length<=1&&z()},D={mode:o,persisted:a,beforeEnter(P){let U=l;if(!n.isMounted)if(s)U=v||l;else return;P[zi]&&P[zi](!0);const z=T[b];z&&Fs(t,z)&&z.el[zi]&&z.el[zi](),E(U,[P])},enter(P){let U=u,z=c,k=d;if(!n.isMounted)if(s)U=y||u,z=w||c,k=_||d;else return;let O=!1;const j=P[hc]=J=>{O||(O=!0,J?E(k,[P]):E(z,[P]),D.delayedLeave&&D.delayedLeave(),P[hc]=void 0)};U?A(U,[P,j]):j()},leave(P,U){const z=String(t.key);if(P[hc]&&P[hc](!0),n.isUnmounting)return U();E(h,[P]);let k=!1;const O=P[zi]=j=>{k||(k=!0,U(),j?E(g,[P]):E(m,[P]),P[zi]=void 0,T[z]===t&&delete T[z])};T[z]=t,f?A(f,[P,O]):O()},clone(P){const U=Ll(P,e,n,r,i);return i&&i(U),U}};return D}function bf(t){if(Jd(t))return t=pi(t),t.children=null,t}function Uy(t){if(!Jd(t))return eS(t.type)&&t.children?oS(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ne(n.default))return n.default()}}function io(t,e){t.shapeFlag&6&&t.component?(t.transition=e,io(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Qg(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ee?(o.patchFlag&128&&i++,r=r.concat(Qg(o.children,e,a))):(e||o.type!==tn)&&r.push(a!=null?pi(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function I1(t,e){return Ne(t)?Ut({name:t.name},e,{setup:t}):t}function Ei(){const t=ku();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function lS(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function wl(t,e,n,r,i=!1){if(De(t)){t.forEach((m,g)=>wl(m,e&&(De(e)?e[g]:e),n,r,i));return}if(Ko(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wl(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?th(r.component):r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===at?a.refs={}:a.refs,d=a.setupState,h=ke(d),f=d===at?()=>!1:m=>Ze(h,m);if(u!=null&&u!==l&&(St(u)?(c[u]=null,f(u)&&(d[u]=null)):Nt(u)&&(u.value=null)),Ne(l))Tu(l,a,12,[o,c]);else{const m=St(l),g=Nt(l);if(m||g){const v=()=>{if(t.f){const y=m?f(l)?d[l]:c[l]:l.value;i?De(y)&&$g(y,s):De(y)?y.includes(s)||y.push(s):m?(c[l]=[s],f(l)&&(d[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else m?(c[l]=o,f(l)&&(d[l]=o)):g&&(l.value=o,t.k&&(c[t.k]=o))};o?(v.id=-1,In(v,n)):v()}}}Yd().requestIdleCallback;Yd().cancelIdleCallback;const Ko=t=>!!t.type.__asyncLoader,Jd=t=>t.type.__isKeepAlive;function uS(t,e){cS(t,"a",e)}function Xg(t,e){cS(t,"da",e)}function cS(t,e,n=vn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Zd(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Jd(i.parent.vnode)&&_1(r,e,n,i),i=i.parent}}function _1(t,e,n,r){const i=Zd(e,t,r,!0);dS(()=>{$g(r[e],i)},n)}function Zd(t,e,n=vn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{gi();const a=Au(n),l=wr(e,n,t,o);return a(),vi(),l});return r?i.unshift(s):i.push(s),s}}const Ci=t=>(e,n=vn)=>{(!Bl||t==="sp")&&Zd(t,(...r)=>e(...r),n)},Eu=Ci("bm"),ki=Ci("m"),S1=Ci("bu"),Jg=Ci("u"),Qn=Ci("bum"),dS=Ci("um"),T1=Ci("sp"),E1=Ci("rtg"),C1=Ci("rtc");function k1(t,e=vn){Zd("ec",t,e)}const hS="components";function A1(t,e){return fS(hS,t,!0,e)||t}const x1=Symbol.for("v-ndc");function D1(t){return St(t)&&fS(hS,t,!1)||t}function fS(t,e,n=!0,r=!1){const i=rn||vn;if(i){const s=i.type;{const a=vD(s,!1);if(a&&(a===e||a===xn(e)||a===Ti(xn(e))))return s}const o=jy(i[t]||s[t],e)||jy(i.appContext[t],e);return!o&&r?s:o}}function jy(t,e){return t&&(t[e]||t[xn(e)]||t[Ti(xn(e))])}function gr(t,e,n,r){let i;const s=n,o=De(t);if(o||St(t)){const a=o&&Wo(t);let l=!1,u=!1;a&&(l=!ir(t),u=es(t),t=Qd(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?u?Yc(Zt(t[c])):Zt(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(ct(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[l]=e(t[c],c,l,s)}}else i=[];return i}function mS(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(De(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function P1(t,e,n={},r,i){if(rn.ce||rn.parent&&Ko(rn.parent)&&rn.parent.ce)return n.name=e,we(),$t(Ee,null,[p("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),we();const o=s&&gS(s(n)),a=n.key||o&&o.key,l=$t(Ee,{key:(a&&!Si(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function gS(t){return t.some(e=>oa(e)?!(e.type===tn||e.type===Ee&&!gS(e.children)):!0)?t:null}const vm=t=>t?RS(t)?th(t):vm(t.parent):null,bl=Ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vm(t.parent),$root:t=>vm(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>pS(t),$forceUpdate:t=>t.f||(t.f=()=>{Yg(t.update)}),$nextTick:t=>t.n||(t.n=sn.bind(t.proxy)),$watch:t=>J1.bind(t)}),If=(t,e)=>t!==at&&!t.__isScriptSetup&&Ze(t,e),N1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(If(r,e))return o[e]=1,r[e];if(i!==at&&Ze(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Ze(u,e))return o[e]=3,s[e];if(n!==at&&Ze(n,e))return o[e]=4,n[e];pm&&(o[e]=0)}}const c=bl[e];let d,h;if(c)return e==="$attrs"&&mn(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==at&&Ze(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Ze(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return If(i,e)?(i[e]=n,!0):r!==at&&Ze(r,e)?(r[e]=n,!0):Ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==at&&Ze(t,o)||If(e,o)||(a=s[0])&&Ze(a,o)||Ze(r,o)||Ze(bl,o)||Ze(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qy(t){return De(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let pm=!0;function R1(t){const e=pS(t),n=t.proxy,r=t.ctx;pm=!1,e.beforeCreate&&zy(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:v,beforeDestroy:y,beforeUnmount:w,destroyed:_,unmounted:b,render:T,renderTracked:E,renderTriggered:A,errorCaptured:D,serverPrefetch:P,expose:U,inheritAttrs:z,components:k,directives:O,filters:j}=e;if(u&&O1(u,r,null),o)for(const fe in o){const de=o[fe];Ne(de)&&(r[fe]=de.bind(n))}if(i){const fe=i.call(n,n);ct(fe)&&(t.data=wt(fe))}if(pm=!0,s)for(const fe in s){const de=s[fe],Fe=Ne(de)?de.bind(n,n):Ne(de.get)?de.get.bind(n,n):qr,L=!Ne(de)&&Ne(de.set)?de.set.bind(n):qr,F=x({get:Fe,set:L});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>F.value,set:$=>F.value=$})}if(a)for(const fe in a)vS(a[fe],r,n,fe);if(l){const fe=Ne(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(de=>{Kt(de,fe[de])})}c&&zy(c,t,"c");function ee(fe,de){De(de)?de.forEach(Fe=>fe(Fe.bind(n))):de&&fe(de.bind(n))}if(ee(Eu,d),ee(ki,h),ee(S1,f),ee(Jg,m),ee(uS,g),ee(Xg,v),ee(k1,D),ee(C1,E),ee(E1,A),ee(Qn,w),ee(dS,b),ee(T1,P),De(U))if(U.length){const fe=t.exposed||(t.exposed={});U.forEach(de=>{Object.defineProperty(fe,de,{get:()=>n[de],set:Fe=>n[de]=Fe,enumerable:!0})})}else t.exposed||(t.exposed={});T&&t.render===qr&&(t.render=T),z!=null&&(t.inheritAttrs=z),k&&(t.components=k),O&&(t.directives=O),P&&lS(t)}function O1(t,e,n=qr){De(t)&&(t=ym(t));for(const r in t){const i=t[r];let s;ct(i)?"default"in i?s=et(i.from||r,i.default,!0):s=et(i.from||r):s=et(i),Nt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zy(t,e,n){wr(De(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function vS(t,e,n,r){let i=r.includes(".")?AS(n,r):()=>n[r];if(St(t)){const s=e[t];Ne(s)&&Ie(i,s)}else if(Ne(t))Ie(i,t.bind(n));else if(ct(t))if(De(t))t.forEach(s=>vS(s,e,n,r));else{const s=Ne(t.handler)?t.handler.bind(n):e[t.handler];Ne(s)&&Ie(i,s,t)}}function pS(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>Zc(l,u,o,!0)),Zc(l,e,o)),ct(e)&&s.set(e,l),l}function Zc(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Zc(t,s,n,!0),i&&i.forEach(o=>Zc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=M1[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const M1={data:Hy,props:Wy,emits:Wy,methods:al,computed:al,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,beforeUnmount:bn,destroyed:bn,unmounted:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:al,directives:al,watch:L1,provide:Hy,inject:V1};function Hy(t,e){return e?t?function(){return Ut(Ne(t)?t.call(this,this):t,Ne(e)?e.call(this,this):e)}:e:t}function V1(t,e){return al(ym(t),ym(e))}function ym(t){if(De(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bn(t,e){return t?[...new Set([].concat(t,e))]:e}function al(t,e){return t?Ut(Object.create(null),t,e):e}function Wy(t,e){return t?De(t)&&De(e)?[...new Set([...t,...e])]:Ut(Object.create(null),qy(t),qy(e??{})):e}function L1(t,e){if(!t)return e;if(!e)return t;const n=Ut(Object.create(null),t);for(const r in e)n[r]=bn(t[r],e[r]);return n}function yS(){return{app:null,config:{isNativeTag:kx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let F1=0;function B1(t,e){return function(r,i=null){Ne(r)||(r=Ut({},r)),i!=null&&!ct(i)&&(i=null);const s=yS(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:F1++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:yD,get config(){return s.config},set config(c){},use(c,...d){return o.has(c)||(c&&Ne(c.install)?(o.add(c),c.install(u,...d)):Ne(c)&&(o.add(c),c(u,...d))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,d){return d?(s.components[c]=d,u):s.components[c]},directive(c,d){return d?(s.directives[c]=d,u):s.directives[c]},mount(c,d,h){if(!l){const f=u._ceVNode||p(r,i);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),t(f,c,h),l=!0,u._container=c,c.__vue_app__=u,th(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(wr(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return s.provides[c]=d,u},runWithContext(c){const d=Yo;Yo=u;try{return c()}finally{Yo=d}}};return u}}let Yo=null;function Kt(t,e){if(vn){let n=vn.provides;const r=vn.parent&&vn.parent.provides;r===n&&(n=vn.provides=Object.create(r)),n[t]=e}}function et(t,e,n=!1){const r=ku();if(r||Yo){let i=Yo?Yo._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ne(e)?e.call(r&&r.proxy):e}}const wS={},bS=()=>Object.create(wS),IS=t=>Object.getPrototypeOf(t)===wS;function $1(t,e,n,r=!1){const i={},s=bS();t.propsDefaults=Object.create(null),_S(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:s1(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function U1(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=ke(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(eh(t.emitsOptions,h))continue;const f=e[h];if(l)if(Ze(s,h))f!==s[h]&&(s[h]=f,u=!0);else{const m=xn(h);i[m]=wm(l,a,m,f,t,!1)}else f!==s[h]&&(s[h]=f,u=!0)}}}else{_S(t,e,i,s)&&(u=!0);let c;for(const d in a)(!e||!Ze(e,d)&&((c=bo(d))===d||!Ze(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(i[d]=wm(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Ze(e,d))&&(delete s[d],u=!0)}u&&ii(t.attrs,"set","")}function _S(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gl(l))continue;const u=e[l];let c;i&&Ze(i,c=xn(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:eh(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=ke(n),u=a||at;for(let c=0;c<s.length;c++){const d=s[c];n[d]=wm(i,l,d,u[d],t,!Ze(u,d))}}return o}function wm(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ze(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(l)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const c=Au(i);r=u[n]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===bo(n))&&(r=!0))}return r}const j1=new WeakMap;function SS(t,e,n=!1){const r=n?j1:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ne(t)){const c=d=>{l=!0;const[h,f]=SS(d,e,!0);Ut(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return ct(t)&&r.set(t,zo),zo;if(De(s))for(let c=0;c<s.length;c++){const d=xn(s[c]);Gy(d)&&(o[d]=at)}else if(s)for(const c in s){const d=xn(c);if(Gy(d)){const h=s[c],f=o[d]=De(h)||Ne(h)?{type:h}:Ut({},h),m=f.type;let g=!1,v=!0;if(De(m))for(let y=0;y<m.length;++y){const w=m[y],_=Ne(w)&&w.name;if(_==="Boolean"){g=!0;break}else _==="String"&&(v=!1)}else g=Ne(m)&&m.name==="Boolean";f[0]=g,f[1]=v,(g||Ze(f,"default"))&&a.push(d)}}const u=[o,a];return ct(t)&&r.set(t,u),u}function Gy(t){return t[0]!=="$"&&!gl(t)}const Zg=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",ev=t=>De(t)?t.map(Pr):[Pr(t)],q1=(t,e,n)=>{if(e._n)return e;const r=R((...i)=>ev(e(...i)),n);return r._c=!1,r},TS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Zg(i))continue;const s=t[i];if(Ne(s))e[i]=q1(i,s,r);else if(s!=null){const o=ev(s);e[i]=()=>o}}},ES=(t,e)=>{const n=ev(e);t.slots.default=()=>n},CS=(t,e,n)=>{for(const r in e)(n||!Zg(r))&&(t[r]=e[r])},z1=(t,e,n)=>{const r=t.slots=bS();if(t.vnode.shapeFlag&32){const i=e.__;i&&dm(r,"__",i,!0);const s=e._;s?(CS(r,e,n),n&&dm(r,"_",s,!0)):TS(e,r)}else e&&ES(t,e)},H1=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=at;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:CS(i,e,n):(s=!e.$stable,TS(e,i)),o=e}else e&&(ES(t,e),o={default:1});if(s)for(const a in i)!Zg(a)&&o[a]==null&&delete i[a]},In=sD;function W1(t){return G1(t)}function G1(t,e){const n=Yd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=qr,insertStaticContent:m}=t,g=(I,S,B,Y=null,H=null,K=null,se=void 0,re=null,Z=!!S.dynamicChildren)=>{if(I===S)return;I&&!Fs(I,S)&&(Y=ve(I),$(I,H,K,!0),I=null),S.patchFlag===-2&&(Z=!1,S.dynamicChildren=null);const{type:Q,ref:Te,shapeFlag:ue}=S;switch(Q){case Cu:v(I,S,B,Y);break;case tn:y(I,S,B,Y);break;case Sf:I==null&&w(S,B,Y,se);break;case Ee:k(I,S,B,Y,H,K,se,re,Z);break;default:ue&1?T(I,S,B,Y,H,K,se,re,Z):ue&6?O(I,S,B,Y,H,K,se,re,Z):(ue&64||ue&128)&&Q.process(I,S,B,Y,H,K,se,re,Z,ot)}Te!=null&&H?wl(Te,I&&I.ref,K,S||I,!S):Te==null&&I&&I.ref!=null&&wl(I.ref,null,K,I,!0)},v=(I,S,B,Y)=>{if(I==null)r(S.el=a(S.children),B,Y);else{const H=S.el=I.el;S.children!==I.children&&u(H,S.children)}},y=(I,S,B,Y)=>{I==null?r(S.el=l(S.children||""),B,Y):S.el=I.el},w=(I,S,B,Y)=>{[I.el,I.anchor]=m(I.children,S,B,Y,I.el,I.anchor)},_=({el:I,anchor:S},B,Y)=>{let H;for(;I&&I!==S;)H=h(I),r(I,B,Y),I=H;r(S,B,Y)},b=({el:I,anchor:S})=>{let B;for(;I&&I!==S;)B=h(I),i(I),I=B;i(S)},T=(I,S,B,Y,H,K,se,re,Z)=>{S.type==="svg"?se="svg":S.type==="math"&&(se="mathml"),I==null?E(S,B,Y,H,K,se,re,Z):P(I,S,H,K,se,re,Z)},E=(I,S,B,Y,H,K,se,re)=>{let Z,Q;const{props:Te,shapeFlag:ue,transition:_e,dirs:Re}=I;if(Z=I.el=o(I.type,K,Te&&Te.is,Te),ue&8?c(Z,I.children):ue&16&&D(I.children,Z,null,Y,H,_f(I,K),se,re),Re&&xs(I,null,Y,"created"),A(Z,I,I.scopeId,se,Y),Te){for(const lt in Te)lt!=="value"&&!gl(lt)&&s(Z,lt,null,Te[lt],K,Y);"value"in Te&&s(Z,"value",null,Te.value,K),(Q=Te.onVnodeBeforeMount)&&Ar(Q,Y,I)}Re&&xs(I,null,Y,"beforeMount");const We=K1(H,_e);We&&_e.beforeEnter(Z),r(Z,S,B),((Q=Te&&Te.onVnodeMounted)||We||Re)&&In(()=>{Q&&Ar(Q,Y,I),We&&_e.enter(Z),Re&&xs(I,null,Y,"mounted")},H)},A=(I,S,B,Y,H)=>{if(B&&f(I,B),Y)for(let K=0;K<Y.length;K++)f(I,Y[K]);if(H){let K=H.subTree;if(S===K||DS(K.type)&&(K.ssContent===S||K.ssFallback===S)){const se=H.vnode;A(I,se,se.scopeId,se.slotScopeIds,H.parent)}}},D=(I,S,B,Y,H,K,se,re,Z=0)=>{for(let Q=Z;Q<I.length;Q++){const Te=I[Q]=re?Hi(I[Q]):Pr(I[Q]);g(null,Te,S,B,Y,H,K,se,re)}},P=(I,S,B,Y,H,K,se)=>{const re=S.el=I.el;let{patchFlag:Z,dynamicChildren:Q,dirs:Te}=S;Z|=I.patchFlag&16;const ue=I.props||at,_e=S.props||at;let Re;if(B&&Ds(B,!1),(Re=_e.onVnodeBeforeUpdate)&&Ar(Re,B,S,I),Te&&xs(S,I,B,"beforeUpdate"),B&&Ds(B,!0),(ue.innerHTML&&_e.innerHTML==null||ue.textContent&&_e.textContent==null)&&c(re,""),Q?U(I.dynamicChildren,Q,re,B,Y,_f(S,H),K):se||de(I,S,re,null,B,Y,_f(S,H),K,!1),Z>0){if(Z&16)z(re,ue,_e,B,H);else if(Z&2&&ue.class!==_e.class&&s(re,"class",null,_e.class,H),Z&4&&s(re,"style",ue.style,_e.style,H),Z&8){const We=S.dynamicProps;for(let lt=0;lt<We.length;lt++){const nt=We[lt],Dn=ue[nt],Pn=_e[nt];(Pn!==Dn||nt==="value")&&s(re,nt,Dn,Pn,H,B)}}Z&1&&I.children!==S.children&&c(re,S.children)}else!se&&Q==null&&z(re,ue,_e,B,H);((Re=_e.onVnodeUpdated)||Te)&&In(()=>{Re&&Ar(Re,B,S,I),Te&&xs(S,I,B,"updated")},Y)},U=(I,S,B,Y,H,K,se)=>{for(let re=0;re<S.length;re++){const Z=I[re],Q=S[re],Te=Z.el&&(Z.type===Ee||!Fs(Z,Q)||Z.shapeFlag&198)?d(Z.el):B;g(Z,Q,Te,null,Y,H,K,se,!0)}},z=(I,S,B,Y,H)=>{if(S!==B){if(S!==at)for(const K in S)!gl(K)&&!(K in B)&&s(I,K,S[K],null,H,Y);for(const K in B){if(gl(K))continue;const se=B[K],re=S[K];se!==re&&K!=="value"&&s(I,K,re,se,H,Y)}"value"in B&&s(I,"value",S.value,B.value,H)}},k=(I,S,B,Y,H,K,se,re,Z)=>{const Q=S.el=I?I.el:a(""),Te=S.anchor=I?I.anchor:a("");let{patchFlag:ue,dynamicChildren:_e,slotScopeIds:Re}=S;Re&&(re=re?re.concat(Re):Re),I==null?(r(Q,B,Y),r(Te,B,Y),D(S.children||[],B,Te,H,K,se,re,Z)):ue>0&&ue&64&&_e&&I.dynamicChildren?(U(I.dynamicChildren,_e,B,H,K,se,re),(S.key!=null||H&&S===H.subTree)&&tv(I,S,!0)):de(I,S,B,Te,H,K,se,re,Z)},O=(I,S,B,Y,H,K,se,re,Z)=>{S.slotScopeIds=re,I==null?S.shapeFlag&512?H.ctx.activate(S,B,Y,se,Z):j(S,B,Y,H,K,se,Z):J(I,S,Z)},j=(I,S,B,Y,H,K,se)=>{const re=I.component=dD(I,Y,H);if(Jd(I)&&(re.ctx.renderer=ot),hD(re,!1,se),re.asyncDep){if(H&&H.registerDep(re,ee,se),!I.el){const Z=re.subTree=p(tn);y(null,Z,S,B),I.placeholder=Z.el}}else ee(re,I,S,B,H,K,se)},J=(I,S,B)=>{const Y=S.component=I.component;if(rD(I,S,B))if(Y.asyncDep&&!Y.asyncResolved){fe(Y,S,B);return}else Y.next=S,Y.update();else S.el=I.el,Y.vnode=S},ee=(I,S,B,Y,H,K,se)=>{const re=()=>{if(I.isMounted){let{next:ue,bu:_e,u:Re,parent:We,vnode:lt}=I;{const Cr=kS(I);if(Cr){ue&&(ue.el=lt.el,fe(I,ue,se)),Cr.asyncDep.then(()=>{I.isUnmounted||re()});return}}let nt=ue,Dn;Ds(I,!1),ue?(ue.el=lt.el,fe(I,ue,se)):ue=lt,_e&&gf(_e),(Dn=ue.props&&ue.props.onVnodeBeforeUpdate)&&Ar(Dn,We,ue,lt),Ds(I,!0);const Pn=Yy(I),Er=I.subTree;I.subTree=Pn,g(Er,Pn,d(Er.el),ve(Er),I,H,K),ue.el=Pn.el,nt===null&&iD(I,Pn.el),Re&&In(Re,H),(Dn=ue.props&&ue.props.onVnodeUpdated)&&In(()=>Ar(Dn,We,ue,lt),H)}else{let ue;const{el:_e,props:Re}=S,{bm:We,m:lt,parent:nt,root:Dn,type:Pn}=I,Er=Ko(S);Ds(I,!1),We&&gf(We),!Er&&(ue=Re&&Re.onVnodeBeforeMount)&&Ar(ue,nt,S),Ds(I,!0);{Dn.ce&&Dn.ce._def.shadowRoot!==!1&&Dn.ce._injectChildStyle(Pn);const Cr=I.subTree=Yy(I);g(null,Cr,B,Y,I,H,K),S.el=Cr.el}if(lt&&In(lt,H),!Er&&(ue=Re&&Re.onVnodeMounted)){const Cr=S;In(()=>Ar(ue,nt,Cr),H)}(S.shapeFlag&256||nt&&Ko(nt.vnode)&&nt.vnode.shapeFlag&256)&&I.a&&In(I.a,H),I.isMounted=!0,S=B=Y=null}};I.scope.on();const Z=I.effect=new x_(re);I.scope.off();const Q=I.update=Z.run.bind(Z),Te=I.job=Z.runIfDirty.bind(Z);Te.i=I,Te.id=I.uid,Z.scheduler=()=>Yg(Te),Ds(I,!0),Q()},fe=(I,S,B)=>{S.component=I;const Y=I.vnode.props;I.vnode=S,I.next=null,U1(I,S.props,Y,B),H1(I,S.children,B),gi(),Ly(I),vi()},de=(I,S,B,Y,H,K,se,re,Z=!1)=>{const Q=I&&I.children,Te=I?I.shapeFlag:0,ue=S.children,{patchFlag:_e,shapeFlag:Re}=S;if(_e>0){if(_e&128){L(Q,ue,B,Y,H,K,se,re,Z);return}else if(_e&256){Fe(Q,ue,B,Y,H,K,se,re,Z);return}}Re&8?(Te&16&&Be(Q,H,K),ue!==Q&&c(B,ue)):Te&16?Re&16?L(Q,ue,B,Y,H,K,se,re,Z):Be(Q,H,K,!0):(Te&8&&c(B,""),Re&16&&D(ue,B,Y,H,K,se,re,Z))},Fe=(I,S,B,Y,H,K,se,re,Z)=>{I=I||zo,S=S||zo;const Q=I.length,Te=S.length,ue=Math.min(Q,Te);let _e;for(_e=0;_e<ue;_e++){const Re=S[_e]=Z?Hi(S[_e]):Pr(S[_e]);g(I[_e],Re,B,null,H,K,se,re,Z)}Q>Te?Be(I,H,K,!0,!1,ue):D(S,B,Y,H,K,se,re,Z,ue)},L=(I,S,B,Y,H,K,se,re,Z)=>{let Q=0;const Te=S.length;let ue=I.length-1,_e=Te-1;for(;Q<=ue&&Q<=_e;){const Re=I[Q],We=S[Q]=Z?Hi(S[Q]):Pr(S[Q]);if(Fs(Re,We))g(Re,We,B,null,H,K,se,re,Z);else break;Q++}for(;Q<=ue&&Q<=_e;){const Re=I[ue],We=S[_e]=Z?Hi(S[_e]):Pr(S[_e]);if(Fs(Re,We))g(Re,We,B,null,H,K,se,re,Z);else break;ue--,_e--}if(Q>ue){if(Q<=_e){const Re=_e+1,We=Re<Te?S[Re].el:Y;for(;Q<=_e;)g(null,S[Q]=Z?Hi(S[Q]):Pr(S[Q]),B,We,H,K,se,re,Z),Q++}}else if(Q>_e)for(;Q<=ue;)$(I[Q],H,K,!0),Q++;else{const Re=Q,We=Q,lt=new Map;for(Q=We;Q<=_e;Q++){const Un=S[Q]=Z?Hi(S[Q]):Pr(S[Q]);Un.key!=null&&lt.set(Un.key,Q)}let nt,Dn=0;const Pn=_e-We+1;let Er=!1,Cr=0;const Ha=new Array(Pn);for(Q=0;Q<Pn;Q++)Ha[Q]=0;for(Q=Re;Q<=ue;Q++){const Un=I[Q];if(Dn>=Pn){$(Un,H,K,!0);continue}let kr;if(Un.key!=null)kr=lt.get(Un.key);else for(nt=We;nt<=_e;nt++)if(Ha[nt-We]===0&&Fs(Un,S[nt])){kr=nt;break}kr===void 0?$(Un,H,K,!0):(Ha[kr-We]=Q+1,kr>=Cr?Cr=kr:Er=!0,g(Un,S[kr],B,null,H,K,se,re,Z),Dn++)}const Py=Er?Y1(Ha):zo;for(nt=Py.length-1,Q=Pn-1;Q>=0;Q--){const Un=We+Q,kr=S[Un],Ny=S[Un+1],Ry=Un+1<Te?Ny.el||Ny.placeholder:Y;Ha[Q]===0?g(null,kr,B,Ry,H,K,se,re,Z):Er&&(nt<0||Q!==Py[nt]?F(kr,B,Ry,2):nt--)}}},F=(I,S,B,Y,H=null)=>{const{el:K,type:se,transition:re,children:Z,shapeFlag:Q}=I;if(Q&6){F(I.component.subTree,S,B,Y);return}if(Q&128){I.suspense.move(S,B,Y);return}if(Q&64){se.move(I,S,B,ot);return}if(se===Ee){r(K,S,B);for(let ue=0;ue<Z.length;ue++)F(Z[ue],S,B,Y);r(I.anchor,S,B);return}if(se===Sf){_(I,S,B);return}if(Y!==2&&Q&1&&re)if(Y===0)re.beforeEnter(K),r(K,S,B),In(()=>re.enter(K),H);else{const{leave:ue,delayLeave:_e,afterLeave:Re}=re,We=()=>{I.ctx.isUnmounted?i(K):r(K,S,B)},lt=()=>{ue(K,()=>{We(),Re&&Re()})};_e?_e(K,We,lt):lt()}else r(K,S,B)},$=(I,S,B,Y=!1,H=!1)=>{const{type:K,props:se,ref:re,children:Z,dynamicChildren:Q,shapeFlag:Te,patchFlag:ue,dirs:_e,cacheIndex:Re}=I;if(ue===-2&&(H=!1),re!=null&&(gi(),wl(re,null,B,I,!0),vi()),Re!=null&&(S.renderCache[Re]=void 0),Te&256){S.ctx.deactivate(I);return}const We=Te&1&&_e,lt=!Ko(I);let nt;if(lt&&(nt=se&&se.onVnodeBeforeUnmount)&&Ar(nt,S,I),Te&6)ie(I.component,B,Y);else{if(Te&128){I.suspense.unmount(B,Y);return}We&&xs(I,null,S,"beforeUnmount"),Te&64?I.type.remove(I,S,B,ot,Y):Q&&!Q.hasOnce&&(K!==Ee||ue>0&&ue&64)?Be(Q,S,B,!1,!0):(K===Ee&&ue&384||!H&&Te&16)&&Be(Z,S,B),Y&&le(I)}(lt&&(nt=se&&se.onVnodeUnmounted)||We)&&In(()=>{nt&&Ar(nt,S,I),We&&xs(I,null,S,"unmounted")},B)},le=I=>{const{type:S,el:B,anchor:Y,transition:H}=I;if(S===Ee){Ue(B,Y);return}if(S===Sf){b(I);return}const K=()=>{i(B),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(I.shapeFlag&1&&H&&!H.persisted){const{leave:se,delayLeave:re}=H,Z=()=>se(B,K);re?re(I.el,K,Z):Z()}else K()},Ue=(I,S)=>{let B;for(;I!==S;)B=h(I),i(I),I=B;i(S)},ie=(I,S,B)=>{const{bum:Y,scope:H,job:K,subTree:se,um:re,m:Z,a:Q,parent:Te,slots:{__:ue}}=I;Ky(Z),Ky(Q),Y&&gf(Y),Te&&De(ue)&&ue.forEach(_e=>{Te.renderCache[_e]=void 0}),H.stop(),K&&(K.flags|=8,$(se,I,S,B)),re&&In(re,S),In(()=>{I.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Be=(I,S,B,Y=!1,H=!1,K=0)=>{for(let se=K;se<I.length;se++)$(I[se],S,B,Y,H)},ve=I=>{if(I.shapeFlag&6)return ve(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const S=h(I.anchor||I.el),B=S&&S[Z_];return B?h(B):S};let Me=!1;const $e=(I,S,B)=>{I==null?S._vnode&&$(S._vnode,null,null,!0):g(S._vnode||null,I,S,null,null,null,B),S._vnode=I,Me||(Me=!0,Ly(),Q_(),Me=!1)},ot={p:g,um:$,m:F,r:le,mt:j,mc:D,pc:de,pbc:U,n:ve,o:t};return{render:$e,hydrate:void 0,createApp:B1($e)}}function _f({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ds({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function K1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function tv(t,e,n=!1){const r=t.children,i=e.children;if(De(r)&&De(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Hi(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&tv(o,a)),a.type===Cu&&(a.el=o.el),a.type===tn&&!a.el&&(a.el=o.el)}}function Y1(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function kS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:kS(e)}function Ky(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Q1=Symbol.for("v-scx"),X1=()=>et(Q1);function lr(t,e){return nv(t,null,e)}function Ie(t,e,n){return nv(t,e,n)}function nv(t,e,n=at){const{immediate:r,deep:i,flush:s,once:o}=n,a=Ut({},n),l=e&&r||!e&&s!=="post";let u;if(Bl){if(s==="sync"){const f=X1();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=qr,f.resume=qr,f.pause=qr,f}}const c=vn;a.call=(f,m,g)=>wr(f,c,m,g);let d=!1;s==="post"?a.scheduler=f=>{In(f,c&&c.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():Yg(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const h=f1(t,e,a);return Bl&&(u?u.push(h):l&&h()),h}function J1(t,e,n){const r=this.proxy,i=St(t)?t.includes(".")?AS(r,t):()=>r[t]:t.bind(r,r);let s;Ne(e)?s=e:(s=e.handler,n=e);const o=Au(this),a=nv(i,s.bind(r),n);return o(),a}function AS(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Z1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${xn(e)}Modifiers`]||t[`${bo(e)}Modifiers`];function eD(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||at;let i=n;const s=e.startsWith("update:"),o=s&&Z1(r,e.slice(7));o&&(o.trim&&(i=n.map(c=>St(c)?c.trim():c)),o.number&&(i=n.map(Nx)));let a,l=r[a=mf(e)]||r[a=mf(xn(e))];!l&&s&&(l=r[a=mf(bo(e))]),l&&wr(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,wr(u,t,6,i)}}function xS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ne(t)){const l=u=>{const c=xS(u,e,!0);c&&(a=!0,Ut(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ct(t)&&r.set(t,null),null):(De(s)?s.forEach(l=>o[l]=null):Ut(o,s),ct(t)&&r.set(t,o),o)}function eh(t,e){return!t||!Wd(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ze(t,e[0].toLowerCase()+e.slice(1))||Ze(t,bo(e))||Ze(t,e))}function Yy(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:d,data:h,setupState:f,ctx:m,inheritAttrs:g}=t,v=Jc(t);let y,w;try{if(n.shapeFlag&4){const b=i||r,T=b;y=Pr(u.call(T,b,c,d,f,h,m)),w=a}else{const b=e;y=Pr(b.length>1?b(d,{attrs:a,slots:o,emit:l}):b(d,null)),w=e.props?a:tD(a)}}catch(b){Il.length=0,Xd(b,t,1),y=p(tn)}let _=y;if(w&&g!==!1){const b=Object.keys(w),{shapeFlag:T}=_;b.length&&T&7&&(s&&b.some(Bg)&&(w=nD(w,s)),_=pi(_,w,!1,!0))}return n.dirs&&(_=pi(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&io(_,n.transition),y=_,Jc(v),y}const tD=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wd(n))&&((e||(e={}))[n]=t[n]);return e},nD=(t,e)=>{const n={};for(const r in t)(!Bg(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function rD(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Qy(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(o[h]!==r[h]&&!eh(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Qy(r,o,u):!0:!!o;return!1}function Qy(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!eh(n,s))return!0}return!1}function iD({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const DS=t=>t.__isSuspense;function sD(t,e){e&&e.pendingBranch?De(t)?e.effects.push(...t):e.effects.push(t):v1(t)}const Ee=Symbol.for("v-fgt"),Cu=Symbol.for("v-txt"),tn=Symbol.for("v-cmt"),Sf=Symbol.for("v-stc"),Il=[];let zn=null;function we(t=!1){Il.push(zn=t?null:[])}function oD(){Il.pop(),zn=Il[Il.length-1]||null}let Fl=1;function Xy(t,e=!1){Fl+=t,t<0&&zn&&e&&(zn.hasOnce=!0)}function PS(t){return t.dynamicChildren=Fl>0?zn||zo:null,oD(),Fl>0&&zn&&zn.push(t),t}function je(t,e,n,r,i,s){return PS(C(t,e,n,r,i,s,!0))}function $t(t,e,n,r,i){return PS(p(t,e,n,r,i,!0))}function oa(t){return t?t.__v_isVNode===!0:!1}function Fs(t,e){return t.type===e.type&&t.key===e.key}const NS=({key:t})=>t??null,Pc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?St(t)||Nt(t)||Ne(t)?{i:rn,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===Ee?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&NS(e),ref:e&&Pc(e),scopeId:J_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return a?(rv(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=St(n)?8:16),Fl>0&&!o&&zn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&zn.push(l),l}const p=aD;function aD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===x1)&&(t=tn),oa(t)){const a=pi(t,e,!0);return n&&rv(a,n),Fl>0&&!s&&zn&&(a.shapeFlag&6?zn[zn.indexOf(t)]=a:zn.push(a)),a.patchFlag=-2,a}if(pD(t)&&(t=t.__vccOpts),e){e=lD(e);let{class:a,style:l}=e;a&&!St(a)&&(e.class=ce(a)),ct(l)&&(Kg(l)&&!De(l)&&(l=Ut({},l)),e.style=xe(l))}const o=St(t)?1:DS(t)?128:eS(t)?64:ct(t)?4:Ne(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function lD(t){return t?Kg(t)||IS(t)?Ut({},t):t:null}function pi(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,u=e?Se(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&NS(u),ref:e&&e.ref?n&&s?De(s)?s.concat(Pc(e)):[s,Pc(e)]:Pc(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ee?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&pi(t.ssContent),ssFallback:t.ssFallback&&pi(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&io(c,l.clone(c)),c}function Qe(t=" ",e=0){return p(Cu,null,t,e)}function yi(t="",e=!1){return e?(we(),$t(tn,null,t)):p(tn,null,t)}function Pr(t){return t==null||typeof t=="boolean"?p(tn):De(t)?p(Ee,null,t.slice()):oa(t)?Hi(t):p(Cu,null,String(t))}function Hi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:pi(t)}function rv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(De(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),rv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!IS(e)?e._ctx=rn:i===3&&rn&&(rn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:rn},n=32):(e=String(e),r&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Se(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=ce([e.class,r.class]));else if(i==="style")e.style=xe([e.style,r.style]);else if(Wd(i)){const s=e[i],o=r[i];o&&s!==o&&!(De(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ar(t,e,n,r=null){wr(t,e,7,[n,r])}const uD=yS();let cD=0;function dD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||uD,s={uid:cD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new k_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:SS(r,i),emitsOptions:xS(r,i),emit:null,emitted:null,propsDefaults:at,inheritAttrs:r.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=eD.bind(null,s),t.ce&&t.ce(s),s}let vn=null;const ku=()=>vn||rn;let ed,bm;{const t=Yd(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ed=e("__VUE_INSTANCE_SETTERS__",n=>vn=n),bm=e("__VUE_SSR_SETTERS__",n=>Bl=n)}const Au=t=>{const e=vn;return ed(t),t.scope.on(),()=>{t.scope.off(),ed(e)}},Jy=()=>{vn&&vn.scope.off(),ed(null)};function RS(t){return t.vnode.shapeFlag&4}let Bl=!1;function hD(t,e=!1,n=!1){e&&bm(e);const{props:r,children:i}=t.vnode,s=RS(t);$1(t,r,s,e),z1(t,i,n||e);const o=s?fD(t,e):void 0;return e&&bm(!1),o}function fD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,N1);const{setup:r}=n;if(r){gi();const i=t.setupContext=r.length>1?gD(t):null,s=Au(t),o=Tu(r,t,0,[t.props,i]),a=I_(o);if(vi(),s(),(a||t.sp)&&!Ko(t)&&lS(t),a){if(o.then(Jy,Jy),e)return o.then(l=>{Zy(t,l)}).catch(l=>{Xd(l,t,0)});t.asyncDep=o}else Zy(t,o)}else OS(t)}function Zy(t,e,n){Ne(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=H_(e)),OS(t)}function OS(t,e,n){const r=t.type;t.render||(t.render=r.render||qr);{const i=Au(t);gi();try{R1(t)}finally{vi(),i()}}}const mD={get(t,e){return mn(t,"get",""),t[e]}};function gD(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,mD),slots:t.slots,emit:t.emit,expose:e}}function th(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(H_(q_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in bl)return bl[n](t)},has(e,n){return n in e||n in bl}})):t.proxy}function vD(t,e=!0){return Ne(t)?t.displayName||t.name:t.name||e&&t.__name}function pD(t){return Ne(t)&&"__vccOpts"in t}const x=(t,e)=>d1(t,e,Bl);function ys(t,e,n){const r=arguments.length;return r===2?ct(e)&&!De(e)?oa(e)?p(t,null,[e]):p(t,e):p(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&oa(n)&&(n=[n]),p(t,e,n))}const yD="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Im;const ew=typeof window<"u"&&window.trustedTypes;if(ew)try{Im=ew.createPolicy("vue",{createHTML:t=>t})}catch{}const MS=Im?t=>Im.createHTML(t):t=>t,wD="http://www.w3.org/2000/svg",bD="http://www.w3.org/1998/Math/MathML",ri=typeof document<"u"?document:null,tw=ri&&ri.createElement("template"),ID={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ri.createElementNS(wD,t):e==="mathml"?ri.createElementNS(bD,t):n?ri.createElement(t,{is:n}):ri.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ri.createTextNode(t),createComment:t=>ri.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ri.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{tw.innerHTML=MS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=tw.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Li="transition",Ga="animation",aa=Symbol("_vtc"),VS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},LS=Ut({},iS,VS),_D=t=>(t.displayName="Transition",t.props=LS,t),so=_D((t,{slots:e})=>ys(b1,FS(t),e)),Ps=(t,e=[])=>{De(t)?t.forEach(n=>n(...e)):t&&t(...e)},nw=t=>t?De(t)?t.some(e=>e.length>1):t.length>1:!1;function FS(t){const e={};for(const k in t)k in VS||(e[k]=t[k]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=SD(i),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:w,onEnterCancelled:_,onLeave:b,onLeaveCancelled:T,onBeforeAppear:E=y,onAppear:A=w,onAppearCancelled:D=_}=e,P=(k,O,j,J)=>{k._enterCancelled=J,ji(k,O?c:a),ji(k,O?u:o),j&&j()},U=(k,O)=>{k._isLeaving=!1,ji(k,d),ji(k,f),ji(k,h),O&&O()},z=k=>(O,j)=>{const J=k?A:w,ee=()=>P(O,k,j);Ps(J,[O,ee]),rw(()=>{ji(O,k?l:s),xr(O,k?c:a),nw(J)||iw(O,r,g,ee)})};return Ut(e,{onBeforeEnter(k){Ps(y,[k]),xr(k,s),xr(k,o)},onBeforeAppear(k){Ps(E,[k]),xr(k,l),xr(k,u)},onEnter:z(!1),onAppear:z(!0),onLeave(k,O){k._isLeaving=!0;const j=()=>U(k,O);xr(k,d),k._enterCancelled?(xr(k,h),_m()):(_m(),xr(k,h)),rw(()=>{k._isLeaving&&(ji(k,d),xr(k,f),nw(b)||iw(k,r,v,j))}),Ps(b,[k,j])},onEnterCancelled(k){P(k,!1,void 0,!0),Ps(_,[k])},onAppearCancelled(k){P(k,!0,void 0,!0),Ps(D,[k])},onLeaveCancelled(k){U(k),Ps(T,[k])}})}function SD(t){if(t==null)return null;if(ct(t))return[Tf(t.enter),Tf(t.leave)];{const e=Tf(t);return[e,e]}}function Tf(t){return Rx(t)}function xr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[aa]||(t[aa]=new Set)).add(e)}function ji(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[aa];n&&(n.delete(e),n.size||(t[aa]=void 0))}function rw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let TD=0;function iw(t,e,n,r){const i=t._endId=++TD,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=BS(t,e);if(!o)return r();const u=o+"end";let c=0;const d=()=>{t.removeEventListener(u,h),s()},h=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),t.addEventListener(u,h)}function BS(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),i=r(`${Li}Delay`),s=r(`${Li}Duration`),o=sw(i,s),a=r(`${Ga}Delay`),l=r(`${Ga}Duration`),u=sw(a,l);let c=null,d=0,h=0;e===Li?o>0&&(c=Li,d=o,h=s.length):e===Ga?u>0&&(c=Ga,d=u,h=l.length):(d=Math.max(o,u),c=d>0?o>u?Li:Ga:null,h=c?c===Li?s.length:l.length:0);const f=c===Li&&/\b(transform|all)(,|$)/.test(r(`${Li}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:f}}function sw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>ow(n)+ow(t[r])))}function ow(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function _m(){return document.body.offsetHeight}function ED(t,e,n){const r=t[aa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const td=Symbol("_vod"),$S=Symbol("_vsh"),En={beforeMount(t,{value:e},{transition:n}){t[td]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ka(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ka(t,!0),r.enter(t)):r.leave(t,()=>{Ka(t,!1)}):Ka(t,e))},beforeUnmount(t,{value:e}){Ka(t,e)}};function Ka(t,e){t.style.display=e?t[td]:"none",t[$S]=!e}const CD=Symbol(""),kD=/(^|;)\s*display\s*:/;function AD(t,e,n){const r=t.style,i=St(n);let s=!1;if(n&&!i){if(e)if(St(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Nc(r,a,"")}else for(const o in e)n[o]==null&&Nc(r,o,"");for(const o in n)o==="display"&&(s=!0),Nc(r,o,n[o])}else if(i){if(e!==n){const o=r[CD];o&&(n+=";"+o),r.cssText=n,s=kD.test(n)}}else e&&t.removeAttribute("style");td in t&&(t[td]=s?r.display:"",t[$S]&&(r.display="none"))}const aw=/\s*!important$/;function Nc(t,e,n){if(De(n))n.forEach(r=>Nc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=xD(t,e);aw.test(n)?t.setProperty(bo(r),n.replace(aw,""),"important"):t[r]=n}}const lw=["Webkit","Moz","ms"],Ef={};function xD(t,e){const n=Ef[e];if(n)return n;let r=xn(e);if(r!=="filter"&&r in t)return Ef[e]=r;r=Ti(r);for(let i=0;i<lw.length;i++){const s=lw[i]+r;if(s in t)return Ef[e]=s}return e}const uw="http://www.w3.org/1999/xlink";function cw(t,e,n,r,i,s=Bx(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(uw,e.slice(6,e.length)):t.setAttributeNS(uw,e,n):n==null||s&&!T_(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Si(n)?String(n):n)}function dw(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?MS(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=T_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function DD(t,e,n,r){t.addEventListener(e,n,r)}function PD(t,e,n,r){t.removeEventListener(e,n,r)}const hw=Symbol("_vei");function ND(t,e,n,r,i=null){const s=t[hw]||(t[hw]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=RD(e);if(r){const u=s[e]=VD(r,i);DD(t,a,u,l)}else o&&(PD(t,a,o,l),s[e]=void 0)}}const fw=/(?:Once|Passive|Capture)$/;function RD(t){let e;if(fw.test(t)){e={};let r;for(;r=t.match(fw);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):bo(t.slice(2)),e]}let Cf=0;const OD=Promise.resolve(),MD=()=>Cf||(OD.then(()=>Cf=0),Cf=Date.now());function VD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;wr(LD(r,n.value),e,5,[r])};return n.value=t,n.attached=MD(),n}function LD(t,e){if(De(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const mw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,FD=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?ED(t,r,o):e==="style"?AD(t,n,r):Wd(e)?Bg(e)||ND(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BD(t,e,r,o))?(dw(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&cw(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!St(r))?dw(t,xn(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),cw(t,e,r,o))};function BD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&mw(e)&&Ne(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return mw(e)&&St(n)?!1:e in t}const US=new WeakMap,jS=new WeakMap,nd=Symbol("_moveCb"),gw=Symbol("_enterCb"),$D=t=>(delete t.props.mode,t),UD=$D({name:"TransitionGroup",props:Ut({},LS,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ku(),r=rS();let i,s;return Jg(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!HD(i[0].el,n.vnode.el,o)){i=[];return}i.forEach(jD),i.forEach(qD);const a=i.filter(zD);_m(),a.forEach(l=>{const u=l.el,c=u.style;xr(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[nd]=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",d),u[nd]=null,ji(u,o))};u.addEventListener("transitionend",d)}),i=[]}),()=>{const o=ke(t),a=FS(o);let l=o.tag||Ee;if(i=[],s)for(let u=0;u<s.length;u++){const c=s[u];c.el&&c.el instanceof Element&&(i.push(c),io(c,Ll(c,a,r,n)),US.set(c,c.el.getBoundingClientRect()))}s=e.default?Qg(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&io(c,Ll(c,a,r,n))}return p(l,null,s)}}}),iv=UD;function jD(t){const e=t.el;e[nd]&&e[nd](),e[gw]&&e[gw]()}function qD(t){jS.set(t,t.el.getBoundingClientRect())}function zD(t){const e=US.get(t),n=jS.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function HD(t,e,n){const r=t.cloneNode(),i=t[aa];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=BS(r);return s.removeChild(r),o}const WD=["ctrl","shift","alt","meta"],GD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>WD.some(n=>t[`${n}Key`]&&!e.includes(n))},sv=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=GD[e[o]];if(a&&a(i,e))return}return t(i,...s)})},KD=Ut({patchProp:FD},ID);let vw;function YD(){return vw||(vw=W1(KD))}const QD=(...t)=>{const e=YD().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=JD(r);if(!i)return;const s=e._component;!Ne(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,XD(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function XD(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function JD(t){return St(t)?document.querySelector(t):t}var pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new eP;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const m=u<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tP=function(t){const e=qS(t);return zS.encodeByteArray(e,!0)},rd=function(t){return tP(t).replace(/\./g,"")},HS=function(t){try{return zS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function id(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!nP(n)||(t[n]=id(t[n],e[n]));return t}function nP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=()=>rP().__FIREBASE_DEFAULTS__,sP=()=>{if(typeof process>"u"||typeof pw>"u")return;const t=pw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HS(t[1]);return e&&JSON.parse(e)},ov=()=>{try{return iP()||sP()||oP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WS=()=>{var t;return(t=ov())===null||t===void 0?void 0:t.config},aP=t=>{var e;return(e=ov())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rd(JSON.stringify(n)),rd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function av(){var t;const e=(t=ov())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dP(){return typeof self=="object"&&self.self===self}function GS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KS(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hP(){return!av()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $l(){try{return typeof indexedDB=="object"}catch{return!1}}function fP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mP,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Io.prototype.create)}}class Io{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kn(i,a,r)}}function gP(t,e){return t.replace(vP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ww(s)&&ww(o)){if(!Sm(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ww(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YS(t,e){const n=new yP(t,e);return n.subscribe.bind(n)}class yP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kf),i.error===void 0&&(i.error=kf),i.complete===void 0&&(i.complete=kf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_P(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IP(t){return t===Vs?void 0:t}function _P(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=[];var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const QS={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},TP=Ke.INFO,EP={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},CP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=EP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nh{constructor(e){this.name=e,this._logLevel=TP,this._logHandler=CP,this._userLogHandler=null,uv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}function kP(t){uv.forEach(e=>{e.setLogLevel(t)})}function AP(t,e){for(const n of uv){let r=null;e&&e.level&&(r=QS[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Ke[s].toLowerCase(),message:a,args:o,type:i.name})}}}const xP=(t,e)=>e.some(n=>t instanceof n);let bw,Iw;function DP(){return bw||(bw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PP(){return Iw||(Iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XS=new WeakMap,Tm=new WeakMap,JS=new WeakMap,Af=new WeakMap,cv=new WeakMap;function NP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ji(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XS.set(n,t)}).catch(()=>{}),cv.set(e,t),e}function RP(t){if(Tm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Tm.set(t,e)}let Em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OP(t){Em=t(Em)}function MP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xf(this),e,...n);return JS.set(r,e.sort?e.sort():[e]),Ji(r)}:PP().includes(t)?function(...e){return t.apply(xf(this),e),Ji(XS.get(this))}:function(...e){return Ji(t.apply(xf(this),e))}}function VP(t){return typeof t=="function"?MP(t):(t instanceof IDBTransaction&&RP(t),xP(t,DP())?new Proxy(t,Em):t)}function Ji(t){if(t instanceof IDBRequest)return NP(t);if(Af.has(t))return Af.get(t);const e=VP(t);return e!==t&&(Af.set(t,e),cv.set(e,t)),e}const xf=t=>cv.get(t);function LP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ji(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ji(o.result),l.oldVersion,l.newVersion,Ji(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const FP=["get","getKey","getAll","getAllKeys","count"],BP=["put","add","delete","clear"],Df=new Map;function _w(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Df.set(e,s),s}OP(t=>({...t,get:(e,n,r)=>_w(e,n)||t.get(e,n,r),has:(e,n)=>!!_w(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",Sw="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new nh("@firebase/app"),jP="@firebase/app-compat",qP="@firebase/analytics-compat",zP="@firebase/analytics",HP="@firebase/app-check-compat",WP="@firebase/app-check",GP="@firebase/auth",KP="@firebase/auth-compat",YP="@firebase/database",QP="@firebase/database-compat",XP="@firebase/functions",JP="@firebase/functions-compat",ZP="@firebase/installations",eN="@firebase/installations-compat",tN="@firebase/messaging",nN="@firebase/messaging-compat",rN="@firebase/performance",iN="@firebase/performance-compat",sN="@firebase/remote-config",oN="@firebase/remote-config-compat",aN="@firebase/storage",lN="@firebase/storage-compat",uN="@firebase/firestore",cN="@firebase/firestore-compat",dN="firebase",hN="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]",fN={[Cm]:"fire-core",[jP]:"fire-core-compat",[zP]:"fire-analytics",[qP]:"fire-analytics-compat",[WP]:"fire-app-check",[HP]:"fire-app-check-compat",[GP]:"fire-auth",[KP]:"fire-auth-compat",[YP]:"fire-rtdb",[QP]:"fire-rtdb-compat",[XP]:"fire-fn",[JP]:"fire-fn-compat",[ZP]:"fire-iid",[eN]:"fire-iid-compat",[tN]:"fire-fcm",[nN]:"fire-fcm-compat",[rN]:"fire-perf",[iN]:"fire-perf-compat",[sN]:"fire-rc",[oN]:"fire-rc-compat",[aN]:"fire-gcs",[lN]:"fire-gcs-compat",[uN]:"fire-fst",[cN]:"fire-fst-compat","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Map,Ul=new Map;function sd(t,e){try{t.container.addComponent(e)}catch(n){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ZS(t,e){t.container.addOrOverwriteComponent(e)}function rs(t){const e=t.name;if(Ul.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;Ul.set(e,t);for(const n of ns.values())sd(n,t);return!0}function e0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mN(t,e,n=ts){e0(t,e).clearInstance(n)}function gN(){Ul.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},hi=new Io("app","Firebase",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pN=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=hN;function dv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ts,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(n||(n=WS()),!n)throw hi.create("no-options");const s=ns.get(i);if(s){if(Sm(n,s.options)&&Sm(r,s.config))return s;throw hi.create("duplicate-app",{appName:i})}const o=new SP(i);for(const l of Ul.values())o.addComponent(l);const a=new pN(n,r,o);return ns.set(i,a),a}function yN(t=ts){const e=ns.get(t);if(!e&&t===ts&&WS())return dv();if(!e)throw hi.create("no-app",{appName:t});return e}function wN(){return Array.from(ns.values())}async function t0(t){const e=t.name;ns.has(e)&&(ns.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function zr(t,e,n){var r;let i=(r=fN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oo.warn(a.join(" "));return}rs(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function n0(t,e){if(t!==null&&typeof t!="function")throw hi.create("invalid-log-argument");AP(t,e)}function r0(t){kP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firebase-heartbeat-database",IN=1,jl="firebase-heartbeat-store";let Pf=null;function i0(){return Pf||(Pf=LP(bN,IN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jl)}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),Pf}async function _N(t){try{return await(await i0()).transaction(jl).objectStore(jl).get(s0(t))}catch(e){if(e instanceof kn)oo.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oo.warn(n.message)}}}async function Tw(t,e){try{const r=(await i0()).transaction(jl,"readwrite");await r.objectStore(jl).put(e,s0(t)),await r.done}catch(n){if(n instanceof kn)oo.warn(n.message);else{const r=hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oo.warn(r.message)}}}function s0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1024,TN=30*24*60*60*1e3;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ew();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=TN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ew(),{heartbeatsToSend:n,unsentEntries:r}=CN(this._heartbeatsCache.heartbeats),i=rd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ew(){return new Date().toISOString().substring(0,10)}function CN(t,e=SN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $l()?fP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await _N(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cw(t){return rd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){rs(new Yr("platform-logger",e=>new $P(e),"PRIVATE")),rs(new Yr("heartbeat",e=>new EN(e),"PRIVATE")),zr(Cm,Sw,t),zr(Cm,Sw,"esm2017"),zr("fire-js","")}AN("");const xN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:kn,SDK_VERSION:ws,_DEFAULT_ENTRY_NAME:ts,_addComponent:sd,_addOrOverwriteComponent:ZS,_apps:ns,_clearComponents:gN,_components:Ul,_getProvider:e0,_registerComponent:rs,_removeServiceInstance:mN,deleteApp:t0,getApp:yN,getApps:wN,initializeApp:dv,onLog:n0,registerVersion:zr,setLogLevel:r0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this._delegate=e,this.firebase=n,sd(e,new Yr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),t0(this._delegate)))}_getService(e,n=ts){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=ts){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){sd(this._delegate,e)}_addOrOverwriteComponent(e){ZS(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},kw=new Io("app-compat","Firebase",PN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:zr,setLogLevel:r0,onLog:n0,apps:null,SDK_VERSION:ws,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:xN}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||ts,!yw(e,u))throw kw.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const d=dv(u,c);if(yw(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(rs(u)&&u.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw kw.create("invalid-app-argument",{appName:c});return f[d]()};u.serviceProps!==void 0&&id(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){const t=NN(DN);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:o0,extendNamespace:e,createSubscribe:YS,ErrorFactory:Io,deepExtend:id});function e(n){id(t,n)}return t}const RN=o0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new nh("@firebase/app-compat"),ON="@firebase/app-compat",MN="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){zr(ON,MN,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(dP()&&self.firebase!==void 0){Aw.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Aw.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Gn=RN;VN();var LN="firebase",FN="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.registerVersion(LN,FN,"app-compat");var BN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae,hv=hv||{},Oe=BN||self;function rh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ih(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $N(t,e,n){return t.call.apply(t.bind,arguments)}function UN(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function yn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yn=$N:yn=UN,yn.apply(null,arguments)}function fc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Yt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function bs(){this.s=this.s,this.o=this.o}var jN=0;bs.prototype.s=!1;bs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),jN!=0)};bs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const a0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function fv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(rh(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function wn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};var qN=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oe.addEventListener("test",()=>{},e),Oe.removeEventListener("test",()=>{},e)}catch{}return t}();function ql(t){return/^[\s\xa0]*$/.test(t)}function sh(){var t=Oe.navigator;return t&&(t=t.userAgent)?t:""}function Nr(t){return sh().indexOf(t)!=-1}function mv(t){return mv[" "](t),t}mv[" "]=function(){};function zN(t,e){var n=LR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var HN=Nr("Opera"),la=Nr("Trident")||Nr("MSIE"),l0=Nr("Edge"),km=l0||la,u0=Nr("Gecko")&&!(sh().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge"))&&!(Nr("Trident")||Nr("MSIE"))&&!Nr("Edge"),WN=sh().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge");function c0(){var t=Oe.document;return t?t.documentMode:void 0}var Am;e:{var Nf="",Rf=function(){var t=sh();if(u0)return/rv:([^\);]+)(\)|;)/.exec(t);if(l0)return/Edge\/([\d\.]+)/.exec(t);if(la)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(WN)return/WebKit\/(\S+)/.exec(t);if(HN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Rf&&(Nf=Rf?Rf[1]:""),la){var Of=c0();if(Of!=null&&Of>parseFloat(Nf)){Am=String(Of);break e}}Am=Nf}var xm;if(Oe.document&&la){var Dw=c0();xm=Dw||parseInt(Am,10)||void 0}else xm=void 0;var GN=xm;function zl(t,e){if(wn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(u0){e:{try{mv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:KN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&zl.$.h.call(this)}}Yt(zl,wn);var KN={2:"touch",3:"pen",4:"mouse"};zl.prototype.h=function(){zl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oh="closure_listenable_"+(1e6*Math.random()|0),YN=0;function QN(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++YN,this.fa=this.ia=!1}function ah(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function gv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function XN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function d0(t){const e={};for(const n in t)e[n]=t[n];return e}const Pw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function h0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Pw.length;s++)n=Pw[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lh(t){this.src=t,this.g={},this.h=0}lh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Pm(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new QN(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Dm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=a0(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ah(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Pm(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var vv="closure_lm_"+(1e6*Math.random()|0),Mf={};function f0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)f0(t,e[s],n,r,i);return null}return n=v0(n),t&&t[oh]?t.O(e,n,ih(r)?!!r.capture:!1,i):JN(t,e,n,!1,r,i)}function JN(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ih(i)?!!i.capture:!!i,a=yv(t);if(a||(t[vv]=a=new lh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=ZN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)qN||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(g0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ZN(){function t(n){return e.call(t.src,t.listener,n)}const e=eR;return t}function m0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)m0(t,e[s],n,r,i);else r=ih(r)?!!r.capture:!!r,n=v0(n),t&&t[oh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Pm(s,n,r,i),-1<n&&(ah(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=yv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Pm(e,n,r,i)),(n=-1<t?e[t]:null)&&pv(n))}function pv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[oh])Dm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(g0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yv(e))?(Dm(n,t),n.h==0&&(n.src=null,e[vv]=null)):ah(t)}}}function g0(t){return t in Mf?Mf[t]:Mf[t]="on"+t}function eR(t,e){if(t.fa)t=!0;else{e=new zl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&pv(t),t=n.call(r,e)}return t}function yv(t){return t=t[vv],t instanceof lh?t:null}var Vf="__closure_events_fn_"+(1e9*Math.random()>>>0);function v0(t){return typeof t=="function"?t:(t[Vf]||(t[Vf]=function(e){return t.handleEvent(e)}),t[Vf])}function Gt(){bs.call(this),this.i=new lh(this),this.S=this,this.J=null}Yt(Gt,bs);Gt.prototype[oh]=!0;Gt.prototype.removeEventListener=function(t,e,n,r){m0(this,t,e,n,r)};function on(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new wn(e,t);else if(e instanceof wn)e.target=e.target||t;else{var i=e;e=new wn(r,t),h0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=mc(o,r,!0,e)&&i}if(o=e.g=t,i=mc(o,r,!0,e)&&i,i=mc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=mc(o,r,!1,e)&&i}Gt.prototype.N=function(){if(Gt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ah(n[r]);delete t.g[e],t.h--}}this.J=null};Gt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Gt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function mc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Dm(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var wv=Oe.JSON.stringify;class tR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function nR(){var t=bv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class rR{constructor(){this.h=this.g=null}add(e,n){const r=p0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var p0=new tR(()=>new iR,t=>t.reset());class iR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function sR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function oR(t){Oe.setTimeout(()=>{throw t},0)}let Hl,Wl=!1,bv=new rR,y0=()=>{const t=Oe.Promise.resolve(void 0);Hl=()=>{t.then(aR)}};var aR=()=>{for(var t;t=nR();){try{t.h.call(t.g)}catch(n){oR(n)}var e=p0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wl=!1};function uh(t,e){Gt.call(this),this.h=t||1,this.g=e||Oe,this.j=yn(this.qb,this),this.l=Date.now()}Yt(uh,Gt);ae=uh.prototype;ae.ga=!1;ae.T=null;ae.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),on(this,"tick"),this.ga&&(Iv(this),this.start()))}};ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Iv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ae.N=function(){uh.$.N.call(this),Iv(this),delete this.g};function _v(t,e,n){if(typeof t=="function")n&&(t=yn(t,n));else if(t&&typeof t.handleEvent=="function")t=yn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Oe.setTimeout(t,e||0)}function w0(t){t.g=_v(()=>{t.g=null,t.i&&(t.i=!1,w0(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class lR extends bs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:w0(this)}N(){super.N(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gl(t){bs.call(this),this.h=t,this.g={}}Yt(Gl,bs);var Nw=[];function b0(t,e,n,r){Array.isArray(n)||(n&&(Nw[0]=n.toString()),n=Nw);for(var i=0;i<n.length;i++){var s=f0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function I0(t){gv(t.g,function(e,n){this.g.hasOwnProperty(n)&&pv(e)},t),t.g={}}Gl.prototype.N=function(){Gl.$.N.call(this),I0(this)};Gl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ch(){this.g=!0}ch.prototype.Ea=function(){this.g=!1};function uR(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function cR(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function jo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hR(t,n)+(r?" "+r:"")})}function dR(t,e){t.info(function(){return"TIMEOUT: "+e})}ch.prototype.info=function(){};function hR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return wv(n)}catch{return e}}var _o={},Rw=null;function dh(){return Rw=Rw||new Gt}_o.Ta="serverreachability";function _0(t){wn.call(this,_o.Ta,t)}Yt(_0,wn);function Kl(t){const e=dh();on(e,new _0(e))}_o.STAT_EVENT="statevent";function S0(t,e){wn.call(this,_o.STAT_EVENT,t),this.stat=e}Yt(S0,wn);function Cn(t){const e=dh();on(e,new S0(e,t))}_o.Ua="timingevent";function T0(t,e){wn.call(this,_o.Ua,t),this.size=e}Yt(T0,wn);function xu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){t()},e)}var hh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},E0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sv(){}Sv.prototype.h=null;function Ow(t){return t.h||(t.h=t.i())}function C0(){}var Du={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tv(){wn.call(this,"d")}Yt(Tv,wn);function Ev(){wn.call(this,"c")}Yt(Ev,wn);var Nm;function fh(){}Yt(fh,Sv);fh.prototype.g=function(){return new XMLHttpRequest};fh.prototype.i=function(){return{}};Nm=new fh;function Pu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gl(this),this.P=fR,t=km?125:void 0,this.V=new uh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new k0}function k0(){this.i=null,this.g="",this.h=!1}var fR=45e3,Rm={},od={};ae=Pu.prototype;ae.setTimeout=function(t){this.P=t};function Om(t,e,n){t.L=1,t.v=gh(wi(e)),t.s=n,t.S=!0,A0(t,null)}function A0(t,e){t.G=Date.now(),Nu(t),t.A=wi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),V0(n.i,"t",r),t.C=0,n=t.l.J,t.h=new k0,t.g=rT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new lR(yn(t.Pa,t,t.g),t.O)),b0(t.U,t.g,"readystatechange",t.nb),e=t.I?d0(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Kl(),uR(t.j,t.u,t.A,t.m,t.W,t.s)}ae.nb=function(t){t=t.target;const e=this.M;e&&Lr(t)==3?e.l():this.Pa(t)};ae.Pa=function(t){try{if(t==this.g)e:{const c=Lr(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||km||this.g&&(this.h.h||this.g.ja()||Fw(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?Kl(3):Kl(2)),mh(this);var n=this.g.da();this.ca=n;t:if(x0(this)){var r=Fw(this.g);t="";var i=r.length,s=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),_l(this);var o="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,cR(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ql(a)){var u=a;break t}}u=null}if(n=u)jo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mm(this,n);else{this.i=!1,this.o=3,Cn(12),zs(this),_l(this);break e}}this.S?(D0(this,c,o),km&&this.i&&c==3&&(b0(this.U,this.V,"tick",this.mb),this.V.start())):(jo(this.j,this.m,o,null),Mm(this,o)),c==4&&zs(this),this.i&&!this.J&&(c==4?Z0(this.l,this):(this.i=!1,Nu(this)))}else OR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Cn(12)):(this.o=0,Cn(13)),zs(this),_l(this)}}}catch{}finally{}};function x0(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function D0(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=mR(t,n),i==od){e==4&&(t.o=4,Cn(14),r=!1),jo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Rm){t.o=4,Cn(15),jo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else jo(t.j,t.m,i,null),Mm(t,i);x0(t)&&i!=od&&i!=Rm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Cn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pv(e),e.M=!0,Cn(11))):(jo(t.j,t.m,n,"[Invalid Chunked Response]"),zs(t),_l(t))}ae.mb=function(){if(this.g){var t=Lr(this.g),e=this.g.ja();this.C<e.length&&(mh(this),D0(this,t,e),this.i&&t!=4&&Nu(this))}};function mR(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?od:(n=Number(e.substring(n,r)),isNaN(n)?Rm:(r+=1,r+n>e.length?od:(e=e.slice(r,r+n),t.C=r+n,e)))}ae.cancel=function(){this.J=!0,zs(this)};function Nu(t){t.Y=Date.now()+t.P,P0(t,t.P)}function P0(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=xu(yn(t.lb,t),e)}function mh(t){t.B&&(Oe.clearTimeout(t.B),t.B=null)}ae.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(dR(this.j,this.A),this.L!=2&&(Kl(),Cn(17)),zs(this),this.o=2,_l(this)):P0(this,this.Y-t)};function _l(t){t.l.H==0||t.J||Z0(t.l,t)}function zs(t){mh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Iv(t.V),I0(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Mm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Vm(n.i,t))){if(!t.K&&Vm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ud(n),yh(n);else break e;Dv(n),Cn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=xu(yn(n.ib,n),6e3));if(1>=B0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hs(n,11)}else if((t.K||n.g==t)&&ud(n),!ql(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Cv(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,ht(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=nT(r,r.J?r.pa:null,r.Y),o.K){$0(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(mh(a),Nu(a)),r.g=o}else X0(r);0<n.j.length&&wh(n)}else u[0]!="stop"&&u[0]!="close"||Hs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Hs(n,7):xv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Kl(4)}catch{}}function gR(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(rh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function vR(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function N0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(rh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=vR(t),r=gR(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var R0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Xs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Xs){this.h=t.h,ad(this,t.j),this.s=t.s,this.g=t.g,ld(this,t.m),this.l=t.l;var e=t.i,n=new Yl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Mw(this,n),this.o=t.o}else t&&(e=String(t).match(R0))?(this.h=!1,ad(this,e[1]||"",!0),this.s=ul(e[2]||""),this.g=ul(e[3]||"",!0),ld(this,e[4]),this.l=ul(e[5]||"",!0),Mw(this,e[6]||"",!0),this.o=ul(e[7]||"")):(this.h=!1,this.i=new Yl(null,this.h))}Xs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(cl(e,Vw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(cl(e,Vw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(cl(n,n.charAt(0)=="/"?bR:wR,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",cl(n,_R)),t.join("")};function wi(t){return new Xs(t)}function ad(t,e,n){t.j=n?ul(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ld(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mw(t,e,n){e instanceof Yl?(t.i=e,SR(t.i,t.h)):(n||(e=cl(e,IR)),t.i=new Yl(e,t.h))}function ht(t,e,n){t.i.set(e,n)}function gh(t){return ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ul(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,yR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function yR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Vw=/[#\/\?@]/g,wR=/[#\?:]/g,bR=/[#\?]/g,IR=/[#\?@]/g,_R=/#/g;function Yl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Is(t){t.g||(t.g=new Map,t.h=0,t.i&&pR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ae=Yl.prototype;ae.add=function(t,e){Is(this),this.i=null,t=ka(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function O0(t,e){Is(t),e=ka(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function M0(t,e){return Is(t),e=ka(t,e),t.g.has(e)}ae.forEach=function(t,e){Is(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ae.ta=function(){Is(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ae.Z=function(t){Is(this);let e=[];if(typeof t=="string")M0(this,t)&&(e=e.concat(this.g.get(ka(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ae.set=function(t,e){return Is(this),this.i=null,t=ka(this,t),M0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ae.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function V0(t,e,n){O0(t,e),0<n.length&&(t.i=null,t.g.set(ka(t,e),fv(n)),t.h+=n.length)}ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ka(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SR(t,e){e&&!t.j&&(Is(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(O0(this,r),V0(this,i,n))},t)),t.j=e}var TR=class{constructor(t,e){this.g=t,this.map=e}};function L0(t){this.l=t||ER,Oe.PerformanceNavigationTiming?(t=Oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Oe.g&&Oe.g.Ka&&Oe.g.Ka()&&Oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ER=10;function F0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function B0(t){return t.h?1:t.g?t.g.size:0}function Vm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cv(t,e){t.g?t.g.add(e):t.h=e}function $0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}L0.prototype.cancel=function(){if(this.i=U0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function U0(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return fv(t.i)}var CR=class{stringify(t){return Oe.JSON.stringify(t,void 0)}parse(t){return Oe.JSON.parse(t,void 0)}};function kR(){this.g=new CR}function AR(t,e,n){const r=n||"";try{N0(t,function(i,s){let o=i;ih(i)&&(o=wv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xR(t,e){const n=new ch;if(Oe.Image){const r=new Image;r.onload=fc(gc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fc(gc,n,r,"TestLoadImage: error",!1,e),r.onabort=fc(gc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fc(gc,n,r,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function gc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ru(t){this.l=t.fc||null,this.j=t.ob||!1}Yt(Ru,Sv);Ru.prototype.g=function(){return new vh(this.l,this.j)};Ru.prototype.i=function(t){return function(){return t}}({});function vh(t,e){Gt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yt(vh,Gt);var kv=0;ae=vh.prototype;ae.open=function(t,e){if(this.readyState!=kv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ql(this)};ae.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ou(this)),this.readyState=kv};ae.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ql(this)),this.g&&(this.readyState=3,Ql(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;j0(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function j0(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ae.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ou(this):Ql(this),this.readyState==3&&j0(this)}};ae.Za=function(t){this.g&&(this.response=this.responseText=t,Ou(this))};ae.Ya=function(t){this.g&&(this.response=t,Ou(this))};ae.ka=function(){this.g&&Ou(this)};function Ou(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ql(t)}ae.setRequestHeader=function(t,e){this.v.append(t,e)};ae.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ae.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ql(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(vh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var DR=Oe.JSON.parse;function kt(t){Gt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=q0,this.L=this.M=!1}Yt(kt,Gt);var q0="",PR=/^https?$/i,NR=["POST","PUT"];ae=kt.prototype;ae.Oa=function(t){this.M=t};ae.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nm.g(),this.C=this.u?Ow(this.u):Ow(Nm),this.g.onreadystatechange=yn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Lw(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Oe.FormData&&t instanceof Oe.FormData,!(0<=a0(NR,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{W0(this),0<this.B&&((this.L=RR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yn(this.ua,this)):this.A=_v(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Lw(this,s)}};function RR(t){return la&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ae.ua=function(){typeof hv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,on(this,"timeout"),this.abort(8))};function Lw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,z0(t),ph(t)}function z0(t){t.F||(t.F=!0,on(t,"complete"),on(t,"error"))}ae.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,on(this,"complete"),on(this,"abort"),ph(this))};ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ph(this,!0)),kt.$.N.call(this)};ae.La=function(){this.s||(this.G||this.v||this.l?H0(this):this.kb())};ae.kb=function(){H0(this)};function H0(t){if(t.h&&typeof hv<"u"&&(!t.C[1]||Lr(t)!=4||t.da()!=2)){if(t.v&&Lr(t)==4)_v(t.La,0,t);else if(on(t,"readystatechange"),Lr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(R0)[1]||null;!i&&Oe.self&&Oe.self.location&&(i=Oe.self.location.protocol.slice(0,-1)),r=!PR.test(i?i.toLowerCase():"")}n=r}if(n)on(t,"complete"),on(t,"success");else{t.m=6;try{var s=2<Lr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",z0(t)}}finally{ph(t)}}}}function ph(t,e){if(t.g){W0(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||on(t,"ready");try{n.onreadystatechange=r}catch{}}}function W0(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Oe.clearTimeout(t.A),t.A=null)}ae.isActive=function(){return!!this.g};function Lr(t){return t.g?t.g.readyState:0}ae.da=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}};ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ae.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),DR(e)}};function Fw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case q0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function OR(t){const e={};t=(t.g&&2<=Lr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ql(t[r]))continue;var n=sR(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}XN(e,function(r){return r.join(", ")})}ae.Ia=function(){return this.m};ae.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function G0(t){let e="";return gv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Av(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=G0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ht(t,e,n))}function Ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function K0(t){this.Ga=0,this.j=[],this.l=new ch,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ya("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ya("baseRetryDelayMs",5e3,t),this.hb=Ya("retryDelaySeedMs",1e4,t),this.eb=Ya("forwardChannelMaxRetries",2,t),this.xa=Ya("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new L0(t&&t.concurrentRequestLimit),this.Ja=new kR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ae=K0.prototype;ae.ra=8;ae.H=1;function xv(t){if(Y0(t),t.H==3){var e=t.W++,n=wi(t.I);if(ht(n,"SID",t.K),ht(n,"RID",e),ht(n,"TYPE","terminate"),Mu(t,n),e=new Pu(t,t.l,e),e.L=2,e.v=gh(wi(n)),n=!1,Oe.navigator&&Oe.navigator.sendBeacon)try{n=Oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=rT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Nu(e)}tT(t)}function yh(t){t.g&&(Pv(t),t.g.cancel(),t.g=null)}function Y0(t){yh(t),t.u&&(Oe.clearTimeout(t.u),t.u=null),ud(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Oe.clearTimeout(t.m),t.m=null)}function wh(t){if(!F0(t.i)&&!t.m){t.m=!0;var e=t.Na;Hl||y0(),Wl||(Hl(),Wl=!0),bv.add(e,t),t.C=0}}function MR(t,e){return B0(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=xu(yn(t.Na,t,e),eT(t,t.C)),t.C++,!0)}ae.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Pu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=d0(s),h0(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Q0(this,i,e),n=wi(this.I),ht(n,"RID",t),ht(n,"CVER",22),this.F&&ht(n,"X-HTTP-Session-Id",this.F),Mu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(G0(s)))+"&"+e:this.o&&Av(n,this.o,s)),Cv(this.i,i),this.bb&&ht(n,"TYPE","init"),this.P?(ht(n,"$req",e),ht(n,"SID","null"),i.aa=!0,Om(i,n,null)):Om(i,n,e),this.H=2}}else this.H==3&&(t?Bw(this,t):this.j.length==0||F0(this.i)||Bw(this))};function Bw(t,e){var n;e?n=e.m:n=t.W++;const r=wi(t.I);ht(r,"SID",t.K),ht(r,"RID",n),ht(r,"AID",t.V),Mu(t,r),t.o&&t.s&&Av(r,t.o,t.s),n=new Pu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Q0(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cv(t.i,n),Om(n,r,e)}function Mu(t,e){t.na&&gv(t.na,function(n,r){ht(e,r,n)}),t.h&&N0({},function(n,r){ht(e,r,n)})}function Q0(t,e,n){n=Math.min(t.j.length,n);var r=t.h?yn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{AR(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function X0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Hl||y0(),Wl||(Hl(),Wl=!0),bv.add(e,t),t.A=0}}function Dv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=xu(yn(t.Ma,t),eT(t,t.A)),t.A++,!0)}ae.Ma=function(){if(this.u=null,J0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xu(yn(this.jb,this),t)}};ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cn(10),yh(this),J0(this))};function Pv(t){t.B!=null&&(Oe.clearTimeout(t.B),t.B=null)}function J0(t){t.g=new Pu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=wi(t.wa);ht(e,"RID","rpc"),ht(e,"SID",t.K),ht(e,"AID",t.V),ht(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ht(e,"TO",t.qa),ht(e,"TYPE","xmlhttp"),Mu(t,e),t.o&&t.s&&Av(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=gh(wi(e)),n.s=null,n.S=!0,A0(n,t)}ae.ib=function(){this.v!=null&&(this.v=null,yh(this),Dv(this),Cn(19))};function ud(t){t.v!=null&&(Oe.clearTimeout(t.v),t.v=null)}function Z0(t,e){var n=null;if(t.g==e){ud(t),Pv(t),t.g=null;var r=2}else if(Vm(t.i,e))n=e.F,$0(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=dh(),on(r,new T0(r,n)),wh(t)}else X0(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&MR(t,e)||r==2&&Dv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hs(t,5);break;case 4:Hs(t,10);break;case 3:Hs(t,6);break;default:Hs(t,2)}}}function eT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=yn(t.pb,t);n||(n=new Xs("//www.google.com/images/cleardot.gif"),Oe.location&&Oe.location.protocol=="http"||ad(n,"https"),gh(n)),xR(n.toString(),r)}else Cn(2);t.H=0,t.h&&t.h.za(e),tT(t),Y0(t)}ae.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Cn(2)):(this.l.info("Failed to ping google.com"),Cn(1))};function tT(t){if(t.H=0,t.ma=[],t.h){const e=U0(t.i);(e.length!=0||t.j.length!=0)&&(xw(t.ma,e),xw(t.ma,t.j),t.i.i.length=0,fv(t.j),t.j.length=0),t.h.ya()}}function nT(t,e,n){var r=n instanceof Xs?wi(n):new Xs(n);if(r.g!="")e&&(r.g=e+"."+r.g),ld(r,r.m);else{var i=Oe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Xs(null);r&&ad(s,r),e&&(s.g=e),i&&ld(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ht(r,n,e),ht(r,"VER",t.ra),Mu(t,r),r}function rT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new kt(new Ru({ob:!0})):new kt(t.va),e.Oa(t.J),e}ae.isActive=function(){return!!this.h&&this.h.isActive(this)};function iT(){}ae=iT.prototype;ae.Ba=function(){};ae.Aa=function(){};ae.za=function(){};ae.ya=function(){};ae.isActive=function(){return!0};ae.Va=function(){};function cd(){if(la&&!(10<=Number(GN)))throw Error("Environmental error: no available transport.")}cd.prototype.g=function(t,e){return new Kn(t,e)};function Kn(t,e){Gt.call(this),this.g=new K0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ql(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ql(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Aa(this)}Yt(Kn,Gt);Kn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Cn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=nT(t,null,t.Y),wh(t)};Kn.prototype.close=function(){xv(this.g)};Kn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=wv(t),t=n);e.j.push(new TR(e.fb++,t)),e.H==3&&wh(e)};Kn.prototype.N=function(){this.g.h=null,delete this.j,xv(this.g),delete this.g,Kn.$.N.call(this)};function sT(t){Tv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Yt(sT,Tv);function oT(){Ev.call(this),this.status=1}Yt(oT,Ev);function Aa(t){this.g=t}Yt(Aa,iT);Aa.prototype.Ba=function(){on(this.g,"a")};Aa.prototype.Aa=function(t){on(this.g,new sT(t))};Aa.prototype.za=function(t){on(this.g,new oT)};Aa.prototype.ya=function(){on(this.g,"b")};function VR(){this.blockSize=-1}function br(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Yt(br,VR);br.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Lf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}br.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Lf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Lf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Lf(this,r),i=0;break}}this.h=i,this.i+=e};br.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function it(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var LR={};function Nv(t){return-128<=t&&128>t?zN(t,function(e){return new it([e|0],0>e?-1:0)}):new it([t|0],0>t?-1:0)}function Fr(t){if(isNaN(t)||!isFinite(t))return Qo;if(0>t)return en(Fr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Lm;return new it(e,0)}function aT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return en(aT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fr(Math.pow(e,8)),r=Qo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Fr(Math.pow(e,s)),r=r.R(s).add(Fr(o))):(r=r.R(n),r=r.add(Fr(o)))}return r}var Lm=4294967296,Qo=Nv(0),Fm=Nv(1),$w=Nv(16777216);ae=it.prototype;ae.ea=function(){if(nr(this))return-en(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Lm+r)*e,e*=Lm}return t};ae.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ai(this))return"0";if(nr(this))return"-"+en(this).toString(t);for(var e=Fr(Math.pow(t,6)),n=this,r="";;){var i=hd(n,e).g;n=dd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ai(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ae.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ai(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function nr(t){return t.h==-1}ae.X=function(t){return t=dd(this,t),nr(t)?-1:ai(t)?0:1};function en(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new it(n,~t.h).add(Fm)}ae.abs=function(){return nr(this)?en(this):this};ae.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new it(n,n[n.length-1]&-2147483648?-1:0)};function dd(t,e){return t.add(en(e))}ae.R=function(t){if(ai(this)||ai(t))return Qo;if(nr(this))return nr(t)?en(this).R(en(t)):en(en(this).R(t));if(nr(t))return en(this.R(en(t)));if(0>this.X($w)&&0>t.X($w))return Fr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,vc(n,2*r+2*i),n[2*r+2*i+1]+=s*l,vc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,vc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,vc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new it(n,0)};function vc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Qa(t,e){this.g=t,this.h=e}function hd(t,e){if(ai(e))throw Error("division by zero");if(ai(t))return new Qa(Qo,Qo);if(nr(t))return e=hd(en(t),e),new Qa(en(e.g),en(e.h));if(nr(e))return e=hd(t,en(e)),new Qa(en(e.g),e.h);if(30<t.g.length){if(nr(t)||nr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fm,r=e;0>=r.X(t);)n=Uw(n),r=Uw(r);var i=Do(n,1),s=Do(r,1);for(r=Do(r,2),n=Do(n,2);!ai(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Do(r,1),n=Do(n,1)}return e=dd(t,i.R(e)),new Qa(i,e)}for(i=Qo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Fr(n),o=s.R(e);nr(o)||0<o.X(t);)n-=r,s=Fr(n),o=s.R(e);ai(s)&&(s=Fm),i=i.add(s),t=dd(t,o)}return new Qa(i,t)}ae.gb=function(t){return hd(this,t).h};ae.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new it(n,this.h&t.h)};ae.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new it(n,this.h|t.h)};ae.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new it(n,this.h^t.h)};function Uw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new it(n,t.h)}function Do(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new it(i,t.h)}cd.prototype.createWebChannel=cd.prototype.g;Kn.prototype.send=Kn.prototype.u;Kn.prototype.open=Kn.prototype.m;Kn.prototype.close=Kn.prototype.close;hh.NO_ERROR=0;hh.TIMEOUT=8;hh.HTTP_ERROR=6;E0.COMPLETE="complete";C0.EventType=Du;Du.OPEN="a";Du.CLOSE="b";Du.ERROR="c";Du.MESSAGE="d";Gt.prototype.listen=Gt.prototype.O;kt.prototype.listenOnce=kt.prototype.P;kt.prototype.getLastError=kt.prototype.Sa;kt.prototype.getLastErrorCode=kt.prototype.Ia;kt.prototype.getStatus=kt.prototype.da;kt.prototype.getResponseJson=kt.prototype.Wa;kt.prototype.getResponseText=kt.prototype.ja;kt.prototype.send=kt.prototype.ha;kt.prototype.setWithCredentials=kt.prototype.Oa;br.prototype.digest=br.prototype.l;br.prototype.reset=br.prototype.reset;br.prototype.update=br.prototype.j;it.prototype.add=it.prototype.add;it.prototype.multiply=it.prototype.R;it.prototype.modulo=it.prototype.gb;it.prototype.compare=it.prototype.X;it.prototype.toNumber=it.prototype.ea;it.prototype.toString=it.prototype.toString;it.prototype.getBits=it.prototype.D;it.fromNumber=Fr;it.fromString=aT;var FR=function(){return new cd},BR=function(){return dh()},Ff=hh,$R=E0,UR=_o,jw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jR=Ru,pc=C0,qR=kt,zR=br,Xo=it,HR={};const qw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new nh("@firebase/firestore");function Bm(){return is.logLevel}function WR(t){is.setLogLevel(t)}function W(t,...e){if(is.logLevel<=Ke.DEBUG){const n=e.map(Rv);is.debug(`Firestore (${xa}): ${t}`,...n)}}function xt(t,...e){if(is.logLevel<=Ke.ERROR){const n=e.map(Rv);is.error(`Firestore (${xa}): ${t}`,...n)}}function Ir(t,...e){if(is.logLevel<=Ke.WARN){const n=e.map(Rv);is.warn(`Firestore (${xa}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: `+t;throw xt(e),new Error(e)}function ye(t,e){t||he()}function GR(t,e){t||he()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class YR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QR{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new lT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Ht(e)}}class XR{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class JR{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new XR(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eO{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.T=n.token,new ZR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function ua(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function cT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new It(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new It(0,0))}static max(){return new pe(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xe extends Xl{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const nO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Xl{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return nO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Xe.fromString(e))}static fromName(e){return new ne(Xe.fromString(e).popFirst(5))}static empty(){return new ne(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function $m(t){return t.fields.find(e=>e.kind===2)}function Ls(t){return t.fields.filter(e=>e.kind!==2)}dT.UNKNOWN_ID=-1;class rO{constructor(e,n){this.fieldPath=e,this.kind=n}}class fd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fd(0,Yn.min())}}function hT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Yn(i,ne.empty(),e)}function fT(t){return new Yn(t.readTime,t.key,-1)}class Yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yn(pe.min(),ne.empty(),-1)}static max(){return new Yn(pe.max(),ne.empty(),-1)}}function Ov(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==mT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Wt,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Sl(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Mv(r.target.error);this.v.reject(new Sl(e,i))}}static open(e,n,r,i){try{return new bh(n,e.transaction(i,r))}catch(s){throw new Sl(n,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new sO(n)}}class vr{constructor(e,n,r){this.name=e,this.version=n,this.V=r,vr.S(Tt())===12.2&&xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!$l())return!1;if(vr.C())return!0;const e=Tt(),n=vr.S(e),r=0<n&&n<10,i=vr.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=HR)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async $(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Sl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new q(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Sl(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.V.O(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.$(e);const a=bh.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.P(),u)).catch(u=>(a.abort(u),N.reject(u))).toPromise();return l.catch(()=>{}),await a.R,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class iO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Bs(this.L.delete())}}class Sl extends q{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ss(t){return t.name==="IndexedDbTransactionError"}class sO{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bs(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Bs(this.store.add(e))}get(e){return Bs(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Bs(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Bs(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.W(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=Mv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new iO(a),u=n(a.primaryKey,a.value,l);if(u instanceof N){const c=u.catch(d=>(l.done(),N.reject(d)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Bs(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Mv(r.target.error);n(i)}})}let zw=!1;function Mv(t){const e=vr.S(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zw||(zw=!0,setTimeout(()=>{throw r},0)),r}}return t}class oO{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){W("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Ss(n)?W("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await _s(n)}await this.et(6e4)})}}class aO{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(i,s)).next(a=>(W("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=fT(s);Ov(o,r)>0&&(r=o)}),new Yn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Mn.ct=-1;function Vu(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function vT(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hw(e)),e=lO(t.get(n),e);return Hw(e)}function lO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Hw(t){return t+""}function Br(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Xe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&he(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:he()}s=o+2}return new Xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t,e){return[t,An(e)]}function pT(t,e,n){return[t,An(e),n]}const uO={},cO=["prefixPath","collectionGroup","readTime","documentId"],dO=["prefixPath","collectionGroup","documentId"],hO=["collectionGroup","readTime","prefixPath","documentId"],fO=["canonicalId","targetId"],mO=["targetId","path"],gO=["path","targetId"],vO=["collectionId","parent"],pO=["indexId","uid"],yO=["uid","sequenceNumber"],wO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bO=["indexId","uid","orderedDocumentKey"],IO=["userId","collectionPath","documentId"],_O=["userId","collectionPath","largestBatchId"],SO=["userId","collectionGroup","largestBatchId"],yT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TO=[...yT,"documentOverlays"],wT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bT=wT,EO=[...bT,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends gT{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function Qt(t,e){const n=oe(t);return vr.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Jt.RED,this.left=i??Jt.EMPTY,this.right=s??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Jt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Jt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kw(this.data.getIterator())}getIteratorFrom(e){return new Kw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Kw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Po(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new gt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _T("Invalid base64 string: "+i):i}}(e);return new jt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const kO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(ye(!!t),typeof t=="string"){let e=0;const n=kO.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vv(t){const e=t.mapValue.fields.__previous_value__;return Ih(e)?Vv(e):e}function Zl(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class as{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new as("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof as&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oc={nullValue:"NULL_VALUE"};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ih(t)?4:ST(t)?9007199254740991:10:he()}function Qr(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ss(r.timestampValue),o=ss(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return os(r.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ct(r.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(r.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ct(r.integerValue)===Ct(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ct(r.doubleValue),o=Ct(i.doubleValue);return s===o?Jl(s)===Jl(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Gw(s)!==Gw(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Qr(s[a],o[a])))return!1;return!0}(t,e);default:return he()}}function eu(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function ls(t,e){if(t===e)return 0;const n=ao(t),r=ao(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ct(i.integerValue||i.doubleValue),a=Ct(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Yw(t.timestampValue,e.timestampValue);case 4:return Yw(Zl(t),Zl(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(i,s){const o=os(i),a=os(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Ve(o[l],a[l]);if(u!==0)return u}return Ve(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Ve(Ct(i.latitude),Ct(s.latitude));return o!==0?o:Ve(Ct(i.longitude),Ct(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=ls(o[l],a[l]);if(u)return u}return Ve(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Yi.mapValue&&s===Yi.mapValue)return 0;if(i===Yi.mapValue)return 1;if(s===Yi.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=Ve(a[c],u[c]);if(d!==0)return d;const h=ls(o[a[c]],l[u[c]]);if(h!==0)return h}return Ve(a.length,u.length)}(t.mapValue,e.mapValue);default:throw he()}}function Yw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=ss(t),r=ss(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function ca(t){return jm(t)}function jm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ss(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?os(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ne.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=jm(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${jm(r.fields[a])}`;return s+"}"}(t.mapValue):he();var e,n}function lo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qm(t){return!!t&&"integerValue"in t}function tu(t){return!!t&&"arrayValue"in t}function Qw(t){return!!t&&"nullValue"in t}function Xw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mc(t){return!!t&&"mapValue"in t}function Tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ST(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function xO(t){return"nullValue"in t?Oc:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?lo(as.empty(),ne.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:he()}function DO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?lo(as.empty(),ne.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Yi:he()}function Jw(t,e){const n=ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Zw(t,e){const n=ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Tl(this.value))}}function TT(t){const e=[];return So(t.fields,(n,r)=>{const i=new Dt([n]);if(Mc(r)){const s=TT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,pe.min(),pe.min(),pe.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,pe.min(),pe.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,pe.min(),pe.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.position=e,this.inclusive=n}}function eb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function PO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{}class ze extends ET{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NO(e,n,r):n==="array-contains"?new MO(e,r):n==="in"?new PT(e,r):n==="not-in"?new VO(e,r):n==="array-contains-any"?new LO(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RO(e,r):new OO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ls(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class rt extends ET{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new rt(e,n)}matches(e){return da(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function da(t){return t.op==="and"}function zm(t){return t.op==="or"}function Lv(t){return CT(t)&&da(t)}function CT(t){for(const e of t.filters)if(e instanceof rt)return!1;return!0}function Hm(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(Lv(t))return t.filters.map(e=>Hm(e)).join(",");{const e=t.filters.map(n=>Hm(n)).join(",");return`${t.op}(${e})`}}function kT(t,e){return t instanceof ze?function(n,r){return r instanceof ze&&n.op===r.op&&n.field.isEqual(r.field)&&Qr(n.value,r.value)}(t,e):t instanceof rt?function(n,r){return r instanceof rt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&kT(s,r.filters[o]),!0):!1}(t,e):void he()}function AT(t,e){const n=t.filters.concat(e);return rt.create(n,t.op)}function xT(t){return t instanceof ze?function(e){return`${e.field.canonicalString()} ${e.op} ${ca(e.value)}`}(t):t instanceof rt?function(e){return e.op.toString()+" {"+e.getFilters().map(xT).join(" ,")+"}"}(t):"Filter"}class NO extends ze{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class RO extends ze{constructor(e,n){super(e,"in",n),this.keys=DT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OO extends ze{constructor(e,n){super(e,"not-in",n),this.keys=DT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class MO extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tu(n)&&eu(n.arrayValue,this.value)}}class PT extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}}class VO extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!eu(this.value.arrayValue,n)}}class LO extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function Wm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new FO(t,e,n,r,i,s,o)}function uo(t){const e=oe(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.dt=n}return e.dt}function Lu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tb(t.startAt,e.startAt)&&tb(t.endAt,e.endAt)}function md(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gd(t,e){return t.filters.filter(n=>n instanceof ze&&n.field.isEqual(e))}function nb(t,e,n){let r=Oc,i=!0;for(const s of gd(t,e)){let o=Oc,a=!0;switch(s.op){case"<":case"<=":o=xO(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Oc}Jw({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Jw({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function rb(t,e,n){let r=Yi,i=!0;for(const s of gd(t,e)){let o=Yi,a=!0;switch(s.op){case">=":case">":o=DO(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Yi}Zw({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Zw({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function NT(t,e,n,r,i,s,o,a){return new Ai(t,e,n,r,i,s,o,a)}function Da(t){return new Ai(t)}function ib(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _h(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Bv(t){return t.collectionGroup!==null}function Js(t){const e=oe(t);if(e.wt===null){e.wt=[];const n=_h(e),r=Fv(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Jo(n)),e.wt.push(new Jo(Dt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Jo(Dt.keyField(),s))}}}return e.wt}function $n(t){const e=oe(t);if(!e._t)if(e.limitType==="F")e._t=Wm(e.path,e.collectionGroup,Js(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Js(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Jo(s.field,o))}const r=e.endAt?new us(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new us(e.startAt.position,e.startAt.inclusive):null;e._t=Wm(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Gm(t,e){e.getFirstInequalityField(),_h(t);const n=t.filters.concat([e]);return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vd(t,e,n){return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fu(t,e){return Lu($n(t),$n(e))&&t.limitType===e.limitType}function RT(t){return`${uo($n(t))}|lt:${t.limitType}`}function Km(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>xT(r)).join(", ")}]`),Vu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),`Target(${n})`}($n(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ne.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Js(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=eb(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Js(n),r)||n.endAt&&!function(i,s,o){const a=eb(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Js(n),r))}(t,e)}function OT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MT(t){return(e,n)=>{let r=!1;for(const i of Js(t)){const s=BO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function BO(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?ls(a,l):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new dt(ne.comparator);function Ln(){return $O}const VT=new dt(ne.comparator);function dl(...t){let e=VT;for(const n of t)e=e.insert(n.key,n);return e}function LT(t){let e=VT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $r(){return El()}function FT(){return El()}function El(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const UO=new dt(ne.comparator),jO=new gt(ne.comparator);function Le(...t){let e=jO;for(const n of t)e=e.add(n);return e}const qO=new gt(Ve);function $v(){return qO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function $T(t){return{integerValue:""+t}}function UT(t,e){return vT(e)?$T(e):BT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function zO(t,e,n){return t instanceof ha?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ih(i)&&(i=Vv(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof co?qT(t,e):t instanceof ho?zT(t,e):function(r,i){const s=jT(r,i),o=sb(s)+sb(r.gt);return qm(s)&&qm(r.gt)?$T(o):BT(r.serializer,o)}(t,e)}function HO(t,e,n){return t instanceof co?qT(t,e):t instanceof ho?zT(t,e):n}function jT(t,e){return t instanceof fa?qm(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class ha extends Sh{}class co extends Sh{constructor(e){super(),this.elements=e}}function qT(t,e){const n=HT(e);for(const r of t.elements)n.some(i=>Qr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ho extends Sh{constructor(e){super(),this.elements=e}}function zT(t,e){let n=HT(e);for(const r of t.elements)n=n.filter(i=>!Qr(i,r));return{arrayValue:{values:n}}}class fa extends Sh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function sb(t){return Ct(t.integerValue||t.doubleValue)}function HT(t){return tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.field=e,this.transform=n}}function WO(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof co&&r instanceof co||n instanceof ho&&r instanceof ho?ua(n.elements,r.elements,Qr):n instanceof fa&&r instanceof fa?Qr(n.gt,r.gt):n instanceof ha&&r instanceof ha}(t.transform,e.transform)}class GO{constructor(e,n){this.version=e,this.transformResults=n}}class bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Th{}function WT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Na(t.key,bt.none()):new Pa(t.key,t.data,bt.none());{const n=t.data,r=nn.empty();let i=new gt(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xi(t.key,r,new Vn(i.toArray()),bt.none())}}function KO(t,e,n){t instanceof Pa?function(r,i,s){const o=r.value.clone(),a=ab(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xi?function(r,i,s){if(!Vc(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=ab(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(GT(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Cl(t,e,n,r){return t instanceof Pa?function(i,s,o,a){if(!Vc(i.precondition,s))return o;const l=i.value.clone(),u=lb(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof xi?function(i,s,o,a){if(!Vc(i.precondition,s))return o;const l=lb(i.fieldTransforms,a,s),u=s.data;return u.setAll(GT(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Vc(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function YO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=jT(r.transform,i||null);s!=null&&(n===null&&(n=nn.empty()),n.set(r.field,s))}return n||null}function ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ua(n,r,(i,s)=>WO(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pa extends Th{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xi extends Th{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ab(t,e,n){const r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,HO(o,a,n[i]))}return r}function lb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,zO(s,o,e))}return r}class Na extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uv extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=WT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(n,r)=>ob(n,r))&&ua(this.baseMutations,e.baseMutations,(n,r)=>ob(n,r))}}class qv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=UO;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new qv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ge;function KT(t){switch(t){default:return he();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function YT(t){if(t===void 0)return xt("GRPC error has no .code"),M.UNKNOWN;switch(t){case Vt.OK:return M.OK;case Vt.CANCELLED:return M.CANCELLED;case Vt.UNKNOWN:return M.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return M.INTERNAL;case Vt.UNAVAILABLE:return M.UNAVAILABLE;case Vt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Vt.NOT_FOUND:return M.NOT_FOUND;case Vt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Vt.ABORTED:return M.ABORTED;case Vt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Vt.DATA_LOSS:return M.DATA_LOSS;default:return he()}}(Ge=Vt||(Vt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return wc}static getOrCreateInstance(){return wc===null&&(wc=new Hv),wc}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let wc=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=new Xo([4294967295,4294967295],0);function ub(t){const e=QT().encode(t),n=new zR;return n.update(e),new Uint8Array(n.digest())}function cb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xo([n,r],0),new Xo([i,s],0)]}class Wv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hl(`Invalid padding: ${n}`);if(r<0)throw new hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hl(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Xo.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Xo.fromNumber(r)));return i.compare(XO)===1&&(i=new Xo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=ub(e),[r,i]=cb(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Wv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=ub(e),[r,i]=cb(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uu(pe.min(),i,new dt(Ve),Ln(),Le())}}class ju{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ju(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class XT{constructor(e,n){this.targetId=e,this.Vt=n}}class JT{constructor(e,n,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class db{constructor(){this.St=0,this.Dt=fb(),this.Ct=jt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Le(),n=Le(),r=Le();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new ju(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=fb()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class JO{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ln(),this.zt=hb(),this.Wt=new dt(Ve)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(md(o))if(i===0){const a=new ne(o.path);this.Yt(r,a,ft.newNoDocument(a,pe.min()))}else ye(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=Hv.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,d){var h,f,m,g,v,y;const w={localCacheCount:c,existenceFilterCount:d.count},_=d.unchangedNames;return _&&(w.bloomFilter={applied:u===0,hashCount:(h=_==null?void 0:_.hashCount)!==null&&h!==void 0?h:0,bitmapLength:(g=(m=(f=_==null?void 0:_.bits)===null||f===void 0?void 0:f.bitmap)===null||m===void 0?void 0:m.length)!==null&&g!==void 0?g:0,padding:(y=(v=_==null?void 0:_.bits)===null||v===void 0?void 0:v.padding)!==null&&y!==void 0?y:0}),w}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=os(s).toUint8Array()}catch(c){if(c instanceof _T)return Ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new Wv(l,o,a)}catch(c){return Ir(c instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&md(a.target)){const l=new ne(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,ft.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=Le();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Uu(e,n,this.Wt,this.jt,r);return this.jt=Ln(),this.zt=hb(),this.Wt=new dt(Ve),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new db,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new gt(Ve),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new db),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function hb(){return new dt(ne.comparator)}function fb(){return new dt(ne.comparator)}const ZO={asc:"ASCENDING",desc:"DESCENDING"},eM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tM={and:"AND",or:"OR"};class nM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rM(t,e){return ma(t,e.toTimestamp())}function Rt(t){return ye(!!t),pe.fromTimestamp(function(e){const n=ss(e);return new It(n.seconds,n.nanos)}(t))}function Gv(t,e){return function(n){return new Xe(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function eE(t){const e=Xe.fromString(t);return ye(uE(e)),e}function nu(t,e){return Gv(t.databaseId,e.path)}function Hr(t,e){const n=eE(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(nE(n))}function Qm(t,e){return Gv(t.databaseId,e)}function tE(t){const e=eE(t);return e.length===4?Xe.emptyPath():nE(e)}function ru(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nE(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mb(t,e,n){return{name:nu(t,e),fields:n.value.mapValue.fields}}function rE(t,e,n){const r=Hr(t,e.name),i=Rt(e.updateTime),s=e.createTime?Rt(e.createTime):pe.min(),o=new nn({mapValue:{fields:e.fields}}),a=ft.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function iM(t,e){return"found"in e?function(n,r){ye(!!r.found),r.found.name,r.found.updateTime;const i=Hr(n,r.found.name),s=Rt(r.found.updateTime),o=r.found.createTime?Rt(r.found.createTime):pe.min(),a=new nn({mapValue:{fields:r.found.fields}});return ft.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){ye(!!r.missing),ye(!!r.readTime);const i=Hr(n,r.missing),s=Rt(r.readTime);return ft.newNoDocument(i,s)}(t,e):he()}function sM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(ye(u===void 0||typeof u=="string"),jt.fromBase64String(u||"")):(ye(u===void 0||u instanceof Uint8Array),jt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?M.UNKNOWN:YT(l.code);return new q(u,l.message||"")}(o);n=new JT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hr(t,r.document.name),s=Rt(r.document.updateTime),o=r.document.createTime?Rt(r.document.createTime):pe.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Lc(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hr(t,r.document),s=r.readTime?Rt(r.readTime):pe.min(),o=ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hr(t,r.document),s=r.removedTargetIds||[];n=new Lc([],s,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QO(i,s),a=r.targetId;n=new XT(a,o)}}return n}function iu(t,e){let n;if(e instanceof Pa)n={update:mb(t,e.key,e.value)};else if(e instanceof Na)n={delete:nu(t,e.key)};else if(e instanceof xi)n={update:mb(t,e.key,e.data),updateMask:dM(e.fieldMask)};else{if(!(e instanceof Uv))return he();n={verify:nu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof ha)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof co)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ho)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof fa)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:rM(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:he()}(t,e.precondition)),n}function Xm(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?bt.updateTime(Rt(i.updateTime)):i.exists!==void 0?bt.exists(i.exists):bt.none()}(e.currentDocument):bt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)ye(o.setToServerValue==="REQUEST_TIME"),a=new ha;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new co(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new ho(u)}else"increment"in o?a=new fa(s,o.increment):he();const l=Dt.fromServerFormat(o.fieldPath);return new $u(l,a)}(t,i)):[];if(e.update){e.update.name;const i=Hr(t,e.update.name),s=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Vn(l.map(u=>Dt.fromServerFormat(u)))}(e.updateMask);return new xi(i,s,o,n,r)}return new Pa(i,s,n,r)}if(e.delete){const i=Hr(t,e.delete);return new Na(i,n)}if(e.verify){const i=Hr(t,e.verify);return new Uv(i,n)}return he()}function oM(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Rt(r.updateTime):Rt(i);return s.isEqual(pe.min())&&(s=Rt(i)),new GO(s,r.transformResults||[])}(n,e))):[]}function iE(t,e){return{documents:[Qm(t,e.path)]}}function sE(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Qm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Qm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return lE(rt.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Fo(c.field),direction:lM(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ym(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function oE(t){let e=tE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const d=aE(c);return d instanceof rt&&Lv(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(d){return new Jo(Bo(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,Vu(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,h=c.values||[];return new us(h,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,h=c.values||[];return new us(h,d)}(n.endAt)),NT(e,i,o,s,a,"F",l,u)}function aM(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aE(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Bo(e.unaryFilter.field);return ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Bo(e.unaryFilter.field);return ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bo(e.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Bo(e.unaryFilter.field);return ze.create(s,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(e){return ze.create(Bo(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return rt.create(e.compositeFilter.filters.map(n=>aE(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return he()}}(e.compositeFilter.op))}(t):he()}function lM(t){return ZO[t]}function uM(t){return eM[t]}function cM(t){return tM[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Bo(t){return Dt.fromServerFormat(t.fieldPath)}function lE(t){return t instanceof ze?function(e){if(e.op==="=="){if(Xw(e.value))return{unaryFilter:{field:Fo(e.field),op:"IS_NAN"}};if(Qw(e.value))return{unaryFilter:{field:Fo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Xw(e.value))return{unaryFilter:{field:Fo(e.field),op:"IS_NOT_NAN"}};if(Qw(e.value))return{unaryFilter:{field:Fo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(e.field),op:uM(e.op),value:e.value}}}(t):t instanceof rt?function(e){const n=e.getFilters().map(r=>lE(r));return n.length===1?n[0]:{compositeFilter:{op:cM(e.op),filters:n}}}(t):he()}function dM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.fe=e}}function hM(t,e){let n;if(e.document)n=rE(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ne.fromSegments(e.noDocument.path),i=mo(e.noDocument.readTime);n=ft.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{const r=ne.fromSegments(e.unknownDocument.path),i=mo(e.unknownDocument.version);n=ft.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new It(r[0],r[1]);return pe.fromTimestamp(i)}(e.readTime)),n}function gb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:nu(i,s.key),fields:s.data.value.mapValue.fields,updateTime:ma(i,s.version.toTimestamp()),createTime:ma(i,s.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return he();r.unknownDocument={path:n.path.toArray(),version:fo(e.version)}}return r}function pd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mo(t){const e=new It(t.seconds,t.nanoseconds);return pe.fromTimestamp(e)}function $s(t,e){const n=(e.baseMutations||[]).map(s=>Xm(t.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Xm(t.fe,s)),i=It.fromMillis(e.localWriteTimeMs);return new jv(e.batchId,i,n,r)}function fl(t){const e=mo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?mo(t.lastLimboFreeSnapshotVersion):pe.min();let r;var i;return t.query.documents!==void 0?(ye((i=t.query).documents.length===1),r=$n(Da(tE(i.documents[0])))):r=function(s){return $n(oE(s))}(t.query),new li(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,jt.fromBase64String(t.resumeToken))}function dE(t,e){const n=fo(e.snapshotVersion),r=fo(e.lastLimboFreeSnapshotVersion);let i;i=md(e.target)?iE(t.fe,e.target):sE(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kv(t){const e=oE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vd(e,e.limit,"L"):e}function Bf(t,e){return new zv(e.largestBatchId,Xm(t.fe,e.overlayMutation))}function vb(t,e){const n=e.path.lastSegment();return[t,An(e.path.popLast()),n]}function pb(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:fo(r.readTime),documentKey:An(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{getBundleMetadata(e,n){return yb(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:mo(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return yb(e).put({bundleId:(r=n).id,createTime:fo(Rt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return wb(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Kv(i.bundledQuery),readTime:mo(i.readTime)};var i})}saveNamedQuery(e,n){return wb(e).put(function(r){return{name:r.name,readTime:fo(Rt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function yb(t){return Qt(t,"bundles")}function wb(t){return Qt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const r=n.uid||"";return new Eh(e,r)}getOverlay(e,n){return Xa(e).get(vb(this.userId,n)).next(r=>r?Bf(this.serializer,r):null)}getOverlays(e,n){const r=$r();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new zv(n,o);i.push(this.we(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(An(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Xa(e).J("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=$r(),s=An(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xa(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Bf(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=$r();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Xa(e).X({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=Bf(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}we(e,n){return Xa(e).put(function(r,i,s){const[o,a,l]=vb(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:iu(r.fe,s.mutation)}}(this.serializer,this.userId,n))}}function Xa(t){return Qt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Ct(e.integerValue));else if("doubleValue"in e){const r=Ct(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Jl(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),typeof r=="string"?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(os(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?ST(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):he()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),ne.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Us.Ve=new Us;function mM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bb(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=mM(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class gM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=n.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=n.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const n=this.Fe(e),r=bb(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Le(e){const n=this.Fe(e),r=bb(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vM{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class pM{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ja{constructor(){this.je=new gM,this.ze=new vM(this.je),this.We=new pM(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new js(this.indexId,this.documentKey,this.arrayValue,r)}}function Fi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Ib(t.arrayValue,e.arrayValue),n!==0?n:(n=Ib(t.directionalValue,e.directionalValue),n!==0?n:ne.comparator(t.documentKey,e.documentKey)))}function Ib(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ye(e.collectionGroup===this.collectionId);const n=$m(e);if(n!==void 0&&!this.en(n))return!1;const r=Ls(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Ze!==void 0){if(!i.has(this.Ze.field.canonicalString())){const a=r[s];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){var e,n;if(ye(t instanceof ze||t instanceof rt),t instanceof ze){if(t instanceof PT){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ze.create(t.field,"==",s)))||[];return rt.create(i,"or")}return t}const r=t.filters.map(i=>hE(i));return rt.create(r,t.op)}function wM(t){if(t.getFilters().length===0)return[];const e=eg(hE(t));return ye(fE(e)),Jm(e)||Zm(e)?[e]:e.getFilters()}function Jm(t){return t instanceof ze}function Zm(t){return t instanceof rt&&Lv(t)}function fE(t){return Jm(t)||Zm(t)||function(e){if(e instanceof rt&&zm(e)){for(const n of e.getFilters())if(!Jm(n)&&!Zm(n))return!1;return!0}return!1}(t)}function eg(t){if(ye(t instanceof ze||t instanceof rt),t instanceof ze)return t;if(t.filters.length===1)return eg(t.filters[0]);const e=t.filters.map(r=>eg(r));let n=rt.create(e,t.op);return n=yd(n),fE(n)?n:(ye(n instanceof rt),ye(da(n)),ye(n.filters.length>1),n.filters.reduce((r,i)=>Yv(r,i)))}function Yv(t,e){let n;return ye(t instanceof ze||t instanceof rt),ye(e instanceof ze||e instanceof rt),n=t instanceof ze?e instanceof ze?function(r,i){return rt.create([r,i],"and")}(t,e):_b(t,e):e instanceof ze?_b(e,t):function(r,i){if(ye(r.filters.length>0&&i.filters.length>0),da(r)&&da(i))return AT(r,i.getFilters());const s=zm(r)?r:i,o=zm(r)?i:r,a=s.filters.map(l=>Yv(l,o));return rt.create(a,"or")}(t,e),yd(n)}function _b(t,e){if(da(e))return AT(e,t.getFilters());{const n=e.filters.map(r=>Yv(t,r));return rt.create(n,"or")}}function yd(t){if(ye(t instanceof ze||t instanceof rt),t instanceof ze)return t;const e=t.getFilters();if(e.length===1)return yd(e[0]);if(CT(t))return t;const n=e.map(i=>yd(i)),r=[];return n.forEach(i=>{i instanceof ze?r.push(i):i instanceof rt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:rt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.rn=new Qv}addToCollectionParentIndex(e,n){return this.rn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Yn.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class Qv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gt(Xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Uint8Array(0);class IM{constructor(e,n){this.user=e,this.databaseId=n,this.on=new Qv,this.un=new Ts(r=>uo(r),(r,i)=>Lu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:r,parent:An(i)};return Sb(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[cT(n),""],!1,!0);return Sb(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Br(o.parent))}return r})}addFieldIndex(e,n){const r=Ic(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=el(e);return s.next(a=>{o.put(pb(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ic(e),i=el(e),s=Za(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Za(e);let i=!0;const s=new Map;return N.forEach(this.cn(n),o=>this.an(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Le();const a=[];return N.forEach(s,(l,u)=>{var c;W("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(_=>`${_.fieldPath}:${_.kind}`).join(",")}`} to execute ${uo(n)}`);const d=function(_,b){const T=$m(b);if(T===void 0)return null;for(const E of gd(_,T.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(u,l),h=function(_,b){const T=new Map;for(const E of Ls(b))for(const A of gd(_,E.fieldPath))switch(A.op){case"==":case"in":T.set(E.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return T.set(E.fieldPath.canonicalString(),A.value),Array.from(T.values())}return null}(u,l),f=function(_,b){const T=[];let E=!0;for(const A of Ls(b)){const D=A.kind===0?nb(_,A.fieldPath,_.startAt):rb(_,A.fieldPath,_.startAt);T.push(D.value),E&&(E=D.inclusive)}return new us(T,E)}(u,l),m=function(_,b){const T=[];let E=!0;for(const A of Ls(b)){const D=A.kind===0?rb(_,A.fieldPath,_.endAt):nb(_,A.fieldPath,_.endAt);T.push(D.value),E&&(E=D.inclusive)}return new us(T,E)}(u,l),g=this.hn(l,u,f),v=this.hn(l,u,m),y=this.ln(l,u,h),w=this.fn(l.indexId,d,g,f.inclusive,v,m.inclusive,y);return N.forEach(w,_=>r.H(_,n.limit).next(b=>{b.forEach(T=>{const E=ne.fromSegments(T.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return N.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=wM(rt.create(e.filters,"and")).map(r=>Wm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const h=n?this.dn(n[d/u]):bc,f=this.wn(e,h,r[d%u],i),m=this._n(e,h,s[d%u],o),g=a.map(v=>this.wn(e,h,v,!0));c.push(...this.createRange(f,m,g))}return c}wn(e,n,r,i){const s=new js(e,ne.empty(),n,r);return i?s:s.Je()}_n(e,n,r,i){const s=new js(e,ne.empty(),n,r);return i?s.Je():s}an(e,n){const r=new yM(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return N.forEach(i,s=>this.an(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new gt(Dt.comparator),u=!1;for(const c of a.filters)for(const d of c.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?u=!0:l=l.add(d.field));for(const c of a.orderBy)c.field.isKeyField()||(l=l.add(c.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}mn(e,n){const r=new Ja;for(const i of Ls(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.He(i.kind);Us.Ve._e(s,o)}return r.Qe()}dn(e){const n=new Ja;return Us.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new Ja;return Us.Ve._e(lo(this.databaseId,n),r.He(function(i){const s=Ls(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(r===null)return[];let i=[];i.push(new Ja);let s=0;for(const o of Ls(e)){const a=r[s++];for(const l of i)if(this.yn(n,o.fieldPath)&&tu(a))i=this.pn(i,o,a);else{const u=l.He(o.kind);Us.Ve._e(a,u)}}return this.In(i)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ja;l.seed(a.Qe()),Us.Ve._e(o,l.He(n.kind)),s.push(l)}return s}yn(e,n){return!!e.filters.find(r=>r instanceof ze&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ic(e),i=el(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const d=c?new fd(c.sequenceNumber,new Yn(mo(c.readTime),new ne(Br(c.documentKey)),c.largestBatchId)):fd.empty(),h=u.fields.map(([f,m])=>new rO(Dt.fromServerFormat(f),m));return new dT(u.indexId,u.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ic(e),s=el(e);return this.Tn(e).next(o=>i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,l=>s.put(pb(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,l=>this.En(e,i,l).next(u=>{const c=this.An(s,l);return u.isEqual(c)?N.resolve():this.vn(e,s,l,u,c)}))))})}Rn(e,n,r,i){return Za(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,i){return Za(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const i=Za(e);let s=new gt(Fi);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new js(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}An(e,n){let r=new gt(Fi);const i=this.mn(n,e);if(i==null)return r;const s=$m(n);if(s!=null){const o=e.data.field(s.fieldPath);if(tu(o))for(const a of o.arrayValue.values||[])r=r.add(new js(n.indexId,e.key,this.dn(a),i))}else r=r.add(new js(n.indexId,e.key,bc,i));return r}vn(e,n,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,d){const h=a.getIterator(),f=l.getIterator();let m=Po(h),g=Po(f);for(;m||g;){let v=!1,y=!1;if(m&&g){const w=u(m,g);w<0?y=!0:w>0&&(v=!0)}else m!=null?y=!0:v=!0;v?(c(g),g=Po(f)):y?(d(m),m=Po(h)):(m=Po(h),g=Po(f))}}(i,s,Fi,a=>{o.push(this.Rn(e,n,r,a))},a=>{o.push(this.Pn(e,n,r,a))}),N.waitFor(o)}Tn(e){let n=1;return el(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Fi(o,a)).filter((o,a,l)=>!a||Fi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Fi(o,e),l=Fi(o,n);if(a===0)i[0]=e.Je();else if(a>0&&l<0)i.push(o),i.push(o.Je());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,bc,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,bc,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,n){return Fi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Tb)}getMinOffset(e,n){return N.mapArray(this.cn(n),r=>this.an(e,r).next(i=>i||he())).next(Tb)}}function Sb(t){return Qt(t,"collectionParents")}function Za(t){return Qt(t,"indexEntries")}function Ic(t){return Qt(t,"indexConfiguration")}function el(t){return Qt(t,"indexState")}function Tb(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Ov(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(c,d,h)=>(a++,h.delete()));s.push(l.next(()=>{ye(a===1)}));const u=[];for(const c of n.mutations){const d=pT(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return N.waitFor(s).next(()=>u)}function wd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw he();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class Ch{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,n,r,i){ye(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Ch(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bi(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=$o(e),o=Bi(e);return o.add({}).next(a=>{ye(typeof a=="number");const l=new jv(a,n,r,i),u=function(h,f,m){const g=m.baseMutations.map(y=>iu(h.fe,y)),v=m.mutations.map(y=>iu(h.fe,y));return{userId:f,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:g,mutations:v}}(this.serializer,this.userId,l),c=[];let d=new gt((h,f)=>Ve(h.canonicalString(),f.canonicalString()));for(const h of i){const f=pT(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,uO))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Vn[a]=l.keys()}),N.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Bi(e).get(n).next(r=>r?(ye(r.userId===this.userId),$s(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?N.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Bi(e).X({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ye(a.batchId>=r),s=$s(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Bi(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bi(e).j("userMutationsIndex",n).next(r=>r.map(i=>$s(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Rc(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return $o(e).X({range:i},(o,a,l)=>{const[u,c,d]=o,h=Br(c);if(u===this.userId&&n.path.isEqual(h))return Bi(e).get(d).next(f=>{if(!f)throw he();ye(f.userId===this.userId),s.push($s(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Ve);const i=[];return n.forEach(s=>{const o=Rc(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$o(e).X({range:a},(u,c,d)=>{const[h,f,m]=u,g=Br(f);h===this.userId&&s.path.isEqual(g)?r=r.add(m):d.done()});i.push(l)}),N.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Rc(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new gt(Ve);return $o(e).X({range:o},(l,u,c)=>{const[d,h,f]=l,m=Br(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Dn(e,a))}Dn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Bi(e).get(s).next(o=>{if(o===null)throw he();ye(o.userId===this.userId),r.push($s(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mE(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $o(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Br(s[1]);i.push(l)}else a.done()}).next(()=>{ye(i.length===0)})})}containsKey(e,n){return gE(e,this.userId,n)}xn(e){return vE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gE(t,e,n){const r=Rc(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $o(t).X({range:s,Y:!0},(a,l,u)=>{const[c,d,h]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Bi(t){return Qt(t,"mutations")}function $o(t){return Qt(t,"documentMutations")}function vE(t){return Qt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new go(0)}static Mn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new go(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>pe.fromTimestamp(new It(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.On(e,i)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>No(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return No(e).X((o,a)=>{const l=fl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return No(e).X((r,i)=>{const s=fl(i);n(s)})}$n(e){return Cb(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}On(e,n){return Cb(e).put("targetGlobalKey",n)}Fn(e,n){return No(e).put(dE(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=uo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return No(e).X({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=fl(a);Lu(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Gi(e);return n.forEach(o=>{const a=An(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Gi(e);return N.forEach(n,s=>{const o=An(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Gi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Gi(e);let s=Le();return i.X({range:r,Y:!0},(o,a,l)=>{const u=Br(o[1]),c=new ne(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=An(n.path),i=IDBKeyRange.bound([r],[cT(r)],!1,!0);let s=0;return Gi(e).X({index:"documentTargetsIndex",Y:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}le(e,n){return No(e).get(n).next(r=>r?fl(r):null)}}function No(t){return Qt(t,"targets")}function Cb(t){return Qt(t,"targetGlobal")}function Gi(t){return Qt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class SM{constructor(e){this.Ln=e,this.buffer=new gt(kb),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ss(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await _s(n)}await this.Qn(3e5)})}}class EM{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(Mn.ct);const r=new SM(n);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(Eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eb):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Bm()<=Ke.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function CM(t,e){return new EM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.db=e,this.garbageCollector=CM(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,i)=>n(i))}addReference(e,n,r){return _c(e,r)}removeReference(e,n,r){return _c(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return _c(e,n)}Xn(e,n){return function(r,i){let s=!1;return vE(r).Z(o=>gE(r,o,i).next(a=>(a&&(s=!0),N.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,pe.min()),Gi(e).delete([0,An(o.path)])))});i.push(l)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return _c(e,n)}Yn(e,n){const r=Gi(e);let i,s=Mn.ct;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Mn.ct&&n(new ne(Br(i)),s),s=u,i=l):s=Mn.ct}).next(()=>{s!==Mn.ct&&n(new ne(Br(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _c(t,e){return Gi(t).put(function(n,r){return{targetId:0,path:An(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ns(e).put(r)}removeEntry(e,n,r){return Ns(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],pd(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=ft.newInvalidDocument(n);return Ns(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tl(n))},(i,s)=>{r=this.ts(n,s)}).next(()=>r)}es(e,n){let r={size:0,document:ft.newInvalidDocument(n)};return Ns(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tl(n))},(i,s)=>{r={document:this.ts(n,s),size:wd(s)}}).next(()=>r)}getEntries(e,n){let r=Ln();return this.ns(e,n,(i,s)=>{const o=this.ts(i,s);r=r.insert(i,o)}).next(()=>r)}ss(e,n){let r=Ln(),i=new dt(ne.comparator);return this.ns(e,n,(s,o)=>{const a=this.ts(s,o);r=r.insert(s,a),i=i.insert(s,wd(o))}).next(()=>({documents:r,rs:i}))}ns(e,n,r){if(n.isEmpty())return N.resolve();let i=new gt(Db);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(tl(i.first()),tl(i.last())),o=i.getIterator();let a=o.getNext();return Ns(e).X({index:"documentKeyIndex",range:s},(l,u,c)=>{const d=ne.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Db(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.G(tl(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),pd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ns(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let u=Ln();for(const c of l){const d=this.ts(ne.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);d.isFoundDocument()&&(Bu(n,d)||i.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=Ln();const o=xb(n,r),a=xb(n,Yn.max());return Ns(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.ts(ne.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new xM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Ab(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}Zn(e,n){return Ab(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=hM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(pe.min())))return r}return ft.newInvalidDocument(e)}}function yE(t){return new AM(t)}class xM extends pE{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Ts(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new gt((s,o)=>Ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.us.get(s);if(n.push(this.os.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=gb(this.os.serializer,o);i=i.add(s.path.popLast());const u=wd(l);r+=u-a.size,n.push(this.os.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=gb(this.os.serializer,o.convertToNoDocument(pe.min()));n.push(this.os.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.os.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:i})=>(i.forEach((s,o)=>{this.us.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Ab(t){return Qt(t,"remoteDocumentGlobal")}function Ns(t){return Qt(t,"remoteDocumentsV14")}function tl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xb(t,e){const n=e.documentKey.path.toArray();return[t,pd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Db(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ve(n[s],r[s]),i)return i;return i=Ve(n.length,r.length),i||(i=Ve(n[n.length-2],r[r.length-2]),i||Ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cl(r.mutation,i,Vn.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Le()){const i=$r();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=dl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ln();const o=El(),a=El();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof xi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Cl(c.mutation,u,c.mutation.getFieldMask(),It.now())):o.set(u.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new DM(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=El();let i=new dt((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Vn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||Le()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=FT();c.forEach(h=>{if(!s.has(h)){const f=WT(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve($r());let a=-1,l=s;return o.next(u=>N.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?N.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Le())).next(c=>({batchId:a,changes:LT(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=dl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=dl();return this.indexManager.getCollectionParents(e,i).next(o=>N.forEach(o,a=>{const l=function(u,c){return new Ai(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,ft.newInvalidDocument(u)))});let o=dl();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&Cl(u.mutation,l,Vn.empty(),It.now()),Bu(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return N.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Rt(r.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:Kv(r.bundledQuery),readTime:Rt(r.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.overlays=new dt(ne.comparator),this.ls=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=$r(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=$r(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=$r(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return N.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zv(n,r));let s=this.ls.get(n);s===void 0&&(s=Le(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.fs=new gt(zt.ds),this.ws=new gt(zt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new zt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new zt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new ne(new Xe([])),r=new zt(n,e),i=new zt(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new ne(new Xe([])),r=new zt(n,e),i=new zt(n,e+1);let s=Le();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new zt(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return ne.comparator(e.key,n.key)||Ve(e.As,n.As)}static _s(e,n){return Ve(e.As,n.As)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new gt(zt.ds)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),i=new zt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Ve);return n.forEach(i=>{const s=new zt(i,0),o=new zt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),N.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new zt(new ne(s),0);let a=new gt(Ve);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),N.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return N.forEach(n.mutations,i=>{const s=new zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new zt(n,0),i=this.Rs.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.Ds=e,this.docs=new dt(ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Ln();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ln();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Ov(fT(c),r)<=0||(i.has(c.key)||Bu(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Cs(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MM(this)}getSize(e){return N.resolve(this.size)}}class MM extends pE{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.persistence=e,this.xs=new Ts(n=>uo(n),Lu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Xv,this.targetCount=0,this.Ms=go.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),N.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Fn(n),N.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.$s={},this.overlays={},this.Os=new Mn(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new VM(this),this.indexManager=new bM,this.remoteDocumentCache=function(r){return new OM(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new cE(n),this.qs=new PM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new RM(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new LM(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return N.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class LM extends gT{constructor(e){super(),this.currentSequenceNumber=e}}class kh{constructor(e){this.persistence=e,this.Qs=new Xv,this.js=null}static zs(e){return new kh(e)}get Ws(){if(this.js)return this.js;throw he()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),N.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ws,r=>{const i=ne.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return N.or([()=>N.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.serializer=e}O(e,n,r,i){const s=new bh("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ww,{unique:!0}),a.createObjectStore("documentMutations")}(e),Pb(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Pb(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ww,{unique:!0});const c=l.store("mutations"),d=u.map(h=>c.put(h));return N.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Ys(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(o=o.next(()=>this.Zs(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ei(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:IO});l.createIndex("collectionPathOverlayIndex",_O,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",SO,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:cO});l.createIndex("documentKeyIndex",dO),l.createIndex("collectionGroupIndex",hO)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:pO}).createIndex("sequenceNumberIndex",yO,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:wO}).createIndex("documentKeyIndex",bO,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=wd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(a=>N.forEach(a,l=>{ye(l.userId===s.userId);const u=$s(this.serializer,l);return mE(e,s.userId,u).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const l=new Xe(o),u=function(c){return[0,An(c)]}(l);s.push(n.get(u).next(c=>c?N.resolve():(d=>n.put({targetId:0,path:An(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:vO});const r=n.store("collectionParents"),i=new Qv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:An(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new Xe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],u)=>{const c=Br(a);return s(c.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,i)=>{const s=fl(i),o=dE(this.serializer,s);return n.put(o)})}ni(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new ne(Xe.fromString(u.document.name).popFirst(5)):u.noDocument?ne.fromSegments(u.noDocument.path):u.unknownDocument?ne.fromSegments(u.unknownDocument.path):he()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>N.waitFor(i))}si(e,n){const r=n.store("mutations"),i=yE(this.serializer),s=new bE(kh.zs,this.serializer.fe);return r.j().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:Le();$s(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),N.forEach(a,(l,u)=>{const c=new Ht(u),d=Eh.de(this.serializer,c),h=s.getIndexManager(c),f=Ch.de(c,this.serializer,h,s.referenceDelegate);return new wE(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Um(n,Mn.ct),l).next()})})}}function Pb(t){t.createObjectStore("targetDocuments",{keyPath:mO}).createIndex("documentTargetsIndex",gO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fO,{unique:!0}),t.createObjectStore("targetGlobal")}const $f="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jv{constructor(e,n,r,i,s,o,a,l,u,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=s,this.window=o,this.document=a,this.ri=u,this.oi=c,this.ui=d,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=h=>Promise.resolve(),!Jv.D())throw new q(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kM(this,i),this.di=n+"main",this.serializer=new cE(l),this.wi=new vr(this.di,this.ui,new FM(this.serializer)),this.Bs=new _M(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yE(this.serializer),this.qs=new fM,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,c===!1&&xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,$f);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Mn(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Ss(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return nl(e).get("owner").next(n=>N.resolve(this.Ri(n)))}Pi(e){return Sc(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Qt(n,"clientMetadata");return r.j().next(i=>{const s=this.Si(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?N.resolve(!0):nl(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new q(M.FAILED_PRECONDITION,$f);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sc(e).j().next(r=>this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Um(e,Mn.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Sc(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Ch.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IM(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Eh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ui)===15?EO:o===14?bT:o===13?wT:o===12?TO:o===11?yT:void he();var o;let a;return this.wi.runTransaction(e,i,s,l=>(a=new Um(l,this.Os?this.Os.next():Mn.ct),n==="readwrite-primary"?this.Ti(a).next(u=>!!u||this.Ei(a)).next(u=>{if(!u)throw xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new q(M.FAILED_PRECONDITION,mT);return r(a)}).next(u=>this.vi(a).next(()=>u)):this.Oi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return nl(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(M.FAILED_PRECONDITION,$f)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nl(e).put("owner",n)}static D(){return vr.D()}Ai(e){const n=nl(e);return n.get("owner").next(r=>this.Ri(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;hP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){xt("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nl(t){return Qt(t,"owner")}function Sc(t){return Qt(t,"clientMetadata")}function Zv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=Le(),i=Le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ep(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(ib(n))return N.resolve(null);let r=$n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vd(n,null,"F"),r=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Le(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,vd(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return ib(n)||i.isEqual(pe.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(Bm()<=Ke.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Km(n)),this.Wi(e,o,n,hT(i,-1)))})}ji(e,n){let r=new gt(MT(e));return n.forEach((i,s)=>{Bu(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return Bm()<=Ke.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Km(n)),this.Ui.getDocumentsMatchingQuery(e,n,Yn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new dt(Ve),this.Yi=new Ts(s=>uo(s),Lu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function _E(t,e,n,r){return new BM(t,e,n,r)}async function SE(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Le();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function $M(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let h=N.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(m=>{const g=l.docVersions.get(f);ye(g!==null),m.version.compareTo(g)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Le();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TE(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function UM(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(jt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(m,g,v){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,f,c)&&a.push(n.Bs.updateTargetData(s,f))});let l=Ln(),u=Le();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(EE(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(pe.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function EE(t,e,n){let r=Le(),i=Le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ln();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function jM(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ga(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new li(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function va(t,e,n){const r=oe(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ss(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function bd(t,e,n){const r=oe(t);let i=pe.min(),s=Le();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=oe(a),d=c.Yi.get(u);return d!==void 0?N.resolve(c.Ji.get(d)):c.Bs.getTargetData(l,u)}(r,o,$n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:Le())).next(a=>(AE(r,OT(e),a),{documents:a,ir:s})))}function CE(t,e){const n=oe(t),r=oe(n.Bs),i=n.Ji.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(o=>o?o.target:null))}function kE(t,e){const n=oe(t),r=n.Xi.get(e)||pe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Zi.getAllFromCollectionGroup(i,e,hT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(AE(n,e,i),i))}function AE(t,e,n){let r=t.Xi.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}async function qM(t,e,n,r){const i=oe(t);let s=Le(),o=Ln();for(const u of n){const c=e.rr(u.metadata.name);u.document&&(s=s.add(c));const d=e.ur(u);d.setReadTime(e.cr(u.metadata.readTime)),o=o.insert(c,d)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),l=await ga(i,function(u){return $n(Da(Xe.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>EE(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Bs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Bs.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.nr,c.sr)).next(()=>c.nr)))}async function zM(t,e,n=Le()){const r=await ga(t,$n(Kv(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Rt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.qs.saveNamedQuery(s,e);const a=r.withResumeToken(jt.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(a.targetId,a),i.Bs.updateTargetData(s,a).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,n,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}function Nb(t,e){return`firestore_clients_${t}_${e}`}function Rb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uf(t,e){return`firestore_targets_${t}_${e}`}class Id{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static ar(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new q(i.error.code,i.error.message))),o?new Id(e,n,i.state,s):(xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new q(r.error.code,r.error.message))),s?new kl(e,r.state,i):(xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=$v();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=vT(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new _d(e,s):(xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class tp{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new tp(n.clientId,n.onlineState):(xt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tg{constructor(){this.activeTargetIds=$v()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jf{constructor(e,n,r,i,s){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new dt(Ve),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Nb(this.persistenceKey,this.wr),this.Ir=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new tg),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.wr)continue;const i=this.getItem(Nb(this.persistenceKey,r));if(i){const s=_d.ar(r,i);s&&(this.gr=this.gr.insert(s.clientId,s))}}this.Pr();const n=this.storage.getItem(this.vr);if(n){const r=this.br(n);r&&this.Vr(r)}for(const r of this.yr)this.mr(r);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Uf(this.persistenceKey,e));if(r){const i=kl.ar(e,r);i&&(n=i.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uf(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Tr.test(n.key)){if(n.newValue==null){const r=this.Or(n.key);return this.Fr(r,null)}{const r=this.Br(n.key,n.newValue);if(r)return this.Fr(r.clientId,r)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const r=this.Lr(n.key,n.newValue);if(r)return this.qr(r)}}else if(this.Ar.test(n.key)){if(n.newValue!==null){const r=this.Ur(n.key,n.newValue);if(r)return this.Kr(r)}}else if(n.key===this.vr){if(n.newValue!==null){const r=this.br(n.newValue);if(r)return this.Vr(r)}}else if(n.key===this.Ir){const r=function(i){let s=Mn.ct;if(i!=null)try{const o=JSON.parse(i);ye(typeof o=="number"),s=o}catch(o){xt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Mn.ct&&this.sequenceNumberHandler(r)}else if(n.key===this.Rr){const r=this.Gr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Qr(i)))}}}else this.yr.push(n)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const i=new Id(this.currentUser,e,n,r),s=Rb(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const n=Rb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){const n={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(n))}kr(e,n,r){const i=Uf(this.persistenceKey,e),s=new kl(e,n,r);this.setItem(i,s.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return _d.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Id.ar(new Ht(s),i,n)}Ur(e,n){const r=this.Ar.exec(e),i=Number(r[1]);return kl.ar(i,n)}br(e){return tp.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Wr(o,a).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=$v();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class xE{constructor(){this.Hr=new tg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new tg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc=null;function qf(){return Tc===null?Tc=268435456+Math.round(2147483648*Math.random()):Tc++,"0x"+Tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class KM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=qf(),a=this.To(e,n);W("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(W("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw Ir("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=WM[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=qf();return new Promise((o,a)=>{const l=new qR;l.setWithCredentials(!0),l.listenOnce($R.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ff.NO_ERROR:const c=l.getResponseJson();W(hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Ff.TIMEOUT:W(hn,`RPC '${e}' ${s} timed out`),a(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const d=l.getStatus();if(W(hn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(f.status);a(new q(m,f.message))}else a(new q(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(M.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{W(hn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);W(hn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=qf(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FR(),a=BR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new jR({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");W(hn,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const m=new GM({ro:v=>{f?W(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(W(hn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),W(hn,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},oo:()=>d.close()}),g=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(b){setTimeout(()=>{throw b},0)}})};return g(d,pc.EventType.OPEN,()=>{f||W(hn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,pc.EventType.CLOSE,()=>{f||(f=!0,W(hn,`RPC '${e}' stream ${i} transport closed`),m.wo())}),g(d,pc.EventType.ERROR,v=>{f||(f=!0,Ir(hn,`RPC '${e}' stream ${i} transport errored:`,v),m.wo(new q(M.UNAVAILABLE,"The operation could not be completed")))}),g(d,pc.EventType.MESSAGE,v=>{var y;if(!f){const w=v.data[0];ye(!!w);const _=w,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){W(hn,`RPC '${e}' stream ${i} received error:`,b);const T=b.status;let E=function(D){const P=Vt[D];if(P!==void 0)return YT(P)}(T),A=b.message;E===void 0&&(E=M.INTERNAL,A="Unknown error status: "+T+" with message "+b.message),f=!0,m.wo(new q(E,A)),d.close()}else W(hn,`RPC '${e}' stream ${i} received:`,w),m._o(w)}}),g(a,UR.STAT_EVENT,v=>{v.stat===jw.PROXY?W(hn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===jw.NOPROXY&&W(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){return typeof window<"u"?window:null}function Fc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return new nM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new np(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(xt(n.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YM extends PE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=sM(this.serializer,e),r=function(i){if(!("targetChange"in i))return pe.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?pe.min():s.readTime?Rt(s.readTime):pe.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=ru(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=md(a)?{documents:iE(i,a)}:{query:sE(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=ZT(i,s.resumeToken);const l=Ym(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(pe.min())>0){o.readTime=ma(i,s.snapshotVersion.toTimestamp());const l=Ym(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=aM(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=ru(this.serializer),n.removeTarget=e,this.Wo(n)}}class QM extends PE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=oM(e.writeResults,e.commitTime),r=Rt(e.commitTime);return this.listener.cu(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ru(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iu(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(M.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(M.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class JM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(xt(n),this.mu=!1):W("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{Es(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=oe(a);l.vu.add(4),await Ra(l),l.bu.set("Unknown"),l.vu.delete(4),await zu(l)}(this))})}),this.bu=new JM(r,i)}}async function zu(t){if(Es(t))for(const e of t.Ru)await e(!0)}async function Ra(t){for(const e of t.Ru)await e(!1)}function Ah(t,e){const n=oe(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),sp(n)?ip(n):Ma(n).Ko()&&rp(n,e))}function su(t,e){const n=oe(t),r=Ma(n);n.Au.delete(e),r.Ko()&&NE(n,e),n.Au.size===0&&(r.Ko()?r.jo():Es(n)&&n.bu.set("Unknown"))}function rp(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).su(e)}function NE(t,e){t.Vu.qt(e),Ma(t).iu(e)}function ip(t){t.Vu=new JO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.bu.gu()}function sp(t){return Es(t)&&!Ma(t).Uo()&&t.Au.size>0}function Es(t){return oe(t).vu.size===0}function RE(t){t.Vu=void 0}async function eV(t){t.Au.forEach((e,n)=>{rp(t,e)})}async function tV(t,e){RE(t),sp(t)?(t.bu.Iu(e),ip(t)):t.bu.set("Unknown")}async function nV(t,e,n){if(t.bu.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sd(t,r)}else if(e instanceof Lc?t.Vu.Ht(e):e instanceof XT?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(pe.min()))try{const r=await TE(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(jt.EMPTY_BYTE_STRING,u.snapshotVersion)),NE(i,a);const c=new li(u.target,a,l,u.sequenceNumber);rp(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Sd(t,r)}}async function Sd(t,e,n){if(!Ss(e))throw e;t.vu.add(1),await Ra(t),t.bu.set("Offline"),n||(n=()=>TE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await zu(t)})}function OE(t,e){return e().catch(n=>Sd(t,n,e))}async function Oa(t){const e=oe(t),n=cs(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;rV(e);)try{const i=await jM(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,iV(e,i)}catch(i){await Sd(e,i)}ME(e)&&VE(e)}function rV(t){return Es(t)&&t.Eu.length<10}function iV(t,e){t.Eu.push(e);const n=cs(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function ME(t){return Es(t)&&!cs(t).Uo()&&t.Eu.length>0}function VE(t){cs(t).start()}async function sV(t){cs(t).hu()}async function oV(t){const e=cs(t);for(const n of t.Eu)e.uu(n.mutations)}async function aV(t,e,n){const r=t.Eu.shift(),i=qv.from(r,e,n);await OE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Oa(t)}async function lV(t,e){e&&cs(t).ou&&await async function(n,r){if(i=r.code,KT(i)&&i!==M.ABORTED){const s=n.Eu.shift();cs(n).Qo(),await OE(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Oa(n)}var i}(t,e),ME(t)&&VE(t)}async function Mb(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Es(n);n.vu.add(3),await Ra(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await zu(n)}async function ng(t,e){const n=oe(t);e?(n.vu.delete(2),await zu(n)):e||(n.vu.add(2),await Ra(n),n.bu.set("Unknown"))}function Ma(t){return t.Su||(t.Su=function(e,n,r){const i=oe(e);return i.fu(),new YM(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:eV.bind(null,t),ao:tV.bind(null,t),nu:nV.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),sp(t)?ip(t):t.bu.set("Unknown")):(await t.Su.stop(),RE(t))})),t.Su}function cs(t){return t.Du||(t.Du=function(e,n,r){const i=oe(e);return i.fu(),new QM(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:sV.bind(null,t),ao:lV.bind(null,t),au:oV.bind(null,t),cu:aV.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Oa(t)):(await t.Du.stop(),t.Eu.length>0&&(W("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new op(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Va(t,e){if(xt("AsyncQueue",`${e}: ${t}`),Ss(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=dl(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new Zo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Cu=new dt(ne.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):he():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class pa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pa(e,n,Zo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.Nu=void 0,this.listeners=[]}}class cV{constructor(){this.queries=new Ts(e=>RT(e),Fu),this.onlineState="Unknown",this.ku=new Set}}async function ap(t,e){const n=oe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new uV),i)try{s.Nu=await n.onListen(r)}catch(o){const a=Va(o,`Initialization of query '${Km(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&up(n)}async function lp(t,e){const n=oe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function dV(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&up(n)}function hV(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function up(t){t.ku.forEach(e=>{e.next()})}class cp{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.serializer=e}rr(e){return Hr(this.serializer,e)}ur(e){return e.metadata.exists?rE(this.serializer,e.document,!1):ft.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Rt(e)}}class mV{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LE(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=Xe.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new Lb(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Le()).add(s);n.set(o,a)}}return n}async complete(){const e=await qM(this.localStore,new Lb(this.serializer),this.documents,this.ju.id),n=this.Wu(this.documents);for(const r of this.queries)await zM(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function LE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class $E{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Le(),this.mutatedKeys=Le(),this.tc=MT(e),this.ec=new Zo(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Vb,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Bu(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),v=!0):this.rc(h,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(d,h){const f=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return f(d)-f(h)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new pa(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Vb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Le(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new BE(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new FE(r))}),n}hc(e){this.Yu=e.ir,this.Zu=Le();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return pa.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class gV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vV{constructor(e){this.key=e,this.fc=!1}}class pV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ts(a=>RT(a),Fu),this._c=new Map,this.mc=new Set,this.gc=new dt(ne.comparator),this.yc=new Map,this.Ic=new Xv,this.Tc={},this.Ec=new Map,this.Ac=go.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function yV(t,e){const n=gp(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await ga(n.localStore,$n(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await dp(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Ah(n.remoteStore,o)}return i}async function dp(t,e,n,r,i){t.Rc=(d,h,f)=>async function(m,g,v,y){let w=g.view.sc(v);w.zi&&(w=await bd(m.localStore,g.query,!1).then(({documents:T})=>g.view.sc(T,w)));const _=y&&y.targetChanges.get(g.targetId),b=g.view.applyChanges(w,m.isPrimaryClient,_);return rg(m,g.targetId,b.cc),b.snapshot}(t,d,h,f);const s=await bd(t.localStore,e,!0),o=new $E(e,s.ir),a=o.sc(s.documents),l=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);rg(t,n,u.cc);const c=new gV(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function wV(t,e){const n=oe(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Fu(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await va(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),su(n.remoteStore,r.targetId),ya(n,r.targetId)}).catch(_s)):(ya(n,r.targetId),await va(n.localStore,r.targetId,!0))}async function bV(t,e,n){const r=vp(t);try{const i=await function(s,o){const a=oe(s),l=It.now(),u=o.reduce((h,f)=>h.add(f.key),Le());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Ln(),m=Le();return a.Zi.getEntries(h,u).next(g=>{f=g,f.forEach((v,y)=>{y.isValidDocument()||(m=m.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{c=g;const v=[];for(const y of o){const w=YO(y,c.get(y.key).overlayedDocument);w!=null&&v.push(new xi(y.key,w,TT(w.value.mapValue),bt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,v,o)}).next(g=>{d=g;const v=g.applyToLocalDocumentSet(c,m);return a.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:d.batchId,changes:LT(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new dt(Ve)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Di(r,i.changes),await Oa(r.remoteStore)}catch(i){const s=Va(i,"Failed to persist write");n.reject(s)}}async function UE(t,e){const n=oe(t);try{const r=await UM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?ye(o.fc):i.removedDocuments.size>0&&(ye(o.fc),o.fc=!1))}),await Di(n,r,e)}catch(r){await _s(r)}}function Fb(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=oe(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.Mu(o)&&(l=!0)}),l&&up(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new dt(ne.comparator);o=o.insert(s,ft.newNoDocument(s,pe.min()));const a=Le().add(s),l=new Uu(pe.min(),new Map,new dt(Ve),o,a);await UE(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),mp(r)}else await va(r.localStore,e,!1).then(()=>ya(r,e,n)).catch(_s)}async function _V(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await $M(n.localStore,e);fp(n,r,null),hp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Di(n,i)}catch(i){await _s(i)}}async function SV(t,e,n){const r=oe(t);try{const i=await function(s,o){const a=oe(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ye(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);fp(r,e,n),hp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Di(r,i)}catch(i){await _s(i)}}async function TV(t,e){const n=oe(t);Es(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=oe(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ec.get(r)||[];i.push(e),n.Ec.set(r,i)}catch(r){const i=Va(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function hp(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function fp(t,e,n){const r=oe(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function ya(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||jE(t,r)})}function jE(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(su(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),mp(t))}function rg(t,e,n){for(const r of n)r instanceof FE?(t.Ic.addReference(r.key,e),EV(t,r)):r instanceof BE?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||jE(t,r.key)):he()}function EV(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(W("SyncEngine","New document in limbo: "+n),t.mc.add(r),mp(t))}function mp(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new ne(Xe.fromString(e)),r=t.Ac.next();t.yc.set(r,new vV(n)),t.gc=t.gc.insert(n,r),Ah(t.remoteStore,new li($n(Da(n.path)),r,"TargetPurposeLimboResolution",Mn.ct))}}async function Di(t,e,n){const r=oe(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=ep.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=oe(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>N.forEach(l,d=>N.forEach(d.Fi,h=>u.persistence.referenceDelegate.addReference(c,d.targetId,h)).next(()=>N.forEach(d.Bi,h=>u.persistence.referenceDelegate.removeReference(c,d.targetId,h)))))}catch(c){if(!Ss(c))throw c;W("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const d=c.targetId;if(!c.fromCache){const h=u.Ji.get(d),f=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(d,m)}}}(r.localStore,s))}async function CV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await SE(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new q(M.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Di(n,r.er)}}function kV(t,e){const n=oe(t),r=n.yc.get(e);if(r&&r.fc)return Le().add(r.key);{let i=Le();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}async function AV(t,e){const n=oe(t),r=await bd(n.localStore,e.query,!0),i=e.view.hc(r);return n.isPrimaryClient&&rg(n,e.targetId,i.cc),i}async function xV(t,e){const n=oe(t);return kE(n.localStore,e).then(r=>Di(n,r))}async function DV(t,e,n,r){const i=oe(t),s=await function(o,a){const l=oe(o),u=oe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.Sn(c,a).next(d=>d?l.localDocuments.getDocuments(c,d):N.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Oa(i.remoteStore):n==="acknowledged"||n==="rejected"?(fp(i,e,r||null),hp(i,e),function(o,a){oe(oe(o).mutationQueue).Cn(a)}(i.localStore,e)):he(),await Di(i,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function PV(t,e){const n=oe(t);if(gp(n),vp(n),e===!0&&n.vc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Bb(n,r.toArray());n.vc=!0,await ng(n.remoteStore,!0);for(const s of i)Ah(n.remoteStore,s)}else if(e===!1&&n.vc!==!1){const r=[];let i=Promise.resolve();n._c.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ya(n,o),va(n.localStore,o,!0))),su(n.remoteStore,o)}),await i,await Bb(n,r),function(s){const o=oe(s);o.yc.forEach((a,l)=>{su(o.remoteStore,l)}),o.Ic.Ts(),o.yc=new Map,o.gc=new dt(ne.comparator)}(n),n.vc=!1,await ng(n.remoteStore,!1)}}async function Bb(t,e,n){const r=oe(t),i=[],s=[];for(const o of e){let a;const l=r._c.get(o);if(l&&l.length!==0){a=await ga(r.localStore,$n(l[0]));for(const u of l){const c=r.wc.get(u),d=await AV(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await CE(r.localStore,o);a=await ga(r.localStore,u),await dp(r,qE(u),o,!1,a.resumeToken)}i.push(a)}return r.dc.nu(s),i}function qE(t){return NT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function NV(t){const e=oe(t);return oe(oe(e.localStore).persistence).$i()}async function RV(t,e,n,r){const i=oe(t);if(i.vc)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await kE(i.localStore,OT(s[0])),a=Uu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",jt.EMPTY_BYTE_STRING);await Di(i,o,a);break}case"rejected":await va(i.localStore,e,!0),ya(i,e,r);break;default:he()}}async function OV(t,e,n){const r=gp(t);if(r.vc){for(const i of e){if(r._c.has(i)){W("SyncEngine","Adding an already active target "+i);continue}const s=await CE(r.localStore,i),o=await ga(r.localStore,s);await dp(r,qE(s),o.targetId,!1,o.resumeToken),Ah(r.remoteStore,o)}for(const i of n)r._c.has(i)&&await va(r.localStore,i,!1).then(()=>{su(r.remoteStore,i),ya(r,i)}).catch(_s)}}function gp(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.dc.nu=dV.bind(null,e.eventManager),e.dc.Pc=hV.bind(null,e.eventManager),e}function vp(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_V.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SV.bind(null,e),e}function MV(t,e,n){const r=oe(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=oe(d),m=Rt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",g=>f.qs.getBundleMetadata(g,h.id)).then(g=>!!g&&g.createTime.compareTo(m)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(LE(a));const l=new mV(a,i.localStore,s.serializer);let u=await s.bc();for(;u;){const d=await l.zu(u);d&&o._updateProgress(d),u=await s.bc()}const c=await l.complete();return await Di(i,c.Ju,void 0),await function(d,h){const f=oe(d);return f.persistence.runTransaction("Save bundle","readwrite",m=>f.qs.saveBundleMetadata(m,h))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Hu)}catch(a){return Ir("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ig{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _E(this.persistence,new IE,e.initialUser,this.serializer)}createPersistence(e){return new bE(kh.zs,this.serializer)}createSharedClientState(e){return new xE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zE extends ig{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await vp(this.Vc.syncEngine),await Oa(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return _E(this.persistence,new IE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new TM(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new aO(n,this.persistence);return new oO(e.asyncQueue,r)}createPersistence(e){const n=Zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Jv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,DE(),Fc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xE}}class VV extends zE{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Vc.syncEngine;this.sharedClientState instanceof jf&&(this.sharedClientState.syncEngine={jr:DV.bind(null,n),zr:RV.bind(null,n),Wr:OV.bind(null,n),$i:NV.bind(null,n),Qr:xV.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ii(async r=>{await PV(this.Vc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=DE();if(!jf.D(n))throw new q(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jf(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CV.bind(null,this.syncEngine),await ng(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cV}createDatastore(e){const n=qu(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new KM(i));var i;return function(s,o,a,l){return new XM(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Fb(this.syncEngine,a,0),o=Ob.D()?new Ob:new HM,new ZM(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new pV(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=oe(e);W("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Ra(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Wt,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const n=this.xc.decode(e),r=Number(n);isNaN(r)&&this.Mc(`length string (${n}) is not valid number`);const i=await this.$c(r);return new fV(JSON.parse(i),e.length+r)}Oc(){return this.buffer.findIndex(e=>e===123)}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const n=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new q(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=oe(r),o=ru(s.serializer)+"/documents",a={documents:i.map(d=>nu(s.serializer,d))},l=await s.vo("BatchGetDocuments",o,a,i.length),u=new Map;l.forEach(d=>{const h=iM(s.serializer,d);u.set(h.key.toString(),h)});const c=[];return i.forEach(d=>{const h=u.get(d.toString());ye(!!h),c.push(h)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Na(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ne.fromPath(r);this.mutations.push(new Uv(i,this.precondition(i)))}),await async function(n,r){const i=oe(n),s=ru(i.serializer)+"/documents",o={writes:r.map(a=>iu(i.serializer,a))};await i.Io("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw he();n=pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(pe.min())?bt.exists(!1):bt.updateTime(n):bt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(pe.min()))throw new q(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(n)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new np(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new FV(this.datastore),n=this.qc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Uc(i)}))}).catch(r=>{this.Uc(r)})})}qc(e){try{const n=this.updateFunction(e);return!Vu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!KT(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=uT.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Va(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bc(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yp(t);W("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Mb(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Mb(e.remoteStore,s)),t._onlineComponents=e}function HE(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yp(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!HE(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Bc(t,new ig)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Bc(t,new ig);return t._offlineComponents}async function Dh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await sg(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await sg(t,new pp))),t._onlineComponents}function WE(t){return yp(t).then(e=>e.persistence)}function wp(t){return yp(t).then(e=>e.localStore)}function GE(t){return Dh(t).then(e=>e.remoteStore)}function bp(t){return Dh(t).then(e=>e.syncEngine)}function UV(t){return Dh(t).then(e=>e.datastore)}async function wa(t){const e=await Dh(t),n=e.eventManager;return n.onListen=yV.bind(null,e.syncEngine),n.onUnlisten=wV.bind(null,e.syncEngine),n}function jV(t){return t.asyncQueue.enqueue(async()=>{const e=await WE(t),n=await GE(t);return e.setNetworkEnabled(!0),function(r){const i=oe(r);return i.vu.delete(0),zu(i)}(n)})}function qV(t){return t.asyncQueue.enqueue(async()=>{const e=await WE(t),n=await GE(t);return e.setNetworkEnabled(!1),async function(r){const i=oe(r);i.vu.add(0),await Ra(i),i.bu.set("Offline")}(n)})}function zV(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const u=oe(a);return u.persistence.runTransaction("read document","readonly",c=>u.localDocuments.getDocument(c,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new q(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Va(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await wp(t),e,n)),n.promise}function KE(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new xh({next:d=>{s.enqueueAndForget(()=>lp(i,c));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new cp(Da(o.path),u,{includeMetadataChanges:!0,Ku:!0});return ap(i,c)}(await wa(t),t.asyncQueue,e,n,r)),r.promise}function HV(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await bd(r,i,!0),a=new $E(i,o.ir),l=a.sc(o.documents),u=a.applyChanges(l,!1);s.resolve(u.snapshot)}catch(o){const a=Va(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await wp(t),e,n)),n.promise}function YE(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new xh({next:d=>{s.enqueueAndForget(()=>lp(i,c)),d.fromCache&&a.source==="server"?l.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new cp(o,u,{includeMetadataChanges:!0,Ku:!0});return ap(i,c)}(await wa(t),t.asyncQueue,e,n,r)),r.promise}function WV(t,e){const n=new xh(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).ku.add(i),i.next()}(await wa(t),n)),()=>{n.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).ku.delete(i)}(await wa(t),n))}}function GV(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?QT().encode(s):s,function(l,u){return new LV(l,u)}(function(l,u){if(l instanceof Uint8Array)return $b(l,u);if(l instanceof ArrayBuffer)return $b(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,qu(e));t.asyncQueue.enqueueAndForget(async()=>{MV(await bp(t),i,r)})}function KV(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=oe(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(await wp(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XE(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jb(t){if(!ne.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qb(t){if(ne.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function Je(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function JE(t,e){if(e<=0)throw new q(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Hu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new KR;switch(n.type){case"firstParty":return new JR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Ub.get(e);n&&(W("ComponentProvider","Removing Datastore"),Ub.delete(e),n.terminate())}(this),Promise.resolve()}}function YV(t,e,n,r={}){var i;const s=(t=Je(t,Hu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ht.MOCK_USER;else{a=uP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ht(u)}t._authCredentials=new YR(new lT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class ln{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ln(this.firestore,e,this._query)}}class Wr extends ln{constructor(e,n,r){super(e,n,Da(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ne(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function ZE(t,e,...n){if(t=Ce(t),Ip("collection","path",e),t instanceof Hu){const r=Xe.fromString(e,...n);return qb(r),new Wr(t,null,r)}{if(!(t instanceof vt||t instanceof Wr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return qb(r),new Wr(t.firestore,null,r)}}function QV(t,e){if(t=Je(t,Hu),Ip("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ln(t,null,function(n){return new Ai(Xe.emptyPath(),n)}(e))}function Td(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=uT.A()),Ip("doc","path",e),t instanceof Hu){const r=Xe.fromString(e,...n);return jb(r),new vt(t,null,new ne(r))}{if(!(t instanceof vt||t instanceof Wr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return jb(r),new vt(t.firestore,t instanceof Wr?t.converter:null,new ne(r))}}function eC(t,e){return t=Ce(t),e=Ce(e),(t instanceof vt||t instanceof Wr)&&(e instanceof vt||e instanceof Wr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function tC(t,e){return t=Ce(t),e=Ce(e),t instanceof ln&&e instanceof ln&&t.firestore===e.firestore&&Fu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new np(this,"async_queue_retry"),this.Xc=()=>{const n=Fc();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Fc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Fc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Wt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Ss(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=op.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&he()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function og(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class JV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=-1;class At extends Hu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new XV,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nC(this),this._firestoreClient.terminate()}}function Xt(t){return t._firestoreClient||nC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nC(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new AO(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,QE(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $V(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function eL(t,e){iC(t=Je(t,At));const n=Xt(t);if(n._uninitializedComponentsProvider)throw new q(M.FAILED_PRECONDITION,"SDK cache is already specified.");Ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new pp;return rC(n,i,new zE(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function tL(t){iC(t=Je(t,At));const e=Xt(t);if(e._uninitializedComponentsProvider)throw new q(M.FAILED_PRECONDITION,"SDK cache is already specified.");Ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new pp;return rC(e,r,new VV(r,n.cacheSizeBytes))}function rC(t,e,n){const r=new Wt;return t.asyncQueue.enqueue(async()=>{try{await Bc(t,n),await sg(t,e),r.resolve()}catch(i){const s=i;if(!HE(s))throw s;Ir("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function nL(t){if(t._initialized&&!t._terminated)throw new q(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!vr.D())return Promise.resolve();const r=n+"main";await vr.delete(r)}(Zv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function rL(t){return function(e){const n=new Wt;return e.asyncQueue.enqueueAndForget(async()=>TV(await bp(e),n)),n.promise}(Xt(t=Je(t,At)))}function iL(t){return jV(Xt(t=Je(t,At)))}function sL(t){return qV(Xt(t=Je(t,At)))}function oL(t,e){const n=Xt(t=Je(t,At)),r=new JV;return GV(n,t._databaseId,e,r),r}function aL(t,e){return KV(Xt(t=Je(t,At)),e).then(n=>n?new ln(t,null,n.query):null)}function iC(t){if(t._initialized||t._terminated)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xr(jt.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xr(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=/^__.*__$/;class uL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pa(e,this.data,n,this.fieldTransforms)}}class sC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class Rh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Rh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Ed(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(oC(this.ca)&&lL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class cL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qu(e)}ya(e,n,r,i=!1){return new Rh({ca:e,methodName:n,ga:r,path:Dt.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eo(t){const e=t._freezeSettings(),n=qu(t._databaseId);return new cL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Oh(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);Ep("Data must be an object, but it was:",o,r);const a=uC(r,o);let l,u;if(s.merge)l=new Vn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=ag(e,d,n);if(!o.contains(h))throw new q(M.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);dC(c,h)||c.push(h)}l=new Vn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new uL(new nn(a),l,u)}class Wu extends To{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wu}}function aC(t,e,n){return new Rh({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _p extends To{_toFieldTransform(e){return new $u(e.path,new ha)}isEqual(e){return e instanceof _p}}class dL extends To{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=aC(this,e,!0),r=this.pa.map(s=>Co(s,n)),i=new co(r);return new $u(e.path,i)}isEqual(e){return this===e}}class hL extends To{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=aC(this,e,!0),r=this.pa.map(s=>Co(s,n)),i=new ho(r);return new $u(e.path,i)}isEqual(e){return this===e}}class fL extends To{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new fa(e.serializer,UT(e.serializer,this.Ia));return new $u(e.path,n)}isEqual(e){return this===e}}function Sp(t,e,n,r){const i=t.ya(1,e,n);Ep("Data must be an object, but it was:",i,r);const s=[],o=nn.empty();So(r,(l,u)=>{const c=Cp(e,l,n);u=Ce(u);const d=i.da(c);if(u instanceof Wu)s.push(c);else{const h=Co(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new Vn(s);return new sC(o,a,i.fieldTransforms)}function Tp(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[ag(e,r,n)],l=[i];if(s.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(ag(e,s[h])),l.push(s[h+1]);const u=[],c=nn.empty();for(let h=a.length-1;h>=0;--h)if(!dC(u,a[h])){const f=a[h];let m=l[h];m=Ce(m);const g=o.da(f);if(m instanceof Wu)u.push(f);else{const v=Co(m,g);v!=null&&(u.push(f),c.set(f,v))}}const d=new Vn(u);return new sC(c,d,o.fieldTransforms)}function lC(t,e,n,r=!1){return Co(n,t.ya(r?4:3,e))}function Co(t,e){if(cC(t=Ce(t)))return Ep("Unsupported field value:",e,t),uC(t,e);if(t instanceof To)return function(n,r){if(!oC(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Co(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ce(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UT(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=It.fromDate(n);return{timestampValue:ma(r.serializer,i)}}if(n instanceof It){const i=new It(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ma(r.serializer,i)}}if(n instanceof Nh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xr)return{bytesValue:ZT(r.serializer,n._byteString)};if(n instanceof vt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gv(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Ph(n)}`)}(t,e)}function uC(t,e){const n={};return IT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const s=Co(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof Nh||t instanceof Xr||t instanceof vt||t instanceof To)}function Ep(t,e,n){if(!cC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Ph(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function ag(t,e,n){if((e=Ce(e))instanceof ds)return e._internalPath;if(typeof e=="string")return Cp(t,e);throw Ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const mL=new RegExp("[~\\*/\\[\\]]");function Cp(t,e,n){if(e.search(mL)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ds(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ed(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(M.INVALID_ARGUMENT,a+t+l)}function dC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gL extends ou{data(){return super.data()}}function Mh(t,e){return typeof e=="string"?Cp(t,e):e instanceof ds?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class Gu extends kp{}function $i(t,e,...n){let r=[];e instanceof kp&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof Ap).length,o=i.filter(a=>a instanceof Vh).length;if(s>1||s>0&&o>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Vh extends Gu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vh(e,n,r)}_apply(e){const n=this._parse(e);return mC(e._query,n),new ln(e.firestore,e.converter,Gm(e._query,n))}_parse(e){const n=Eo(e.firestore);return function(i,s,o,a,l,u,c){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Wb(c,u);const h=[];for(const f of c)h.push(Hb(a,i,f));d={arrayValue:{values:h}}}else d=Hb(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Wb(c,u),d=lC(o,s,c,u==="in"||u==="not-in");return ze.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vL(t,e,n){const r=e,i=Mh("where",t);return Vh._create(i,r,n)}class Ap extends kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ap(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)mC(s,a),s=Gm(s,a)}(e._query,n),new ln(e.firestore,e.converter,Gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends Gu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xp(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Jo(i,s);return function(a,l){if(Fv(a)===null){const u=_h(a);u!==null&&gC(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new ln(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ai(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function pL(t,e="asc"){const n=e,r=Mh("orderBy",t);return xp._create(r,n)}class Lh extends Gu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lh(e,n,r)}_apply(e){return new ln(e.firestore,e.converter,vd(e._query,this._limit,this._limitType))}}function yL(t){return JE("limit",t),Lh._create("limit",t,"F")}function wL(t){return JE("limitToLast",t),Lh._create("limitToLast",t,"L")}class Fh extends Gu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=fC(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,function(r,i){return new Ai(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function bL(...t){return Fh._create("startAt",t,!0)}function IL(...t){return Fh._create("startAfter",t,!1)}class Bh extends Gu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bh(e,n,r)}_apply(e){const n=fC(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,function(r,i){return new Ai(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function _L(...t){return Bh._create("endBefore",t,!1)}function SL(...t){return Bh._create("endAt",t,!0)}function fC(t,e,n,r){if(n[0]=Ce(n[0]),n[0]instanceof ou)return function(i,s,o,a,l){if(!a)throw new q(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of Js(i))if(c.field.isKeyField())u.push(lo(s,a.key));else{const d=a.data.field(c.field);if(Ih(d))throw new q(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=c.field.canonicalString();throw new q(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(d)}return new us(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Eo(t.firestore);return function(s,o,a,l,u,c){const d=s.explicitOrderBy;if(u.length>d.length)throw new q(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<u.length;f++){const m=u[f];if(d[f].field.isKeyField()){if(typeof m!="string")throw new q(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof m}`);if(!Bv(s)&&m.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${m}' contains a slash.`);const g=s.path.child(Xe.fromString(m));if(!ne.isDocumentKey(g))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const v=new ne(g);h.push(lo(o,v))}else{const g=lC(a,l,m);h.push(g)}}return new us(h,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Hb(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xe.fromString(n));if(!ne.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lo(t,new ne(r))}if(n instanceof vt)return lo(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function Wb(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mC(t,e){if(e.isInequality()){const r=_h(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new q(M.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Fv(t);s!==null&&gC(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function gC(t,e,n){if(!n.isEqual(e))throw new q(M.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Dp{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Nh(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=ss(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);ye(uE(r));const i=new as(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class TL extends Dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bi extends ou{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Al extends bi{data(e={}){return super.data(e)}}class hs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Al(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Al(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ws(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Al(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ws(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:EL(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function EL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function vC(t,e){return t instanceof bi&&e instanceof bi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hs&&e instanceof hs&&t._firestore===e._firestore&&tC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){t=Je(t,vt);const e=Je(t.firestore,At);return KE(Xt(e),t._key).then(n=>Pp(e,t,n))}class ko extends Dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function kL(t){t=Je(t,vt);const e=Je(t.firestore,At),n=Xt(e),r=new ko(e);return zV(n,t._key).then(i=>new bi(e,r,t._key,i,new Ws(i!==null&&i.hasLocalMutations,!0),t.converter))}function AL(t){t=Je(t,vt);const e=Je(t.firestore,At);return KE(Xt(e),t._key,{source:"server"}).then(n=>Pp(e,t,n))}function xL(t){t=Je(t,ln);const e=Je(t.firestore,At),n=Xt(e),r=new ko(e);return hC(t._query),YE(n,t._query).then(i=>new hs(e,r,t,i))}function DL(t){t=Je(t,ln);const e=Je(t.firestore,At),n=Xt(e),r=new ko(e);return HV(n,t._query).then(i=>new hs(e,r,t,i))}function PL(t){t=Je(t,ln);const e=Je(t.firestore,At),n=Xt(e),r=new ko(e);return YE(n,t._query,{source:"server"}).then(i=>new hs(e,r,t,i))}function Gb(t,e,n){t=Je(t,vt);const r=Je(t.firestore,At),i=$h(t.converter,e,n);return Ku(r,[Oh(Eo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,bt.none())])}function Kb(t,e,n,...r){t=Je(t,vt);const i=Je(t.firestore,At),s=Eo(i);let o;return o=typeof(e=Ce(e))=="string"||e instanceof ds?Tp(s,"updateDoc",t._key,e,n,r):Sp(s,"updateDoc",t._key,e),Ku(i,[o.toMutation(t._key,bt.exists(!0))])}function NL(t){return Ku(Je(t.firestore,At),[new Na(t._key,bt.none())])}function RL(t,e){const n=Je(t.firestore,At),r=Td(t),i=$h(t.converter,e);return Ku(n,[Oh(Eo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bt.exists(!1))]).then(()=>r)}function pC(t,...e){var n,r,i;t=Ce(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||og(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(og(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof vt)u=Je(t.firestore,At),c=Da(t._key.path),l={next:d=>{e[o]&&e[o](Pp(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Je(t,ln);u=Je(d.firestore,At),c=d._query;const h=new ko(u);l={next:f=>{e[o]&&e[o](new hs(u,h,d,f))},error:e[o+1],complete:e[o+2]},hC(t._query)}return function(d,h,f,m){const g=new xh(m),v=new cp(h,g,f);return d.asyncQueue.enqueueAndForget(async()=>ap(await wa(d),v)),()=>{g.Dc(),d.asyncQueue.enqueueAndForget(async()=>lp(await wa(d),v))}}(Xt(u),c,a,l)}function OL(t,e){return WV(Xt(t=Je(t,At)),og(e)?e:{next:e})}function Ku(t,e){return function(n,r){const i=new Wt;return n.asyncQueue.enqueueAndForget(async()=>bV(await bp(n),r,i)),i.promise}(Xt(t),e)}function Pp(t,e,n){const r=n.docs.get(e._key),i=new ko(t);return new bi(t,i,e._key,r,new Ws(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Eo(e)}set(e,n,r){this._verifyNotCommitted();const i=Ki(e,this._firestore),s=$h(i.converter,n,r),o=Oh(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,bt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ki(e,this._firestore);let o;return o=typeof(n=Ce(n))=="string"||n instanceof ds?Tp(this._dataReader,"WriteBatch.update",s._key,n,r,i):Sp(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ki(e,this._firestore);return this._mutations=this._mutations.concat(new Na(n._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ki(t,e){if((t=Ce(t)).firestore!==e)throw new q(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Eo(e)}get(e){const n=Ki(e,this._firestore),r=new TL(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return he();const s=i[0];if(s.isFoundDocument())return new ou(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new ou(this._firestore,r,n._key,null,n.converter);throw he()})}set(e,n,r){const i=Ki(e,this._firestore),s=$h(i.converter,n,r),o=Oh(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ki(e,this._firestore);let o;return o=typeof(n=Ce(n))=="string"||n instanceof ds?Tp(this._dataReader,"Transaction.update",s._key,n,r,i):Sp(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ki(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ki(e,this._firestore),r=new ko(this._firestore);return super.get(e).then(i=>new bi(this._firestore,r,n._key,i._document,new Ws(!1,!1),n.converter))}}function FL(t,e,n){t=Je(t,At);const r=Object.assign(Object.assign({},ML),n);return function(i){if(i.maxAttempts<1)throw new q(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new Wt;return i.asyncQueue.enqueueAndForget(async()=>{const l=await UV(i);new BV(i.asyncQueue,l,o,s,a).run()}),a.promise}(Xt(t),i=>e(new LL(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(){return new Wu("deleteField")}function $L(){return new _p("serverTimestamp")}function UL(...t){return new dL("arrayUnion",t)}function jL(...t){return new hL("arrayRemove",t)}function qL(t){return new fL("increment",t)}(function(t,e=!0){(function(n){xa=n})(ws),rs(new Yr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new At(new QR(n.getProvider("auth-internal")),new eO(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new as(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),zr(qw,"3.13.0",t),zr(qw,"3.13.0","esm2017")})();const zL="@firebase/firestore-compat",HL="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function Qb(){if(!CO())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class au{constructor(e){this._delegate=e}static fromBase64String(e){return Qb(),new au(Xr.fromBase64String(e))}static fromUint8Array(e){return Yb(),new au(Xr.fromUint8Array(e))}toBase64(){return Qb(),this._delegate.toBase64()}toUint8Array(){return Yb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){return WL(t,["next","error","complete"])}function WL(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{enableIndexedDbPersistence(e,n){return eL(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return tL(e._delegate)}clearIndexedDbPersistence(e){return nL(e._delegate)}}class yC{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof as||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){YV(this._delegate,e,n,r)}enableNetwork(){return iL(this._delegate)}disableNetwork(){return sL(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return rL(this._delegate)}onSnapshotsInSync(e){return OL(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ba(this,ZE(this._delegate,e))}catch(n){throw Sn(n,"collection()","Firestore.collection()")}}doc(e){try{return new rr(this,Td(this._delegate,e))}catch(n){throw Sn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _n(this,QV(this._delegate,e))}catch(n){throw Sn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return FL(this._delegate,n=>e(new wC(this,n)))}batch(){return Xt(this._delegate),new bC(new VL(this._delegate,e=>Ku(this._delegate,e)))}loadBundle(e){return oL(this._delegate,e)}namedQuery(e){return aL(this._delegate,e).then(n=>n?new _n(this,n):null)}}class Uh extends Dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(new Xr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return rr.forKey(n,this.firestore,null)}}function KL(t){WR(t)}class wC{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Uh(e)}get(e){const n=Gs(e);return this._delegate.get(n).then(r=>new lu(this._firestore,new bi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Gs(e);return r?(Np("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Gs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Gs(e);return this._delegate.delete(n),this}}class bC{constructor(e){this._delegate=e}set(e,n,r){const i=Gs(e);return r?(Np("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Gs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Gs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class vo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Al(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=vo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new vo(e,new Uh(e),n),i.set(n,s)),s}}vo.INSTANCES=new WeakMap;class rr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Uh(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rr(n,new vt(n._delegate,r,new ne(e)))}static forKey(e,n,r){return new rr(n,new vt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ba(this.firestore,ZE(this._delegate,e))}catch(n){throw Sn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ce(e),e instanceof vt?eC(this._delegate,e):!1}set(e,n){n=Np("DocumentReference.set",n);try{return n?Gb(this._delegate,e,n):Gb(this._delegate,e)}catch(r){throw Sn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Kb(this._delegate,e):Kb(this._delegate,e,n,...r)}catch(i){throw Sn(i,"updateDoc()","DocumentReference.update()")}}delete(){return NL(this._delegate)}onSnapshot(...e){const n=IC(e),r=_C(e,i=>new lu(this.firestore,new bi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pC(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=kL(this._delegate):(e==null?void 0:e.source)==="server"?n=AL(this._delegate):n=CL(this._delegate),n.then(r=>new lu(this.firestore,new bi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new rr(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sn(t,e,n){return t.message=t.message.replace(e,n),t}function IC(t){for(const e of t)if(typeof e=="object"&&!lg(e))return e;return{}}function _C(t,e){var n,r;let i;return lg(t[0])?i=t[0]:lg(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class lu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new rr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return vC(this._delegate,e._delegate)}}class uu extends lu{data(e){const n=this._delegate.data(e);return GR(n!==void 0),n}}class _n{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Uh(e)}where(e,n,r){try{return new _n(this.firestore,$i(this._delegate,vL(e,n,r)))}catch(i){throw Sn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new _n(this.firestore,$i(this._delegate,pL(e,n)))}catch(r){throw Sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _n(this.firestore,$i(this._delegate,yL(e)))}catch(n){throw Sn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new _n(this.firestore,$i(this._delegate,wL(e)))}catch(n){throw Sn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _n(this.firestore,$i(this._delegate,bL(...e)))}catch(n){throw Sn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _n(this.firestore,$i(this._delegate,IL(...e)))}catch(n){throw Sn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _n(this.firestore,$i(this._delegate,_L(...e)))}catch(n){throw Sn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _n(this.firestore,$i(this._delegate,SL(...e)))}catch(n){throw Sn(n,"endAt()","Query.endAt()")}}isEqual(e){return tC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=DL(this._delegate):(e==null?void 0:e.source)==="server"?n=PL(this._delegate):n=xL(this._delegate),n.then(r=>new ug(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=IC(e),r=_C(e,i=>new ug(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pC(this._delegate,n,r)}withConverter(e){return new _n(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class YL{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new uu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ug{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _n(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new YL(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new uu(this._firestore,r))})}isEqual(e){return vC(this._delegate,e._delegate)}}class ba extends _n{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rr(this.firestore,e):null}doc(e){try{return e===void 0?new rr(this.firestore,Td(this._delegate)):new rr(this.firestore,Td(this._delegate,e))}catch(n){throw Sn(n,"doc()","CollectionReference.doc()")}}add(e){return RL(this._delegate,e).then(n=>new rr(this.firestore,n))}isEqual(e){return eC(this._delegate,e._delegate)}withConverter(e){return new ba(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gs(t){return Je(t,vt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(...e){this._delegate=new ds(...e)}static documentId(){return new Rp(Dt.keyField().canonicalString())}isEqual(e){return e=Ce(e),e instanceof ds?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._delegate=e}static serverTimestamp(){const e=$L();return e._methodName="FieldValue.serverTimestamp",new qs(e)}static delete(){const e=BL();return e._methodName="FieldValue.delete",new qs(e)}static arrayUnion(...e){const n=UL(...e);return n._methodName="FieldValue.arrayUnion",new qs(n)}static arrayRemove(...e){const n=jL(...e);return n._methodName="FieldValue.arrayRemove",new qs(n)}static increment(e){const n=qL(e);return n._methodName="FieldValue.increment",new qs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={Firestore:yC,GeoPoint:Nh,Timestamp:It,Blob:au,Transaction:wC,WriteBatch:bC,DocumentReference:rr,DocumentSnapshot:lu,Query:_n,QueryDocumentSnapshot:uu,QuerySnapshot:ug,CollectionReference:ba,FieldPath:Rp,FieldValue:qs,setLogLevel:KL,CACHE_SIZE_UNLIMITED:ZV};function XL(t,e){t.INTERNAL.registerComponent(new Yr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QL)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){XL(t,(e,n)=>new yC(e,n,new GL)),t.registerVersion(zL,HL)}JL(Gn);function Op(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const rl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ro={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}}function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eF=ZL,tF=SC,TC=new Io("auth","Firebase",SC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new nh("@firebase/auth");function nF(t,...e){Cd.logLevel<=Ke.WARN&&Cd.warn(`Auth (${ws}): ${t}`,...e)}function $c(t,...e){Cd.logLevel<=Ke.ERROR&&Cd.error(`Auth (${ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw Mp(t,...e)}function an(t,...e){return Mp(t,...e)}function EC(t,e,n){const r=Object.assign(Object.assign({},tF()),{[e]:n});return new Io("auth","Firebase",r).create(e,{appName:t.name})}function La(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&un(t,"argument-error"),EC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TC.create(t,...e)}function X(t,e,...n){if(!t)throw Mp(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $c(e),new Error(e)}function _r(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Vp(){return Xb()==="http:"||Xb()==="https:"}function Xb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vp()||GS()||"connection"in navigator)?navigator.onLine:!0}function iF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=cP()||lv()}get(){return rF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,e){_r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=new Yu(3e4,6e4);function Ft(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qt(t,e,n,r,i={}){return kC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ca(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),CC.fetch()(AC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function kC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sF),e);try{const i=new aF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ml(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw EC(t,c,u);un(t,c)}}catch(i){if(i instanceof kn)throw i;un(t,"network-request-failed",{message:String(i)})}}async function Pi(t,e,n,r,i={}){const s=await qt(t,e,n,r,i);return"mfaPendingCredential"in s&&un(t,"multi-factor-auth-required",{_serverResponse:s}),s}function AC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Lp(t.config,i):`${t.config.apiScheme}://${i}`}class aF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),oF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=an(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e){return qt(t,"POST","/v1/accounts:delete",e)}async function uF(t,e){return qt(t,"POST","/v1/accounts:update",e)}async function cF(t,e){return qt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dF(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),i=jh(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xl(zf(i.auth_time)),issuedAtTime:xl(zf(i.iat)),expirationTime:xl(zf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zf(t){return Number(t)*1e3}function jh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const i=HS(n);return i?JSON.parse(i):($c("Failed to decode base64 JWT payload"),null)}catch(i){return $c("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hF(t){const e=jh(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&fF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ii(t,cF(n,{idToken:r}));X(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pF(s.providerUserInfo):[],a=vF(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xC(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function gF(t){const e=Ce(t);await du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pF(t){return t.map(e=>{var{providerId:n}=e,r=Op(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e){const n=await kC(t,{},async()=>{const r=Ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=AC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",CC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return X(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new hu;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Op(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ii(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dF(this,e)}reload(){return gF(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await du(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ii(this,lF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:T,providerData:E,stsTokenManager:A}=n;X(_&&A,e,"internal-error");const D=hu.fromJSON(this.name,A);X(typeof _=="string",e,"internal-error"),Ui(d,e.name),Ui(h,e.name),X(typeof b=="boolean",e,"internal-error"),X(typeof T=="boolean",e,"internal-error"),Ui(f,e.name),Ui(m,e.name),Ui(g,e.name),Ui(v,e.name),Ui(y,e.name),Ui(w,e.name);const P=new Zs({uid:_,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:T,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:D,createdAt:y,lastLoginAt:w});return E&&Array.isArray(E)&&(P.providerData=E.map(U=>Object.assign({},U))),v&&(P._redirectEventId=v),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new hu;i.updateFromServerResponse(n);const s=new Zs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await du(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Map;function Hn(t){_r(t instanceof Function,"Expected a class definition");let e=Jb.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DC.type="NONE";const Ia=DC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=eo(this.userKey,i.apiKey,s),this.fullPersistenceKey=eo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ea(Hn(Ia),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Hn(Ia);const o=eo(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Zs._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ea(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ea(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OC(e))return"Blackberry";if(MC(e))return"Webos";if(Fp(e))return"Safari";if((e.includes("chrome/")||NC(e))&&!e.includes("edge/"))return"Chrome";if(Qu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PC(t=Tt()){return/firefox\//i.test(t)}function Fp(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NC(t=Tt()){return/crios\//i.test(t)}function RC(t=Tt()){return/iemobile/i.test(t)}function Qu(t=Tt()){return/android/i.test(t)}function OC(t=Tt()){return/blackberry/i.test(t)}function MC(t=Tt()){return/webos/i.test(t)}function Fa(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wF(t=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function bF(t=Tt()){var e;return Fa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IF(){return KS()&&document.documentMode===10}function VC(t=Tt()){return Fa(t)||Qu(t)||MC(t)||OC(t)||/windows phone/i.test(t)||RC(t)}function _F(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e=[]){let n;switch(t){case"Browser":n=Zb(Tt());break;case"Worker":n=`${Zb(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ws}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(t){return(await qt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function FC(t,e){return qt(t,"GET","/v2/recaptchaConfig",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){return t!==void 0&&t.getResponse!==void 0}function tI(t){return t!==void 0&&t.enterprise!==void 0}class BC{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Bp(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=an("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",TF().appendChild(r)})}function $C(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const EF="https://www.google.com/recaptcha/enterprise.js?render=",CF="recaptcha-enterprise",kF="NO_RECAPTCHA";class UC{constructor(e){this.type=CF,this.auth=Ot(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{FC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new BC(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;tI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(kF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&tI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}Bp(EF+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function fs(t,e,n,r=!1){const i=new UC(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nI(this),this.idTokenSubscription=new nI(this),this.beforeStateQueue=new AF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await du(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ce(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}async initializeRecaptchaConfig(){const e=await FC(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new BC(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new UC(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Io("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return X(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ot(t){return Ce(t)}class nI{constructor(e){this.auth=e,this.observer=null,this.addObserver=YS(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function DF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PF(t,e,n){const r=Ot(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jC(e),{host:o,port:a}=NF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RF()}function jC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NF(t){const e=jC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:rI(o)}}}function rI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e){return qt(t,"POST","/v1/accounts:resetPassword",Ft(t,e))}async function zC(t,e){return qt(t,"POST","/v1/accounts:update",e)}async function OF(t,e){return qt(t,"POST","/v1/accounts:update",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t,e){return Pi(t,"POST","/v1/accounts:signInWithPassword",Ft(t,e))}async function qh(t,e){return qt(t,"POST","/v1/accounts:sendOobCode",Ft(t,e))}async function MF(t,e){return qh(t,e)}async function Wf(t,e){return qh(t,e)}async function Gf(t,e){return qh(t,e)}async function VF(t,e){return qh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",Ft(t,e))}async function FF(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Ba{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new fu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await fs(e,r,"signInWithPassword");return Hf(e,i)}else return Hf(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await fs(e,r,"signInWithPassword");return Hf(e,s)}else return Promise.reject(i)});case"emailLink":return LF(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return zC(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return FF(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e){return Pi(t,"POST","/v1/accounts:signInWithIdp",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="http://localhost";class Jr extends Ba{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Op(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Jr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fi(e,n)}buildRequest(){const e={requestUri:BF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(t,e){return qt(t,"POST","/v1/accounts:sendVerificationCode",Ft(t,e))}async function UF(t,e){return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,e))}async function jF(t,e){const n=await Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,e));if(n.temporaryProof)throw ml(t,"account-exists-with-different-credential",n);return n}const qF={USER_NOT_FOUND:"user-not-found"};async function zF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ft(t,n),qF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Ba{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new to({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new to({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return UF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return jF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return zF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new to({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WF(t){const e=Uo(ll(t)).link,n=e?Uo(ll(e)).deep_link_id:null,r=Uo(ll(t)).deep_link_id;return(r?Uo(ll(r)).link:null)||r||n||e||t}class zh{constructor(e){var n,r,i,s,o,a;const l=Uo(ll(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=HF((i=l.mode)!==null&&i!==void 0?i:null);X(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WF(e);try{return new zh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.providerId=Cs.PROVIDER_ID}static credential(e,n){return fu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zh.parseLink(n);return X(r,"argument-error"),fu._fromEmailAndCode(e,r.code,r.tenantId)}}Cs.PROVIDER_ID="password";Cs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ta extends $a{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return X("providerId"in n&&"signInMethod"in n,"argument-error"),Jr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return X(e.idToken||e.accessToken,"argument-error"),Jr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ta.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ta.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new ta(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends $a{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends $a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends $a{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="http://localhost";class _a extends Ba{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new _a(r,s)}static _create(e,n){return new _a(e,n)}buildRequest(){return{requestUri:GF,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="saml.";class kd extends Ni{constructor(e){X(e.startsWith(KF),"argument-error"),super(e)}static credentialFromResult(e){return kd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return kd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=_a.fromJSON(e);return X(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return _a._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends $a{constructor(){super("twitter.com")}static credential(e,n){return Jr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e){return Pi(t,"POST","/v1/accounts:signUp",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Zs._fromIdTokenResponse(e,r,i),o=iI(r);return new ur({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iI(r);return new ur({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YF(t){var e;const n=Ot(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ur({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Uc(n,{returnSecureToken:!0}),i=await ur._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ad(e,n,r,i)}}function HC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e){const n=Ce(t);await Hh(!0,n,e);const{providerUserInfo:r}=await uF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=WC(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function $p(t,e,n=!1){const r=await Ii(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ur._forOperation(t,"link",r)}async function Hh(t,e,n){await du(e);const r=WC(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";X(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ii(t,HC(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=jh(s.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),ur._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e,n=!1){const r="signIn",i=await HC(t,r,e),s=await ur._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Wh(t,e){return KC(Ot(t),e)}async function YC(t,e){const n=Ce(t);return await Hh(!1,n,e.providerId),$p(n,e)}async function QC(t,e){return GC(Ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(t,e){return Pi(t,"POST","/v1/accounts:signInWithCustomToken",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t,e){const n=Ot(t),r=await XF(n,{token:e,returnSecureToken:!0}),i=await ur._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Up._fromServerResponse(e,n):"totpInfo"in n?jp._fromServerResponse(e,n):un(e,"internal-error")}}class Up extends Xu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Up(n)}}class jp extends Xu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new jp(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e,n){var r;X(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),X(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(X(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(X(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(t,e,n){var r;const i=Ot(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await fs(i,s,"getOobCode",!0);n&&na(i,o,n),await Wf(i,o)}else n&&na(i,s,n),await Wf(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await fs(i,s,"getOobCode",!0);n&&na(i,a,n),await Wf(i,a)}else return Promise.reject(o)})}async function eB(t,e,n){await qC(Ce(t),{oobCode:e,newPassword:n})}async function tB(t,e){await OF(Ce(t),{oobCode:e})}async function XC(t,e){const n=Ce(t),r=await qC(n,{oobCode:e}),i=r.requestType;switch(X(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(r.mfaInfo,n,"internal-error");default:X(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Xu._fromServerResponse(Ot(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function nB(t,e){const{data:n}=await XC(Ce(t),e);return n.email}async function rB(t,e,n){var r;const i=Ot(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await fs(i,s,"signUpPassword");o=Uc(i,u)}else o=Uc(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await fs(i,s,"signUpPassword");return Uc(i,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await ur._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function iB(t,e,n){return Wh(Ce(t),Cs.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e,n){var r;const i=Ot(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,l){X(l.handleCodeInApp,i,"argument-error"),l&&na(i,a,l)}if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const a=await fs(i,s,"getOobCode",!0);o(a,n),await Gf(i,a)}else o(s,n),await Gf(i,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await fs(i,s,"getOobCode",!0);o(l,n),await Gf(i,l)}else return Promise.reject(a)})}function oB(t,e){const n=zh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function aB(t,e,n){const r=Ce(t),i=Cs.credentialWithLink(e,n||cu());return X(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Wh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){return qt(t,"POST","/v1/accounts:createAuthUri",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e){const n=Vp()?cu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await lB(Ce(t),r);return i||[]}async function cB(t,e){const n=Ce(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&na(n.auth,i,e);const{email:s}=await MF(n.auth,i);s!==t.email&&await t.reload()}async function dB(t,e,n){const r=Ce(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&na(r.auth,s,n);const{email:o}=await VF(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e){return qt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ce(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ii(r,hB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function mB(t,e){return JC(Ce(t),e,null)}function gB(t,e){return JC(Ce(t),null,e)}async function JC(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ii(t,zC(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=jh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ra(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new pB(s,i);case"github.com":return new yB(s,i);case"google.com":return new wB(s,i);case"twitter.com":return new bB(s,i,t.screenName||null);case"custom":case"anonymous":return new ra(s,null);default:return new ra(s,r,i)}}class ra{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class ZC extends ra{constructor(e,n,r,i){super(e,n,r),this.username=i}}class pB extends ra{constructor(e,n){super(e,"facebook.com",n)}}class yB extends ZC{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class wB extends ra{constructor(e,n){super(e,"google.com",n)}}class bB extends ZC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function IB(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:vB(n)}class Ks{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Ks("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ks("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ks._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ks._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ot(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Xu._fromServerResponse(r,a));X(i.mfaPendingCredential,r,"internal-error");const o=Ks._fromMfaPendingCredential(i.mfaPendingCredential);return new qp(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await ur._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return X(n.user,r,"internal-error"),ur._forOperation(n.user,n.operationType,u);default:un(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function _B(t,e){var n;const r=Ce(t),i=e;return X(e.customData.operationType,r,"argument-error"),X((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),qp._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t,e){return qt(t,"POST","/v2/accounts/mfaEnrollment:start",Ft(t,e))}function TB(t,e){return qt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(t,e))}function EB(t,e){return qt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(t,e))}class zp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Xu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new zp(e)}async getSession(){return Ks._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ii(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ii(this.user,EB(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Kf=new WeakMap;function CB(t){const e=Ce(t);return Kf.has(e)||Kf.set(e,zp._fromUser(e)),Kf.get(e)}const xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(){const t=Tt();return Fp(t)||Fa(t)}const AB=1e3,xB=10;class tk extends ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=kB()&&_F(),this.fallbackToPolling=VC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);IF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xB):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tk.type="LOCAL";const Hp=tk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nk.type="SESSION";const po=nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await DB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Ju("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function NB(t){Lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function RB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MB(){return Wp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebaseLocalStorageDb",VB=1,Dd="firebaseLocalStorage",ik="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function LB(){const t=indexedDB.deleteDatabase(rk);return new Zu(t).toPromise()}function cg(){const t=indexedDB.open(rk,VB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dd,{keyPath:ik})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dd)?e(r):(r.close(),await LB(),e(await cg()))})})}async function sI(t,e,n){const r=Kh(t,!0).put({[ik]:e,value:n});return new Zu(r).toPromise()}async function FB(t,e){const n=Kh(t,!1).get(e),r=await new Zu(n).toPromise();return r===void 0?null:r.value}function oI(t,e){const n=Kh(t,!0).delete(e);return new Zu(n).toPromise()}const BB=800,$B=3;class sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$B)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(MB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RB(),!this.activeServiceWorker)return;this.sender=new PB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cg();return await sI(e,xd,"1"),await oI(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>oI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kh(i,!1).getAll();return new Zu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sk.type="LOCAL";const mu=sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t,e){return qt(t,"POST","/v2/accounts/mfaSignIn:start",Ft(t,e))}function jB(t,e){return qt(t,"POST","/v2/accounts/mfaSignIn:finalize",Ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=500,zB=6e4,Ec=1e12;class HB{constructor(e){this.auth=e,this.counter=Ec,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new WB(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Ec;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Ec;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Ec;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class WB{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;X(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=GB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},zB)},qB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function GB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=$C("rcb"),KB=new Yu(3e4,6e4),YB="https://www.google.com/recaptcha/api.js?";class QB{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return X(XB(n),e,"argument-error"),this.shouldResolveImmediately(n)&&eI(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((r,i)=>{const s=Lt().setTimeout(()=>{i(an(e,"network-request-failed"))},KB.get());Lt()[Yf]=()=>{Lt().clearTimeout(s),delete Lt()[Yf];const a=Lt().grecaptcha;if(!a||!eI(a)){i(an(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${YB}?${Ca({onload:Yf,render:"explicit",hl:n})}`;Bp(o).catch(()=>{clearTimeout(s),i(an(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Lt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function XB(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class JB{async load(e){return new HB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="recaptcha",ZB={theme:"light",type:"image"};let e$=class{constructor(e,n=Object.assign({},ZB),r){this.parameters=n,this.type=ok,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ot(r),this.isInvisible=this.parameters.size==="invisible",X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;X(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new JB:new QB,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Lt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){X(Vp()&&!Wp(),this.auth,"internal-error"),await t$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await SF(this.auth);X(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function t$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=to._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function n$(t,e,n){const r=Ot(t),i=await Yh(r,e,Ce(n));return new Gp(i,s=>Wh(r,s))}async function r$(t,e,n){const r=Ce(t);await Hh(!1,r,"phone");const i=await Yh(r.auth,e,Ce(n));return new Gp(i,s=>YC(r,s))}async function i$(t,e,n){const r=Ce(t),i=await Yh(r.auth,e,Ce(n));return new Gp(i,s=>QC(r,s))}async function Yh(t,e,n){var r;const i=await n.verify();try{X(typeof i=="string",t,"argument-error"),X(n.type===ok,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return X(o.type==="enroll",t,"internal-error"),(await SB(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{X(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return X(a,t,"missing-multi-factor-info"),(await UB(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await $F(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function s$(t,e){await $p(Ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo=class jc{constructor(e){this.providerId=jc.PROVIDER_ID,this.auth=Ot(e)}verifyPhoneNumber(e,n){return Yh(this.auth,e,Ce(n))}static credential(e,n){return to._fromVerification(e,n)}static credentialFromResult(e){const n=e;return jc.credentialFromTaggedObject(n)}static credentialFromError(e){return jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?to._fromTokenResponse(n,r):null}};yo.PROVIDER_ID="phone";yo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t,e){return e?Hn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function o$(t){return KC(t.auth,new Kp(t),t.bypassAuthState)}function a$(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),GC(n,new Kp(t),t.bypassAuthState)}async function l$(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),$p(n,new Kp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o$;case"linkViaPopup":case"linkViaRedirect":return l$;case"reauthViaPopup":case"reauthViaRedirect":return a$;default:un(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=new Yu(2e3,1e4);async function c$(t,e,n){const r=Ot(t);La(t,e,Ni);const i=Ao(r,n);return new ui(r,"signInViaPopup",e,i).executeNotNull()}async function d$(t,e,n){const r=Ce(t);La(r.auth,e,Ni);const i=Ao(r.auth,n);return new ui(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function h$(t,e,n){const r=Ce(t);La(r.auth,e,Ni);const i=Ao(r.auth,n);return new ui(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ui extends ak{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ui.currentPopupAction&&ui.currentPopupAction.cancel(),ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=Ju();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u$.get())};e()}}ui.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$="pendingRedirect",Dl=new Map;class m$ extends ak{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dl.get(this.auth._key());if(!e){try{const r=await g$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dl.set(this.auth._key(),e)}return this.bypassAuthState||Dl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g$(t,e){const n=uk(e),r=lk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Yp(t,e){return lk(t)._set(uk(e),"true")}function v$(){Dl.clear()}function Qp(t,e){Dl.set(t._key(),e)}function lk(t){return Hn(t._redirectPersistence)}function uk(t){return eo(f$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(t,e,n){return y$(t,e,n)}async function y$(t,e,n){const r=Ot(t);La(t,e,Ni),await r._initializationPromise;const i=Ao(r,n);return await Yp(i,r),i._openRedirect(r,e,"signInViaRedirect")}function w$(t,e,n){return b$(t,e,n)}async function b$(t,e,n){const r=Ce(t);La(r.auth,e,Ni),await r.auth._initializationPromise;const i=Ao(r.auth,n);await Yp(i,r.auth);const s=await ck(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function I$(t,e,n){return _$(t,e,n)}async function _$(t,e,n){const r=Ce(t);La(r.auth,e,Ni),await r.auth._initializationPromise;const i=Ao(r.auth,n);await Hh(!1,r,e.providerId),await Yp(i,r.auth);const s=await ck(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function S$(t,e){return await Ot(t)._initializationPromise,Qh(t,e,!1)}async function Qh(t,e,n=!1){const r=Ot(t),i=Ao(r,e),o=await new m$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function ck(t){const e=Ju(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=10*60*1e3;class dk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(an(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T$&&this.cachedEventUids.clear(),this.cachedEventUids.has(aI(e))}saveEventToCache(e){this.cachedEventUids.add(aI(e)),this.lastProcessedEventTime=Date.now()}}function aI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e={}){return qt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k$=/^https?/;async function A$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fk(t);for(const n of e)try{if(x$(n))return}catch{}un(t,"unauthorized-domain")}function x$(t){const e=cu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!k$.test(n))return!1;if(C$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=new Yu(3e4,6e4);function lI(){const t=Lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P$(t){return new Promise((e,n)=>{var r,i,s;function o(){lI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lI(),n(an(t,"network-request-failed"))},timeout:D$.get()})}if(!((i=(r=Lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Lt().gapi)===null||s===void 0)&&s.load)o();else{const a=$C("iframefcb");return Lt()[a]=()=>{gapi.load?o():n(an(t,"network-request-failed"))},Bp(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw qc=null,e})}let qc=null;function N$(t){return qc=qc||P$(t),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=new Yu(5e3,15e3),O$="__/auth/iframe",M$="emulator/auth/iframe",V$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F$(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lp(e,M$):`https://${t.config.authDomain}/${O$}`,r={apiKey:e.apiKey,appName:t.name,v:ws},i=L$.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ca(r).slice(1)}`}async function B$(t){const e=await N$(t),n=Lt().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:F$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V$,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),a=Lt().setTimeout(()=>{s(o)},R$.get());function l(){Lt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U$=500,j$=600,q$="_blank",z$="http://localhost";class uI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H$(t,e,n,r=U$,i=j$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$$),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Tt().toLowerCase();n&&(a=NC(u)?q$:n),PC(u)&&(e=e||z$,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(bF(u)&&a!=="_self")return W$(e||"",a),new uI(null);const d=window.open(e||"",a,c);X(d,t,"popup-blocked");try{d.focus()}catch{}return new uI(d)}function W$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="__/auth/handler",K$="emulator/auth/handler",Y$=encodeURIComponent("fac");async function dg(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ws,eventId:i};if(e instanceof Ni){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof $a){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${Y$}=${encodeURIComponent(l)}`:"";return`${Q$(t)}?${Ca(a).slice(1)}${u}`}function Q$({config:t}){return t.emulator?Lp(t,K$):`https://${t.authDomain}/${G$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="webStorageSupport";class X${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=po,this._completeRedirectFn=Qh,this._overrideRedirectResult=Qp}async _openPopup(e,n,r,i){var s;_r((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await dg(e,n,r,cu(),i);return H$(e,o,Ju())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await dg(e,n,r,cu(),i);return NB(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(_r(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await B$(e),r=new dk(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qf,{type:Qf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qf];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VC()||Fp()||Fa()}}const J$=X$;class Z${constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ur("unexpected MultiFactorSessionType")}}}class Xp extends Z${constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Xp(e)}_finalizeEnroll(e,n,r){return TB(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return jB(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mk{constructor(){}static assertion(e){return Xp._fromCredential(e)}}mk.FACTOR_ID="phone";var cI="@firebase/auth",dI="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function n2(t){rs(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LC(t)},u=new xF(r,i,s,l);return DF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rs(new Yr("auth-internal",e=>{const n=Ot(e.getProvider("auth").getImmediate());return(r=>new e2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(cI,dI,t2(t)),zr(cI,dI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=5*60;aP("authIdTokenMaxAge");n2("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=2e3;async function s2(t,e,n){var r;const{BuildInfo:i}=wo();_r(e.sessionId,"AuthEvent did not contain a session ID");const s=await c2(e.sessionId),o={};return Fa()?o.ibi=i.packageName:Qu()?o.apn=i.packageName:un(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,dg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function o2(t){const{BuildInfo:e}=wo(),n={};Fa()?n.iosBundleId=e.packageName:Qu()?n.androidPackageName=e.packageName:un(t,"operation-not-supported-in-this-environment"),await fk(t,n)}function a2(t){const{cordova:e}=wo();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,wF()?"_blank":"_system","location=yes"),n(i)})})}async function l2(t,e,n){const{cordova:r}=wo();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(an(t,"redirect-cancelled-by-user"))},i2))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Qu()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function u2(t){var e,n,r,i,s,o,a,l,u,c;const d=wo();X(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function c2(t){const e=d2(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function d2(t){if(_r(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=20;class f2 extends dk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function m2(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:p2(),postBody:null,tenantId:t.tenantId,error:an(t,"no-auth-event")}}function g2(t,e){return hg()._set(fg(t),e)}async function hI(t){const e=await hg()._get(fg(t));return e&&await hg()._remove(fg(t)),e}function v2(t,e){var n,r;const i=w2(e);if(i.includes("/__/auth/callback")){const s=zc(i),o=s.firebaseError?y2(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?an(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function p2(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<h2;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function hg(){return Hn(Hp)}function fg(t){return eo("authEvent",t.config.apiKey,t.name)}function y2(t){try{return JSON.parse(t)}catch{return null}}function w2(t){const e=zc(t),n=e.link?decodeURIComponent(e.link):void 0,r=zc(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return zc(i).link||i||r||n||t}function zc(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Uo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=500;class I2{constructor(){this._redirectPersistence=po,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qh,this._overrideRedirectResult=Qp}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new f2(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){un(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){u2(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),v$(),await this._originValidation(e);const o=m2(e,r,i);await g2(e,o);const a=await s2(e,o,n),l=await a2(a);return l2(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o2(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=wo(),o=setTimeout(async()=>{await hI(e),n.onEvent(fI())},b2),a=async c=>{clearTimeout(o);const d=await hI(e);let h=null;d&&(c!=null&&c.url)&&(h=v2(d,c.url)),n.onEvent(h||fI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;wo().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const _2=I2;function fI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:an("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){Ot(t)._logFramework(e)}var T2="@firebase/auth-compat",E2="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=1e3;function Pl(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function k2(){return Pl()==="http:"||Pl()==="https:"}function gk(t=Tt()){return!!((Pl()==="file:"||Pl()==="ionic:"||Pl()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function A2(){return lv()||av()}function x2(){return KS()&&(document==null?void 0:document.documentMode)===11}function D2(t=Tt()){return/Edge\/\d+/.test(t)}function P2(t=Tt()){return x2()||D2(t)}function vk(){try{const t=self.localStorage,e=Ju();if(t)return t.setItem(e,"1"),t.removeItem(e),P2()?$l():!0}catch{return Jp()&&$l()}return!1}function Jp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xf(){return(k2()||GS()||gk())&&!A2()&&vk()&&!Jp()}function pk(){return gk()&&typeof document<"u"}async function N2(){return pk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},C2);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function R2(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn={LOCAL:"local",NONE:"none",SESSION:"session"},il=X,yk="persistence";function O2(t,e){if(il(Object.values(jn).includes(e),t,"invalid-persistence-type"),lv()){il(e!==jn.SESSION,t,"unsupported-persistence-type");return}if(av()){il(e===jn.NONE,t,"unsupported-persistence-type");return}if(Jp()){il(e===jn.NONE||e===jn.LOCAL&&$l(),t,"unsupported-persistence-type");return}il(e===jn.NONE||vk(),t,"unsupported-persistence-type")}async function mg(t){await t._initializationPromise;const e=wk(),n=eo(yk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function M2(t,e){const n=wk();if(!n)return[];const r=eo(yk,t,e);switch(n.getItem(r)){case jn.NONE:return[Ia];case jn.LOCAL:return[mu,po];case jn.SESSION:return[po];default:return[]}}function wk(){var t;try{return((t=R2())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=X;class Qi{constructor(){this.browserResolver=Hn(J$),this.cordovaResolver=Hn(_2),this.underlyingResolver=null,this._redirectPersistence=po,this._completeRedirectFn=Qh,this._overrideRedirectResult=Qp}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return pk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return V2(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await N2();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){return t.unwrap()}function L2(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){return Ik(t)}function B2(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new $2(t,_B(t,e))}else if(r){const i=Ik(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function Ik(t){const{_tokenResponse:e}=t instanceof kn?t.customData:t;if(!e)return null;if(!(t instanceof kn)&&"temporaryProof"in e&&"phoneNumber"in e)return yo.credentialFromResult(t);const n=e.providerId;if(!n||n===rl.PASSWORD)return null;let r;switch(n){case rl.GOOGLE:r=Or;break;case rl.FACEBOOK:r=Rr;break;case rl.GITHUB:r=Mr;break;case rl.TWITTER:r=Vr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?_a._create(n,a):Jr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new ta(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof kn?r.credentialFromError(t):r.credentialFromResult(t)}function Rn(t,e){return e.catch(n=>{throw n instanceof kn&&B2(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:F2(n),additionalUserInfo:IB(n),user:ci.getOrCreate(i)}})}async function gg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Rn(t,n.confirm(r))}}class $2{constructor(e,n){this.resolver=n,this.auth=L2(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Rn(bk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._delegate=e,this.multiFactor=CB(e)}static getOrCreate(e){return ci.USER_MAP.has(e)||ci.USER_MAP.set(e,new ci(e)),ci.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Rn(this.auth,YC(this._delegate,e))}async linkWithPhoneNumber(e,n){return gg(this.auth,r$(this._delegate,e,n))}async linkWithPopup(e){return Rn(this.auth,h$(this._delegate,e,Qi))}async linkWithRedirect(e){return await mg(Ot(this.auth)),I$(this._delegate,e,Qi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Rn(this.auth,QC(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return gg(this.auth,i$(this._delegate,e,n))}reauthenticateWithPopup(e){return Rn(this.auth,d$(this._delegate,e,Qi))}async reauthenticateWithRedirect(e){return await mg(Ot(this.auth)),w$(this._delegate,e,Qi)}sendEmailVerification(e){return cB(this._delegate,e)}async unlink(e){return await QF(this._delegate,e),this}updateEmail(e){return mB(this._delegate,e)}updatePassword(e){return gB(this._delegate,e)}updatePhoneNumber(e){return s$(this._delegate,e)}updateProfile(e){return fB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return dB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ci.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=X;class vg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;sl(r,"invalid-api-key",{appName:e.name}),sl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Qi:void 0;this._delegate=n.initialize({options:{persistence:U2(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(eF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ci.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){PF(this._delegate,e,n)}applyActionCode(e){return tB(this._delegate,e)}checkActionCode(e){return XC(this._delegate,e)}confirmPasswordReset(e,n){return eB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Rn(this._delegate,rB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return uB(this._delegate,e)}isSignInWithEmailLink(e){return oB(this._delegate,e)}async getRedirectResult(){sl(Xf(),this._delegate,"operation-not-supported-in-this-environment");const e=await S$(this._delegate,Qi);return e?Rn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){S2(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=mI(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=mI(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return sB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return ZF(this._delegate,e,n||void 0)}async setPersistence(e){O2(this._delegate,e);let n;switch(e){case jn.SESSION:n=po;break;case jn.LOCAL:n=await Hn(mu)._isAvailable()?mu:Hp;break;case jn.NONE:n=Ia;break;default:return un("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Rn(this._delegate,YF(this._delegate))}signInWithCredential(e){return Rn(this._delegate,Wh(this._delegate,e))}signInWithCustomToken(e){return Rn(this._delegate,JF(this._delegate,e))}signInWithEmailAndPassword(e,n){return Rn(this._delegate,iB(this._delegate,e,n))}signInWithEmailLink(e,n){return Rn(this._delegate,aB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return gg(this._delegate,n$(this._delegate,e,n))}async signInWithPopup(e){return sl(Xf(),this._delegate,"operation-not-supported-in-this-environment"),Rn(this._delegate,c$(this._delegate,e,Qi))}async signInWithRedirect(e){return sl(Xf(),this._delegate,"operation-not-supported-in-this-environment"),await mg(this._delegate),p$(this._delegate,e,Qi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return nB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}vg.Persistence=jn;function mI(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&ci.getOrCreate(o)),error:e,complete:n}}function U2(t,e){const n=M2(t,e);if(typeof self<"u"&&!n.includes(mu)&&n.push(mu),typeof window<"u")for(const r of[Hp,po])n.includes(r)||n.push(r);return n.includes(Ia)||n.push(Ia),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.providerId="phone",this._delegate=new yo(bk(Gn.auth()))}static credential(e,n){return yo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Zp.PHONE_SIGN_IN_METHOD=yo.PHONE_SIGN_IN_METHOD;Zp.PROVIDER_ID=yo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=X;class q2{constructor(e,n,r=Gn.app()){var i;j2((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new e$(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="auth-compat";function H2(t){t.INTERNAL.registerComponent(new Yr(z2,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new vg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ro.EMAIL_SIGNIN,PASSWORD_RESET:Ro.PASSWORD_RESET,RECOVER_EMAIL:Ro.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ro.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ro.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ro.VERIFY_EMAIL}},EmailAuthProvider:Cs,FacebookAuthProvider:Rr,GithubAuthProvider:Mr,GoogleAuthProvider:Or,OAuthProvider:ta,SAMLAuthProvider:kd,PhoneAuthProvider:Zp,PhoneMultiFactorGenerator:mk,RecaptchaVerifier:q2,TwitterAuthProvider:Vr,Auth:vg,AuthCredential:Ba,Error:kn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(T2,E2)}H2(Gn);const W2={apiKey:"AIzaSyArnrHZPft_F6a-5sNUxQNViFddzshIlEo",authDomain:"msdatabase-e2d25.firebaseapp.com",projectId:"msdatabase-e2d25",storageBucket:"msdatabase-e2d25.firebasestorage.app",messagingSenderId:"525846107898",appId:"1:525846107898:web:41a6740fa50a0e84b91b43",measurementId:"G-0VV0VG0LT6"};Gn.apps.length||Gn.initializeApp(W2);const gn=Gn.firestore(),ey=Gn.auth(),G2=()=>{const t=new Gn.auth.GoogleAuthProvider;return ey.signInWithPopup(t).catch(e=>{throw console.error(":",e),e})},K2=()=>ey.signOut(),Y2=t=>ey.onAuthStateChanged(t),Jf={loginWithGoogle:G2,logout:K2,onAuthStateChanged:Y2},Q2=t=>{if(!t)throw new Error("User ID is required to load initial data.");try{return Promise.all([gn.collection("accounts").get(),gn.collection("character_masters").get(),gn.collection("itemMasters").get(),gn.collectionGroup("owned_characters").get(),gn.collection("gachaMasters").get(),gn.collection("teams").where("userId","==",t).orderBy("createdAt","desc").get()])}catch(e){throw console.error("Database: Failed to load initial data.",e),e}},X2=async t=>{const[e,n,r,i,s,o]=await Q2(t),a=e.docs.map(v=>{const y=v.data();return{id:v.id,name:y.Name||`${y.id}`,numericId:y.id,indexNumber:y.indexNumber}}).sort((v,y)=>(v.numericId||999)-(y.numericId||999)),l=n.docs.map(v=>({...v.data(),id:v.id})).sort((v,y)=>(v.indexNumber||999999)-(y.indexNumber||999999)),u=new Map(l.map(v=>[v.id,v])),c=r.docs.map(v=>({...v.data(),id:Number(v.data().id)})).sort((v,y)=>v.id-y.id),d=new Map(c.map(v=>[v.id,v.name])),h=s.docs.map(v=>v.data()).sort((v,y)=>v.id-y.id),f=o.docs.map(v=>({...v.data(),id:v.id})),m=new Map,g=new Map;return i.forEach(v=>{const y=v.data(),w=v.ref.parent.parent.id,b=`${y.characterMasterId}-${w}`;g.set(b,(g.get(b)||0)+1),m.has(w)||m.set(w,[]),m.get(w).push({...y,id:v.id})}),{accounts:a,characterMasters:l,characterMastersMap:u,itemMasters:c,itemMastersMap:d,gachaMasters:h,teams:f,ownedCharactersData:m,ownedCountMap:g}},J2=(t,e)=>gn.collection("accounts").doc(t).collection("owned_characters").add(e),Z2=(t,e,n)=>gn.collection("accounts").doc(t).collection("owned_characters").doc(e).update({items:n}),eU=(t,e,n)=>{const r=gn.batch(),i=gn.collection("accounts").doc(t).collection("owned_characters").doc(e.id),s=gn.collection("accounts").doc(t).collection("owned_characters").doc(n.id);return r.update(i,{items:e.items}),r.update(s,{items:n.items}),r.commit()},tU=t=>gn.collection("character_masters").add(t),nU=(t,e)=>gn.collection("character_masters").doc(t).update(e),rU=(t,e)=>t?gn.collection("teams").doc(t).update(e):gn.collection("teams").add(e),iU=t=>gn.collection("teams").doc(t).delete(),ms={loadAndProcessInitialData:X2,addOwnedCharacter:J2,updateCharacterItems:Z2,moveCharacterItems:eU,addCharacterMaster:tU,updateCharacterMaster:nU,saveTeam:rU,deleteTeam:iU},tt=typeof window<"u",ty=tt&&"IntersectionObserver"in window,sU=tt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),oU=tt&&"matchMedia"in window&&typeof window.matchMedia=="function";function gI(t,e,n){aU(t,e),e.set(t,n)}function aU(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vI(t,e,n){return t.set(_k(t,e),n),n}function ni(t,e){return t.get(_k(t,e))}function _k(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Sk(t,e,n){const r=e.length-1;if(r<0)return t===void 0?n:t;for(let i=0;i<r;i++){if(t==null)return n;t=t[e[i]]}return t==null||t[e[r]]===void 0?n:t[e[r]]}function sr(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>sr(t[r],e[r]))}function pg(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),Sk(t,e.split("."),n))}function mr(t,e,n){if(e===!0)return t===void 0?n:t;if(e==null||typeof e=="boolean")return n;if(t!==Object(t)){if(typeof e!="function")return n;const i=e(t,n);return typeof i>"u"?n:i}if(typeof e=="string")return pg(t,e,n);if(Array.isArray(e))return Sk(t,e,n);if(typeof e!="function")return n;const r=e(t,n);return typeof r>"u"?n:r}function Tk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,r)=>e+r)}function Ae(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(t==null||t==="")return;const n=Number(t);return isNaN(n)?String(t):isFinite(n)?`${n}${e}`:void 0}function Pd(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function pI(t){let e;return t!==null&&typeof t=="object"&&((e=Object.getPrototypeOf(t))===Object.prototype||e===null)}function Ek(t){if(t&&"$el"in t){const e=t.$el;return(e==null?void 0:e.nodeType)===Node.TEXT_NODE?e.nextElementSibling:e}return t}function Ck(t){return Object.keys(t)}function Zf(t,e){return e.every(n=>t.hasOwnProperty(n))}function ec(t,e){const n={};for(const r of e)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function yI(t,e,n){const r=Object.create(null),i=Object.create(null);for(const s in t)e.some(o=>o instanceof RegExp?o.test(s):o===s)?r[s]=t[s]:i[s]=t[s];return[r,i]}function Zr(t,e){const n={...t};return e.forEach(r=>delete n[r]),n}const kk=/^on[^a-z]/,Ak=t=>kk.test(t),lU=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function ny(t){const[e,n]=yI(t,[kk]),r=Zr(e,lU),[i,s]=yI(n,["class","style","id",/^data-/]);return Object.assign(i,e),Object.assign(s,r),[i,s]}function yr(t){return t==null?[]:Array.isArray(t)?t:[t]}function uU(t,e){let n=0;const r=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(()=>t(...s),oi(e))};return r.clear=()=>{clearTimeout(n)},r.immediate=t,r}function or(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function wI(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+n.repeat(Math.max(0,e-t.length))}function bI(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,e-t.length))+t}function cU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<t.length;)n.push(t.substr(r,e)),r+=e;return n}function pn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const i in t)r[i]=t[i];for(const i in e){const s=t[i],o=e[i];if(pI(s)&&pI(o)){r[i]=pn(s,o,n);continue}if(n&&Array.isArray(s)&&Array.isArray(o)){r[i]=n(s,o);continue}r[i]=o}return r}function xk(t){return t.map(e=>e.type===Ee?xk(e.children):e).flat()}function no(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(no.cache.has(t))return no.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return no.cache.set(t,e),e}no.cache=new Map;function qo(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>qo(t,n)).flat(1);if(e.suspense)return qo(t,e.ssContent);if(Array.isArray(e.children))return e.children.map(n=>qo(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return qo(t,e.component.subTree).flat(1)}return[]}var Oo=new WeakMap,Rs=new WeakMap;class dU{constructor(e){gI(this,Oo,[]),gI(this,Rs,0),this.size=e}get isFull(){return ni(Oo,this).length===this.size}push(e){ni(Oo,this)[ni(Rs,this)]=e,vI(Rs,this,(ni(Rs,this)+1)%this.size)}values(){return ni(Oo,this).slice(ni(Rs,this)).concat(ni(Oo,this).slice(0,ni(Rs,this)))}clear(){ni(Oo,this).length=0,vI(Rs,this,0)}}function ry(t){const e=wt({});lr(()=>{const r=t();for(const i in r)e[i]=r[i]},{flush:"sync"});const n={};for(const r in e)n[r]=V(()=>e[r]);return n}function Nd(t,e){return t.includes(e)}function Dk(t){return t[2].toLowerCase()+t.slice(3)}const Fn=()=>[Function,Array];function II(t,e){return e="on"+Ti(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function Pk(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(Array.isArray(t))for(const i of t)i(...n);else typeof t=="function"&&t(...n)}function Rd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(n)]}function Nk(t,e,n){let r,i=t.indexOf(document.activeElement);const s=e==="next"?1:-1;do i+=s,r=t[i];while((!r||r.offsetParent==null||!((n==null?void 0:n(r))??!0))&&i<t.length&&i>=0);return r}function Nl(t,e){var r,i,s,o;const n=Rd(t);if(e==null)(t===document.activeElement||!t.contains(document.activeElement))&&((r=n[0])==null||r.focus());else if(e==="first")(i=n[0])==null||i.focus();else if(e==="last")(s=n.at(-1))==null||s.focus();else if(typeof e=="number")(o=n[e])==null||o.focus();else{const a=Nk(n,e);a?a.focus():Nl(t,e==="next"?"first":"last")}}function Od(t,e){if(!(tt&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}function Rk(t){return t.some(e=>oa(e)?e.type===tn?!1:e.type!==Ee||Rk(e.children):!0)?t:null}function hU(t,e){if(!tt||t===0)return e(),()=>{};const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}function fU(t,e){const n=t.clientX,r=t.clientY,i=e.getBoundingClientRect(),s=i.left,o=i.top,a=i.right,l=i.bottom;return n>=s&&n<=a&&r>=o&&r<=l}function yg(){const t=ge(),e=n=>{t.value=n};return Object.defineProperty(e,"value",{enumerable:!0,get:()=>t.value,set:n=>t.value=n}),Object.defineProperty(e,"el",{enumerable:!0,get:()=>Ek(t.value)}),e}function _I(t){const e=t.key.length===1,n=!t.ctrlKey&&!t.metaKey&&!t.altKey;return e&&n}function wg(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint"}function mU(t){const e={};for(const n in t)e[xn(n)]=t[n];return e}function gU(t){const e=["checked","disabled"];return Object.fromEntries(Object.entries(t).filter(n=>{let[r,i]=n;return e.includes(r)?!!i:i!==void 0}))}function Mt(t,e){const n=ku();if(!n)throw new Error(`[Vuetify] ${t} must be called from inside a setup function`);return n}function ei(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=Mt(t).type;return no((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}function vU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mt("injectSelf");const{provides:n}=e;if(n&&t in n)return n[t]}const Sa=Symbol.for("vuetify:defaults");function pU(t){return te(t)}function iy(){const t=et(Sa);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function Ri(t,e){const n=iy(),r=te(t),i=x(()=>{if(oi(e==null?void 0:e.disabled))return n.value;const o=oi(e==null?void 0:e.scoped),a=oi(e==null?void 0:e.reset),l=oi(e==null?void 0:e.root);if(r.value==null&&!(o||a||l))return n.value;let u=pn(r.value,{prev:n.value});if(o)return u;if(a||l){const c=Number(a||1/0);for(let d=0;d<=c&&!(!u||!("prev"in u));d++)u=u.prev;return u&&typeof l=="string"&&l in u&&(u=pn(pn(u,{prev:u}),u[l])),u}return u.prev?pn(u.prev,u):u});return Kt(Sa,i),i}function yU(t,e){return t.props&&(typeof t.props[e]<"u"||typeof t.props[no(e)]<"u")}function wU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iy();const r=Mt("useDefaults");if(e=e??r.type.name??r.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const i=x(()=>{var l;return(l=n.value)==null?void 0:l[t._as??e]}),s=new Proxy(t,{get(l,u){var f,m,g,v;const c=Reflect.get(l,u);if(u==="class"||u==="style")return[(f=i.value)==null?void 0:f[u],c].filter(y=>y!=null);if(yU(r.vnode,u))return c;const d=(m=i.value)==null?void 0:m[u];if(d!==void 0)return d;const h=(v=(g=n.value)==null?void 0:g.global)==null?void 0:v[u];return h!==void 0?h:c}}),o=ge();lr(()=>{if(i.value){const l=Object.entries(i.value).filter(u=>{let[c]=u;return c.startsWith(c[0].toUpperCase())});o.value=l.length?Object.fromEntries(l):void 0}else o.value=void 0});function a(){const l=vU(Sa,r);Kt(Sa,x(()=>o.value?pn((l==null?void 0:l.value)??{},o.value):l==null?void 0:l.value))}return{props:s,provideSubDefaults:a}}const Ok=["top","bottom"],bU=["start","end","left","right"];function bg(t,e){let[n,r]=t.split(" ");return r||(r=Nd(Ok,n)?"start":Nd(bU,n)?"top":"center"),{side:SI(n,e),align:SI(r,e)}}function SI(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function em(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function tm(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function TI(t){return{side:t.align,align:t.side}}function EI(t){return Nd(Ok,t.side)?"y":"x"}class Gr{constructor(e){let{x:n,y:r,width:i,height:s}=e;this.x=n,this.y=r,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function CI(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function Mk(t){return Array.isArray(t)?new Gr({x:t[0],y:t[1],width:0,height:0}):t.getBoundingClientRect()}function IU(t){if(t===document.documentElement)return visualViewport?new Gr({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Gr({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const e=t.getBoundingClientRect();return new Gr({x:e.x,y:e.y,width:t.clientWidth,height:t.clientHeight})}}function sy(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){let i,s,o,a,l;if(r.startsWith("matrix3d("))i=r.slice(9,-1).split(/, /),s=Number(i[0]),o=Number(i[5]),a=Number(i[12]),l=Number(i[13]);else if(r.startsWith("matrix("))i=r.slice(7,-1).split(/, /),s=Number(i[0]),o=Number(i[3]),a=Number(i[4]),l=Number(i[5]);else return new Gr(e);const u=n.transformOrigin,c=e.x-a-(1-s)*parseFloat(u),d=e.y-l-(1-o)*parseFloat(u.slice(u.indexOf(" ")+1)),h=s?e.width/s:t.offsetWidth+1,f=o?e.height/o:t.offsetHeight+1;return new Gr({x:c,y:d,width:h,height:f})}else return new Gr(e)}function Ys(t,e,n){if(typeof t.animate>"u")return{finished:Promise.resolve()};let r;try{r=t.animate(e,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(i=>{r.onfinish=()=>{i(r)}})),r}const Hc=new WeakMap;function _U(t,e){Object.keys(e).forEach(n=>{if(Ak(n)){const r=Dk(n),i=Hc.get(t);if(e[n]==null)i==null||i.forEach(s=>{const[o,a]=s;o===r&&(t.removeEventListener(r,a),i.delete(s))});else if(!i||![...i].some(s=>s[0]===r&&s[1]===e[n])){t.addEventListener(r,e[n]);const s=i||new Set;s.add([r,e[n]]),Hc.has(t)||Hc.set(t,s)}}else e[n]==null?t.removeAttribute(n):t.setAttribute(n,e[n])})}function SU(t,e){Object.keys(e).forEach(n=>{if(Ak(n)){const r=Dk(n),i=Hc.get(t);i==null||i.forEach(s=>{const[o,a]=s;o===r&&(t.removeEventListener(r,a),i.delete(s))})}else t.removeAttribute(n)})}const Mo=2.4,kI=.2126729,AI=.7151522,xI=.072175,TU=.55,EU=.58,CU=.57,kU=.62,Cc=.03,DI=1.45,AU=5e-4,xU=1.25,DU=1.25,PI=.078,NI=12.82051282051282,kc=.06,RI=.001;function OI(t,e){const n=(t.r/255)**Mo,r=(t.g/255)**Mo,i=(t.b/255)**Mo,s=(e.r/255)**Mo,o=(e.g/255)**Mo,a=(e.b/255)**Mo;let l=n*kI+r*AI+i*xI,u=s*kI+o*AI+a*xI;if(l<=Cc&&(l+=(Cc-l)**DI),u<=Cc&&(u+=(Cc-u)**DI),Math.abs(u-l)<AU)return 0;let c;if(u>l){const d=(u**TU-l**EU)*xU;c=d<RI?0:d<PI?d-d*NI*kc:d-kc}else{const d=(u**kU-l**CU)*DU;c=d>-RI?0:d>-PI?d-d*NI*kc:d+kc}return c*100}function Vk(t,e){e=Array.isArray(e)?e.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`}const Md=.20689655172413793,PU=t=>t>Md**3?Math.cbrt(t):t/(3*Md**2)+4/29,NU=t=>t>Md?t**3:3*Md**2*(t-4/29);function Lk(t){const e=PU,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function Fk(t){const e=NU,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}const RU=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],OU=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,MU=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],VU=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function Bk(t){const e=Array(3),n=OU,r=RU;for(let i=0;i<3;++i)e[i]=Math.round(or(n(r[i][0]*t[0]+r[i][1]*t[1]+r[i][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function oy(t){let{r:e,g:n,b:r}=t;const i=[0,0,0],s=VU,o=MU;e=s(e/255),n=s(n/255),r=s(r/255);for(let a=0;a<3;++a)i[a]=o[a][0]*e+o[a][1]*n+o[a][2]*r;return i}function Ig(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function LU(t){return Ig(t)&&!/^((rgb|hsl)a?\()?var\(--/.test(t)}const MI=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,FU={rgb:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),rgba:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),hsl:(t,e,n,r)=>VI({h:t,s:e,l:n,a:r}),hsla:(t,e,n,r)=>VI({h:t,s:e,l:n,a:r}),hsv:(t,e,n,r)=>gu({h:t,s:e,v:n,a:r}),hsva:(t,e,n,r)=>gu({h:t,s:e,v:n,a:r})};function jr(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&MI.test(t)){const{groups:e}=t.match(MI),{fn:n,values:r}=e,i=r.split(/,\s*|\s*\/\s*|\s+/).map((s,o)=>s.endsWith("%")||o>0&&o<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return FU[n](...i)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(n=>n+n).join(""):[6,8].includes(e.length),$U(e)}else if(typeof t=="object"){if(Zf(t,["r","g","b"]))return t;if(Zf(t,["h","s","l"]))return gu($k(t));if(Zf(t,["h","s","v"]))return gu(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function gu(t){const{h:e,s:n,v:r,a:i}=t,s=a=>{const l=(a+e/60)%6;return r-r*n*Math.max(Math.min(l,4-l,1),0)},o=[s(5),s(3),s(1)].map(a=>Math.round(a*255));return{r:o[0],g:o[1],b:o[2],a:i}}function VI(t){return gu($k(t))}function $k(t){const{h:e,s:n,l:r,a:i}=t,s=r+n*Math.min(r,1-r),o=s===0?0:2-2*r/s;return{h:e,s:o,v:s,a:i}}function Ac(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function BU(t){let{r:e,g:n,b:r,a:i}=t;return`#${[Ac(e),Ac(n),Ac(r),i!==void 0?Ac(Math.round(i*255)):""].join("")}`}function $U(t){t=UU(t);let[e,n,r,i]=cU(t,2).map(s=>parseInt(s,16));return i=i===void 0?i:i/255,{r:e,g:n,b:r,a:i}}function UU(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=wI(wI(t,6),8,"F")),t}function jU(t,e){const n=Lk(oy(t));return n[0]=n[0]+e*10,Bk(Fk(n))}function qU(t,e){const n=Lk(oy(t));return n[0]=n[0]-e*10,Bk(Fk(n))}function zU(t){const e=jr(t);return oy(e)[1]}function Uk(t){const e=Math.abs(OI(jr(0),jr(t)));return Math.abs(OI(jr(16777215),jr(t)))>Math.min(e,50)?"#fff":"#000"}function G(t,e){return n=>Object.keys(t).reduce((r,i)=>{const o=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return n&&i in n?r[i]={...o,default:n[i]}:r[i]=o,e&&!r[i].source&&(r[i].source=e),r},{})}const Pe=G({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Ua(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=G(t.props??{},t.name)();const e=Object.keys(t.props).filter(n=>n!=="class"&&n!=="style");t.filterProps=function(r){return ec(r,e)},t.props._as=String,t.setup=function(r,i){const s=iy();if(!s.value)return t._setup(r,i);const{props:o,provideSubDefaults:a}=wU(r,r._as??t.name,s),l=t._setup(o,i);return a(),l}}return t}function me(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?Ua:I1)(e)}function Xh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return me()({name:n??Ti(xn(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Pe()},setup(r,i){let{slots:s}=i;return()=>{var o;return ys(r.tag,{class:[t,r.class],style:r.style},(o=s.default)==null?void 0:o.call(s))}}})}function jk(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const vu="cubic-bezier(0.4, 0, 0.2, 1)",HU="cubic-bezier(0.0, 0, 0.2, 1)",WU="cubic-bezier(0.4, 0, 1, 1)",GU={linear:t=>t,easeInQuad:t=>t**2,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t**2:-1+(4-2*t)*t,easeInCubic:t=>t**3,easeOutCubic:t=>--t**3+1,easeInOutCubic:t=>t<.5?4*t**3:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t**4,easeOutQuart:t=>1- --t**4,easeInOutQuart:t=>t<.5?8*t**4:1-8*--t**4,easeInQuint:t=>t**5,easeOutQuint:t=>1+--t**5,easeInOutQuint:t=>t<.5?16*t**5:1+16*--t**5};function qk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?KU(t):ay(t))return t;t=t.parentElement}return document.scrollingElement}function Vd(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&(ay(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function ay(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t),n=e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight,r=e.overflowX==="scroll"||e.overflowX==="auto"&&t.scrollWidth>t.clientWidth;return n||r}function KU(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function YU(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function be(t){const e=Mt("useRender");e.render=t}const QU=G({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),mt=me(!1)({name:"VDefaultsProvider",props:QU(),setup(t,e){let{slots:n}=e;const{defaults:r,disabled:i,reset:s,root:o,scoped:a}=W_(t);return Ri(r,{reset:s,root:o,scoped:a,disabled:i}),()=>{var l;return(l=n.default)==null?void 0:l.call(n)}}});function ly(t){return ry(()=>{const e=Kr(t),n=[],r={};if(e.background)if(Ig(e.background)){if(r.backgroundColor=e.background,!e.text&&LU(e.background)){const i=jr(e.background);if(i.a==null||i.a===1){const s=Uk(i);r.color=s,r.caretColor=s}}}else n.push(`bg-${e.background}`);return e.text&&(Ig(e.text)?(r.color=e.text,r.caretColor=e.text):n.push(`text-${e.text}`)),{colorClasses:n,colorStyles:r}})}function Sr(t){const{colorClasses:e,colorStyles:n}=ly(()=>({text:Kr(t)}));return{textColorClasses:e,textColorStyles:n}}function ar(t){const{colorClasses:e,colorStyles:n}=ly(()=>({background:Kr(t)}));return{backgroundColorClasses:e,backgroundColorStyles:n}}const XU={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},JU={component:t=>ys(Hk,{...t,class:"mdi"})},He=[String,Function,Object,Array],_g=Symbol.for("vuetify:icons"),Jh=G({icon:{type:He},tag:{type:[String,Object,Function],required:!0}},"icon"),LI=me()({name:"VComponentIcon",props:Jh(),setup(t,e){let{slots:n}=e;return()=>{const r=t.icon;return p(t.tag,null,{default:()=>{var i;return[t.icon?p(r,null,null):(i=n.default)==null?void 0:i.call(n)]}})}}}),zk=Ua({name:"VSvgIcon",inheritAttrs:!1,props:Jh(),setup(t,e){let{attrs:n}=e;return()=>p(t.tag,Se(n,{style:null}),{default:()=>[C("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(r=>Array.isArray(r)?C("path",{d:r[0],"fill-opacity":r[1]},null):C("path",{d:r},null)):C("path",{d:t.icon},null)])]})}});Ua({name:"VLigatureIcon",props:Jh(),setup(t){return()=>p(t.tag,null,{default:()=>[t.icon]})}});const Hk=Ua({name:"VClassIcon",props:Jh(),setup(t){return()=>p(t.tag,{class:ce(t.icon)},null)}});function ZU(){return{svg:{component:zk},class:{component:Hk}}}function e4(t){const e=ZU(),n=(t==null?void 0:t.defaultSet)??"mdi";return n==="mdi"&&!e.mdi&&(e.mdi=JU),pn({defaultSet:n,sets:e,aliases:{...XU,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},t)}const t4=t=>{const e=et(_g);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:x(()=>{var l;const r=Kr(t);if(!r)return{component:LI};let i=r;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=(l=e.aliases)==null?void 0:l[i.slice(1)])),Array.isArray(i))return{component:zk,icon:i};if(typeof i!="string")return{component:LI,icon:i};const s=Object.keys(e.sets).find(u=>typeof i=="string"&&i.startsWith(`${u}:`)),o=s?i.slice(s.length+1):i;return{component:e.sets[s??e.defaultSet].component,icon:o}})}},n4=["x-small","small","default","large","x-large"],tc=G({size:{type:[String,Number],default:"default"}},"size");function nc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return ry(()=>{const n=t.size;let r,i;return Nd(n4,n)?r=`${e}--size-${n}`:n&&(i={width:Ae(n),height:Ae(n)}),{sizeClasses:r,sizeStyles:i}})}const st=G({tag:{type:[String,Object,Function],default:"div"}},"tag"),pu=Symbol.for("vuetify:theme"),Et=G({theme:String},"theme");function FI(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function r4(){var r,i;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FI();const e=FI();if(!t)return{...e,isDisabled:!0};const n={};for(const[s,o]of Object.entries(t.themes??{})){const a=o.dark||s==="dark"?(r=e.themes)==null?void 0:r.dark:(i=e.themes)==null?void 0:i.light;n[s]=pn(a,o)}return pn(e,{...t,themes:n})}function Os(t,e,n,r){t.push(`${a4(e,r)} {
`,...n.map(i=>`  ${i};
`),`}
`)}function BI(t,e){const n=t.dark?2:1,r=t.dark?1:2,i=[];for(const[s,o]of Object.entries(t.colors)){const a=jr(o);i.push(`--${e}theme-${s}: ${a.r},${a.g},${a.b}`),s.startsWith("on-")||i.push(`--${e}theme-${s}-overlay-multiplier: ${zU(o)>.18?n:r}`)}for(const[s,o]of Object.entries(t.variables)){const a=typeof o=="string"&&o.startsWith("#")?jr(o):void 0,l=a?`${a.r}, ${a.g}, ${a.b}`:void 0;i.push(`--${e}${s}: ${l??o}`)}return i}function i4(t,e,n){const r={};if(n)for(const i of["lighten","darken"]){const s=i==="lighten"?jU:qU;for(const o of Tk(n[i],1))r[`${t}-${i}-${o}`]=BU(s(jr(e),o))}return r}function s4(t,e){if(!e)return{};let n={};for(const r of e.colors){const i=t[r];i&&(n={...n,...i4(r,i,e)})}return n}function o4(t){const e={};for(const n of Object.keys(t)){if(n.startsWith("on-")||t[`on-${n}`])continue;const r=`on-${n}`,i=jr(t[n]);e[r]=Uk(i)}return e}function a4(t,e){if(!e)return t;const n=`:where(${e})`;return t===":root"?n:`${n} ${t}`}function l4(t,e,n){const r=u4(t,e);r&&(r.innerHTML=n)}function u4(t,e){if(!tt)return null;let n=document.getElementById(t);return n||(n=document.createElement("style"),n.id=t,n.type="text/css",e&&n.setAttribute("nonce",e),document.head.appendChild(n)),n}function c4(t){const e=r4(t),n=ge(e.defaultTheme),r=te(e.themes),i=ge("light"),s=x({get(){return n.value==="system"?i.value:n.value},set(w){n.value=w}}),o=x(()=>{const w={};for(const[_,b]of Object.entries(r.value)){const T={...b.colors,...s4(b.colors,e.variations)};w[_]={...b,colors:{...T,...o4(T)}}}return w}),a=V(()=>o.value[s.value]),l=V(()=>n.value==="system"),u=x(()=>{var T;const w=[],_=e.unimportant?"":" !important",b=e.scoped?e.prefix:"";(T=a.value)!=null&&T.dark&&Os(w,":root",["color-scheme: dark"],e.scope),Os(w,":root",BI(a.value,e.prefix),e.scope);for(const[E,A]of Object.entries(o.value))Os(w,`.${e.prefix}theme--${E}`,[`color-scheme: ${A.dark?"dark":"normal"}`,...BI(A,e.prefix)],e.scope);if(e.utilities){const E=[],A=[],D=new Set(Object.values(o.value).flatMap(P=>Object.keys(P.colors)));for(const P of D)P.startsWith("on-")?Os(A,`.${P}`,[`color: rgb(var(--${e.prefix}theme-${P}))${_}`],e.scope):(Os(E,`.${b}bg-${P}`,[`--${e.prefix}theme-overlay-multiplier: var(--${e.prefix}theme-${P}-overlay-multiplier)`,`background-color: rgb(var(--${e.prefix}theme-${P}))${_}`,`color: rgb(var(--${e.prefix}theme-on-${P}))${_}`],e.scope),Os(A,`.${b}text-${P}`,[`color: rgb(var(--${e.prefix}theme-${P}))${_}`],e.scope),Os(A,`.${b}border-${P}`,[`--${e.prefix}border-color: var(--${e.prefix}theme-${P})`],e.scope));w.push(...E,...A)}return w.map((E,A)=>A===0?E:`    ${E}`).join("")}),c=V(()=>e.isDisabled?void 0:`${e.prefix}theme--${s.value}`),d=V(()=>Object.keys(o.value));if(oU){let _=function(){i.value=w.matches?"dark":"light"};var y=_;const w=window.matchMedia("(prefers-color-scheme: dark)");_(),w.addEventListener("change",_,{passive:!0}),A_()&&dn(()=>{w.removeEventListener("change",_)})}function h(w){if(e.isDisabled)return;const _=w._context.provides.usehead;if(_){let E=function(){return{style:[{textContent:u.value,id:e.stylesheetId,nonce:e.cspNonce||!1}]}};var b=E;if(_.push){const A=_.push(E);tt&&Ie(u,()=>{A.patch(E)})}else tt?(_.addHeadObjs(V(E)),lr(()=>_.updateDOM())):_.addHeadObjs(E())}else{let E=function(){l4(e.stylesheetId,e.cspNonce,u.value)};var T=E;tt?Ie(u,E,{immediate:!0}):E()}}function f(w){w!=="system"&&!d.value.includes(w)||(s.value=w)}function m(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.value;const _=w.indexOf(s.value),b=_===-1?0:(_+1)%w.length;f(w[b])}function g(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];m(w)}const v=new Proxy(s,{get(w,_){return Reflect.get(w,_)},set(w,_,b){return _==="value"&&Vk(`theme.global.name.value = ${b}`,`theme.change('${b}')`),Reflect.set(w,_,b)}});return{install:h,change:f,cycle:m,toggle:g,isDisabled:e.isDisabled,isSystem:l,name:s,themes:r,current:a,computedThemes:o,prefix:e.prefix,themeClasses:c,styles:u,global:{name:v,current:a}}}function Bt(t){Mt("provideTheme");const e=et(pu,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=V(()=>t.theme??e.name.value),r=V(()=>e.themes.value[n.value]),i=V(()=>e.isDisabled?void 0:`${e.prefix}theme--${n.value}`),s={...e,name:n,current:r,themeClasses:i};return Kt(pu,s),s}function d4(){Mt("useTheme");const t=et(pu,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}const h4=G({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:He,opacity:[String,Number],...Pe(),...tc(),...st({tag:"i"}),...Et()},"VIcon"),Pt=me()({name:"VIcon",props:h4(),setup(t,e){let{attrs:n,slots:r}=e;const i=ge(),{themeClasses:s}=d4(),{iconData:o}=t4(()=>i.value||t.icon),{sizeClasses:a}=nc(t),{textColorClasses:l,textColorStyles:u}=Sr(()=>t.color);return be(()=>{var h,f;const c=(h=r.default)==null?void 0:h.call(r);c&&(i.value=(f=xk(c).filter(m=>m.type===Cu&&m.children&&typeof m.children=="string")[0])==null?void 0:f.children);const d=!!(n.onClick||n.onClickOnce);return p(o.value.component,{tag:t.tag,icon:o.value.icon,class:ce(["v-icon","notranslate",s.value,a.value,l.value,{"v-icon--clickable":d,"v-icon--disabled":t.disabled,"v-icon--start":t.start,"v-icon--end":t.end},t.class]),style:xe([{"--v-icon-opacity":t.opacity},a.value?void 0:{fontSize:Ae(t.size),height:Ae(t.size),width:Ae(t.size)},u.value,t.style]),role:d?"button":void 0,"aria-hidden":!d,tabindex:d?t.disabled?-1:0:void 0},{default:()=>[c]})}),{}}}),cr=G({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function dr(t){return{dimensionStyles:x(()=>{const n={},r=Ae(t.height),i=Ae(t.maxHeight),s=Ae(t.maxWidth),o=Ae(t.minHeight),a=Ae(t.minWidth),l=Ae(t.width);return r!=null&&(n.height=r),i!=null&&(n.maxHeight=i),s!=null&&(n.maxWidth=s),o!=null&&(n.minHeight=o),a!=null&&(n.minWidth=a),l!=null&&(n.width=l),n})}}function f4(t){return{aspectStyles:x(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const Wk=G({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Pe(),...cr()},"VResponsive"),$I=me()({name:"VResponsive",props:Wk(),setup(t,e){let{slots:n}=e;const{aspectStyles:r}=f4(t),{dimensionStyles:i}=dr(t);return be(()=>{var s;return C("div",{class:ce(["v-responsive",{"v-responsive--inline":t.inline},t.class]),style:xe([i.value,t.style])},[C("div",{class:"v-responsive__sizer",style:xe(r.value)},null),(s=n.additional)==null?void 0:s.call(n),n.default&&C("div",{class:ce(["v-responsive__content",t.contentClass])},[n.default()])])}),{}}}),Xn=G({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Jn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return{roundedClasses:x(()=>{const r=Nt(t)?t.value:t.rounded,i=Nt(t)?t.value:t.tile,s=[];if(r===!0||r==="")s.push(`${e}--rounded`);else if(typeof r=="string"||r===0)for(const o of String(r).split(" "))s.push(`rounded-${o}`);else(i||r===!1)&&s.push("rounded-0");return s})}}const rc=G({transition:{type:null,default:"fade-transition",validator:t=>t!==!0}},"transition"),di=(t,e)=>{let{slots:n}=e;const{transition:r,disabled:i,group:s,...o}=t,{component:a=s?iv:so,...l}=Pd(r)?r:{};let u;return Pd(r)?u=Se(l,gU({disabled:i,group:s}),o):u=Se({name:i||!r?"":r},o),ys(a,u,n)};function m4(t,e){if(!ty)return;const n=e.modifiers||{},r=e.value,{handler:i,options:s}=typeof r=="object"?r:{handler:r,options:{}},o=new IntersectionObserver(function(){var d;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const u=(d=t._observe)==null?void 0:d[e.instance.$.uid];if(!u)return;const c=a.some(h=>h.isIntersecting);i&&(!n.quiet||u.init)&&(!n.once||c||u.init)&&i(c,a,l),c&&n.once?Gk(t,e):u.init=!0},s);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:o},o.observe(t)}function Gk(t,e){var r;const n=(r=t._observe)==null?void 0:r[e.instance.$.uid];n&&(n.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Ld={mounted:m4,unmounted:Gk},g4=G({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Wk(),...Pe(),...Xn(),...rc()},"VImg"),Zh=me()({name:"VImg",directives:{vIntersect:Ld},props:g4(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:r}=e;const{backgroundColorClasses:i,backgroundColorStyles:s}=ar(()=>t.color),{roundedClasses:o}=Jn(t),a=Mt("VImg"),l=ge(""),u=te(),c=ge(t.eager?"loading":"idle"),d=ge(),h=ge(),f=x(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),m=x(()=>f.value.aspect||d.value/h.value||0);Ie(()=>t.src,()=>{g(c.value!=="idle")}),Ie(m,(k,O)=>{!k&&O&&u.value&&b(u.value)}),Eu(()=>g());function g(k){if(!(t.eager&&k)&&!(ty&&!k&&!t.eager)){if(c.value="loading",f.value.lazySrc){const O=new Image;O.src=f.value.lazySrc,b(O,null)}f.value.src&&sn(()=>{var O;n("loadstart",((O=u.value)==null?void 0:O.currentSrc)||f.value.src),setTimeout(()=>{var j;if(!a.isUnmounted)if((j=u.value)!=null&&j.complete){if(u.value.naturalWidth||y(),c.value==="error")return;m.value||b(u.value,null),c.value==="loading"&&v()}else m.value||b(u.value),w()})})}}function v(){var k;a.isUnmounted||(w(),b(u.value),c.value="loaded",n("load",((k=u.value)==null?void 0:k.currentSrc)||f.value.src))}function y(){var k;a.isUnmounted||(c.value="error",n("error",((k=u.value)==null?void 0:k.currentSrc)||f.value.src))}function w(){const k=u.value;k&&(l.value=k.currentSrc||k.src)}let _=-1;Qn(()=>{clearTimeout(_)});function b(k){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const j=()=>{if(clearTimeout(_),a.isUnmounted)return;const{naturalHeight:J,naturalWidth:ee}=k;J||ee?(d.value=ee,h.value=J):!k.complete&&c.value==="loading"&&O!=null?_=window.setTimeout(j,O):(k.currentSrc.endsWith(".svg")||k.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,h.value=1)};j()}const T=V(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),E=()=>{var j;if(!f.value.src||c.value==="idle")return null;const k=C("img",{class:ce(["v-img__img",T.value]),style:{objectPosition:t.position},crossorigin:t.crossorigin,src:f.value.src,srcset:f.value.srcset,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:u,onLoad:v,onError:y},null),O=(j=r.sources)==null?void 0:j.call(r);return p(di,{transition:t.transition,appear:!0},{default:()=>[yt(O?C("picture",{class:"v-img__picture"},[O,k]):k,[[En,c.value==="loaded"]])]})},A=()=>p(di,{transition:t.transition},{default:()=>[f.value.lazySrc&&c.value!=="loaded"&&C("img",{class:ce(["v-img__img","v-img__img--preload",T.value]),style:{objectPosition:t.position},crossorigin:t.crossorigin,src:f.value.lazySrc,alt:t.alt,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),D=()=>r.placeholder?p(di,{transition:t.transition,appear:!0},{default:()=>[(c.value==="loading"||c.value==="error"&&!r.error)&&C("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,P=()=>r.error?p(di,{transition:t.transition,appear:!0},{default:()=>[c.value==="error"&&C("div",{class:"v-img__error"},[r.error()])]}):null,U=()=>t.gradient?C("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,z=ge(!1);{const k=Ie(m,O=>{O&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{z.value=!0})}),k())})}return be(()=>{const k=$I.filterProps(t);return yt(p($I,Se({class:["v-img",{"v-img--absolute":t.absolute,"v-img--booting":!z.value},i.value,o.value,t.class],style:[{width:Ae(t.width==="auto"?d.value:t.width)},s.value,t.style]},k,{aspectRatio:m.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>C(Ee,null,[p(E,null,null),p(A,null,null),p(U,null,null),p(D,null,null),p(P,null,null)]),default:r.default}),[[Ld,{handler:g,options:t.options},null,{once:!0}]])}),{currentSrc:l,image:u,state:c,naturalWidth:d,naturalHeight:h}}}),ks=G({border:[Boolean,Number,String]},"border");function As(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return{borderClasses:x(()=>{const r=t.border;return r===!0||r===""?`${e}--border`:typeof r=="string"||r===0?String(r).split(" ").map(i=>`border-${i}`):[]})}}const v4=[null,"default","comfortable","compact"],Zn=G({density:{type:String,default:"default",validator:t=>v4.includes(t)}},"density");function hr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return{densityClasses:V(()=>`${e}--density-${t.density}`)}}const p4=["elevated","flat","tonal","outlined","text","plain"];function ja(t,e){return C(Ee,null,[t&&C("span",{key:"overlay",class:ce(`${e}__overlay`)},null),C("span",{key:"underlay",class:ce(`${e}__underlay`)},null)])}const Oi=G({color:String,variant:{type:String,default:"elevated",validator:t=>p4.includes(t)}},"variant");function qa(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();const n=V(()=>{const{variant:s}=Kr(t);return`${e}--variant-${s}`}),{colorClasses:r,colorStyles:i}=ly(()=>{const{variant:s,color:o}=Kr(t);return{[["elevated","flat"].includes(s)?"background":"text"]:o}});return{colorClasses:r,colorStyles:i,variantClasses:n}}const y4=G({start:Boolean,end:Boolean,icon:He,image:String,text:String,...ks(),...Pe(),...Zn(),...Xn(),...tc(),...st(),...Et(),...Oi({variant:"flat"})},"VAvatar"),gs=me()({name:"VAvatar",props:y4(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Bt(t),{borderClasses:i}=As(t),{colorClasses:s,colorStyles:o,variantClasses:a}=qa(t),{densityClasses:l}=hr(t),{roundedClasses:u}=Jn(t),{sizeClasses:c,sizeStyles:d}=nc(t);return be(()=>p(t.tag,{class:ce(["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},r.value,i.value,s.value,l.value,u.value,c.value,a.value,t.class]),style:xe([o.value,d.value,t.style])},{default:()=>[n.default?p(mt,{key:"content-defaults",defaults:{VImg:{cover:!0,src:t.image},VIcon:{icon:t.icon}}},{default:()=>[n.default()]}):t.image?p(Zh,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?p(Pt,{key:"icon",icon:t.icon},null):t.text,ja(!1,"v-avatar")]})),{}}}),Mi=G({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function Vi(t){return{elevationClasses:V(()=>{const n=Nt(t)?t.value:t.elevation;return n==null?[]:[`elevation-${n}`]})}}const Kk=G({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...ks(),...Pe(),...Zn(),...Mi(),...Xn(),...st(),...Et(),...Oi()},"VBtnGroup"),UI=me()({name:"VBtnGroup",props:Kk(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Bt(t),{densityClasses:i}=hr(t),{borderClasses:s}=As(t),{elevationClasses:o}=Vi(t),{roundedClasses:a}=Jn(t);Ri({VBtn:{height:V(()=>t.direction==="horizontal"?"auto":null),baseColor:V(()=>t.baseColor),color:V(()=>t.color),density:V(()=>t.density),flat:!0,variant:V(()=>t.variant)}}),be(()=>p(t.tag,{class:ce(["v-btn-group",`v-btn-group--${t.direction}`,{"v-btn-group--divided":t.divided},r.value,s.value,i.value,o.value,a.value,t.class]),style:xe(t.style)},n))}});function vs(t,e){let n;function r(){n=Rl(),n.run(()=>e.length?e(()=>{n==null||n.stop(),r()}):e())}Ie(t,i=>{i&&!n?r():i||(n==null||n.stop(),n=void 0)},{immediate:!0}),dn(()=>{n==null||n.stop()})}function _t(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d=>d,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d=>d;const s=Mt("useProxiedModel"),o=te(t[e]!==void 0?t[e]:n),a=no(e),u=x(a!==e?()=>{var d,h,f,m;return t[e],!!(((d=s.vnode.props)!=null&&d.hasOwnProperty(e)||(h=s.vnode.props)!=null&&h.hasOwnProperty(a))&&((f=s.vnode.props)!=null&&f.hasOwnProperty(`onUpdate:${e}`)||(m=s.vnode.props)!=null&&m.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var d,h;return t[e],!!((d=s.vnode.props)!=null&&d.hasOwnProperty(e)&&((h=s.vnode.props)!=null&&h.hasOwnProperty(`onUpdate:${e}`)))});vs(()=>!u.value,()=>{Ie(()=>t[e],d=>{o.value=d})});const c=x({get(){const d=t[e];return r(u.value?d:o.value)},set(d){const h=i(d),f=ke(u.value?t[e]:o.value);f===h||r(f)===d||(o.value=h,s==null||s.emit(`update:${e}`,h))}});return Object.defineProperty(c,"externalValue",{get:()=>u.value?t[e]:o.value}),c}const ef=G({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),tf=G({value:null,disabled:Boolean,selectedClass:String},"group-item");function nf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Mt("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=Ei();Kt(Symbol.for(`${e.description}:id`),i);const s=et(e,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const o=V(()=>t.value),a=x(()=>!!(s.disabled.value||t.disabled));s.register({id:i,value:o,disabled:a},r),Qn(()=>{s.unregister(i)});const l=x(()=>s.isSelected(i)),u=x(()=>s.items.value[0].id===i),c=x(()=>s.items.value[s.items.value.length-1].id===i),d=x(()=>l.value&&[s.selectedClass.value,t.selectedClass]);return Ie(l,h=>{r.emit("group:selected",{value:h})},{flush:"sync"}),{id:i,isSelected:l,isFirst:u,isLast:c,toggle:()=>s.select(i,!l.value),select:h=>s.select(i,h),selectedClass:d,value:o,disabled:a,group:s}}function ic(t,e){let n=!1;const r=wt([]),i=_t(t,"modelValue",[],h=>h==null?[]:Yk(r,yr(h)),h=>{const f=b4(r,h);return t.multiple?f:f[0]}),s=Mt("useGroup");function o(h,f){const m=h,g=Symbol.for(`${e.description}:id`),y=qo(g,s==null?void 0:s.vnode).indexOf(f);oi(m.value)==null&&(m.value=y,m.useIndexAsValue=!0),y>-1?r.splice(y,0,m):r.push(m)}function a(h){if(n)return;l();const f=r.findIndex(m=>m.id===h);r.splice(f,1)}function l(){const h=r.find(f=>!f.disabled);h&&t.mandatory==="force"&&!i.value.length&&(i.value=[h.id])}ki(()=>{l()}),Qn(()=>{n=!0}),Jg(()=>{for(let h=0;h<r.length;h++)r[h].useIndexAsValue&&(r[h].value=h)});function u(h,f){const m=r.find(g=>g.id===h);if(!(f&&(m!=null&&m.disabled)))if(t.multiple){const g=i.value.slice(),v=g.findIndex(w=>w===h),y=~v;if(f=f??!y,y&&t.mandatory&&g.length<=1||!y&&t.max!=null&&g.length+1>t.max)return;v<0&&f?g.push(h):v>=0&&!f&&g.splice(v,1),i.value=g}else{const g=i.value.includes(h);if(t.mandatory&&g||!g&&!f)return;i.value=f??!g?[h]:[]}}function c(h){if(t.multiple,i.value.length){const f=i.value[0],m=r.findIndex(y=>y.id===f);let g=(m+h)%r.length,v=r[g];for(;v.disabled&&g!==m;)g=(g+h)%r.length,v=r[g];if(v.disabled)return;i.value=[r[g].id]}else{const f=r.find(m=>!m.disabled);f&&(i.value=[f.id])}}const d={register:o,unregister:a,selected:i,select:u,disabled:V(()=>t.disabled),prev:()=>c(r.length-1),next:()=>c(1),isSelected:h=>i.value.includes(h),selectedClass:V(()=>t.selectedClass),items:V(()=>r),getItemIndex:h=>w4(r,h)};return Kt(e,d),d}function w4(t,e){const n=Yk(t,[e]);return n.length?t.findIndex(r=>r.id===n[0]):-1}function Yk(t,e){const n=[];return e.forEach(r=>{const i=t.find(o=>sr(r,o.value)),s=t[r];(i==null?void 0:i.value)!=null?n.push(i.id):s!=null&&s.useIndexAsValue&&n.push(s.id)}),n}function b4(t,e){const n=[];return e.forEach(r=>{const i=t.findIndex(s=>s.id===r);if(~i){const s=t[i];n.push(s.value!=null?s.value:i)}}),n}const Qk=Symbol.for("vuetify:v-btn-toggle"),I4=G({...Kk(),...ef()},"VBtnToggle");me()({name:"VBtnToggle",props:I4(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:r,next:i,prev:s,select:o,selected:a}=ic(t,Qk);return be(()=>{const l=UI.filterProps(t);return p(UI,Se({class:["v-btn-toggle",t.class]},l,{style:t.style}),{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:r,next:i,prev:s,select:o,selected:a})]}})}),{next:i,prev:s,select:o}}});function Xk(t,e){const n=te(),r=ge(!1);if(ty){const i=new IntersectionObserver(s=>{r.value=!!s.find(o=>o.isIntersecting)},e);dn(()=>{i.disconnect()}),Ie(n,(s,o)=>{o&&(i.unobserve(o),r.value=!1),s&&i.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}function Ta(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=yg(),r=te();if(tt){const i=new ResizeObserver(s=>{s.length&&(e==="content"?r.value=s[0].contentRect:r.value=s[0].target.getBoundingClientRect())});Qn(()=>{i.disconnect()}),Ie(()=>n.el,(s,o)=>{o&&(i.unobserve(o),r.value=void 0),s&&i.observe(s)},{flush:"post"})}return{resizeRef:n,contentRect:Su(r)}}const _4=G({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Pe(),...tc(),...st({tag:"div"}),...Et()},"VProgressCircular"),Jk=me()({name:"VProgressCircular",props:_4(),setup(t,e){let{slots:n}=e;const r=20,i=2*Math.PI*r,s=te(),{themeClasses:o}=Bt(t),{sizeClasses:a,sizeStyles:l}=nc(t),{textColorClasses:u,textColorStyles:c}=Sr(()=>t.color),{textColorClasses:d,textColorStyles:h}=Sr(()=>t.bgColor),{intersectionRef:f,isIntersecting:m}=Xk(),{resizeRef:g,contentRect:v}=Ta(),y=V(()=>or(parseFloat(t.modelValue),0,100)),w=V(()=>Number(t.width)),_=V(()=>l.value?Number(t.size):v.value?v.value.width:Math.max(w.value,32)),b=V(()=>r/(1-w.value/_.value)*2),T=V(()=>w.value/_.value*b.value),E=V(()=>Ae((100-y.value)/100*i));return lr(()=>{f.value=s.value,g.value=s.value}),be(()=>p(t.tag,{ref:s,class:ce(["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":m.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},o.value,a.value,u.value,t.class]),style:xe([l.value,c.value,t.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:y.value},{default:()=>[C("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${b.value} ${b.value}`},[C("circle",{class:ce(["v-progress-circular__underlay",d.value]),style:xe(h.value),fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":T.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),C("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":T.value,"stroke-dasharray":i,"stroke-dashoffset":E.value},null)]),n.default&&C("div",{class:"v-progress-circular__content"},[n.default({value:y.value})])]})),{}}}),S4={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},jI="$vuetify.",qI=(t,e)=>t.replace(/\{(\d+)\}/g,(n,r)=>String(e[Number(r)])),Zk=(t,e,n)=>function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(!r.startsWith(jI))return qI(r,s);const a=r.replace(jI,""),l=t.value&&n.value[t.value],u=e.value&&n.value[e.value];let c=pg(l,a,null);return c||(`${r}${t.value}`,c=pg(u,a,null)),c||(c=r),typeof c!="string"&&(c=r),qI(c,s)};function uy(t,e){return(n,r)=>new Intl.NumberFormat([t.value,e.value],r).format(n)}function eA(t,e){return uy(t,e)(.1).includes(",")?",":"."}function nm(t,e,n){const r=_t(t,e,t[e]??n.value);return r.value=t[e]??n.value,Ie(n,i=>{t[e]==null&&(r.value=n.value)}),r}function tA(t){return e=>{const n=nm(e,"locale",t.current),r=nm(e,"fallback",t.fallback),i=nm(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:r,messages:i,decimalSeparator:V(()=>eA(n,r)),t:Zk(n,r,i),n:uy(n,r),provide:tA({current:n,fallback:r,messages:i})}}}function T4(t){const e=ge((t==null?void 0:t.locale)??"en"),n=ge((t==null?void 0:t.fallback)??"en"),r=te({en:S4,...t==null?void 0:t.messages});return{name:"vuetify",current:e,fallback:n,messages:r,decimalSeparator:V(()=>(t==null?void 0:t.decimalSeparator)??eA(e,n)),t:Zk(e,n,r),n:uy(e,n),provide:tA({current:e,fallback:n,messages:r})}}const Fd=Symbol.for("vuetify:locale");function E4(t){return t.name!=null}function C4(t){const e=t!=null&&t.adapter&&E4(t==null?void 0:t.adapter)?t==null?void 0:t.adapter:T4(t),n=A4(e,t);return{...e,...n}}function sc(){const t=et(Fd);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function k4(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function A4(t,e){const n=te((e==null?void 0:e.rtl)??k4()),r=x(()=>n.value[t.current.value]??!1);return{isRtl:r,rtl:n,rtlClasses:V(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function fr(){const t=et(Fd);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const zI={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},rf=G({location:String},"location");function sf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=fr();return{locationStyles:x(()=>{if(!t.location)return{};const{side:s,align:o}=bg(t.location.split(" ").length>1?t.location:`${t.location} center`,r.value);function a(u){return n?n(u):0}const l={};return s!=="center"&&(e?l[zI[s]]=`calc(100% - ${a(s)}px)`:l[s]=0),o!=="center"?e?l[zI[o]]=`calc(100% - ${a(o)}px)`:l[o]=0:(s==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),l})}}const x4=G({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Pe(),...rf({location:"top"}),...Xn(),...st(),...Et()},"VProgressLinear"),D4=me()({name:"VProgressLinear",props:x4(),emits:{"update:modelValue":t=>!0},setup(t,e){var z;let{slots:n}=e;const r=_t(t,"modelValue"),{isRtl:i,rtlClasses:s}=fr(),{themeClasses:o}=Bt(t),{locationStyles:a}=sf(t),{textColorClasses:l,textColorStyles:u}=Sr(()=>t.color),{backgroundColorClasses:c,backgroundColorStyles:d}=ar(()=>t.bgColor||t.color),{backgroundColorClasses:h,backgroundColorStyles:f}=ar(()=>t.bufferColor||t.bgColor||t.color),{backgroundColorClasses:m,backgroundColorStyles:g}=ar(()=>t.color),{roundedClasses:v}=Jn(t),{intersectionRef:y,isIntersecting:w}=Xk(),_=x(()=>parseFloat(t.max)),b=x(()=>parseFloat(t.height)),T=x(()=>or(parseFloat(t.bufferValue)/_.value*100,0,100)),E=x(()=>or(parseFloat(r.value)/_.value*100,0,100)),A=x(()=>i.value!==t.reverse),D=x(()=>t.indeterminate?"fade-transition":"slide-x-transition"),P=tt&&((z=window.matchMedia)==null?void 0:z.call(window,"(forced-colors: active)").matches);function U(k){if(!y.value)return;const{left:O,right:j,width:J}=y.value.getBoundingClientRect(),ee=A.value?J-k.clientX+(j-J):k.clientX-O;r.value=Math.round(ee/J*_.value)}return be(()=>p(t.tag,{ref:y,class:ce(["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&w.value,"v-progress-linear--reverse":A.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped,"v-progress-linear--clickable":t.clickable},v.value,o.value,s.value,t.class]),style:xe([{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?Ae(b.value):0,"--v-progress-linear-height":Ae(b.value),...t.absolute?a.value:{}},t.style]),role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Math.min(parseFloat(r.value),_.value),onClick:t.clickable&&U},{default:()=>[t.stream&&C("div",{key:"stream",class:ce(["v-progress-linear__stream",l.value]),style:{...u.value,[A.value?"left":"right"]:Ae(-b.value),borderTop:`${Ae(b.value/2)} dotted`,opacity:parseFloat(t.bufferOpacity),top:`calc(50% - ${Ae(b.value/4)})`,width:Ae(100-T.value,"%"),"--v-progress-linear-stream-to":Ae(b.value*(A.value?1:-1))}},null),C("div",{class:ce(["v-progress-linear__background",P?void 0:c.value]),style:xe([d.value,{opacity:parseFloat(t.bgOpacity),width:t.stream?0:void 0}])},null),C("div",{class:ce(["v-progress-linear__buffer",P?void 0:h.value]),style:xe([f.value,{opacity:parseFloat(t.bufferOpacity),width:Ae(T.value,"%")}])},null),p(so,{name:D.value},{default:()=>[t.indeterminate?C("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(k=>C("div",{key:k,class:ce(["v-progress-linear__indeterminate",k,P?void 0:m.value]),style:xe(g.value)},null))]):C("div",{class:ce(["v-progress-linear__determinate",P?void 0:m.value]),style:xe([g.value,{width:Ae(E.value,"%")}])},null)]}),n.default&&C("div",{class:"v-progress-linear__content"},[n.default({value:E.value,buffer:T.value})])]})),{}}}),cy=G({loading:[Boolean,String]},"loader");function dy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return{loaderClasses:V(()=>({[`${e}--loading`]:t.loading}))}}function nA(t,e){var r;let{slots:n}=e;return C("div",{class:ce(`${t.name}__loader`)},[((r=n.default)==null?void 0:r.call(n,{color:t.color,isActive:t.active}))||p(D4,{absolute:t.absolute,active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const P4=["static","relative","fixed","absolute","sticky"],hy=G({position:{type:String,validator:t=>P4.includes(t)}},"position");function fy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();return{positionClasses:V(()=>t.position?`${e}--${t.position}`:void 0)}}function N4(){const t=Mt("useRoute");return x(()=>{var e;return(e=t==null?void 0:t.proxy)==null?void 0:e.$route})}function R4(){var t,e;return(e=(t=Mt("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function of(t,e){var c,d;const n=D1("RouterLink"),r=V(()=>!!(t.href||t.to)),i=x(()=>(r==null?void 0:r.value)||II(e,"click")||II(t,"click"));if(typeof n=="string"||!("useLink"in n)){const h=V(()=>t.href);return{isLink:r,isClickable:i,href:h,linkProps:wt({href:h})}}const s=n.useLink({to:V(()=>t.to||""),replace:V(()=>t.replace)}),o=x(()=>t.to?s:void 0),a=N4(),l=x(()=>{var h,f,m;return o.value?t.exact?a.value?((m=o.value.isExactActive)==null?void 0:m.value)&&sr(o.value.route.value.query,a.value.query):((f=o.value.isExactActive)==null?void 0:f.value)??!1:((h=o.value.isActive)==null?void 0:h.value)??!1:!1}),u=x(()=>{var h;return t.to?(h=o.value)==null?void 0:h.route.value.href:t.href});return{isLink:r,isClickable:i,isActive:l,route:(c=o.value)==null?void 0:c.route,navigate:(d=o.value)==null?void 0:d.navigate,href:u,linkProps:wt({href:u,"aria-current":V(()=>l.value?"page":void 0)})}}const af=G({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let rm=!1;function O4(t,e){let n=!1,r,i;tt&&(t!=null&&t.beforeEach)&&(sn(()=>{window.addEventListener("popstate",s),r=t.beforeEach((o,a,l)=>{rm?n?e(l):l():setTimeout(()=>n?e(l):l()),rm=!0}),i=t==null?void 0:t.afterEach(()=>{rm=!1})}),dn(()=>{window.removeEventListener("popstate",s),r==null||r(),i==null||i()}));function s(o){var a;(a=o.state)!=null&&a.replaced||(n=!0,setTimeout(()=>n=!1))}}function M4(t,e){Ie(()=>{var n;return(n=t.isActive)==null?void 0:n.value},n=>{t.isLink.value&&n!=null&&e&&sn(()=>{e(n)})},{immediate:!0})}const Sg=Symbol("rippleStop"),V4=80;function HI(t,e){t.style.transform=e,t.style.webkitTransform=e}function Tg(t){return t.constructor.name==="TouchEvent"}function rA(t){return t.constructor.name==="KeyboardEvent"}const L4=function(t,e){var d;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,i=0;if(!rA(t)){const h=e.getBoundingClientRect(),f=Tg(t)?t.touches[t.touches.length-1]:t;r=f.clientX-h.left,i=f.clientY-h.top}let s=0,o=.3;(d=e._ripple)!=null&&d.circle?(o=.15,s=e.clientWidth/2,s=n.center?s:s+Math.sqrt((r-s)**2+(i-s)**2)/4):s=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const a=`${(e.clientWidth-s*2)/2}px`,l=`${(e.clientHeight-s*2)/2}px`,u=n.center?a:`${r-s}px`,c=n.center?l:`${i-s}px`;return{radius:s,scale:o,x:u,y:c,centerX:a,centerY:l}},Bd={show(t,e){var f;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:s,scale:o,x:a,y:l,centerX:u,centerY:c}=L4(t,e,n),d=`${s*2}px`;i.className="v-ripple__animation",i.style.width=d,i.style.height=d,e.appendChild(r);const h=window.getComputedStyle(e);h&&h.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),HI(i,`translate(${a}, ${l}) scale3d(${o},${o},${o})`),i.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),HI(i,`translate(${u}, ${c}) scale3d(1,1,1)`)})})},hide(t){var s;if(!((s=t==null?void 0:t._ripple)!=null&&s.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const n=Array.from(e).findLast(o=>!o.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const r=performance.now()-Number(n.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((a=n.parentNode)==null?void 0:a.parentNode)===t&&t.removeChild(n.parentNode)},300)},i)}};function iA(t){return typeof t>"u"||!!t}function yu(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[Sg])){if(t[Sg]=!0,Tg(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||rA(t),n._ripple.class&&(e.class=n._ripple.class),Tg(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Bd.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},V4)}else Bd.show(t,n,e)}}function WI(t){t[Sg]=!0}function qn(t){const e=t.currentTarget;if(e!=null&&e._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{qn(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),Bd.hide(e)}}function sA(t){const e=t.currentTarget;e!=null&&e._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let wu=!1;function GI(t,e){!wu&&e.includes(t.key)&&(wu=!0,yu(t))}function oA(t){wu=!1,qn(t)}function aA(t){wu&&(wu=!1,qn(t))}function lA(t,e,n){const{value:r,modifiers:i}=e,s=iA(r);s||Bd.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=s,t._ripple.centered=i.center,t._ripple.circle=i.circle;const o=Pd(r)?r:{};o.class&&(t._ripple.class=o.class);const a=o.keys??["Enter","Space"];if(t._ripple.keyDownHandler=l=>GI(l,a),s&&!n){if(i.stop){t.addEventListener("touchstart",WI,{passive:!0}),t.addEventListener("mousedown",WI);return}t.addEventListener("touchstart",yu,{passive:!0}),t.addEventListener("touchend",qn,{passive:!0}),t.addEventListener("touchmove",sA,{passive:!0}),t.addEventListener("touchcancel",qn),t.addEventListener("mousedown",yu),t.addEventListener("mouseup",qn),t.addEventListener("mouseleave",qn),t.addEventListener("keydown",l=>GI(l,a)),t.addEventListener("keyup",oA),t.addEventListener("blur",aA),t.addEventListener("dragstart",qn,{passive:!0})}else!s&&n&&uA(t)}function uA(t){var e;t.removeEventListener("mousedown",yu),t.removeEventListener("touchstart",yu),t.removeEventListener("touchend",qn),t.removeEventListener("touchmove",sA),t.removeEventListener("touchcancel",qn),t.removeEventListener("mouseup",qn),t.removeEventListener("mouseleave",qn),(e=t._ripple)!=null&&e.keyDownHandler&&t.removeEventListener("keydown",t._ripple.keyDownHandler),t.removeEventListener("keyup",oA),t.removeEventListener("dragstart",qn),t.removeEventListener("blur",aA)}function F4(t,e){lA(t,e,!1)}function B4(t){uA(t),delete t._ripple}function $4(t,e){if(e.value===e.oldValue)return;const n=iA(e.oldValue);lA(t,e,n)}const Tr={mounted:F4,unmounted:B4,updated:$4},cA=G({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Qk},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:He,appendIcon:He,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...ks(),...Pe(),...Zn(),...cr(),...Mi(),...tf(),...cy(),...rf(),...hy(),...Xn(),...af(),...tc(),...st({tag:"button"}),...Et(),...Oi({variant:"elevated"})},"VBtn"),cn=me()({name:"VBtn",props:cA(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Bt(t),{borderClasses:s}=As(t),{densityClasses:o}=hr(t),{dimensionStyles:a}=dr(t),{elevationClasses:l}=Vi(t),{loaderClasses:u}=dy(t),{locationStyles:c}=sf(t),{positionClasses:d}=fy(t),{roundedClasses:h}=Jn(t),{sizeClasses:f,sizeStyles:m}=nc(t),g=nf(t,t.symbol,!1),v=of(t,n),y=x(()=>{var z;return t.active!==void 0?t.active:v.isLink.value?(z=v.isActive)==null?void 0:z.value:g==null?void 0:g.isSelected.value}),w=V(()=>y.value?t.activeColor??t.color:t.color),_=x(()=>{var k,O;return{color:(g==null?void 0:g.isSelected.value)&&(!v.isLink.value||((k=v.isActive)==null?void 0:k.value))||!g||((O=v.isActive)==null?void 0:O.value)?w.value??t.baseColor:t.baseColor,variant:t.variant}}),{colorClasses:b,colorStyles:T,variantClasses:E}=qa(_),A=x(()=>(g==null?void 0:g.disabled.value)||t.disabled),D=V(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),P=x(()=>{if(!(t.value===void 0||typeof t.value=="symbol"))return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function U(z){var k;A.value||v.isLink.value&&(z.metaKey||z.ctrlKey||z.shiftKey||z.button!==0||n.target==="_blank")||((k=v.navigate)==null||k.call(v,z),g==null||g.toggle())}return M4(v,g==null?void 0:g.select),be(()=>{const z=v.isLink.value?"a":t.tag,k=!!(t.prependIcon||r.prepend),O=!!(t.appendIcon||r.append),j=!!(t.icon&&t.icon!==!0);return yt(p(z,Se({type:z==="a"?void 0:"button",class:["v-btn",g==null?void 0:g.selectedClass.value,{"v-btn--active":y.value,"v-btn--block":t.block,"v-btn--disabled":A.value,"v-btn--elevated":D.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--readonly":t.readonly,"v-btn--slim":t.slim,"v-btn--stacked":t.stacked},i.value,s.value,b.value,o.value,l.value,u.value,d.value,h.value,f.value,E.value,t.class],style:[T.value,a.value,c.value,m.value,t.style],"aria-busy":t.loading?!0:void 0,disabled:A.value||void 0,tabindex:t.loading||t.readonly?-1:void 0,onClick:U,value:P.value},v.linkProps),{default:()=>{var J;return[ja(!0,"v-btn"),!t.icon&&k&&C("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?p(mt,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},r.prepend):p(Pt,{key:"prepend-icon",icon:t.prependIcon},null)]),C("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&j?p(Pt,{key:"content-icon",icon:t.icon},null):p(mt,{key:"content-defaults",disabled:!j,defaults:{VIcon:{icon:t.icon}}},{default:()=>{var ee;return[((ee=r.default)==null?void 0:ee.call(r))??qe(t.text)]}})]),!t.icon&&O&&C("span",{key:"append",class:"v-btn__append"},[r.append?p(mt,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},r.append):p(Pt,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&C("span",{key:"loader",class:"v-btn__loader"},[((J=r.loader)==null?void 0:J.call(r))??p(Jk,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,width:"2"},null)])]}}),[[Tr,!A.value&&t.ripple,"",{center:!!t.icon}]])}),{group:g}}}),U4=G({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Pe(),...Et()},"VDivider"),oc=me()({name:"VDivider",props:U4(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Bt(t),{textColorClasses:s,textColorStyles:o}=Sr(()=>t.color),a=x(()=>{const l={};return t.length&&(l[t.vertical?"height":"width"]=Ae(t.length)),t.thickness&&(l[t.vertical?"borderRightWidth":"borderTopWidth"]=Ae(t.thickness)),l});return be(()=>{const l=C("hr",{class:ce([{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},i.value,s.value,t.class]),style:xe([a.value,o.value,{"--v-border-opacity":t.opacity},t.style]),"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return r.default?C("div",{class:ce(["v-divider__wrapper",{"v-divider__wrapper--vertical":t.vertical,"v-divider__wrapper--inset":t.inset}])},[l,C("div",{class:"v-divider__content"},[r.default()]),l]):l}),{}}}),j4=G({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function er(t,e,n){return me()({name:t,props:j4({mode:n,origin:e}),setup(r,i){let{slots:s}=i;const o={onBeforeEnter(a){r.origin&&(a.style.transformOrigin=r.origin)},onLeave(a){if(r.leaveAbsolute){const{offsetTop:l,offsetLeft:u,offsetWidth:c,offsetHeight:d}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${l}px`,a.style.left=`${u}px`,a.style.width=`${c}px`,a.style.height=`${d}px`}r.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(r.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:l,top:u,left:c,width:d,height:h}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=l||"",a.style.top=u||"",a.style.left=c||"",a.style.width=d||"",a.style.height=h||""}}};return()=>{const a=r.group?iv:so;return ys(a,{name:r.disabled?"":t,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:o},s.default)}}})}function dA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return me()({name:t,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(r,i){let{slots:s}=i;const o=r.group?iv:so;return()=>ys(o,{name:r.disabled?"":t,css:!r.disabled,...r.disabled?{}:e},s.default)}})}function hA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=xn(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const a=o._initialStyle;if(!a)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const l=`${o[r]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=a.transition,t&&o._parent&&o._parent.classList.add(t),requestAnimationFrame(()=>{o.style[n]=l})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[r]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(o){t&&o._parent&&o._parent.classList.remove(t),s(o)}function s(o){if(!o._initialStyle)return;const a=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,a!=null&&(o.style[n]=a),delete o._initialStyle}}const q4=G({target:[Object,Array]},"v-dialog-transition"),im=new WeakMap,fA=me()({name:"VDialogTransition",props:q4(),setup(t,e){let{slots:n}=e;const r={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,s){var f;await new Promise(m=>requestAnimationFrame(m)),await new Promise(m=>requestAnimationFrame(m)),i.style.visibility="";const o=YI(t.target,i),{x:a,y:l,sx:u,sy:c,speed:d}=o;im.set(i,o);const h=Ys(i,[{transform:`translate(${a}px, ${l}px) scale(${u}, ${c})`,opacity:0},{}],{duration:225*d,easing:HU});(f=KI(i))==null||f.forEach(m=>{Ys(m,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*d,easing:vu})}),h.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){var f;await new Promise(m=>requestAnimationFrame(m));let o;!im.has(i)||Array.isArray(t.target)||t.target.offsetParent||t.target.getClientRects().length?o=YI(t.target,i):o=im.get(i);const{x:a,y:l,sx:u,sy:c,speed:d}=o;Ys(i,[{},{transform:`translate(${a}px, ${l}px) scale(${u}, ${c})`,opacity:0}],{duration:125*d,easing:WU}).finished.then(()=>s()),(f=KI(i))==null||f.forEach(m=>{Ys(m,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:vu})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?p(so,Se({name:"dialog-transition"},r,{css:!1}),n):p(so,{name:"dialog-transition"},n)}});function KI(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function YI(t,e){const n=Mk(t),r=sy(e),[i,s]=getComputedStyle(e).transformOrigin.split(" ").map(y=>parseFloat(y)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;o==="left"||a==="left"?l-=n.width/2:(o==="right"||a==="right")&&(l+=n.width/2);let u=n.top+n.height/2;o==="top"||a==="top"?u-=n.height/2:(o==="bottom"||a==="bottom")&&(u+=n.height/2);const c=n.width/r.width,d=n.height/r.height,h=Math.max(1,c,d),f=c/h||0,m=d/h||0,g=r.width*r.height/(window.innerWidth*window.innerHeight),v=g>.12?Math.min(1.5,(g-.12)*10+1):1;return{x:l-(i+r.left),y:u-(s+r.top),sx:f,sy:m,speed:v}}er("fab-transition","center center","out-in");er("dialog-bottom-transition");er("dialog-top-transition");const QI=er("fade-transition");er("scale-transition");er("scroll-x-transition");er("scroll-x-reverse-transition");er("scroll-y-transition");er("scroll-y-reverse-transition");er("slide-x-transition");er("slide-x-reverse-transition");const mA=er("slide-y-transition");er("slide-y-reverse-transition");const my=dA("expand-transition",hA()),gA=dA("expand-x-transition",hA("",!0)),Eg=Symbol.for("vuetify:list");function vA(){let{filterable:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const e=et(Eg,{filterable:!1,hasPrepend:ge(!1),updateHasPrepend:()=>null}),n={filterable:e.filterable||t,hasPrepend:ge(!1),updateHasPrepend:r=>{r&&(n.hasPrepend.value=r)}};return Kt(Eg,n),e}function pA(){return et(Eg,null)}const gy=t=>{const e={activate:n=>{let{id:r,value:i,activated:s}=n;return r=ke(r),t&&!i&&s.size===1&&s.has(r)||(i?s.add(r):s.delete(r)),s},in:(n,r,i)=>{let s=new Set;if(n!=null)for(const o of yr(n))s=e.activate({id:o,value:!0,activated:new Set(s),children:r,parents:i});return s},out:n=>Array.from(n)};return e},yA=t=>{const e=gy(t);return{activate:r=>{let{activated:i,id:s,...o}=r;s=ke(s);const a=i.has(s)?new Set([s]):new Set;return e.activate({...o,id:s,activated:a})},in:(r,i,s)=>{let o=new Set;if(r!=null){const a=yr(r);a.length&&(o=e.in(a.slice(0,1),i,s))}return o},out:(r,i,s)=>e.out(r,i,s)}},z4=t=>{const e=gy(t);return{activate:r=>{let{id:i,activated:s,children:o,...a}=r;return i=ke(i),o.has(i)?s:e.activate({id:i,activated:s,children:o,...a})},in:e.in,out:e.out}},H4=t=>{const e=yA(t);return{activate:r=>{let{id:i,activated:s,children:o,...a}=r;return i=ke(i),o.has(i)?s:e.activate({id:i,activated:s,children:o,...a})},in:e.in,out:e.out}},W4={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){const s=new Set;s.add(e);let o=i.get(e);for(;o!=null;)s.add(o),o=i.get(o);return s}else return r.delete(e),r},select:()=>null},wA={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){let s=i.get(e);for(r.add(e);s!=null&&s!==e;)r.add(s),s=i.get(s);return r}else r.delete(e);return r},select:()=>null},G4={open:wA.open,select:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(!n)return r;const s=[];let o=i.get(e);for(;o!=null;)s.push(o),o=i.get(o);return new Set(s)}},vy=t=>{const e={select:n=>{let{id:r,value:i,selected:s}=n;if(r=ke(r),t&&!i){const o=Array.from(s.entries()).reduce((a,l)=>{let[u,c]=l;return c==="on"&&a.push(u),a},[]);if(o.length===1&&o[0]===r)return s}return s.set(r,i?"on":"off"),s},in:(n,r,i,s)=>{const o=new Map;for(const a of n||[])e.select({id:a,value:!0,selected:o,children:r,parents:i,disabled:s});return o},out:n=>{const r=[];for(const[i,s]of n.entries())s==="on"&&r.push(i);return r}};return e},bA=t=>{const e=vy(t);return{select:r=>{let{selected:i,id:s,...o}=r;s=ke(s);const a=i.has(s)?new Map([[s,i.get(s)]]):new Map;return e.select({...o,id:s,selected:a})},in:(r,i,s,o)=>r!=null&&r.length?e.in(r.slice(0,1),i,s,o):new Map,out:(r,i,s)=>e.out(r,i,s)}},K4=t=>{const e=vy(t);return{select:r=>{let{id:i,selected:s,children:o,...a}=r;return i=ke(i),o.has(i)?s:e.select({id:i,selected:s,children:o,...a})},in:e.in,out:e.out}},Y4=t=>{const e=bA(t);return{select:r=>{let{id:i,selected:s,children:o,...a}=r;return i=ke(i),o.has(i)?s:e.select({id:i,selected:s,children:o,...a})},in:e.in,out:e.out}},IA=t=>{const e={select:n=>{let{id:r,value:i,selected:s,children:o,parents:a,disabled:l}=n;r=ke(r);const u=new Map(s),c=[r];for(;c.length;){const h=c.shift();l.has(h)||s.set(ke(h),i?"on":"off"),o.has(h)&&c.push(...o.get(h))}let d=ke(a.get(r));for(;d;){let h=!0,f=!0;for(const m of o.get(d)){const g=ke(m);if(!l.has(g)&&(s.get(g)!=="on"&&(h=!1),s.has(g)&&s.get(g)!=="off"&&(f=!1),!h&&!f))break}s.set(d,h?"on":f?"off":"indeterminate"),d=ke(a.get(d))}return t&&!i&&Array.from(s.entries()).reduce((f,m)=>{let[g,v]=m;return v==="on"&&f.push(g),f},[]).length===0?u:s},in:(n,r,i,s)=>{let o=new Map;for(const a of n||[])o=e.select({id:a,value:!0,selected:o,children:r,parents:i,disabled:s});return o},out:(n,r)=>{const i=[];for(const[s,o]of n.entries())o==="on"&&!r.has(s)&&i.push(s);return i}};return e},Q4=t=>{const e=IA(t);return{select:e.select,in:e.in,out:(r,i,s)=>{const o=[];for(const[a,l]of r.entries())if(l==="on"){if(s.has(a)){const u=s.get(a);if(r.get(u)==="on")continue}o.push(a)}return o}}},bu=Symbol.for("vuetify:nested"),_A={id:ge(),root:{register:()=>null,unregister:()=>null,children:te(new Map),parents:te(new Map),disabled:te(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:te(!1),selectable:te(!1),opened:te(new Set),activated:te(new Set),selected:te(new Map),selectedValues:te([]),getPath:()=>[]}},X4=G({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),J4=t=>{let e=!1;const n=ge(new Map),r=ge(new Map),i=ge(new Set),s=_t(t,"opened",t.opened,g=>new Set(Array.isArray(g)?g.map(v=>ke(v)):g),g=>[...g.values()]),o=x(()=>{if(typeof t.activeStrategy=="object")return t.activeStrategy;if(typeof t.activeStrategy=="function")return t.activeStrategy(t.mandatory);switch(t.activeStrategy){case"leaf":return z4(t.mandatory);case"single-leaf":return H4(t.mandatory);case"independent":return gy(t.mandatory);case"single-independent":default:return yA(t.mandatory)}}),a=x(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;if(typeof t.selectStrategy=="function")return t.selectStrategy(t.mandatory);switch(t.selectStrategy){case"single-leaf":return Y4(t.mandatory);case"leaf":return K4(t.mandatory);case"independent":return vy(t.mandatory);case"single-independent":return bA(t.mandatory);case"trunk":return Q4(t.mandatory);case"classic":default:return IA(t.mandatory)}}),l=x(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return G4;case"single":return W4;case"multiple":default:return wA}}),u=_t(t,"activated",t.activated,g=>o.value.in(g,n.value,r.value),g=>o.value.out(g,n.value,r.value)),c=_t(t,"selected",t.selected,g=>a.value.in(g,n.value,r.value,i.value),g=>a.value.out(g,n.value,r.value));Qn(()=>{e=!0});function d(g){const v=[];let y=ke(g);for(;y!=null;)v.unshift(y),y=r.value.get(y);return v}const h=Mt("nested"),f=new Set,m={id:ge(),root:{opened:s,activatable:V(()=>t.activatable),selectable:V(()=>t.selectable),activated:u,selected:c,selectedValues:x(()=>{const g=[];for(const[v,y]of c.value.entries())y==="on"&&g.push(v);return g}),register:(g,v,y,w)=>{if(f.has(g)){d(g).map(String).join(" -> "),d(v).concat(g).map(String).join(" -> ");return}else f.add(g);v&&g!==v&&r.value.set(g,v),y&&i.value.add(g),w&&n.value.set(g,[]),v!=null&&n.value.set(v,[...n.value.get(v)||[],g])},unregister:g=>{if(e)return;f.delete(g),n.value.delete(g),i.value.delete(g);const v=r.value.get(g);if(v){const y=n.value.get(v)??[];n.value.set(v,y.filter(w=>w!==g))}r.value.delete(g)},open:(g,v,y)=>{h.emit("click:open",{id:g,value:v,path:d(g),event:y});const w=l.value.open({id:g,value:v,opened:new Set(s.value),children:n.value,parents:r.value,event:y});w&&(s.value=w)},openOnSelect:(g,v,y)=>{const w=l.value.select({id:g,value:v,selected:new Map(c.value),opened:new Set(s.value),children:n.value,parents:r.value,event:y});w&&(s.value=w)},select:(g,v,y)=>{h.emit("click:select",{id:g,value:v,path:d(g),event:y});const w=a.value.select({id:g,value:v,selected:new Map(c.value),children:n.value,parents:r.value,disabled:i.value,event:y});w&&(c.value=w),m.root.openOnSelect(g,v,y)},activate:(g,v,y)=>{if(!t.activatable)return m.root.select(g,!0,y);h.emit("click:activate",{id:g,value:v,path:d(g),event:y});const w=o.value.activate({id:g,value:v,activated:new Set(u.value),children:n.value,parents:r.value,event:y});if(w.size!==u.value.size)u.value=w;else{for(const _ of w)if(!u.value.has(_)){u.value=w;return}for(const _ of u.value)if(!w.has(_)){u.value=w;return}}},children:n,parents:r,disabled:i,getPath:d}};return Kt(bu,m),m.root},SA=(t,e,n)=>{const r=et(bu,_A),i=Symbol("nested item"),s=x(()=>ke(Kr(t))??i),o={...r,id:s,open:(a,l)=>r.root.open(s.value,a,l),openOnSelect:(a,l)=>r.root.openOnSelect(s.value,a,l),isOpen:x(()=>r.root.opened.value.has(s.value)),parent:x(()=>r.root.parents.value.get(s.value)),activate:(a,l)=>r.root.activate(s.value,a,l),isActivated:x(()=>r.root.activated.value.has(s.value)),select:(a,l)=>r.root.select(s.value,a,l),isSelected:x(()=>r.root.selected.value.get(s.value)==="on"),isIndeterminate:x(()=>r.root.selected.value.get(s.value)==="indeterminate"),isLeaf:x(()=>!r.root.children.value.get(s.value)),isGroupActivator:r.isGroupActivator};return Eu(()=>{r.isGroupActivator||r.root.register(s.value,r.id.value,Kr(e),n)}),Qn(()=>{r.isGroupActivator||r.root.unregister(s.value)}),n&&Kt(bu,o),o},Z4=()=>{const t=et(bu,_A);Kt(bu,{...t,isGroupActivator:!0})};function lf(){const t=ge(!1);return ki(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:V(()=>t.value?void 0:{transition:"none !important"}),isBooted:Su(t)}}const ej=Ua({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return Z4(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),tj=G({activeColor:String,baseColor:String,color:String,collapseIcon:{type:He,default:"$collapse"},disabled:Boolean,expandIcon:{type:He,default:"$expand"},rawId:[String,Number],prependIcon:He,appendIcon:He,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Pe(),...st()},"VListGroup"),XI=me()({name:"VListGroup",props:tj(),setup(t,e){let{slots:n}=e;const{isOpen:r,open:i,id:s}=SA(()=>t.value,()=>t.disabled,!0),o=x(()=>`v-list-group--id-${String(t.rawId??s.value)}`),a=pA(),{isBooted:l}=lf();function u(f){var m;["INPUT","TEXTAREA"].includes((m=f.target)==null?void 0:m.tagName)||i(!r.value,f)}const c=x(()=>({onClick:u,class:"v-list-group__header",id:o.value})),d=x(()=>r.value?t.collapseIcon:t.expandIcon),h=x(()=>({VListItem:{activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&d.value,appendIcon:t.appendIcon||!t.subgroup&&d.value,title:t.title,value:t.value}}));return be(()=>p(t.tag,{class:ce(["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":r.value},t.class]),style:xe(t.style)},{default:()=>[n.activator&&p(mt,{defaults:h.value},{default:()=>[p(ej,null,{default:()=>[n.activator({props:c.value,isOpen:r.value})]})]}),p(di,{transition:{component:my},disabled:!l.value},{default:()=>{var f;return[yt(C("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[(f=n.default)==null?void 0:f.call(n)]),[[En,r.value]])]}})]})),{isOpen:r}}}),nj=G({opacity:[Number,String],...Pe(),...st()},"VListItemSubtitle"),py=me()({name:"VListItemSubtitle",props:nj(),setup(t,e){let{slots:n}=e;return be(()=>p(t.tag,{class:ce(["v-list-item-subtitle",t.class]),style:xe([{"--v-list-item-subtitle-opacity":t.opacity},t.style])},n)),{}}}),mi=Xh("v-list-item-title"),rj=G({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:He,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:He,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Fn(),onClickOnce:Fn(),...ks(),...Pe(),...Zn(),...cr(),...Mi(),...Xn(),...af(),...st(),...Et(),...Oi({variant:"text"})},"VListItem"),_i=me()({name:"VListItem",directives:{vRipple:Tr},props:rj(),emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const s=of(t,n),o=x(()=>t.value===void 0?s.href.value:t.value),{activate:a,isActivated:l,select:u,isOpen:c,isSelected:d,isIndeterminate:h,isGroupActivator:f,root:m,parent:g,openOnSelect:v,id:y}=SA(o,()=>t.disabled,!1),w=pA(),_=x(()=>{var ie;return t.active!==!1&&(t.active||((ie=s.isActive)==null?void 0:ie.value)||(m.activatable.value?l.value:d.value))}),b=V(()=>t.link!==!1&&s.isLink.value),T=x(()=>!!w&&(m.selectable.value||m.activatable.value||t.value!=null)),E=x(()=>!t.disabled&&t.link!==!1&&(t.link||s.isClickable.value||T.value)),A=V(()=>t.rounded||t.nav),D=V(()=>t.color??t.activeColor),P=V(()=>({color:_.value?D.value??t.baseColor:t.baseColor,variant:t.variant}));Ie(()=>{var ie;return(ie=s.isActive)==null?void 0:ie.value},ie=>{ie&&U()}),Eu(()=>{var ie;(ie=s.isActive)!=null&&ie.value&&U()});function U(){g.value!=null&&m.open(g.value,!0),v(!0)}const{themeClasses:z}=Bt(t),{borderClasses:k}=As(t),{colorClasses:O,colorStyles:j,variantClasses:J}=qa(P),{densityClasses:ee}=hr(t),{dimensionStyles:fe}=dr(t),{elevationClasses:de}=Vi(t),{roundedClasses:Fe}=Jn(A),L=V(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),F=V(()=>t.ripple!==void 0&&t.ripple&&(w!=null&&w.filterable)?{keys:["Enter"]}:t.ripple),$=x(()=>({isActive:_.value,select:u,isOpen:c.value,isSelected:d.value,isIndeterminate:h.value}));function le(ie){var Be,ve;i("click",ie),!["INPUT","TEXTAREA"].includes((Be=ie.target)==null?void 0:Be.tagName)&&E.value&&((ve=s.navigate)==null||ve.call(s,ie),!f&&(m.activatable.value?a(!l.value,ie):(m.selectable.value||t.value!=null)&&u(!d.value,ie)))}function Ue(ie){const Be=ie.target;["INPUT","TEXTAREA"].includes(Be.tagName)||(ie.key==="Enter"||ie.key===" "&&!(w!=null&&w.filterable))&&(ie.preventDefault(),ie.stopPropagation(),ie.target.dispatchEvent(new MouseEvent("click",ie)))}return be(()=>{const ie=b.value?"a":t.tag,Be=r.title||t.title!=null,ve=r.subtitle||t.subtitle!=null,Me=!!(t.appendAvatar||t.appendIcon),$e=!!(Me||r.append),ot=!!(t.prependAvatar||t.prependIcon),pt=!!(ot||r.prepend);return w==null||w.updateHasPrepend(pt),t.activeColor&&Vk("active-color",["color","base-color"]),yt(p(ie,Se({class:["v-list-item",{"v-list-item--active":_.value,"v-list-item--disabled":t.disabled,"v-list-item--link":E.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!pt&&(w==null?void 0:w.hasPrepend.value),"v-list-item--slim":t.slim,[`${t.activeClass}`]:t.activeClass&&_.value},z.value,k.value,O.value,ee.value,de.value,L.value,Fe.value,J.value,t.class],style:[j.value,fe.value,t.style],tabindex:E.value?w?-2:0:void 0,"aria-selected":T.value?m.activatable.value?l.value:m.selectable.value?d.value:_.value:void 0,onClick:le,onKeydown:E.value&&!b.value&&Ue},s.linkProps),{default:()=>{var I;return[ja(E.value||_.value,"v-list-item"),pt&&C("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?p(mt,{key:"prepend-defaults",disabled:!ot,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var S;return[(S=r.prepend)==null?void 0:S.call(r,$.value)]}}):C(Ee,null,[t.prependAvatar&&p(gs,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&p(Pt,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),C("div",{class:"v-list-item__spacer"},null)]),C("div",{class:"v-list-item__content","data-no-activator":""},[Be&&p(mi,{key:"title"},{default:()=>{var S;return[((S=r.title)==null?void 0:S.call(r,{title:t.title}))??qe(t.title)]}}),ve&&p(py,{key:"subtitle"},{default:()=>{var S;return[((S=r.subtitle)==null?void 0:S.call(r,{subtitle:t.subtitle}))??qe(t.subtitle)]}}),(I=r.default)==null?void 0:I.call(r,$.value)]),$e&&C("div",{key:"append",class:"v-list-item__append"},[r.append?p(mt,{key:"append-defaults",disabled:!Me,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var S;return[(S=r.append)==null?void 0:S.call(r,$.value)]}}):C(Ee,null,[t.appendIcon&&p(Pt,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&p(gs,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),C("div",{class:"v-list-item__spacer"},null)])]}}),[[Tr,E.value&&F.value]])}),{activate:a,isActivated:l,isGroupActivator:f,isSelected:d,list:w,select:u,root:m,id:y,link:s}}}),ij=G({color:String,inset:Boolean,sticky:Boolean,title:String,...Pe(),...st()},"VListSubheader"),yy=me()({name:"VListSubheader",props:ij(),setup(t,e){let{slots:n}=e;const{textColorClasses:r,textColorStyles:i}=Sr(()=>t.color);return be(()=>{const s=!!(n.default||t.title);return p(t.tag,{class:ce(["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},r.value,t.class]),style:xe([{textColorStyles:i},t.style])},{default:()=>{var o;return[s&&C("div",{class:"v-list-subheader__text"},[((o=n.default)==null?void 0:o.call(n))??t.title])]}})}),{}}}),sj=G({items:Array,returnObject:Boolean},"VListChildren"),TA=me()({name:"VListChildren",props:sj(),setup(t,e){let{slots:n}=e;return vA(),()=>{var r,i;return((r=n.default)==null?void 0:r.call(n))??((i=t.items)==null?void 0:i.map(s=>{var h,f;let{children:o,props:a,type:l,raw:u}=s;if(l==="divider")return((h=n.divider)==null?void 0:h.call(n,{props:a}))??p(oc,a,null);if(l==="subheader")return((f=n.subheader)==null?void 0:f.call(n,{props:a}))??p(yy,a,null);const c={subtitle:n.subtitle?m=>{var g;return(g=n.subtitle)==null?void 0:g.call(n,{...m,item:u})}:void 0,prepend:n.prepend?m=>{var g;return(g=n.prepend)==null?void 0:g.call(n,{...m,item:u})}:void 0,append:n.append?m=>{var g;return(g=n.append)==null?void 0:g.call(n,{...m,item:u})}:void 0,title:n.title?m=>{var g;return(g=n.title)==null?void 0:g.call(n,{...m,item:u})}:void 0},d=XI.filterProps(a);return o?p(XI,Se(d,{value:t.returnObject?u:a==null?void 0:a.value,rawId:a==null?void 0:a.value}),{activator:m=>{let{props:g}=m;const v=Se(a,g,{value:t.returnObject?u:a.value});return n.header?n.header({props:v}):p(_i,v,c)},default:()=>p(TA,{items:o,returnObject:t.returnObject},n)}):n.item?n.item({props:a}):p(_i,Se(a,{value:t.returnObject?u:a.value}),c)}))}}}),EA=G({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),oj=new Set(["item","divider","subheader"]);function ia(t,e){const n=mr(e,t.itemTitle,e),r=mr(e,t.itemValue,n),i=mr(e,t.itemChildren),s=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?Zr(e,["children"]):e:void 0:mr(e,t.itemProps);let o=mr(e,t.itemType,"item");oj.has(o)||(o="item");const a={title:n,value:r,...s};return{type:o,title:String(a.title??""),value:a.value,props:a,children:o==="item"&&Array.isArray(i)?CA(t,i):void 0,raw:e}}ia.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function CA(t,e){const n=ec(t,ia.neededProps),r=[];for(const i of e)r.push(ia(n,i));return r}function aj(t){const e=x(()=>CA(t,t.items)),n=x(()=>e.value.some(a=>a.value===null)),r=ge(new Map),i=ge([]);lr(()=>{const a=e.value,l=new Map,u=[];for(let c=0;c<a.length;c++){const d=a[c];if(wg(d.value)||d.value===null){let h=l.get(d.value);h||(h=[],l.set(d.value,h)),h.push(d)}else u.push(d)}r.value=l,i.value=u});function s(a){const l=r.value,u=e.value,c=i.value,d=n.value,h=t.returnObject,f=!!t.valueComparator,m=t.valueComparator||sr,g=ec(t,ia.neededProps),v=[];e:for(const y of a){if(!d&&y===null)continue;if(h&&typeof y=="string"){v.push(ia(g,y));continue}const w=l.get(y);if(f||!w){for(const _ of f?u:c)if(m(y,_.value)){v.push(_);continue e}v.push(ia(g,y));continue}v.push(...w)}return v}function o(a){return t.returnObject?a.map(l=>{let{raw:u}=l;return u}):a.map(l=>{let{value:u}=l;return u})}return{items:e,transformIn:s,transformOut:o}}const lj=new Set(["item","divider","subheader"]);function uj(t,e){const n=wg(e)?e:mr(e,t.itemTitle),r=wg(e)?e:mr(e,t.itemValue,void 0),i=mr(e,t.itemChildren),s=t.itemProps===!0?Zr(e,["children"]):mr(e,t.itemProps);let o=mr(e,t.itemType,"item");lj.has(o)||(o="item");const a={title:n,value:r,...s};return{type:o,title:a.title,value:a.value,props:a,children:o==="item"&&i?kA(t,i):void 0,raw:e}}function kA(t,e){const n=[];for(const r of e)n.push(uj(t,r));return n}function cj(t){return{items:x(()=>kA(t,t.items))}}const dj=G({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:He,collapseIcon:He,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Fn(),"onClick:select":Fn(),"onUpdate:opened":Fn(),...X4({selectStrategy:"single-leaf",openStrategy:"list"}),...ks(),...Pe(),...Zn(),...cr(),...Mi(),...EA(),...Xn(),...st(),...Et(),...Oi({variant:"text"})},"VList"),uf=me()({name:"VList",props:dj(),emits:{"update:selected":t=>!0,"update:activated":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:activate":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:r}=cj(t),{themeClasses:i}=Bt(t),{backgroundColorClasses:s,backgroundColorStyles:o}=ar(()=>t.bgColor),{borderClasses:a}=As(t),{densityClasses:l}=hr(t),{dimensionStyles:u}=dr(t),{elevationClasses:c}=Vi(t),{roundedClasses:d}=Jn(t),{children:h,open:f,parents:m,select:g,getPath:v}=J4(t),y=V(()=>t.lines?`v-list--${t.lines}-line`:void 0),w=V(()=>t.activeColor),_=V(()=>t.baseColor),b=V(()=>t.color);vA({filterable:t.filterable}),Ri({VListGroup:{activeColor:w,baseColor:_,color:b,expandIcon:V(()=>t.expandIcon),collapseIcon:V(()=>t.collapseIcon)},VListItem:{activeClass:V(()=>t.activeClass),activeColor:w,baseColor:_,color:b,density:V(()=>t.density),disabled:V(()=>t.disabled),lines:V(()=>t.lines),nav:V(()=>t.nav),slim:V(()=>t.slim),variant:V(()=>t.variant)}});const T=ge(!1),E=te();function A(O){T.value=!0}function D(O){T.value=!1}function P(O){var j;!T.value&&!(O.relatedTarget&&((j=E.value)!=null&&j.contains(O.relatedTarget)))&&k()}function U(O){const j=O.target;if(!(!E.value||j.tagName==="INPUT"&&["Home","End"].includes(O.key)||j.tagName==="TEXTAREA")){if(O.key==="ArrowDown")k("next");else if(O.key==="ArrowUp")k("prev");else if(O.key==="Home")k("first");else if(O.key==="End")k("last");else return;O.preventDefault()}}function z(O){T.value=!0}function k(O){if(E.value)return Nl(E.value,O)}return be(()=>p(t.tag,{ref:E,class:ce(["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav,"v-list--slim":t.slim},i.value,s.value,a.value,l.value,c.value,y.value,d.value,t.class]),style:xe([o.value,u.value,t.style]),tabindex:t.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:A,onFocusout:D,onFocus:P,onKeydown:U,onMousedown:z},{default:()=>[p(TA,{items:r.value,returnObject:t.returnObject},n)]})),{open:f,select:g,focus:k,children:h,parents:m,getPath:v}}});function sm(t,e){return{x:t.x+e.x,y:t.y+e.y}}function hj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function JI(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,i=r==="left"?0:r==="center"?e.width/2:r==="right"?e.width:r,s=n==="top"?0:n==="bottom"?e.height:n;return sm({x:i,y:s},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:r}=t,i=n==="left"?0:n==="right"?e.width:n,s=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return sm({x:i,y:s},e)}return sm({x:e.width/2,y:e.height/2},e)}const AA={static:gj,connected:pj},fj=G({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in AA},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function mj(t,e){const n=te({}),r=te();tt&&vs(()=>!!(e.isActive.value&&t.locationStrategy),a=>{var l,u;Ie(()=>t.locationStrategy,a),dn(()=>{window.removeEventListener("resize",i),visualViewport==null||visualViewport.removeEventListener("resize",s),visualViewport==null||visualViewport.removeEventListener("scroll",o),r.value=void 0}),window.addEventListener("resize",i,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",s,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",o,{passive:!0}),typeof t.locationStrategy=="function"?r.value=(l=t.locationStrategy(e,t,n))==null?void 0:l.updateLocation:r.value=(u=AA[t.locationStrategy](e,t,n))==null?void 0:u.updateLocation});function i(a){var l;(l=r.value)==null||l.call(r,a)}function s(a){var l;(l=r.value)==null||l.call(r,a)}function o(a){var l;(l=r.value)==null||l.call(r,a)}return{contentStyles:n,updateLocation:r}}function gj(){}function vj(t,e){const n=sy(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function pj(t,e,n){(Array.isArray(t.target.value)||YU(t.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:s}=ry(()=>{const y=bg(e.location,t.isRtl.value),w=e.origin==="overlap"?y:e.origin==="auto"?em(y):bg(e.origin,t.isRtl.value);return y.side===w.side&&y.align===tm(w).align?{preferredAnchor:TI(y),preferredOrigin:TI(w)}:{preferredAnchor:y,preferredOrigin:w}}),[o,a,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(y=>x(()=>{const w=parseFloat(e[y]);return isNaN(w)?1/0:w})),c=x(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const y=e.offset.split(" ").map(parseFloat);return y.length<2&&y.push(0),y}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let d=!1,h=-1;const f=new dU(4),m=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(w=>{w!==h&&f.clear(),requestAnimationFrame(_=>{h=_})}),f.isFull){const w=f.values();if(sr(w.at(-1),w.at(-3))&&!sr(w.at(-1),w.at(-2)))return}const y=v();y&&f.push(y.flipped)});let g=new Gr({x:0,y:0,width:0,height:0});Ie(t.target,(y,w)=>{w&&!Array.isArray(w)&&m.unobserve(w),Array.isArray(y)?sr(y,w)||v():y&&m.observe(y)},{immediate:!0}),Ie(t.contentEl,(y,w)=>{w&&m.unobserve(w),y&&m.observe(y)},{immediate:!0}),dn(()=>{m.disconnect()});function v(){if(d=!1,requestAnimationFrame(()=>d=!0),!t.target.value||!t.contentEl.value)return;(Array.isArray(t.target.value)||t.target.value.offsetParent||t.target.value.getClientRects().length)&&(g=Mk(t.target.value));const y=vj(t.contentEl.value,t.isRtl.value),w=Vd(t.contentEl.value),_=12;w.length||(w.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(y.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),y.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const b=w.reduce((O,j)=>{const J=IU(j);return O?new Gr({x:Math.max(O.left,J.left),y:Math.max(O.top,J.top),width:Math.min(O.right,J.right)-Math.max(O.left,J.left),height:Math.min(O.bottom,J.bottom)-Math.max(O.top,J.top)}):J},void 0);b.x+=_,b.y+=_,b.width-=_*2,b.height-=_*2;let T={anchor:i.value,origin:s.value};function E(O){const j=new Gr(y),J=JI(O.anchor,g),ee=JI(O.origin,j);let{x:fe,y:de}=hj(J,ee);switch(O.anchor.side){case"top":de-=c.value[0];break;case"bottom":de+=c.value[0];break;case"left":fe-=c.value[0];break;case"right":fe+=c.value[0];break}switch(O.anchor.align){case"top":de-=c.value[1];break;case"bottom":de+=c.value[1];break;case"left":fe-=c.value[1];break;case"right":fe+=c.value[1];break}return j.x+=fe,j.y+=de,j.width=Math.min(j.width,l.value),j.height=Math.min(j.height,u.value),{overflows:CI(j,b),x:fe,y:de}}let A=0,D=0;const P={x:0,y:0},U={x:!1,y:!1};let z=-1;for(;!(z++>10);){const{x:O,y:j,overflows:J}=E(T);A+=O,D+=j,y.x+=O,y.y+=j;{const ee=EI(T.anchor),fe=J.x.before||J.x.after,de=J.y.before||J.y.after;let Fe=!1;if(["x","y"].forEach(L=>{if(L==="x"&&fe&&!U.x||L==="y"&&de&&!U.y){const F={anchor:{...T.anchor},origin:{...T.origin}},$=L==="x"?ee==="y"?tm:em:ee==="y"?em:tm;F.anchor=$(F.anchor),F.origin=$(F.origin);const{overflows:le}=E(F);(le[L].before<=J[L].before&&le[L].after<=J[L].after||le[L].before+le[L].after<(J[L].before+J[L].after)/2)&&(T=F,Fe=U[L]=!0)}}),Fe)continue}J.x.before&&(A+=J.x.before,y.x+=J.x.before),J.x.after&&(A-=J.x.after,y.x-=J.x.after),J.y.before&&(D+=J.y.before,y.y+=J.y.before),J.y.after&&(D-=J.y.after,y.y-=J.y.after);{const ee=CI(y,b);P.x=b.width-ee.x.before-ee.x.after,P.y=b.height-ee.y.before-ee.y.after,A+=ee.x.before,y.x+=ee.x.before,D+=ee.y.before,y.y+=ee.y.before}break}const k=EI(T.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${T.anchor.side} ${T.anchor.align}`,transformOrigin:`${T.origin.side} ${T.origin.align}`,top:Ae(om(D)),left:t.isRtl.value?void 0:Ae(om(A)),right:t.isRtl.value?Ae(om(-A)):void 0,minWidth:Ae(k==="y"?Math.min(o.value,g.width):o.value),maxWidth:Ae(ZI(or(P.x,o.value===1/0?0:o.value,l.value))),maxHeight:Ae(ZI(or(P.y,a.value===1/0?0:a.value,u.value)))}),{available:P,contentBox:y,flipped:U}}return Ie(()=>[i.value,s.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>v()),sn(()=>{const y=v();if(!y)return;const{available:w,contentBox:_}=y;_.height>w.y&&requestAnimationFrame(()=>{v(),requestAnimationFrame(()=>{v()})})}),{updateLocation:v}}function om(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function ZI(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let Cg=!0;const $d=[];function yj(t){!Cg||$d.length?($d.push(t),kg()):(Cg=!1,t(),kg())}let e_=-1;function kg(){cancelAnimationFrame(e_),e_=requestAnimationFrame(()=>{const t=$d.shift();t&&t(),$d.length?kg():Cg=!0})}const Wc={none:null,close:Ij,block:_j,reposition:Sj},wj=G({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in Wc}},"VOverlay-scroll-strategies");function bj(t,e){if(!tt)return;let n;lr(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=Rl(),await new Promise(r=>setTimeout(r)),n.active&&n.run(()=>{var r;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(r=Wc[t.scrollStrategy])==null||r.call(Wc,e,t,n)}))}),dn(()=>{n==null||n.stop()})}function Ij(t){function e(n){t.isActive.value=!1}xA(wy(t.target.value,t.contentEl.value),e)}function _j(t,e){var a;const n=(a=t.root.value)==null?void 0:a.offsetParent,r=wy(t.target.value,t.contentEl.value),i=[...new Set([...Vd(r,e.contained?n:void 0),...Vd(t.contentEl.value,e.contained?n:void 0)])].filter(l=>!l.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(l=>ay(l)&&l)(n||document.documentElement);o&&t.root.value.classList.add("v-overlay--scroll-blocked"),i.forEach((l,u)=>{l.style.setProperty("--v-body-scroll-x",Ae(-l.scrollLeft)),l.style.setProperty("--v-body-scroll-y",Ae(-l.scrollTop)),l!==document.documentElement&&l.style.setProperty("--v-scrollbar-offset",Ae(s)),l.classList.add("v-overlay-scroll-blocked")}),dn(()=>{i.forEach((l,u)=>{const c=parseFloat(l.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(l.style.getPropertyValue("--v-body-scroll-y")),h=l.style.scrollBehavior;l.style.scrollBehavior="auto",l.style.removeProperty("--v-body-scroll-x"),l.style.removeProperty("--v-body-scroll-y"),l.style.removeProperty("--v-scrollbar-offset"),l.classList.remove("v-overlay-scroll-blocked"),l.scrollLeft=-c,l.scrollTop=-d,l.style.scrollBehavior=h}),o&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function Sj(t,e,n){let r=!1,i=-1,s=-1;function o(a){yj(()=>{var c,d;const l=performance.now();(d=(c=t.updateLocation).value)==null||d.call(c,a),r=(performance.now()-l)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{n.run(()=>{xA(wy(t.target.value,t.contentEl.value),a=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{o(a)})})):o(a)})})}),dn(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(i)})}function wy(t,e){return Array.isArray(t)?document.elementsFromPoint(...t).find(n=>!(e!=null&&e.contains(n))):t??e}function xA(t,e){const n=[document,...Vd(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),dn(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}const Ag=Symbol.for("vuetify:v-menu"),Tj=G({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Ej(t,e){let n=()=>{};function r(o){n==null||n();const a=Number(o?t.openDelay:t.closeDelay);return new Promise(l=>{n=hU(a,()=>{e==null||e(o),l(o)})})}function i(){return r(!0)}function s(){return r(!1)}return{clearDelay:n,runOpenDelay:i,runCloseDelay:s}}const Cj=G({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...Tj()},"VOverlay-activator");function kj(t,e){let{isActive:n,isTop:r,contentEl:i}=e;const s=Mt("useActivator"),o=te();let a=!1,l=!1,u=!0;const c=x(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),d=x(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!c.value),{runOpenDelay:h,runCloseDelay:f}=Ej(t,D=>{D===(t.openOnHover&&a||c.value&&l)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value!==D&&(u=!0),n.value=D)}),m=te(),g={onClick:D=>{D.stopPropagation(),o.value=D.currentTarget||D.target,n.value||(m.value=[D.clientX,D.clientY]),n.value=!n.value},onMouseenter:D=>{var P;(P=D.sourceCapabilities)!=null&&P.firesTouchEvents||(a=!0,o.value=D.currentTarget||D.target,h())},onMouseleave:D=>{a=!1,f()},onFocus:D=>{Od(D.target,":focus-visible")!==!1&&(l=!0,D.stopPropagation(),o.value=D.currentTarget||D.target,h())},onBlur:D=>{l=!1,D.stopPropagation(),f()}},v=x(()=>{const D={};return d.value&&(D.onClick=g.onClick),t.openOnHover&&(D.onMouseenter=g.onMouseenter,D.onMouseleave=g.onMouseleave),c.value&&(D.onFocus=g.onFocus,D.onBlur=g.onBlur),D}),y=x(()=>{const D={};if(t.openOnHover&&(D.onMouseenter=()=>{a=!0,h()},D.onMouseleave=()=>{a=!1,f()}),c.value&&(D.onFocusin=()=>{l=!0,h()},D.onFocusout=()=>{l=!1,f()}),t.closeOnContentClick){const P=et(Ag,null);D.onClick=()=>{n.value=!1,P==null||P.closeParents()}}return D}),w=x(()=>{const D={};return t.openOnHover&&(D.onMouseenter=()=>{u&&(a=!0,u=!1,h())},D.onMouseleave=()=>{a=!1,f()}),D});Ie(r,D=>{var P;D&&(t.openOnHover&&!a&&(!c.value||!l)||c.value&&!l&&(!t.openOnHover||!a))&&!((P=i.value)!=null&&P.contains(document.activeElement))&&(n.value=!1)}),Ie(n,D=>{D||setTimeout(()=>{m.value=void 0})},{flush:"post"});const _=yg();lr(()=>{_.value&&sn(()=>{o.value=_.el})});const b=yg(),T=x(()=>t.target==="cursor"&&m.value?m.value:b.value?b.el:DA(t.target,s)||o.value),E=x(()=>Array.isArray(T.value)?void 0:T.value);let A;return Ie(()=>!!t.activator,D=>{D&&tt?(A=Rl(),A.run(()=>{Aj(t,s,{activatorEl:o,activatorEvents:v})})):A&&A.stop()},{flush:"post",immediate:!0}),dn(()=>{A==null||A.stop()}),{activatorEl:o,activatorRef:_,target:T,targetEl:E,targetRef:b,activatorEvents:v,contentEvents:y,scrimEvents:w}}function Aj(t,e,n){let{activatorEl:r,activatorEvents:i}=n;Ie(()=>t.activator,(l,u)=>{if(u&&l!==u){const c=a(u);c&&o(c)}l&&sn(()=>s())},{immediate:!0}),Ie(()=>t.activatorProps,()=>{s()}),dn(()=>{o()});function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&_U(l,Se(i.value,u))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&SU(l,Se(i.value,u))}function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator;const u=DA(l,e);return r.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:void 0,r.value}}function DA(t,e){var r,i;if(!t)return;let n;if(t==="parent"){let s=(i=(r=e==null?void 0:e.proxy)==null?void 0:r.$el)==null?void 0:i.parentNode;for(;s!=null&&s.hasAttribute("data-no-activator");)s=s.parentNode;n=s}else typeof t=="string"?n=document.querySelector(t):"$el"in t?n=t.$el:n=t;return n}const cf=["sm","md","lg","xl","xxl"],xg=Symbol.for("vuetify:display"),t_={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},xj=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t_;return pn(t_,t)};function n_(t){return tt&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function r_(t){return tt&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function i_(t){const e=tt&&!t?window.navigator.userAgent:"ssr";function n(m){return!!e.match(m)}const r=n(/android/i),i=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),a=n(/chrome/i),l=n(/edge/i),u=n(/firefox/i),c=n(/opera/i),d=n(/win/i),h=n(/mac/i),f=n(/linux/i);return{android:r,ios:i,cordova:s,electron:o,chrome:a,edge:l,firefox:u,opera:c,win:d,mac:h,linux:f,touch:sU,ssr:e==="ssr"}}function Dj(t,e){const{thresholds:n,mobileBreakpoint:r}=xj(t),i=ge(r_(e)),s=ge(i_(e)),o=wt({}),a=ge(n_(e));function l(){i.value=r_(),a.value=n_()}function u(){l(),s.value=i_()}return lr(()=>{const c=a.value<n.sm,d=a.value<n.md&&!c,h=a.value<n.lg&&!(d||c),f=a.value<n.xl&&!(h||d||c),m=a.value<n.xxl&&!(f||h||d||c),g=a.value>=n.xxl,v=c?"xs":d?"sm":h?"md":f?"lg":m?"xl":"xxl",y=typeof r=="number"?r:n[r],w=a.value<y;o.xs=c,o.sm=d,o.md=h,o.lg=f,o.xl=m,o.xxl=g,o.smAndUp=!c,o.mdAndUp=!(c||d),o.lgAndUp=!(c||d||h),o.xlAndUp=!(c||d||h||f),o.smAndDown=!(h||f||m||g),o.mdAndDown=!(f||m||g),o.lgAndDown=!(m||g),o.xlAndDown=!g,o.name=v,o.height=i.value,o.width=a.value,o.mobile=w,o.mobileBreakpoint=r,o.platform=s.value,o.thresholds=n}),tt&&(window.addEventListener("resize",l,{passive:!0}),dn(()=>{window.removeEventListener("resize",l)},!0)),{...W_(o),update:u,ssr:!!e}}const Pj=G({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function by(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();const n=et(xg);if(!n)throw new Error("Could not find Vuetify display injection");const r=x(()=>t.mobile?!0:typeof t.mobileBreakpoint=="number"?n.width.value<t.mobileBreakpoint:t.mobileBreakpoint?n.width.value<n.thresholds.value[t.mobileBreakpoint]:t.mobile===null?n.mobile.value:!1),i=V(()=>e?{[`${e}--mobile`]:r.value}:{});return{...n,displayClasses:i,mobile:r}}function Nj(){if(!tt)return ge(!1);const{ssr:t}=by();if(t){const e=ge(!1);return ki(()=>{e.value=!0}),e}else return ge(!0)}const Iy=G({eager:Boolean},"lazy");function _y(t,e){const n=ge(!1),r=V(()=>n.value||t.eager||e.value);Ie(e,()=>n.value=!0);function i(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:i}}function Sy(){const e=Mt("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const s_=Symbol.for("vuetify:stack"),ol=wt([]);function Rj(t,e,n){const r=Mt("useStack"),i=!n,s=et(s_,void 0),o=wt({activeChildren:new Set});Kt(s_,o);const a=ge(Number(Kr(e)));vs(t,()=>{var d;const c=(d=ol.at(-1))==null?void 0:d[1];a.value=c?c+10:Number(Kr(e)),i&&ol.push([r.uid,a.value]),s==null||s.activeChildren.add(r.uid),dn(()=>{if(i){const h=ke(ol).findIndex(f=>f[0]===r.uid);ol.splice(h,1)}s==null||s.activeChildren.delete(r.uid)})});const l=ge(!0);i&&lr(()=>{var d;const c=((d=ol.at(-1))==null?void 0:d[0])===r.uid;setTimeout(()=>l.value=c)});const u=V(()=>!o.activeChildren.size);return{globalTop:Su(l),localTop:u,stackStyles:V(()=>({zIndex:a.value}))}}function Oj(t){return{teleportTarget:x(()=>{const n=t();if(n===!0||!tt)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let i=[...r.children].find(s=>s.matches(".v-overlay-container"));return i||(i=document.createElement("div"),i.className="v-overlay-container",r.appendChild(i)),i})}}function Mj(){return!0}function PA(t,e,n){if(!t||NA(t,n)===!1)return!1;const r=jk(e);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const i=(typeof n.value=="object"&&n.value.include||(()=>[]))();return i.push(e),!i.some(s=>s==null?void 0:s.contains(t.target))}function NA(t,e){return(typeof e.value=="object"&&e.value.closeConditional||Mj)(t)}function Vj(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;t.shadowTarget=t.target,e._clickOutside.lastMousedownWasOutside&&PA(t,e,n)&&setTimeout(()=>{NA(t,n)&&r&&r(t)},0)}function o_(t,e){const n=jk(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const a_={mounted(t,e){const n=i=>Vj(i,t,e),r=i=>{t._clickOutside.lastMousedownWasOutside=PA(i,t,e)};o_(t,i=>{i.addEventListener("click",n,!0),i.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},beforeUnmount(t,e){t._clickOutside&&(o_(t,n=>{var s;if(!n||!((s=t._clickOutside)!=null&&s[e.instance.$.uid]))return;const{onClick:r,onMousedown:i}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete t._clickOutside[e.instance.$.uid])}};function Lj(t){const{modelValue:e,color:n,...r}=t;return p(so,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&C("div",Se({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const RA=G({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Cj(),...Pe(),...cr(),...Iy(),...fj(),...wj(),...Et(),...rc()},"VOverlay"),l_=me()({name:"VOverlay",directives:{vClickOutside:a_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...RA()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,keydown:t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:i}=e;const s=Mt("VOverlay"),o=te(),a=te(),l=te(),u=_t(t,"modelValue"),c=x({get:()=>u.value,set:ve=>{ve&&t.disabled||(u.value=ve)}}),{themeClasses:d}=Bt(t),{rtlClasses:h,isRtl:f}=fr(),{hasContent:m,onAfterLeave:g}=_y(t,c),v=ar(()=>typeof t.scrim=="string"?t.scrim:null),{globalTop:y,localTop:w,stackStyles:_}=Rj(c,()=>t.zIndex,t._disableGlobalStack),{activatorEl:b,activatorRef:T,target:E,targetEl:A,targetRef:D,activatorEvents:P,contentEvents:U,scrimEvents:z}=kj(t,{isActive:c,isTop:w,contentEl:l}),{teleportTarget:k}=Oj(()=>{var $e,ot,pt;const ve=t.attach||t.contained;if(ve)return ve;const Me=(($e=b==null?void 0:b.value)==null?void 0:$e.getRootNode())||((pt=(ot=s.proxy)==null?void 0:ot.$el)==null?void 0:pt.getRootNode());return Me instanceof ShadowRoot?Me:!1}),{dimensionStyles:O}=dr(t),j=Nj(),{scopeId:J}=Sy();Ie(()=>t.disabled,ve=>{ve&&(c.value=!1)});const{contentStyles:ee,updateLocation:fe}=mj(t,{isRtl:f,contentEl:l,target:E,isActive:c});bj(t,{root:o,contentEl:l,targetEl:A,target:E,isActive:c,updateLocation:fe});function de(ve){i("click:outside",ve),t.persistent?Ue():c.value=!1}function Fe(ve){return c.value&&y.value&&(!t.scrim||ve.target===a.value||ve instanceof MouseEvent&&ve.shadowTarget===a.value)}tt&&Ie(c,ve=>{ve?window.addEventListener("keydown",L):window.removeEventListener("keydown",L)},{immediate:!0}),Qn(()=>{tt&&window.removeEventListener("keydown",L)});function L(ve){var Me,$e,ot;ve.key==="Escape"&&y.value&&((Me=l.value)!=null&&Me.contains(document.activeElement)||i("keydown",ve),t.persistent?Ue():(c.value=!1,($e=l.value)!=null&&$e.contains(document.activeElement)&&((ot=b.value)==null||ot.focus())))}function F(ve){ve.key==="Escape"&&!y.value||i("keydown",ve)}const $=R4();vs(()=>t.closeOnBack,()=>{O4($,ve=>{y.value&&c.value?(ve(!1),t.persistent?Ue():c.value=!1):ve()})});const le=te();Ie(()=>c.value&&(t.absolute||t.contained)&&k.value==null,ve=>{if(ve){const Me=qk(o.value);Me&&Me!==document.scrollingElement&&(le.value=Me.scrollTop)}});function Ue(){t.noClickAnimation||l.value&&Ys(l.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:vu})}function ie(){i("afterEnter")}function Be(){g(),i("afterLeave")}return be(()=>{var ve;return C(Ee,null,[(ve=n.activator)==null?void 0:ve.call(n,{isActive:c.value,targetRef:D,props:Se({ref:T},P.value,t.activatorProps)}),j.value&&m.value&&p(y1,{disabled:!k.value,to:k.value},{default:()=>[C("div",Se({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":c.value,"v-overlay--contained":t.contained},d.value,h.value,t.class],style:[_.value,{"--v-overlay-opacity":t.opacity,top:Ae(le.value)},t.style],ref:o,onKeydown:F},J,r),[p(Lj,Se({color:v,modelValue:c.value&&!!t.scrim,ref:a},z.value),null),p(di,{appear:!0,persisted:!0,transition:t.transition,target:E.value,onAfterEnter:ie,onAfterLeave:Be},{default:()=>{var Me;return[yt(C("div",Se({ref:l,class:["v-overlay__content",t.contentClass],style:[O.value,ee.value]},U.value,t.contentProps),[(Me=n.default)==null?void 0:Me.call(n,{isActive:c})]),[[En,c.value],[a_,{handler:de,closeConditional:Fe,include:()=>[b.value]}]])]}})])]})])}),{activatorEl:b,scrimEl:a,target:E,animateClick:Ue,contentEl:l,globalTop:y,localTop:w,updateLocation:fe}}}),am=Symbol("Forwarded refs");function lm(t,e){let n=t;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function za(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t[am]=n,new Proxy(t,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const a=Reflect.get(o.value,s);return typeof a=="function"?a.bind(o.value):a}}},has(i,s){if(Reflect.has(i,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},set(i,s,o){if(Reflect.has(i,s))return Reflect.set(i,s,o);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,s))return Reflect.set(a.value,s,o);return!1},getOwnPropertyDescriptor(i,s){var a;const o=Reflect.getOwnPropertyDescriptor(i,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const l of n){if(!l.value)continue;const u=lm(l.value,s)??("_"in l.value?lm((a=l.value._)==null?void 0:a.setupState,s):void 0);if(u)return u}for(const l of n){const u=l.value&&l.value[am];if(!u)continue;const c=u.slice();for(;c.length;){const d=c.shift(),h=lm(d.value,s);if(h)return h;const f=d.value&&d.value[am];f&&c.push(...f)}}}}})}const Fj=G({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Zr(RA({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:fA}}),["absolute"])},"VMenu"),OA=me()({name:"VMenu",props:Fj(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=_t(t,"modelValue"),{scopeId:i}=Sy(),{isRtl:s}=fr(),o=Ei(),a=V(()=>t.id||`v-menu-${o}`),l=te(),u=et(Ag,null),c=ge(new Set);Kt(Ag,{register(){c.value.add(o)},unregister(){c.value.delete(o)},closeParents(v){setTimeout(()=>{var y;!c.value.size&&!t.persistent&&(v==null||(y=l.value)!=null&&y.contentEl&&!fU(v,l.value.contentEl))&&(r.value=!1,u==null||u.closeParents())},40)}}),Qn(()=>{u==null||u.unregister(),document.removeEventListener("focusin",d)}),Xg(()=>r.value=!1);async function d(v){var _,b,T;const y=v.relatedTarget,w=v.target;await sn(),r.value&&y!==w&&((_=l.value)!=null&&_.contentEl)&&((b=l.value)!=null&&b.globalTop)&&![document,l.value.contentEl].includes(w)&&!l.value.contentEl.contains(w)&&((T=Rd(l.value.contentEl)[0])==null||T.focus())}Ie(r,v=>{v?(u==null||u.register(),tt&&!t.disableInitialFocus&&document.addEventListener("focusin",d,{once:!0})):(u==null||u.unregister(),tt&&document.removeEventListener("focusin",d))},{immediate:!0});function h(v){u==null||u.closeParents(v)}function f(v){var y,w,_,b,T;if(!t.disabled)if(v.key==="Tab"||v.key==="Enter"&&!t.closeOnContentClick){if(v.key==="Enter"&&(v.target instanceof HTMLTextAreaElement||v.target instanceof HTMLInputElement&&v.target.closest("form")))return;v.key==="Enter"&&v.preventDefault(),Nk(Rd((y=l.value)==null?void 0:y.contentEl,!1),v.shiftKey?"prev":"next",A=>A.tabIndex>=0)||(r.value=!1,(_=(w=l.value)==null?void 0:w.activatorEl)==null||_.focus())}else t.submenu&&v.key===(s.value?"ArrowRight":"ArrowLeft")&&(r.value=!1,(T=(b=l.value)==null?void 0:b.activatorEl)==null||T.focus())}function m(v){var w;if(t.disabled)return;const y=(w=l.value)==null?void 0:w.contentEl;y&&r.value?v.key==="ArrowDown"?(v.preventDefault(),v.stopImmediatePropagation(),Nl(y,"next")):v.key==="ArrowUp"?(v.preventDefault(),v.stopImmediatePropagation(),Nl(y,"prev")):t.submenu&&(v.key===(s.value?"ArrowRight":"ArrowLeft")?r.value=!1:v.key===(s.value?"ArrowLeft":"ArrowRight")&&(v.preventDefault(),Nl(y,"first"))):(t.submenu?v.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(v.key))&&(r.value=!0,v.preventDefault(),setTimeout(()=>setTimeout(()=>m(v))))}const g=x(()=>Se({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-controls":a.value,onKeydown:m},t.activatorProps));return be(()=>{const v=l_.filterProps(t);return p(l_,Se({ref:l,id:a.value,class:["v-menu",t.class],style:t.style},v,{modelValue:r.value,"onUpdate:modelValue":y=>r.value=y,absolute:!0,activatorProps:g.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":h,onKeydown:f},i),{activator:n.activator,default:function(){for(var y=arguments.length,w=new Array(y),_=0;_<y;_++)w[_]=arguments[_];return p(mt,{root:"VMenu"},{default:()=>{var b;return[(b=n.default)==null?void 0:b.call(n,...w)]}})}})}),za({id:a,openChildren:c},l)}}),Bj={key:0},$j={key:1,class:"text-h6"},Uj={key:1},jj={__name:"AuthStatus",props:{user:{type:Object,default:null}},emits:["login","logout"],setup(t,{emit:e}){const n=e,r=()=>{n("login")},i=()=>{n("logout")};return(s,o)=>(we(),je("div",null,[t.user?(we(),je("div",Bj,[p(OA,{location:"bottom"},{activator:R(({props:a})=>[p(cn,Se({icon:""},a),{default:R(()=>[p(gs,{color:"primary",size:"small"},{default:R(()=>{var l;return[t.user.photoURL?(we(),$t(Zh,{key:0,src:t.user.photoURL,alt:t.user.displayName},null,8,["src","alt"])):(we(),je("span",$j,qe((l=t.user.displayName)==null?void 0:l.charAt(0)),1))]}),_:1})]),_:2},1040)]),default:R(()=>[p(uf,null,{default:R(()=>[p(_i,{title:t.user.displayName,subtitle:t.user.email},null,8,["title","subtitle"]),p(oc),p(_i,{onClick:i,"prepend-icon":"mdi-logout"},{default:R(()=>[p(mi,null,{default:R(()=>o[0]||(o[0]=[Qe("",-1)])),_:1,__:[0]})]),_:1})]),_:1})]),_:1})])):(we(),je("div",Uj,[p(cn,{onClick:r,"prepend-icon":"mdi-google",color:"white"},{default:R(()=>o[1]||(o[1]=[Qe(" Google ",-1)])),_:1,__:[1]})]))]))}},qj=G({text:String,onClick:Fn(),...Pe(),...Et()},"VLabel"),MA=me()({name:"VLabel",props:qj(),setup(t,e){let{slots:n}=e;return be(()=>{var r;return C("label",{class:ce(["v-label",{"v-label--clickable":!!t.onClick},t.class]),style:xe(t.style),onClick:t.onClick},[t.text,(r=n.default)==null?void 0:r.call(n)])}),{}}}),VA=Symbol.for("vuetify:selection-control-group"),LA=G({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:He,trueIcon:He,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:sr},...Pe(),...Zn(),...Et()},"SelectionControlGroup"),zj=G({...LA({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");me()({name:"VSelectionControlGroup",props:zj(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=_t(t,"modelValue"),i=Ei(),s=V(()=>t.id||`v-selection-control-group-${i}`),o=V(()=>t.name||s.value),a=new Set;return Kt(VA,{modelValue:r,forceUpdate:()=>{a.forEach(l=>l())},onForceUpdate:l=>{a.add(l),dn(()=>{a.delete(l)})}}),Ri({[t.defaultsTarget]:{color:V(()=>t.color),disabled:V(()=>t.disabled),density:V(()=>t.density),error:V(()=>t.error),inline:V(()=>t.inline),modelValue:r,multiple:V(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:o,falseIcon:V(()=>t.falseIcon),trueIcon:V(()=>t.trueIcon),readonly:V(()=>t.readonly),ripple:V(()=>t.ripple),type:V(()=>t.type),valueComparator:V(()=>t.valueComparator)}}),be(()=>{var l;return C("div",{class:ce(["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class]),style:xe(t.style),role:t.type==="radio"?"radiogroup":void 0},[(l=n.default)==null?void 0:l.call(n)])}),{}}});const FA=G({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Pe(),...LA()},"VSelectionControl");function Hj(t){const e=et(VA,void 0),{densityClasses:n}=hr(t),r=_t(t,"modelValue"),i=x(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),s=x(()=>t.falseValue!==void 0?t.falseValue:!1),o=x(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),a=x({get(){const f=e?e.modelValue.value:r.value;return o.value?yr(f).some(m=>t.valueComparator(m,i.value)):t.valueComparator(f,i.value)},set(f){if(t.readonly)return;const m=f?i.value:s.value;let g=m;o.value&&(g=f?[...yr(r.value),m]:yr(r.value).filter(v=>!t.valueComparator(v,i.value))),e?e.modelValue.value=g:r.value=g}}),{textColorClasses:l,textColorStyles:u}=Sr(()=>{if(!(t.error||t.disabled))return a.value?t.color:t.baseColor}),{backgroundColorClasses:c,backgroundColorStyles:d}=ar(()=>a.value&&!t.error&&!t.disabled?t.color:t.baseColor),h=x(()=>a.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:i,falseValue:s,model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,icon:h}}const u_=me()({name:"VSelectionControl",directives:{vRipple:Tr},inheritAttrs:!1,props:FA(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{group:i,densityClasses:s,icon:o,model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,trueValue:h}=Hj(t),f=Ei(),m=ge(!1),g=ge(!1),v=te(),y=V(()=>t.id||`input-${f}`),w=V(()=>!t.disabled&&!t.readonly);i==null||i.onForceUpdate(()=>{v.value&&(v.value.checked=a.value)});function _(A){w.value&&(m.value=!0,Od(A.target,":focus-visible")!==!1&&(g.value=!0))}function b(){m.value=!1,g.value=!1}function T(A){A.stopPropagation()}function E(A){if(!w.value){v.value&&(v.value.checked=a.value);return}t.readonly&&i&&sn(()=>i.forceUpdate()),a.value=A.target.checked}return be(()=>{var z,k;const A=r.label?r.label({label:t.label,props:{for:y.value}}):t.label,[D,P]=ny(n),U=C("input",Se({ref:v,checked:a.value,disabled:!!t.disabled,id:y.value,onBlur:b,onFocus:_,onInput:E,"aria-disabled":!!t.disabled,"aria-label":t.label,type:t.type,value:h.value,name:t.name,"aria-checked":t.type==="checkbox"?a.value:void 0},P),null);return C("div",Se({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":m.value,"v-selection-control--focus-visible":g.value,"v-selection-control--inline":t.inline},s.value,t.class]},D,{style:t.style}),[C("div",{class:ce(["v-selection-control__wrapper",l.value]),style:xe(u.value)},[(z=r.default)==null?void 0:z.call(r,{backgroundColorClasses:c,backgroundColorStyles:d}),yt(C("div",{class:ce(["v-selection-control__input"])},[((k=r.input)==null?void 0:k.call(r,{model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,inputNode:U,icon:o.value,props:{onFocus:_,onBlur:b,id:y.value}}))??C(Ee,null,[o.value&&p(Pt,{key:"icon",icon:o.value},null),U])]),[[Tr,!t.disabled&&!t.readonly&&t.ripple,null,{center:!0,circle:!0}]])]),A&&p(MA,{for:y.value,onClick:T},{default:()=>[A]})])}),{isFocused:m,input:v}}}),BA=G({indeterminate:Boolean,indeterminateIcon:{type:He,default:"$checkboxIndeterminate"},...FA({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Dg=me()({name:"VCheckboxBtn",props:BA(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const r=_t(t,"indeterminate"),i=_t(t,"modelValue");function s(l){r.value&&(r.value=!1)}const o=V(()=>r.value?t.indeterminateIcon:t.falseIcon),a=V(()=>r.value?t.indeterminateIcon:t.trueIcon);return be(()=>{const l=Zr(u_.filterProps(t),["modelValue"]);return p(u_,Se(l,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,s],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:o.value,trueIcon:a.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});function $A(t){const{t:e}=sc();function n(r){let{name:i,color:s,...o}=r;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],l=t[`onClick:${i}`];function u(d){d.key!=="Enter"&&d.key!==" "||(d.preventDefault(),d.stopPropagation(),Pk(l,new PointerEvent("click",d)))}const c=l&&a?e(`$vuetify.input.${a}`,t.label??""):void 0;return p(Pt,Se({icon:t[`${i}Icon`],"aria-label":c,onClick:l,onKeydown:u,color:s},o),null)}return{InputIcon:n}}const Wj=G({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Pe(),...rc({transition:{component:mA,leaveAbsolute:!0,group:!0}})},"VMessages"),Gj=me()({name:"VMessages",props:Wj(),setup(t,e){let{slots:n}=e;const r=x(()=>yr(t.messages)),{textColorClasses:i,textColorStyles:s}=Sr(()=>t.color);return be(()=>p(di,{transition:t.transition,tag:"div",class:ce(["v-messages",i.value,t.class]),style:xe([s.value,t.style])},{default:()=>[t.active&&r.value.map((o,a)=>C("div",{class:"v-messages__message",key:`${a}-${r.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),UA=G({focused:Boolean,"onUpdate:focused":Fn()},"focus");function Ty(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei();const n=_t(t,"focused"),r=V(()=>({[`${e}--focused`]:n.value}));function i(){n.value=!0}function s(){n.value=!1}return{focusClasses:r,isFocused:n,focus:i,blur:s}}const jA=Symbol.for("vuetify:form"),Kj=G({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function Yj(t){const e=_t(t,"modelValue"),n=V(()=>t.disabled),r=V(()=>t.readonly),i=ge(!1),s=te([]),o=te([]);async function a(){const c=[];let d=!0;o.value=[],i.value=!0;for(const h of s.value){const f=await h.validate();if(f.length>0&&(d=!1,c.push({id:h.id,errorMessages:f})),!d&&t.fastFail)break}return o.value=c,i.value=!1,{valid:d,errors:o.value}}function l(){s.value.forEach(c=>c.reset())}function u(){s.value.forEach(c=>c.resetValidation())}return Ie(s,()=>{let c=0,d=0;const h=[];for(const f of s.value)f.isValid===!1?(d++,h.push({id:f.id,errorMessages:f.errorMessages})):f.isValid===!0&&c++;o.value=h,e.value=d>0?!1:c===s.value.length?!0:null},{deep:!0,flush:"post"}),Kt(jA,{register:c=>{let{id:d,vm:h,validate:f,reset:m,resetValidation:g}=c;s.value.some(v=>v.id===d),s.value.push({id:d,validate:f,reset:m,resetValidation:g,vm:q_(h),isValid:null,errorMessages:[]})},unregister:c=>{s.value=s.value.filter(d=>d.id!==c)},update:(c,d,h)=>{const f=s.value.find(m=>m.id===c);f&&(f.isValid=d,f.errorMessages=h)},isDisabled:n,isReadonly:r,isValidating:i,isValid:e,items:s,validateOn:V(()=>t.validateOn)}),{errors:o,isDisabled:n,isReadonly:r,isValidating:i,isValid:e,items:s,validate:a,reset:l,resetValidation:u}}function qA(t){const e=et(jA,null);return{...e,isReadonly:x(()=>!!((t==null?void 0:t.readonly)??(e==null?void 0:e.isReadonly.value))),isDisabled:x(()=>!!((t==null?void 0:t.disabled)??(e==null?void 0:e.isDisabled.value)))}}const Qj=Symbol.for("vuetify:rules");function Xj(t){const e=et(Qj,null);if(!t){if(!e)throw new Error("Could not find Vuetify rules injection");return e.aliases}return(e==null?void 0:e.resolve(t))??V(t)}const Jj=G({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...UA()},"validation");function Zj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ei();const r=_t(t,"modelValue"),i=x(()=>t.validationValue===void 0?r.value:t.validationValue),s=qA(t),o=Xj(()=>t.rules),a=te([]),l=ge(!0),u=x(()=>!!(yr(r.value===""?null:r.value).length||yr(i.value===""?null:i.value).length)),c=x(()=>{var b;return(b=t.errorMessages)!=null&&b.length?yr(t.errorMessages).concat(a.value).slice(0,Math.max(0,Number(t.maxErrors))):a.value}),d=x(()=>{var E;let b=(t.validateOn??((E=s.validateOn)==null?void 0:E.value))||"input";b==="lazy"&&(b="input lazy"),b==="eager"&&(b="input eager");const T=new Set((b==null?void 0:b.split(" "))??[]);return{input:T.has("input"),blur:T.has("blur")||T.has("input")||T.has("invalid-input"),invalidInput:T.has("invalid-input"),lazy:T.has("lazy"),eager:T.has("eager")}}),h=x(()=>{var b;return t.error||(b=t.errorMessages)!=null&&b.length?!1:t.rules.length?l.value?a.value.length||d.value.lazy?null:!0:!a.value.length:!0}),f=ge(!1),m=x(()=>({[`${e}--error`]:h.value===!1,[`${e}--dirty`]:u.value,[`${e}--disabled`]:s.isDisabled.value,[`${e}--readonly`]:s.isReadonly.value})),g=Mt("validation"),v=x(()=>t.name??oi(n));Eu(()=>{var b;(b=s.register)==null||b.call(s,{id:v.value,vm:g,validate:_,reset:y,resetValidation:w})}),Qn(()=>{var b;(b=s.unregister)==null||b.call(s,v.value)}),ki(async()=>{var b;d.value.lazy||await _(!d.value.eager),(b=s.update)==null||b.call(s,v.value,h.value,c.value)}),vs(()=>d.value.input||d.value.invalidInput&&h.value===!1,()=>{Ie(i,()=>{if(i.value!=null)_();else if(t.focused){const b=Ie(()=>t.focused,T=>{T||_(),b()})}})}),vs(()=>d.value.blur,()=>{Ie(()=>t.focused,b=>{b||_()})}),Ie([h,c],()=>{var b;(b=s.update)==null||b.call(s,v.value,h.value,c.value)});async function y(){r.value=null,await sn(),await w()}async function w(){l.value=!0,d.value.lazy?a.value=[]:await _(!d.value.eager)}async function _(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const T=[];f.value=!0;for(const E of o.value){if(T.length>=Number(t.maxErrors??1))break;const D=await(typeof E=="function"?E:()=>E)(i.value);if(D!==!0){if(D!==!1&&typeof D!="string"){console.warn(`${D} is not a valid value. Rule functions must return boolean true or a string.`);continue}T.push(D||"")}}return a.value=T,f.value=!1,l.value=b,a.value}return{errorMessages:c,isDirty:u,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:l,isValid:h,isValidating:f,reset:y,resetValidation:w,validate:_,validationClasses:m}}const Ey=G({id:String,appendIcon:He,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:He,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":Fn(),"onClick:append":Fn(),...Pe(),...Zn(),...ec(cr(),["maxWidth","minWidth","width"]),...Et(),...Jj()},"VInput"),Ud=me()({name:"VInput",props:{...Ey()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const{densityClasses:s}=hr(t),{dimensionStyles:o}=dr(t),{themeClasses:a}=Bt(t),{rtlClasses:l}=fr(),{InputIcon:u}=$A(t),c=Ei(),d=x(()=>t.id||`input-${c}`),{errorMessages:h,isDirty:f,isDisabled:m,isReadonly:g,isPristine:v,isValid:y,isValidating:w,reset:_,resetValidation:b,validate:T,validationClasses:E}=Zj(t,"v-input",d),A=x(()=>{var j;return(j=t.errorMessages)!=null&&j.length||!v.value&&h.value.length?h.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages}),D=V(()=>A.value.length>0),P=V(()=>!t.hideDetails||t.hideDetails==="auto"&&(D.value||!!r.details)),U=x(()=>P.value?`${d.value}-messages`:void 0),z=x(()=>({id:d,messagesId:U,isDirty:f,isDisabled:m,isReadonly:g,isPristine:v,isValid:y,isValidating:w,hasDetails:P,reset:_,resetValidation:b,validate:T})),k=V(()=>t.error||t.disabled?void 0:t.focused?t.color:t.baseColor),O=V(()=>{if(t.iconColor)return t.iconColor===!0?k.value:t.iconColor});return be(()=>{var ee,fe,de,Fe;const j=!!(r.prepend||t.prependIcon),J=!!(r.append||t.appendIcon);return C("div",{class:ce(["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix,"v-input--focused":t.focused,"v-input--glow":t.glow,"v-input--hide-spin-buttons":t.hideSpinButtons},s.value,a.value,l.value,E.value,t.class]),style:xe([o.value,t.style])},[j&&C("div",{key:"prepend",class:"v-input__prepend"},[(ee=r.prepend)==null?void 0:ee.call(r,z.value),t.prependIcon&&p(u,{key:"prepend-icon",name:"prepend",color:O.value},null)]),r.default&&C("div",{class:"v-input__control"},[(fe=r.default)==null?void 0:fe.call(r,z.value)]),J&&C("div",{key:"append",class:"v-input__append"},[t.appendIcon&&p(u,{key:"append-icon",name:"append",color:O.value},null),(de=r.append)==null?void 0:de.call(r,z.value)]),P.value&&C("div",{id:U.value,class:"v-input__details",role:"alert","aria-live":"polite"},[p(Gj,{active:D.value,messages:A.value},{message:r.message}),(Fe=r.details)==null?void 0:Fe.call(r,z.value)])])}),{reset:_,resetValidation:b,validate:T,isValid:y,errorMessages:h}}}),eq=G({...Ey(),...Zr(BA(),["inline"])},"VCheckbox"),tq=me()({name:"VCheckbox",inheritAttrs:!1,props:eq(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=_t(t,"modelValue"),{isFocused:s,focus:o,blur:a}=Ty(t),l=te(),u=Ei();return be(()=>{const[c,d]=ny(n),h=Ud.filterProps(t),f=Dg.filterProps(t);return p(Ud,Se({ref:l,class:["v-checkbox",t.class]},c,h,{modelValue:i.value,"onUpdate:modelValue":m=>i.value=m,id:t.id||`checkbox-${u}`,focused:s.value,style:t.style}),{...r,default:m=>{let{id:g,messagesId:v,isDisabled:y,isReadonly:w,isValid:_}=m;return p(Dg,Se(f,{id:g.value,"aria-describedby":v.value,disabled:y.value,readonly:w.value},d,{error:_.value===!1,modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,onFocus:o,onBlur:a}),r)}})}),za({},l)}}),zA=Symbol.for("vuetify:goto");function HA(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:GU}}function nq(t){return Cy(t)??(document.scrollingElement||document.body)}function Cy(t){return typeof t=="string"?document.querySelector(t):Ek(t)}function um(t,e,n){if(typeof t=="number")return e&&n?-t:t;let r=Cy(t),i=0;for(;r;)i+=e?r.offsetLeft:r.offsetTop,r=r.offsetParent;return i}function rq(t,e){return{rtl:e.isRtl,options:pn(HA(),t)}}async function c_(t,e,n,r){const i=n?"scrollLeft":"scrollTop",s=pn((r==null?void 0:r.options)??HA(),e),o=r==null?void 0:r.rtl.value,a=(typeof t=="number"?t:Cy(t))??0,l=s.container==="parent"&&a instanceof HTMLElement?a.parentElement:nq(s.container),u=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!u)throw new TypeError(`Easing function "${s.easing}" not found.`);let c;if(typeof a=="number")c=um(a,n,o);else if(c=um(a,n,o)-um(l,n,o),s.layout){const m=window.getComputedStyle(a).getPropertyValue("--v-layout-top");m&&(c-=parseInt(m,10))}c+=s.offset,c=sq(l,c,!!o,!!n);const d=l[i]??0;if(c===d)return Promise.resolve(c);const h=performance.now();return new Promise(f=>requestAnimationFrame(function m(g){const y=(g-h)/s.duration,w=Math.floor(d+(c-d)*u(or(y,0,1)));if(l[i]=w,y>=1&&Math.abs(w-l[i])<10)return f(c);if(y>2)return f(l[i]);requestAnimationFrame(m)}))}function iq(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=et(zA),{isRtl:n}=fr();if(!e)throw new Error("[Vuetify] Could not find injected goto instance");const r={...e,rtl:V(()=>e.rtl.value||n.value)};async function i(s,o){return c_(s,pn(t,o),!1,r)}return i.horizontal=async(s,o)=>c_(s,pn(t,o),!0,r),i}function sq(t,e,n,r){const{scrollWidth:i,scrollHeight:s}=t,[o,a]=t===document.scrollingElement?[window.innerWidth,window.innerHeight]:[t.offsetWidth,t.offsetHeight];let l,u;return r?n?(l=-(i-o),u=0):(l=0,u=i-o):(l=0,u=s+-a),or(e,l,u)}function oq(t){let{selectedElement:e,containerElement:n,isRtl:r,isHorizontal:i}=t;const s=Iu(i,n),o=WA(i,r,n),a=Iu(i,e),l=GA(i,e),u=a*.4;return o>l?l-u:o+s<l+a?l-s+a+u:o}function aq(t){let{selectedElement:e,containerElement:n,isHorizontal:r}=t;const i=Iu(r,n),s=GA(r,e),o=Iu(r,e);return s-i/2+o/2}function d_(t,e){const n=t?"scrollWidth":"scrollHeight";return(e==null?void 0:e[n])||0}function lq(t,e){const n=t?"clientWidth":"clientHeight";return(e==null?void 0:e[n])||0}function WA(t,e,n){if(!n)return 0;const{scrollLeft:r,offsetWidth:i,scrollWidth:s}=n;return t?e?s-i+r:r:n.scrollTop}function Iu(t,e){const n=t?"offsetWidth":"offsetHeight";return(e==null?void 0:e[n])||0}function GA(t,e){const n=t?"offsetLeft":"offsetTop";return(e==null?void 0:e[n])||0}const uq=Symbol.for("vuetify:v-slide-group"),ky=G({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:uq},nextIcon:{type:He,default:"$next"},prevIcon:{type:He,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Pe(),...Pj({mobile:null}),...st(),...ef({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),jd=me()({name:"VSlideGroup",props:ky(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isRtl:r}=fr(),{displayClasses:i,mobile:s}=by(t),o=ic(t,t.symbol),a=ge(!1),l=ge(0),u=ge(0),c=ge(0),d=x(()=>t.direction==="horizontal"),{resizeRef:h,contentRect:f}=Ta(),{resizeRef:m,contentRect:g}=Ta(),v=iq(),y=x(()=>({container:h.el,duration:200,easing:"easeOutQuart"})),w=x(()=>o.selected.value.length?o.items.value.findIndex(F=>F.id===o.selected.value[0]):-1),_=x(()=>o.selected.value.length?o.items.value.findIndex(F=>F.id===o.selected.value[o.selected.value.length-1]):-1);if(tt){let F=-1;Ie(()=>[o.selected.value,f.value,g.value,d.value],()=>{cancelAnimationFrame(F),F=requestAnimationFrame(()=>{if(f.value&&g.value){const $=d.value?"width":"height";u.value=f.value[$],c.value=g.value[$],a.value=u.value+1<c.value}if(w.value>=0&&m.el){const $=m.el.children[_.value];T($,t.centerActive)}})})}const b=ge(!1);function T(F,$){let le=0;$?le=aq({containerElement:h.el,isHorizontal:d.value,selectedElement:F}):le=oq({containerElement:h.el,isHorizontal:d.value,isRtl:r.value,selectedElement:F}),E(le)}function E(F){if(!tt||!h.el)return;const $=Iu(d.value,h.el),le=WA(d.value,r.value,h.el);if(!(d_(d.value,h.el)<=$||Math.abs(F-le)<16)){if(d.value&&r.value&&h.el){const{scrollWidth:ie,offsetWidth:Be}=h.el;F=ie-Be-F}d.value?v.horizontal(F,y.value):v(F,y.value)}}function A(F){const{scrollTop:$,scrollLeft:le}=F.target;l.value=d.value?le:$}function D(F){if(b.value=!0,!(!a.value||!m.el)){for(const $ of F.composedPath())for(const le of m.el.children)if(le===$){T(le);return}}}function P(F){b.value=!1}let U=!1;function z(F){var $;!U&&!b.value&&!(F.relatedTarget&&(($=m.el)!=null&&$.contains(F.relatedTarget)))&&J(),U=!1}function k(){U=!0}function O(F){if(!m.el)return;function $(le){F.preventDefault(),J(le)}d.value?F.key==="ArrowRight"?$(r.value?"prev":"next"):F.key==="ArrowLeft"&&$(r.value?"next":"prev"):F.key==="ArrowDown"?$("next"):F.key==="ArrowUp"&&$("prev"),F.key==="Home"?$("first"):F.key==="End"&&$("last")}function j(F,$){if(!F)return;let le=F;do le=le==null?void 0:le[$==="next"?"nextElementSibling":"previousElementSibling"];while(le!=null&&le.hasAttribute("disabled"));return le}function J(F){if(!m.el)return;let $;if(!F)$=Rd(m.el)[0];else if(F==="next"){if($=j(m.el.querySelector(":focus"),F),!$)return J("first")}else if(F==="prev"){if($=j(m.el.querySelector(":focus"),F),!$)return J("last")}else F==="first"?($=m.el.firstElementChild,$!=null&&$.hasAttribute("disabled")&&($=j($,"next"))):F==="last"&&($=m.el.lastElementChild,$!=null&&$.hasAttribute("disabled")&&($=j($,"prev")));$&&$.focus({preventScroll:!0})}function ee(F){const $=d.value&&r.value?-1:1,le=(F==="prev"?-$:$)*u.value;let Ue=l.value+le;if(d.value&&r.value&&h.el){const{scrollWidth:ie,offsetWidth:Be}=h.el;Ue+=ie-Be}E(Ue)}const fe=x(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),de=x(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return a.value||Math.abs(l.value)>0;case"mobile":return s.value||a.value||Math.abs(l.value)>0;default:return!s.value&&(a.value||Math.abs(l.value)>0)}}),Fe=x(()=>Math.abs(l.value)>1),L=x(()=>{if(!h.value)return!1;const F=d_(d.value,h.el),$=lq(d.value,h.el);return F-$-Math.abs(l.value)>1});return be(()=>p(t.tag,{class:ce(["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":de.value,"v-slide-group--is-overflowing":a.value},i.value,t.class]),style:xe(t.style),tabindex:b.value||o.selected.value.length?-1:0,onFocus:z},{default:()=>{var F,$,le;return[de.value&&C("div",{key:"prev",class:ce(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Fe.value}]),onMousedown:k,onClick:()=>Fe.value&&ee("prev")},[((F=n.prev)==null?void 0:F.call(n,fe.value))??p(QI,null,{default:()=>[p(Pt,{icon:r.value?t.nextIcon:t.prevIcon},null)]})]),C("div",{key:"container",ref:h,class:ce(["v-slide-group__container",t.contentClass]),onScroll:A},[C("div",{ref:m,class:"v-slide-group__content",onFocusin:D,onFocusout:P,onKeydown:O},[($=n.default)==null?void 0:$.call(n,fe.value)])]),de.value&&C("div",{key:"next",class:ce(["v-slide-group__next",{"v-slide-group__next--disabled":!L.value}]),onMousedown:k,onClick:()=>L.value&&ee("next")},[((le=n.next)==null?void 0:le.call(n,fe.value))??p(QI,null,{default:()=>[p(Pt,{icon:r.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:o.selected,scrollTo:ee,scrollOffset:l,focus:J,hasPrev:Fe,hasNext:L}}}),KA=Symbol.for("vuetify:v-chip-group"),cq=G({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:sr},...ky(),...Pe(),...ef({selectedClass:"v-chip--selected"}),...st(),...Et(),...Oi({variant:"tonal"})},"VChipGroup");me()({name:"VChipGroup",props:cq(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Bt(t),{isSelected:i,select:s,next:o,prev:a,selected:l}=ic(t,KA);return Ri({VChip:{baseColor:V(()=>t.baseColor),color:V(()=>t.color),disabled:V(()=>t.disabled),filter:V(()=>t.filter),variant:V(()=>t.variant)}}),be(()=>{const u=jd.filterProps(t);return p(jd,Se(u,{class:["v-chip-group",{"v-chip-group--column":t.column},r.value,t.class],style:t.style}),{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n,{isSelected:i,select:s,next:o,prev:a,selected:l.value})]}})}),{}}});const dq=G({activeClass:String,appendAvatar:String,appendIcon:He,baseColor:String,closable:Boolean,closeIcon:{type:He,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:He,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:He,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Fn(),onClickOnce:Fn(),...ks(),...Pe(),...Zn(),...Mi(),...tf(),...Xn(),...af(),...tc(),...st({tag:"span"}),...Et(),...Oi({variant:"tonal"})},"VChip"),YA=me()({name:"VChip",directives:{vRipple:Tr},props:dq(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{t:s}=sc(),{borderClasses:o}=As(t),{densityClasses:a}=hr(t),{elevationClasses:l}=Vi(t),{roundedClasses:u}=Jn(t),{sizeClasses:c}=nc(t),{themeClasses:d}=Bt(t),h=_t(t,"modelValue"),f=nf(t,KA,!1),m=of(t,n),g=V(()=>t.link!==!1&&m.isLink.value),v=x(()=>!t.disabled&&t.link!==!1&&(!!f||t.link||m.isClickable.value)),y=V(()=>({"aria-label":s(t.closeLabel),disabled:t.disabled,onClick(A){A.preventDefault(),A.stopPropagation(),h.value=!1,r("click:close",A)}})),{colorClasses:w,colorStyles:_,variantClasses:b}=qa(()=>({color:!f||f.isSelected.value?t.color??t.baseColor:t.baseColor,variant:t.variant}));function T(A){var D;r("click",A),v.value&&((D=m.navigate)==null||D.call(m,A),f==null||f.toggle())}function E(A){(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),T(A))}return()=>{var j;const A=m.isLink.value?"a":t.tag,D=!!(t.appendIcon||t.appendAvatar),P=!!(D||i.append),U=!!(i.close||t.closable),z=!!(i.filter||t.filter)&&f,k=!!(t.prependIcon||t.prependAvatar),O=!!(k||i.prepend);return h.value&&yt(p(A,Se({class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":v.value,"v-chip--filter":z,"v-chip--pill":t.pill,[`${t.activeClass}`]:t.activeClass&&((j=m.isActive)==null?void 0:j.value)},d.value,o.value,w.value,a.value,l.value,u.value,c.value,b.value,f==null?void 0:f.selectedClass.value,t.class],style:[_.value,t.style],disabled:t.disabled||void 0,draggable:t.draggable,tabindex:v.value?0:void 0,onClick:T,onKeydown:v.value&&!g.value&&E},m.linkProps),{default:()=>{var J;return[ja(v.value,"v-chip"),z&&p(gA,{key:"filter"},{default:()=>[yt(C("div",{class:"v-chip__filter"},[i.filter?p(mt,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},i.filter):p(Pt,{key:"filter-icon",icon:t.filterIcon},null)]),[[En,f.isSelected.value]])]}),O&&C("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?p(mt,{key:"prepend-defaults",disabled:!k,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},i.prepend):C(Ee,null,[t.prependIcon&&p(Pt,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&p(gs,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),C("div",{class:"v-chip__content","data-no-activator":""},[((J=i.default)==null?void 0:J.call(i,{isSelected:f==null?void 0:f.isSelected.value,selectedClass:f==null?void 0:f.selectedClass.value,select:f==null?void 0:f.select,toggle:f==null?void 0:f.toggle,value:f==null?void 0:f.value.value,disabled:t.disabled}))??qe(t.text)]),P&&C("div",{key:"append",class:"v-chip__append"},[i.append?p(mt,{key:"append-defaults",disabled:!D,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},i.append):C(Ee,null,[t.appendIcon&&p(Pt,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&p(gs,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),U&&C("button",Se({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},y.value),[i.close?p(mt,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},i.close):p(Pt,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[Tr,v.value&&t.ripple,null]])}}}),hq=G({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Pe(),...rc({transition:{component:mA}})},"VCounter"),fq=me()({name:"VCounter",functional:!0,props:hq(),setup(t,e){let{slots:n}=e;const r=V(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return be(()=>p(di,{transition:t.transition},{default:()=>[yt(C("div",{class:ce(["v-counter",{"text-error":t.max&&!t.disabled&&parseFloat(t.value)>parseFloat(t.max)},t.class]),style:xe(t.style)},[n.default?n.default({counter:r.value,max:t.max,value:t.value}):r.value]),[[En,t.active]])]})),{}}}),mq=G({floating:Boolean,...Pe()},"VFieldLabel"),xc=me()({name:"VFieldLabel",props:mq(),setup(t,e){let{slots:n}=e;return be(()=>p(MA,{class:ce(["v-field-label",{"v-field-label--floating":t.floating},t.class]),style:xe(t.style)},n)),{}}}),gq=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],QA=G({appendInnerIcon:He,bgColor:String,clearable:Boolean,clearIcon:{type:He,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:He,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>gq.includes(t)},"onClick:clear":Fn(),"onClick:appendInner":Fn(),"onClick:prependInner":Fn(),...Pe(),...cy(),...Xn(),...Et()},"VField"),h_=me()({name:"VField",inheritAttrs:!1,props:{id:String,...UA(),...QA()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{themeClasses:s}=Bt(t),{loaderClasses:o}=dy(t),{focusClasses:a,isFocused:l,focus:u,blur:c}=Ty(t),{InputIcon:d}=$A(t),{roundedClasses:h}=Jn(t),{rtlClasses:f}=fr(),m=V(()=>t.dirty||t.active),g=V(()=>!!(t.label||i.label)),v=V(()=>!t.singleLine&&g.value),y=Ei(),w=x(()=>t.id||`input-${y}`),_=V(()=>t.details?`${w.value}-messages`:void 0),b=te(),T=te(),E=te(),A=x(()=>["plain","underlined"].includes(t.variant)),D=x(()=>t.error||t.disabled?void 0:m.value&&l.value?t.color:t.baseColor),P=x(()=>{if(!(!t.iconColor||t.glow&&!l.value))return t.iconColor===!0?D.value:t.iconColor}),{backgroundColorClasses:U,backgroundColorStyles:z}=ar(()=>t.bgColor),{textColorClasses:k,textColorStyles:O}=Sr(D);Ie(m,ee=>{if(v.value){const fe=b.value.$el,de=T.value.$el;requestAnimationFrame(()=>{const Fe=sy(fe),L=de.getBoundingClientRect(),F=L.x-Fe.x,$=L.y-Fe.y-(Fe.height/2-L.height/2),le=L.width/.75,Ue=Math.abs(le-Fe.width)>1?{maxWidth:Ae(le)}:void 0,ie=getComputedStyle(fe),Be=getComputedStyle(de),ve=parseFloat(ie.transitionDuration)*1e3||150,Me=parseFloat(Be.getPropertyValue("--v-field-label-scale")),$e=Be.getPropertyValue("color");fe.style.visibility="visible",de.style.visibility="hidden",Ys(fe,{transform:`translate(${F}px, ${$}px) scale(${Me})`,color:$e,...Ue},{duration:ve,easing:vu,direction:ee?"normal":"reverse"}).finished.then(()=>{fe.style.removeProperty("visibility"),de.style.removeProperty("visibility")})})}},{flush:"post"});const j=x(()=>({isActive:m,isFocused:l,controlRef:E,blur:c,focus:u}));function J(ee){ee.target!==document.activeElement&&ee.preventDefault()}return be(()=>{var F,$,le;const ee=t.variant==="outlined",fe=!!(i["prepend-inner"]||t.prependInnerIcon),de=!!(t.clearable||i.clear)&&!t.disabled,Fe=!!(i["append-inner"]||t.appendInnerIcon||de),L=()=>i.label?i.label({...j.value,label:t.label,props:{for:w.value}}):t.label;return C("div",Se({class:["v-field",{"v-field--active":m.value,"v-field--appended":Fe,"v-field--center-affix":t.centerAffix??!A.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--glow":t.glow,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":fe,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!L(),[`v-field--variant-${t.variant}`]:!0},s.value,U.value,a.value,o.value,h.value,f.value,t.class],style:[z.value,t.style],onClick:J},n),[C("div",{class:"v-field__overlay"},null),p(nA,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:i.loader}),fe&&C("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&p(d,{key:"prepend-icon",name:"prependInner",color:P.value},null),(F=i["prepend-inner"])==null?void 0:F.call(i,j.value)]),C("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&v.value&&p(xc,{key:"floating-label",ref:T,class:ce([k.value]),floating:!0,for:w.value,"aria-hidden":!m.value,style:xe(O.value)},{default:()=>[L()]}),g.value&&p(xc,{key:"label",ref:b,for:w.value},{default:()=>[L()]}),(($=i.default)==null?void 0:$.call(i,{...j.value,props:{id:w.value,class:"v-field__input","aria-describedby":_.value},focus:u,blur:c}))??C("div",{id:w.value,class:"v-field__input","aria-describedby":_.value},null)]),de&&p(gA,{key:"clear"},{default:()=>[yt(C("div",{class:"v-field__clearable",onMousedown:Ue=>{Ue.preventDefault(),Ue.stopPropagation()}},[p(mt,{defaults:{VIcon:{icon:t.clearIcon}}},{default:()=>[i.clear?i.clear({...j.value,props:{onFocus:u,onBlur:c,onClick:t["onClick:clear"],tabindex:-1}}):p(d,{name:"clear",onFocus:u,onBlur:c,tabindex:-1},null)]})]),[[En,t.dirty]])]}),Fe&&C("div",{key:"append",class:"v-field__append-inner"},[(le=i["append-inner"])==null?void 0:le.call(i,j.value),t.appendInnerIcon&&p(d,{key:"append-icon",name:"appendInner",color:P.value},null)]),C("div",{class:ce(["v-field__outline",k.value]),style:xe(O.value)},[ee&&C(Ee,null,[C("div",{class:"v-field__outline__start"},null),v.value&&C("div",{class:"v-field__outline__notch"},[p(xc,{ref:T,floating:!0,for:w.value,"aria-hidden":!m.value},{default:()=>[L()]})]),C("div",{class:"v-field__outline__end"},null)]),A.value&&v.value&&p(xc,{ref:T,floating:!0,for:w.value,"aria-hidden":!m.value},{default:()=>[L()]})])])}),{controlRef:E,fieldIconColor:P}}});function vq(t){function e(n,r){var i,s;!t.autofocus||!n||(s=(i=r[0].target)==null?void 0:i.focus)==null||s.call(i)}return{onIntersect:e}}const pq=["color","file","time","date","datetime-local","week","month"],XA=G({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Ey(),...QA()},"VTextField"),Wn=me()({name:"VTextField",directives:{vIntersect:Ld},inheritAttrs:!1,props:XA(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const s=_t(t,"modelValue"),{isFocused:o,focus:a,blur:l}=Ty(t),{onIntersect:u}=vq(t),c=x(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:(s.value??"").toString().length),d=x(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),h=x(()=>["plain","underlined"].includes(t.variant)),f=te(),m=te(),g=te(),v=x(()=>pq.includes(t.type)||t.persistentPlaceholder||o.value||t.active);function y(){o.value||a(),sn(()=>{var E;g.value!==document.activeElement&&((E=g.value)==null||E.focus())})}function w(E){r("mousedown:control",E),E.target!==g.value&&(y(),E.preventDefault())}function _(E){r("click:control",E)}function b(E,A){E.stopPropagation(),y(),sn(()=>{s.value=null,A(),Pk(t["onClick:clear"],E)})}function T(E){var D;const A=E.target;if(s.value=A.value,(D=t.modelModifiers)!=null&&D.trim&&["text","search","password","tel","url"].includes(t.type)){const P=[A.selectionStart,A.selectionEnd];sn(()=>{A.selectionStart=P[0],A.selectionEnd=P[1]})}}return be(()=>{const E=!!(i.counter||t.counter!==!1&&t.counter!=null),A=!!(E||i.details),[D,P]=ny(n),{modelValue:U,...z}=Ud.filterProps(t),k=h_.filterProps(t);return p(Ud,Se({ref:f,modelValue:s.value,"onUpdate:modelValue":O=>s.value=O,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-input--plain-underlined":h.value},t.class],style:t.style},D,z,{centerAffix:!h.value,focused:o.value}),{...i,default:O=>{let{id:j,isDisabled:J,isDirty:ee,isReadonly:fe,isValid:de,hasDetails:Fe,reset:L}=O;return p(h_,Se({ref:m,onMousedown:w,onClick:_,"onClick:clear":F=>b(F,L),"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},k,{id:j.value,active:v.value||ee.value,dirty:ee.value||t.dirty,disabled:J.value,focused:o.value,details:Fe.value,error:de.value===!1}),{...i,default:F=>{let{props:{class:$,...le}}=F;const Ue=yt(C("input",Se({ref:g,value:s.value,onInput:T,autofocus:t.autofocus,readonly:fe.value,disabled:J.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:a,onBlur:l},le,P),null),[[Ld,{handler:u},null,{once:!0}]]);return C(Ee,null,[t.prefix&&C("span",{class:"v-text-field__prefix"},[C("span",{class:"v-text-field__prefix__text"},[t.prefix])]),i.default?C("div",{class:ce($),"data-no-activator":""},[i.default(),Ue]):pi(Ue,{class:$}),t.suffix&&C("span",{class:"v-text-field__suffix"},[C("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:A?O=>{var j;return C(Ee,null,[(j=i.details)==null?void 0:j.call(i,O),E&&C(Ee,null,[C("span",null,null),p(fq,{active:t.persistentCounter||o.value,value:c.value,max:d.value,disabled:t.disabled},i.counter)])])}:void 0})}),za({},f,m,g)}}),yq=G({renderless:Boolean,...Pe()},"VVirtualScrollItem"),wq=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:yq(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{resizeRef:s,contentRect:o}=Ta(void 0,"border");Ie(()=>{var a;return(a=o.value)==null?void 0:a.height},a=>{a!=null&&r("update:height",a)}),be(()=>{var a,l;return t.renderless?C(Ee,null,[(a=i.default)==null?void 0:a.call(i,{itemRef:s})]):C("div",Se({ref:s,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(l=i.default)==null?void 0:l.call(i)])})}}),bq=-1,Iq=1,cm=100,_q=G({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Sq(t,e){const n=by(),r=ge(0);lr(()=>{r.value=parseFloat(t.itemHeight||0)});const i=ge(0),s=ge(Math.ceil((parseInt(t.height)||n.height.value)/(r.value||16))||1),o=ge(0),a=ge(0),l=te(),u=te();let c=0;const{resizeRef:d,contentRect:h}=Ta();lr(()=>{d.value=l.value});const f=x(()=>{var L;return l.value===document.documentElement?n.height.value:((L=h.value)==null?void 0:L.height)||parseInt(t.height)||0}),m=x(()=>!!(l.value&&u.value&&f.value&&r.value));let g=Array.from({length:e.value.length}),v=Array.from({length:e.value.length});const y=ge(0);let w=-1;function _(L){return g[L]||r.value}const b=uU(()=>{const L=performance.now();v[0]=0;const F=e.value.length;for(let $=1;$<=F-1;$++)v[$]=(v[$-1]||0)+_($-1);y.value=Math.max(y.value,performance.now()-L)},y),T=Ie(m,L=>{L&&(T(),c=u.value.offsetTop,b.immediate(),ee(),~w&&sn(()=>{tt&&window.requestAnimationFrame(()=>{de(w),w=-1})}))});dn(()=>{b.clear()});function E(L,F){const $=g[L],le=r.value;r.value=le?Math.min(r.value,F):F,($!==F||le!==r.value)&&(g[L]=F,b())}function A(L){L=or(L,0,e.value.length-1);const F=Math.floor(L),$=L%1,le=F+1,Ue=v[F]||0,ie=v[le]||Ue;return Ue+(ie-Ue)*$}function D(L){return Tq(v,L)}let P=0,U=0,z=0;Ie(f,(L,F)=>{F&&(ee(),L<F&&requestAnimationFrame(()=>{U=0,ee()}))});let k=-1;function O(){if(!l.value||!u.value)return;const L=l.value.scrollTop,F=performance.now();F-z>500?(U=Math.sign(L-P),c=u.value.offsetTop):U=L-P,P=L,z=F,window.clearTimeout(k),k=window.setTimeout(j,500),ee()}function j(){!l.value||!u.value||(U=0,z=0,window.clearTimeout(k),ee())}let J=-1;function ee(){cancelAnimationFrame(J),J=requestAnimationFrame(fe)}function fe(){if(!l.value||!f.value||!r.value)return;const L=P-c,F=Math.sign(U),$=Math.max(0,L-cm),le=or(D($),0,e.value.length),Ue=L+f.value+cm,ie=or(D(Ue)+1,le+1,e.value.length);if((F!==bq||le<i.value)&&(F!==Iq||ie>s.value)){const Be=A(i.value)-A(le),ve=A(ie)-A(s.value);Math.max(Be,ve)>cm?(i.value=le,s.value=ie):(le<=0&&(i.value=le),ie>=e.value.length&&(s.value=ie))}o.value=A(i.value),a.value=A(e.value.length)-A(s.value)}function de(L){const F=A(L);!l.value||L&&!F?w=L:l.value.scrollTop=F}const Fe=x(()=>e.value.slice(i.value,s.value).map((L,F)=>{const $=F+i.value;return{raw:L,index:$,key:mr(L,t.itemKey,$)}}));return Ie(e,()=>{g=Array.from({length:e.value.length}),v=Array.from({length:e.value.length}),b.immediate(),ee()},{deep:1}),{calculateVisibleItems:ee,containerRef:l,markerRef:u,computedItems:Fe,paddingTop:o,paddingBottom:a,scrollToIndex:de,handleScroll:O,handleScrollend:j,handleItemResize:E}}function Tq(t,e){let n=t.length-1,r=0,i=0,s=null,o=-1;if(t[n]<e)return n;for(;r<=n;)if(i=r+n>>1,s=t[i],s>e)n=i-1;else if(s<e)o=i,r=i+1;else return s===e?i:r;return o}const Eq=G({items:{type:Array,default:()=>[]},renderless:Boolean,..._q(),...Pe(),...cr()},"VVirtualScroll"),Cq=me()({name:"VVirtualScroll",props:Eq(),setup(t,e){let{slots:n}=e;const r=Mt("VVirtualScroll"),{dimensionStyles:i}=dr(t),{calculateVisibleItems:s,containerRef:o,markerRef:a,handleScroll:l,handleScrollend:u,handleItemResize:c,scrollToIndex:d,paddingTop:h,paddingBottom:f,computedItems:m}=Sq(t,V(()=>t.items));return vs(()=>t.renderless,()=>{function g(){var w,_;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[y]("scroll",l,{passive:!0}),document[y]("scrollend",u)):((w=o.value)==null||w[y]("scroll",l,{passive:!0}),(_=o.value)==null||_[y]("scrollend",u))}ki(()=>{o.value=qk(r.vnode.el,!0),g(!0)}),dn(g)}),be(()=>{const g=m.value.map(v=>p(wq,{key:v.key,renderless:t.renderless,"onUpdate:height":y=>c(v.index,y)},{default:y=>{var w;return(w=n.default)==null?void 0:w.call(n,{item:v.raw,index:v.index,...y})}}));return t.renderless?C(Ee,null,[C("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Ae(h.value)}},null),g,C("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Ae(f.value)}},null)]):C("div",{ref:o,class:ce(["v-virtual-scroll",t.class]),onScrollPassive:l,onScrollend:u,style:xe([i.value,t.style])},[C("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Ae(h.value),paddingBottom:Ae(f.value)}},[g])])}),{calculateVisibleItems:s,scrollToIndex:d}}});function kq(t,e){const n=ge(!1);let r;function i(a){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const l=Ie(n,()=>{l(),a()})}else a()})}async function o(a){var c,d;if(a.key==="Tab"&&((c=e.value)==null||c.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const l=(d=t.value)==null?void 0:d.$el;if(!l)return;(a.key==="Home"||a.key==="End")&&l.scrollTo({top:a.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await s();const u=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const h=l.getBoundingClientRect().top;for(const f of u)if(f.getBoundingClientRect().top>=h){f.focus();break}}else{const h=l.getBoundingClientRect().bottom;for(const f of[...u].reverse())if(f.getBoundingClientRect().bottom<=h){f.focus();break}}}return{onScrollPassive:i,onKeydown:o}}const Aq=G({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:He,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...EA({itemChildren:!1})},"Select"),xq=G({...Aq(),...Zr(XA({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...rc({transition:{component:fA}})},"VSelect"),On=me()({name:"VSelect",props:xq(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=sc(),i=te(),s=te(),o=te(),{items:a,transformIn:l,transformOut:u}=aj(t),c=_t(t,"modelValue",[],L=>l(L===null?[null]:yr(L)),L=>{const F=u(L);return t.multiple?F:F[0]??null}),d=x(()=>typeof t.counterValue=="function"?t.counterValue(c.value):typeof t.counterValue=="number"?t.counterValue:c.value.length),h=qA(t),f=x(()=>c.value.map(L=>L.value)),m=ge(!1);let g="",v=-1,y;const w=x(()=>t.hideSelected?a.value.filter(L=>!c.value.some(F=>(t.valueComparator||sr)(F,L))):a.value),_=x(()=>t.hideNoData&&!w.value.length||h.isReadonly.value||h.isDisabled.value),b=_t(t,"menu"),T=x({get:()=>b.value,set:L=>{var F;b.value&&!L&&((F=s.value)!=null&&F.openChildren.size)||L&&_.value||(b.value=L)}}),E=V(()=>T.value?t.closeText:t.openText),A=x(()=>{var L;return{...t.menuProps,activatorProps:{...((L=t.menuProps)==null?void 0:L.activatorProps)||{},"aria-haspopup":"listbox"}}}),D=te(),P=kq(D,i);function U(L){t.openOnClear&&(T.value=!0)}function z(){_.value||(T.value=!T.value)}function k(L){_I(L)&&O(L)}function O(L){var $e,ot,pt;if(!L.key||h.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(L.key)&&L.preventDefault(),["Enter","ArrowDown"," "].includes(L.key)&&(T.value=!0),["Escape","Tab"].includes(L.key)&&(T.value=!1),L.key==="Home"?($e=D.value)==null||$e.focus("first"):L.key==="End"&&((ot=D.value)==null||ot.focus("last"));const F=1e3;if(!_I(L))return;const $=performance.now();$-y>F&&(g="",v=-1),g+=L.key.toLowerCase(),y=$;const le=w.value;function Ue(){let I=ie();return I||g.at(-1)===g.at(-2)&&(g=g.slice(0,-1),I=ie(),I)||(v=-1,I=ie(),I)?I:(g=L.key.toLowerCase(),ie())}function ie(){for(let I=v+1;I<le.length;I++){const S=le[I];if(S.title.toLowerCase().startsWith(g))return[S,I]}}const Be=Ue();if(!Be)return;const[ve,Me]=Be;v=Me,(pt=D.value)==null||pt.focus(Me),t.multiple||(c.value=[ve])}function j(L){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!L.props.disabled)if(t.multiple){const $=c.value.findIndex(Ue=>(t.valueComparator||sr)(Ue.value,L.value)),le=F??!~$;if(~$){const Ue=le?[...c.value,L]:[...c.value];Ue.splice($,1),c.value=Ue}else le&&(c.value=[...c.value,L])}else{const $=F!==!1;c.value=$?[L]:[],sn(()=>{T.value=!1})}}function J(L){var F;(F=D.value)!=null&&F.$el.contains(L.relatedTarget)||(T.value=!1)}function ee(){var L;t.eager&&((L=o.value)==null||L.calculateVisibleItems())}function fe(){var L;m.value&&((L=i.value)==null||L.focus())}function de(L){m.value=!0}function Fe(L){if(L==null)c.value=[];else if(Od(i.value,":autofill")||Od(i.value,":-webkit-autofill")){const F=a.value.find($=>$.title===L);F&&j(F)}else i.value&&(i.value.value="")}return Ie(T,()=>{if(!t.hideSelected&&T.value&&c.value.length){const L=w.value.findIndex(F=>c.value.some($=>(t.valueComparator||sr)($.value,F.value)));tt&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var F;L>=0&&((F=o.value)==null||F.scrollToIndex(L))})}}),Ie(()=>t.items,(L,F)=>{T.value||m.value&&t.hideNoData&&!F.length&&L.length&&(T.value=!0)}),be(()=>{const L=!!(t.chips||n.chip),F=!!(!t.hideNoData||w.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),$=c.value.length>0,le=Wn.filterProps(t),Ue=$||!m.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return p(Wn,Se({ref:i},le,{modelValue:c.value.map(ie=>ie.props.value).join(", "),"onUpdate:modelValue":Fe,focused:m.value,"onUpdate:focused":ie=>m.value=ie,validationValue:c.externalValue,counterValue:d.value,dirty:$,class:["v-select",{"v-select--active-menu":T.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":c.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:Ue,"onClick:clear":U,"onMousedown:control":z,onBlur:J,onKeydown:O,"aria-label":r(E.value),title:r(E.value)}),{...n,default:()=>C(Ee,null,[p(OA,Se({ref:s,modelValue:T.value,"onUpdate:modelValue":ie=>T.value=ie,activator:"parent",contentClass:"v-select__content",disabled:_.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:ee,onAfterLeave:fe},A.value),{default:()=>[F&&p(uf,Se({ref:D,selected:f.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:ie=>ie.preventDefault(),onKeydown:k,onFocusin:de,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},P,t.listProps),{default:()=>{var ie,Be,ve;return[(ie=n["prepend-item"])==null?void 0:ie.call(n),!w.value.length&&!t.hideNoData&&(((Be=n["no-data"])==null?void 0:Be.call(n))??p(_i,{key:"no-data",title:r(t.noDataText)},null)),p(Cq,{ref:o,renderless:!0,items:w.value,itemKey:"value"},{default:Me=>{var B,Y,H;let{item:$e,index:ot,itemRef:pt}=Me;const I=mU($e.props),S=Se($e.props,{ref:pt,key:$e.value,onClick:()=>j($e,null)});return $e.type==="divider"?((B=n.divider)==null?void 0:B.call(n,{props:$e.raw,index:ot}))??p(oc,Se($e.props,{key:`divider-${ot}`}),null):$e.type==="subheader"?((Y=n.subheader)==null?void 0:Y.call(n,{props:$e.raw,index:ot}))??p(yy,Se($e.props,{key:`subheader-${ot}`}),null):((H=n.item)==null?void 0:H.call(n,{item:$e,index:ot,props:S}))??p(_i,Se(S,{role:"option"}),{prepend:K=>{let{isSelected:se}=K;return C(Ee,null,[t.multiple&&!t.hideSelected?p(Dg,{key:$e.value,modelValue:se,ripple:!1,tabindex:"-1"},null):void 0,I.prependAvatar&&p(gs,{image:I.prependAvatar},null),I.prependIcon&&p(Pt,{icon:I.prependIcon},null)])}})}}),(ve=n["append-item"])==null?void 0:ve.call(n)]}})]}),c.value.map((ie,Be)=>{function ve(pt){pt.stopPropagation(),pt.preventDefault(),j(ie,!1)}const Me={"onClick:close":ve,onKeydown(pt){pt.key!=="Enter"&&pt.key!==" "||(pt.preventDefault(),pt.stopPropagation(),ve(pt))},onMousedown(pt){pt.preventDefault(),pt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},$e=L?!!n.chip:!!n.selection,ot=$e?Rk(L?n.chip({item:ie,index:Be,props:Me}):n.selection({item:ie,index:Be})):void 0;if(!($e&&!ot))return C("div",{key:ie.value,class:"v-select__selection"},[L?n.chip?p(mt,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:ie.title}}},{default:()=>[ot]}):p(YA,Se({key:"chip",closable:t.closableChips,size:"small",text:ie.title,disabled:ie.props.disabled},Me),null):ot??C("span",{class:"v-select__selection-text"},[ie.title,t.multiple&&Be<c.value.length-1&&C("span",{class:"v-select__selection-comma"},[Qe(",")])])])})]),"append-inner":function(){var Me,$e;for(var ie=arguments.length,Be=new Array(ie),ve=0;ve<ie;ve++)Be[ve]=arguments[ve];return C(Ee,null,[(Me=n["append-inner"])==null?void 0:Me.call(n,...Be),t.menuIcon?p(Pt,{class:"v-select__menu-icon",color:($e=i.value)==null?void 0:$e.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),za({isFocused:m,menu:T,select:j},i)}}),Dq={id:"account-controls"},Pq={__name:"AccountSelector",props:{accounts:{type:Array,required:!0},modelValue:{type:String,default:null},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=x({get(){return n.modelValue},set(s){r("update:modelValue",s)}});return(s,o)=>yt((we(),je("div",Dq,[p(On,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),items:t.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact"},null,8,["modelValue","items"])],512)),[[En,t.visible]])}},df=me()({name:"VCardActions",props:Pe(),setup(t,e){let{slots:n}=e;return Ri({VBtn:{slim:!0,variant:"text"}}),be(()=>{var r;return C("div",{class:ce(["v-card-actions",t.class]),style:xe(t.style)},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),Nq=G({opacity:[Number,String],...Pe(),...st()},"VCardSubtitle"),JA=me()({name:"VCardSubtitle",props:Nq(),setup(t,e){let{slots:n}=e;return be(()=>p(t.tag,{class:ce(["v-card-subtitle",t.class]),style:xe([{"--v-card-subtitle-opacity":t.opacity},t.style])},n)),{}}}),Ea=Xh("v-card-title"),Rq=G({appendAvatar:String,appendIcon:He,prependAvatar:String,prependIcon:He,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Pe(),...Zn()},"VCardItem"),Oq=me()({name:"VCardItem",props:Rq(),setup(t,e){let{slots:n}=e;return be(()=>{var u;const r=!!(t.prependAvatar||t.prependIcon),i=!!(r||n.prepend),s=!!(t.appendAvatar||t.appendIcon),o=!!(s||n.append),a=!!(t.title!=null||n.title),l=!!(t.subtitle!=null||n.subtitle);return C("div",{class:ce(["v-card-item",t.class]),style:xe(t.style)},[i&&C("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?p(mt,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon}}},n.prepend):C(Ee,null,[t.prependAvatar&&p(gs,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&p(Pt,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),C("div",{class:"v-card-item__content"},[a&&p(Ea,{key:"title"},{default:()=>{var c;return[((c=n.title)==null?void 0:c.call(n))??qe(t.title)]}}),l&&p(JA,{key:"subtitle"},{default:()=>{var c;return[((c=n.subtitle)==null?void 0:c.call(n))??qe(t.subtitle)]}}),(u=n.default)==null?void 0:u.call(n)]),o&&C("div",{key:"append",class:"v-card-item__append"},[n.append?p(mt,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon}}},n.append):C(Ee,null,[t.appendIcon&&p(Pt,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&p(gs,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])])}),{}}}),Mq=G({opacity:[Number,String],...Pe(),...st()},"VCardText"),ro=me()({name:"VCardText",props:Mq(),setup(t,e){let{slots:n}=e;return be(()=>p(t.tag,{class:ce(["v-card-text",t.class]),style:xe([{"--v-card-text-opacity":t.opacity},t.style])},n)),{}}}),Vq=G({appendAvatar:String,appendIcon:He,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:He,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ks(),...Pe(),...Zn(),...cr(),...Mi(),...cy(),...rf(),...hy(),...Xn(),...af(),...st(),...Et(),...Oi({variant:"elevated"})},"VCard"),Zi=me()({name:"VCard",directives:{vRipple:Tr},props:Vq(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Bt(t),{borderClasses:s}=As(t),{colorClasses:o,colorStyles:a,variantClasses:l}=qa(t),{densityClasses:u}=hr(t),{dimensionStyles:c}=dr(t),{elevationClasses:d}=Vi(t),{loaderClasses:h}=dy(t),{locationStyles:f}=sf(t),{positionClasses:m}=fy(t),{roundedClasses:g}=Jn(t),v=of(t,n);return be(()=>{const y=t.link!==!1&&v.isLink.value,w=!t.disabled&&t.link!==!1&&(t.link||v.isClickable.value),_=y?"a":t.tag,b=!!(r.title||t.title!=null),T=!!(r.subtitle||t.subtitle!=null),E=b||T,A=!!(r.append||t.appendAvatar||t.appendIcon),D=!!(r.prepend||t.prependAvatar||t.prependIcon),P=!!(r.image||t.image),U=E||D||A,z=!!(r.text||t.text!=null);return yt(p(_,Se({class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":w},i.value,s.value,o.value,u.value,d.value,h.value,m.value,g.value,l.value,t.class],style:[a.value,c.value,f.value,t.style],onClick:w&&v.navigate,tabindex:t.disabled?-1:void 0},v.linkProps),{default:()=>{var k;return[P&&C("div",{key:"image",class:"v-card__image"},[r.image?p(mt,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},r.image):p(Zh,{key:"image-img",cover:!0,src:t.image},null)]),p(nA,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:r.loader}),U&&p(Oq,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),z&&p(ro,{key:"text"},{default:()=>{var O;return[((O=r.text)==null?void 0:O.call(r))??t.text]}}),(k=r.default)==null?void 0:k.call(r),r.actions&&p(df,null,{default:r.actions}),ja(w,"v-card")]}}),[[Tr,w&&t.ripple]])}),{}}}),_u=Symbol.for("vuetify:v-expansion-panel"),ZA=G({...Pe(),...Iy()},"VExpansionPanelText"),Pg=me()({name:"VExpansionPanelText",props:ZA(),setup(t,e){let{slots:n}=e;const r=et(_u);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:i,onAfterLeave:s}=_y(t,r.isSelected);return be(()=>p(my,{onAfterLeave:s},{default:()=>{var o;return[yt(C("div",{class:ce(["v-expansion-panel-text",t.class]),style:xe(t.style)},[n.default&&i.value&&C("div",{class:"v-expansion-panel-text__wrapper"},[(o=n.default)==null?void 0:o.call(n)])]),[[En,r.isSelected.value]])]}})),{}}}),ex=G({color:String,expandIcon:{type:He,default:"$expand"},collapseIcon:{type:He,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Pe(),...cr()},"VExpansionPanelTitle"),Ng=me()({name:"VExpansionPanelTitle",directives:{vRipple:Tr},props:ex(),setup(t,e){let{slots:n}=e;const r=et(_u);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:s}=ar(()=>t.color),{dimensionStyles:o}=dr(t),a=x(()=>({collapseIcon:t.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:t.expandIcon,readonly:t.readonly})),l=V(()=>r.isSelected.value?t.collapseIcon:t.expandIcon);return be(()=>{var u;return yt(C("button",{class:ce(["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value,"v-expansion-panel-title--focusable":t.focusable,"v-expansion-panel-title--static":t.static},i.value,t.class]),style:xe([s.value,o.value,t.style]),type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:t.readonly?void 0:r.toggle},[C("span",{class:"v-expansion-panel-title__overlay"},null),(u=n.default)==null?void 0:u.call(n,a.value),!t.hideActions&&p(mt,{defaults:{VIcon:{icon:l.value}}},{default:()=>{var c;return[C("span",{class:"v-expansion-panel-title__icon"},[((c=n.actions)==null?void 0:c.call(n,a.value))??p(Pt,null,null)])]}})]),[[Tr,t.ripple]])}),{}}}),tx=G({title:String,text:String,bgColor:String,...Mi(),...tf(),...Xn(),...st(),...ex(),...ZA()},"VExpansionPanel"),Lq=me()({name:"VExpansionPanel",props:tx(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=nf(t,_u),{backgroundColorClasses:i,backgroundColorStyles:s}=ar(()=>t.bgColor),{elevationClasses:o}=Vi(t),{roundedClasses:a}=Jn(t),l=V(()=>(r==null?void 0:r.disabled.value)||t.disabled),u=x(()=>r.group.items.value.reduce((h,f,m)=>(r.group.selected.value.includes(f.id)&&h.push(m),h),[])),c=x(()=>{const h=r.group.items.value.findIndex(f=>f.id===r.id);return!r.isSelected.value&&u.value.some(f=>f-h===1)}),d=x(()=>{const h=r.group.items.value.findIndex(f=>f.id===r.id);return!r.isSelected.value&&u.value.some(f=>f-h===-1)});return Kt(_u,r),be(()=>{const h=!!(n.text||t.text),f=!!(n.title||t.title),m=Ng.filterProps(t),g=Pg.filterProps(t);return p(t.tag,{class:ce(["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":c.value,"v-expansion-panel--after-active":d.value,"v-expansion-panel--disabled":l.value},a.value,i.value,t.class]),style:xe([s.value,t.style])},{default:()=>[C("div",{class:ce(["v-expansion-panel__shadow",...o.value])},null),p(mt,{defaults:{VExpansionPanelTitle:{...m},VExpansionPanelText:{...g}}},{default:()=>{var v;return[f&&p(Ng,{key:"title"},{default:()=>[n.title?n.title():t.title]}),h&&p(Pg,{key:"text"},{default:()=>[n.text?n.text():t.text]}),(v=n.default)==null?void 0:v.call(n)]}})]})}),{groupItem:r}}}),Fq=["default","accordion","inset","popout"],Bq=G({flat:Boolean,...ef(),...ec(tx(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Et(),...Pe(),...st(),variant:{type:String,default:"default",validator:t=>Fq.includes(t)}},"VExpansionPanels"),$q=me()({name:"VExpansionPanels",props:Bq(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{next:r,prev:i}=ic(t,_u),{themeClasses:s}=Bt(t),o=V(()=>t.variant&&`v-expansion-panels--variant-${t.variant}`);return Ri({VExpansionPanel:{bgColor:V(()=>t.bgColor),collapseIcon:V(()=>t.collapseIcon),color:V(()=>t.color),eager:V(()=>t.eager),elevation:V(()=>t.elevation),expandIcon:V(()=>t.expandIcon),focusable:V(()=>t.focusable),hideActions:V(()=>t.hideActions),readonly:V(()=>t.readonly),ripple:V(()=>t.ripple),rounded:V(()=>t.rounded),static:V(()=>t.static)}}),be(()=>p(t.tag,{class:ce(["v-expansion-panels",{"v-expansion-panels--flat":t.flat,"v-expansion-panels--tile":t.tile},s.value,o.value,t.class]),style:xe(t.style)},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n,{prev:i,next:r})]}})),{next:r,prev:i}}}),Uq=G({fluid:{type:Boolean,default:!1},...Pe(),...cr(),...st()},"VContainer"),ps=me()({name:"VContainer",props:Uq(),setup(t,e){let{slots:n}=e;const{rtlClasses:r}=fr(),{dimensionStyles:i}=dr(t);return be(()=>p(t.tag,{class:ce(["v-container",{"v-container--fluid":t.fluid},r.value,t.class]),style:xe([i.value,t.style])},n)),{}}}),nx=cf.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}),rx=cf.reduce((t,e)=>{const n="offset"+Ti(e);return t[n]={type:[String,Number],default:null},t},{}),ix=cf.reduce((t,e)=>{const n="order"+Ti(e);return t[n]={type:[String,Number],default:null},t},{}),f_={col:Object.keys(nx),offset:Object.keys(rx),order:Object.keys(ix)};function jq(t,e,n){let r=t;if(!(n==null||n===!1)){if(e){const i=e.replace(t,"");r+=`-${i}`}return t==="col"&&(r="v-"+r),t==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const qq=["auto","start","end","center","baseline","stretch"],zq=G({cols:{type:[Boolean,String,Number],default:!1},...nx,offset:{type:[String,Number],default:null},...rx,order:{type:[String,Number],default:null},...ix,alignSelf:{type:String,default:null,validator:t=>qq.includes(t)},...Pe(),...st()},"VCol"),Ye=me()({name:"VCol",props:zq(),setup(t,e){let{slots:n}=e;const r=x(()=>{const i=[];let s;for(s in f_)f_[s].forEach(a=>{const l=t[a],u=jq(s,a,l);u&&i.push(u)});const o=i.some(a=>a.startsWith("v-col-"));return i.push({"v-col":!o||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>{var i;return ys(t.tag,{class:[r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),Ay=["start","end","center"],sx=["space-between","space-around","space-evenly"];function xy(t,e){return cf.reduce((n,r)=>{const i=t+Ti(r);return n[i]=e(),n},{})}const Hq=[...Ay,"baseline","stretch"],ox=t=>Hq.includes(t),ax=xy("align",()=>({type:String,default:null,validator:ox})),Wq=[...Ay,...sx],lx=t=>Wq.includes(t),ux=xy("justify",()=>({type:String,default:null,validator:lx})),Gq=[...Ay,...sx,"stretch"],cx=t=>Gq.includes(t),dx=xy("alignContent",()=>({type:String,default:null,validator:cx})),m_={align:Object.keys(ax),justify:Object.keys(ux),alignContent:Object.keys(dx)},Kq={align:"align",justify:"justify",alignContent:"align-content"};function Yq(t,e,n){let r=Kq[t];if(n!=null){if(e){const i=e.replace(t,"");r+=`-${i}`}return r+=`-${n}`,r.toLowerCase()}}const Qq=G({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:ox},...ax,justify:{type:String,default:null,validator:lx},...ux,alignContent:{type:String,default:null,validator:cx},...dx,...Pe(),...st()},"VRow"),Bn=me()({name:"VRow",props:Qq(),setup(t,e){let{slots:n}=e;const r=x(()=>{const i=[];let s;for(s in m_)m_[s].forEach(o=>{const a=t[o],l=Yq(s,o,a);l&&i.push(l)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>{var i;return ys(t.tag,{class:["v-row",r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),hf=Xh("v-spacer","div","VSpacer"),Xq=G({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:t=>["even","odd"].includes(t)},...Pe(),...Zn(),...st(),...Et()},"VTable"),Jq=me()({name:"VTable",props:Xq(),setup(t,e){let{slots:n,emit:r}=e;const{themeClasses:i}=Bt(t),{densityClasses:s}=hr(t);return be(()=>{const o={VCheckboxBtn:{density:t.density}};return p(t.tag,{class:ce(["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":t.hover,"v-table--striped-even":t.striped==="even","v-table--striped-odd":t.striped==="odd"},i.value,s.value,t.class]),style:xe(t.style)},{default:()=>{var a,l;return[(a=n.top)==null?void 0:a.call(n),p(mt,{defaults:o},{default:()=>{var u;return[n.default?C("div",{class:"v-table__wrapper",style:{height:Ae(t.height)}},[C("table",null,[n.default()])]):(u=n.wrapper)==null?void 0:u.call(n)]}}),(l=n.bottom)==null?void 0:l.call(n)]}})}),{}}}),Zq={class:"d-flex justify-space-between align-center mb-2"},ez={class:"text-subtitle-1"},tz={rowspan:"2"},nz={rowspan:"2"},rz={rowspan:"2"},iz={key:0},sz=["colspan"],oz={key:1},az=["colspan"],lz=["innerHTML"],uz=["innerHTML"],cz={__name:"ViewAllCharactersTab",props:{dataLoaded:{type:Boolean,required:!0},accounts:{type:Array,required:!0},characterMasters:{type:Array,required:!0},itemMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0},ownedCountMap:{type:Map,required:!0},ownedCharactersData:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},setup(t){const e=t,n=te(!1),r=()=>({charSearch:"",element:"",itemSearch:"",type:"",gachaSearch:"",totalOwnership:"",account:"",ownership:""}),i=wt(r()),s=x(()=>Array.from(new Set(e.characterMasters.map(d=>d.type).filter(Boolean))).sort()),o=x(()=>{if(!e.dataLoaded)return[];const{charSearch:d,element:h,itemSearch:f,type:m,gachaSearch:g,totalOwnership:v,account:y,ownership:w}=i,_=d.toLowerCase(),b=f?Number(f):null;return e.characterMasters.filter(T=>{if(_&&!T.monsterName.toLowerCase().includes(_)&&!(T.indexNumber+"").includes(_)||h&&T.element!==h)return!1;if(m){if(m==="_or_"){if(T.type!==""&&T.type!=="")return!1}else if(T.type!==m)return!1}if(g&&(T.ejectionGacha||"")!==g)return!1;if(b){let A=!1;const D=y||null;if(D)A=(e.ownedCharactersData.get(D)||[]).some(P=>{var U;return P.characterMasterId===T.id&&((U=P.items)==null?void 0:U.some(z=>Number(z)===b))});else for(const P of e.ownedCharactersData.values())if(P.some(U=>{var z;return U.characterMasterId===T.id&&((z=U.items)==null?void 0:z.some(k=>Number(k)===b))})){A=!0;break}if(!A)return!1}const E=e.accounts.reduce((A,D)=>A+a(T.id,D.id),0);if(v==="all_unowned"&&E>0||v==="four_or_more"&&E<4||v==="one_in_each"&&!e.accounts.every(A=>a(T.id,A.id)>=1))return!1;if(y&&w){const A=a(T.id,y);if(w==="owned"&&A===0||w==="unowned"&&A>0||w==="one"&&A!==1||w==="two"&&A!==2)return!1}return!0})}),a=(d,h)=>e.ownedCountMap.get(`${d}-${h}`)||0,l=(d,h,f)=>{const m=(e.ownedCharactersData.get(h)||[]).filter(v=>v.characterMasterId===d);if(!m||m.length<=f)return"";const g=(m[f].items||[]).map(v=>e.itemMastersMap.get(Number(v))).filter(Boolean);return g.length>0?"<br>"+g.join("<br>"):""},u=(d,h,f)=>a(d,h)>=f?"status-owned":"status-unowned",c=()=>{Object.assign(i,r())};return(d,h)=>{const f=A1("v-subheader");return we(),je("div",null,[h[16]||(h[16]=C("h2",null,"",-1)),p($q,{class:"mb-4"},{default:R(()=>[p(Lq,null,{default:R(()=>[p(Ng,null,{default:R(()=>[p(Pt,{start:"",icon:"mdi-filter-variant"}),h[9]||(h[9]=Qe("  ",-1))]),_:1,__:[9]}),p(Pg,null,{default:R(()=>[p(ps,null,{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(Wn,{modelValue:i.charSearch,"onUpdate:modelValue":h[0]||(h[0]=m=>i.charSearch=m),modelModifiers:{lazy:!0},label:" or ",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(On,{modelValue:i.element,"onUpdate:modelValue":h[1]||(h[1]=m=>i.element=m),items:["","","","",""],label:"",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(On,{modelValue:i.itemSearch,"onUpdate:modelValue":h[2]||(h[2]=m=>i.itemSearch=m),items:t.itemMasters,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(On,{modelValue:i.type,"onUpdate:modelValue":h[3]||(h[3]=m=>i.type=m),items:["_or_",...s.value],label:" (Type)",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(On,{modelValue:i.gachaSearch,"onUpdate:modelValue":h[4]||(h[4]=m=>i.gachaSearch=m),items:t.gachaMasters,"item-title":"name","item-value":"name",label:"",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(On,{modelValue:i.totalOwnership,"onUpdate:modelValue":h[5]||(h[5]=m=>i.totalOwnership=m),items:[{value:"all_unowned",title:""},{value:"four_or_more",title:"4"},{value:"one_in_each",title:"1"}],label:"",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12"},{default:R(()=>[p(oc,{class:"my-2"}),p(f,null,{default:R(()=>h[10]||(h[10]=[Qe("",-1)])),_:1,__:[10]})]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(On,{modelValue:i.account,"onUpdate:modelValue":h[6]||(h[6]=m=>i.account=m),items:t.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(On,{modelValue:i.ownership,"onUpdate:modelValue":h[7]||(h[7]=m=>i.ownership=m),items:[{value:"owned",title:""},{value:"unowned",title:""},{value:"one",title:"1"},{value:"two",title:"2"}],label:" ()",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),p(df,null,{default:R(()=>[p(cn,{onClick:h[8]||(h[8]=m=>n.value=!n.value),variant:"tonal"},{default:R(()=>[Qe(qe(n.value?"":""),1)]),_:1}),p(hf),p(cn,{onClick:c,color:"secondary",variant:"outlined"},{default:R(()=>h[11]||(h[11]=[Qe("",-1)])),_:1,__:[11]})]),_:1})]),_:1})]),_:1})]),_:1}),C("div",Zq,[C("div",ez,": "+qe(o.value.length)+" / "+qe(t.characterMasters.length),1)]),p(Jq,{"fixed-header":"",height:"70vh",density:"compact"},{default:R(()=>[C("thead",null,[C("tr",null,[h[12]||(h[12]=C("th",{rowspan:"2"},"No.",-1)),h[13]||(h[13]=C("th",{rowspan:"2"},"",-1)),yt(C("th",tz,"",512),[[En,n.value]]),yt(C("th",nz,"",512),[[En,n.value]]),yt(C("th",rz,"",512),[[En,n.value]]),(we(!0),je(Ee,null,gr(t.accounts,m=>(we(),je("th",{key:m.id,colspan:"2",class:"text-center"},qe(m.name),1))),128))]),C("tr",null,[(we(!0),je(Ee,null,gr(t.accounts,m=>(we(),je(Ee,{key:m.id},[h[14]||(h[14]=C("th",{class:"text-center"},"1",-1)),h[15]||(h[15]=C("th",{class:"text-center"},"2",-1))],64))),128))])]),C("tbody",null,[t.dataLoaded?o.value.length===0?(we(),je("tr",oz,[C("td",{colspan:5+t.accounts.length*2},"",8,az)])):yi("",!0):(we(),je("tr",iz,[C("td",{colspan:5+t.accounts.length*2},"...",8,sz)])),(we(!0),je(Ee,null,gr(o.value,m=>(we(),je("tr",{key:m.id},[C("td",null,qe(m.indexNumber||""),1),C("td",null,qe(m.monsterName||""),1),yt(C("td",{class:ce("element-"+(m.element||"").toLowerCase())},qe(m.element||""),3),[[En,n.value]]),yt(C("td",null,qe(m.type||""),513),[[En,n.value]]),yt(C("td",null,qe(m.ejectionGacha||""),513),[[En,n.value]]),(we(!0),je(Ee,null,gr(t.accounts,g=>(we(),je(Ee,{key:g.id},[C("td",{class:ce(u(m.id,g.id,1)),innerHTML:l(m.id,g.id,0)},null,10,lz),C("td",{class:ce(u(m.id,g.id,2)),innerHTML:l(m.id,g.id,1)},null,10,uz)],64))),128))]))),128))])]),_:1})])}}},sa={__name:"CharacterSelector",props:{modelValue:{type:[String,null],required:!0},items:{type:Array,required:!0},itemTitle:{type:[String,Function],default:"monsterName"},disabledItems:{type:Array,default:()=>[]},label:{type:String,default:""},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:"mdi-magnify"},listHeight:{type:[String,Number],default:"300px"},listCardVariant:{type:String,default:"outlined"},noDataText:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=te(""),s=x(()=>{if(!i.value)return n.items;const l=i.value.toLowerCase();return n.items.filter(u=>o(u).toLowerCase().includes(l))}),o=l=>typeof n.itemTitle=="function"?n.itemTitle(l):l[n.itemTitle]||"",a=l=>{const u=l.length>0?l[0]:null;n.modelValue!==u&&r("update:modelValue",u)};return(l,u)=>(we(),je(Ee,null,[p(Wn,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=c=>i.value=c),label:t.label,variant:t.variant,clearable:t.clearable,"prepend-inner-icon":t.prependInnerIcon,disabled:t.disabled,"hide-details":"",class:"mb-2"},null,8,["modelValue","label","variant","clearable","prepend-inner-icon","disabled"]),p(Zi,{variant:t.listCardVariant,height:t.listHeight,disabled:t.disabled},{default:R(()=>[p(uf,{"model-value":[t.modelValue],"onUpdate:selected":a,style:{"overflow-y":"auto",height:"100%"}},{default:R(()=>[s.value.length===0?(we(),$t(_i,{key:0},{default:R(()=>[p(mi,{class:"text-center text-grey"},{default:R(()=>[Qe(qe(t.noDataText),1)]),_:1})]),_:1})):yi("",!0),(we(!0),je(Ee,null,gr(s.value,c=>(we(),$t(_i,{key:c.id,value:c.id,disabled:t.disabledItems.includes(c.id)},mS({default:R(()=>[P1(l.$slots,"item",{item:c},()=>[p(mi,null,{default:R(()=>[Qe(qe(o(c)),1)]),_:2},1024),c.subtitle?(we(),$t(py,{key:0},{default:R(()=>[Qe(qe(c.subtitle),1)]),_:2},1024)):yi("",!0)])]),_:2},[t.disabledItems.includes(c.id)?{name:"append",fn:R(()=>[p(YA,{size:"x-small",color:"warning",variant:"tonal"},{default:R(()=>u[1]||(u[1]=[Qe("",-1)])),_:1,__:[1]})]),key:"0"}:void 0]),1032,["value","disabled"]))),128))]),_:3},8,["model-value"])]),_:3},8,["variant","height","disabled"])],64))}},dz=G({...Pe(),...Kj()},"VForm"),ff=me()({name:"VForm",props:dz(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Yj(t),s=te();function o(l){l.preventDefault(),i.reset()}function a(l){const u=l,c=i.validate();u.then=c.then.bind(c),u.catch=c.catch.bind(c),u.finally=c.finally.bind(c),r("submit",u),u.defaultPrevented||c.then(d=>{var f;let{valid:h}=d;h&&((f=s.value)==null||f.submit())}),u.preventDefault()}return be(()=>{var l;return C("form",{ref:s,class:ce(["v-form",t.class]),style:xe(t.style),novalidate:!0,onReset:o,onSubmit:a},[(l=n.default)==null?void 0:l.call(n,i)])}),za(i,s)}}),hz={__name:"AddOwnedCharacterTab",props:{characterMasters:{type:Array,required:!0},characterMastersMap:{type:Map,required:!0},selectedAccountId:{type:String,default:null},ownedCountMap:{type:Map,required:!0}},emits:["character-added"],setup(t,{emit:e}){const n=t,r=e,i=te(null),s=te(!1),o=x(()=>n.selectedAccountId?n.characterMasters.filter(c=>a(c.id)<2):[]);Ie(()=>n.selectedAccountId,()=>{i.value=null});const a=c=>n.selectedAccountId&&n.ownedCountMap.get(`${c}-${n.selectedAccountId}`)||0,l=c=>{const d=a(c.id);return`[${c.indexNumber||"?"}] ${c.monsterName} | : ${d} / 2`},u=async()=>{if(!i.value||!n.selectedAccountId)return alert("");if(a(i.value)>=2)return alert("2");s.value=!0;try{const c=n.characterMastersMap.get(i.value);if(!c)throw new Error("");const d={characterMasterId:i.value,monsterName:c.monsterName,items:[],createdAt:Gn.firestore.FieldValue.serverTimestamp()},h=await ms.addOwnedCharacter(n.selectedAccountId,d),f={...d,id:h.id,createdAt:{toDate:()=>new Date}};r("character-added",{accountId:n.selectedAccountId,newCharacter:f}),alert(`${c.monsterName}`),i.value=null}catch(c){console.error(":",c),alert(": "+c.message)}finally{s.value=!1}};return(c,d)=>(we(),je("div",null,[d[1]||(d[1]=C("h2",null,"",-1)),p(ff,{onSubmit:sv(u,["prevent"])},{default:R(()=>[p(ps,{class:"pa-0"},{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12"},{default:R(()=>[p(sa,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=h=>i.value=h),items:o.value,"item-title":l,label:"","list-height":"400px","no-data-text":""},null,8,["modelValue","items"])]),_:1})]),_:1}),p(Bn,null,{default:R(()=>[p(Ye,{cols:"12"},{default:R(()=>[p(cn,{loading:s.value,disabled:!i.value||s.value,onClick:u,color:"primary",size:"large",block:""},{default:R(()=>[Qe(qe(s.value?"...":""),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},hx=(t,e,n,r,i,s=null)=>{if(!t)return"";const o=n.get(t.characterMasterId),a=o?o.monsterName:"",l=t.accountId||s;if(!l)return`${a} ()`;const c=(r.get(l)||[]).filter(h=>h.characterMasterId===t.characterMasterId).findIndex(h=>h.id===t.id);let d=`${a} (${c>=0?c+1:""})`;{const h=(t.items||[]).map(f=>i.get(Number(f))).filter(Boolean).join("");h&&(d+=`[${h}]`)}return d},fz=Xh("v-alert-title"),mz=G({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function gz(t,e){return{iconSize:x(()=>{const r=new Map(t.iconSizes),i=t.iconSize??e()??"default";return r.has(i)?r.get(i):i})}}const vz=["success","info","warning","error"],pz=G({border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:He,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>vz.includes(t)},...Pe(),...Zn(),...cr(),...Mi(),...mz(),...rf(),...hy(),...Xn(),...st(),...Et(),...Oi({variant:"flat"})},"VAlert"),yz=me()({name:"VAlert",props:pz(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=_t(t,"modelValue"),s=V(()=>{if(t.icon!==!1)return t.type?t.icon??`$${t.type}`:t.icon}),{iconSize:o}=gz(t,()=>t.prominent?44:void 0),{themeClasses:a}=Bt(t),{colorClasses:l,colorStyles:u,variantClasses:c}=qa(()=>({color:t.color??t.type,variant:t.variant})),{densityClasses:d}=hr(t),{dimensionStyles:h}=dr(t),{elevationClasses:f}=Vi(t),{locationStyles:m}=sf(t),{positionClasses:g}=fy(t),{roundedClasses:v}=Jn(t),{textColorClasses:y,textColorStyles:w}=Sr(()=>t.borderColor),{t:_}=sc(),b=V(()=>({"aria-label":_(t.closeLabel),onClick(T){i.value=!1,n("click:close",T)}}));return()=>{const T=!!(r.prepend||s.value),E=!!(r.title||t.title),A=!!(r.close||t.closable),D={density:t.density,icon:s.value,size:t.iconSize||t.prominent?o.value:void 0};return i.value&&p(t.tag,{class:ce(["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},a.value,l.value,d.value,f.value,g.value,v.value,c.value,t.class]),style:xe([u.value,h.value,m.value,t.style]),role:"alert"},{default:()=>{var P,U;return[ja(!1,"v-alert"),t.border&&C("div",{key:"border",class:ce(["v-alert__border",y.value]),style:xe(w.value)},null),T&&C("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?p(mt,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{...D}}},r.prepend):p(Pt,Se({key:"prepend-icon"},D),null)]),C("div",{class:"v-alert__content"},[E&&p(fz,{key:"title"},{default:()=>{var z;return[((z=r.title)==null?void 0:z.call(r))??t.title]}}),((P=r.text)==null?void 0:P.call(r))??t.text,(U=r.default)==null?void 0:U.call(r)]),r.append&&C("div",{key:"append",class:"v-alert__append"},[r.append()]),A&&C("div",{key:"close",class:"v-alert__close"},[r.close?p(mt,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var z;return[(z=r.close)==null?void 0:z.call(r,{props:b.value})]}}):p(cn,Se({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},b.value),null)])]}})}}}),wz={key:0},bz={key:1},Iz={__name:"ManageItemsTab",props:{selectedAccountId:{type:String,default:null},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["items-updated","items-moved"],setup(t,{emit:e}){const n=t,r=e,i=wt({selectedOwnedId:null,items:[]}),s=wt({from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]}),o=te(!1),a=te(!1),l=x(()=>!n.selectedAccountId||!n.ownedCharactersData.has(n.selectedAccountId)?[]:(n.ownedCharactersData.get(n.selectedAccountId)||[]).map(g=>{const v=n.characterMastersMap.get(g.characterMasterId);return{...g,id:g.id,indexNumber:(v==null?void 0:v.indexNumber)||999999,monsterName:(v==null?void 0:v.monsterName)||""}}).sort((g,v)=>g.indexNumber-v.indexNumber)),u=x(()=>{if(!s.from.selectedId)return[];const m=l.value.find(g=>g.id===s.from.selectedId);return!m||!m.items?[]:m.items.map(g=>({id:Number(g),name:n.itemMastersMap.get(Number(g))||`(ID:${g})`}))});Ie(()=>n.selectedAccountId,()=>{Object.assign(i,{selectedOwnedId:null,items:[]}),Object.assign(s,{from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]})}),Ie(()=>i.selectedOwnedId,m=>{var v;if(!m){i.items=[];return}const g=l.value.find(y=>y.id===m);i.items=((v=g==null?void 0:g.items)==null?void 0:v.map(Number))||[]}),Ie(()=>s.from.selectedId,()=>{s.selectedItemIds=[]});const d=async()=>{if(i.selectedOwnedId){if(i.items.length>3)return alert("3");o.value=!0;try{await ms.updateCharacterItems(n.selectedAccountId,i.selectedOwnedId,i.items),r("items-updated",{accountId:n.selectedAccountId,ownedCharacterId:i.selectedOwnedId,items:i.items}),alert("")}catch(m){alert(": "+m.message)}finally{o.value=!1}}},h=async()=>{var m;a.value=!0;try{const g=s.from.selectedId,v=s.to.selectedId,y=s.selectedItemIds;if(g===v||!g||!v)throw new Error("");if(y.length===0)throw new Error("");const w=l.value.find(E=>E.id===g),_=l.value.find(E=>E.id===v);if(!w||!_)throw new Error("");if((((m=_.items)==null?void 0:m.length)||0)+y.length>3)throw new Error("");const b=(w.items||[]).map(Number).filter(E=>!y.includes(E)),T=[...(_.items||[]).map(Number),...y];await ms.moveCharacterItems(n.selectedAccountId,{id:g,items:b},{id:v,items:T}),r("items-moved",{accountId:n.selectedAccountId,from:{id:g,items:b},to:{id:v,items:T}}),alert(""),s.from.selectedId=null,s.to.selectedId=null,s.selectedItemIds=[]}catch(g){alert(`: ${g.message}`)}finally{a.value=!1}},f=(m,g)=>hx(m,g,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,n.selectedAccountId);return(m,g)=>(we(),je("div",null,[g[13]||(g[13]=C("h2",null,"",-1)),p(ff,null,{default:R(()=>[p(Zi,{variant:"outlined",class:"mb-5"},{default:R(()=>[p(Ea,null,{default:R(()=>g[5]||(g[5]=[Qe("",-1)])),_:1,__:[5]}),p(ro,null,{default:R(()=>[p(ps,null,{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(sa,{modelValue:i.selectedOwnedId,"onUpdate:modelValue":g[0]||(g[0]=v=>i.selectedOwnedId=v),items:l.value,label:"","list-height":"300px"},{item:R(({item:v})=>[p(mi,null,{default:R(()=>[Qe(qe(f(v,!0)),1)]),_:2},1024)]),_:1},8,["modelValue","items"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(On,{modelValue:i.items,"onUpdate:modelValue":g[1]||(g[1]=v=>i.items=v),items:t.itemMasters,"item-title":"name","item-value":"id",label:" (3)",multiple:"",chips:"",clearable:"",variant:"outlined",disabled:!i.selectedOwnedId},null,8,["modelValue","items","disabled"]),p(cn,{loading:o.value,disabled:!i.selectedOwnedId||o.value||i.items.length>3,onClick:d,color:"primary",block:"",size:"large"},{default:R(()=>g[6]||(g[6]=[Qe("  ",-1)])),_:1,__:[6]},8,["loading","disabled"]),i.items.length>3?(we(),$t(yz,{key:0,type:"error",dense:"",class:"mt-2"},{default:R(()=>g[7]||(g[7]=[Qe("3",-1)])),_:1,__:[7]})):yi("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p(Zi,{variant:"outlined"},{default:R(()=>[p(Ea,null,{default:R(()=>g[8]||(g[8]=[Qe("",-1)])),_:1,__:[8]}),p(ro,null,{default:R(()=>[p(ps,null,{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(sa,{modelValue:s.from.selectedId,"onUpdate:modelValue":g[2]||(g[2]=v=>s.from.selectedId=v),items:l.value,label:"","list-height":"250px","disabled-items":[s.to.selectedId].filter(Boolean)},{item:R(({item:v})=>[p(mi,null,{default:R(()=>[Qe(qe(f(v,!0)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[g[11]||(g[11]=C("p",{class:"font-weight-bold mb-2"},":",-1)),p(Zi,{variant:"outlined",style:{height:"318px","overflow-y":"auto"}},{default:R(()=>[p(ro,null,{default:R(()=>[s.from.selectedId?u.value.length?yi("",!0):(we(),je("div",bz,g[10]||(g[10]=[C("small",null,"",-1)]))):(we(),je("div",wz,g[9]||(g[9]=[C("small",null,"",-1)]))),(we(!0),je(Ee,null,gr(u.value,v=>(we(),$t(tq,{key:v.id,modelValue:s.selectedItemIds,"onUpdate:modelValue":g[3]||(g[3]=y=>s.selectedItemIds=y),label:v.name,value:v.id,dense:"","hide-details":""},null,8,["modelValue","label","value"]))),128))]),_:1})]),_:1})]),_:1,__:[11]}),p(Ye,{cols:"12",md:"4"},{default:R(()=>[p(sa,{modelValue:s.to.selectedId,"onUpdate:modelValue":g[4]||(g[4]=v=>s.to.selectedId=v),items:l.value,label:"","list-height":"250px","disabled-items":[s.from.selectedId].filter(Boolean)},{item:R(({item:v})=>[p(mi,null,{default:R(()=>[Qe(qe(f(v,!0)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1})]),_:1}),p(Bn,null,{default:R(()=>[p(Ye,null,{default:R(()=>[p(cn,{loading:a.value,disabled:!s.from.selectedId||!s.to.selectedId||s.selectedItemIds.length===0||a.value,onClick:h,color:"secondary",block:"",size:"large"},{default:R(()=>g[12]||(g[12]=[Qe("  ",-1)])),_:1,__:[12]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},_z={key:1,class:"text-center pa-4"},Sz={key:2,class:"text-center pa-4"},Tz={class:"d-flex align-center w-100"},Ez={class:"flex-grow-1"},Cz={class:"border rounded pa-1",style:{"font-size":"0.7rem","line-height":"1.2"}},kz=["title"],Az=["title"],xz=["title"],Dz={__name:"TeamList",props:{dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},selectedTeamId:{type:String,default:null}},emits:["select-team","delete-team"],setup(t,{emit:e}){const n=t,r=e,i=["","","","",""],s=wt({type:""}),o=x(()=>s.type?n.teams.filter(c=>c.type===s.type):n.teams),a=(c,d)=>{const h={characterName:"",accountName:"",items:[]};if(!c.characters||!n.dataLoaded||d>=c.characters.length)return h;const f=c.characters[d],m=n.accounts.find(y=>y.id===f.accountId),g=(n.ownedCharactersData.get(f.accountId)||[]).find(y=>y.id===f.ownedCharacterId);if(!g)return{characterName:"",accountName:(m==null?void 0:m.name)||"",items:[]};const v=n.characterMastersMap.get(g.characterMasterId);return{characterName:(v==null?void 0:v.monsterName)||"",accountName:(m==null?void 0:m.name)||"",items:(g.items||[]).map(y=>n.itemMastersMap.get(Number(y))||`ID:${y}`).filter(Boolean)}},l=c=>{r("select-team",c)},u=c=>{r("delete-team",c)};return(c,d)=>(we(),$t(Zi,{variant:"outlined"},{default:R(()=>[p(Ea,null,{default:R(()=>d[1]||(d[1]=[Qe("",-1)])),_:1,__:[1]}),p(ro,null,{default:R(()=>[p(On,{modelValue:s.type,"onUpdate:modelValue":d[0]||(d[0]=h=>s.type=h),items:["",...i],label:"",variant:"outlined",clearable:"",density:"compact"},null,8,["modelValue","items"]),p(uf,{lines:"three","select-strategy":"single-independent",style:{height:"70vh","overflow-y":"auto"},class:"border rounded"},{default:R(()=>[o.value.length>0?(we(),$t(yy,{key:0},{default:R(()=>[Qe(qe(o.value.length)+"",1)]),_:1})):yi("",!0),t.dataLoaded?o.value.length===0?(we(),je("div",Sz,"")):yi("",!0):(we(),je("div",_z,"...")),(we(!0),je(Ee,null,gr(o.value,h=>(we(),$t(_i,{key:h.id,onClick:f=>l(h),active:t.selectedTeamId===h.id,class:"mb-2 border rounded"},{default:R(()=>[C("div",Tz,[C("div",Ez,[p(mi,{class:"font-weight-bold"},{default:R(()=>[Qe(qe(h.name),1)]),_:2},1024),p(py,null,{default:R(()=>[Qe(qe(h.type),1)]),_:2},1024)]),p(cn,{icon:"mdi-delete",variant:"text",size:"small",color:"grey",onClick:sv(f=>u(h.id),["stop"])},null,8,["onClick"])]),p(Bn,{dense:"",class:"mt-2 text-caption"},{default:R(()=>[(we(!0),je(Ee,null,gr(Array(4),(f,m)=>(we(),$t(Ye,{key:m,cols:"3"},{default:R(()=>[C("div",Cz,[C("div",{class:"font-weight-bold text-truncate",title:a(h,m).characterName},qe(a(h,m).characterName),9,kz),C("div",{class:"text-truncate",title:a(h,m).accountName},qe(a(h,m).accountName),9,Az),p(oc,{class:"my-1"}),(we(),je(Ee,null,gr(4,g=>C("div",{key:g,class:"text-truncate",title:a(h,m).items[g-1]},qe(a(h,m).items[g-1]||""),9,xz)),64))])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_:1})]),_:1}))}},Pz={__name:"TeamForm",props:{team:{type:Object,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},isSaving:{type:Boolean,default:!1}},emits:["save-team","reset-form","update:team"],setup(t,{emit:e}){const n=t,r=e,i=(h,f)=>{const m=JSON.parse(JSON.stringify(n.team));m[h]=f,r("update:team",m)},s=(h,f,m)=>{const g={...n.team,slots:n.team.slots.map((v,y)=>y===h?{...v,[f]:m}:v)};f==="selectedAccountId"&&(g.slots[h].selectedOwnedId=null),r("update:team",g)},o=["","","","",""],a=x(()=>n.team.name&&n.team.type&&n.team.slots.every(h=>h.selectedAccountId&&h.selectedOwnedId)),l=h=>h.selectedAccountId?(n.ownedCharactersData.get(h.selectedAccountId)||[]).map(m=>{const g=n.characterMastersMap.get(m.characterMasterId);return{...m,accountId:h.selectedAccountId,indexNumber:(g==null?void 0:g.indexNumber)||999999,monsterName:(g==null?void 0:g.monsterName)||""}}).sort((m,g)=>m.indexNumber-g.indexNumber):[],u=h=>n.team.slots.filter((f,m)=>m!==h&&f.selectedOwnedId).map(f=>f.selectedOwnedId),c=(h,f)=>hx(h,f,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,h.accountId),d=(h,f)=>{s(h,"selectedOwnedId",f)};return(h,f)=>(we(),$t(Zi,{variant:"outlined"},{default:R(()=>[p(Ea,null,{default:R(()=>[Qe(qe(t.team.id?"":""),1)]),_:1}),p(JA,null,{default:R(()=>[p(cn,{onClick:f[0]||(f[0]=m=>h.$emit("reset-form")),size:"small",variant:"tonal",class:"mt-2"},{default:R(()=>f[4]||(f[4]=[Qe("",-1)])),_:1,__:[4]})]),_:1}),t.accounts.length>0&&t.ownedCharactersData.size>0&&t.characterMastersMap.size>0?(we(),je(Ee,{key:0},[p(ro,null,{default:R(()=>[p(Wn,{"model-value":t.team.name,"onUpdate:modelValue":f[1]||(f[1]=m=>i("name",m)),label:"",variant:"outlined",placeholder:":  1"},null,8,["model-value"]),p(On,{"model-value":t.team.type,"onUpdate:modelValue":f[2]||(f[2]=m=>i("type",m)),items:o,label:"",variant:"outlined"},null,8,["model-value"]),f[5]||(f[5]=C("h4",{class:"mt-4 mb-2"}," (4)",-1)),p(Bn,null,{default:R(()=>[(we(!0),je(Ee,null,gr(t.team.slots,(m,g)=>(we(),$t(Ye,{key:g,cols:"12",md:"6"},{default:R(()=>[p(Zi,{variant:"tonal",class:"pa-2"},{default:R(()=>[C("h5",null," "+qe(g+1),1),p(On,{"model-value":m.selectedAccountId,"onUpdate:modelValue":v=>s(g,"selectedAccountId",v),items:t.accounts,"item-title":"name","item-value":"id",label:"",variant:"outlined",density:"compact",class:"mb-2"},null,8,["model-value","onUpdate:modelValue","items"]),p(sa,{"model-value":m.selectedOwnedId,"onUpdate:modelValue":v=>d(g,v),items:l(m),label:"","list-height":"150px",variant:"filled",disabled:!m.selectedAccountId,"disabled-items":u(g),"no-data-text":""},{item:R(({item:v})=>[p(mi,null,{default:R(()=>[Qe(qe(c(v,!0)),1)]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue","items","disabled","disabled-items"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[5]}),p(df,null,{default:R(()=>[p(hf),p(cn,{loading:t.isSaving,disabled:!a.value||t.isSaving,onClick:f[3]||(f[3]=m=>h.$emit("save-team")),color:"primary",size:"large"},{default:R(()=>[Qe(qe(t.isSaving?"...":t.team.id?"":""),1)]),_:1},8,["loading","disabled"])]),_:1})],64)):yi("",!0)]),_:1}))}},Nz={__name:"ManageTeamsTab",props:{userId:{type:String,required:!0},dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["team-added","team-updated","team-deleted"],setup(t,{emit:e}){const n=t,r=e,i=te(!1),s=()=>({id:null,name:"",type:"",slots:Array(4).fill().map(()=>({selectedAccountId:"",selectedOwnedId:"",characterSearch:""}))}),o=wt(s()),a=h=>{Object.assign(o,h)},l=h=>{Object.assign(o,{id:h.id,name:h.name,type:h.type,slots:JSON.parse(JSON.stringify(h.characters.map(f=>({selectedAccountId:f.accountId,selectedOwnedId:f.ownedCharacterId,characterSearch:""}))))})},u=()=>{Object.assign(o,s())},c=async()=>{if(!(o.name&&o.type&&o.slots.every(f=>f.selectedAccountId&&f.selectedOwnedId))){alert("4");return}i.value=!0;const h={userId:n.userId,name:o.name,type:o.type,characters:o.slots.map(f=>({accountId:f.selectedAccountId,ownedCharacterId:f.selectedOwnedId}))};try{const f=o.id;Object.assign(h,f?{updatedAt:Gn.firestore.FieldValue.serverTimestamp()}:{createdAt:Gn.firestore.FieldValue.serverTimestamp()});const m=await ms.saveTeam(f,h);if(f)r("team-updated",{...h,id:f}),alert("");else{const g={...h,id:m.id,createdAt:{toDate:()=>new Date}};r("team-added",g),alert(""),u()}}catch(f){console.error(":",f),alert(": "+f.message)}finally{i.value=!1}},d=async h=>{if(confirm(""))try{await ms.deleteTeam(h),r("team-deleted",h),alert(""),o.id===h&&u()}catch(f){console.error(":",f),alert(": "+f.message)}};return(h,f)=>(we(),je("div",null,[f[0]||(f[0]=C("h2",null,"",-1)),p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Dz,{"data-loaded":t.dataLoaded,teams:t.teams,accounts:t.accounts,"owned-characters-data":t.ownedCharactersData,"character-masters-map":t.characterMastersMap,"item-masters-map":t.itemMastersMap,"selected-team-id":o.id,onSelectTeam:l,onDeleteTeam:d},null,8,["data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map","selected-team-id"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Pz,{team:o,accounts:t.accounts,"owned-characters-data":t.ownedCharactersData,"character-masters-map":t.characterMastersMap,"item-masters-map":t.itemMastersMap,"is-saving":i.value,onSaveTeam:c,onResetForm:u,"onUpdate:team":a},null,8,["team","accounts","owned-characters-data","character-masters-map","item-masters-map","is-saving"])]),_:1})]),_:1})]))}},Rz={__name:"AddMasterCharacterTab",props:{gachaMasters:{type:Array,required:!0}},emits:["master-added"],setup(t,{emit:e}){const n=e,r=wt({no:"",name:"",element:"",type:"",gacha:""}),i=te(!1),s=async()=>{if(!r.name)return alert("");i.value=!0;try{const o={indexNumber:r.no?Number(r.no):0,monsterName:r.name,element:r.element||"",type:r.type||"",ejectionGacha:r.gacha||""};await ms.addCharacterMaster(o),alert(""),n("master-added")}catch(o){alert(": "+o.message)}finally{i.value=!1}};return(o,a)=>(we(),je("div",null,[a[5]||(a[5]=C("h2",null,"",-1)),p(ff,{onSubmit:sv(s,["prevent"])},{default:R(()=>[p(ps,null,{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:r.no,"onUpdate:modelValue":a[0]||(a[0]=l=>r.no=l),modelModifiers:{number:!0},label:"",type:"number",placeholder:": 1234",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:r.name,"onUpdate:modelValue":a[1]||(a[1]=l=>r.name=l),modelModifiers:{trim:!0},label:"",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:r.element,"onUpdate:modelValue":a[2]||(a[2]=l=>r.element=l),modelModifiers:{trim:!0},label:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:r.type,"onUpdate:modelValue":a[3]||(a[3]=l=>r.type=l),modelModifiers:{trim:!0},label:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12"},{default:R(()=>[p(On,{modelValue:r.gacha,"onUpdate:modelValue":a[4]||(a[4]=l=>r.gacha=l),items:t.gachaMasters,"item-title":"name","item-value":"name",label:" ()",placeholder:"(/)",clearable:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1})]),_:1}),p(Bn,null,{default:R(()=>[p(Ye,{cols:"12"},{default:R(()=>[p(cn,{loading:i.value,disabled:!r.name||i.value,onClick:s,color:"primary",size:"large",block:""},{default:R(()=>[Qe(qe(i.value?"...":""),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},Oz={__name:"EditMasterCharacterTab",props:{characterMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0}},emits:["master-updated"],setup(t,{emit:e}){const n=t,r=e,i=wt({search:"",selectedMasterId:null,no:"",name:"",element:"",type:"",gacha:""}),s=te(!1),o=x(()=>new Map(n.characterMasters.map(l=>[l.id,l])));Ie(()=>i.selectedMasterId,l=>{if(!l){Object.assign(i,{name:"",no:"",element:"",type:"",gacha:""});return}const u=o.value.get(l);u&&Object.assign(i,{name:u.monsterName,no:u.indexNumber,element:u.element,type:u.type,gacha:u.ejectionGacha})});const a=async()=>{if(!i.selectedMasterId||!i.name)return alert("");s.value=!0;try{const l={monsterName:i.name,indexNumber:i.no?Number(i.no):0,element:i.element,type:i.type,ejectionGacha:i.gacha};await ms.updateCharacterMaster(i.selectedMasterId,l),alert(""),r("master-updated")}catch(l){alert(": "+l.message)}finally{s.value=!1}};return(l,u)=>(we(),je("div",null,[u[8]||(u[8]=C("h2",null,"",-1)),p(ff,null,{default:R(()=>[p(ps,{class:"pa-0"},{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12"},{default:R(()=>[p(sa,{modelValue:i.selectedMasterId,"onUpdate:modelValue":u[0]||(u[0]=c=>i.selectedMasterId=c),items:n.characterMasters,"item-title":c=>`[${c.indexNumber||"?"}] ${c.monsterName}`,label:"","list-height":"300px"},null,8,["modelValue","items","item-title"])]),_:1})]),_:1}),i.selectedMasterId?(we(),$t(Bn,{key:0},{default:R(()=>[p(Ye,{cols:"12"},{default:R(()=>[p(Zi,{variant:"outlined"},{default:R(()=>[p(Ea,null,{default:R(()=>u[6]||(u[6]=[Qe("",-1)])),_:1,__:[6]}),p(ro,null,{default:R(()=>[p(ps,null,{default:R(()=>[p(Bn,null,{default:R(()=>[p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:i.no,"onUpdate:modelValue":u[1]||(u[1]=c=>i.no=c),modelModifiers:{number:!0},label:"",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:i.name,"onUpdate:modelValue":u[2]||(u[2]=c=>i.name=c),modelModifiers:{trim:!0},label:"",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:i.element,"onUpdate:modelValue":u[3]||(u[3]=c=>i.element=c),modelModifiers:{trim:!0},label:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12",md:"6"},{default:R(()=>[p(Wn,{modelValue:i.type,"onUpdate:modelValue":u[4]||(u[4]=c=>i.type=c),modelModifiers:{trim:!0},label:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),p(Ye,{cols:"12"},{default:R(()=>[p(On,{modelValue:i.gacha,"onUpdate:modelValue":u[5]||(u[5]=c=>i.gacha=c),items:t.gachaMasters,"item-title":"name","item-value":"name",label:" ()",placeholder:"(/)",clearable:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),p(df,null,{default:R(()=>[p(hf),p(cn,{loading:s.value,disabled:!i.selectedMasterId||s.value,onClick:a,color:"primary",size:"large",class:"ma-2"},{default:R(()=>u[7]||(u[7]=[Qe("  ",-1)])),_:1,__:[7]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):yi("",!0)]),_:1})]),_:1})]))}},qd=Symbol.for("vuetify:layout"),fx=Symbol.for("vuetify:layout-item"),g_=1e3,Mz=G({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Vz=G({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Lz(){const t=et(qd);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function Fz(t){const e=et(qd);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${Ei()}`,r=Mt("useLayoutItem");Kt(fx,{id:n});const i=ge(!1);Xg(()=>i.value=!0),uS(()=>i.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=e.register(r,{...t,active:x(()=>i.value?!1:t.active.value),id:n});return Qn(()=>e.unregister(n)),{layoutItemStyles:s,layoutRect:e.layoutRect,layoutItemScrimStyles:o}}const Bz=(t,e,n,r)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const o of t){const a=e.get(o),l=n.get(o),u=r.get(o);if(!a||!l||!u)continue;const c={...i,[a.value]:parseInt(i[a.value],10)+(u.value?parseInt(l.value,10):0)};s.push({id:o,layer:c}),i=c}return s};function $z(t){const e=et(qd,null),n=x(()=>e?e.rootZIndex.value-100:g_),r=te([]),i=wt(new Map),s=wt(new Map),o=wt(new Map),a=wt(new Map),l=wt(new Map),{resizeRef:u,contentRect:c}=Ta(),d=x(()=>{const E=new Map,A=t.overlaps??[];for(const D of A.filter(P=>P.includes(":"))){const[P,U]=D.split(":");if(!r.value.includes(P)||!r.value.includes(U))continue;const z=i.get(P),k=i.get(U),O=s.get(P),j=s.get(U);!z||!k||!O||!j||(E.set(U,{position:z.value,amount:parseInt(O.value,10)}),E.set(P,{position:k.value,amount:-parseInt(j.value,10)}))}return E}),h=x(()=>{const E=[...new Set([...o.values()].map(D=>D.value))].sort((D,P)=>D-P),A=[];for(const D of E){const P=r.value.filter(U=>{var z;return((z=o.get(U))==null?void 0:z.value)===D});A.push(...P)}return Bz(A,i,s,a)}),f=x(()=>!Array.from(l.values()).some(E=>E.value)),m=x(()=>h.value[h.value.length-1].layer),g=V(()=>({"--v-layout-left":Ae(m.value.left),"--v-layout-right":Ae(m.value.right),"--v-layout-top":Ae(m.value.top),"--v-layout-bottom":Ae(m.value.bottom),...f.value?void 0:{transition:"none"}})),v=x(()=>h.value.slice(1).map((E,A)=>{let{id:D}=E;const{layer:P}=h.value[A],U=s.get(D),z=i.get(D);return{id:D,...P,size:Number(U.value),position:z.value}})),y=E=>v.value.find(A=>A.id===E),w=Mt("createLayout"),_=ge(!1);ki(()=>{_.value=!0}),Kt(qd,{register:(E,A)=>{let{id:D,order:P,position:U,layoutSize:z,elementSize:k,active:O,disableTransitions:j,absolute:J}=A;o.set(D,P),i.set(D,U),s.set(D,z),a.set(D,O),j&&l.set(D,j);const fe=qo(fx,w==null?void 0:w.vnode).indexOf(E);fe>-1?r.value.splice(fe,0,D):r.value.push(D);const de=x(()=>v.value.findIndex($=>$.id===D)),Fe=x(()=>n.value+h.value.length*2-de.value*2),L=x(()=>{const $=U.value==="left"||U.value==="right",le=U.value==="right",Ue=U.value==="bottom",ie=k.value??z.value,Be=ie===0?"%":"px",ve={[U.value]:0,zIndex:Fe.value,transform:`translate${$?"X":"Y"}(${(O.value?0:-(ie===0?100:ie))*(le||Ue?-1:1)}${Be})`,position:J.value||n.value!==g_?"absolute":"fixed",...f.value?void 0:{transition:"none"}};if(!_.value)return ve;const Me=v.value[de.value],$e=d.value.get(D);return $e&&(Me[$e.position]+=$e.amount),{...ve,height:$?`calc(100% - ${Me.top}px - ${Me.bottom}px)`:k.value?`${k.value}px`:void 0,left:le?void 0:`${Me.left}px`,right:le?`${Me.right}px`:void 0,top:U.value!=="bottom"?`${Me.top}px`:void 0,bottom:U.value!=="top"?`${Me.bottom}px`:void 0,width:$?k.value?`${k.value}px`:void 0:`calc(100% - ${Me.left}px - ${Me.right}px)`}}),F=x(()=>({zIndex:Fe.value-1}));return{layoutItemStyles:L,layoutItemScrimStyles:F,zIndex:Fe}},unregister:E=>{o.delete(E),i.delete(E),s.delete(E),a.delete(E),l.delete(E),r.value=r.value.filter(A=>A!==E)},mainRect:m,mainStyles:g,getLayoutItem:y,items:v,layoutRect:c,rootZIndex:n});const b=V(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),T=V(()=>({zIndex:e?n.value:void 0,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:b,layoutStyles:T,getLayoutItem:y,items:v,layoutRect:c,layoutRef:u}}const Uz=G({...Pe(),...Zr(Mz(),["fullHeight"]),...Et()},"VApp"),jz=me()({name:"VApp",props:Uz(),setup(t,e){let{slots:n}=e;const r=Bt(t),{layoutClasses:i,getLayoutItem:s,items:o,layoutRef:a}=$z({...t,fullHeight:!0}),{rtlClasses:l}=fr();return be(()=>{var u;return C("div",{ref:a,class:ce(["v-application",r.themeClasses.value,i.value,l.value,t.class]),style:xe([t.style])},[C("div",{class:"v-application__wrap"},[(u=n.default)==null?void 0:u.call(n)])])}),{getLayoutItem:s,items:o,theme:r}}}),qz=G({text:String,...Pe(),...st()},"VToolbarTitle"),mx=me()({name:"VToolbarTitle",props:qz(),setup(t,e){let{slots:n}=e;return be(()=>{const r=!!(n.default||n.text||t.text);return p(t.tag,{class:ce(["v-toolbar-title",t.class]),style:xe(t.style)},{default:()=>{var i;return[r&&C("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(i=n.default)==null?void 0:i.call(n)])]}})}),{}}}),zz=[null,"prominent","default","comfortable","compact"],gx=G({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>zz.includes(t)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ks(),...Pe(),...Mi(),...Xn(),...st({tag:"header"}),...Et()},"VToolbar"),v_=me()({name:"VToolbar",props:gx(),setup(t,e){var f;let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=ar(()=>t.color),{borderClasses:s}=As(t),{elevationClasses:o}=Vi(t),{roundedClasses:a}=Jn(t),{themeClasses:l}=Bt(t),{rtlClasses:u}=fr(),c=ge(t.extended===null?!!((f=n.extension)!=null&&f.call(n)):t.extended),d=x(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),h=x(()=>c.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return Ri({VBtn:{variant:"text"}}),be(()=>{var y;const m=!!(t.title||n.title),g=!!(n.image||t.image),v=(y=n.extension)==null?void 0:y.call(n);return c.value=t.extended===null?!!v:t.extended,p(t.tag,{class:ce(["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},r.value,s.value,o.value,a.value,l.value,u.value,t.class]),style:xe([i.value,t.style])},{default:()=>[g&&C("div",{key:"image",class:"v-toolbar__image"},[n.image?p(mt,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):p(Zh,{key:"image-img",cover:!0,src:t.image},null)]),p(mt,{defaults:{VTabs:{height:Ae(d.value)}}},{default:()=>{var w,_,b;return[C("div",{class:"v-toolbar__content",style:{height:Ae(d.value)}},[n.prepend&&C("div",{class:"v-toolbar__prepend"},[(w=n.prepend)==null?void 0:w.call(n)]),m&&p(mx,{key:"title",text:t.title},{text:n.title}),(_=n.default)==null?void 0:_.call(n),n.append&&C("div",{class:"v-toolbar__append"},[(b=n.append)==null?void 0:b.call(n)])])]}}),p(mt,{defaults:{VTabs:{height:Ae(h.value)}}},{default:()=>[p(my,null,{default:()=>[c.value&&C("div",{class:"v-toolbar__extension",style:{height:Ae(h.value)}},[v])]})]})]})}),{contentHeight:d,extensionHeight:h}}}),Hz=G({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Wz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=e;let r=0,i=0;const s=te(null),o=ge(0),a=ge(0),l=ge(0),u=ge(!1),c=ge(!1),d=x(()=>Number(t.scrollThreshold)),h=x(()=>or((d.value-o.value)/d.value||0)),f=()=>{const m=s.value;if(!m||n&&!n.value)return;r=o.value,o.value="window"in m?m.pageYOffset:m.scrollTop;const g=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;if(i!==g){i=g;return}c.value=o.value<r,l.value=Math.abs(o.value-d.value)};return Ie(c,()=>{a.value=a.value||o.value}),Ie(u,()=>{a.value=0}),ki(()=>{Ie(()=>t.scrollTarget,m=>{var v;const g=m?document.querySelector(m):window;g&&g!==s.value&&((v=s.value)==null||v.removeEventListener("scroll",f),s.value=g,s.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),Qn(()=>{var m;(m=s.value)==null||m.removeEventListener("scroll",f)}),n&&Ie(n,f,{immediate:!0}),{scrollThreshold:d,currentScroll:o,currentThreshold:l,isScrollActive:u,scrollRatio:h,isScrollingUp:c,savedScroll:a}}const Gz=G({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...gx(),...Vz(),...Hz(),height:{type:[Number,String],default:64}},"VAppBar"),Kz=me()({name:"VAppBar",props:Gz(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=te(),i=_t(t,"modelValue"),s=x(()=>{var _;const w=new Set(((_=t.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:w.has("hide"),fullyHide:w.has("fully-hide"),inverted:w.has("inverted"),collapse:w.has("collapse"),elevate:w.has("elevate"),fadeImage:w.has("fade-image")}}),o=x(()=>{const w=s.value;return w.hide||w.fullyHide||w.inverted||w.collapse||w.elevate||w.fadeImage||!i.value}),{currentScroll:a,scrollThreshold:l,isScrollingUp:u,scrollRatio:c}=Wz(t,{canScroll:o}),d=V(()=>s.value.hide||s.value.fullyHide),h=x(()=>t.collapse||s.value.collapse&&(s.value.inverted?c.value>0:c.value===0)),f=x(()=>t.flat||s.value.fullyHide&&!i.value||s.value.elevate&&(s.value.inverted?a.value>0:a.value===0)),m=x(()=>s.value.fadeImage?s.value.inverted?1-c.value:c.value:void 0),g=x(()=>{var b,T;if(s.value.hide&&s.value.inverted)return 0;const w=((b=r.value)==null?void 0:b.contentHeight)??0,_=((T=r.value)==null?void 0:T.extensionHeight)??0;return d.value?a.value<l.value||s.value.fullyHide?w+_:w:w+_});vs(()=>!!t.scrollBehavior,()=>{lr(()=>{d.value?s.value.inverted?i.value=a.value>l.value:i.value=u.value||a.value<l.value:i.value=!0})});const{ssrBootStyles:v}=lf(),{layoutItemStyles:y}=Fz({id:t.name,order:x(()=>parseInt(t.order,10)),position:V(()=>t.location),layoutSize:g,elementSize:ge(void 0),active:i,absolute:V(()=>t.absolute)});return be(()=>{const w=v_.filterProps(t);return p(v_,Se({ref:r,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"},t.class],style:[{...y.value,"--v-toolbar-image-opacity":m.value,height:void 0,...v.value},t.style]},w,{collapse:h.value,flat:f.value}),n)}),{}}}),Yz=G({scrollable:Boolean,...Pe(),...cr(),...st({tag:"main"})},"VMain"),Qz=me()({name:"VMain",props:Yz(),setup(t,e){let{slots:n}=e;const{dimensionStyles:r}=dr(t),{mainStyles:i}=Lz(),{ssrBootStyles:s}=lf();return be(()=>p(t.tag,{class:ce(["v-main",{"v-main--scrollable":t.scrollable},t.class]),style:xe([i.value,s.value,r.value,t.style])},{default:()=>{var o,a;return[t.scrollable?C("div",{class:"v-main__scroller"},[(o=n.default)==null?void 0:o.call(n)]):(a=n.default)==null?void 0:a.call(n)]}})),{}}}),Dy=Symbol.for("vuetify:v-tabs"),Xz=G({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Zr(cA({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),vx=me()({name:"VTab",props:Xz(),setup(t,e){let{slots:n,attrs:r}=e;const{textColorClasses:i,textColorStyles:s}=Sr(()=>t.sliderColor),o=te(),a=te(),l=x(()=>t.direction==="horizontal"),u=x(()=>{var d,h;return((h=(d=o.value)==null?void 0:d.group)==null?void 0:h.isSelected.value)??!1});function c(d){var f,m;let{value:h}=d;if(h){const g=(m=(f=o.value)==null?void 0:f.$el.parentElement)==null?void 0:m.querySelector(".v-tab--selected .v-tab__slider"),v=a.value;if(!g||!v)return;const y=getComputedStyle(g).color,w=g.getBoundingClientRect(),_=v.getBoundingClientRect(),b=l.value?"x":"y",T=l.value?"X":"Y",E=l.value?"right":"bottom",A=l.value?"width":"height",D=w[b],P=_[b],U=D>P?w[E]-_[E]:w[b]-_[b],z=Math.sign(U)>0?l.value?"right":"bottom":Math.sign(U)<0?l.value?"left":"top":"center",O=(Math.abs(U)+(Math.sign(U)<0?w[A]:_[A]))/Math.max(w[A],_[A])||0,j=w[A]/_[A]||0,J=1.5;Ys(v,{backgroundColor:[y,"currentcolor"],transform:[`translate${T}(${U}px) scale${T}(${j})`,`translate${T}(${U/J}px) scale${T}(${(O-1)/J+1})`,"none"],transformOrigin:Array(3).fill(z)},{duration:225,easing:vu})}}return be(()=>{const d=cn.filterProps(t);return p(cn,Se({symbol:Dy,ref:o,class:["v-tab",t.class],style:t.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},d,r,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":c}),{...n,default:()=>{var h;return C(Ee,null,[((h=n.default)==null?void 0:h.call(n))??t.text,!t.hideSlider&&C("div",{ref:a,class:ce(["v-tab__slider",i.value]),style:xe(s.value)},null)])}})}),za({},o)}}),Jz=t=>{const{touchstartX:e,touchendX:n,touchstartY:r,touchendY:i}=t,s=.5,o=16;t.offsetX=n-e,t.offsetY=i-r,Math.abs(t.offsetY)<s*Math.abs(t.offsetX)&&(t.left&&n<e-o&&t.left(t),t.right&&n>e+o&&t.right(t)),Math.abs(t.offsetX)<s*Math.abs(t.offsetY)&&(t.up&&i<r-o&&t.up(t),t.down&&i>r+o&&t.down(t))};function Zz(t,e){var r;const n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,(r=e.start)==null||r.call(e,{originalEvent:t,...e})}function e9(t,e){var r;const n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,(r=e.end)==null||r.call(e,{originalEvent:t,...e}),Jz(e)}function t9(t,e){var r;const n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,(r=e.move)==null||r.call(e,{originalEvent:t,...e})}function n9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:n=>Zz(n,e),touchend:n=>e9(n,e),touchmove:n=>t9(n,e)}}function r9(t,e){var a;const n=e.value,r=n!=null&&n.parent?t.parentElement:t,i=(n==null?void 0:n.options)??{passive:!0},s=(a=e.instance)==null?void 0:a.$.uid;if(!r||!s)return;const o=n9(e.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[s]=o,Ck(o).forEach(l=>{r.addEventListener(l,o[l],i)})}function i9(t,e){var s,o;const n=(s=e.value)!=null&&s.parent?t.parentElement:t,r=(o=e.instance)==null?void 0:o.$.uid;if(!(n!=null&&n._touchHandlers)||!r)return;const i=n._touchHandlers[r];Ck(i).forEach(a=>{n.removeEventListener(a,i[a])}),delete n._touchHandlers[r]}const Rg={mounted:r9,unmounted:i9},px=Symbol.for("vuetify:v-window"),yx=Symbol.for("vuetify:v-window-group"),wx=G({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Pe(),...st(),...Et()},"VWindow"),Og=me()({name:"VWindow",directives:{vTouch:Rg},props:wx(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Bt(t),{isRtl:i}=fr(),{t:s}=sc(),o=ic(t,yx),a=te(),l=x(()=>i.value?!t.reverse:t.reverse),u=ge(!1),c=x(()=>{const b=t.direction==="vertical"?"y":"x",E=(l.value?!u.value:u.value)?"-reverse":"";return`v-window-${b}${E}-transition`}),d=ge(0),h=te(void 0),f=x(()=>o.items.value.findIndex(b=>o.selected.value.includes(b.id)));Ie(f,(b,T)=>{const E=o.items.value.length,A=E-1;E<=2?u.value=b<T:b===A&&T===0?u.value=!0:b===0&&T===A?u.value=!1:u.value=b<T}),Kt(px,{transition:c,isReversed:u,transitionCount:d,transitionHeight:h,rootRef:a});const m=V(()=>t.continuous||f.value!==0),g=V(()=>t.continuous||f.value!==o.items.value.length-1);function v(){m.value&&o.prev()}function y(){g.value&&o.next()}const w=x(()=>{const b=[],T={icon:i.value?t.nextIcon:t.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:o.prev,"aria-label":s("$vuetify.carousel.prev")};b.push(m.value?n.prev?n.prev({props:T}):p(cn,T,null):C("div",null,null));const E={icon:i.value?t.prevIcon:t.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:o.next,"aria-label":s("$vuetify.carousel.next")};return b.push(g.value?n.next?n.next({props:E}):p(cn,E,null):C("div",null,null)),b}),_=x(()=>t.touch===!1?t.touch:{...{left:()=>{l.value?v():y()},right:()=>{l.value?y():v()},start:T=>{let{originalEvent:E}=T;E.stopPropagation()}},...t.touch===!0?{}:t.touch});return be(()=>yt(p(t.tag,{ref:a,class:ce(["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover","v-window--vertical-arrows":!!t.verticalArrows},r.value,t.class]),style:xe(t.style)},{default:()=>{var b,T;return[C("div",{class:"v-window__container",style:{height:h.value}},[(b=n.default)==null?void 0:b.call(n,{group:o}),t.showArrows!==!1&&C("div",{class:ce(["v-window__controls",{"v-window__controls--left":t.verticalArrows==="left"||t.verticalArrows===!0},{"v-window__controls--right":t.verticalArrows==="right"}])},[w.value])]),(T=n.additional)==null?void 0:T.call(n,{group:o})]}}),[[Rg,_.value]])),{group:o}}}),s9=G({...Zr(wx(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),o9=me()({name:"VTabsWindow",props:s9(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=et(Dy,null),i=_t(t,"modelValue"),s=x({get(){var o;return i.value!=null||!r?i.value:(o=r.items.value.find(a=>r.selected.value.includes(a.id)))==null?void 0:o.value},set(o){i.value=o}});return be(()=>{const o=Og.filterProps(t);return p(Og,Se({_as:"VTabsWindow"},o,{modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),n)}),{}}}),bx=G({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Pe(),...tf(),...Iy()},"VWindowItem"),Wi=me()({name:"VWindowItem",directives:{vTouch:Rg},props:bx(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=et(px),i=nf(t,yx),{isBooted:s}=lf();if(!r||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=ge(!1),a=x(()=>s.value&&(r.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function l(){!o.value||!r||(o.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function u(){var m;o.value||!r||(o.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=Ae((m=r.rootRef.value)==null?void 0:m.clientHeight)),r.transitionCount.value+=1)}function c(){l()}function d(m){o.value&&sn(()=>{!a.value||!o.value||!r||(r.transitionHeight.value=Ae(m.clientHeight))})}const h=x(()=>{const m=r.isReversed.value?t.reverseTransition:t.transition;return a.value?{name:typeof m!="string"?r.transition.value:m,onBeforeEnter:u,onAfterEnter:l,onEnterCancelled:c,onBeforeLeave:u,onAfterLeave:l,onLeaveCancelled:c,onEnter:d}:!1}),{hasContent:f}=_y(t,i.isSelected);return be(()=>p(di,{transition:h.value,disabled:!s.value},{default:()=>{var m;return[yt(C("div",{class:ce(["v-window-item",i.selectedClass.value,t.class]),style:xe(t.style)},[f.value&&((m=n.default)==null?void 0:m.call(n))]),[[En,i.isSelected.value]])]}})),{groupItem:i}}}),a9=G({...bx()},"VTabsWindowItem"),l9=me()({name:"VTabsWindowItem",props:a9(),setup(t,e){let{slots:n}=e;return be(()=>{const r=Wi.filterProps(t);return p(Wi,Se({_as:"VTabsWindowItem"},r,{class:["v-tabs-window-item",t.class],style:t.style}),n)}),{}}});function u9(t){return t?t.map(e=>Pd(e)?e:{text:e,value:e}):[]}const c9=G({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...ky({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Zn(),...st()},"VTabs"),d9=me()({name:"VTabs",props:c9(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=_t(t,"modelValue"),s=x(()=>u9(t.items)),{densityClasses:o}=hr(t),{backgroundColorClasses:a,backgroundColorStyles:l}=ar(()=>t.bgColor),{scopeId:u}=Sy();return Ri({VTab:{color:V(()=>t.color),direction:V(()=>t.direction),stacked:V(()=>t.stacked),fixed:V(()=>t.fixedTabs),sliderColor:V(()=>t.sliderColor),hideSlider:V(()=>t.hideSlider)}}),be(()=>{const c=jd.filterProps(t),d=!!(r.window||t.items.length>0);return C(Ee,null,[p(jd,Se(c,{modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},o.value,a.value,t.class],style:[{"--v-tabs-height":Ae(t.height)},l.value,t.style],role:"tablist",symbol:Dy},u,n),{default:()=>{var h;return[((h=r.default)==null?void 0:h.call(r))??s.value.map(f=>{var m;return((m=r.tab)==null?void 0:m.call(r,{item:f}))??p(vx,Se(f,{key:f.text,value:f.value}),{default:r[`tab.${f.value}`]?()=>{var g;return(g=r[`tab.${f.value}`])==null?void 0:g.call(r,{item:f})}:void 0})})]}}),d&&p(o9,Se({modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,key:"tabs-window"},u),{default:()=>{var h;return[s.value.map(f=>{var m;return((m=r.item)==null?void 0:m.call(r,{item:f}))??p(l9,{value:f.value},{default:()=>{var g;return(g=r[`item.${f.value}`])==null?void 0:g.call(r,{item:f})}})}),(h=r.window)==null?void 0:h.call(r)]}})])}),{}}}),h9={key:0},f9={key:1,class:"text-center pa-10"},m9={key:1,class:"text-center pa-10"},g9={__name:"App",setup(t){const e=te(null),n=te(!1),r=te(!1),i=te([]),s=te([]),o=te([]),a=te([]),l=te([]),u=te(new Map),c=te(new Map),d=te(new Map),h=te(new Map),f=te("view-all"),m=te(null),g=te([{id:"view-all",name:""},{id:"add-owned",name:""},{id:"manage-items",name:""},{id:"manage-teams",name:""},{id:"add-master",name:""},{id:"edit-master",name:""}]),v=x(()=>f.value==="add-owned"||f.value==="manage-items");Jf.onAuthStateChanged(k=>{e.value=k,n.value=!0,k?b():_()});const y=()=>{Jf.loginWithGoogle().catch(()=>alert(""))},w=()=>{Jf.logout()},_=()=>{r.value=!1,i.value=[],s.value=[],o.value=[],a.value=[],l.value=[],u.value=new Map,c.value=new Map,d.value=new Map,h.value=new Map,m.value=null};async function b(){if(!r.value&&e.value){console.log("...");try{const k=await ms.loadAndProcessInitialData(e.value.uid);i.value=k.accounts,s.value=k.characterMasters,o.value=k.itemMasters,a.value=k.gachaMasters,l.value=k.teams,u.value=k.itemMastersMap,c.value=k.ownedCountMap,d.value=k.ownedCharactersData,h.value=k.characterMastersMap,i.value.length>0&&(m.value=i.value[0].id),r.value=!0,console.log("")}catch(k){console.error(":",k),alert(`: ${k.message}`)}}}const T=({accountId:k,newCharacter:O})=>{d.value.has(k)||d.value.set(k,[]),d.value.get(k).push(O);const J=`${O.characterMasterId}-${k}`,ee=c.value.get(J)||0;c.value.set(J,ee+1)},E=({accountId:k,ownedCharacterId:O,items:j})=>{const ee=(d.value.get(k)||[]).find(fe=>fe.id===O);ee&&(ee.items=j)},A=({accountId:k,from:O,to:j})=>{const J=d.value.get(k)||[],ee=J.find(de=>de.id===O.id),fe=J.find(de=>de.id===j.id);ee&&(ee.items=O.items),fe&&(fe.items=j.items)},D=k=>{l.value.unshift(k)},P=k=>{const O=l.value.findIndex(j=>j.id===k.id);O>-1&&(l.value[O]={...l.value[O],...k})},U=k=>{l.value=l.value.filter(O=>O.id!==k)},z=()=>{location.reload()};return(k,O)=>(we(),$t(jz,null,{default:R(()=>[p(Kz,{app:"",color:"primary",dark:""},mS({default:R(()=>[p(mx,null,{default:R(()=>O[3]||(O[3]=[Qe("",-1)])),_:1,__:[3]}),p(hf),p(jj,{user:e.value,onLogin:y,onLogout:w},null,8,["user"])]),_:2},[e.value?{name:"extension",fn:R(()=>[p(d9,{modelValue:f.value,"onUpdate:modelValue":O[0]||(O[0]=j=>f.value=j),"align-with-title":""},{default:R(()=>[(we(!0),je(Ee,null,gr(g.value,j=>(we(),$t(vx,{key:j.id,value:j.id},{default:R(()=>[Qe(qe(j.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),key:"0"}:void 0]),1024),p(Qz,null,{default:R(()=>[p(ps,{fluid:""},{default:R(()=>[e.value?(we(),je("div",h9,[p(Pq,{accounts:i.value,modelValue:m.value,"onUpdate:modelValue":O[1]||(O[1]=j=>m.value=j),visible:v.value,class:"mb-4"},null,8,["accounts","modelValue","visible"]),r.value?(we(),$t(Og,{key:0,modelValue:f.value,"onUpdate:modelValue":O[2]||(O[2]=j=>f.value=j)},{default:R(()=>[p(Wi,{value:"view-all",key:"view-all"},{default:R(()=>[p(cz,{"data-loaded":r.value,accounts:i.value,"character-masters":s.value,"item-masters":o.value,"gacha-masters":a.value,"owned-count-map":c.value,"owned-characters-data":d.value,"item-masters-map":u.value},null,8,["data-loaded","accounts","character-masters","item-masters","gacha-masters","owned-count-map","owned-characters-data","item-masters-map"])]),_:1}),p(Wi,{value:"add-owned",key:"add-owned"},{default:R(()=>[p(hz,{"character-masters":s.value,"character-masters-map":h.value,"selected-account-id":m.value,"owned-count-map":c.value,onCharacterAdded:T},null,8,["character-masters","character-masters-map","selected-account-id","owned-count-map"])]),_:1}),p(Wi,{value:"manage-items",key:"manage-items"},{default:R(()=>[p(Iz,{"selected-account-id":m.value,"owned-characters-data":d.value,"character-masters-map":h.value,"item-masters":o.value,"item-masters-map":u.value,onItemsUpdated:E,onItemsMoved:A},null,8,["selected-account-id","owned-characters-data","character-masters-map","item-masters","item-masters-map"])]),_:1}),p(Wi,{value:"manage-teams",key:"manage-teams"},{default:R(()=>[p(Nz,{"user-id":e.value.uid,"data-loaded":r.value,teams:l.value,accounts:i.value,"owned-characters-data":d.value,"character-masters-map":h.value,"item-masters-map":u.value,onTeamAdded:D,onTeamUpdated:P,onTeamDeleted:U},null,8,["user-id","data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map"])]),_:1}),p(Wi,{value:"add-master",key:"add-master"},{default:R(()=>[p(Rz,{"gacha-masters":a.value,onMasterAdded:z},null,8,["gacha-masters"])]),_:1}),p(Wi,{value:"edit-master",key:"edit-master"},{default:R(()=>[p(Oz,{"character-masters":s.value,"gacha-masters":a.value,onMasterUpdated:z},null,8,["character-masters","gacha-masters"])]),_:1})]),_:1},8,["modelValue"])):(we(),je("div",f9,[p(Jk,{indeterminate:"",color:"primary",size:"64"}),O[4]||(O[4]=C("p",{class:"mt-4"},"...",-1))]))])):(we(),je("div",m9,O[5]||(O[5]=[C("h2",null,"",-1),C("p",null,"Google",-1)])))]),_:1})]),_:1})]),_:1}))}};function ac(t){const e=t.slice(-2).toUpperCase();switch(!0){case t==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case t==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(e):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(e):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(e):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(e):return{firstDay:6,firstWeekSize:1};case e==="MV":return{firstDay:5,firstWeekSize:1};case e==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function v9(t,e,n){var c;const r=[];let i=[];const s=Ix(t),o=_x(t),a=n??((c=ac(e))==null?void 0:c.firstDay)??0,l=(s.getDay()-a+7)%7,u=(o.getDay()-a+7)%7;for(let d=0;d<l;d++){const h=new Date(s);h.setDate(h.getDate()-(l-d)),i.push(h)}for(let d=1;d<=o.getDate();d++){const h=new Date(t.getFullYear(),t.getMonth(),d);i.push(h),i.length===7&&(r.push(i),i=[])}for(let d=1;d<7-u;d++){const h=new Date(o);h.setDate(h.getDate()+d),i.push(h)}return i.length>0&&r.push(i),r}function Mg(t,e,n){var s;let r=(n??((s=ac(e))==null?void 0:s.firstDay)??0)%7;[0,1,2,3,4,5,6].includes(r)||(r=0);const i=new Date(t);for(;i.getDay()!==r;)i.setDate(i.getDate()-1);return i}function p9(t,e){var i;const n=new Date(t),r=((((i=ac(e))==null?void 0:i.firstDay)??0)+6)%7;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Ix(t){return new Date(t.getFullYear(),t.getMonth(),1)}function _x(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function y9(t){const e=t.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const w9=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function Sx(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let e;if(w9.test(t))return y9(t);if(e=Date.parse(t),!isNaN(e))return new Date(e)}return null}const p_=new Date(2e3,0,2);function b9(t,e,n){var i;const r=e??((i=ac(t))==null?void 0:i.firstDay)??0;return Tk(7).map(s=>{const o=new Date(p_);return o.setDate(p_.getDate()+r+s),new Intl.DateTimeFormat(t,{weekday:n??"narrow"}).format(o)})}function I9(t,e,n,r){const i=Sx(t)??new Date,s=r==null?void 0:r[e];if(typeof s=="function")return s(i,e,n);let o={};switch(e){case"fullDate":o={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":o={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const a=i.getDate(),l=new Intl.DateTimeFormat(n,{month:"long"}).format(i);return`${a} ${l}`;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":o={month:"short",day:"numeric"};break;case"year":o={year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"weekday":o={weekday:"long"};break;case"weekdayShort":o={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(i.getDate());case"hours12h":o={hour:"numeric",hour12:!0};break;case"hours24h":o={hour:"numeric",hour12:!1};break;case"minutes":o={minute:"numeric"};break;case"seconds":o={second:"numeric"};break;case"fullTime":o={hour:"numeric",minute:"numeric"};break;case"fullTime12h":o={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":o={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":o={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,o).format(i).replace(/, /g," ");case"keyboardDateTime12h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,o).format(i).replace(/, /g," ");case"keyboardDateTime24h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,o).format(i).replace(/, /g," ");default:o=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,o).format(i)}function _9(t,e){const n=t.toJsDate(e),r=n.getFullYear(),i=bI(String(n.getMonth()+1),2,"0"),s=bI(String(n.getDate()),2,"0");return`${r}-${i}-${s}`}function S9(t){const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)}function T9(t,e){const n=new Date(t);return n.setMinutes(n.getMinutes()+e),n}function E9(t,e){const n=new Date(t);return n.setHours(n.getHours()+e),n}function Gc(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function C9(t,e){const n=new Date(t);return n.setDate(n.getDate()+e*7),n}function k9(t,e){const n=new Date(t);return n.setDate(1),n.setMonth(n.getMonth()+e),n}function Vg(t){return t.getFullYear()}function A9(t){return t.getMonth()}function x9(t,e,n,r){const i=ac(e),s=n??(i==null?void 0:i.firstDay)??0,o=r??(i==null?void 0:i.firstWeekSize)??1;function a(f){const m=new Date(f,0,1);return 7-Lg(m,Mg(m,e,s),"days")}let l=Vg(t);const u=Gc(Mg(t,e,s),6);l<Vg(u)&&a(l+1)>=o&&l++;const c=new Date(l,0,1),d=a(l),h=d>=o?Gc(c,d-7):Gc(c,d);return 1+Lg(Tx(t),Hd(h),"weeks")}function D9(t){return t.getDate()}function P9(t){return new Date(t.getFullYear(),t.getMonth()+1,1)}function N9(t){return new Date(t.getFullYear(),t.getMonth()-1,1)}function R9(t){return t.getHours()}function O9(t){return t.getMinutes()}function M9(t){return new Date(t.getFullYear(),0,1)}function V9(t){return new Date(t.getFullYear(),11,31)}function L9(t,e){return zd(t,e[0])&&$9(t,e[1])}function F9(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function zd(t,e){return t.getTime()>e.getTime()}function B9(t,e){return zd(Hd(t),Hd(e))}function $9(t,e){return t.getTime()<e.getTime()}function y_(t,e){return t.getTime()===e.getTime()}function U9(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function j9(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function q9(t,e){return t.getFullYear()===e.getFullYear()}function Lg(t,e,n){const r=new Date(t),i=new Date(e);switch(n){case"years":return r.getFullYear()-i.getFullYear();case"quarters":return Math.floor((r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12)/4);case"months":return r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12;case"weeks":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24));case"hours":return Math.floor((r.getTime()-i.getTime())/(1e3*60*60));case"minutes":return Math.floor((r.getTime()-i.getTime())/(1e3*60));case"seconds":return Math.floor((r.getTime()-i.getTime())/1e3);default:return r.getTime()-i.getTime()}}function z9(t,e){const n=new Date(t);return n.setHours(e),n}function H9(t,e){const n=new Date(t);return n.setMinutes(e),n}function W9(t,e){const n=new Date(t);return n.setMonth(e),n}function G9(t,e){const n=new Date(t);return n.setDate(e),n}function K9(t,e){const n=new Date(t);return n.setFullYear(e),n}function Hd(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)}function Tx(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class Y9{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return Sx(e)}toJsDate(e){return e}toISO(e){return _9(this,e)}parseISO(e){return S9(e)}addMinutes(e,n){return T9(e,n)}addHours(e,n){return E9(e,n)}addDays(e,n){return Gc(e,n)}addWeeks(e,n){return C9(e,n)}addMonths(e,n){return k9(e,n)}getWeekArray(e,n){const r=n!==void 0?Number(n):void 0;return v9(e,this.locale,r)}startOfWeek(e,n){const r=n!==void 0?Number(n):void 0;return Mg(e,this.locale,r)}endOfWeek(e){return p9(e,this.locale)}startOfMonth(e){return Ix(e)}endOfMonth(e){return _x(e)}format(e,n){return I9(e,n,this.locale,this.formats)}isEqual(e,n){return y_(e,n)}isValid(e){return F9(e)}isWithinRange(e,n){return L9(e,n)}isAfter(e,n){return zd(e,n)}isAfterDay(e,n){return B9(e,n)}isBefore(e,n){return!zd(e,n)&&!y_(e,n)}isSameDay(e,n){return U9(e,n)}isSameMonth(e,n){return j9(e,n)}isSameYear(e,n){return q9(e,n)}setMinutes(e,n){return H9(e,n)}setHours(e,n){return z9(e,n)}setMonth(e,n){return W9(e,n)}setDate(e,n){return G9(e,n)}setYear(e,n){return K9(e,n)}getDiff(e,n,r){return Lg(e,n,r)}getWeekdays(e,n){const r=e!==void 0?Number(e):void 0;return b9(this.locale,r,n)}getYear(e){return Vg(e)}getMonth(e){return A9(e)}getWeek(e,n,r){const i=n!==void 0?Number(n):void 0;return x9(e,this.locale,i,r)}getDate(e){return D9(e)}getNextMonth(e){return P9(e)}getPreviousMonth(e){return N9(e)}getHours(e){return R9(e)}getMinutes(e){return O9(e)}startOfDay(e){return Hd(e)}endOfDay(e){return Tx(e)}startOfYear(e){return M9(e)}endOfYear(e){return V9(e)}}const Q9=Symbol.for("vuetify:date-options"),w_=Symbol.for("vuetify:date-adapter");function X9(t,e){const n=pn({adapter:Y9,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t);return{options:n,instance:J9(n,e)}}function J9(t,e){const n=wt(typeof t.adapter=="function"?new t.adapter({locale:t.locale[e.current.value]??e.current.value,formats:t.formats}):t.adapter);return Ie(e.current,r=>{n.locale=t.locale[r]??r??n.locale}),n}function Ex(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,r=pn(e,n),{aliases:i={},components:s={},directives:o={}}=r,a=Rl();return a.run(()=>{const l=pU(r.defaults),u=Dj(r.display,r.ssr),c=c4(r.theme),d=e4(r.icons),h=C4(r.locale),f=X9(r.date,h),m=rq(r.goTo,h);function g(y){for(const _ in o)y.directive(_,o[_]);for(const _ in s)y.component(_,s[_]);for(const _ in i)y.component(_,Ua({...i[_],name:_,aliasName:i[_].name}));const w=Rl();if(w.run(()=>{c.install(y)}),y.onUnmount(()=>w.stop()),y.provide(Sa,l),y.provide(xg,u),y.provide(pu,c),y.provide(_g,d),y.provide(Fd,h),y.provide(Q9,f.options),y.provide(w_,f.instance),y.provide(zA,m),tt&&r.ssr)if(y.$nuxt)y.$nuxt.hook("app:suspense:resolve",()=>{u.update()});else{const{mount:_}=y;y.mount=function(){const b=_(...arguments);return sn(()=>u.update()),y.mount=_,b}}y.mixin({computed:{$vuetify(){return wt({defaults:Vo.call(this,Sa),display:Vo.call(this,xg),theme:Vo.call(this,pu),icons:Vo.call(this,_g),locale:Vo.call(this,Fd),date:Vo.call(this,w_)})}}})}function v(){a.stop()}return{install:g,unmount:v,defaults:l,display:u,theme:c,icons:d,locale:h,date:f,goTo:m}})}const Z9="3.9.4";Ex.version=Z9;function Vo(t){var r,i;const e=this.$,n=((r=e.parent)==null?void 0:r.provides)??((i=e.vnode.appContext)==null?void 0:i.provides);if(n&&t in n)return n[t]}const e5=Ex({}),Cx=QD(g9);Cx.use(e5);Cx.mount("#app");
