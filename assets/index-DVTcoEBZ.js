const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-init-DpZkwACO.js","assets/vue-BBUrRVCa.js","assets/vuetify-DFz3fzRr.js"])))=>i.map(i=>d[i]);
import{B as e,l as t,s as n,T as r,j as i,J as a,n as s,e as o,k as l,K as u,L as c,M as d,m as h,h as p,b as f,o as v,N as m,I as g,z as y,t as b,O as w,F as _,P as S,r as I,D as C,Q as k,E,p as T,d as x,u as A,v as N,w as D,R as V,S as R,c as P,y as O,A as M,x as L,U as F,G as B,V as U,W as $,X as j,Y as z,Z as q,_ as H,$ as G,a0 as K,a as W,a1 as Q,a2 as Y,a3 as X,a4 as J,a5 as Z,a6 as ee,a7 as te}from"./vue-BBUrRVCa.js";import{g as ne,p as re,a as ie,d as ae,i as se,b as oe,c as le,e as ue,f as ce,h as de,j as he,u as pe,k as fe,l as ve,m as me,n as ge,o as ye,I as be,q as we,r as _e,S as Se,s as Ie,t as Ce,v as ke,w as Ee,x as Te,y as xe,z as Ae,A as Ne,B as De,C as Ve,D as Re,E as Pe,F as Oe,G as Me,H as Le,J as Fe,K as Be,L as Ue,M as $e,N as je,O as ze,P as qe,Q as He,R as Ge,T as Ke,U as We,V as Qe,W as Ye,X as Xe,Y as Je,Z as Ze,_ as et,$ as tt,a0 as nt,a1 as rt,a2 as it,a3 as at,a4 as st,a5 as ot,a6 as lt,a7 as ut,a8 as ct,a9 as dt,aa as ht,ab as pt,ac as ft,ad as vt,ae as mt,af as gt,ag as yt,ah as bt,ai as wt,aj as _t,ak as St,al as It,am as Ct,an as kt,ao as Et,ap as Tt,aq as xt,ar as At,as as Nt,at as Dt,au as Vt,av as Rt,aw as Pt,ax as Ot,ay as Mt,az as Lt,aA as Ft,aB as Bt,aC as Ut,aD as $t,aE as jt}from"./vuetify-DFz3fzRr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var zt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new Gt;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kt=function(e){return function(e){const t=qt(e);return Ht.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Wt=function(e){try{return Ht.decodeString(e,!0)}catch(t){}return null};function Qt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Yt(n)&&(e[n]=Qt(e[n],t[n]));return e}function Yt(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Jt=()=>{try{return Xt()||(()=>{if("undefined"==typeof process)return;const e=zt.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Wt(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Zt=e=>{var t,n;return null===(n=null===(t=Jt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},en=()=>{var e;return null===(e=Jt())||void 0===e?void 0:e.config},tn=e=>{var t;return null===(t=Jt())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class an extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,an.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}}class sn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?function(e,t){return e.replace(on,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",s=`${this.serviceName}: ${a} (${r}).`;return new an(r,s,n)}}const on=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function un(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(cn(n)&&cn(a)){if(!un(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function cn(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function hn(e,t){const n=new pn(e,t);return n.subscribe.bind(n)}class pn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=fn),void 0===r.error&&(r.error=fn),void 0===r.complete&&(r.complete=fn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(e){return e&&e._delegate?e._delegate:e}class mn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new nn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:gn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=gn){return this.instances.has(e)}getOptions(e=gn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===gn?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=gn){return this.component?this.component.multipleInstances?e:gn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=[];var _n,Sn;(Sn=_n||(_n={}))[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";const In={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},Cn=_n.INFO,kn={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},En=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!kn[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tn{constructor(e){this.name=e,this._logLevel=Cn,this._logHandler=En,this._userLogHandler=null,wn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?In[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...e),this._logHandler(this,_n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...e),this._logHandler(this,_n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...e),this._logHandler(this,_n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...e),this._logHandler(this,_n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...e),this._logHandler(this,_n.ERROR,...e)}}let xn,An;const Nn=new WeakMap,Dn=new WeakMap,Vn=new WeakMap,Rn=new WeakMap,Pn=new WeakMap;let On={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(An||(An=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Bn(this),t),Fn(Nn.get(this))}:function(...t){return Fn(e.apply(Bn(this),t))}:function(t,...n){const r=e.call(Bn(this),t,...n);return Vn.set(r,t.sort?t.sort():[t]),Fn(r)}}function Ln(e){return"function"==typeof e?Mn(e):(e instanceof IDBTransaction&&function(e){if(Dn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Dn.set(e,t)}(e),t=e,(xn||(xn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,On):e);var t}function Fn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Fn(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&Nn.set(t,e)}).catch(()=>{}),Pn.set(t,e),t}(e);if(Rn.has(e))return Rn.get(e);const t=Ln(e);return t!==e&&(Rn.set(e,t),Pn.set(t,e)),t}const Bn=e=>Pn.get(e);const Un=["get","getKey","getAll","getAllKeys","count"],$n=["put","add","delete","clear"],jn=new Map;function zn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(jn.get(t))return jn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=$n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Un.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let s=a.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&a.done]))[0]};return jn.set(t,a),a}On=(e=>({...e,get:(t,n,r)=>zn(t,n)||e.get(t,n,r),has:(t,n)=>!!zn(t,n)||e.has(t,n)}))(On);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Hn="@firebase/app",Gn="0.9.13",Kn=new Tn("@firebase/app"),Wn="@firebase/app-compat",Qn="@firebase/analytics-compat",Yn="@firebase/analytics",Xn="@firebase/app-check-compat",Jn="@firebase/app-check",Zn="@firebase/auth",er="@firebase/auth-compat",tr="@firebase/database",nr="@firebase/database-compat",rr="@firebase/functions",ir="@firebase/functions-compat",ar="@firebase/installations",sr="@firebase/installations-compat",or="@firebase/messaging",lr="@firebase/messaging-compat",ur="@firebase/performance",cr="@firebase/performance-compat",dr="@firebase/remote-config",hr="@firebase/remote-config-compat",pr="@firebase/storage",fr="@firebase/storage-compat",vr="@firebase/firestore",mr="@firebase/firestore-compat",gr="firebase",yr="[DEFAULT]",br={[Hn]:"fire-core",[Wn]:"fire-core-compat",[Yn]:"fire-analytics",[Qn]:"fire-analytics-compat",[Jn]:"fire-app-check",[Xn]:"fire-app-check-compat",[Zn]:"fire-auth",[er]:"fire-auth-compat",[tr]:"fire-rtdb",[nr]:"fire-rtdb-compat",[rr]:"fire-fn",[ir]:"fire-fn-compat",[ar]:"fire-iid",[sr]:"fire-iid-compat",[or]:"fire-fcm",[lr]:"fire-fcm-compat",[ur]:"fire-perf",[cr]:"fire-perf-compat",[dr]:"fire-rc",[hr]:"fire-rc-compat",[pr]:"fire-gcs",[fr]:"fire-gcs-compat",[vr]:"fire-fst",[mr]:"fire-fst-compat","fire-js":"fire-js",[gr]:"fire-js-all"},wr=new Map,_r=new Map;function Sr(e,t){try{e.container.addComponent(t)}catch(n){Kn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ir(e,t){e.container.addOrOverwriteComponent(t)}function Cr(e){const t=e.name;if(_r.has(t))return Kn.debug(`There were multiple attempts to register component ${t}.`),!1;_r.set(t,e);for(const n of wr.values())Sr(n,e);return!0}function kr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Er=new sn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Tr=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="9.23.0";function Ar(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:yr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Er.create("bad-app-name",{appName:String(i)});if(n||(n=en()),!n)throw Er.create("no-options");const a=wr.get(i);if(a){if(un(n,a.options)&&un(r,a.config))return a;throw Er.create("duplicate-app",{appName:i})}const s=new bn(i);for(const l of _r.values())s.addComponent(l);const o=new Tr(n,r,s);return wr.set(i,o),o}function Nr(e=yr){const t=wr.get(e);if(!t&&e===yr&&en())return Ar();if(!t)throw Er.create("no-app",{appName:e});return t}async function Dr(e){const t=e.name;wr.has(t)&&(wr.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Vr(e,t,n){var r;let i=null!==(r=br[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Kn.warn(e.join(" "))}Cr(new mn(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function Rr(e,t){if(null!==e&&"function"!=typeof e)throw Er.create("invalid-log-argument");!function(e,t){for(const n of wn){let r=null;t&&t.level&&(r=In[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const a=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:_n[n].toLowerCase(),message:a,args:i,type:t.name})}}}(e,t)}function Pr(e){var t;t=e,wn.forEach(e=>{e.setLogLevel(t)})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="firebase-heartbeat-store";let Mr=null;function Lr(){return Mr||(Mr=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(e,t),o=Fn(s);return r&&s.addEventListener("upgradeneeded",e=>{r(Fn(s.result),e.oldVersion,e.newVersion,Fn(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Or)}}).catch(e=>{throw Er.create("idb-open",{originalErrorMessage:e.message})})),Mr}async function Fr(e,t){try{const n=(await Lr()).transaction(Or,"readwrite"),r=n.objectStore(Or);await r.put(t,Br(e)),await n.done}catch(n){if(n instanceof an)Kn.warn(n.message);else{const e=Er.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Kn.warn(e.message)}}}function Br(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=$r();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=$r(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),zr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Kt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function $r(){return(new Date).toISOString().substring(0,10)}class jr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await Lr();return await t.transaction(Or).objectStore(Or).get(Br(e))}catch(t){if(t instanceof an)Kn.warn(t.message);else{const e=Er.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Kn.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function zr(e){return Kt(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qr;qr="",Cr(new mn("platform-logger",e=>new qn(e),"PRIVATE")),Cr(new mn("heartbeat",e=>new Ur(e),"PRIVATE")),Vr(Hn,Gn,qr),Vr(Hn,Gn,"esm2017"),Vr("fire-js","");const Hr=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:an,SDK_VERSION:xr,_DEFAULT_ENTRY_NAME:yr,_addComponent:Sr,_addOrOverwriteComponent:Ir,_apps:wr,_clearComponents:function(){_r.clear()},_components:_r,_getProvider:kr,_registerComponent:Cr,_removeServiceInstance:function(e,t,n=yr){kr(e,t).clearInstance(n)},deleteApp:Dr,getApp:Nr,getApps:function(){return Array.from(wr.values())},initializeApp:Ar,onLog:Rr,registerVersion:Vr,setLogLevel:Pr},Symbol.toStringTag,{value:"Module"}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){this._delegate=e,this.firebase=t,Sr(e,new mn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Dr(this._delegate)))}_getService(e,t=yr){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=yr){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sr(this._delegate,e)}_addOrOverwriteComponent(e){Ir(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new sn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Wr=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(r,i={}){const a=Ar(r,i);if(ln(t,a.name))return t[a.name];const s=new e(a,n);return t[a.name]=s,s},app:r,registerVersion:Vr,setLogLevel:Pr,onLog:Rr,apps:null,SDK_VERSION:xr,INTERNAL:{registerComponent:function(t){const i=t.name,a=i.replace("-compat","");if(Cr(t)&&"PUBLIC"===t.type){const s=(e=r())=>{if("function"!=typeof e[a])throw Kr.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&Qt(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Hr}};function r(e){if(!ln(t,e=e||yr))throw Kr.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,n}(Gr);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Qt(t,e)},createSubscribe:hn,ErrorFactory:sn,deepExtend:Qt}),t}(),Qr=new Tn("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Qr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Qr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yr=Wr;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Vr("@firebase/app-compat","0.2.13",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Yr.registerVersion("firebase","9.23.0","app-compat");const Xr={},Jr=async()=>{const{getFirebaseInstances:e}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/MS_DB_UI/"+e}(e))in Xr)return;Xr[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})}(async()=>{const{getFirebaseInstances:e}=await import("./firebase-init-DpZkwACO.js");return{getFirebaseInstances:e}},__vite__mapDeps([0,1,2]));return e()},Zr=async()=>{const{db:e}=await Jr();return e},ei=async()=>{const{auth:e}=await Jr();return e},ti=async()=>{const e=await ei(),t=new Yr.auth.GoogleAuthProvider;return e.signInWithPopup(t).catch(e=>{throw e})},ni=async()=>(await ei()).signOut(),ri=async e=>(await ei()).onAuthStateChanged(e);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Vr("firebase","9.23.0","app");var ii,ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},si=si||{},oi=ai||self;function li(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ui(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ci(e,t,n){return e.call.apply(e.bind,arguments)}function di(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hi(e,t,n){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ci:di).apply(null,arguments)}function pi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function vi(){this.s=this.s,this.o=this.o}vi.prototype.s=!1,vi.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},vi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function gi(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function yi(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(li(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function bi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bi.prototype.h=function(){this.defaultPrevented=!0};var wi=function(){if(!oi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{oi.addEventListener("test",()=>{},t),oi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function _i(e){return/^[\s\xa0]*$/.test(e)}function Si(){var e=oi.navigator;return e&&(e=e.userAgent)?e:""}function Ii(e){return-1!=Si().indexOf(e)}function Ci(e){return Ci[" "](e),e}Ci[" "]=function(){};var ki,Ei,Ti,xi=Ii("Opera"),Ai=Ii("Trident")||Ii("MSIE"),Ni=Ii("Edge"),Di=Ni||Ai,Vi=Ii("Gecko")&&!(-1!=Si().toLowerCase().indexOf("webkit")&&!Ii("Edge"))&&!(Ii("Trident")||Ii("MSIE"))&&!Ii("Edge"),Ri=-1!=Si().toLowerCase().indexOf("webkit")&&!Ii("Edge");function Pi(){var e=oi.document;return e?e.documentMode:void 0}e:{var Oi="",Mi=(Ei=Si(),Vi?/rv:([^\);]+)(\)|;)/.exec(Ei):Ni?/Edge\/([\d\.]+)/.exec(Ei):Ai?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ei):Ri?/WebKit\/(\S+)/.exec(Ei):xi?/(?:Version)[ \/]?(\S+)/.exec(Ei):void 0);if(Mi&&(Oi=Mi?Mi[1]:""),Ai){var Li=Pi();if(null!=Li&&Li>parseFloat(Oi)){ki=String(Li);break e}}ki=Oi}if(oi.document&&Ai){var Fi=Pi();Ti=Fi||(parseInt(ki,10)||void 0)}else Ti=void 0;var Bi=Ti;function Ui(e,t){if(bi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vi){e:{try{Ci(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$i[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ui.$.h.call(this)}}fi(Ui,bi);var $i={2:"touch",3:"pen",4:"mouse"};Ui.prototype.h=function(){Ui.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ji="closure_listenable_"+(1e6*Math.random()|0),zi=0;function qi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++zi,this.fa=this.ia=!1}function Hi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Gi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ki(e){const t={};for(const n in e)t[n]=e[n];return t}const Wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Wi.length;t++)n=Wi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Yi(e){this.src=e,this.g={},this.h=0}function Xi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=mi(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Hi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ji(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Yi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var s=Ji(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new qi(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Zi="closure_lm_"+(1e6*Math.random()|0),ea={};function ta(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ta(e,t[a],n,r,i);return null}return n=la(n),e&&e[ji]?e.O(t,n,!!ui(r)&&!!r.capture,i):function(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var s=ui(i)?!!i.capture:!!i,o=sa(e);if(o||(e[Zi]=o=new Yi(e)),n=o.add(t,n,r,s,a),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=aa;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wi||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ia(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function na(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)na(e,t[a],n,r,i);else r=ui(r)?!!r.capture:!!r,n=la(n),e&&e[ji]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ji(a=e.g[t],n,r,i))&&(Hi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=sa(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ji(t,n,r,i)),(n=-1<e?t[e]:null)&&ra(n))}function ra(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ji])Xi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ia(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sa(t))?(Xi(n,e),0==n.h&&(n.src=null,t[Zi]=null)):Hi(e)}}}function ia(e){return e in ea?ea[e]:ea[e]="on"+e}function aa(e,t){if(e.fa)e=!0;else{t=new Ui(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ra(e),e=n.call(r,t)}return e}function sa(e){return(e=e[Zi])instanceof Yi?e:null}var oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function la(e){return"function"==typeof e?e:(e[oa]||(e[oa]=function(t){return e.handleEvent(t)}),e[oa])}function ua(){vi.call(this),this.i=new Yi(this),this.S=this,this.J=null}function ca(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new bi(t,e);else if(t instanceof bi)t.target=t.target||e;else{var i=t;Qi(t=new bi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.g=n[a];i=da(s,r,!0,t)&&i}if(i=da(s=t.g=e,r,!0,t)&&i,i=da(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=da(s=t.g=n[a],r,!1,t)&&i}function da(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.fa&&s.capture==n){var o=s.listener,l=s.la||s.src;s.ia&&Xi(e.i,s),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}fi(ua,vi),ua.prototype[ji]=!0,ua.prototype.removeEventListener=function(e,t,n,r){na(this,e,t,n,r)},ua.prototype.N=function(){if(ua.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hi(n[r]);delete t.g[e],t.h--}}this.J=null},ua.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ua.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ha=oi.JSON.stringify;function pa(){var e=wa;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var fa=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new va,e=>e.reset());class va{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ma(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ga(e){oi.setTimeout(()=>{throw e},0)}let ya,ba=!1,wa=new class{constructor(){this.h=this.g=null}add(e,t){const n=fa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_a=()=>{const e=oi.Promise.resolve(void 0);ya=()=>{e.then(Sa)}};var Sa=()=>{for(var e;e=pa();){try{e.h.call(e.g)}catch(n){ga(n)}var t=fa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ba=!1};function Ia(e,t){ua.call(this),this.h=e||1,this.g=t||oi,this.j=hi(this.qb,this),this.l=Date.now()}function Ca(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ka(e,t,n){if("function"==typeof e)n&&(e=hi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hi(e.handleEvent,e)}return 2147483647<Number(t)?-1:oi.setTimeout(e,t||0)}function Ea(e){e.g=ka(()=>{e.g=null,e.i&&(e.i=!1,Ea(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}fi(Ia,ua),(ii=Ia.prototype).ga=!1,ii.T=null,ii.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ca(this,"tick"),this.ga&&(Ca(this),this.start()))}},ii.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ii.N=function(){Ia.$.N.call(this),Ca(this),delete this.g};class Ta extends vi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ea(this)}N(){super.N(),this.g&&(oi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(e){vi.call(this),this.h=e,this.g={}}fi(xa,vi);var Aa=[];function Na(e,t,n,r){Array.isArray(n)||(n&&(Aa[0]=n.toString()),n=Aa);for(var i=0;i<n.length;i++){var a=ta(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Da(e){Gi(e.g,function(e,t){this.g.hasOwnProperty(t)&&ra(e)},e),e.g={}}function Va(){this.g=!0}function Ra(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<i.length;s++)i[s]=""}}}return ha(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xa.prototype.N=function(){xa.$.N.call(this),Da(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Va.prototype.Ea=function(){this.g=!1},Va.prototype.info=function(){};var Pa={},Oa=null;function Ma(){return Oa=Oa||new ua}function La(e){bi.call(this,Pa.Ta,e)}function Fa(e){const t=Ma();ca(t,new La(t))}function Ba(e,t){bi.call(this,Pa.STAT_EVENT,e),this.stat=t}function Ua(e){const t=Ma();ca(t,new Ba(t,e))}function $a(e,t){bi.call(this,Pa.Ua,e),this.size=t}function ja(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return oi.setTimeout(function(){e()},t)}Pa.Ta="serverreachability",fi(La,bi),Pa.STAT_EVENT="statevent",fi(Ba,bi),Pa.Ua="timingevent",fi($a,bi);var za={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ha(){}function Ga(e){return e.h||(e.h=e.i())}function Ka(){}Ha.prototype.h=null;var Wa,Qa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ya(){bi.call(this,"d")}function Xa(){bi.call(this,"c")}function Ja(){}function Za(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new xa(this),this.P=ts,e=Di?125:void 0,this.V=new Ia(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}fi(Ya,bi),fi(Xa,bi),fi(Ja,Ha),Ja.prototype.g=function(){return new XMLHttpRequest},Ja.prototype.i=function(){return{}},Wa=new Ja;var ts=45e3,ns={},rs={};function is(e,t,n){e.L=1,e.v=Is(ys(t)),e.s=n,e.S=!0,as(e,null)}function as(e,t){e.G=Date.now(),us(e),e.A=ys(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ms(n.i,"t",r),e.C=0,n=e.l.J,e.h=new es,e.g=Lo(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ta(hi(e.Pa,e,e.g),e.O)),Na(e.U,e.g,"readystatechange",e.nb),t=e.I?Ki(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Fa(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");s=2<=d.length&&"type"==d[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ss(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function os(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ls(e,n),r==rs){4==t&&(e.o=4,Ua(14),i=!1),Ra(e.j,e.m,null,"[Incomplete Response]");break}if(r==ns){e.o=4,Ua(15),Ra(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ra(e.j,e.m,r,null),fs(e,r)}ss(e)&&r!=rs&&r!=ns&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ua(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ao(t),t.M=!0,Ua(11))):(Ra(e.j,e.m,n,"[Invalid Chunked Response]"),ps(e),hs(e))}function ls(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?rs:(n=Number(t.substring(n,r)),isNaN(n)?ns:(r+=1)+n>t.length?rs:(t=t.slice(r,r+n),e.C=r+n,t))}function us(e){e.Y=Date.now()+e.P,cs(e,e.P)}function cs(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ja(hi(e.lb,e),t)}function ds(e){e.B&&(oi.clearTimeout(e.B),e.B=null)}function hs(e){0==e.l.H||e.J||Vo(e.l,e)}function ps(e){ds(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ca(e.V),Da(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function fs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||zs(n.i,e)))if(!e.K&&zs(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Do(n),_o(n)}xo(n),Ua(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ja(hi(n.ib,n),6e3));if(1>=js(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Po(n,11)}else if((e.K||n.g==e)&&Do(n),!_i(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.i;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(qs(a,a.h),a.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ss(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Mo(r,r.J?r.pa:null,r.Y),s.K){Hs(r.i,s);var o=s,l=r.L;l&&o.setTimeout(l),o.B&&(ds(o),us(o)),r.g=s}else To(r);0<n.j.length&&Io(n)}else"stop"!=u[0]&&"close"!=u[0]||Po(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Po(n,7):wo(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Fa()}catch(u){}}function vs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(li(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(li(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(li(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(ii=Za.prototype).setTimeout=function(e){this.P=e},ii.nb=function(e){e=e.target;const t=this.M;t&&3==fo(e)?t.l():this.Pa(e)},ii.Pa=function(e){try{if(e==this.g)e:{const c=fo(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Di||this.g&&(this.h.h||this.g.ja()||vo(this.g)))){this.J||4!=c||7==t||Fa(),ds(this);var n=this.g.da();this.ca=n;t:if(ss(this)){var r=vo(this.g);e="";var i=r.length,a=4==fo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ps(this),hs(this);var s="";break t}this.h.i=new oi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:a&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,a,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_i(o)){var u=o;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Ua(12),ps(this),hs(this);break e}Ra(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,n)}this.S?(os(this,c,s),Di&&this.i&&3==c&&(Na(this.U,this.V,"tick",this.mb),this.V.start())):(Ra(this.j,this.m,s,null),fs(this,s)),4==c&&ps(this),this.i&&!this.J&&(4==c?Vo(this.l,this):(this.i=!1,us(this)))}else(function(e){const t={};e=(e.g&&2<=fo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(_i(e[r]))continue;var n=ma(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Ua(12)):(this.o=0,Ua(13)),ps(this),hs(this)}}}catch(c){}},ii.mb=function(){if(this.g){var e=fo(this.g),t=this.g.ja();this.C<t.length&&(ds(this),os(this,e,t),this.i&&4!=e&&us(this))}},ii.cancel=function(){this.J=!0,ps(this)},ii.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Fa(),Ua(17)),ps(this),this.o=2,hs(this)):cs(this,this.Y-e)};var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof gs){this.h=e.h,bs(this,e.j),this.s=e.s,this.g=e.g,ws(this,e.m),this.l=e.l;var t=e.i,n=new Vs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_s(this,n),this.o=e.o}else e&&(t=String(e).match(ms))?(this.h=!1,bs(this,t[1]||"",!0),this.s=Cs(t[2]||""),this.g=Cs(t[3]||"",!0),ws(this,t[4]),this.l=Cs(t[5]||"",!0),_s(this,t[6]||"",!0),this.o=Cs(t[7]||"")):(this.h=!1,this.i=new Vs(null,this.h))}function ys(e){return new gs(e)}function bs(e,t,n){e.j=n?Cs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ws(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _s(e,t,n){t instanceof Vs?(e.i=t,function(e,t){t&&!e.j&&(Rs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ps(this,t),Ms(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ks(t,Ns)),e.i=new Vs(t,e.h))}function Ss(e,t,n){e.i.set(t,n)}function Is(e){return Ss(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Cs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ks(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Es),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Es(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ks(t,Ts,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ks(t,Ts,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ks(n,"/"==n.charAt(0)?As:xs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ks(n,Ds)),e.join("")};var Ts=/[#\/\?@]/g,xs=/[#\?:]/g,As=/[#\?]/g,Ns=/[#\?@]/g,Ds=/#/g;function Vs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ps(e,t){Rs(e),t=Ls(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Os(e,t){return Rs(e),t=Ls(e,t),e.g.has(t)}function Ms(e,t,n){Ps(e,t),0<n.length&&(e.i=null,e.g.set(Ls(e,t),gi(n)),e.h+=n.length)}function Ls(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ii=Vs.prototype).add=function(e,t){Rs(this),this.i=null,e=Ls(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ii.forEach=function(e,t){Rs(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},ii.ta=function(){Rs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ii.Z=function(e){Rs(this);let t=[];if("string"==typeof e)Os(this,e)&&(t=t.concat(this.g.get(Ls(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ii.set=function(e,t){return Rs(this),this.i=null,Os(this,e=Ls(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ii.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ii.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=a;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Fs=class{constructor(e,t){this.g=e,this.map=t}};function Bs(e){this.l=e||Us,oi.PerformanceNavigationTiming?e=0<(e=oi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(oi.g&&oi.g.Ka&&oi.g.Ka()&&oi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Us=10;function $s(e){return!!e.h||!!e.g&&e.g.size>=e.j}function js(e){return e.h?1:e.g?e.g.size:0}function zs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function qs(e,t){e.g?e.g.add(t):e.h=t}function Hs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return gi(e.i)}Bs.prototype.cancel=function(){if(this.i=Gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ks=class{stringify(e){return oi.JSON.stringify(e,void 0)}parse(e){return oi.JSON.parse(e,void 0)}};function Ws(){this.g=new Ks}function Qs(e,t,n){const r=n||"";try{vs(e,function(e,n){let i=e;ui(e)&&(i=ha(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ys(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Xs(e){this.l=e.fc||null,this.j=e.ob||!1}function Js(e,t){ua.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Zs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fi(Xs,Ha),Xs.prototype.g=function(){return new Js(this.l,this.j)},Xs.prototype.i=function(e){return function(){return e}}({}),fi(Js,ua);var Zs=0;function eo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function to(e){e.readyState=4,e.l=null,e.j=null,e.A=null,no(e)}function no(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ii=Js.prototype).open=function(e,t){if(this.readyState!=Zs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,no(this)},ii.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||oi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ii.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,to(this)),this.readyState=Zs},ii.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==oi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ii.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?to(this):no(this),3==this.readyState&&eo(this)}},ii.Za=function(e){this.g&&(this.response=this.responseText=e,to(this))},ii.Ya=function(e){this.g&&(this.response=e,to(this))},ii.ka=function(){this.g&&to(this)},ii.setRequestHeader=function(e,t){this.v.append(e,t)},ii.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ii.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ro=oi.JSON.parse;function io(e){ua.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ao,this.L=this.M=!1}fi(io,ua);var ao="",so=/^https?$/i,oo=["POST","PUT"];function lo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,uo(e),ho(e)}function uo(e){e.F||(e.F=!0,ca(e,"complete"),ca(e,"error"))}function co(e){if(e.h&&void 0!==si&&(!e.C[1]||4!=fo(e)||2!=e.da()))if(e.v&&4==fo(e))ka(e.La,0,e);else if(ca(e,"readystatechange"),4==fo(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(ms)[1]||null;!i&&oi.self&&oi.self.location&&(i=oi.self.location.protocol.slice(0,-1)),r=!so.test(i?i.toLowerCase():"")}n=r}if(n)ca(e,"complete"),ca(e,"success");else{e.m=6;try{var a=2<fo(e)?e.g.statusText:""}catch(s){a=""}e.j=a+" ["+e.da()+"]",uo(e)}}finally{ho(e)}}}function ho(e,t){if(e.g){po(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ca(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function po(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(oi.clearTimeout(e.A),e.A=null)}function fo(e){return e.g?e.g.readyState:0}function vo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ao:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function mo(e){let t="";return Gi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function go(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=mo(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ss(e,t,n))}function yo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function bo(e){this.Ga=0,this.j=[],this.l=new Va,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yo("baseRetryDelayMs",5e3,e),this.hb=yo("retryDelaySeedMs",1e4,e),this.eb=yo("forwardChannelMaxRetries",2,e),this.xa=yo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Bs(e&&e.concurrentRequestLimit),this.Ja=new Ws,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wo(e){if(So(e),3==e.H){var t=e.W++,n=ys(e.I);if(Ss(n,"SID",e.K),Ss(n,"RID",t),Ss(n,"TYPE","terminate"),ko(e,n),(t=new Za(e,e.l,t)).L=2,t.v=Is(ys(n)),n=!1,oi.navigator&&oi.navigator.sendBeacon)try{n=oi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&oi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Lo(t.l,null),t.g.ha(t.v)),t.G=Date.now(),us(t)}Oo(e)}function _o(e){e.g&&(Ao(e),e.g.cancel(),e.g=null)}function So(e){_o(e),e.u&&(oi.clearTimeout(e.u),e.u=null),Do(e),e.i.cancel(),e.m&&("number"==typeof e.m&&oi.clearTimeout(e.m),e.m=null)}function Io(e){if(!$s(e.i)&&!e.m){e.m=!0;var t=e.Na;ya||_a(),ba||(ya(),ba=!0),wa.add(t,e),e.C=0}}function Co(e,t){var n;n=t?t.m:e.W++;const r=ys(e.I);Ss(r,"SID",e.K),Ss(r,"RID",n),Ss(r,"AID",e.V),ko(e,r),e.o&&e.s&&go(r,e.o,e.s),n=new Za(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Eo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),qs(e.i,n),is(n,r,t)}function ko(e,t){e.na&&Gi(e.na,function(e,n){Ss(t,n,e)}),e.h&&vs({},function(e,n){Ss(t,n,e)})}function Eo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?hi(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Qs(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function To(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ya||_a(),ba||(ya(),ba=!0),wa.add(t,e),e.A=0}}function xo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ja(hi(e.Ma,e),Ro(e,e.A)),e.A++,!0)}function Ao(e){null!=e.B&&(oi.clearTimeout(e.B),e.B=null)}function No(e){e.g=new Za(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ys(e.wa);Ss(t,"RID","rpc"),Ss(t,"SID",e.K),Ss(t,"AID",e.V),Ss(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ss(t,"TO",e.qa),Ss(t,"TYPE","xmlhttp"),ko(e,t),e.o&&e.s&&go(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Is(ys(t)),n.s=null,n.S=!0,as(n,e)}function Do(e){null!=e.v&&(oi.clearTimeout(e.v),e.v=null)}function Vo(e,t){var n=null;if(e.g==t){Do(e),Ao(e),e.g=null;var r=2}else{if(!zs(e.i,t))return;n=t.F,Hs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ca(r=Ma(),new $a(r,n)),Io(e)}else To(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(js(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=ja(hi(e.Na,e,t),Ro(e,e.C)),e.C++,0)))}(e,t)||2==r&&xo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Po(e,5);break;case 4:Po(e,10);break;case 3:Po(e,6);break;default:Po(e,2)}}function Ro(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Po(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=hi(e.pb,e);n||(n=new gs("//www.google.com/images/cleardot.gif"),oi.location&&"http"==oi.location.protocol||bs(n,"https"),Is(n)),function(e,t){const n=new Va;if(oi.Image){const r=new Image;r.onload=pi(Ys,n,r,"TestLoadImage: loaded",!0,t),r.onerror=pi(Ys,n,r,"TestLoadImage: error",!1,t),r.onabort=pi(Ys,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=pi(Ys,n,r,"TestLoadImage: timeout",!1,t),oi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ua(2);e.H=0,e.h&&e.h.za(t),Oo(e),So(e)}function Oo(e){if(e.H=0,e.ma=[],e.h){const t=Gs(e.i);0==t.length&&0==e.j.length||(yi(e.ma,t),yi(e.ma,e.j),e.i.i.length=0,gi(e.j),e.j.length=0),e.h.ya()}}function Mo(e,t,n){var r=n instanceof gs?ys(n):new gs(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ws(r,r.m);else{var i=oi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new gs(null);r&&bs(a,r),t&&(a.g=t),i&&ws(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Ss(r,n,t),Ss(r,"VER",e.ra),ko(e,r),r}function Lo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new io(new Xs({ob:!0})):new io(e.va)).Oa(e.J),t}function Fo(){}function Bo(){if(Ai&&!(10<=Number(Bi)))throw Error("Environmental error: no available transport.")}function Uo(e,t){ua.call(this),this.g=new bo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!_i(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_i(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new zo(this)}function $o(e){Ya.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jo(){Xa.call(this),this.status=1}function zo(e){this.g=e}function qo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ho(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],s=t+(a^n&(i^a))+r[0]+3614090360&4294967295;s=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(s<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((a=(t=n+((s=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=a+((s=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Go(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(ii=io.prototype).Oa=function(e){this.M=e},ii.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wa.g(),this.C=this.u?Ga(this.u):Ga(Wa),this.g.onreadystatechange=hi(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(a){return void lo(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=oi.FormData&&e instanceof oi.FormData,!(0<=mi(oo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{po(this),0<this.B&&((this.L=function(e){return Ai&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.ua,this)):this.A=ka(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){lo(this,a)}},ii.ua=function(){void 0!==si&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ca(this,"timeout"),this.abort(8))},ii.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ca(this,"complete"),ca(this,"abort"),ho(this))},ii.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ho(this,!0)),io.$.N.call(this)},ii.La=function(){this.s||(this.G||this.v||this.l?co(this):this.kb())},ii.kb=function(){co(this)},ii.isActive=function(){return!!this.g},ii.da=function(){try{return 2<fo(this)?this.g.status:-1}catch(Ei){return-1}},ii.ja=function(){try{return this.g?this.g.responseText:""}catch(Ei){return""}},ii.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ro(t)}},ii.Ia=function(){return this.m},ii.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ii=bo.prototype).ra=8,ii.H=1,ii.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Za(this,this.l,e);let a=this.s;if(this.U&&(a?(a=Ki(a),Qi(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Eo(this,i,t),Ss(n=ys(this.I),"RID",e),Ss(n,"CVER",22),this.F&&Ss(n,"X-HTTP-Session-Id",this.F),ko(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(mo(a)))+"&"+t:this.o&&go(n,this.o,a)),qs(this.i,i),this.bb&&Ss(n,"TYPE","init"),this.P?(Ss(n,"$req",t),Ss(n,"SID","null"),i.aa=!0,is(i,n,null)):is(i,n,t),this.H=2}}else 3==this.H&&(e?Co(this,e):0==this.j.length||$s(this.i)||Co(this))},ii.Ma=function(){if(this.u=null,No(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ja(hi(this.jb,this),e)}},ii.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ua(10),_o(this),No(this))},ii.ib=function(){null!=this.v&&(this.v=null,_o(this),xo(this),Ua(19))},ii.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ua(2)):(this.l.info("Failed to ping google.com"),Ua(1))},ii.isActive=function(){return!!this.h&&this.h.isActive(this)},(ii=Fo.prototype).Ba=function(){},ii.Aa=function(){},ii.za=function(){},ii.ya=function(){},ii.isActive=function(){return!0},ii.Va=function(){},Bo.prototype.g=function(e,t){return new Uo(e,t)},fi(Uo,ua),Uo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ua(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Mo(e,null,e.Y),Io(e)},Uo.prototype.close=function(){wo(this.g)},Uo.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ha(e),e=n);t.j.push(new Fs(t.fb++,e)),3==t.H&&Io(t)},Uo.prototype.N=function(){this.g.h=null,delete this.j,wo(this.g),delete this.g,Uo.$.N.call(this)},fi($o,Ya),fi(jo,Xa),fi(zo,Fo),zo.prototype.Ba=function(){ca(this.g,"a")},zo.prototype.Aa=function(e){ca(this.g,new $o(e))},zo.prototype.za=function(e){ca(this.g,new jo)},zo.prototype.ya=function(){ca(this.g,"b")},fi(qo,function(){this.blockSize=-1}),qo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ho(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ho(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ho(this,r),i=0;break}}this.h=i,this.i+=t},qo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ko={};function Wo(e){return-128<=e&&128>e?function(e,t){var n=Ko;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Go([0|e],0>e?-1:0)}):new Go([0|e],0>e?-1:0)}function Qo(e){if(isNaN(e)||!isFinite(e))return Xo;if(0>e)return nl(Qo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Yo;return new Go(t,0)}var Yo=4294967296,Xo=Wo(0),Jo=Wo(1),Zo=Wo(16777216);function el(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function tl(e){return-1==e.h}function nl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Go(n,~e.h).add(Jo)}function rl(e,t){return e.add(nl(t))}function il(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function al(e,t){this.g=e,this.h=t}function sl(e,t){if(el(t))throw Error("division by zero");if(el(e))return new al(Xo,Xo);if(tl(e))return t=sl(nl(e),t),new al(nl(t.g),nl(t.h));if(tl(t))return t=sl(e,nl(t)),new al(nl(t.g),t.h);if(30<e.g.length){if(tl(e)||tl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Jo,r=t;0>=r.X(e);)n=ol(n),r=ol(r);var i=ll(n,1),a=ll(r,1);for(r=ll(r,2),n=ll(n,2);!el(r);){var s=a.add(r);0>=s.X(e)&&(i=i.add(n),a=s),r=ll(r,1),n=ll(n,1)}return t=rl(e,i.R(t)),new al(i,t)}for(i=Xo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(a=Qo(n)).R(t);tl(s)||0<s.X(e);)s=(a=Qo(n-=r)).R(t);el(a)&&(a=Jo),i=i.add(a),e=rl(e,s)}return new al(i,e)}function ol(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Go(n,e.h)}function ll(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Go(i,e.h)}(ii=Go.prototype).ea=function(){if(tl(this))return-nl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Yo+r)*t,t*=Yo}return e},ii.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(el(this))return"0";if(tl(this))return"-"+nl(this).toString(e);for(var t=Qo(Math.pow(e,6)),n=this,r="";;){var i=sl(n,t).g,a=((0<(n=rl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(el(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ii.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ii.X=function(e){return tl(e=rl(this,e))?-1:el(e)?0:1},ii.abs=function(){return tl(this)?nl(this):this},ii.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),s=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new Go(n,-2147483648&n[n.length-1]?-1:0)},ii.R=function(e){if(el(this)||el(e))return Xo;if(tl(this))return tl(e)?nl(this).R(nl(e)):nl(nl(this).R(e));if(tl(e))return nl(this.R(nl(e)));if(0>this.X(Zo)&&0>e.X(Zo))return Qo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,s=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,il(n,2*r+2*i),n[2*r+2*i+1]+=a*l,il(n,2*r+2*i+1),n[2*r+2*i+1]+=s*o,il(n,2*r+2*i+1),n[2*r+2*i+2]+=a*o,il(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Go(n,0)},ii.gb=function(e){return sl(this,e).h},ii.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Go(n,this.h&e.h)},ii.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Go(n,this.h|e.h)},ii.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Go(n,this.h^e.h)},Bo.prototype.createWebChannel=Bo.prototype.g,Uo.prototype.send=Uo.prototype.u,Uo.prototype.open=Uo.prototype.m,Uo.prototype.close=Uo.prototype.close,za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,qa.COMPLETE="complete",Ka.EventType=Qa,Qa.OPEN="a",Qa.CLOSE="b",Qa.ERROR="c",Qa.MESSAGE="d",ua.prototype.listen=ua.prototype.O,io.prototype.listenOnce=io.prototype.P,io.prototype.getLastError=io.prototype.Sa,io.prototype.getLastErrorCode=io.prototype.Ia,io.prototype.getStatus=io.prototype.da,io.prototype.getResponseJson=io.prototype.Wa,io.prototype.getResponseText=io.prototype.ja,io.prototype.send=io.prototype.ha,io.prototype.setWithCredentials=io.prototype.Oa,qo.prototype.digest=qo.prototype.l,qo.prototype.reset=qo.prototype.reset,qo.prototype.update=qo.prototype.j,Go.prototype.add=Go.prototype.add,Go.prototype.multiply=Go.prototype.R,Go.prototype.modulo=Go.prototype.gb,Go.prototype.compare=Go.prototype.X,Go.prototype.toNumber=Go.prototype.ea,Go.prototype.toString=Go.prototype.toString,Go.prototype.getBits=Go.prototype.D,Go.fromNumber=Qo,Go.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return nl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Qo(Math.pow(n,8)),i=Xo,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),o=parseInt(t.substring(a,a+s),n);8>s?(s=Qo(Math.pow(n,s)),i=i.R(s).add(Qo(o))):i=(i=i.R(r)).add(Qo(o))}return i};var ul=za,cl=qa,dl=Pa,hl=10,pl=11,fl=Xs,vl=Ka,ml=io,gl=qo,yl=Go;const bl="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wl.UNAUTHENTICATED=new wl(null),wl.GOOGLE_CREDENTIALS=new wl("google-credentials-uid"),wl.FIRST_PARTY=new wl("first-party-uid"),wl.MOCK_USER=new wl("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let _l="9.23.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new Tn("@firebase/firestore");function Il(){return Sl.logLevel}function Cl(e,...t){if(Sl.logLevel<=_n.DEBUG){const n=t.map(Tl);Sl.debug(`Firestore (${_l}): ${e}`,...n)}}function kl(e,...t){if(Sl.logLevel<=_n.ERROR){const n=t.map(Tl);Sl.error(`Firestore (${_l}): ${e}`,...n)}}function El(e,...t){if(Sl.logLevel<=_n.WARN){const n=t.map(Tl);Sl.warn(`Firestore (${_l}): ${e}`,...n)}}function Tl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(e="Unexpected state"){const t=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: `+e;throw kl(t),new Error(t)}function Al(e,t){e||xl()}function Nl(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vl extends an{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ol{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wl.UNAUTHENTICATED))}shutdown(){}}class Ml{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ll{constructor(e){this.t=e,this.currentUser=wl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Rl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rl,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{Cl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Cl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rl)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Cl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Al("string"==typeof t.accessToken),new Pl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Al(null===e||"string"==typeof e),new wl(e)}}class Fl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=wl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Bl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Fl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(wl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ul{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $l{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Cl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Cl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Cl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Cl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Al("string"==typeof e.token),this.T=e.token,new Ul(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=jl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ql(e,t){return e<t?-1:e>t?1:0}function Hl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vl(Dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vl(Dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Vl(Dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vl(Dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gl.fromMillis(Date.now())}static fromDate(e){return Gl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Gl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ql(this.nanoseconds,e.nanoseconds):ql(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Kl(e)}static min(){return new Kl(new Gl(0,0))}static max(){return new Kl(new Gl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t,n){void 0===t?t=0:t>e.length&&xl(),void 0===n?n=e.length-t:n>e.length-t&&xl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ql extends Wl{construct(e,t,n){return new Ql(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Vl(Dl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Ql(t)}static emptyPath(){return new Ql([])}}const Yl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xl extends Wl{construct(e,t,n){return new Xl(e,t,n)}static isValidIdentifier(e){return Yl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Vl(Dl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Vl(Dl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Vl(Dl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new Vl(Dl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xl(t)}static emptyPath(){return new Xl([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.path=e}static fromPath(e){return new Jl(Ql.fromString(e))}static fromName(e){return new Jl(Ql.fromString(e).popFirst(5))}static empty(){return new Jl(Ql.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ql.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ql.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jl(new Ql(e.slice()))}}function Zl(e){return new eu(e.readTime,e.key,-1)}class eu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new eu(Kl.min(),Jl.empty(),-1)}static max(){return new eu(Kl.max(),Jl.empty(),-1)}}function tu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Jl.comparator(e.documentKey,t.documentKey),0!==n?n:ql(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class nu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(e){if(e.code!==Dl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Cl("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new iu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof iu?t:iu.resolve(t)}catch(t){return iu.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):iu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):iu.reject(t)}static resolve(e){return new iu((t,n)=>{t(e)})}static reject(e){return new iu((t,n)=>{n(e)})}static waitFor(e){return new iu((t,n)=>{let r=0,i=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++i,a&&i===r&&t()},e=>n(e))}),a=!0,i===r&&t()})}static or(e){let t=iu.resolve(!1);for(const n of e)t=t.next(e=>e?iu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new iu((n,r)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++s,s===i&&n(a)},e=>r(e))}})}static doWhile(e,t){return new iu((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function au(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function ou(e){return null==e}function lu(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function uu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function du(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */su.ct=-1;class hu{constructor(e,t){this.comparator=e,this.root=t||fu.EMPTY}insert(e,t){return new hu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fu.BLACK,null,null))}remove(e){return new hu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:fu.RED,this.left=null!=r?r:fu.EMPTY,this.right=null!=i?i:fu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new fu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return fu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return fu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xl();if(this.right.isRed())throw xl();const e=this.left.check();if(e!==this.right.check())throw xl();return e+(this.isRed()?0:1)}}fu.EMPTY=null,fu.RED=!0,fu.BLACK=!1,fu.EMPTY=new class{constructor(){this.size=0}get key(){throw xl()}get value(){throw xl()}get color(){throw xl()}get left(){throw xl()}get right(){throw xl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new fu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vu{constructor(e){this.comparator=e,this.data=new hu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mu(this.data.getIterator())}getIteratorFrom(e){return new mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof vu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vu(this.comparator);return t.data=e,t}}class mu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.fields=e,e.sort(Xl.comparator)}static empty(){return new gu([])}unionWith(e){let t=new vu(Xl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new yu("Invalid base64 string: "+t):t}}(e);return new bu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ql(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bu.EMPTY_BYTE_STRING=new bu("");const wu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _u(e){if(Al(!!e),"string"==typeof e){let t=0;const n=wu.exec(e);if(Al(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Su(e.seconds),nanos:Su(e.nanos)}}function Su(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Iu(e){return"string"==typeof e?bu.fromBase64String(e):bu.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ku(e){const t=e.mapValue.fields.__previous_value__;return Cu(t)?ku(t):t}function Eu(e){const t=_u(e.mapValue.fields.__local_write_time__.timestampValue);return new Gl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t,n,r,i,a,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}class xu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au={};function Nu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cu(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:10:xl()}function Du(e,t){if(e===t)return!0;const n=Nu(e);if(n!==Nu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Eu(e).isEqual(Eu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_u(e.timestampValue),r=_u(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Iu(e.bytesValue).isEqual(Iu(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Su(e.geoPointValue.latitude)===Su(t.geoPointValue.latitude)&&Su(e.geoPointValue.longitude)===Su(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Su(e.integerValue)===Su(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Su(e.doubleValue),r=Su(t.doubleValue);return n===r?lu(n)===lu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hl(e.arrayValue.values||[],t.arrayValue.values||[],Du);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uu(n)!==uu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Du(n[i],r[i])))return!1;return!0}(e,t);default:return xl()}var r}function Vu(e,t){return void 0!==(e.values||[]).find(e=>Du(e,t))}function Ru(e,t){if(e===t)return 0;const n=Nu(e),r=Nu(t);if(n!==r)return ql(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ql(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Su(e.integerValue||e.doubleValue),r=Su(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pu(e.timestampValue,t.timestampValue);case 4:return Pu(Eu(e),Eu(t));case 5:return ql(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Iu(e),r=Iu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ql(n[i],r[i]);if(0!==e)return e}return ql(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ql(Su(e.latitude),Su(t.latitude));return 0!==n?n:ql(Su(e.longitude),Su(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ru(n[i],r[i]);if(e)return e}return ql(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Au&&t===Au)return 0;if(e===Au)return 1;if(t===Au)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let s=0;s<r.length&&s<a.length;++s){const e=ql(r[s],a[s]);if(0!==e)return e;const t=Ru(n[r[s]],i[a[s]]);if(0!==t)return t}return ql(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xl()}}function Pu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ql(e,t);const n=_u(e),r=_u(t),i=ql(n.seconds,r.seconds);return 0!==i?i:ql(n.nanos,r.nanos)}function Ou(e){return Mu(e)}function Mu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_u(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Iu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jl.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Mu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Mu(e.fields[i])}`;return n+"}"}(e.mapValue):xl();var t,n}function Lu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Fu(e){return!!e&&"integerValue"in e}function Bu(e){return!!e&&"arrayValue"in e}function Uu(e){return!!e&&"nullValue"in e}function $u(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ju(e){return!!e&&"mapValue"in e}function zu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return cu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=zu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zu(e.arrayValue.values[n]);return t}return Object.assign({},e)}class qu{constructor(e){this.value=e}static empty(){return new qu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=Xl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=zu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ju(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){cu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new qu(zu(this.value))}}function Hu(e){const t=[];return cu(e.fields,(e,n)=>{const r=new Xl([e]);if(ju(n)){const e=Hu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gu(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Gu{constructor(e,t,n,r,i,a,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Gu(e,0,Kl.min(),Kl.min(),Kl.min(),qu.empty(),0)}static newFoundDocument(e,t,n,r){return new Gu(e,1,t,Kl.min(),n,r,0)}static newNoDocument(e,t){return new Gu(e,2,t,Kl.min(),Kl.min(),qu.empty(),0)}static newUnknownDocument(e,t){return new Gu(e,3,t,Kl.min(),Kl.min(),qu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Kl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.position=e,this.inclusive=t}}function Wu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(r=a.field.isKeyField()?Jl.comparator(Jl.fromName(s.referenceValue),n.key):Ru(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Qu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Du(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{}class Zu extends Ju{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new sc(e,t,n):"array-contains"===t?new cc(e,n):"in"===t?new dc(e,n):"not-in"===t?new hc(e,n):"array-contains-any"===t?new pc(e,n):new Zu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new oc(e,n):new lc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ru(t,this.value)):null!==t&&Nu(this.value)===Nu(t)&&this.matchesComparison(Ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ec extends Ju{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ec(e,t)}matches(e){return tc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tc(e){return"and"===e.op}function nc(e){return function(e){for(const t of e.filters)if(t instanceof ec)return!1;return!0}(e)&&tc(e)}function rc(e){if(e instanceof Zu)return e.field.canonicalString()+e.op.toString()+Ou(e.value);if(nc(e))return e.filters.map(e=>rc(e)).join(",");{const t=e.filters.map(e=>rc(e)).join(",");return`${e.op}(${t})`}}function ic(e,t){return e instanceof Zu?(n=e,(r=t)instanceof Zu&&n.op===r.op&&n.field.isEqual(r.field)&&Du(n.value,r.value)):e instanceof ec?function(e,t){return t instanceof ec&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ic(n,t.filters[r]),!0)}(e,t):void xl();var n,r}function ac(e){return e instanceof Zu?`${(t=e).field.canonicalString()} ${t.op} ${Ou(t.value)}`:e instanceof ec?function(e){return e.op.toString()+" {"+e.getFilters().map(ac).join(" ,")+"}"}(e):"Filter";var t}class sc extends Zu{constructor(e,t,n){super(e,t,n),this.key=Jl.fromName(n.referenceValue)}matches(e){const t=Jl.comparator(e.key,this.key);return this.matchesComparison(t)}}class oc extends Zu{constructor(e,t){super(e,"in",t),this.keys=uc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lc extends Zu{constructor(e,t){super(e,"not-in",t),this.keys=uc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Jl.fromName(e.referenceValue))}class cc extends Zu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bu(t)&&Vu(t.arrayValue,this.value)}}class dc extends Zu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vu(this.value.arrayValue,t)}}class hc extends Zu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vu(this.value.arrayValue,t)}}class pc extends Zu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Vu(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t=null,n=[],r=[],i=null,a=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=s,this.dt=null}}function vc(e,t=null,n=[],r=[],i=null,a=null,s=null){return new fc(e,t,n,r,i,a,s)}function mc(e){const t=Nl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>rc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),ou(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ou(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ou(e)).join(",")),t.dt=e}return t.dt}function gc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ic(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qu(e.startAt,t.startAt)&&Qu(e.endAt,t.endAt)}function yc(e){return Jl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t=null,n=[],r=[],i=null,a="F",s=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function wc(e){return new bc(e)}function _c(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ic(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Cc(e){return null!==e.collectionGroup}function kc(e){const t=Nl(e);if(null===t.wt){t.wt=[];const e=Ic(t),n=Sc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Yu(e)),t.wt.push(new Yu(Xl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Yu(Xl.keyField(),e))}}}return t.wt}function Ec(e){const t=Nl(e);if(!t._t)if("F"===t.limitType)t._t=vc(t.path,t.collectionGroup,kc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of kc(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Yu(i.field,t))}const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;t._t=vc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Tc(e,t){t.getFirstInequalityField(),Ic(e);const n=e.filters.concat([t]);return new bc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xc(e,t,n){return new bc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ac(e,t){return gc(Ec(e),Ec(t))&&e.limitType===t.limitType}function Nc(e){return`${mc(Ec(e))}|lt:${e.limitType}`}function Dc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>ac(e)).join(", ")}]`),ou(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ou(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ou(e)).join(",")),`Target(${t})`}(Ec(e))}; limitType=${e.limitType})`}function Vc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Wu(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,kc(n),r)||n.endAt&&!function(e,t,n){const r=Wu(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,kc(n),r)));var n,r}function Rc(e){return(t,n)=>{let r=!1;for(const i of kc(e)){const e=Pc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Pc(e,t,n){const r=e.field.isKeyField()?Jl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ru(r,i):xl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xl()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return du(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new hu(Jl.comparator);function Lc(){return Mc}const Fc=new hu(Jl.comparator);function Bc(...e){let t=Fc;for(const n of e)t=t.insert(n.key,n);return t}function Uc(e){let t=Fc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $c(){return zc()}function jc(){return zc()}function zc(){return new Oc(e=>e.toString(),(e,t)=>e.isEqual(t))}const qc=new hu(Jl.comparator),Hc=new vu(Jl.comparator);function Gc(...e){let t=Hc;for(const n of e)t=t.add(n);return t}const Kc=new vu(ql);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(t)?"-0":t}}function Qc(e){return{integerValue:""+e}}function Yc(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!lu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Qc(t):Wc(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function Jc(e,t,n){return e instanceof td?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Cu(t)&&(t=ku(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nd?rd(e,t):e instanceof id?ad(e,t):function(e,t){const n=ed(e,t),r=od(n)+od(e.gt);return Fu(n)&&Fu(e.gt)?Qc(r):Wc(e.serializer,r)}(e,t)}function Zc(e,t,n){return e instanceof nd?rd(e,t):e instanceof id?ad(e,t):n}function ed(e,t){return e instanceof sd?Fu(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}class td extends Xc{}class nd extends Xc{constructor(e){super(),this.elements=e}}function rd(e,t){const n=ld(t);for(const r of e.elements)n.some(e=>Du(e,r))||n.push(r);return{arrayValue:{values:n}}}class id extends Xc{constructor(e){super(),this.elements=e}}function ad(e,t){let n=ld(t);for(const r of e.elements)n=n.filter(e=>!Du(e,r));return{arrayValue:{values:n}}}class sd extends Xc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function od(e){return Su(e.integerValue||e.doubleValue)}function ld(e){return Bu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.field=e,this.transform=t}}class cd{constructor(e,t){this.version=e,this.transformResults=t}}class dd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dd}static exists(e){return new dd(void 0,e)}static updateTime(e){return new dd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class pd{}function fd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cd(e.key,dd.none()):new bd(e.key,e.data,dd.none());{const n=e.data,r=qu.empty();let i=new vu(Xl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new wd(e.key,r,new gu(i.toArray()),dd.none())}}function vd(e,t,n){var r;e instanceof bd?function(e,t,n){const r=e.value.clone(),i=Sd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wd?function(e,t,n){if(!hd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Sd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_d(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function md(e,t,n,r){return e instanceof bd?function(e,t,n,r){if(!hd(e.precondition,t))return n;const i=e.value.clone(),a=Id(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wd?function(e,t,n,r){if(!hd(e.precondition,t))return n;const i=Id(e.fieldTransforms,r,t),a=t.data;return a.setAll(_d(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,a=n,hd(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function gd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ed(r.transform,e||null);null!=i&&(null===n&&(n=qu.empty()),n.set(r.field,i))}return n||null}function yd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Hl(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof nd&&r instanceof nd||n instanceof id&&r instanceof id?Hl(n.elements,r.elements,Du):n instanceof sd&&r instanceof sd?Du(n.gt,r.gt):n instanceof td&&r instanceof td);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class bd extends pd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wd extends pd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _d(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Sd(e,t,n){const r=new Map;Al(e.length===n.length);for(let i=0;i<n.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,Zc(s,o,n[i]))}return r}function Id(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,Jc(e,a,t))}return r}class Cd extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kd extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=md(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=md(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=jc();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(r.key)?null:s;const o=fd(a,s);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Kl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gc())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,(e,t)=>yd(e,t))&&Hl(this.baseMutations,e.baseMutations,(e,t)=>yd(e,t))}}class Td{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Al(e.mutations.length===n.length);let r=qc;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new Td(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nd,Dd;function Vd(e){if(void 0===e)return kl("GRPC error has no .code"),Dl.UNKNOWN;switch(e){case Nd.OK:return Dl.OK;case Nd.CANCELLED:return Dl.CANCELLED;case Nd.UNKNOWN:return Dl.UNKNOWN;case Nd.DEADLINE_EXCEEDED:return Dl.DEADLINE_EXCEEDED;case Nd.RESOURCE_EXHAUSTED:return Dl.RESOURCE_EXHAUSTED;case Nd.INTERNAL:return Dl.INTERNAL;case Nd.UNAVAILABLE:return Dl.UNAVAILABLE;case Nd.UNAUTHENTICATED:return Dl.UNAUTHENTICATED;case Nd.INVALID_ARGUMENT:return Dl.INVALID_ARGUMENT;case Nd.NOT_FOUND:return Dl.NOT_FOUND;case Nd.ALREADY_EXISTS:return Dl.ALREADY_EXISTS;case Nd.PERMISSION_DENIED:return Dl.PERMISSION_DENIED;case Nd.FAILED_PRECONDITION:return Dl.FAILED_PRECONDITION;case Nd.ABORTED:return Dl.ABORTED;case Nd.OUT_OF_RANGE:return Dl.OUT_OF_RANGE;case Nd.UNIMPLEMENTED:return Dl.UNIMPLEMENTED;case Nd.DATA_LOSS:return Dl.DATA_LOSS;default:return xl()}}(Dd=Nd||(Nd={}))[Dd.OK=0]="OK",Dd[Dd.CANCELLED=1]="CANCELLED",Dd[Dd.UNKNOWN=2]="UNKNOWN",Dd[Dd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dd[Dd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dd[Dd.NOT_FOUND=5]="NOT_FOUND",Dd[Dd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dd[Dd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dd[Dd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dd[Dd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dd[Dd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dd[Dd.ABORTED=10]="ABORTED",Dd[Dd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dd[Dd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dd[Dd.INTERNAL=13]="INTERNAL",Dd[Dd.UNAVAILABLE=14]="UNAVAILABLE",Dd[Dd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rd{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Pd}static getOrCreateInstance(){return null===Pd&&(Pd=new Rd),Pd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Pd=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Od=new yl([4294967295,4294967295],0);function Md(e){const t=(new TextEncoder).encode(e),n=new gl;return n.update(t),new Uint8Array(n.digest())}function Ld(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new yl([n,r],0),new yl([i,a],0)]}class Fd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bd(`Invalid padding: ${t}`);if(n<0)throw new Bd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Bd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Bd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=yl.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(yl.fromNumber(n)));return 1===r.compare(Od)&&(r=new yl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Md(e),[n,r]=Ld(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Fd(i,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.It)return;const t=Md(e),[n,r]=Ld(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,$d.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ud(Kl.min(),r,new hu(ql),Lc(),Gc())}}class $d{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $d(n,t,Gc(),Gc(),Gc())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class zd{constructor(e,t){this.targetId=e,this.Vt=t}}class qd{constructor(e,t,n=bu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Hd{constructor(){this.St=0,this.Dt=Wd(),this.Ct=bu.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gc(),t=Gc(),n=Gc();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xl()}}),new $d(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Wd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Lc(),this.zt=Kd(),this.Wt=new hu(ql)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:xl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const a=i.target;if(yc(a))if(0===r){const e=new Jl(a.path);this.Yt(n,e,Gu.newNoDocument(e,Kl.min()))}else Al(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Rd.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,s,o,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(a=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===(o=null==c?void 0:c.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:a=0},hashCount:s=0}=n;let o,l;try{o=Iu(i).toUint8Array()}catch(u){if(u instanceof yu)return El("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new Fd(o,a,s)}catch(u){return El(u instanceof Bd?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(a)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&yc(i.target)){const t=new Jl(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Gu.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Gc();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Ud(e,t,this.Wt,this.jt,n);return this.jt=Lc(),this.zt=Kd(),this.Wt=new hu(ql),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Hd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vu(ql),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Cl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Hd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Kd(){return new hu(Jl.comparator)}function Wd(){return new hu(Jl.comparator)}const Qd=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Yd=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Xd=(()=>({and:"AND",or:"OR"}))();class Jd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(e,t){return e.useProto3Json||ou(t)?t:{value:t}}function eh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function th(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nh(e,t){return eh(e,t.toTimestamp())}function rh(e){return Al(!!e),Kl.fromTimestamp(function(e){const t=_u(e);return new Gl(t.seconds,t.nanos)}(e))}function ih(e,t){return(n=e,new Ql(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function ah(e){const t=Ql.fromString(e);return Al(Ih(t)),t}function sh(e,t){return ih(e.databaseId,t.path)}function oh(e,t){const n=ah(t);if(n.get(1)!==e.databaseId.projectId)throw new Vl(Dl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vl(Dl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jl(ch(n))}function lh(e,t){return ih(e.databaseId,t)}function uh(e){return new Ql(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ch(e){return Al(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function dh(e,t,n){return{name:sh(e,t),fields:n.value.mapValue.fields}}function hh(e,t){return{documents:[lh(e,t.path)]}}function ph(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=lh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=lh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return _h(ec.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:bh((t=e).field),direction:mh(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Zd(e,t.limit);var o,l;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),n}function fh(e){let t=function(e){const t=ah(e);return 4===t.length?Ql.emptyPath():ch(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Al(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=vh(e);return t instanceof ec&&nc(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>{return new Yu(wh((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ou(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ku(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Ku(n,t)}(n.endAt)),function(e,t,n,r,i,a,s,o){return new bc(e,t,n,r,i,a,s,o)}(t,i,s,a,o,"F",l,u)}function vh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wh(e.unaryFilter.field);return Zu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=wh(e.unaryFilter.field);return Zu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wh(e.unaryFilter.field);return Zu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wh(e.unaryFilter.field);return Zu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xl()}}(e):void 0!==e.fieldFilter?(t=e,Zu.create(wh(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xl()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return ec.create(e.compositeFilter.filters.map(e=>vh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xl()}}(e.compositeFilter.op))}(e):xl();var t}function mh(e){return Qd[e]}function gh(e){return Yd[e]}function yh(e){return Xd[e]}function bh(e){return{fieldPath:e.canonicalString()}}function wh(e){return Xl.fromServerFormat(e.fieldPath)}function _h(e){return e instanceof Zu?function(e){if("=="===e.op){if($u(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NAN"}};if(Uu(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($u(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NAN"}};if(Uu(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(e.field),op:gh(e.op),value:e.value}}}(e):e instanceof ec?function(e){const t=e.getFilters().map(e=>_h(e));return 1===t.length?t[0]:{compositeFilter:{op:yh(e.op),filters:t}}}(e):xl()}function Sh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ih(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,n,r,i=Kl.min(),a=Kl.min(),s=bu.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new Ch(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.fe=e}}function Eh(e){const t=fh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xc(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.rn=new xh}addToCollectionParentIndex(e,t){return this.rn.add(t),iu.resolve()}getCollectionParents(e,t){return iu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return iu.resolve()}deleteFieldIndex(e,t){return iu.resolve()}getDocumentsMatchingTarget(e,t){return iu.resolve(null)}getIndexType(e,t){return iu.resolve(0)}getFieldIndexes(e,t){return iu.resolve([])}getNextCollectionGroupToUpdate(e){return iu.resolve(null)}getMinOffset(e,t){return iu.resolve(eu.min())}getMinOffsetFromCollectionGroup(e,t){return iu.resolve(eu.min())}updateCollectionGroup(e,t,n){return iu.resolve()}updateIndexEntries(e,t){return iu.resolve()}}class xh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new vu(Ql.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new vu(Ql.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ah(0)}static Mn(){return new Ah(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.changes=new Oc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?iu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&md(n.mutation,e,gu.empty(),Gl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Gc()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Gc()){const r=$c();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Bc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$c();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Lc();const a=zc(),s=zc();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof wd)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),md(s.mutation,t,s.mutation.getFieldMask(),Gl.now())):a.set(t.key,gu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Dh(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=zc();let r=new hu((e,t)=>e-t),i=Gc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let s=n.get(e)||gu.empty();s=i.applyToLocalView(a,s),n.set(e,s);const o=(r.get(i.batchId)||Gc()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const a=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,u=jc();l.forEach(e=>{if(!i.has(e)){const r=fd(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,u))}return iu.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return r=t,Jl.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Cc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var r}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):iu.resolve($c());let s=-1,o=i;return a.next(t=>iu.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?iu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Gc())).next(e=>({batchId:s,changes:Uc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jl(t)).next(e=>{let t=Bc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Bc();return this.indexManager.getCollectionParents(e,r).next(a=>iu.forEach(a,a=>{const s=(o=t,l=a.child(r),new bc(l,null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt));var o,l;return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Gu.newInvalidDocument(r)))});let n=Bc();return e.forEach((e,i)=>{const a=r.get(e);void 0!==a&&md(a.mutation,i,gu.empty(),Gl.now()),Vc(t,i)&&(n=n.insert(e,i))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return iu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:rh(n.createTime)}),iu.resolve()}getNamedQuery(e,t){return iu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(n=t).name,query:Eh(n.bundledQuery),readTime:rh(n.readTime)}),iu.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.overlays=new hu(Jl.comparator),this.ls=new Map}getOverlay(e,t){return iu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$c();return iu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),iu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),iu.resolve()}getOverlaysForCollection(e,t,n){const r=$c(),i=t.length+1,a=new Jl(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return iu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new hu((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$c(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=$c(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return iu.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new xd(t,n));let i=this.ls.get(t);void 0===i&&(i=Gc(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.fs=new vu(Mh.ds),this.ws=new vu(Mh._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Mh(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Mh(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Jl(new Ql([])),n=new Mh(t,e),r=new Mh(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Jl(new Ql([])),n=new Mh(t,e),r=new Mh(t,e+1);let i=Gc();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Mh(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mh{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Jl.comparator(e.key,t.key)||ql(e.As,t.As)}static _s(e,t){return ql(e.As,t.As)||Jl.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vu(Mh.ds)}checkEmpty(e){return iu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ed(i,t,n,r);this.mutationQueue.push(a);for(const s of r)this.Rs=this.Rs.add(new Mh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return iu.resolve(a)}lookupMutationBatch(e,t){return iu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return iu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return iu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return iu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mh(t,0),r=new Mh(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),iu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vu(ql);return t.forEach(e=>{const t=new Mh(e,0),r=new Mh(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),iu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Jl.isDocumentKey(i)||(i=i.child(""));const a=new Mh(new Jl(i),0);let s=new vu(ql);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)},a),iu.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Al(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return iu.forEach(t.mutations,r=>{const i=new Mh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Mh(t,0),r=this.Rs.firstAfterOrEqual(n);return iu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,iu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.Ds=e,this.docs=new hu(Jl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return iu.resolve(n?n.document.mutableCopy():Gu.newInvalidDocument(t))}getEntries(e,t){let n=Lc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Gu.newInvalidDocument(e))}),iu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Lc();const a=t.path,s=new Jl(a.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||tu(Zl(s),n)<=0||(r.has(s.key)||Vc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return iu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){xl()}Cs(e,t){return iu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Bh(this)}getSize(e){return iu.resolve(this.size)}}class Bh extends Nh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),iu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.persistence=e,this.xs=new Oc(e=>mc(e),gc),this.lastRemoteSnapshotVersion=Kl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Oh,this.targetCount=0,this.Ms=Ah.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),iu.resolve()}getLastRemoteSnapshotVersion(e){return iu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return iu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),iu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),iu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ah(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,iu.resolve()}updateTargetData(e,t){return this.Fn(t),iu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,iu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((a,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),iu.waitFor(i).next(()=>r)}getTargetCount(e){return iu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return iu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),iu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),iu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),iu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return iu.resolve(n)}containsKey(e,t){return iu.resolve(this.ks.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.$s={},this.overlays={},this.Os=new su(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Uh(this),this.indexManager=new Th,this.remoteDocumentCache=new Fh(e=>this.referenceDelegate.Ls(e)),this.serializer=new kh(t),this.qs=new Rh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ph,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Lh(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Cl("MemoryPersistence","Starting transaction:",e);const r=new jh(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return iu.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class jh extends nu{constructor(e){super(),this.currentSequenceNumber=e}}class zh{constructor(e){this.persistence=e,this.Qs=new Oh,this.js=null}static zs(e){return new zh(e)}get Ws(){if(this.js)return this.js;throw xl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),iu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),iu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),iu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return iu.forEach(this.Ws,n=>{const r=Jl.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Kl.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return iu.or([()=>iu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Gc(),r=Gc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qh(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(_c(t))return iu.resolve(null);let n=Ec(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=xc(t,null,"F"),n=Ec(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Gc(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.ji(t,r);return this.zi(t,a,i,n.readTime)?this.Ki(e,xc(t,null,"F")):this.Wi(e,a,t,n)}))})))}Gi(e,t,n,r){return _c(t)||r.isEqual(Kl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const a=this.ji(t,i);return this.zi(t,a,n,r)?this.Qi(e,t):(Il()<=_n.DEBUG&&Cl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dc(t)),this.Wi(e,a,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kl.fromTimestamp(1e9===r?new Gl(n+1,0):new Gl(n,r));return new eu(i,Jl.empty(),t)}(r,-1)))})}ji(e,t){let n=new vu(Rc(e));return t.forEach((t,r)=>{Vc(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Il()<=_n.DEBUG&&Cl("QueryEngine","Using full collection scan to execute query:",Dc(t)),this.Ui.getDocumentsMatchingQuery(e,t,eu.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new hu(ql),this.Yi=new Oc(e=>mc(e),gc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vh(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}async function Kh(e,t){const n=Nl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],a=[];let s=Gc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:i,addedBatchIds:a}))})})}function Wh(e){const t=Nl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Qh(e,t){const n=Nl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach((a,o)=>{const l=i.get(o);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,a.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);var c,d,h;null!==t.targetMismatches.get(o)?u=u.withResumeToken(bu.EMPTY_BYTE_STRING,Kl.min()).withLastLimboFreeSnapshotVersion(Kl.min()):a.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(a.resumeToken,r)),i=i.insert(o,u),d=u,h=a,(0===(c=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&s.push(n.Bs.updateTargetData(e,u))});let o=Lc(),l=Gc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(function(e,t,n){let r=Gc(),i=Gc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Lc();return n.forEach((n,a)=>{const s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Kl.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Cl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),{nr:r,sr:i}})}(e,a,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(Kl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return iu.waitFor(s).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=i,e))}function Yh(e,t){const n=Nl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Xh(e,t,n){const r=Nl(e),i=r.Ji.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(s){if(!au(s))throw s;Cl("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Jh(e,t,n){const r=Nl(e);let i=Kl.min(),a=Gc();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Nl(e),i=r.Yi.get(n);return void 0!==i?iu.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Ec(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Kl.min(),n?a:Gc())).next(e=>(function(e,t,n){let r=e.Xi.get(t)||Kl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:a})))}class Zh{constructor(){this.activeTargetIds=Kc}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ep{constructor(){this.Hr=new Zh,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Zh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{Yr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Cl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Cl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp=null;function ip(){return null===rp?rp=268435456+Math.round(2147483648*Math.random()):rp++,"0x"+rp.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const ap={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="WebChannelConnection";class lp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const a=ip(),s=this.To(e,t);Cl("RestConnection",`Sending RPC '${e}' ${a}:`,s,n);const o={};return this.Eo(o,r,i),this.Ao(e,s,o,n).then(t=>(Cl("RestConnection",`Received RPC '${e}' ${a}: `,t),t),t=>{throw El("RestConnection",`RPC '${e}' ${a} failed with error: `,t,"url: ",s,"request:",n),t})}vo(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_l,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=ap[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=ip();return new Promise((a,s)=>{const o=new ml;o.setWithCredentials(!0),o.listenOnce(cl.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ul.NO_ERROR:const t=o.getResponseJson();Cl(op,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),a(t);break;case ul.TIMEOUT:Cl(op,`RPC '${e}' ${i} timed out`),s(new Vl(Dl.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:const n=o.getStatus();if(Cl(op,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dl).indexOf(t)>=0?t:Dl.UNKNOWN}(t.status);s(new Vl(e,t.message))}else s(new Vl(Dl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Vl(Dl.UNAVAILABLE,"Connection failed."));break;default:xl()}}finally{Cl(op,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Cl(op,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=ip(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=new Bo,s=Ma(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new fl({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");Cl(op,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=a.createWebChannel(u,o);let d=!1,h=!1;const p=new sp({ro:t=>{h?Cl(op,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Cl(op,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),Cl(op,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(c,vl.EventType.OPEN,()=>{h||Cl(op,`RPC '${e}' stream ${r} transport opened.`)}),f(c,vl.EventType.CLOSE,()=>{h||(h=!0,Cl(op,`RPC '${e}' stream ${r} transport closed`),p.wo())}),f(c,vl.EventType.ERROR,t=>{h||(h=!0,El(op,`RPC '${e}' stream ${r} transport errored:`,t),p.wo(new Vl(Dl.UNAVAILABLE,"The operation could not be completed")))}),f(c,vl.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Al(!!i);const a=i,s=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(s){Cl(op,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=Nd[e];if(void 0!==t)return Vd(t)}(t),i=s.message;void 0===n&&(n=Dl.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,p.wo(new Vl(n,i)),c.close()}else Cl(op,`RPC '${e}' stream ${r} received:`,i),p._o(i)}}),f(s,dl.STAT_EVENT,t=>{t.stat===hl?Cl(op,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===pl&&Cl(op,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function up(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(e){return new Jd(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Cl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,n,r,i,a,s,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new dp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Dl.RESOURCE_EXHAUSTED?(kl(t.toString()),kl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Dl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new Vl(Dl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Cl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Cl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pp extends hp{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:xl(),a=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Al(void 0===t||"string"==typeof t),bu.fromBase64String(t||"")):(Al(void 0===t||t instanceof Uint8Array),bu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Dl.UNKNOWN:Vd(e.code);return new Vl(t,e.message||"")}(o);n=new qd(i,a,s,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=oh(e,r.document.name),a=rh(r.document.updateTime),s=r.document.createTime?rh(r.document.createTime):Kl.min(),o=new qu({mapValue:{fields:r.document.fields}}),l=Gu.newFoundDocument(i,a,s,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new jd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=oh(e,r.document),a=r.readTime?rh(r.readTime):Kl.min(),s=Gu.newNoDocument(i,a),o=r.removedTargetIds||[];n=new jd([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=oh(e,r.document),a=r.removedTargetIds||[];n=new jd([],a,i,null)}else{if(!("filter"in t))return xl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new Ad(r,i),s=e.targetId;n=new zd(s,a)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Kl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Kl.min():t.readTime?rh(t.readTime):Kl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=uh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=yc(r)?{documents:hh(e,r)}:{query:ph(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=th(e,t.resumeToken);const r=Zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Kl.min())>0){n.readTime=eh(e,t.snapshotVersion.toTimestamp());const r=Zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=uh(this.serializer),t.removeTarget=e,this.Wo(t)}}class fp extends hp{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Al(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Al(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?rh(e.updateTime):rh(t);return n.isEqual(Kl.min())&&(n=rh(t)),new cd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=rh(e.commitTime);return this.listener.cu(n,t)}return Al(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof bd)n={update:dh(e,t.key,t.value)};else if(t instanceof Cd)n={delete:sh(e,t.key)};else if(t instanceof wd)n={update:dh(e,t.key,t.data),updateMask:Sh(t.fieldMask)};else{if(!(t instanceof kd))return xl();n={verify:sh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof td)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof id)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw xl()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:nh(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:xl())),n;var r,i}(this.serializer,e))};this.Wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Vl(Dl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Io(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vl(Dl.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.vo(e,t,n,i,a,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vl(Dl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class mp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(kl(t),this.mu=!1):Cl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Ep(this)&&(Cl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Nl(e);t.vu.add(4),await bp(t),t.bu.set("Unknown"),t.vu.delete(4),await yp(t)}(this))})}),this.bu=new mp(n,r)}}async function yp(e){if(Ep(e))for(const t of e.Ru)await t(!0)}async function bp(e){for(const t of e.Ru)await t(!1)}function wp(e,t){const n=Nl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),kp(n)?Cp(n):zp(n).Ko()&&Sp(n,t))}function _p(e,t){const n=Nl(e),r=zp(n);n.Au.delete(t),r.Ko()&&Ip(n,t),0===n.Au.size&&(r.Ko()?r.jo():Ep(n)&&n.bu.set("Unknown"))}function Sp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Kl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zp(e).su(t)}function Ip(e,t){e.Vu.qt(t),zp(e).iu(t)}function Cp(e){e.Vu=new Gd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),zp(e).start(),e.bu.gu()}function kp(e){return Ep(e)&&!zp(e).Uo()&&e.Au.size>0}function Ep(e){return 0===Nl(e).vu.size}function Tp(e){e.Vu=void 0}async function xp(e){e.Au.forEach((t,n)=>{Sp(e,t)})}async function Ap(e,t){Tp(e),kp(e)?(e.bu.Iu(t),Cp(e)):e.bu.set("Unknown")}async function Np(e,t,n){if(e.bu.set("Online"),t instanceof qd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(r){Cl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Dp(e,r)}else if(t instanceof jd?e.Vu.Ht(t):t instanceof zd?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Kl.min()))try{const t=await Wh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(bu.EMPTY_BYTE_STRING,r.snapshotVersion)),Ip(e,t);const i=new Ch(r.target,t,n,r.sequenceNumber);Sp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){Cl("RemoteStore","Failed to raise snapshot:",i),await Dp(e,i)}}async function Dp(e,t,n){if(!au(t))throw t;e.vu.add(1),await bp(e),e.bu.set("Offline"),n||(n=()=>Wh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Cl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await yp(e)})}function Vp(e,t){return t().catch(n=>Dp(e,n,t))}async function Rp(e){const t=Nl(e),n=qp(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Pp(t);)try{const e=await Yh(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Op(t,e)}catch(i){await Dp(t,i)}Mp(t)&&Lp(t)}function Pp(e){return Ep(e)&&e.Eu.length<10}function Op(e,t){e.Eu.push(t);const n=qp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Mp(e){return Ep(e)&&!qp(e).Uo()&&e.Eu.length>0}function Lp(e){qp(e).start()}async function Fp(e){qp(e).hu()}async function Bp(e){const t=qp(e);for(const n of e.Eu)t.uu(n.mutations)}async function Up(e,t,n){const r=e.Eu.shift(),i=Td.from(r,t,n);await Vp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Rp(e)}async function $p(e,t){t&&qp(e).ou&&await async function(e,t){if(function(e){switch(e){default:return xl();case Dl.CANCELLED:case Dl.UNKNOWN:case Dl.DEADLINE_EXCEEDED:case Dl.RESOURCE_EXHAUSTED:case Dl.INTERNAL:case Dl.UNAVAILABLE:case Dl.UNAUTHENTICATED:return!1;case Dl.INVALID_ARGUMENT:case Dl.NOT_FOUND:case Dl.ALREADY_EXISTS:case Dl.PERMISSION_DENIED:case Dl.FAILED_PRECONDITION:case Dl.ABORTED:case Dl.OUT_OF_RANGE:case Dl.UNIMPLEMENTED:case Dl.DATA_LOSS:return!0}}(n=t.code)&&n!==Dl.ABORTED){const n=e.Eu.shift();qp(e).Qo(),await Vp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Rp(e)}var n}(e,t),Mp(e)&&Lp(e)}async function jp(e,t){const n=Nl(e);n.asyncQueue.verifyOperationInProgress(),Cl("RemoteStore","RemoteStore received new credentials");const r=Ep(n);n.vu.add(3),await bp(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await yp(n)}function zp(e){return e.Su||(e.Su=function(e,t,n){const r=Nl(e);return r.fu(),new pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:xp.bind(null,e),ao:Ap.bind(null,e),nu:Np.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),kp(e)?Cp(e):e.bu.set("Unknown")):(await e.Su.stop(),Tp(e))})),e.Su}function qp(e){return e.Du||(e.Du=function(e,t,n){const r=Nl(e);return r.fu(),new fp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Fp.bind(null,e),ao:$p.bind(null,e),au:Bp.bind(null,e),cu:Up.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Rp(e)):(await e.Du.stop(),e.Eu.length>0&&(Cl("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Hp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Rl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,s=new Hp(e,t,a,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vl(Dl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(e,t){if(kl("AsyncQueue",`${t}: ${e}`),au(e))return new Vl(Dl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Jl.comparator(t.key,n.key):(e,t)=>Jl.comparator(e.key,t.key),this.keyedMap=Bc(),this.sortedSet=new hu(this.comparator)}static emptySet(e){return new Kp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.Cu=new hu(Jl.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):xl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Qp{constructor(e,t,n,r,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new Qp(e,t,Kp.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.Nu=void 0,this.listeners=[]}}class Xp{constructor(){this.queries=new Oc(e=>Nc(e),Ac),this.onlineState="Unknown",this.ku=new Set}}function Jp(e,t){const n=Nl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&ef(n)}function Zp(e,t,n){const r=Nl(e),i=r.queries.get(t);if(i)for(const a of i.listeners)a.onError(n);r.queries.delete(t)}function ef(e){e.ku.forEach(e=>{e.next()})}class tf{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Qp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.key=e}}class rf{constructor(e){this.key=e}}class af{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gc(),this.mutatedKeys=Gc(),this.tc=Rc(e),this.ec=new Kp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Wp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Vc(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.rc(u,c)||(n.track({type:2,doc:c}),p=!0,(o&&this.tc(c,o)>0||l&&this.tc(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(o||l)&&(s=!0)),p&&(c?(a=a.add(c),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:a,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const a=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,o=s!==this.Xu;return this.Xu=s,0!==i.length||o?{snapshot:new Qp(this.query,e.ec,r,i,e.mutatedKeys,0===s,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Wp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gc(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new rf(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new nf(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Gc();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Qp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class sf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class of{constructor(e){this.key=e,this.fc=!1}}class lf{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Oc(e=>Nc(e),Ac),this._c=new Map,this.mc=new Set,this.gc=new hu(Jl.comparator),this.yc=new Map,this.Ic=new Oh,this.Tc={},this.Ec=new Map,this.Ac=Ah.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function uf(e,t){const n=function(e){const t=Nl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ef.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ff.bind(null,t),t.dc.nu=Jp.bind(null,t.eventManager),t.dc.Pc=Zp.bind(null,t.eventManager),t}(e);let r,i;const a=n.wc.get(t);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const e=await function(e,t){const n=Nl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,iu.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new Ch(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}(n.localStore,Ec(t)),a=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Jh(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,i)));const a=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,a);return _f(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const a=await Jh(e.localStore,t,!0),s=new af(t,a.ir),o=s.sc(a.documents),l=$d.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(o,e.isPrimaryClient,l);_f(e,n,u.cc);const c=new sf(t,n,s);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}(n,t,r,"current"===a,e.resumeToken),n.isPrimaryClient&&wp(n.remoteStore,e)}return i}async function cf(e,t){const n=Nl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!Ac(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Xh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_p(n.remoteStore,r.targetId),bf(n,r.targetId)}).catch(ru)):(bf(n,r.targetId),await Xh(n.localStore,r.targetId,!0))}async function df(e,t,n){const r=function(e){const t=Nl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mf.bind(null,t),t}(e);try{const e=await function(e,t){const n=Nl(e),r=Gl.now(),i=t.reduce((e,t)=>e.add(t.key),Gc());let a,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Lc(),l=Gc();return n.Zi.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{a=i;const s=[];for(const e of t){const t=gd(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new wd(e.key,t,Hu(t.value.mapValue),dd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Uc(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new hu(ql)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Cf(r,e.changes),await Rp(r.remoteStore)}catch(i){const e=Gp(i,"Failed to persist write");n.reject(e)}}async function hf(e,t){const n=Nl(e);try{const e=await Qh(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Al(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Al(r.fc):e.removedDocuments.size>0&&(Al(r.fc),r.fc=!1))}),await Cf(n,e,t)}catch(r){await ru(r)}}function pf(e,t,n){const r=Nl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Nl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&ef(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ff(e,t,n){const r=Nl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),a=i&&i.key;if(a){let e=new hu(Jl.comparator);e=e.insert(a,Gu.newNoDocument(a,Kl.min()));const n=Gc().add(a),i=new Ud(Kl.min(),new Map,new hu(ql),e,n);await hf(r,i),r.gc=r.gc.remove(a),r.yc.delete(t),If(r)}else await Xh(r.localStore,t,!1).then(()=>bf(r,t,n)).catch(ru)}async function vf(e,t){const n=Nl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Nl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let s=iu.resolve();return a.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);Al(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);yf(n,r,null),gf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cf(n,e)}catch(i){await ru(i)}}async function mf(e,t,n){const r=Nl(e);try{const e=await function(e,t){const n=Nl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Al(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);yf(r,t,n),gf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Cf(r,e)}catch(i){await ru(i)}}function gf(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function yf(e,t,n){const r=Nl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function bf(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||wf(e,t)})}function wf(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(_p(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),If(e))}function _f(e,t,n){for(const r of n)r instanceof nf?(e.Ic.addReference(r.key,t),Sf(e,r)):r instanceof rf?(Cl("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||wf(e,r.key)):xl()}function Sf(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Cl("SyncEngine","New document in limbo: "+n),e.mc.add(r),If(e))}function If(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Jl(Ql.fromString(t)),r=e.Ac.next();e.yc.set(r,new of(n)),e.gc=e.gc.insert(n,r),wp(e.remoteStore,new Ch(Ec(wc(n.path)),r,"TargetPurposeLimboResolution",su.ct))}}async function Cf(e,t,n){const r=Nl(e),i=[],a=[],s=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{s.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=qh.Li(o.targetId,e);a.push(t)}}))}),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=Nl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>iu.forEach(t,t=>iu.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>iu.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!au(r))throw r;Cl("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,a))}async function kf(e,t){const n=Nl(e);if(!n.currentUser.isEqual(t)){Cl("SyncEngine","User change. New user:",t.toKey());const e=await Kh(n.localStore,t);n.currentUser=t,(r=n).Ec.forEach(e=>{e.forEach(e=>{e.reject(new Vl(Dl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Cf(n,e.er)}var r}function Ef(e,t){const n=Nl(e),r=n.yc.get(t);if(r&&r.fc)return Gc().add(r.key);{let e=Gc();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}class Tf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new Gh(e,t,n,r)}(this.persistence,new Hh,e.initialUser,this.serializer)}createPersistence(e){return new $h(zh.zs,this.serializer)}createSharedClientState(e){return new ep}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kf.bind(null,this.syncEngine),await async function(e,t){const n=Nl(e);t?(n.vu.delete(2),await yp(n)):t||(n.vu.add(2),await bp(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Xp}createDatastore(e){const t=cp(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new lp(r));var r,i,a;return i=e.authCredentials,a=e.appCheckCredentials,new vp(i,a,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>pf(this.syncEngine,e,0),a=np.D()?new np:new tp,new gp(t,n,r,i,a);var t,n,r,i,a}createSyncEngine(e,t){return function(e,t,n,r,i,a,s){const o=new lf(e,t,n,r,i,a);return s&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Nl(e);Cl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await bp(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):kl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wl.UNAUTHENTICATED,this.clientId=zl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Cl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Cl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Vl(Dl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Df(e,t){e.asyncQueue.verifyOperationInProgress(),Cl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Kh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Cl("FirestoreClient","Using user provided OfflineComponentProvider");try{await Df(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===Dl.FAILED_PRECONDITION||e.code===Dl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;El("Error using user provided cache. Falling back to memory cache: "+r),await Df(e,new Tf)}}else Cl("FirestoreClient","Using default OfflineComponentProvider"),await Df(e,new Tf);return e._offlineComponents}(e);Cl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>jp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>jp(t.remoteStore,n)),e._onlineComponents=t}async function Rf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Cl("FirestoreClient","Using user provided OnlineComponentProvider"),await Vf(e,e._uninitializedComponentsProvider._online)):(Cl("FirestoreClient","Using default OnlineComponentProvider"),await Vf(e,new xf))),e._onlineComponents}async function Pf(e){const t=await Rf(e),n=t.eventManager;return n.onListen=uf.bind(null,t.syncEngine),n.onUnlisten=cf.bind(null,t.syncEngine),n}function Of(e,t,n={}){const r=new Rl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new Af({next:n=>{t.enqueueAndForget(()=>async function(e,t){const n=Nl(e),r=t.query;let i=!1;const a=n.queries.get(r);if(a){const e=a.listeners.indexOf(t);e>=0&&(a.listeners.splice(e,1),i=0===a.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(e,s)),n.fromCache&&"server"===r.source?i.reject(new Vl(Dl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new tf(n,a,{includeMetadataChanges:!0,Ku:!0});return async function(t,n){const r=Nl(t),i=n.query;let a=!1,s=r.queries.get(i);if(s||(a=!0,s=new Yp),a)try{s.Nu=await r.onListen(i)}catch(e){const r=Gp(e,`Initialization of query '${Dc(n.query)}' failed`);return void n.onError(r)}r.queries.set(i,s),s.listeners.push(n),n.Mu(r.onlineState),s.Nu&&n.$u(s.Nu)&&ef(r)}(e,s)}(await Pf(e),e.asyncQueue,t,n,r)),r.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Mf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Lf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(e,t,n){if(!n)throw new Vl(Dl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bf(e){if(!Jl.isDocumentKey(e))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Uf(e){if(Jl.isDocumentKey(e))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $f(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":xl()}function jf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vl(Dl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$f(e);throw new Vl(Dl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Vl(Dl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Vl(Dl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Vl(Dl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Vl(Dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Vl(Dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Vl(Dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class qf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Vl(Dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Vl(Dl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ol;switch(e.type){case"firstParty":return new Bl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Vl(Dl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Lf.get(e);t&&(Cl("ComponentProvider","Removing Datastore"),Lf.delete(e),t.terminate())}(this),Promise.resolve()}}function Hf(e,t,n,r={}){var i;const a=(e=jf(e,qf))._getSettings(),s=`${t}:${n}`;if("firestore.googleapis.com"!==a.host&&a.host!==s&&El("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Kt(JSON.stringify({alg:"none",type:"JWT"})),Kt(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Vl(Dl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wl(a)}e._authCredentials=new Ml(new Pl(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gf(this.firestore,e,this._key)}}class Kf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Kf(this.firestore,e,this._query)}}class Wf extends Kf{constructor(e,t,n){super(e,t,wc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gf(this.firestore,null,new Jl(e))}withConverter(e){return new Wf(this.firestore,e,this._path)}}function Qf(e,t,...n){if(e=vn(e),Ff("collection","path",t),e instanceof qf){const r=Ql.fromString(t,...n);return Uf(r),new Wf(e,null,r)}{if(!(e instanceof Gf||e instanceof Wf))throw new Vl(Dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ql.fromString(t,...n));return Uf(r),new Wf(e.firestore,null,r)}}function Yf(e,t){if(e=jf(e,qf),Ff("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Vl(Dl.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kf(e,null,(n=t,new bc(Ql.emptyPath(),n)));var n}function Xf(e,t,...n){if(e=vn(e),1===arguments.length&&(t=zl.A()),Ff("doc","path",t),e instanceof qf){const r=Ql.fromString(t,...n);return Bf(r),new Gf(e,null,new Jl(r))}{if(!(e instanceof Gf||e instanceof Wf))throw new Vl(Dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ql.fromString(t,...n));return Bf(r),new Gf(e.firestore,e instanceof Wf?e.converter:null,new Jl(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new dp(this,"async_queue_retry"),this.Xc=()=>{const e=up();e&&Cl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=up();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=up();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Rl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!au(e))throw e;Cl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;throw kl("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Hp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&xl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Zf extends qf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Jf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nv(this),this._firestoreClient.terminate()}}function ev(e,t){const n="string"==typeof e?e:"(default)",r=kr("object"==typeof e?e:Nr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Zt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Hf(r,...e)}return r}function tv(e){return e._firestoreClient||nv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nv(e){var t,n,r;const i=e._freezeSettings(),a=(s=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,new Tu(s,o,l,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Mf(u.experimentalLongPollingOptions),u.useFetchStreams));var s,o,l,u;e._firestoreClient=new Nf(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rv(bu.fromBase64String(e))}catch(t){throw new Vl(Dl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rv(bu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Vl(Dl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vl(Dl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vl(Dl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ql(this._lat,e._lat)||ql(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=/^__.*__$/;class lv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wd(e,this.data,this.fieldMask,t,this.fieldTransforms):new bd(e,this.data,t,this.fieldTransforms)}}class uv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xl()}}class dv{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new dv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Ev(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(cv(this.ca)&&ov.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class hv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cp(e)}ya(e,t,n,r=!1){return new dv({ca:e,methodName:t,ga:n,path:Xl.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pv(e){const t=e._freezeSettings(),n=cp(e._databaseId);return new hv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fv(e,t,n,r,i,a={}){const s=e.ya(a.merge||a.mergeFields?2:0,t,n,i);Sv("Data must be an object, but it was:",s,r);const o=wv(r,s);let l,u;if(a.merge)l=new gu(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=Iv(t,r,n);if(!s.contains(i))throw new Vl(Dl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Tv(e,i)||e.push(i)}l=new gu(e),u=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=s.fieldTransforms;return new lv(new qu(o),l,u)}class vv extends av{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vv}}class mv extends av{_toFieldTransform(e){return new ud(e.path,new td)}isEqual(e){return e instanceof mv}}function gv(e,t,n,r){const i=e.ya(1,t,n);Sv("Data must be an object, but it was:",i,r);const a=[],s=qu.empty();cu(r,(e,r)=>{const o=kv(t,e,n);r=vn(r);const l=i.da(o);if(r instanceof vv)a.push(o);else{const e=bv(r,l);null!=e&&(a.push(o),s.set(o,e))}});const o=new gu(a);return new uv(s,o,i.fieldTransforms)}function yv(e,t,n,r,i,a){const s=e.ya(1,t,n),o=[Iv(t,r,n)],l=[i];if(a.length%2!=0)throw new Vl(Dl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(Iv(t,a[h])),l.push(a[h+1]);const u=[],c=qu.empty();for(let h=o.length-1;h>=0;--h)if(!Tv(u,o[h])){const e=o[h];let t=l[h];t=vn(t);const n=s.da(e);if(t instanceof vv)u.push(e);else{const r=bv(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new gu(u);return new uv(c,d,s.fieldTransforms)}function bv(e,t){if(_v(e=vn(e)))return Sv("Unsupported field value:",t,e),wv(e,t);if(e instanceof av)return function(e,t){if(!cv(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bv(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gl.fromDate(e);return{timestampValue:eh(t.serializer,n)}}if(e instanceof Gl){const n=new Gl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eh(t.serializer,n)}}if(e instanceof sv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rv)return{bytesValue:th(t.serializer,e._byteString)};if(e instanceof Gf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ih(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${$f(e)}`)}(e,t)}function wv(e,t){const n={};return du(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cu(e,(e,r)=>{const i=bv(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function _v(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gl||e instanceof sv||e instanceof rv||e instanceof Gf||e instanceof av)}function Sv(e,t,n){if(!_v(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=$f(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}var r}function Iv(e,t,n){if((t=vn(t))instanceof iv)return t._internalPath;if("string"==typeof t)return kv(e,t);throw Ev("Field path arguments must be of type string or ",e,!1,void 0,n)}const Cv=new RegExp("[~\\*/\\[\\]]");function kv(e,t,n){if(t.search(Cv)>=0)throw Ev(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new iv(...t.split("."))._internalPath}catch(r){throw Ev(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ev(e,t,n,r,i){const a=r&&!r.isEmpty(),s=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Vl(Dl.INVALID_ARGUMENT,o+e+l)}function Tv(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Av(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Av extends xv{data(){return super.data()}}function Nv(e,t){return"string"==typeof t?kv(e,t):t instanceof iv?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{}class Vv extends Dv{}function Rv(e,t,...n){let r=[];t instanceof Dv&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Mv).length,n=e.filter(e=>e instanceof Pv).length;if(t>1||t>0&&n>0)throw new Vl(Dl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Pv extends Vv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Pv(e,t,n)}_apply(e){const t=this._parse(e);return $v(e._query,t),new Kf(e.firestore,e.converter,Tc(e._query,t))}_parse(e){const t=pv(e.firestore),n=function(e,t,n,r,i,a,s){let o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Vl(Dl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){Uv(s,a);const t=[];for(const n of s)t.push(Bv(r,e,n));o={arrayValue:{values:t}}}else o=Bv(r,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Uv(s,a),o=function(e,t,n,r=!1){return bv(n,e.ya(r?4:3,t))}(n,"where",s,"in"===a||"not-in"===a);return Zu.create(i,a,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ov(e,t,n){const r=t,i=Nv("where",e);return Pv._create(i,r,n)}class Mv extends Dv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ec.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$v(n,i),n=Tc(n,i)}(e._query,t),new Kf(e.firestore,e.converter,Tc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Lv extends Vv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Vl(Dl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vl(Dl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Yu(t,n);return function(e,t){if(null===Sc(e)){const n=Ic(e);null!==n&&jv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Kf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Fv(e,t="asc"){const n=t,r=Nv("orderBy",e);return Lv._create(r,n)}function Bv(e,t,n){if("string"==typeof(n=vn(n))){if(""===n)throw new Vl(Dl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cc(t)&&-1!==n.indexOf("/"))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ql.fromString(n));if(!Jl.isDocumentKey(r))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lu(e,new Jl(r))}if(n instanceof Gf)return Lu(e,n._key);throw new Vl(Dl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$f(n)}.`)}function Uv(e,t){if(!Array.isArray(e)||0===e.length)throw new Vl(Dl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $v(e,t){if(t.isInequality()){const n=Ic(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Sc(e);null!==i&&jv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Vl(Dl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Vl(Dl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function jv(e,t,n){if(!n.isEqual(t))throw new Vl(Dl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class zv{convertValue(e,t="none"){switch(Nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Su(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Iu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return cu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new sv(Su(e.latitude),Su(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ku(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const t=_u(e);return new Gl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ql.fromString(e);Al(Ih(n));const r=new xu(n.get(1),n.get(3)),i=new Jl(n.popFirst(5));return r.isEqual(t)||kl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Hv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gv extends xv{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kv extends Gv{data(e={}){return super.data(e)}}class Wv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Hv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Kv(this._firestore,this._userDataWriter,n.key,n,new Hv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vl(Dl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Kv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Hv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Kv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Hv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Qv(t.type),doc:r,oldIndex:i,newIndex:a}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xl()}}class Yv extends zv{constructor(e){super(),this.firestore=e}convertBytes(e){return new rv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gf(this.firestore,null,t)}}function Xv(e){e=jf(e,Kf);const t=jf(e.firestore,Zf),n=tv(t),r=new Yv(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Vl(Dl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Of(n,e._query).then(n=>new Wv(t,r,e,n))}function Jv(e,t,n,...r){e=jf(e,Gf);const i=jf(e.firestore,Zf),a=pv(i);let s;return s="string"==typeof(t=vn(t))||t instanceof iv?yv(a,"updateDoc",e._key,t,n,r):gv(a,"updateDoc",e._key,t),tm(i,[s.toMutation(e._key,dd.exists(!0))])}function Zv(e){return tm(jf(e.firestore,Zf),[new Cd(e._key,dd.none())])}function em(e,t){const n=jf(e.firestore,Zf),r=Xf(e),i=qv(e.converter,t);return tm(n,[fv(pv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dd.exists(!1))]).then(()=>r)}function tm(e,t){return function(e,t){const n=new Rl;return e.asyncQueue.enqueueAndForget(async()=>df(await function(e){return Rf(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(tv(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pv(e)}set(e,t,n){this._verifyNotCommitted();const r=rm(e,this._firestore),i=qv(r.converter,t,n),a=fv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dd.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=rm(e,this._firestore);let a;return a="string"==typeof(t=vn(t))||t instanceof iv?yv(this._dataReader,"WriteBatch.update",i._key,t,n,r):gv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,dd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rm(e,this._firestore);return this._mutations=this._mutations.concat(new Cd(t._key,dd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vl(Dl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rm(e,t){if((e=vn(e)).firestore!==t)throw new Vl(Dl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function im(){return new mv("serverTimestamp")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(e){return tv(e=jf(e,Zf)),new nm(e,t=>tm(e,t))}function sm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function om(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(e,t=!0){_l=xr,Cr(new mn("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),a=new Zf(new Ll(e.getProvider("auth-internal")),new $l(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vl(Dl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Vr(bl,"3.13.0",e),Vr(bl,"3.13.0","esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const lm=om,um=new sn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cm=new Tn("@firebase/auth");function dm(e,...t){cm.logLevel<=_n.ERROR&&cm.error(`Auth (${xr}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(e,...t){throw fm(e,...t)}function pm(e,...t){return fm(e,...t)}function fm(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return um.create(e,...t)}function vm(e,t,...n){if(!e)throw fm(t,...n)}function mm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dm(t),new Error(t)}function gm(e,t){e||mm(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bm(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==bm()&&"https:"!==bm()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _m{constructor(e,t){this.shortDelay=e,this.longDelay=t,gm(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return wm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e,t){gm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void mm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void mm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void mm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},km=new _m(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tm(e,t,n,r,i={}){return xm(e,i,async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const s=dn(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),Im.fetch()(Am(e,e.config.apiHost,n,s),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))})}async function xm(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Cm),t);try{const t=new Nm(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Dm(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Dm(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw Dm(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw Dm(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw function(e,t,n){const r=Object.assign(Object.assign({},lm()),{[t]:n});return new sn("auth","Firebase",r).create(t,{appName:e.name})}(e,o,s);hm(e,o)}}catch(i){if(i instanceof an)throw i;hm(e,"network-request-failed",{message:String(i)})}}function Am(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Sm(e.config,i):`${e.config.apiScheme}://${i}`}class Nm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pm(this.auth,"network-request-failed")),km.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pm(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Rm(e){return 1e3*Number(e)}function Pm(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return dm("JWT malformed, contained fewer than 3 sections"),null;try{const e=Wt(n);return e?JSON.parse(e):(dm("Failed to decode base64 JWT payload"),null)}catch(i){return dm("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Om(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof an&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class Mm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vm(this.lastLoginAt),this.creationTime=Vm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fm(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Om(e,async function(e,t){return Tm(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));vm(null==i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?a.providerUserInfo.map(e=>{var{providerId:t}=e,n=sm(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,u=s,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&a.passwordHash||(null==o?void 0:o.length)),h=!!c&&d,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Lm(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vm(e.idToken,"internal-error"),vm(void 0!==e.idToken,"internal-error"),vm(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Pm(e);return vm(t,"internal-error"),vm(void 0!==t.exp,"internal-error"),vm(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return vm(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const n=await xm(e,{},async()=>{const n=dn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=Am(e,r,"/v1/token",`key=${i}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Im.fetch()(a,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new Bm;return n&&(vm("string"==typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(vm("string"==typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&(vm("number"==typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bm,this.toJSON())}_performRefresh(){return mm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(e,t){vm("string"==typeof e||void 0===e,"internal-error",{appName:t})}class $m{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Om(this,this.stsTokenManager.getToken(this.auth,e));return vm(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=vn(e),r=await n.getIdToken(t),i=Pm(r);vm(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,s=null==a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Vm(Rm(i.auth_time)),issuedAtTime:Vm(Rm(i.iat)),expirationTime:Vm(Rm(i.exp)),signInProvider:s||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vn(e);await Fm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $m(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Om(this,async function(e,t){return Tm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,s,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,v=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:S}=t;vm(y&&S,e,"internal-error");const I=Bm.fromJSON(this.name,S);vm("string"==typeof y,e,"internal-error"),Um(c,e.name),Um(d,e.name),vm("boolean"==typeof b,e,"internal-error"),vm("boolean"==typeof w,e,"internal-error"),Um(h,e.name),Um(p,e.name),Um(f,e.name),Um(v,e.name),Um(m,e.name),Um(g,e.name);const C=new $m({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map(e=>Object.assign({},e))),v&&(C._redirectEventId=v),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new Bm;r.updateFromServerResponse(t);const i=new $m({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fm(i),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=new Map;function zm(e){gm(e instanceof Function,"Expected a class definition");let t=jm.get(e);return t?(gm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,jm.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qm.type="NONE";const Hm=qm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(e,t,n){return`firebase:${e}:${t}:${n}`}class Km{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Gm(this.userKey,r.apiKey,i),this.fullPersistenceKey=Gm("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$m._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Km(zm(Hm),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||zm(Hm);const a=Gm(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(a);if(t){const n=$m._fromJSON(e,t);u!==i&&(s=n),i=u;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(a)}catch(l){}})),new Km(i,e,n)):new Km(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eg(t))return"Blackberry";if(tg(t))return"Webos";if(Ym(t))return"Safari";if((t.includes("chrome/")||Xm(t))&&!t.includes("edge/"))return"Chrome";if(Zm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Qm(e=rn()){return/firefox\//i.test(e)}function Ym(e=rn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Xm(e=rn()){return/crios\//i.test(e)}function Jm(e=rn()){return/iemobile/i.test(e)}function Zm(e=rn()){return/android/i.test(e)}function eg(e=rn()){return/blackberry/i.test(e)}function tg(e=rn()){return/webos/i.test(e)}function ng(e=rn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function rg(){return function(){const e=rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ig(e=rn()){return ng(e)||Zm(e)||tg(e)||eg(e)||/windows phone/i.test(e)||Jm(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ag(e,t=[]){let n;switch(e){case"Browser":n=Wm(rn());break;case"Worker":n=`${Wm(rn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}async function sg(e,t){return Tm(e,"GET","/v2/recaptchaConfig",Em(e,t))}function og(e){return void 0!==e&&void 0!==e.enterprise}class lg{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,a;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pm("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(a=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==a?a:document).appendChild(r)})}class cg{constructor(e){this.type="recaptcha-enterprise",this.auth=pg(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;og(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{sg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new lg(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&og(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ug("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fg(this),this.idTokenSubscription=new fg(this),this.beforeStateQueue=new dg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=um,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zm(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Km.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null==r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==a||!(null==s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vm(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fm(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?vn(e):null;return t&&vm(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&vm(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(zm(e))})}async initializeRecaptchaConfig(){const e=await sg(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new lg(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new cg(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zm(e)||this._popupRedirectResolver;vm(t,this,"argument-error"),this.redirectPersistenceManager=await Km.create(this,[zm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return vm(a,this,"internal-error"),a.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vm(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){cm.logLevel<=_n.WARN&&cm.warn(`Auth (${xr}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function pg(e){return vn(e)}class fg{constructor(e){this.auth=e,this.observer=null,this.addObserver=hn(e=>this.observer=e)}get next(){return vm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(e,t,n){const r=pg(e);vm(r._canInitEmulator,r,"emulator-config-failed"),vm(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=mg(t),{host:a,port:s}=function(e){const t=mg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:gg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:gg(t)}}}(t),o=null===s?"":`:${s}`;r.config.emulator={url:`${i}//${a}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function mg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class yg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mm("not implemented")}_getIdTokenResponse(e){return mm("not implemented")}_linkToIdToken(e,t){return mm("not implemented")}_getReauthenticationResolver(e){return mm("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bg(e,t){return async function(e,t,n,r,i={}){const a=await Tm(e,t,n,r,i);return"mfaPendingCredential"in a&&hm(e,"multi-factor-auth-required",{_serverResponse:a}),a}(e,"POST","/v1/accounts:signInWithIdp",Em(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=sm(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new wg(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return bg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,bg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dn(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Sg{constructor(){super("facebook.com")}static credential(e){return wg._fromParams({providerId:Ig.PROVIDER_ID,signInMethod:Ig.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ig.credentialFromTaggedObject(e)}static credentialFromError(e){return Ig.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ig.credential(e.oauthAccessToken)}catch(t){return null}}}Ig.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ig.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cg extends Sg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wg._fromParams({providerId:Cg.PROVIDER_ID,signInMethod:Cg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cg.credentialFromTaggedObject(e)}static credentialFromError(e){return Cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Cg.credential(t,n)}catch(r){return null}}}Cg.GOOGLE_SIGN_IN_METHOD="google.com",Cg.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class kg extends Sg{constructor(){super("github.com")}static credential(e){return wg._fromParams({providerId:kg.PROVIDER_ID,signInMethod:kg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kg.credentialFromTaggedObject(e)}static credentialFromError(e){return kg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return kg.credential(e.oauthAccessToken)}catch(t){return null}}}kg.GITHUB_SIGN_IN_METHOD="github.com",kg.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Eg extends Sg{constructor(){super("twitter.com")}static credential(e,t){return wg._fromParams({providerId:Eg.PROVIDER_ID,signInMethod:Eg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Eg.credentialFromTaggedObject(e)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Eg.credential(t,n)}catch(r){return null}}}Eg.TWITTER_SIGN_IN_METHOD="twitter.com",Eg.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await $m._fromIdTokenResponse(e,n,r),a=xg(n);return new Tg({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=xg(n);return new Tg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function xg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends an{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ag.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ag(e,t,n,r)}}function Ng(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Ag._fromErrorAndOperation(e,n,t,r);throw n})}const Dg="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dg,"1"),this.storage.removeItem(Dg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Vg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rn();return Ym(e)||ng(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ig(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);rg()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rg.type="LOCAL";const Pg=Rg;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Vg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Og.type="SESSION";const Mg=Og;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Lg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!(null==a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(a).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fg(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lg.receivers=[];class Bg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((s,o)=>{const l=Fg("",20);r.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $g(){return void 0!==Ug().WorkerGlobalScope&&"function"==typeof Ug().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jg="firebaseLocalStorageDb",zg="firebaseLocalStorage",qg="fbase_key";class Hg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gg(e,t){return e.transaction([zg],t?"readwrite":"readonly").objectStore(zg)}function Kg(){const e=indexedDB.open(jg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(zg,{keyPath:qg})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(zg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jg);return new Hg(e).toPromise()}(),t(await Kg()))})})}async function Wg(e,t,n){const r=Gg(e,!0).put({[qg]:t,value:n});return new Hg(r).toPromise()}function Qg(e,t){const n=Gg(e,!0).delete(t);return new Hg(n).toPromise()}class Yg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Kg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $g()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lg._getInstance($g()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Bg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await Wg(e,Dg,"1"),await Qg(e,Dg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Gg(e,!1).get(t),r=await new Hg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Gg(e,!1).getAll();return new Hg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Yg.type="LOCAL";const Xg=Yg;new _m(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jg extends yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zg(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){const r="signIn",i=await Ng(e,r,t),a=await Tg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}(e.auth,new Jg(e),e.bypassAuthState)}function ey(e){const{auth:t,user:n}=e;return vm(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const a=await Om(e,Ng(r,i,t,e),n);vm(a.idToken,r,"internal-error");const s=Pm(a.idToken);vm(s,r,"internal-error");const{sub:o}=s;return vm(e.uid===o,r,"user-mismatch"),Tg._forOperation(e,i,a)}catch(a){throw"auth/user-not-found"===(null==a?void 0:a.code)&&hm(r,"user-mismatch"),a}}(n,new Jg(e),e.bypassAuthState)}async function ty(e){const{auth:t,user:n}=e;return vm(n,t,"internal-error"),async function(e,t,n=!1){const r=await Om(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tg._forOperation(e,"link",r)}(n,new Jg(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zg;case"linkViaPopup":case"linkViaRedirect":return ty;case"reauthViaPopup":case"reauthViaRedirect":return ey;default:hm(this.auth,"internal-error")}}resolve(e){gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new _m(2e3,1e4);class iy extends ny{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,iy.currentPopupAction&&iy.currentPopupAction.cancel(),iy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vm(e,this.auth,"internal-error"),e}async onExecution(){gm(1===this.filter.length,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,iy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pm(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ry.get())};e()}}iy.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ay="pendingRedirect",sy=new Map;class oy extends ny{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=sy.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Gm(ay,e.config.apiKey,e.name)}(t),r=function(e){return zm(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}sy.set(this.auth._key(),e)}return this.bypassAuthState||sy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ly(e,t){sy.set(e._key(),t)}async function uy(e,t,n=!1){const r=pg(e),i=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?zm(t):(vm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),a=new oy(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hy(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!hy(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pm(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dy(e))}saveEventToCache(e){this.cachedEventUids.add(dy(e)),this.lastProcessedEventTime=Date.now()}}function dy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function hy({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const py=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fy=/^https?/;async function vy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Tm(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(my(r))return}catch(n){}hm(e,"unauthorized-domain")}function my(e){const t=ym(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fy.test(n))return!1;if(py.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new _m(3e4,6e4);function yy(){const e=Ug().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function by(e){return new Promise((t,n)=>{var r,i,a;function s(){yy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yy(),n(pm(e,"network-request-failed"))},timeout:gy.get()})}if(null===(i=null===(r=Ug().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ug().gapi)||void 0===a?void 0:a.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Ug()[t]=()=>{gapi.load?s():n(pm(e,"network-request-failed"))},ug(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}s()}}).catch(e=>{throw wy=null,e})}let wy=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _y=new _m(5e3,15e3),Sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Iy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cy(e){const t=e.config;vm(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Sm(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:xr},i=Iy.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${dn(r).slice(1)}`}async function ky(e){const t=await function(e){return wy=wy||by(e),wy}(e),n=Ug().gapi;return vm(n,e,"internal-error"),t.open({where:document.body,url:Cy(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sy,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pm(e,"network-request-failed"),a=Ug().setTimeout(()=>{r(i)},_y.get());function s(){Ug().clearTimeout(a),n(t)}t.ping(s).then(s,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function xy(e,t,n,r=500,i=600){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ey),{width:r.toString(),height:i.toString(),top:a,left:s}),u=rn().toLowerCase();n&&(o=Xm(u)?"_blank":n),Qm(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=rn()){var t;return ng(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Ty(null);const d=window.open(t||"",o,c);vm(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Ty(d)}const Ay="__/auth/handler",Ny="emulator/auth/handler",Dy=encodeURIComponent("fac");async function Vy(e,t,n,r,i,a){vm(e.config.authDomain,e,"auth-domain-config-required"),vm(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(t instanceof _g){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))s[e]=t}if(t instanceof Sg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Dy}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Ay}`;return Sm(e,Ny)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${dn(o).slice(1)}${u}`}const Ry="webStorageSupport";const Py=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mg,this._completeRedirectFn=uy,this._overrideRedirectResult=ly}async _openPopup(e,t,n,r){var i;gm(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return xy(e,await Vy(e,t,n,ym(),r),Fg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ug().location.href=e}(await Vy(e,t,n,ym(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ky(e),n=new cy(e);return t.register("authEvent",t=>{vm(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ry,{type:Ry},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ry];void 0!==i&&t(!!i),hm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ig()||Ym()||ng()}};var Oy="@firebase/auth",My="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ly{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fy=tn("authIdTokenMaxAge")||300;let By=null;function Uy(e=Nr()){const t=kr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=kr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(un(n.getOptions(),null!=t?t:{}))return e;hm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Py,persistence:[Xg,Pg,Mg]}),r=tn("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Fy)return;const r=null==t?void 0:t.token;By!==r&&(By=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){vn(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){vn(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const a=Zt("auth");return a&&vg(n,`http://${a}`),n}var $y;$y="Browser",Cr(new mn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=n.options;vm(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:a,authDomain:s,clientPlatform:$y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ag($y)},l=new hg(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zm);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Cr(new mn("auth-internal",e=>{const t=pg(e.getProvider("auth").getImmediate());return new Ly(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(Oy,My,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($y)),Vr(Oy,My,"esm2017");const jy=async e=>{const[t,n,r,i,a,s]=await(async e=>{if(!e)throw new Error("User ID is required to load initial data.");try{const t=await Zr();return Promise.all([Xv(Qf(t,"accounts")),Xv(Qf(t,"character_masters")),Xv(Qf(t,"itemMasters")),Xv(Yf(t,"owned_characters")),Xv(Qf(t,"gachaMasters")),Xv(Rv(Qf(t,"teams"),Ov("userId","==",e),Fv("createdAt","desc")))])}catch(t){throw t}})(e),o=t.docs.map(e=>{const t=e.data();return{id:e.id,name:t.Name||`アカウント${t.id}`,numericId:t.id,indexNumber:t.indexNumber}}).sort((e,t)=>(e.numericId||999)-(t.numericId||999)),l=n.docs.map(e=>({...e.data(),id:e.id})).sort((e,t)=>(e.indexNumber||999999)-(t.indexNumber||999999)),u=new Map(l.map(e=>[e.id,e])),c=r.docs.map(e=>({...e.data(),id:Number(e.data().id)})).sort((e,t)=>e.id-t.id),d=new Map(c.map(e=>[e.id,e.name])),h=a.docs.map(e=>e.data()).sort((e,t)=>e.id-t.id),p=s.docs.map(e=>({...e.data(),id:e.id})),f=new Map,v=new Map;return i.forEach(e=>{const t=e.data(),n=e.ref.parent.parent.id,r=`${t.characterMasterId}-${n}`;v.set(r,(v.get(r)||0)+1),f.has(n)||f.set(n,[]),f.get(n).push({...t,id:e.id})}),{accounts:o,characterMasters:l,characterMastersMap:u,itemMasters:c,itemMastersMap:d,gachaMasters:h,teams:p,ownedCharactersData:f,ownedCountMap:v}},zy=async(e,t)=>em(Qf(await Zr(),"accounts",e,"owned_characters"),t),qy=async(e,t,n)=>Jv(Xf(await Zr(),"accounts",e,"owned_characters",t),{items:n}),Hy=async(e,t,n)=>{const r=await Zr(),i=am(r),a=Xf(r,"accounts",e,"owned_characters",t.id),s=Xf(r,"accounts",e,"owned_characters",n.id);return i.update(a,{items:t.items}),i.update(s,{items:n.items}),i.commit()},Gy=async e=>em(Qf(await Zr(),"character_masters"),e),Ky=async(e,t)=>Jv(Xf(await Zr(),"character_masters",e),t),Wy=async(e,t)=>{const n=await Zr();return e?Jv(Xf(n,"teams",e),t):em(Qf(n,"teams"),t)},Qy=async e=>Zv(Xf(await Zr(),"teams",e)),Yy=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Xy=re({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Jy=ne(!1)({name:"VDefaultsProvider",props:Xy(),setup(t,n){let{slots:r}=n;const{defaults:i,disabled:a,reset:s,root:o,scoped:l}=e(t);return ie(i,{reset:s,root:o,scoped:l,disabled:a}),()=>{var e;return null==(e=r.default)?void 0:e.call(r)}}});function Zy(e){return ae(()=>{const n=t(e),r=[],i={};if(n.background)if(se(n.background)){if(i.backgroundColor=n.background,!n.text&&oe(n.background)){const e=le(n.background);if(null==e.a||1===e.a){const t=ue(e);i.color=t,i.caretColor=t}}}else r.push(`bg-${n.background}`);return n.text&&(se(n.text)?(i.color=n.text,i.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:i}})}function eb(e){const{colorClasses:n,colorStyles:r}=Zy(()=>({text:t(e)}));return{textColorClasses:n,textColorStyles:r}}function tb(e){const{colorClasses:n,colorStyles:r}=Zy(()=>({background:t(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const nb=["x-small","small","default","large","x-large"],rb=re({size:{type:[String,Number],default:"default"}},"size");function ib(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return ae(()=>{const n=e.size;let r,i;return de(nb,n)?r=`${t}--size-${n}`:n&&(i={width:he(n),height:he(n)}),{sizeClasses:r,sizeStyles:i}})}const ab=re({tag:{type:[String,Object,Function],default:"div"}},"tag"),sb=re({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:be,opacity:[String,Number],...ye(),...rb(),...ab({tag:"i"}),...ge()},"VIcon"),ob=ne()({name:"VIcon",props:sb(),setup(e,t){let{attrs:o,slots:l}=t;const u=n(),{themeClasses:c}=pe(),{iconData:d}=fe(()=>u.value||e.icon),{sizeClasses:h}=ib(e),{textColorClasses:p,textColorStyles:f}=eb(()=>e.color);return ve(()=>{var t,n;const v=null==(t=l.default)?void 0:t.call(l);v&&(u.value=null==(n=me(v).filter(e=>e.type===r&&e.children&&"string"==typeof e.children)[0])?void 0:n.children);const m=!(!o.onClick&&!o.onClickOnce);return i(d.value.component,{tag:e.tag,icon:d.value.icon,class:s(["v-icon","notranslate",c.value,h.value,p.value,{"v-icon--clickable":m,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:a([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:he(e.size),height:he(e.size),width:he(e.size)},f.value,e.style]),role:m?"button":void 0,"aria-hidden":!m,tabindex:m?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}}),lb=re({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function ub(e){return{dimensionStyles:o(()=>{const t={},n=he(e.height),r=he(e.maxHeight),i=he(e.maxWidth),a=he(e.minHeight),s=he(e.minWidth),o=he(e.width);return null!=n&&(t.height=n),null!=r&&(t.maxHeight=r),null!=i&&(t.maxWidth=i),null!=a&&(t.minHeight=a),null!=s&&(t.minWidth=s),null!=o&&(t.width=o),t})}}const cb=re({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...ye(),...lb()},"VResponsive"),db=ne()({name:"VResponsive",props:cb(),setup(e,t){let{slots:n}=t;const{aspectStyles:r}=function(e){return{aspectStyles:o(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}(e),{dimensionStyles:i}=ub(e);return ve(()=>{var t;return l("div",{class:s(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:a([i.value,e.style])},[l("div",{class:"v-responsive__sizer",style:a(r.value)},null),null==(t=n.additional)?void 0:t.call(n),n.default&&l("div",{class:s(["v-responsive__content",e.contentClass])},[n.default()])])}),{}}}),hb=re({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function pb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{roundedClasses:o(()=>{const n=u(e)?e.value:e.rounded,r=u(e)?e.value:e.tile,i=[];if(!0===n||""===n)i.push(`${t}--rounded`);else if("string"==typeof n||0===n)for(const e of String(n).split(" "))i.push(`rounded-${e}`);else(r||!1===n)&&i.push("rounded-0");return i})}}const fb=re({transition:{type:null,default:"fade-transition",validator:e=>!0!==e}},"transition"),vb=(e,t)=>{let{slots:n}=t;const{transition:r,disabled:i,group:a,...s}=e,{component:o=(a?c:d),...l}=we(r)?r:{};let u;return u=we(r)?h(l,_e({disabled:i,group:a}),s):h({name:i||!r?"":r},s),p(o,u,n)};function mb(e,t){var n;const r=null==(n=e._observe)?void 0:n[t.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const gb={mounted:function(e,t){if(!Se)return;const n=t.modifiers||{},r=t.value,{handler:i,options:a}="object"==typeof r?r:{handler:r,options:{}},s=new IntersectionObserver(function(){var r;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const o=null==(r=e._observe)?void 0:r[t.instance.$.uid];if(!o)return;const l=a.some(e=>e.isIntersecting);!i||n.quiet&&!o.init||n.once&&!l&&!o.init||i(l,a,s),l&&n.once?mb(e,t):o.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:s},s.observe(e)},unmounted:mb},yb=re({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...cb(),...ye(),...hb(),...fb()},"VImg"),bb=ne()({name:"VImg",directives:{vIntersect:gb},props:yb(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:r,slots:a}=t;const{backgroundColorClasses:u,backgroundColorStyles:c}=tb(()=>e.color),{roundedClasses:d}=pb(e),p=Ie("VImg"),I=n(""),C=f(),k=n(e.eager?"loading":"idle"),E=n(),T=n(),x=o(()=>e.src&&"object"==typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),A=o(()=>x.value.aspect||E.value/T.value||0);function N(t){if((!e.eager||!t)&&(!Se||t||e.eager)){if(k.value="loading",x.value.lazySrc){const e=new Image;e.src=x.value.lazySrc,O(e,null)}x.value.src&&g(()=>{var e;r("loadstart",(null==(e=C.value)?void 0:e.currentSrc)||x.value.src),setTimeout(()=>{var e;if(!p.isUnmounted)if(null==(e=C.value)?void 0:e.complete){if(C.value.naturalWidth||V(),"error"===k.value)return;A.value||O(C.value,null),"loading"===k.value&&D()}else A.value||O(C.value),R()})})}}function D(){var e;p.isUnmounted||(R(),O(C.value),k.value="loaded",r("load",(null==(e=C.value)?void 0:e.currentSrc)||x.value.src))}function V(){var e;p.isUnmounted||(k.value="error",r("error",(null==(e=C.value)?void 0:e.currentSrc)||x.value.src))}function R(){const e=C.value;e&&(I.value=e.currentSrc||e.src)}v(()=>e.src,()=>{N("idle"!==k.value)}),v(A,(e,t)=>{!e&&t&&C.value&&O(C.value)}),m(()=>N());let P=-1;function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=()=>{if(clearTimeout(P),p.isUnmounted)return;const{naturalHeight:r,naturalWidth:i}=e;r||i?(E.value=i,T.value=r):e.complete||"loading"!==k.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(E.value=1,T.value=1):P=window.setTimeout(n,t)};n()}y(()=>{clearTimeout(P)});const M=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),L=()=>{var t;if(!x.value.src||"idle"===k.value)return null;const n=l("img",{class:s(["v-img__img",M.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:x.value.src,srcset:x.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:D,onError:V},null),r=null==(t=a.sources)?void 0:t.call(a);return i(vb,{transition:e.transition,appear:!0},{default:()=>[w(r?l("picture",{class:"v-img__picture"},[r,n]):n,[[S,"loaded"===k.value]])]})},F=()=>i(vb,{transition:e.transition},{default:()=>[x.value.lazySrc&&"loaded"!==k.value&&l("img",{class:s(["v-img__img","v-img__img--preload",M.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:x.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),B=()=>a.placeholder?i(vb,{transition:e.transition,appear:!0},{default:()=>[("loading"===k.value||"error"===k.value&&!a.error)&&l("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,U=()=>a.error?i(vb,{transition:e.transition,appear:!0},{default:()=>["error"===k.value&&l("div",{class:"v-img__error"},[a.error()])]}):null,$=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,j=n(!1);{const e=v(A,t=>{t&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.value=!0})}),e())})}return ve(()=>{const t=db.filterProps(e);return w(i(db,h({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!j.value},u.value,d.value,e.class],style:[{width:he("auto"===e.width?E.value:e.width)},c.value,e.style]},t,{aspectRatio:A.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(_,null,[i(L,null,null),i(F,null,null),i($,null,null),i(B,null,null),i(U,null,null)]),default:a.default}),[[gb,{handler:N,options:e.options},null,{once:!0}]])}),{currentSrc:I,image:C,state:k,naturalWidth:E,naturalHeight:T}}}),wb=re({border:[Boolean,Number,String]},"border");function _b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{borderClasses:o(()=>{const n=e.border;return!0===n||""===n?`${t}--border`:"string"==typeof n||0===n?String(n).split(" ").map(e=>`border-${e}`):[]})}}const Sb=[null,"default","comfortable","compact"],Ib=re({density:{type:String,default:"default",validator:e=>Sb.includes(e)}},"density");function Cb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{densityClasses:b(()=>`${t}--density-${e.density}`)}}const kb=["elevated","flat","tonal","outlined","text","plain"];function Eb(e,t){return l(_,null,[e&&l("span",{key:"overlay",class:s(`${t}__overlay`)},null),l("span",{key:"underlay",class:s(`${t}__underlay`)},null)])}const Tb=re({color:String,variant:{type:String,default:"elevated",validator:e=>kb.includes(e)}},"variant");function xb(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const r=b(()=>{const{variant:r}=t(e);return`${n}--variant-${r}`}),{colorClasses:i,colorStyles:a}=Zy(()=>{const{variant:n,color:r}=t(e);return{[["elevated","flat"].includes(n)?"background":"text"]:r}});return{colorClasses:i,colorStyles:a,variantClasses:r}}const Ab=re({start:Boolean,end:Boolean,icon:be,image:String,text:String,...wb(),...ye(),...Ib(),...hb(),...rb(),...ab(),...ge(),...Tb({variant:"flat"})},"VAvatar"),Nb=ne()({name:"VAvatar",props:Ab(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Ce(e),{borderClasses:o}=_b(e),{colorClasses:l,colorStyles:u,variantClasses:c}=xb(e),{densityClasses:d}=Cb(e),{roundedClasses:h}=pb(e),{sizeClasses:p,sizeStyles:f}=ib(e);return ve(()=>i(e.tag,{class:s(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},r.value,o.value,l.value,d.value,h.value,p.value,c.value,e.class]),style:a([u.value,f.value,e.style])},{default:()=>[n.default?i(Jy,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?i(bb,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?i(ob,{key:"icon",icon:e.icon},null):e.text,Eb(!1,"v-avatar")]})),{}}}),Db=re({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Vb(e){return{elevationClasses:b(()=>{const t=u(e)?e.value:e.elevation;return null==t?[]:[`elevation-${t}`]})}}const Rb=re({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...wb(),...ye(),...Ib(),...Db(),...hb(),...ab(),...ge(),...Tb()},"VBtnGroup"),Pb=ne()({name:"VBtnGroup",props:Rb(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Ce(e),{densityClasses:o}=Cb(e),{borderClasses:l}=_b(e),{elevationClasses:u}=Vb(e),{roundedClasses:c}=pb(e);ie({VBtn:{height:b(()=>"horizontal"===e.direction?"auto":null),baseColor:b(()=>e.baseColor),color:b(()=>e.color),density:b(()=>e.density),flat:!0,variant:b(()=>e.variant)}}),ve(()=>i(e.tag,{class:s(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},r.value,l.value,o.value,u.value,c.value,e.class]),style:a(e.style)},n))}}),Ob=re({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Mb=re({value:null,disabled:Boolean,selectedClass:String},"group-item");function Lb(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ie("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=E();T(Symbol.for(`${t.description}:id`),i);const a=x(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const s=b(()=>e.value),l=o(()=>!(!a.disabled.value&&!e.disabled));a.register({id:i,value:s,disabled:l},r),y(()=>{a.unregister(i)});const u=o(()=>a.isSelected(i)),c=o(()=>a.items.value[0].id===i),d=o(()=>a.items.value[a.items.value.length-1].id===i),h=o(()=>u.value&&[a.selectedClass.value,e.selectedClass]);return v(u,e=>{r.emit("group:selected",{value:e})},{flush:"sync"}),{id:i,isSelected:u,isFirst:c,isLast:d,toggle:()=>a.select(i,!u.value),select:e=>a.select(i,e),selectedClass:h,value:s,disabled:l,group:a}}function Fb(e,t){let n=!1;const r=I([]),i=ke(e,"modelValue",[],e=>null==e?[]:Bb(r,Te(e)),t=>{const n=function(e,t){const n=[];return t.forEach(t=>{const r=e.findIndex(e=>e.id===t);if(~r){const t=e[r];n.push(null!=t.value?t.value:r)}}),n}(r,t);return e.multiple?n:n[0]}),a=Ie("useGroup");function s(){const t=r.find(e=>!e.disabled);t&&"force"===e.mandatory&&!i.value.length&&(i.value=[t.id])}function o(t){if(e.multiple,i.value.length){const e=i.value[0],n=r.findIndex(t=>t.id===e);let a=(n+t)%r.length,s=r[a];for(;s.disabled&&a!==n;)a=(a+t)%r.length,s=r[a];if(s.disabled)return;i.value=[r[a].id]}else{const e=r.find(e=>!e.disabled);e&&(i.value=[e.id])}}C(()=>{s()}),y(()=>{n=!0}),k(()=>{for(let e=0;e<r.length;e++)r[e].useIndexAsValue&&(r[e].value=e)});const l={register:function(e,n){const i=e,s=Symbol.for(`${t.description}:id`),o=xe(s,null==a?void 0:a.vnode).indexOf(n);null==A(i.value)&&(i.value=o,i.useIndexAsValue=!0),o>-1?r.splice(o,0,i):r.push(i)},unregister:function(e){if(n)return;s();const t=r.findIndex(t=>t.id===e);r.splice(t,1)},selected:i,select:function(t,n){const a=r.find(e=>e.id===t);if(!n||!(null==a?void 0:a.disabled))if(e.multiple){const r=i.value.slice(),a=r.findIndex(e=>e===t),s=~a;if(n=n??!s,s&&e.mandatory&&r.length<=1)return;if(!s&&null!=e.max&&r.length+1>e.max)return;a<0&&n?r.push(t):a>=0&&!n&&r.splice(a,1),i.value=r}else{const r=i.value.includes(t);if(e.mandatory&&r)return;if(!r&&!n)return;i.value=n??!r?[t]:[]}},disabled:b(()=>e.disabled),prev:()=>o(r.length-1),next:()=>o(1),isSelected:e=>i.value.includes(e),selectedClass:b(()=>e.selectedClass),items:b(()=>r),getItemIndex:e=>function(e,t){const n=Bb(e,[t]);return n.length?e.findIndex(e=>e.id===n[0]):-1}(r,e)};return T(t,l),l}function Bb(e,t){const n=[];return t.forEach(t=>{const r=e.find(e=>Ee(t,e.value)),i=e[t];null!=(null==r?void 0:r.value)?n.push(r.id):(null==i?void 0:i.useIndexAsValue)&&n.push(i.id)}),n}const Ub=Symbol.for("vuetify:v-btn-toggle"),$b=re({...Rb(),...Ob()},"VBtnToggle");function jb(e,t){const r=f(),i=n(!1);if(Se){const e=new IntersectionObserver(e=>{i.value=!!e.find(e=>e.isIntersecting)},t);N(()=>{e.disconnect()}),v(r,(t,n)=>{n&&(e.unobserve(n),i.value=!1),t&&e.observe(t)},{flush:"post"})}return{intersectionRef:r,isIntersecting:i}}ne()({name:"VBtnToggle",props:$b(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,next:a,prev:s,select:o,selected:l}=Fb(e,Ub);return ve(()=>{const t=Pb.filterProps(e);return i(Pb,h({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:r,next:a,prev:s,select:o,selected:l})]}})}),{next:a,prev:s,select:o}}});const zb=re({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...ye(),...rb(),...ab({tag:"div"}),...ge()},"VProgressCircular"),qb=ne()({name:"VProgressCircular",props:zb(),setup(e,t){let{slots:n}=t;const r=2*Math.PI*20,o=f(),{themeClasses:u}=Ce(e),{sizeClasses:c,sizeStyles:d}=ib(e),{textColorClasses:h,textColorStyles:p}=eb(()=>e.color),{textColorClasses:v,textColorStyles:m}=eb(()=>e.bgColor),{intersectionRef:g,isIntersecting:y}=jb(),{resizeRef:w,contentRect:_}=Ae(),S=b(()=>Ne(parseFloat(e.modelValue),0,100)),I=b(()=>Number(e.width)),C=b(()=>d.value?Number(e.size):_.value?_.value.width:Math.max(I.value,32)),k=b(()=>20/(1-I.value/C.value)*2),E=b(()=>I.value/C.value*k.value),T=b(()=>he((100-S.value)/100*r));return D(()=>{g.value=o.value,w.value=o.value}),ve(()=>i(e.tag,{ref:o,class:s(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":y.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},u.value,c.value,h.value,e.class]),style:a([d.value,p.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:S.value},{default:()=>[l("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${k.value} ${k.value}`},[l("circle",{class:s(["v-progress-circular__underlay",v.value]),style:a(m.value),fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),l("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":r,"stroke-dashoffset":T.value},null)]),n.default&&l("div",{class:"v-progress-circular__content"},[n.default({value:S.value})])]})),{}}}),Hb={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Gb=re({location:String},"location");function Kb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=De();return{locationStyles:o(()=>{if(!e.location)return{};const{side:i,align:a}=Ve(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function s(e){return n?n(e):0}const o={};return"center"!==i&&(t?o[Hb[i]]=`calc(100% - ${s(i)}px)`:o[i]=0),"center"!==a?t?o[Hb[a]]=`calc(100% - ${s(a)}px)`:o[a]=0:("center"===i?o.top=o.left="50%":o[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",o.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),o})}}const Wb=re({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ye(),...Gb({location:"top"}),...hb(),...ab(),...ge()},"VProgressLinear"),Qb=ne()({name:"VProgressLinear",props:Wb(),emits:{"update:modelValue":e=>!0},setup(e,t){var n;let{slots:r}=t;const u=ke(e,"modelValue"),{isRtl:c,rtlClasses:h}=De(),{themeClasses:p}=Ce(e),{locationStyles:f}=Kb(e),{textColorClasses:v,textColorStyles:m}=eb(()=>e.color),{backgroundColorClasses:g,backgroundColorStyles:y}=tb(()=>e.bgColor||e.color),{backgroundColorClasses:b,backgroundColorStyles:w}=tb(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:_,backgroundColorStyles:S}=tb(()=>e.color),{roundedClasses:I}=pb(e),{intersectionRef:C,isIntersecting:k}=jb(),E=o(()=>parseFloat(e.max)),T=o(()=>parseFloat(e.height)),x=o(()=>Ne(parseFloat(e.bufferValue)/E.value*100,0,100)),A=o(()=>Ne(parseFloat(u.value)/E.value*100,0,100)),N=o(()=>c.value!==e.reverse),D=o(()=>e.indeterminate?"fade-transition":"slide-x-transition"),V=Re&&(null==(n=window.matchMedia)?void 0:n.call(window,"(forced-colors: active)").matches);function R(e){if(!C.value)return;const{left:t,right:n,width:r}=C.value.getBoundingClientRect(),i=N.value?r-e.clientX+(n-r):e.clientX-t;u.value=Math.round(i/r*E.value)}return ve(()=>i(e.tag,{ref:C,class:s(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&k.value,"v-progress-linear--reverse":N.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},I.value,p.value,h.value,e.class]),style:a([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?he(T.value):0,"--v-progress-linear-height":he(T.value),...e.absolute?f.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(u.value),E.value),onClick:e.clickable&&R},{default:()=>[e.stream&&l("div",{key:"stream",class:s(["v-progress-linear__stream",v.value]),style:{...m.value,[N.value?"left":"right"]:he(-T.value),borderTop:`${he(T.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${he(T.value/4)})`,width:he(100-x.value,"%"),"--v-progress-linear-stream-to":he(T.value*(N.value?1:-1))}},null),l("div",{class:s(["v-progress-linear__background",V?void 0:g.value]),style:a([y.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),l("div",{class:s(["v-progress-linear__buffer",V?void 0:b.value]),style:a([w.value,{opacity:parseFloat(e.bufferOpacity),width:he(x.value,"%")}])},null),i(d,{name:D.value},{default:()=>[e.indeterminate?l("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>l("div",{key:e,class:s(["v-progress-linear__indeterminate",e,V?void 0:_.value]),style:a(S.value)},null))]):l("div",{class:s(["v-progress-linear__determinate",V?void 0:_.value]),style:a([S.value,{width:he(A.value,"%")}])},null)]}),r.default&&l("div",{class:"v-progress-linear__content"},[r.default({value:A.value,buffer:x.value})])]})),{}}}),Yb=re({loading:[Boolean,String]},"loader");function Xb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{loaderClasses:b(()=>({[`${t}--loading`]:e.loading}))}}function Jb(e,t){var n;let{slots:r}=t;return l("div",{class:s(`${e.name}__loader`)},[(null==(n=r.default)?void 0:n.call(r,{color:e.color,isActive:e.active}))||i(Qb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Zb=["static","relative","fixed","absolute","sticky"],ew=re({position:{type:String,validator:e=>Zb.includes(e)}},"position");function tw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{positionClasses:b(()=>e.position?`${t}--${e.position}`:void 0)}}function nw(e,t){var n,r;const i=V("RouterLink"),a=b(()=>!(!e.href&&!e.to)),s=o(()=>(null==a?void 0:a.value)||Pe(t,"click")||Pe(e,"click"));if("string"==typeof i||!("useLink"in i)){const t=b(()=>e.href);return{isLink:a,isClickable:s,href:t,linkProps:I({href:t})}}const l=i.useLink({to:b(()=>e.to||""),replace:b(()=>e.replace)}),u=o(()=>e.to?l:void 0),c=function(){const e=Ie("useRoute");return o(()=>{var t;return null==(t=null==e?void 0:e.proxy)?void 0:t.$route})}(),d=o(()=>{var t,n,r;return!!u.value&&(e.exact?c.value?(null==(r=u.value.isExactActive)?void 0:r.value)&&Ee(u.value.route.value.query,c.value.query):(null==(n=u.value.isExactActive)?void 0:n.value)??!1:(null==(t=u.value.isActive)?void 0:t.value)??!1)}),h=o(()=>{var t;return e.to?null==(t=u.value)?void 0:t.route.value.href:e.href});return{isLink:a,isClickable:s,isActive:d,route:null==(n=u.value)?void 0:n.route,navigate:null==(r=u.value)?void 0:r.navigate,href:h,linkProps:I({href:h,"aria-current":b(()=>d.value?"page":void 0)})}}const rw=re({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let iw=!1;const aw=Symbol("rippleStop");function sw(e,t){e.style.transform=t,e.style.webkitTransform=t}function ow(e){return"TouchEvent"===e.constructor.name}function lw(e){return"KeyboardEvent"===e.constructor.name}const uw={show(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null==(n=null==t?void 0:t._ripple)?void 0:n.enabled))return;const i=document.createElement("span"),a=document.createElement("span");i.appendChild(a),i.className="v-ripple__container",r.class&&(i.className+=` ${r.class}`);const{radius:s,scale:o,x:l,y:u,centerX:c,centerY:d}=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,a=0;if(!lw(e)){const n=t.getBoundingClientRect(),r=ow(e)?e.touches[e.touches.length-1]:e;i=r.clientX-n.left,a=r.clientY-n.top}let s=0,o=.3;(null==(n=t._ripple)?void 0:n.circle)?(o=.15,s=t.clientWidth/2,s=r.center?s:s+Math.sqrt((i-s)**2+(a-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*s)/2+"px",u=(t.clientHeight-2*s)/2+"px";return{radius:s,scale:o,x:r.center?l:i-s+"px",y:r.center?u:a-s+"px",centerX:l,centerY:u}}(e,t,r),h=2*s+"px";a.className="v-ripple__animation",a.style.width=h,a.style.height=h,t.appendChild(i);const p=window.getComputedStyle(t);p&&"static"===p.position&&(t.style.position="relative",t.dataset.previousPosition="static"),a.classList.add("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--visible"),sw(a,`translate(${l}, ${u}) scale3d(${o},${o},${o})`),a.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.classList.remove("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--in"),sw(a,`translate(${c}, ${d}) scale3d(1,1,1)`)})})},hide(e){var t;if(!(null==(t=null==e?void 0:e._ripple)?void 0:t.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(0===n.length)return;const r=Array.from(n).findLast(e=>!e.dataset.isHiding);if(!r)return;r.dataset.isHiding="true";const i=performance.now()-Number(r.dataset.activated),a=Math.max(250-i,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{var t;1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),(null==(t=r.parentNode)?void 0:t.parentNode)===e&&e.removeChild(r.parentNode)},300)},a)}};function cw(e){return void 0===e||!!e}function dw(e){const t={},n=e.currentTarget;if((null==n?void 0:n._ripple)&&!n._ripple.touched&&!e[aw]){if(e[aw]=!0,ow(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||lw(e),n._ripple.class&&(t.class=n._ripple.class),ow(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{uw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var e;(null==(e=null==n?void 0:n._ripple)?void 0:e.showTimerCommit)&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},80)}else uw.show(e,n,t)}}function hw(e){e[aw]=!0}function pw(e){const t=e.currentTarget;if(null==t?void 0:t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout(()=>{pw(e)}));window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),uw.hide(t)}}function fw(e){const t=e.currentTarget;(null==t?void 0:t._ripple)&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let vw=!1;function mw(e,t){!vw&&t.includes(e.key)&&(vw=!0,dw(e))}function gw(e){vw=!1,pw(e)}function yw(e){vw&&(vw=!1,pw(e))}function bw(e,t,n){const{value:r,modifiers:i}=t,a=cw(r);a||uw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=i.center,e._ripple.circle=i.circle;const s=we(r)?r:{};s.class&&(e._ripple.class=s.class);const o=s.keys??["Enter","Space"];if(e._ripple.keyDownHandler=e=>mw(e,o),a&&!n){if(i.stop)return e.addEventListener("touchstart",hw,{passive:!0}),void e.addEventListener("mousedown",hw);e.addEventListener("touchstart",dw,{passive:!0}),e.addEventListener("touchend",pw,{passive:!0}),e.addEventListener("touchmove",fw,{passive:!0}),e.addEventListener("touchcancel",pw),e.addEventListener("mousedown",dw),e.addEventListener("mouseup",pw),e.addEventListener("mouseleave",pw),e.addEventListener("keydown",e=>mw(e,o)),e.addEventListener("keyup",gw),e.addEventListener("blur",yw),e.addEventListener("dragstart",pw,{passive:!0})}else!a&&n&&ww(e)}function ww(e){var t;e.removeEventListener("mousedown",dw),e.removeEventListener("touchstart",dw),e.removeEventListener("touchend",pw),e.removeEventListener("touchmove",fw),e.removeEventListener("touchcancel",pw),e.removeEventListener("mouseup",pw),e.removeEventListener("mouseleave",pw),(null==(t=e._ripple)?void 0:t.keyDownHandler)&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",gw),e.removeEventListener("dragstart",pw),e.removeEventListener("blur",yw)}const _w={mounted:function(e,t){bw(e,t,!1)},unmounted:function(e){ww(e),delete e._ripple},updated:function(e,t){if(t.value===t.oldValue)return;bw(e,t,cw(t.oldValue))}},Sw=re({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Ub},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:be,appendIcon:be,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...wb(),...ye(),...Ib(),...lb(),...Db(),...Mb(),...Yb(),...Gb(),...ew(),...hb(),...rw(),...rb(),...ab({tag:"button"}),...ge(),...Tb({variant:"elevated"})},"VBtn"),Iw=ne()({name:"VBtn",props:Sw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:a}=Ce(e),{borderClasses:s}=_b(e),{densityClasses:u}=Cb(e),{dimensionStyles:c}=ub(e),{elevationClasses:d}=Vb(e),{loaderClasses:p}=Xb(e),{locationStyles:f}=Kb(e),{positionClasses:m}=tw(e),{roundedClasses:y}=pb(e),{sizeClasses:_,sizeStyles:S}=ib(e),I=Lb(e,e.symbol,!1),C=nw(e,n),k=o(()=>{var t;return void 0!==e.active?e.active:C.isLink.value?null==(t=C.isActive)?void 0:t.value:null==I?void 0:I.isSelected.value}),E=b(()=>k.value?e.activeColor??e.color:e.color),T=o(()=>{var t,n;return{color:(null==I?void 0:I.isSelected.value)&&(!C.isLink.value||(null==(t=C.isActive)?void 0:t.value))||!I||(null==(n=C.isActive)?void 0:n.value)?E.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:x,colorStyles:A,variantClasses:N}=xb(T),D=o(()=>(null==I?void 0:I.disabled.value)||e.disabled),V=b(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),P=o(()=>{if(void 0!==e.value&&"symbol"!=typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function O(e){var t;D.value||C.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===n.target)||(null==(t=C.navigate)||t.call(C,e),null==I||I.toggle())}return function(e,t){v(()=>{var t;return null==(t=e.isActive)?void 0:t.value},n=>{e.isLink.value&&null!=n&&t&&g(()=>{t(n)})},{immediate:!0})}(C,null==I?void 0:I.select),ve(()=>{const t=C.isLink.value?"a":e.tag,n=!(!e.prependIcon&&!r.prepend),o=!(!e.appendIcon&&!r.append),v=!(!e.icon||!0===e.icon);return w(i(t,h({type:"a"===t?void 0:"button",class:["v-btn",null==I?void 0:I.selectedClass.value,{"v-btn--active":k.value,"v-btn--block":e.block,"v-btn--disabled":D.value,"v-btn--elevated":V.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},a.value,s.value,x.value,u.value,d.value,p.value,m.value,y.value,_.value,N.value,e.class],style:[A.value,c.value,f.value,S.value,e.style],"aria-busy":!!e.loading||void 0,disabled:D.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:O,value:P.value},C.linkProps),{default:()=>{var t;return[Eb(!0,"v-btn"),!e.icon&&n&&l("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?i(Jy,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},r.prepend):i(ob,{key:"prepend-icon",icon:e.prependIcon},null)]),l("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&v?i(ob,{key:"content-icon",icon:e.icon},null):i(Jy,{key:"content-defaults",disabled:!v,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var t;return[(null==(t=r.default)?void 0:t.call(r))??R(e.text)]}})]),!e.icon&&o&&l("span",{key:"append",class:"v-btn__append"},[r.append?i(Jy,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},r.append):i(ob,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&l("span",{key:"loader",class:"v-btn__loader"},[(null==(t=r.loader)?void 0:t.call(r))??i(qb,{color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[_w,!D.value&&e.ripple,"",{center:!!e.icon}]])}),{group:I}}}),Cw=re({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...ye(),...ge()},"VDivider"),kw=ne()({name:"VDivider",props:Cw(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:i}=Ce(e),{textColorClasses:u,textColorStyles:c}=eb(()=>e.color),d=o(()=>{const t={};return e.length&&(t[e.vertical?"height":"width"]=he(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=he(e.thickness)),t});return ve(()=>{const t=l("hr",{class:s([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},i.value,u.value,e.class]),style:a([d.value,c.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":n.role&&"separator"!==n.role?void 0:e.vertical?"vertical":"horizontal",role:`${n.role||"separator"}`},null);return r.default?l("div",{class:s(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[t,l("div",{class:"v-divider__content"},[r.default()]),t]):t}),{}}}),Ew=re({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Tw(e,t,n){return ne()({name:e,props:Ew({mode:n,origin:t}),setup(t,n){let{slots:r}=n;const i={onBeforeEnter(e){t.origin&&(e.style.transformOrigin=t.origin)},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:i}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${r}px`,e.style.height=`${i}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&(null==e?void 0:e._transitionInitialStyles)){const{position:t,top:n,left:r,width:i,height:a}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=r||"",e.style.width=i||"",e.style.height=a||""}}};return()=>{const n=t.group?c:d;return p(n,{name:t.disabled?"":e,css:!t.disabled,...t.group?void 0:{mode:t.mode},...t.disabled?{}:i},r.default)}}})}function xw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return ne()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(n,r){let{slots:i}=r;const a=n.group?c:d;return()=>p(a,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},i.default)}})}function Aw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"width":"height",n=P(`offset-${t}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[t]:e.style[t]}},onEnter(r){const i=r._initialStyle;if(!i)return;r.style.setProperty("transition","none","important"),r.style.overflow="hidden";const a=`${r[n]}px`;r.style[t]="0",r.offsetHeight,r.style.transition=i.transition,e&&r._parent&&r._parent.classList.add(e),requestAnimationFrame(()=>{r.style[t]=a})},onAfterEnter:i,onEnterCancelled:i,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[t]:e.style[t]},e.style.overflow="hidden",e.style[t]=`${e[n]}px`,e.offsetHeight,requestAnimationFrame(()=>e.style[t]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(t){e&&t._parent&&t._parent.classList.remove(e),i(t)}function i(e){if(!e._initialStyle)return;const n=e._initialStyle[t];e.style.overflow=e._initialStyle.overflow,null!=n&&(e.style[t]=n),delete e._initialStyle}}const Nw=re({target:[Object,Array]},"v-dialog-transition"),Dw=new WeakMap,Vw=ne()({name:"VDialogTransition",props:Nw(),setup(e,t){let{slots:n}=t;const r={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(t,n){var r;await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),t.style.visibility="";const i=Pw(e.target,t),{x:a,y:s,sx:o,sy:l,speed:u}=i;Dw.set(t,i);const c=Oe(t,[{transform:`translate(${a}px, ${s}px) scale(${o}, ${l})`,opacity:0},{}],{duration:225*u,easing:Fe});null==(r=Rw(t))||r.forEach(e=>{Oe(e,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*u,easing:Le})}),c.finished.then(()=>n())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(t,n){var r;let i;await new Promise(e=>requestAnimationFrame(e)),i=!Dw.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?Pw(e.target,t):Dw.get(t);const{x:a,y:s,sx:o,sy:l,speed:u}=i;Oe(t,[{},{transform:`translate(${a}px, ${s}px) scale(${o}, ${l})`,opacity:0}],{duration:125*u,easing:Me}).finished.then(()=>n()),null==(r=Rw(t))||r.forEach(e=>{Oe(e,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*u,easing:Le})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>e.target?i(d,h({name:"dialog-transition"},r,{css:!1}),n):i(d,{name:"dialog-transition"},n)}});function Rw(e){var t;const n=null==(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))?void 0:t.children;return n&&[...n]}function Pw(e,t){const n=Be(e),r=Ue(t),[i,a]=getComputedStyle(t).transformOrigin.split(" ").map(e=>parseFloat(e)),[s,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;"left"===s||"left"===o?l-=n.width/2:"right"!==s&&"right"!==o||(l+=n.width/2);let u=n.top+n.height/2;"top"===s||"top"===o?u-=n.height/2:"bottom"!==s&&"bottom"!==o||(u+=n.height/2);const c=n.width/r.width,d=n.height/r.height,h=Math.max(1,c,d),p=c/h||0,f=d/h||0,v=r.width*r.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,10*(v-.12)+1):1;return{x:l-(i+r.left),y:u-(a+r.top),sx:p,sy:f,speed:m}}Tw("fab-transition","center center","out-in"),Tw("dialog-bottom-transition"),Tw("dialog-top-transition");const Ow=Tw("fade-transition");Tw("scale-transition"),Tw("scroll-x-transition"),Tw("scroll-x-reverse-transition"),Tw("scroll-y-transition"),Tw("scroll-y-reverse-transition"),Tw("slide-x-transition"),Tw("slide-x-reverse-transition");const Mw=Tw("slide-y-transition");Tw("slide-y-reverse-transition");const Lw=xw("expand-transition",Aw()),Fw=xw("expand-x-transition",Aw("",!0)),Bw=Symbol.for("vuetify:list");function Uw(){let{filterable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterable:!1};const t=x(Bw,{filterable:!1,hasPrepend:n(!1),updateHasPrepend:()=>null}),r={filterable:t.filterable||e,hasPrepend:n(!1),updateHasPrepend:e=>{e&&(r.hasPrepend.value=e)}};return T(Bw,r),t}function $w(){return x(Bw,null)}const jw=e=>{const t={activate:t=>{let{id:n,value:r,activated:i}=t;return n=O(n),e&&!r&&1===i.size&&i.has(n)||(r?i.add(n):i.delete(n)),i},in:(e,n,r)=>{let i=new Set;if(null!=e)for(const a of Te(e))i=t.activate({id:a,value:!0,activated:new Set(i),children:n,parents:r});return i},out:e=>Array.from(e)};return t},zw=e=>{const t=jw(e);return{activate:e=>{let{activated:n,id:r,...i}=e;r=O(r);const a=n.has(r)?new Set([r]):new Set;return t.activate({...i,id:r,activated:a})},in:(e,n,r)=>{let i=new Set;if(null!=e){const a=Te(e);a.length&&(i=t.in(a.slice(0,1),n,r))}return i},out:(e,n,r)=>t.out(e,n,r)}},qw={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){const e=new Set;e.add(t);let n=i.get(t);for(;null!=n;)e.add(n),n=i.get(n);return e}return r.delete(t),r},select:()=>null},Hw={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){let e=i.get(t);for(r.add(t);null!=e&&e!==t;)r.add(e),e=i.get(e);return r}return r.delete(t),r},select:()=>null},Gw={open:Hw.open,select:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(!n)return r;const a=[];let s=i.get(t);for(;null!=s;)a.push(s),s=i.get(s);return new Set(a)}},Kw=e=>{const t={select:t=>{let{id:n,value:r,selected:i}=t;if(n=O(n),e&&!r){const e=Array.from(i.entries()).reduce((e,t)=>{let[n,r]=t;return"on"===r&&e.push(n),e},[]);if(1===e.length&&e[0]===n)return i}return i.set(n,r?"on":"off"),i},in:(e,n,r,i)=>{const a=new Map;for(const s of e||[])t.select({id:s,value:!0,selected:a,children:n,parents:r,disabled:i});return a},out:e=>{const t=[];for(const[n,r]of e.entries())"on"===r&&t.push(n);return t}};return t},Ww=e=>{const t=Kw(e);return{select:e=>{let{selected:n,id:r,...i}=e;r=O(r);const a=n.has(r)?new Map([[r,n.get(r)]]):new Map;return t.select({...i,id:r,selected:a})},in:(e,n,r,i)=>(null==e?void 0:e.length)?t.in(e.slice(0,1),n,r,i):new Map,out:(e,n,r)=>t.out(e,n,r)}},Qw=e=>{const t={select:t=>{let{id:n,value:r,selected:i,children:a,parents:s,disabled:o}=t;n=O(n);const l=new Map(i),u=[n];for(;u.length;){const e=u.shift();o.has(e)||i.set(O(e),r?"on":"off"),a.has(e)&&u.push(...a.get(e))}let c=O(s.get(n));for(;c;){let e=!0,t=!0;for(const n of a.get(c)){const r=O(n);if(!o.has(r)&&("on"!==i.get(r)&&(e=!1),i.has(r)&&"off"!==i.get(r)&&(t=!1),!e&&!t))break}i.set(c,e?"on":t?"off":"indeterminate"),c=O(s.get(c))}if(e&&!r){if(0===Array.from(i.entries()).reduce((e,t)=>{let[n,r]=t;return"on"===r&&e.push(n),e},[]).length)return l}return i},in:(e,n,r,i)=>{let a=new Map;for(const s of e||[])a=t.select({id:s,value:!0,selected:a,children:n,parents:r,disabled:i});return a},out:(e,t)=>{const n=[];for(const[r,i]of e.entries())"on"!==i||t.has(r)||n.push(r);return n}};return t},Yw=Symbol.for("vuetify:nested"),Xw={id:n(),root:{register:()=>null,unregister:()=>null,children:f(new Map),parents:f(new Map),disabled:f(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:f(!1),selectable:f(!1),opened:f(new Set),activated:f(new Set),selected:f(new Map),selectedValues:f([]),getPath:()=>[]}},Jw=re({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Zw=e=>{let t=!1;const r=n(new Map),i=n(new Map),a=n(new Set),s=ke(e,"opened",e.opened,e=>new Set(Array.isArray(e)?e.map(e=>O(e)):e),e=>[...e.values()]),l=o(()=>{if("object"==typeof e.activeStrategy)return e.activeStrategy;if("function"==typeof e.activeStrategy)return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return(e=>{const t=jw(e);return{activate:e=>{let{id:n,activated:r,children:i,...a}=e;return n=O(n),i.has(n)?r:t.activate({id:n,activated:r,children:i,...a})},in:t.in,out:t.out}})(e.mandatory);case"single-leaf":return(e=>{const t=zw(e);return{activate:e=>{let{id:n,activated:r,children:i,...a}=e;return n=O(n),i.has(n)?r:t.activate({id:n,activated:r,children:i,...a})},in:t.in,out:t.out}})(e.mandatory);case"independent":return jw(e.mandatory);default:return zw(e.mandatory)}}),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;if("function"==typeof e.selectStrategy)return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return(e=>{const t=Ww(e);return{select:e=>{let{id:n,selected:r,children:i,...a}=e;return n=O(n),i.has(n)?r:t.select({id:n,selected:r,children:i,...a})},in:t.in,out:t.out}})(e.mandatory);case"leaf":return(e=>{const t=Kw(e);return{select:e=>{let{id:n,selected:r,children:i,...a}=e;return n=O(n),i.has(n)?r:t.select({id:n,selected:r,children:i,...a})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Kw(e.mandatory);case"single-independent":return Ww(e.mandatory);case"trunk":return(e=>{const t=Qw(e);return{select:t.select,in:t.in,out:(e,t,n)=>{const r=[];for(const[i,a]of e.entries())if("on"===a){if(n.has(i)){const t=n.get(i);if("on"===e.get(t))continue}r.push(i)}return r}}})(e.mandatory);default:return Qw(e.mandatory)}}),c=o(()=>{if("object"==typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return Gw;case"single":return qw;default:return Hw}}),d=ke(e,"activated",e.activated,e=>l.value.in(e,r.value,i.value),e=>l.value.out(e,r.value,i.value)),h=ke(e,"selected",e.selected,e=>u.value.in(e,r.value,i.value,a.value),e=>u.value.out(e,r.value,i.value));function p(e){const t=[];let n=O(e);for(;null!=n;)t.unshift(n),n=i.value.get(n);return t}y(()=>{t=!0});const f=Ie("nested"),v=new Set,m={id:n(),root:{opened:s,activatable:b(()=>e.activatable),selectable:b(()=>e.selectable),activated:d,selected:h,selectedValues:o(()=>{const e=[];for(const[t,n]of h.value.entries())"on"===n&&e.push(t);return e}),register:(e,t,n,s)=>{if(v.has(e))return p(e).map(String).join(" -> "),void p(t).concat(e).map(String).join(" -> ");v.add(e),t&&e!==t&&i.value.set(e,t),n&&a.value.add(e),s&&r.value.set(e,[]),null!=t&&r.value.set(t,[...r.value.get(t)||[],e])},unregister:e=>{if(t)return;v.delete(e),r.value.delete(e),a.value.delete(e);const n=i.value.get(e);if(n){const t=r.value.get(n)??[];r.value.set(n,t.filter(t=>t!==e))}i.value.delete(e)},open:(e,t,n)=>{f.emit("click:open",{id:e,value:t,path:p(e),event:n});const a=c.value.open({id:e,value:t,opened:new Set(s.value),children:r.value,parents:i.value,event:n});a&&(s.value=a)},openOnSelect:(e,t,n)=>{const a=c.value.select({id:e,value:t,selected:new Map(h.value),opened:new Set(s.value),children:r.value,parents:i.value,event:n});a&&(s.value=a)},select:(e,t,n)=>{f.emit("click:select",{id:e,value:t,path:p(e),event:n});const s=u.value.select({id:e,value:t,selected:new Map(h.value),children:r.value,parents:i.value,disabled:a.value,event:n});s&&(h.value=s),m.root.openOnSelect(e,t,n)},activate:(t,n,a)=>{if(!e.activatable)return m.root.select(t,!0,a);f.emit("click:activate",{id:t,value:n,path:p(t),event:a});const s=l.value.activate({id:t,value:n,activated:new Set(d.value),children:r.value,parents:i.value,event:a});if(s.size!==d.value.size)d.value=s;else{for(const e of s)if(!d.value.has(e))return void(d.value=s);for(const e of d.value)if(!s.has(e))return void(d.value=s)}},children:r,parents:i,disabled:a,getPath:p}};return T(Yw,m),m.root},e_=(e,n,r)=>{const i=x(Yw,Xw),a=Symbol("nested item"),s=o(()=>O(t(e))??a),l={...i,id:s,open:(e,t)=>i.root.open(s.value,e,t),openOnSelect:(e,t)=>i.root.openOnSelect(s.value,e,t),isOpen:o(()=>i.root.opened.value.has(s.value)),parent:o(()=>i.root.parents.value.get(s.value)),activate:(e,t)=>i.root.activate(s.value,e,t),isActivated:o(()=>i.root.activated.value.has(s.value)),select:(e,t)=>i.root.select(s.value,e,t),isSelected:o(()=>"on"===i.root.selected.value.get(s.value)),isIndeterminate:o(()=>"indeterminate"===i.root.selected.value.get(s.value)),isLeaf:o(()=>!i.root.children.value.get(s.value)),isGroupActivator:i.isGroupActivator};return m(()=>{i.isGroupActivator||i.root.register(s.value,i.id.value,t(n),r)}),y(()=>{i.isGroupActivator||i.root.unregister(s.value)}),r&&T(Yw,l),l};function t_(){const e=n(!1);C(()=>{window.requestAnimationFrame(()=>{e.value=!0})});return{ssrBootStyles:b(()=>e.value?void 0:{transition:"none !important"}),isBooted:M(e)}}const n_=$e({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return(()=>{const e=x(Yw,Xw);T(Yw,{...e,isGroupActivator:!0})})(),()=>{var e;return null==(e=n.default)?void 0:e.call(n)}}}),r_=re({activeColor:String,baseColor:String,color:String,collapseIcon:{type:be,default:"$collapse"},disabled:Boolean,expandIcon:{type:be,default:"$expand"},rawId:[String,Number],prependIcon:be,appendIcon:be,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ye(),...ab()},"VListGroup"),i_=ne()({name:"VListGroup",props:r_(),setup(e,t){let{slots:n}=t;const{isOpen:r,open:u,id:c}=e_(()=>e.value,()=>e.disabled,!0),d=o(()=>`v-list-group--id-${String(e.rawId??c.value)}`),h=$w(),{isBooted:p}=t_();function f(e){var t;["INPUT","TEXTAREA"].includes(null==(t=e.target)?void 0:t.tagName)||u(!r.value,e)}const v=o(()=>({onClick:f,class:"v-list-group__header",id:d.value})),m=o(()=>r.value?e.collapseIcon:e.expandIcon),g=o(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&m.value,appendIcon:e.appendIcon||!e.subgroup&&m.value,title:e.title,value:e.value}}));return ve(()=>i(e.tag,{class:s(["v-list-group",{"v-list-group--prepend":null==h?void 0:h.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":r.value},e.class]),style:a(e.style)},{default:()=>[n.activator&&i(Jy,{defaults:g.value},{default:()=>[i(n_,null,{default:()=>[n.activator({props:v.value,isOpen:r.value})]})]}),i(vb,{transition:{component:Lw},disabled:!p.value},{default:()=>{var e;return[w(l("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[null==(e=n.default)?void 0:e.call(n)]),[[S,r.value]])]}})]})),{isOpen:r}}}),a_=re({opacity:[Number,String],...ye(),...ab()},"VListItemSubtitle"),s_=ne()({name:"VListItemSubtitle",props:a_(),setup(e,t){let{slots:n}=t;return ve(()=>i(e.tag,{class:s(["v-list-item-subtitle",e.class]),style:a([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),o_=je("v-list-item-title"),l_=re({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:be,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:qe(),onClickOnce:qe(),...wb(),...ye(),...Ib(),...lb(),...Db(),...hb(),...rw(),...ab(),...ge(),...Tb({variant:"text"})},"VListItem"),u_=ne()({name:"VListItem",directives:{vRipple:_w},props:l_(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:r,emit:a}=t;const s=nw(e,n),u=o(()=>void 0===e.value?s.href.value:e.value),{activate:c,isActivated:d,select:p,isOpen:f,isSelected:g,isIndeterminate:y,isGroupActivator:S,root:I,parent:C,openOnSelect:k,id:E}=e_(u,()=>e.disabled,!1),T=$w(),x=o(()=>{var t;return!1!==e.active&&(e.active||(null==(t=s.isActive)?void 0:t.value)||(I.activatable.value?d.value:g.value))}),A=b(()=>!1!==e.link&&s.isLink.value),N=o(()=>!!T&&(I.selectable.value||I.activatable.value||null!=e.value)),D=o(()=>!e.disabled&&!1!==e.link&&(e.link||s.isClickable.value||N.value)),V=b(()=>e.rounded||e.nav),P=b(()=>e.color??e.activeColor),O=b(()=>({color:x.value?P.value??e.baseColor:e.baseColor,variant:e.variant}));function M(){null!=C.value&&I.open(C.value,!0),k(!0)}v(()=>{var e;return null==(e=s.isActive)?void 0:e.value},e=>{e&&M()}),m(()=>{var e;(null==(e=s.isActive)?void 0:e.value)&&M()});const{themeClasses:L}=Ce(e),{borderClasses:F}=_b(e),{colorClasses:B,colorStyles:U,variantClasses:$}=xb(O),{densityClasses:j}=Cb(e),{dimensionStyles:z}=ub(e),{elevationClasses:q}=Vb(e),{roundedClasses:H}=pb(V),G=b(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),K=b(()=>void 0!==e.ripple&&e.ripple&&(null==T?void 0:T.filterable)?{keys:["Enter"]}:e.ripple),W=o(()=>({isActive:x.value,select:p,isOpen:f.value,isSelected:g.value,isIndeterminate:y.value}));function Q(t){var n,r;a("click",t),["INPUT","TEXTAREA"].includes(null==(n=t.target)?void 0:n.tagName)||D.value&&(null==(r=s.navigate)||r.call(s,t),S||(I.activatable.value?c(!d.value,t):(I.selectable.value||null!=e.value)&&p(!g.value,t)))}function Y(e){const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||("Enter"===e.key||" "===e.key&&!(null==T?void 0:T.filterable))&&(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",e)))}return ve(()=>{const t=A.value?"a":e.tag,n=r.title||null!=e.title,a=r.subtitle||null!=e.subtitle,o=!(!e.appendAvatar&&!e.appendIcon),u=!(!o&&!r.append),c=!(!e.prependAvatar&&!e.prependIcon),p=!(!c&&!r.prepend);return null==T||T.updateHasPrepend(p),e.activeColor&&ze("active-color",["color","base-color"]),w(i(t,h({class:["v-list-item",{"v-list-item--active":x.value,"v-list-item--disabled":e.disabled,"v-list-item--link":D.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!p&&(null==T?void 0:T.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&x.value},L.value,F.value,B.value,j.value,q.value,G.value,H.value,$.value,e.class],style:[U.value,z.value,e.style],tabindex:D.value?T?-2:0:void 0,"aria-selected":N.value?I.activatable.value?d.value:I.selectable.value?g.value:x.value:void 0,onClick:Q,onKeydown:D.value&&!A.value&&Y},s.linkProps),{default:()=>{var t;return[Eb(D.value||x.value,"v-list-item"),p&&l("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?i(Jy,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var e;return[null==(e=r.prepend)?void 0:e.call(r,W.value)]}}):l(_,null,[e.prependAvatar&&i(Nb,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(ob,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),l("div",{class:"v-list-item__spacer"},null)]),l("div",{class:"v-list-item__content","data-no-activator":""},[n&&i(o_,{key:"title"},{default:()=>{var t;return[(null==(t=r.title)?void 0:t.call(r,{title:e.title}))??R(e.title)]}}),a&&i(s_,{key:"subtitle"},{default:()=>{var t;return[(null==(t=r.subtitle)?void 0:t.call(r,{subtitle:e.subtitle}))??R(e.subtitle)]}}),null==(t=r.default)?void 0:t.call(r,W.value)]),u&&l("div",{key:"append",class:"v-list-item__append"},[r.append?i(Jy,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var e;return[null==(e=r.append)?void 0:e.call(r,W.value)]}}):l(_,null,[e.appendIcon&&i(ob,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(Nb,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),l("div",{class:"v-list-item__spacer"},null)])]}}),[[_w,D.value&&K.value]])}),{activate:c,isActivated:d,isGroupActivator:S,isSelected:g,list:T,select:p,root:I,id:E,link:s}}}),c_=re({color:String,inset:Boolean,sticky:Boolean,title:String,...ye(),...ab()},"VListSubheader"),d_=ne()({name:"VListSubheader",props:c_(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:o}=eb(()=>e.color);return ve(()=>{const t=!(!n.default&&!e.title);return i(e.tag,{class:s(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},r.value,e.class]),style:a([{textColorStyles:o},e.style])},{default:()=>{var r;return[t&&l("div",{class:"v-list-subheader__text"},[(null==(r=n.default)?void 0:r.call(n))??e.title])]}})}),{}}}),h_=re({items:Array,returnObject:Boolean},"VListChildren"),p_=ne()({name:"VListChildren",props:h_(),setup(e,t){let{slots:n}=t;return Uw(),()=>{var t,r;return(null==(t=n.default)?void 0:t.call(n))??(null==(r=e.items)?void 0:r.map(t=>{var r,a;let{children:s,props:o,type:l,raw:u}=t;if("divider"===l)return(null==(r=n.divider)?void 0:r.call(n,{props:o}))??i(kw,o,null);if("subheader"===l)return(null==(a=n.subheader)?void 0:a.call(n,{props:o}))??i(d_,o,null);const c={subtitle:n.subtitle?e=>{var t;return null==(t=n.subtitle)?void 0:t.call(n,{...e,item:u})}:void 0,prepend:n.prepend?e=>{var t;return null==(t=n.prepend)?void 0:t.call(n,{...e,item:u})}:void 0,append:n.append?e=>{var t;return null==(t=n.append)?void 0:t.call(n,{...e,item:u})}:void 0,title:n.title?e=>{var t;return null==(t=n.title)?void 0:t.call(n,{...e,item:u})}:void 0},d=i_.filterProps(o);return s?i(i_,h(d,{value:e.returnObject?u:null==o?void 0:o.value,rawId:null==o?void 0:o.value}),{activator:t=>{let{props:r}=t;const a=h(o,r,{value:e.returnObject?u:o.value});return n.header?n.header({props:a}):i(u_,a,c)},default:()=>i(p_,{items:s,returnObject:e.returnObject},n)}):n.item?n.item({props:o}):i(u_,h(o,{value:e.returnObject?u:o.value}),c)}))}}}),f_=re({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),v_=new Set(["item","divider","subheader"]);function m_(e,t){const n=Ke(t,e.itemTitle,t),r=Ke(t,e.itemValue,n),i=Ke(t,e.itemChildren),a=!0===e.itemProps?"object"!=typeof t||null==t||Array.isArray(t)?void 0:"children"in t?We(t,["children"]):t:Ke(t,e.itemProps);let s=Ke(t,e.itemType,"item");v_.has(s)||(s="item");const o={title:n,value:r,...a};return{type:s,title:String(o.title??""),value:o.value,props:o,children:"item"===s&&Array.isArray(i)?g_(e,i):void 0,raw:t}}function g_(e,t){const n=Ge(e,m_.neededProps),r=[];for(const i of t)r.push(m_(n,i));return r}m_.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];const y_=new Set(["item","divider","subheader"]);function b_(e,t){const n=He(t)?t:Ke(t,e.itemTitle),r=He(t)?t:Ke(t,e.itemValue,void 0),i=Ke(t,e.itemChildren),a=!0===e.itemProps?We(t,["children"]):Ke(t,e.itemProps);let s=Ke(t,e.itemType,"item");y_.has(s)||(s="item");const o={title:n,value:r,...a};return{type:s,title:o.title,value:o.value,props:o,children:"item"===s&&i?w_(e,i):void 0,raw:t}}function w_(e,t){const n=[];for(const r of t)n.push(b_(e,r));return n}const __=re({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:be,collapseIcon:be,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":qe(),"onClick:select":qe(),"onUpdate:opened":qe(),...Jw({selectStrategy:"single-leaf",openStrategy:"list"}),...wb(),...ye(),...Ib(),...lb(),...Db(),...f_(),...hb(),...ab(),...ge(),...Tb({variant:"text"})},"VList"),S_=ne()({name:"VList",props:__(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:r}=t;const{items:l}=function(e){return{items:o(()=>w_(e,e.items))}}(e),{themeClasses:u}=Ce(e),{backgroundColorClasses:c,backgroundColorStyles:d}=tb(()=>e.bgColor),{borderClasses:h}=_b(e),{densityClasses:p}=Cb(e),{dimensionStyles:v}=ub(e),{elevationClasses:m}=Vb(e),{roundedClasses:g}=pb(e),{children:y,open:w,parents:_,select:S,getPath:I}=Zw(e),C=b(()=>e.lines?`v-list--${e.lines}-line`:void 0),k=b(()=>e.activeColor),E=b(()=>e.baseColor),T=b(()=>e.color);Uw({filterable:e.filterable}),ie({VListGroup:{activeColor:k,baseColor:E,color:T,expandIcon:b(()=>e.expandIcon),collapseIcon:b(()=>e.collapseIcon)},VListItem:{activeClass:b(()=>e.activeClass),activeColor:k,baseColor:E,color:T,density:b(()=>e.density),disabled:b(()=>e.disabled),lines:b(()=>e.lines),nav:b(()=>e.nav),slim:b(()=>e.slim),variant:b(()=>e.variant)}});const x=n(!1),A=f();function N(e){x.value=!0}function D(e){x.value=!1}function V(e){var t;x.value||e.relatedTarget&&(null==(t=A.value)?void 0:t.contains(e.relatedTarget))||O()}function R(e){const t=e.target;if(A.value&&("INPUT"!==t.tagName||!["Home","End"].includes(e.key))&&"TEXTAREA"!==t.tagName){if("ArrowDown"===e.key)O("next");else if("ArrowUp"===e.key)O("prev");else if("Home"===e.key)O("first");else{if("End"!==e.key)return;O("last")}e.preventDefault()}}function P(e){x.value=!0}function O(e){if(A.value)return Qe(A.value,e)}return ve(()=>i(e.tag,{ref:A,class:s(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},u.value,c.value,h.value,p.value,m.value,C.value,g.value,e.class]),style:a([d.value,v.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:N,onFocusout:D,onFocus:V,onKeydown:R,onMousedown:P},{default:()=>[i(p_,{items:l.value,returnObject:e.returnObject},r)]})),{open:w,select:S,focus:O,children:y,parents:_,getPath:I}}});function I_(e,t){return{x:e.x+t.x,y:e.y+t.y}}function C_(e,t){if("top"===e.side||"bottom"===e.side){const{side:n,align:r}=e;return I_({x:"left"===r?0:"center"===r?t.width/2:"right"===r?t.width:r,y:"top"===n?0:"bottom"===n?t.height:n},t)}if("left"===e.side||"right"===e.side){const{side:n,align:r}=e;return I_({x:"left"===n?0:"right"===n?t.width:n,y:"top"===r?0:"center"===r?t.height/2:"bottom"===r?t.height:r},t)}return I_({x:t.width/2,y:t.height/2},t)}const k_={static:function(){},connected:function(e,t,n){(Array.isArray(e.target.value)||Xe(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:i}=ae(()=>{const n=Ve(t.location,e.isRtl.value),r="overlap"===t.origin?n:"auto"===t.origin?Je(n):Ve(t.origin,e.isRtl.value);return n.side===r.side&&n.align===Ze(r).align?{preferredAnchor:et(n),preferredOrigin:et(r)}:{preferredAnchor:n,preferredOrigin:r}}),[a,s,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>o(()=>{const n=parseFloat(t[e]);return isNaN(n)?1/0:n})),c=o(()=>{if(Array.isArray(t.offset))return t.offset;if("string"==typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"==typeof t.offset?[t.offset,0]:[0,0]});let d=!1,h=-1;const p=new tt(4),f=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(e=>{e!==h&&p.clear(),requestAnimationFrame(e=>{h=e})}),p.isFull){const e=p.values();if(Ee(e.at(-1),e.at(-3))&&!Ee(e.at(-1),e.at(-2)))return}const e=y();e&&p.push(e.flipped)});let m=new nt({x:0,y:0,width:0,height:0});function y(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(m=Be(e.target.value));const t=function(e,t){const n=Ue(e);t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0);return n.y-=parseFloat(e.style.top||0),n}(e.contentEl.value,e.isRtl.value),o=rt(e.contentEl.value);o.length||(o.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(t.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),t.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const h=o.reduce((e,t)=>{const n=it(t);return e?new nt({x:Math.max(e.left,n.left),y:Math.max(e.top,n.top),width:Math.min(e.right,n.right)-Math.max(e.left,n.left),height:Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)}):n},void 0);h.x+=12,h.y+=12,h.width-=24,h.height-=24;let p={anchor:r.value,origin:i.value};function f(e){const n=new nt(t),r=C_(e.anchor,m),i=C_(e.origin,n);let{x:a,y:s}=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(r,i);switch(e.anchor.side){case"top":s-=c.value[0];break;case"bottom":s+=c.value[0];break;case"left":a-=c.value[0];break;case"right":a+=c.value[0]}switch(e.anchor.align){case"top":s-=c.value[1];break;case"bottom":s+=c.value[1];break;case"left":a-=c.value[1];break;case"right":a+=c.value[1]}n.x+=a,n.y+=s,n.width=Math.min(n.width,l.value),n.height=Math.min(n.height,u.value);return{overflows:st(n,h),x:a,y:s}}let v=0,g=0;const y={x:0,y:0},b={x:!1,y:!1};let w=-1;for(;!(w++>10);){const{x:e,y:n,overflows:r}=f(p);v+=e,g+=n,t.x+=e,t.y+=n;{const e=at(p.anchor),t=r.x.before||r.x.after,n=r.y.before||r.y.after;let i=!1;if(["x","y"].forEach(a=>{if("x"===a&&t&&!b.x||"y"===a&&n&&!b.y){const t={anchor:{...p.anchor},origin:{...p.origin}},n="x"===a?"y"===e?Ze:Je:"y"===e?Je:Ze;t.anchor=n(t.anchor),t.origin=n(t.origin);const{overflows:s}=f(t);(s[a].before<=r[a].before&&s[a].after<=r[a].after||s[a].before+s[a].after<(r[a].before+r[a].after)/2)&&(p=t,i=b[a]=!0)}}),i)continue}r.x.before&&(v+=r.x.before,t.x+=r.x.before),r.x.after&&(v-=r.x.after,t.x-=r.x.after),r.y.before&&(g+=r.y.before,t.y+=r.y.before),r.y.after&&(g-=r.y.after,t.y-=r.y.after);{const e=st(t,h);y.x=h.width-e.x.before-e.x.after,y.y=h.height-e.y.before-e.y.after,v+=e.x.before,t.x+=e.x.before,g+=e.y.before,t.y+=e.y.before}break}const _=at(p.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${p.anchor.side} ${p.anchor.align}`,transformOrigin:`${p.origin.side} ${p.origin.align}`,top:he(T_(g)),left:e.isRtl.value?void 0:he(T_(v)),right:e.isRtl.value?he(T_(-v)):void 0,minWidth:he("y"===_?Math.min(a.value,m.width):a.value),maxWidth:he(x_(Ne(y.x,a.value===1/0?0:a.value,l.value))),maxHeight:he(x_(Ne(y.y,s.value===1/0?0:s.value,u.value)))}),{available:y,contentBox:t,flipped:b}}return v(e.target,(e,t)=>{t&&!Array.isArray(t)&&f.unobserve(t),Array.isArray(e)?Ee(e,t)||y():e&&f.observe(e)},{immediate:!0}),v(e.contentEl,(e,t)=>{t&&f.unobserve(t),e&&f.observe(e)},{immediate:!0}),N(()=>{f.disconnect()}),v(()=>[r.value,i.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>y()),g(()=>{const e=y();if(!e)return;const{available:t,contentBox:n}=e;n.height>t.y&&requestAnimationFrame(()=>{y(),requestAnimationFrame(()=>{y()})})}),{updateLocation:y}}},E_=re({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"==typeof e||e in k_},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function T_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function x_(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let A_=!0;const N_=[];let D_=-1;function V_(){cancelAnimationFrame(D_),D_=requestAnimationFrame(()=>{const e=N_.shift();e&&e(),N_.length?V_():A_=!0})}const R_={none:null,close:function(e){M_(O_(e.target.value,e.contentEl.value),function(t){e.isActive.value=!1})},block:function(e,t){var n;const r=null==(n=e.root.value)?void 0:n.offsetParent,i=O_(e.target.value,e.contentEl.value),a=[...new Set([...rt(i,t.contained?r:void 0),...rt(e.contentEl.value,t.contained?r:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(l=r||document.documentElement,ot(l)&&l);var l;o&&e.root.value.classList.add("v-overlay--scroll-blocked");a.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",he(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",he(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",he(s)),e.classList.add("v-overlay-scroll-blocked")}),N(()=>{a.forEach((e,t)=>{const n=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),r=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),i=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-n,e.scrollTop=-r,e.style.scrollBehavior=i}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})},reposition:function(e,t,n){let r=!1,i=-1,a=-1;function s(t){var n;n=()=>{var n,i;const a=performance.now();null==(i=(n=e.updateLocation).value)||i.call(n,t);const s=performance.now()-a;r=s/(1e3/60)>2},!A_||N_.length?(N_.push(n),V_()):(A_=!1,n(),V_())}a=("undefined"==typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{n.run(()=>{M_(O_(e.target.value,e.contentEl.value),e=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{s(e)})})):s(e)})})}),N(()=>{"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(a),cancelAnimationFrame(i)})}},P_=re({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"==typeof e||e in R_}},"VOverlay-scroll-strategies");function O_(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!(null==t?void 0:t.contains(e))):e??t}function M_(e,t){const n=[document,...rt(e)];n.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),N(()=>{n.forEach(e=>{e.removeEventListener("scroll",t)})})}const L_=Symbol.for("vuetify:v-menu"),F_=re({closeDelay:[Number,String],openDelay:[Number,String]},"delay");const B_=re({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...F_()},"VOverlay-activator");function U_(e,t){let{isActive:n,isTop:r,contentEl:i}=t;const a=Ie("useActivator"),s=f();let l=!1,u=!1,c=!0;const d=o(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),p=o(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:y}=function(e,t){let n=()=>{};function r(r){null==n||n();const i=Number(r?e.openDelay:e.closeDelay);return new Promise(e=>{n=lt(i,()=>{null==t||t(r),e(r)})})}return{clearDelay:n,runOpenDelay:function(){return r(!0)},runCloseDelay:function(){return r(!1)}}}(e,t=>{t!==(e.openOnHover&&l||d.value&&u)||e.openOnHover&&n.value&&!r.value||(n.value!==t&&(c=!0),n.value=t)}),b=f(),w=e=>{e.stopPropagation(),s.value=e.currentTarget||e.target,n.value||(b.value=[e.clientX,e.clientY]),n.value=!n.value},_=e=>{var t;(null==(t=e.sourceCapabilities)?void 0:t.firesTouchEvents)||(l=!0,s.value=e.currentTarget||e.target,m())},S=e=>{l=!1,y()},I=e=>{!1!==ct(e.target,":focus-visible")&&(u=!0,e.stopPropagation(),s.value=e.currentTarget||e.target,m())},C=e=>{u=!1,e.stopPropagation(),y()},k=o(()=>{const t={};return p.value&&(t.onClick=w),e.openOnHover&&(t.onMouseenter=_,t.onMouseleave=S),d.value&&(t.onFocus=I,t.onBlur=C),t}),E=o(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{l=!0,m()},t.onMouseleave=()=>{l=!1,y()}),d.value&&(t.onFocusin=()=>{u=!0,m()},t.onFocusout=()=>{u=!1,y()}),e.closeOnContentClick){const e=x(L_,null);t.onClick=()=>{n.value=!1,null==e||e.closeParents()}}return t}),T=o(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{c&&(l=!0,c=!1,m())},t.onMouseleave=()=>{l=!1,y()}),t});v(r,t=>{var r;!t||(!e.openOnHover||l||d.value&&u)&&(!d.value||u||e.openOnHover&&l)||(null==(r=i.value)?void 0:r.contains(document.activeElement))||(n.value=!1)}),v(n,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const A=ut();D(()=>{A.value&&g(()=>{s.value=A.el})});const V=ut(),R=o(()=>"cursor"===e.target&&b.value?b.value:V.value?V.el:$_(e.target,a)||s.value),P=o(()=>Array.isArray(R.value)?void 0:R.value);let O;return v(()=>!!e.activator,t=>{t&&Re?(O=L(),O.run(()=>{!function(e,t,n){let{activatorEl:r,activatorEvents:i}=n;function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&dt(t,h(i.value,n))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&ht(t,h(i.value,n))}function o(){const n=$_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator,t);return r.value=(null==n?void 0:n.nodeType)===Node.ELEMENT_NODE?n:void 0,r.value}v(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=o(t);e&&s(e)}e&&g(()=>a())},{immediate:!0}),v(()=>e.activatorProps,()=>{a()}),N(()=>{s()})}(e,a,{activatorEl:s,activatorEvents:k})})):O&&O.stop()},{flush:"post",immediate:!0}),N(()=>{null==O||O.stop()}),{activatorEl:s,activatorRef:A,target:R,targetEl:P,targetRef:V,activatorEvents:k,contentEvents:E,scrimEvents:T}}function $_(e,t){var n,r;if(!e)return;let i;if("parent"===e){let e=null==(r=null==(n=null==t?void 0:t.proxy)?void 0:n.$el)?void 0:r.parentNode;for(;null==e?void 0:e.hasAttribute("data-no-activator");)e=e.parentNode;i=e}else i="string"==typeof e?document.querySelector(e):"$el"in e?e.$el:e;return i}const j_=re({eager:Boolean},"lazy");function z_(e,t){const r=n(!1),i=b(()=>r.value||e.eager||t.value);return v(t,()=>r.value=!0),{isBooted:r,hasContent:i,onAfterLeave:function(){e.eager||(r.value=!1)}}}function q_(){const e=Ie("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const H_=Symbol.for("vuetify:stack"),G_=I([]);function K_(){return!0}function W_(e,t,n){if(!e||!1===Q_(e,n))return!1;const r=ft(t);if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&r.host===e.target)return!1;const i=("object"==typeof n.value&&n.value.include||(()=>[]))();return i.push(t),!i.some(t=>null==t?void 0:t.contains(e.target))}function Q_(e,t){return("object"==typeof t.value&&t.value.closeConditional||K_)(e)}function Y_(e,t){const n=ft(e);t(document),"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const X_={mounted(e,t){const n=n=>function(e,t,n){const r="function"==typeof n.value?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&W_(e,t,n)&&setTimeout(()=>{Q_(e,n)&&r&&r(e)},0)}(n,e,t),r=n=>{e._clickOutside.lastMousedownWasOutside=W_(n,e,t)};Y_(e,e=>{e.addEventListener("click",n,!0),e.addEventListener("mousedown",r,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:r}},beforeUnmount(e,t){e._clickOutside&&(Y_(e,n=>{var r;if(!n||!(null==(r=e._clickOutside)?void 0:r[t.instance.$.uid]))return;const{onClick:i,onMousedown:a}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",a,!0)}),delete e._clickOutside[t.instance.$.uid])}};function J_(e){const{modelValue:t,color:n,...r}=e;return i(d,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&l("div",h({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},r),null)]})}const Z_=re({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...B_(),...ye(),...lb(),...j_(),...E_(),...P_(),...ge(),...fb()},"VOverlay"),eS=ne()({name:"VOverlay",directives:{vClickOutside:X_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Z_()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,r){let{slots:a,attrs:s,emit:u}=r;const c=Ie("VOverlay"),d=f(),p=f(),m=f(),k=ke(e,"modelValue"),E=o({get:()=>k.value,set:t=>{t&&e.disabled||(k.value=t)}}),{themeClasses:A}=Ce(e),{rtlClasses:V,isRtl:R}=De(),{hasContent:P,onAfterLeave:B}=z_(e,E),U=tb(()=>"string"==typeof e.scrim?e.scrim:null),{globalTop:$,localTop:j,stackStyles:z}=function(e,r,i){const a=Ie("useStack"),s=!i,o=x(H_,void 0),l=I({activeChildren:new Set});T(H_,l);const u=n(Number(t(r)));Ye(e,()=>{var e;const n=null==(e=G_.at(-1))?void 0:e[1];u.value=n?n+10:Number(t(r)),s&&G_.push([a.uid,u.value]),null==o||o.activeChildren.add(a.uid),N(()=>{if(s){const e=O(G_).findIndex(e=>e[0]===a.uid);G_.splice(e,1)}null==o||o.activeChildren.delete(a.uid)})});const c=n(!0);s&&D(()=>{var e;const t=(null==(e=G_.at(-1))?void 0:e[0])===a.uid;setTimeout(()=>c.value=t)});const d=b(()=>!l.activeChildren.size);return{globalTop:M(c),localTop:d,stackStyles:b(()=>({zIndex:u.value}))}}(E,()=>e.zIndex,e._disableGlobalStack),{activatorEl:q,activatorRef:H,target:G,targetEl:K,targetRef:W,activatorEvents:Q,contentEvents:Y,scrimEvents:X}=U_(e,{isActive:E,isTop:j,contentEl:m}),{teleportTarget:J}=function(e){return{teleportTarget:o(()=>{const t=e();if(!0===t||!Re)return;const n=!1===t?document.body:"string"==typeof t?document.querySelector(t):t;if(null==n)return;let r=[...n.children].find(e=>e.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",n.appendChild(r)),r})}}(()=>{var t,n,r;const i=e.attach||e.contained;if(i)return i;const a=(null==(t=null==q?void 0:q.value)?void 0:t.getRootNode())||(null==(r=null==(n=c.proxy)?void 0:n.$el)?void 0:r.getRootNode());return a instanceof ShadowRoot&&a}),{dimensionStyles:Z}=ub(e),ee=function(){if(!Re)return n(!1);const{ssr:e}=pt();if(e){const e=n(!1);return C(()=>{e.value=!0}),e}return n(!0)}(),{scopeId:te}=q_();v(()=>e.disabled,e=>{e&&(E.value=!1)});const{contentStyles:ne,updateLocation:re}=function(e,t){const n=f({}),r=f();function i(e){var t;null==(t=r.value)||t.call(r,e)}function a(e){var t;null==(t=r.value)||t.call(r,e)}function s(e){var t;null==(t=r.value)||t.call(r,e)}return Re&&Ye(()=>!(!t.isActive.value||!e.locationStrategy),o=>{var l,u;v(()=>e.locationStrategy,o),N(()=>{window.removeEventListener("resize",i),null==visualViewport||visualViewport.removeEventListener("resize",a),null==visualViewport||visualViewport.removeEventListener("scroll",s),r.value=void 0}),window.addEventListener("resize",i,{passive:!0}),null==visualViewport||visualViewport.addEventListener("resize",a,{passive:!0}),null==visualViewport||visualViewport.addEventListener("scroll",s,{passive:!0}),"function"==typeof e.locationStrategy?r.value=null==(l=e.locationStrategy(t,e,n))?void 0:l.updateLocation:r.value=null==(u=k_[e.locationStrategy](t,e,n))?void 0:u.updateLocation}),{contentStyles:n,updateLocation:r}}(e,{isRtl:R,contentEl:m,target:G,isActive:E});function ie(t){u("click:outside",t),e.persistent?pe():E.value=!1}function ae(t){return E.value&&$.value&&(!e.scrim||t.target===p.value||t instanceof MouseEvent&&t.shadowTarget===p.value)}function se(t){var n,r,i;"Escape"===t.key&&$.value&&((null==(n=m.value)?void 0:n.contains(document.activeElement))||u("keydown",t),e.persistent?pe():(E.value=!1,(null==(r=m.value)?void 0:r.contains(document.activeElement))&&(null==(i=q.value)||i.focus())))}function oe(e){("Escape"!==e.key||$.value)&&u("keydown",e)}!function(e,t){if(!Re)return;let n;D(async()=>{null==n||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=L(),await new Promise(e=>setTimeout(e)),n.active&&n.run(()=>{var r;"function"==typeof e.scrollStrategy?e.scrollStrategy(t,e,n):null==(r=R_[e.scrollStrategy])||r.call(R_,t,e,n)}))}),N(()=>{null==n||n.stop()})}(e,{root:d,contentEl:m,targetEl:K,target:G,isActive:E,updateLocation:re}),Re&&v(E,e=>{e?window.addEventListener("keydown",se):window.removeEventListener("keydown",se)},{immediate:!0}),y(()=>{Re&&window.removeEventListener("keydown",se)});const le=null==(ce=null==(ue=Ie("useRouter"))?void 0:ue.proxy)?void 0:ce.$router;var ue,ce;Ye(()=>e.closeOnBack,()=>{!function(e,t){let n,r,i=!1;function a(e){var t;(null==(t=e.state)?void 0:t.replaced)||(i=!0,setTimeout(()=>i=!1))}Re&&(null==e?void 0:e.beforeEach)&&(g(()=>{window.addEventListener("popstate",a),n=e.beforeEach((e,n,r)=>{iw?i?t(r):r():setTimeout(()=>i?t(r):r()),iw=!0}),r=null==e?void 0:e.afterEach(()=>{iw=!1})}),N(()=>{window.removeEventListener("popstate",a),null==n||n(),null==r||r()}))}(le,t=>{$.value&&E.value?(t(!1),e.persistent?pe():E.value=!1):t()})});const de=f();function pe(){e.noClickAnimation||m.value&&Oe(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Le})}function fe(){u("afterEnter")}function me(){B(),u("afterLeave")}return v(()=>E.value&&(e.absolute||e.contained)&&null==J.value,e=>{if(e){const e=vt(d.value);e&&e!==document.scrollingElement&&(de.value=e.scrollTop)}}),ve(()=>{var t;return l(_,null,[null==(t=a.activator)?void 0:t.call(a,{isActive:E.value,targetRef:W,props:h({ref:H},Q.value,e.activatorProps)}),ee.value&&P.value&&i(F,{disabled:!J.value,to:J.value},{default:()=>[l("div",h({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":E.value,"v-overlay--contained":e.contained},A.value,V.value,e.class],style:[z.value,{"--v-overlay-opacity":e.opacity,top:he(de.value)},e.style],ref:d,onKeydown:oe},te,s),[i(J_,h({color:U,modelValue:E.value&&!!e.scrim,ref:p},X.value),null),i(vb,{appear:!0,persisted:!0,transition:e.transition,target:G.value,onAfterEnter:fe,onAfterLeave:me},{default:()=>{var t;return[w(l("div",h({ref:m,class:["v-overlay__content",e.contentClass],style:[Z.value,ne.value]},Y.value,e.contentProps),[null==(t=a.default)?void 0:t.call(a,{isActive:E})]),[[S,E.value],[X_,{handler:ie,closeConditional:ae,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:p,target:G,animateClick:pe,contentEl:m,globalTop:$,localTop:j,updateLocation:re}}}),tS=Symbol("Forwarded refs");function nS(e,t){let n=e;for(;n;){const e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Object.getPrototypeOf(n)}}function rS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e[tS]=n,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const r of n)if(r.value&&Reflect.has(r.value,t)){const e=Reflect.get(r.value,t);return"function"==typeof e?e.bind(r.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,t))return!0;return!1},set(e,t,r){if(Reflect.has(e,t))return Reflect.set(e,t,r);if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,t))return Reflect.set(i.value,t,r);return!1},getOwnPropertyDescriptor(e,t){var r;const i=Reflect.getOwnPropertyDescriptor(e,t);if(i)return i;if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of n){if(!e.value)continue;const n=nS(e.value,t)??("_"in e.value?nS(null==(r=e.value._)?void 0:r.setupState,t):void 0);if(n)return n}for(const e of n){const n=e.value&&e.value[tS];if(!n)continue;const r=n.slice();for(;r.length;){const e=r.shift(),n=nS(e.value,t);if(n)return n;const i=e.value&&e.value[tS];i&&r.push(...i)}}}}})}const iS=re({id:String,submenu:Boolean,disableInitialFocus:Boolean,...We(Z_({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Vw}}),["absolute"])},"VMenu"),aS=ne()({name:"VMenu",props:iS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const a=ke(e,"modelValue"),{scopeId:s}=q_(),{isRtl:l}=De(),u=E(),c=b(()=>e.id||`v-menu-${u}`),d=f(),p=x(L_,null),m=n(new Set);async function w(e){var t,n,r;const i=e.relatedTarget,s=e.target;if(await g(),a.value&&i!==s&&(null==(t=d.value)?void 0:t.contentEl)&&(null==(n=d.value)?void 0:n.globalTop)&&![document,d.value.contentEl].includes(s)&&!d.value.contentEl.contains(s)){null==(r=mt(d.value.contentEl)[0])||r.focus()}}function _(e){null==p||p.closeParents(e)}function S(t){var n,r,i,s,o;if(!e.disabled)if("Tab"===t.key||"Enter"===t.key&&!e.closeOnContentClick){if("Enter"===t.key&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;"Enter"===t.key&&t.preventDefault();gt(mt(null==(n=d.value)?void 0:n.contentEl,!1),t.shiftKey?"prev":"next",e=>e.tabIndex>=0)||(a.value=!1,null==(i=null==(r=d.value)?void 0:r.activatorEl)||i.focus())}else e.submenu&&t.key===(l.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,null==(o=null==(s=d.value)?void 0:s.activatorEl)||o.focus())}function I(t){var n;if(e.disabled)return;const r=null==(n=d.value)?void 0:n.contentEl;r&&a.value?"ArrowDown"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(r,"next")):"ArrowUp"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(r,"prev")):e.submenu&&(t.key===(l.value?"ArrowRight":"ArrowLeft")?a.value=!1:t.key===(l.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),Qe(r,"first"))):(e.submenu?t.key===(l.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(a.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>I(t))))}T(L_,{register(){m.value.add(u)},unregister(){m.value.delete(u)},closeParents(t){setTimeout(()=>{var n;m.value.size||e.persistent||null!=t&&(!(null==(n=d.value)?void 0:n.contentEl)||yt(t,d.value.contentEl))||(a.value=!1,null==p||p.closeParents())},40)}}),y(()=>{null==p||p.unregister(),document.removeEventListener("focusin",w)}),B(()=>a.value=!1),v(a,t=>{t?(null==p||p.register(),Re&&!e.disableInitialFocus&&document.addEventListener("focusin",w,{once:!0})):(null==p||p.unregister(),Re&&document.removeEventListener("focusin",w))},{immediate:!0});const C=o(()=>h({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":c.value,onKeydown:I},e.activatorProps));return ve(()=>{const t=eS.filterProps(e);return i(eS,h({ref:d,id:c.value,class:["v-menu",e.class],style:e.style},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,absolute:!0,activatorProps:C.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":_,onKeydown:S},s),{activator:r.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(Jy,{root:"VMenu"},{default:()=>{var e;return[null==(e=r.default)?void 0:e.call(r,...t)]}})}})}),rS({id:c,"ΨopenChildren":m},d)}}),sS={key:0},oS={key:1,class:"text-body-2 font-weight-medium"},lS={key:1},uS=Yy({__name:"AuthStatus",props:{user:{type:Object,default:null}},emits:["login","logout"],setup(e,{emit:t}){const n=t,r=()=>{n("login")},a=()=>{n("logout")};return(t,n)=>($(),U("div",null,[e.user?($(),U("div",sS,[i(aS,{location:"bottom"},{activator:j(({props:t})=>[i(Iw,h({icon:""},t,{variant:"text",class:"minimal-user-button"}),{default:j(()=>[i(Nb,{color:"primary",size:"32",class:"minimal-avatar"},{default:j(()=>{var t;return[e.user.photoURL?($(),q(bb,{key:0,src:e.user.photoURL,alt:e.user.displayName},null,8,["src","alt"])):($(),U("span",oS,R(null==(t=e.user.displayName)?void 0:t.charAt(0)),1))]}),_:1})]),_:2},1040)]),default:j(()=>[i(S_,{class:"minimal-menu"},{default:j(()=>[i(u_,{title:e.user.displayName,subtitle:e.user.email,class:"minimal-menu-item"},null,8,["title","subtitle"]),i(kw,{class:"minimal-divider"}),i(u_,{onClick:a,"prepend-icon":"mdi-logout",class:"minimal-menu-item"},{default:j(()=>[i(o_,{class:"text-body-2"},{default:j(()=>n[0]||(n[0]=[z("ログアウト",-1)])),_:1,__:[0]})]),_:1})]),_:1})]),_:1})])):($(),U("div",lS,[i(Iw,{onClick:r,"prepend-icon":"mdi-google",variant:"outlined",color:"primary",class:"minimal-login-button"},{default:j(()=>n[1]||(n[1]=[z(" Googleでログイン ",-1)])),_:1,__:[1]})]))]))}},[["__scopeId","data-v-91d386da"]]),cS=re({text:String,onClick:qe(),...ye(),...ge()},"VLabel"),dS=ne()({name:"VLabel",props:cS(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;return l("label",{class:s(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:a(e.style),onClick:e.onClick},[e.text,null==(t=n.default)?void 0:t.call(n)])}),{}}}),hS=Symbol.for("vuetify:selection-control-group"),pS=re({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:be,trueIcon:be,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ee},...ye(),...Ib(),...ge()},"SelectionControlGroup"),fS=re({...pS({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");ne()({name:"VSelectionControlGroup",props:fS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=ke(e,"modelValue"),i=E(),o=b(()=>e.id||`v-selection-control-group-${i}`),u=b(()=>e.name||o.value),c=new Set;return T(hS,{modelValue:r,forceUpdate:()=>{c.forEach(e=>e())},onForceUpdate:e=>{c.add(e),N(()=>{c.delete(e)})}}),ie({[e.defaultsTarget]:{color:b(()=>e.color),disabled:b(()=>e.disabled),density:b(()=>e.density),error:b(()=>e.error),inline:b(()=>e.inline),modelValue:r,multiple:b(()=>!!e.multiple||null==e.multiple&&Array.isArray(r.value)),name:u,falseIcon:b(()=>e.falseIcon),trueIcon:b(()=>e.trueIcon),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),type:b(()=>e.type),valueComparator:b(()=>e.valueComparator)}}),ve(()=>{var t;return l("div",{class:s(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:a(e.style),role:"radio"===e.type?"radiogroup":void 0},[null==(t=n.default)?void 0:t.call(n)])}),{}}});const vS=re({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ye(),...pS()},"VSelectionControl");const mS=ne()({name:"VSelectionControl",directives:{vRipple:_w},inheritAttrs:!1,props:vS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:u}=t;const{group:c,densityClasses:d,icon:p,model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:S,backgroundColorStyles:I,trueValue:C}=function(e){const t=x(hS,void 0),{densityClasses:n}=Cb(e),r=ke(e,"modelValue"),i=o(()=>void 0!==e.trueValue?e.trueValue:void 0===e.value||e.value),a=o(()=>void 0!==e.falseValue&&e.falseValue),s=o(()=>!!e.multiple||null==e.multiple&&Array.isArray(r.value)),l=o({get(){const n=t?t.modelValue.value:r.value;return s.value?Te(n).some(t=>e.valueComparator(t,i.value)):e.valueComparator(n,i.value)},set(n){if(e.readonly)return;const o=n?i.value:a.value;let l=o;s.value&&(l=n?[...Te(r.value),o]:Te(r.value).filter(t=>!e.valueComparator(t,i.value))),t?t.modelValue.value=l:r.value=l}}),{textColorClasses:u,textColorStyles:c}=eb(()=>{if(!e.error&&!e.disabled)return l.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:h}=tb(()=>!l.value||e.error||e.disabled?e.baseColor:e.color),p=o(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:i,falseValue:a,model:l,textColorClasses:u,textColorStyles:c,backgroundColorClasses:d,backgroundColorStyles:h,icon:p}}(e),k=E(),T=n(!1),A=n(!1),N=f(),D=b(()=>e.id||`input-${k}`),V=b(()=>!e.disabled&&!e.readonly);function R(e){V.value&&(T.value=!0,!1!==ct(e.target,":focus-visible")&&(A.value=!0))}function P(){T.value=!1,A.value=!1}function O(e){e.stopPropagation()}function M(t){V.value?(e.readonly&&c&&g(()=>c.forceUpdate()),v.value=t.target.checked):N.value&&(N.value.checked=v.value)}return null==c||c.onForceUpdate(()=>{N.value&&(N.value.checked=v.value)}),ve(()=>{var t,n;const o=u.label?u.label({label:e.label,props:{for:D.value}}):e.label,[c,f]=bt(r),g=l("input",h({ref:N,checked:v.value,disabled:!!e.disabled,id:D.value,onBlur:P,onFocus:R,onInput:M,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:C.value,name:e.name,"aria-checked":"checkbox"===e.type?v.value:void 0},f),null);return l("div",h({class:["v-selection-control",{"v-selection-control--dirty":v.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":T.value,"v-selection-control--focus-visible":A.value,"v-selection-control--inline":e.inline},d.value,e.class]},c,{style:e.style}),[l("div",{class:s(["v-selection-control__wrapper",m.value]),style:a(y.value)},[null==(t=u.default)?void 0:t.call(u,{backgroundColorClasses:S,backgroundColorStyles:I}),w(l("div",{class:s(["v-selection-control__input"])},[(null==(n=u.input)?void 0:n.call(u,{model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:S,backgroundColorStyles:I,inputNode:g,icon:p.value,props:{onFocus:R,onBlur:P,id:D.value}}))??l(_,null,[p.value&&i(ob,{key:"icon",icon:p.value},null),g])]),[[_w,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),o&&i(dS,{for:D.value,onClick:O},{default:()=>[o]})])}),{isFocused:T,input:N}}}),gS=re({indeterminate:Boolean,indeterminateIcon:{type:be,default:"$checkboxIndeterminate"},...vS({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),yS=ne()({name:"VCheckboxBtn",props:gS(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const r=ke(e,"indeterminate"),a=ke(e,"modelValue");function s(e){r.value&&(r.value=!1)}const o=b(()=>r.value?e.indeterminateIcon:e.falseIcon),l=b(()=>r.value?e.indeterminateIcon:e.trueIcon);return ve(()=>{const t=We(mS.filterProps(e),["modelValue"]);return i(mS,h(t,{modelValue:a.value,"onUpdate:modelValue":[e=>a.value=e,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});function bS(e){const{t:t}=wt();return{InputIcon:function(n){let{name:r,color:a,...s}=n;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],l=e[`onClick:${r}`],u=l&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return i(ob,h({icon:e[`${r}Icon`],"aria-label":u,onClick:l,onKeydown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),_t(l,new PointerEvent("click",e)))},color:a},s),null)}}}const wS=re({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ye(),...fb({transition:{component:Mw,leaveAbsolute:!0,group:!0}})},"VMessages"),_S=ne()({name:"VMessages",props:wS(),setup(e,t){let{slots:n}=t;const r=o(()=>Te(e.messages)),{textColorClasses:u,textColorStyles:c}=eb(()=>e.color);return ve(()=>i(vb,{transition:e.transition,tag:"div",class:s(["v-messages",u.value,e.class]),style:a([c.value,e.style])},{default:()=>[e.active&&r.value.map((e,t)=>l("div",{class:"v-messages__message",key:`${t}-${r.value}`},[n.message?n.message({message:e}):e]))]})),{}}}),SS=re({focused:Boolean,"onUpdate:focused":qe()},"focus");function IS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const n=ke(e,"focused");return{focusClasses:b(()=>({[`${t}--focused`]:n.value})),isFocused:n,focus:function(){n.value=!0},blur:function(){n.value=!1}}}const CS=Symbol.for("vuetify:form"),kS=re({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function ES(e){const t=x(CS,null);return{...t,isReadonly:o(()=>!!((null==e?void 0:e.readonly)??(null==t?void 0:t.isReadonly.value))),isDisabled:o(()=>!!((null==e?void 0:e.disabled)??(null==t?void 0:t.isDisabled.value)))}}const TS=Symbol.for("vuetify:rules");const xS=re({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...SS()},"validation");function AS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E();const i=ke(e,"modelValue"),a=o(()=>void 0===e.validationValue?i.value:e.validationValue),s=ES(e),l=function(e){const t=x(TS,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return(null==t?void 0:t.resolve(e))??b(e)}(()=>e.rules),u=f([]),c=n(!0),d=o(()=>!(!Te(""===i.value?null:i.value).length&&!Te(""===a.value?null:a.value).length)),h=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)?Te(e.errorMessages).concat(u.value).slice(0,Math.max(0,Number(e.maxErrors))):u.value}),p=o(()=>{var t;let n=(e.validateOn??(null==(t=s.validateOn)?void 0:t.value))||"input";"lazy"===n&&(n="input lazy"),"eager"===n&&(n="input eager");const r=new Set((null==n?void 0:n.split(" "))??[]);return{input:r.has("input"),blur:r.has("blur")||r.has("input")||r.has("invalid-input"),invalidInput:r.has("invalid-input"),lazy:r.has("lazy"),eager:r.has("eager")}}),w=o(()=>{var t;return!e.error&&!(null==(t=e.errorMessages)?void 0:t.length)&&(!e.rules.length||(c.value?!u.value.length&&!p.value.lazy||null:!u.value.length))}),_=n(!1),S=o(()=>({[`${t}--error`]:!1===w.value,[`${t}--dirty`]:d.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),I=Ie("validation"),k=o(()=>e.name??A(r));async function T(){i.value=null,await g(),await N()}async function N(){c.value=!0,p.value.lazy?u.value=[]:await D(!p.value.eager)}async function D(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=[];_.value=!0;for(const r of l.value){if(n.length>=Number(e.maxErrors??1))break;const t="function"==typeof r?r:()=>r,i=await t(a.value);!0!==i&&(!1!==i&&"string"!=typeof i||n.push(i||""))}return u.value=n,_.value=!1,c.value=t,u.value}return m(()=>{var e;null==(e=s.register)||e.call(s,{id:k.value,vm:I,validate:D,reset:T,resetValidation:N})}),y(()=>{var e;null==(e=s.unregister)||e.call(s,k.value)}),C(async()=>{var e;p.value.lazy||await D(!p.value.eager),null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),Ye(()=>p.value.input||p.value.invalidInput&&!1===w.value,()=>{v(a,()=>{if(null!=a.value)D();else if(e.focused){const t=v(()=>e.focused,e=>{e||D(),t()})}})}),Ye(()=>p.value.blur,()=>{v(()=>e.focused,e=>{e||D()})}),v([w,h],()=>{var e;null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),{errorMessages:h,isDirty:d,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:w,isValidating:_,reset:T,resetValidation:N,validate:D,validationClasses:S}}const NS=re({id:String,appendIcon:be,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:be,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":qe(),"onClick:append":qe(),...ye(),...Ib(),...Ge(lb(),["maxWidth","minWidth","width"]),...ge(),...xS()},"VInput"),DS=ne()({name:"VInput",props:{...NS()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r,emit:u}=t;const{densityClasses:c}=Cb(e),{dimensionStyles:d}=ub(e),{themeClasses:h}=Ce(e),{rtlClasses:p}=De(),{InputIcon:f}=bS(e),v=E(),m=o(()=>e.id||`input-${v}`),{errorMessages:g,isDirty:y,isDisabled:w,isReadonly:_,isPristine:S,isValid:I,isValidating:C,reset:k,resetValidation:T,validate:x,validationClasses:A}=AS(e,"v-input",m),N=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)||!S.value&&g.value.length?g.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),D=b(()=>N.value.length>0),V=b(()=>!e.hideDetails||"auto"===e.hideDetails&&(D.value||!!r.details)),R=o(()=>V.value?`${m.value}-messages`:void 0),P=o(()=>({id:m,messagesId:R,isDirty:y,isDisabled:w,isReadonly:_,isPristine:S,isValid:I,isValidating:C,hasDetails:V,reset:k,resetValidation:T,validate:x})),O=b(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),M=b(()=>{if(e.iconColor)return!0===e.iconColor?O.value:e.iconColor});return ve(()=>{var t,n,o,u;const v=!(!r.prepend&&!e.prependIcon),m=!(!r.append&&!e.appendIcon);return l("div",{class:s(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},c.value,h.value,p.value,A.value,e.class]),style:a([d.value,e.style])},[v&&l("div",{key:"prepend",class:"v-input__prepend"},[null==(t=r.prepend)?void 0:t.call(r,P.value),e.prependIcon&&i(f,{key:"prepend-icon",name:"prepend",color:M.value},null)]),r.default&&l("div",{class:"v-input__control"},[null==(n=r.default)?void 0:n.call(r,P.value)]),m&&l("div",{key:"append",class:"v-input__append"},[e.appendIcon&&i(f,{key:"append-icon",name:"append",color:M.value},null),null==(o=r.append)?void 0:o.call(r,P.value)]),V.value&&l("div",{id:R.value,class:"v-input__details",role:"alert","aria-live":"polite"},[i(_S,{active:D.value,messages:N.value},{message:r.message}),null==(u=r.details)?void 0:u.call(r,P.value)])])}),{reset:k,resetValidation:T,validate:x,isValid:I,errorMessages:g}}}),VS=re({...NS(),...We(gS(),["inline"])},"VCheckbox"),RS=ne()({name:"VCheckbox",inheritAttrs:!1,props:VS(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const a=ke(e,"modelValue"),{isFocused:s,focus:o,blur:l}=IS(e),u=f(),c=E();return ve(()=>{const[t,d]=bt(n),p=DS.filterProps(e),f=yS.filterProps(e);return i(DS,h({ref:u,class:["v-checkbox",e.class]},t,p,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,id:e.id||`checkbox-${c}`,focused:s.value,style:e.style}),{...r,default:e=>{let{id:t,messagesId:n,isDisabled:s,isReadonly:u,isValid:c}=e;return i(yS,h(f,{id:t.value,"aria-describedby":n.value,disabled:s.value,readonly:u.value},d,{error:!1===c.value,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onFocus:o,onBlur:l}),r)}})}),rS({},u)}});function PS(e,t){return(null==t?void 0:t[e?"scrollWidth":"scrollHeight"])||0}function OS(e,t,n){if(!n)return 0;const{scrollLeft:r,offsetWidth:i,scrollWidth:a}=n;return e?t?a-i+r:r:n.scrollTop}function MS(e,t){return(null==t?void 0:t[e?"offsetWidth":"offsetHeight"])||0}function LS(e,t){return(null==t?void 0:t[e?"offsetLeft":"offsetTop"])||0}const FS=Symbol.for("vuetify:v-slide-group"),BS=re({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:FS},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["always","desktop","mobile"].includes(e)},...ye(),...It({mobile:null}),...ab(),...Ob({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),US=ne()({name:"VSlideGroup",props:BS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{isRtl:u}=De(),{displayClasses:c,mobile:d}=pt(e),h=Fb(e,e.symbol),p=n(!1),f=n(0),m=n(0),g=n(0),y=o(()=>"horizontal"===e.direction),{resizeRef:b,contentRect:w}=Ae(),{resizeRef:_,contentRect:S}=Ae(),I=St(),C=o(()=>({container:b.el,duration:200,easing:"easeOutQuart"})),k=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[0]):-1),E=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[h.selected.value.length-1]):-1);if(Re){let t=-1;v(()=>[h.selected.value,w.value,S.value,y.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(w.value&&S.value){const e=y.value?"width":"height";m.value=w.value[e],g.value=S.value[e],p.value=m.value+1<g.value}if(k.value>=0&&_.el){x(_.el.children[E.value],e.centerActive)}})})}const T=n(!1);function x(e,t){let n=0;n=t?function(e){let{selectedElement:t,containerElement:n,isHorizontal:r}=e;const i=MS(r,n);return LS(r,t)-i/2+MS(r,t)/2}({containerElement:b.el,isHorizontal:y.value,selectedElement:e}):function(e){let{selectedElement:t,containerElement:n,isRtl:r,isHorizontal:i}=e;const a=MS(i,n),s=OS(i,r,n),o=MS(i,t),l=LS(i,t),u=.4*o;return s>l?l-u:s+a<l+o?l-a+o+u:s}({containerElement:b.el,isHorizontal:y.value,isRtl:u.value,selectedElement:e}),A(n)}function A(e){if(!Re||!b.el)return;const t=MS(y.value,b.el),n=OS(y.value,u.value,b.el);if(!(PS(y.value,b.el)<=t||Math.abs(e-n)<16)){if(y.value&&u.value&&b.el){const{scrollWidth:t,offsetWidth:n}=b.el;e=t-n-e}y.value?I.horizontal(e,C.value):I(e,C.value)}}function N(e){const{scrollTop:t,scrollLeft:n}=e.target;f.value=y.value?n:t}function D(e){if(T.value=!0,p.value&&_.el)for(const t of e.composedPath())for(const e of _.el.children)if(e===t)return void x(e)}function V(e){T.value=!1}let R=!1;function P(e){var t;R||T.value||e.relatedTarget&&(null==(t=_.el)?void 0:t.contains(e.relatedTarget))||F(),R=!1}function O(){R=!0}function M(e){function t(t){e.preventDefault(),F(t)}_.el&&(y.value?"ArrowRight"===e.key?t(u.value?"prev":"next"):"ArrowLeft"===e.key&&t(u.value?"next":"prev"):"ArrowDown"===e.key?t("next"):"ArrowUp"===e.key&&t("prev"),"Home"===e.key?t("first"):"End"===e.key&&t("last"))}function L(e,t){if(!e)return;let n=e;do{n=null==n?void 0:n["next"===t?"nextElementSibling":"previousElementSibling"]}while(null==n?void 0:n.hasAttribute("disabled"));return n}function F(e){if(!_.el)return;let t;if(e)if("next"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("first")}else if("prev"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("last")}else"first"===e?(t=_.el.firstElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"next"))):"last"===e&&(t=_.el.lastElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"prev")));else{t=mt(_.el)[0]}t&&t.focus({preventScroll:!0})}function B(e){const t=y.value&&u.value?-1:1,n=("prev"===e?-t:t)*m.value;let r=f.value+n;if(y.value&&u.value&&b.el){const{scrollWidth:e,offsetWidth:t}=b.el;r+=e-t}A(r)}const U=o(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),$=o(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return p.value||Math.abs(f.value)>0;case"mobile":return d.value||p.value||Math.abs(f.value)>0;default:return!d.value&&(p.value||Math.abs(f.value)>0)}}),j=o(()=>Math.abs(f.value)>1),z=o(()=>{if(!b.value)return!1;const e=PS(y.value,b.el),t=function(e,t){return(null==t?void 0:t[e?"clientWidth":"clientHeight"])||0}(y.value,b.el);return e-t-Math.abs(f.value)>1});return ve(()=>i(e.tag,{class:s(["v-slide-group",{"v-slide-group--vertical":!y.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":p.value},c.value,e.class]),style:a(e.style),tabindex:T.value||h.selected.value.length?-1:0,onFocus:P},{default:()=>{var t,n,a;return[$.value&&l("div",{key:"prev",class:s(["v-slide-group__prev",{"v-slide-group__prev--disabled":!j.value}]),onMousedown:O,onClick:()=>j.value&&B("prev")},[(null==(t=r.prev)?void 0:t.call(r,U.value))??i(Ow,null,{default:()=>[i(ob,{icon:u.value?e.nextIcon:e.prevIcon},null)]})]),l("div",{key:"container",ref:b,class:s(["v-slide-group__container",e.contentClass]),onScroll:N},[l("div",{ref:_,class:"v-slide-group__content",onFocusin:D,onFocusout:V,onKeydown:M},[null==(n=r.default)?void 0:n.call(r,U.value)])]),$.value&&l("div",{key:"next",class:s(["v-slide-group__next",{"v-slide-group__next--disabled":!z.value}]),onMousedown:O,onClick:()=>z.value&&B("next")},[(null==(a=r.next)?void 0:a.call(r,U.value))??i(Ow,null,{default:()=>[i(ob,{icon:u.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:B,scrollOffset:f,focus:F,hasPrev:j,hasNext:z}}}),$S=Symbol.for("vuetify:v-chip-group"),jS=re({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ee},...BS(),...ye(),...Ob({selectedClass:"v-chip--selected"}),...ab(),...ge(),...Tb({variant:"tonal"})},"VChipGroup");ne()({name:"VChipGroup",props:jS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=Ce(e),{isSelected:a,select:s,next:o,prev:l,selected:u}=Fb(e,$S);return ie({VChip:{baseColor:b(()=>e.baseColor),color:b(()=>e.color),disabled:b(()=>e.disabled),filter:b(()=>e.filter),variant:b(()=>e.variant)}}),ve(()=>{const t=US.filterProps(e);return i(US,h(t,{class:["v-chip-group",{"v-chip-group--column":e.column},r.value,e.class],style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:a,select:s,next:o,prev:l,selected:u.value})]}})}),{}}});const zS=re({activeClass:String,appendAvatar:String,appendIcon:be,baseColor:String,closable:Boolean,closeIcon:{type:be,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:be,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:qe(),onClickOnce:qe(),...wb(),...ye(),...Ib(),...Db(),...Mb(),...hb(),...rw(),...rb(),...ab({tag:"span"}),...ge(),...Tb({variant:"tonal"})},"VChip"),qS=ne()({name:"VChip",directives:{vRipple:_w},props:zS(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:r,slots:a}=t;const{t:s}=wt(),{borderClasses:u}=_b(e),{densityClasses:c}=Cb(e),{elevationClasses:d}=Vb(e),{roundedClasses:p}=pb(e),{sizeClasses:f}=ib(e),{themeClasses:v}=Ce(e),m=ke(e,"modelValue"),g=Lb(e,$S,!1),y=nw(e,n),I=b(()=>!1!==e.link&&y.isLink.value),C=o(()=>!e.disabled&&!1!==e.link&&(!!g||e.link||y.isClickable.value)),k=b(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(e){e.preventDefault(),e.stopPropagation(),m.value=!1,r("click:close",e)}})),{colorClasses:E,colorStyles:T,variantClasses:x}=xb(()=>({color:!g||g.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function A(e){var t;r("click",e),C.value&&(null==(t=y.navigate)||t.call(y,e),null==g||g.toggle())}function N(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),A(e))}return()=>{var t;const n=y.isLink.value?"a":e.tag,r=!(!e.appendIcon&&!e.appendAvatar),s=!(!r&&!a.append),o=!(!a.close&&!e.closable),b=!(!a.filter&&!e.filter)&&g,D=!(!e.prependIcon&&!e.prependAvatar),V=!(!D&&!a.prepend);return m.value&&w(i(n,h({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":C.value,"v-chip--filter":b,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&(null==(t=y.isActive)?void 0:t.value)},v.value,u.value,E.value,c.value,d.value,p.value,f.value,x.value,null==g?void 0:g.selectedClass.value,e.class],style:[T.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:C.value?0:void 0,onClick:A,onKeydown:C.value&&!I.value&&N},y.linkProps),{default:()=>{var t;return[Eb(C.value,"v-chip"),b&&i(Fw,{key:"filter"},{default:()=>[w(l("div",{class:"v-chip__filter"},[a.filter?i(Jy,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},a.filter):i(ob,{key:"filter-icon",icon:e.filterIcon},null)]),[[S,g.isSelected.value]])]}),V&&l("div",{key:"prepend",class:"v-chip__prepend"},[a.prepend?i(Jy,{key:"prepend-defaults",disabled:!D,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},a.prepend):l(_,null,[e.prependIcon&&i(ob,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&i(Nb,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),l("div",{class:"v-chip__content","data-no-activator":""},[(null==(t=a.default)?void 0:t.call(a,{isSelected:null==g?void 0:g.isSelected.value,selectedClass:null==g?void 0:g.selectedClass.value,select:null==g?void 0:g.select,toggle:null==g?void 0:g.toggle,value:null==g?void 0:g.value.value,disabled:e.disabled}))??R(e.text)]),s&&l("div",{key:"append",class:"v-chip__append"},[a.append?i(Jy,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},a.append):l(_,null,[e.appendIcon&&i(ob,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&i(Nb,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),o&&l("button",h({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},k.value),[a.close?i(Jy,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},a.close):i(ob,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[_w,C.value&&e.ripple,null]])}}}),HS=re({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ye(),...fb({transition:{component:Mw}})},"VCounter"),GS=ne()({name:"VCounter",functional:!0,props:HS(),setup(e,t){let{slots:n}=t;const r=b(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ve(()=>i(vb,{transition:e.transition},{default:()=>[w(l("div",{class:s(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:a(e.style)},[n.default?n.default({counter:r.value,max:e.max,value:e.value}):r.value]),[[S,e.active]])]})),{}}}),KS=re({floating:Boolean,...ye()},"VFieldLabel"),WS=ne()({name:"VFieldLabel",props:KS(),setup(e,t){let{slots:n}=t;return ve(()=>i(dS,{class:s(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:a(e.style)},n)),{}}}),QS=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],YS=re({appendInnerIcon:be,bgColor:String,clearable:Boolean,clearIcon:{type:be,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:be,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>QS.includes(e)},"onClick:clear":qe(),"onClick:appendInner":qe(),"onClick:prependInner":qe(),...ye(),...Yb(),...hb(),...ge()},"VField"),XS=ne()({name:"VField",inheritAttrs:!1,props:{id:String,...SS(),...YS()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:u}=t;const{themeClasses:c}=Ce(e),{loaderClasses:d}=Xb(e),{focusClasses:p,isFocused:m,focus:g,blur:y}=IS(e),{InputIcon:I}=bS(e),{roundedClasses:C}=pb(e),{rtlClasses:k}=De(),T=b(()=>e.dirty||e.active),x=b(()=>!(!e.label&&!u.label)),A=b(()=>!e.singleLine&&x.value),N=E(),D=o(()=>e.id||`input-${N}`),V=b(()=>e.details?`${D.value}-messages`:void 0),R=f(),P=f(),O=f(),M=o(()=>["plain","underlined"].includes(e.variant)),L=o(()=>e.error||e.disabled?void 0:T.value&&m.value?e.color:e.baseColor),F=o(()=>{if(e.iconColor&&(!e.glow||m.value))return!0===e.iconColor?L.value:e.iconColor}),{backgroundColorClasses:B,backgroundColorStyles:U}=tb(()=>e.bgColor),{textColorClasses:$,textColorStyles:j}=eb(L);v(T,e=>{if(A.value){const t=R.value.$el,n=P.value.$el;requestAnimationFrame(()=>{const r=Ue(t),i=n.getBoundingClientRect(),a=i.x-r.x,s=i.y-r.y-(r.height/2-i.height/2),o=i.width/.75,l=Math.abs(o-r.width)>1?{maxWidth:he(o)}:void 0,u=getComputedStyle(t),c=getComputedStyle(n),d=1e3*parseFloat(u.transitionDuration)||150,h=parseFloat(c.getPropertyValue("--v-field-label-scale")),p=c.getPropertyValue("color");t.style.visibility="visible",n.style.visibility="hidden",Oe(t,{transform:`translate(${a}px, ${s}px) scale(${h})`,color:p,...l},{duration:d,easing:Le,direction:e?"normal":"reverse"}).finished.then(()=>{t.style.removeProperty("visibility"),n.style.removeProperty("visibility")})})}},{flush:"post"});const z=o(()=>({isActive:T,isFocused:m,controlRef:O,blur:y,focus:g}));function q(e){e.target!==document.activeElement&&e.preventDefault()}return ve(()=>{var t,r,o;const f="outlined"===e.variant,v=!(!u["prepend-inner"]&&!e.prependInnerIcon),m=!(!e.clearable&&!u.clear||e.disabled),b=!!(u["append-inner"]||e.appendInnerIcon||m),E=()=>u.label?u.label({...z.value,label:e.label,props:{for:D.value}}):e.label;return l("div",h({class:["v-field",{"v-field--active":T.value,"v-field--appended":b,"v-field--center-affix":e.centerAffix??!M.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":v,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!E(),[`v-field--variant-${e.variant}`]:!0},c.value,B.value,p.value,d.value,C.value,k.value,e.class],style:[U.value,e.style],onClick:q},n),[l("div",{class:"v-field__overlay"},null),i(Jb,{name:"v-field",active:!!e.loading,color:e.error?"error":"string"==typeof e.loading?e.loading:e.color},{default:u.loader}),v&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&i(I,{key:"prepend-icon",name:"prependInner",color:F.value},null),null==(t=u["prepend-inner"])?void 0:t.call(u,z.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&A.value&&i(WS,{key:"floating-label",ref:P,class:s([$.value]),floating:!0,for:D.value,"aria-hidden":!T.value,style:a(j.value)},{default:()=>[E()]}),x.value&&i(WS,{key:"label",ref:R,for:D.value},{default:()=>[E()]}),(null==(r=u.default)?void 0:r.call(u,{...z.value,props:{id:D.value,class:"v-field__input","aria-describedby":V.value},focus:g,blur:y}))??l("div",{id:D.value,class:"v-field__input","aria-describedby":V.value},null)]),m&&i(Fw,{key:"clear"},{default:()=>[w(l("div",{class:"v-field__clearable",onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},[i(Jy,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[u.clear?u.clear({...z.value,props:{onFocus:g,onBlur:y,onClick:e["onClick:clear"],tabindex:-1}}):i(I,{name:"clear",onFocus:g,onBlur:y,tabindex:-1},null)]})]),[[S,e.dirty]])]}),b&&l("div",{key:"append",class:"v-field__append-inner"},[null==(o=u["append-inner"])?void 0:o.call(u,z.value),e.appendInnerIcon&&i(I,{key:"append-icon",name:"appendInner",color:F.value},null)]),l("div",{class:s(["v-field__outline",$.value]),style:a(j.value)},[f&&l(_,null,[l("div",{class:"v-field__outline__start"},null),A.value&&l("div",{class:"v-field__outline__notch"},[i(WS,{ref:P,floating:!0,for:D.value,"aria-hidden":!T.value},{default:()=>[E()]})]),l("div",{class:"v-field__outline__end"},null)]),M.value&&A.value&&i(WS,{ref:P,floating:!0,for:D.value,"aria-hidden":!T.value},{default:()=>[E()]})])])}),{controlRef:O,fieldIconColor:F}}});const JS=["color","file","time","date","datetime-local","week","month"],ZS=re({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...NS(),...YS()},"VTextField"),eI=ne()({name:"VTextField",directives:{vIntersect:gb},inheritAttrs:!1,props:ZS(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:a}=t;const u=ke(e,"modelValue"),{isFocused:c,focus:d,blur:p}=IS(e),{onIntersect:v}=function(e){return{onIntersect:function(t,n){var r,i;e.autofocus&&t&&(null==(i=null==(r=n[0].target)?void 0:r.focus)||i.call(r))}}}(e),m=o(()=>"function"==typeof e.counterValue?e.counterValue(u.value):"number"==typeof e.counterValue?e.counterValue:(u.value??"").toString().length),y=o(()=>n.maxlength?n.maxlength:!e.counter||"number"!=typeof e.counter&&"string"!=typeof e.counter?void 0:e.counter),b=o(()=>["plain","underlined"].includes(e.variant)),S=f(),I=f(),C=f(),k=o(()=>JS.includes(e.type)||e.persistentPlaceholder||c.value||e.active);function E(){c.value||d(),g(()=>{var e;C.value!==document.activeElement&&(null==(e=C.value)||e.focus())})}function T(e){r("mousedown:control",e),e.target!==C.value&&(E(),e.preventDefault())}function x(e){r("click:control",e)}function A(t){var n;const r=t.target;if(u.value=r.value,(null==(n=e.modelModifiers)?void 0:n.trim)&&["text","search","password","tel","url"].includes(e.type)){const e=[r.selectionStart,r.selectionEnd];g(()=>{r.selectionStart=e[0],r.selectionEnd=e[1]})}}return ve(()=>{const t=!!(a.counter||!1!==e.counter&&null!=e.counter),r=!(!t&&!a.details),[o,f]=bt(n),{modelValue:N,...D}=DS.filterProps(e),V=XS.filterProps(e);return i(DS,h({ref:S,modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":b.value},e.class],style:e.style},o,D,{centerAffix:!b.value,focused:c.value}),{...a,default:t=>{let{id:n,isDisabled:r,isDirty:o,isReadonly:m,isValid:y,hasDetails:b,reset:S}=t;return i(XS,h({ref:I,onMousedown:T,onClick:x,"onClick:clear":t=>function(t,n){t.stopPropagation(),E(),g(()=>{u.value=null,n(),_t(e["onClick:clear"],t)})}(t,S),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},V,{id:n.value,active:k.value||o.value,dirty:o.value||e.dirty,disabled:r.value,focused:c.value,details:b.value,error:!1===y.value}),{...a,default:t=>{let{props:{class:n,...i}}=t;const o=w(l("input",h({ref:C,value:u.value,onInput:A,autofocus:e.autofocus,readonly:m.value,disabled:r.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:d,onBlur:p},i,f),null),[[gb,{handler:v},null,{once:!0}]]);return l(_,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),a.default?l("div",{class:s(n),"data-no-activator":""},[a.default(),o]):G(o,{class:n}),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:r?n=>{var r;return l(_,null,[null==(r=a.details)?void 0:r.call(a,n),t&&l(_,null,[l("span",null,null),i(GS,{active:e.persistentCounter||c.value,value:m.value,max:y.value,disabled:e.disabled},a.counter)])])}:void 0})}),rS({},S,I,C)}}),tI=re({renderless:Boolean,...ye()},"VVirtualScrollItem"),nI=ne()({name:"VVirtualScrollItem",inheritAttrs:!1,props:tI(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{resizeRef:a,contentRect:s}=Ae(void 0,"border");v(()=>{var e;return null==(e=s.value)?void 0:e.height},e=>{null!=e&&r("update:height",e)}),ve(()=>{var t,r;return e.renderless?l(_,null,[null==(t=i.default)?void 0:t.call(i,{itemRef:a})]):l("div",h({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[null==(r=i.default)?void 0:r.call(i)])})}}),rI=re({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function iI(e,t){const r=pt(),i=n(0);D(()=>{i.value=parseFloat(e.itemHeight||0)});const a=n(0),s=n(Math.ceil((parseInt(e.height)||r.height.value)/(i.value||16))||1),l=n(0),u=n(0),c=f(),d=f();let h=0;const{resizeRef:p,contentRect:m}=Ae();D(()=>{p.value=c.value});const y=o(()=>{var t;return c.value===document.documentElement?r.height.value:(null==(t=m.value)?void 0:t.height)||parseInt(e.height)||0}),b=o(()=>!!(c.value&&d.value&&y.value&&i.value));let w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length});const S=n(0);let I=-1;function C(e){return w[e]||i.value}const k=Ct(()=>{const e=performance.now();_[0]=0;const n=t.value.length;for(let t=1;t<=n-1;t++)_[t]=(_[t-1]||0)+C(t-1);S.value=Math.max(S.value,performance.now()-e)},S),E=v(b,e=>{e&&(E(),h=d.value.offsetTop,k.immediate(),L(),~I&&g(()=>{Re&&window.requestAnimationFrame(()=>{B(I),I=-1})}))});function T(e){e=Ne(e,0,t.value.length-1);const n=Math.floor(e),r=e%1,i=n+1,a=_[n]||0;return a+((_[i]||a)-a)*r}function x(e){return function(e,t){let n=e.length-1,r=0,i=0,a=null,s=-1;if(e[n]<t)return n;for(;r<=n;)if(i=r+n>>1,a=e[i],a>t)n=i-1;else{if(!(a<t))return a===t?i:r;s=i,r=i+1}return s}(_,e)}N(()=>{k.clear()});let A=0,V=0,R=0;v(y,(e,t)=>{t&&(L(),e<t&&requestAnimationFrame(()=>{V=0,L()}))});let P=-1;function O(){c.value&&d.value&&(V=0,R=0,window.clearTimeout(P),L())}let M=-1;function L(){cancelAnimationFrame(M),M=requestAnimationFrame(F)}function F(){if(!c.value||!y.value||!i.value)return;const e=A-h,n=Math.sign(V),r=Math.max(0,e-100),o=Ne(x(r),0,t.value.length),d=e+y.value+100,p=Ne(x(d)+1,o+1,t.value.length);if((-1!==n||o<a.value)&&(1!==n||p>s.value)){const e=T(a.value)-T(o),n=T(p)-T(s.value);Math.max(e,n)>100?(a.value=o,s.value=p):(o<=0&&(a.value=o),p>=t.value.length&&(s.value=p))}l.value=T(a.value),u.value=T(t.value.length)-T(s.value)}function B(e){const t=T(e);!c.value||e&&!t?I=e:c.value.scrollTop=t}const U=o(()=>t.value.slice(a.value,s.value).map((t,n)=>{const r=n+a.value;return{raw:t,index:r,key:Ke(t,e.itemKey,r)}}));return v(t,()=>{w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length}),k.immediate(),L()},{deep:1}),{calculateVisibleItems:L,containerRef:c,markerRef:d,computedItems:U,paddingTop:l,paddingBottom:u,scrollToIndex:B,handleScroll:function(){if(!c.value||!d.value)return;const e=c.value.scrollTop,t=performance.now();t-R>500?(V=Math.sign(e-A),h=d.value.offsetTop):V=e-A,A=e,R=t,window.clearTimeout(P),P=window.setTimeout(O,500),L()},handleScrollend:O,handleItemResize:function(e,t){const n=w[e],r=i.value;i.value=r?Math.min(i.value,t):t,n===t&&r===i.value||(w[e]=t,k())}}}const aI=re({items:{type:Array,default:()=>[]},renderless:Boolean,...rI(),...ye(),...lb()},"VVirtualScroll"),sI=ne()({name:"VVirtualScroll",props:aI(),setup(e,t){let{slots:n}=t;const r=Ie("VVirtualScroll"),{dimensionStyles:o}=ub(e),{calculateVisibleItems:u,containerRef:c,markerRef:d,handleScroll:h,handleScrollend:p,handleItemResize:f,scrollToIndex:v,paddingTop:m,paddingBottom:g,computedItems:y}=iI(e,b(()=>e.items));return Ye(()=>e.renderless,()=>{function e(){var e,t;const n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"addEventListener":"removeEventListener";c.value===document.documentElement?(document[n]("scroll",h,{passive:!0}),document[n]("scrollend",p)):(null==(e=c.value)||e[n]("scroll",h,{passive:!0}),null==(t=c.value)||t[n]("scrollend",p))}C(()=>{c.value=vt(r.vnode.el,!0),e(!0)}),N(e)}),ve(()=>{const t=y.value.map(t=>i(nI,{key:t.key,renderless:e.renderless,"onUpdate:height":e=>f(t.index,e)},{default:e=>{var r;return null==(r=n.default)?void 0:r.call(n,{item:t.raw,index:t.index,...e})}}));return e.renderless?l(_,null,[l("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:he(m.value)}},null),t,l("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:he(g.value)}},null)]):l("div",{ref:c,class:s(["v-virtual-scroll",e.class]),onScrollPassive:h,onScrollend:p,style:a([o.value,e.style])},[l("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:he(m.value),paddingBottom:he(g.value)}},[t])])}),{calculateVisibleItems:u,scrollToIndex:v}}});function oI(e,t){const r=n(!1);let i;return{onScrollPassive:function(e){cancelAnimationFrame(i),r.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{r.value=!1})})},onKeydown:async function(n){var i,a;if("Tab"===n.key&&(null==(i=t.value)||i.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const s=null==(a=e.value)?void 0:a.$el;if(!s)return;"Home"!==n.key&&"End"!==n.key||s.scrollTo({top:"Home"===n.key?0:s.scrollHeight,behavior:"smooth"}),await async function(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(r.value){const t=v(r,()=>{t(),e()})}else e()})}();const o=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if("PageDown"===n.key||"Home"===n.key){const e=s.getBoundingClientRect().top;for(const t of o)if(t.getBoundingClientRect().top>=e){t.focus();break}}else{const e=s.getBoundingClientRect().bottom;for(const t of[...o].reverse())if(t.getBoundingClientRect().bottom<=e){t.focus();break}}}}}const lI=re({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:be,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...f_({itemChildren:!1})},"Select"),uI=re({...lI(),...We(ZS({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...fb({transition:{component:Vw}})},"VSelect"),cI=ne()({name:"VSelect",props:uI(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:r}=t;const{t:a}=wt(),s=f(),u=f(),c=f(),{items:d,transformIn:p,transformOut:m}=function(e){const t=o(()=>g_(e,e.items)),r=o(()=>t.value.some(e=>null===e.value)),i=n(new Map),a=n([]);return D(()=>{const e=t.value,n=new Map,r=[];for(let t=0;t<e.length;t++){const i=e[t];if(He(i.value)||null===i.value){let e=n.get(i.value);e||(e=[],n.set(i.value,e)),e.push(i)}else r.push(i)}i.value=n,a.value=r}),{items:t,transformIn:function(n){const s=i.value,o=t.value,l=a.value,u=r.value,c=e.returnObject,d=!!e.valueComparator,h=e.valueComparator||Ee,p=Ge(e,m_.neededProps),f=[];e:for(const e of n){if(!u&&null===e)continue;if(c&&"string"==typeof e){f.push(m_(p,e));continue}const t=s.get(e);if(!d&&t)f.push(...t);else{for(const t of d?o:l)if(h(e,t.value)){f.push(t);continue e}f.push(m_(p,e))}}return f},transformOut:function(t){return e.returnObject?t.map(e=>{let{raw:t}=e;return t}):t.map(e=>{let{value:t}=e;return t})}}}(e),y=ke(e,"modelValue",[],e=>p(null===e?[null]:Te(e)),t=>{const n=m(t);return e.multiple?n:n[0]??null}),w=o(()=>"function"==typeof e.counterValue?e.counterValue(y.value):"number"==typeof e.counterValue?e.counterValue:y.value.length),S=ES(e),I=o(()=>y.value.map(e=>e.value)),C=n(!1);let k,E="",T=-1;const x=o(()=>e.hideSelected?d.value.filter(t=>!y.value.some(n=>(e.valueComparator||Ee)(n,t))):d.value),A=o(()=>e.hideNoData&&!x.value.length||S.isReadonly.value||S.isDisabled.value),N=ke(e,"menu"),V=o({get:()=>N.value,set:e=>{var t;N.value&&!e&&(null==(t=u.value)?void 0:t.ΨopenChildren.size)||e&&A.value||(N.value=e)}}),R=b(()=>V.value?e.closeText:e.openText),P=o(()=>{var t;return{...e.menuProps,activatorProps:{...(null==(t=e.menuProps)?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),O=f(),M=oI(O,s);function L(t){e.openOnClear&&(V.value=!0)}function F(){A.value||(V.value=!V.value)}function B(e){Tt(e)&&U(e)}function U(t){var n,r,i;if(!t.key||S.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(V.value=!0),["Escape","Tab"].includes(t.key)&&(V.value=!1),"Home"===t.key?null==(n=O.value)||n.focus("first"):"End"===t.key&&(null==(r=O.value)||r.focus("last"));if(!Tt(t))return;const a=performance.now();a-k>1e3&&(E="",T=-1),E+=t.key.toLowerCase(),k=a;const s=x.value;function o(){for(let e=T+1;e<s.length;e++){const t=s[e];if(t.title.toLowerCase().startsWith(E))return[t,e]}}const l=function(){let e=o();return e||(E.at(-1)===E.at(-2)&&(E=E.slice(0,-1),e=o(),e)?e:(T=-1,e=o(),e||(E=t.key.toLowerCase(),o())))}();if(!l)return;const[u,c]=l;T=c,null==(i=O.value)||i.focus(c),e.multiple||(y.value=[u])}function $(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.props.disabled)if(e.multiple){const r=y.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),i=null==n?!~r:n;if(~r){const e=i?[...y.value,t]:[...y.value];e.splice(r,1),y.value=e}else i&&(y.value=[...y.value,t])}else{const e=!1!==n;y.value=e?[t]:[],g(()=>{V.value=!1})}}function j(e){var t;(null==(t=O.value)?void 0:t.$el.contains(e.relatedTarget))||(V.value=!1)}function q(){var t;e.eager&&(null==(t=c.value)||t.calculateVisibleItems())}function H(){var e;C.value&&(null==(e=s.value)||e.focus())}function G(e){C.value=!0}function K(e){if(null==e)y.value=[];else if(ct(s.value,":autofill")||ct(s.value,":-webkit-autofill")){const t=d.value.find(t=>t.title===e);t&&$(t)}else s.value&&(s.value.value="")}return v(V,()=>{if(!e.hideSelected&&V.value&&y.value.length){const t=x.value.findIndex(t=>y.value.some(n=>(e.valueComparator||Ee)(n.value,t.value)));Re&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var e;t>=0&&(null==(e=c.value)||e.scrollToIndex(t))})}}),v(()=>e.items,(t,n)=>{V.value||C.value&&e.hideNoData&&!n.length&&t.length&&(V.value=!0)}),ve(()=>{const t=!(!e.chips&&!r.chip),n=!!(!e.hideNoData||x.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),o=y.value.length>0,d=eI.filterProps(e),p=o||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return i(eI,h({ref:s},d,{modelValue:y.value.map(e=>e.props.value).join(", "),"onUpdate:modelValue":K,focused:C.value,"onUpdate:focused":e=>C.value=e,validationValue:y.externalValue,counterValue:w.value,dirty:o,class:["v-select",{"v-select--active-menu":V.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":y.value.length,"v-select--selection-slot":!!r.selection},e.class],style:e.style,inputmode:"none",placeholder:p,"onClick:clear":L,"onMousedown:control":F,onBlur:j,onKeydown:U,"aria-label":a(R.value),title:a(R.value)}),{...r,default:()=>l(_,null,[i(aS,h({ref:u,modelValue:V.value,"onUpdate:modelValue":e=>V.value=e,activator:"parent",contentClass:"v-select__content",disabled:A.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:q,onAfterLeave:H},P.value),{default:()=>[n&&i(S_,h({ref:O,selected:I.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:B,onFocusin:G,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},M,e.listProps),{default:()=>{var t,n,s;return[null==(t=r["prepend-item"])?void 0:t.call(r),!x.value.length&&!e.hideNoData&&((null==(n=r["no-data"])?void 0:n.call(r))??i(u_,{key:"no-data",title:a(e.noDataText)},null)),i(sI,{ref:c,renderless:!0,items:x.value,itemKey:"value"},{default:t=>{var n,a,s;let{item:o,index:u,itemRef:c}=t;const d=kt(o.props),p=h(o.props,{ref:c,key:o.value,onClick:()=>$(o,null)});return"divider"===o.type?(null==(n=r.divider)?void 0:n.call(r,{props:o.raw,index:u}))??i(kw,h(o.props,{key:`divider-${u}`}),null):"subheader"===o.type?(null==(a=r.subheader)?void 0:a.call(r,{props:o.raw,index:u}))??i(d_,h(o.props,{key:`subheader-${u}`}),null):(null==(s=r.item)?void 0:s.call(r,{item:o,index:u,props:p}))??i(u_,h(p,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?i(yS,{key:o.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,d.prependAvatar&&i(Nb,{image:d.prependAvatar},null),d.prependIcon&&i(ob,{icon:d.prependIcon},null)])}})}}),null==(s=r["append-item"])?void 0:s.call(r)]}})]}),y.value.map((n,a)=>{function s(e){e.stopPropagation(),e.preventDefault(),$(n,!1)}const o={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},u=t?!!r.chip:!!r.selection,c=u?Et(t?r.chip({item:n,index:a,props:o}):r.selection({item:n,index:a})):void 0;if(!u||c)return l("div",{key:n.value,class:"v-select__selection"},[t?r.chip?i(Jy,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[c]}):i(qS,h({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},o),null):c??l("span",{class:"v-select__selection-text"},[n.title,e.multiple&&a<y.value.length-1&&l("span",{class:"v-select__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return l(_,null,[null==(t=r["append-inner"])?void 0:t.call(r,...o),e.menuIcon?i(ob,{class:"v-select__menu-icon",color:null==(n=s.value)?void 0:n.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),rS({isFocused:C,menu:V,select:$},s)}}),dI={id:"account-controls",class:"minimal-account-selector"},hI=Yy({__name:"AccountSelector",props:{accounts:{type:Array,required:!0},modelValue:{type:String,default:null},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,a=o({get:()=>n.modelValue,set(e){r("update:modelValue",e)}});return(t,n)=>w(($(),U("div",dI,[i(cI,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),items:e.accounts,"item-title":"name","item-value":"id",label:"管理対象アカウント",variant:"outlined",density:"compact",color:"primary","prepend-inner-icon":"mdi-account-multiple",class:"minimal-select","hide-details":""},null,8,["modelValue","items"])],512)),[[S,e.visible]])}},[["__scopeId","data-v-eb89f250"]]),pI=ne()({name:"VCardActions",props:ye(),setup(e,t){let{slots:n}=t;return ie({VBtn:{slim:!0,variant:"text"}}),ve(()=>{var t;return l("div",{class:s(["v-card-actions",e.class]),style:a(e.style)},[null==(t=n.default)?void 0:t.call(n)])}),{}}}),fI=re({opacity:[Number,String],...ye(),...ab()},"VCardSubtitle"),vI=ne()({name:"VCardSubtitle",props:fI(),setup(e,t){let{slots:n}=t;return ve(()=>i(e.tag,{class:s(["v-card-subtitle",e.class]),style:a([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),mI=je("v-card-title"),gI=re({appendAvatar:String,appendIcon:be,prependAvatar:String,prependIcon:be,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ye(),...Ib()},"VCardItem"),yI=ne()({name:"VCardItem",props:gI(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;const r=!(!e.prependAvatar&&!e.prependIcon),o=!(!r&&!n.prepend),u=!(!e.appendAvatar&&!e.appendIcon),c=!(!u&&!n.append),d=!(null==e.title&&!n.title),h=!(null==e.subtitle&&!n.subtitle);return l("div",{class:s(["v-card-item",e.class]),style:a(e.style)},[o&&l("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?i(Jy,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):l(_,null,[e.prependAvatar&&i(Nb,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(ob,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&i(mI,{key:"title"},{default:()=>{var t;return[(null==(t=n.title)?void 0:t.call(n))??R(e.title)]}}),h&&i(vI,{key:"subtitle"},{default:()=>{var t;return[(null==(t=n.subtitle)?void 0:t.call(n))??R(e.subtitle)]}}),null==(t=n.default)?void 0:t.call(n)]),c&&l("div",{key:"append",class:"v-card-item__append"},[n.append?i(Jy,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):l(_,null,[e.appendIcon&&i(ob,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(Nb,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),bI=re({opacity:[Number,String],...ye(),...ab()},"VCardText"),wI=ne()({name:"VCardText",props:bI(),setup(e,t){let{slots:n}=t;return ve(()=>i(e.tag,{class:s(["v-card-text",e.class]),style:a([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),_I=re({appendAvatar:String,appendIcon:be,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...wb(),...ye(),...Ib(),...lb(),...Db(),...Yb(),...Gb(),...ew(),...hb(),...rw(),...ab(),...ge(),...Tb({variant:"elevated"})},"VCard"),SI=ne()({name:"VCard",directives:{vRipple:_w},props:_I(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:a}=Ce(e),{borderClasses:s}=_b(e),{colorClasses:o,colorStyles:u,variantClasses:c}=xb(e),{densityClasses:d}=Cb(e),{dimensionStyles:p}=ub(e),{elevationClasses:f}=Vb(e),{loaderClasses:v}=Xb(e),{locationStyles:m}=Kb(e),{positionClasses:g}=tw(e),{roundedClasses:y}=pb(e),b=nw(e,n);return ve(()=>{const t=!1!==e.link&&b.isLink.value,n=!e.disabled&&!1!==e.link&&(e.link||b.isClickable.value),_=t?"a":e.tag,S=!(!r.title&&null==e.title),I=!(!r.subtitle&&null==e.subtitle),C=S||I,k=!!(r.append||e.appendAvatar||e.appendIcon),E=!!(r.prepend||e.prependAvatar||e.prependIcon),T=!(!r.image&&!e.image),x=C||E||k,A=!(!r.text&&null==e.text);return w(i(_,h({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":n},a.value,s.value,o.value,d.value,f.value,v.value,g.value,y.value,c.value,e.class],style:[u.value,p.value,m.value,e.style],onClick:n&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>{var t;return[T&&l("div",{key:"image",class:"v-card__image"},[r.image?i(Jy,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):i(bb,{key:"image-img",cover:!0,src:e.image},null)]),i(Jb,{name:"v-card",active:!!e.loading,color:"boolean"==typeof e.loading?void 0:e.loading},{default:r.loader}),x&&i(yI,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),A&&i(wI,{key:"text"},{default:()=>{var t;return[(null==(t=r.text)?void 0:t.call(r))??e.text]}}),null==(t=r.default)?void 0:t.call(r),r.actions&&i(pI,null,{default:r.actions}),Eb(n,"v-card")]}}),[[_w,n&&e.ripple]])}),{}}});const II=re({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1==0},totalVisible:[Number,String],firstIcon:{type:be,default:"$first"},prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},lastIcon:{type:be,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...wb(),...ye(),...Ib(),...Db(),...hb(),...rb(),...ab({tag:"nav"}),...ge(),...Tb({variant:"text"})},"VPagination"),CI=ne()({name:"VPagination",props:II(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:r,emit:u}=t;const c=ke(e,"modelValue"),{t:d,n:p}=wt(),{isRtl:v}=De(),{themeClasses:m}=Ce(e),{width:y}=pt(),w=n(-1);ie(void 0,{scoped:!0});const{resizeRef:_}=Ae(e=>{if(!e.length)return;const{target:t,contentRect:n}=e[0],r=t.querySelector(".v-pagination__list > *");if(!r)return;const i=n.width,a=r.offsetWidth+2*parseFloat(getComputedStyle(r).marginRight);w.value=k(i,a)}),S=o(()=>parseInt(e.length,10)),I=o(()=>parseInt(e.start,10)),C=o(()=>null!=e.totalVisible?parseInt(e.totalVisible,10):w.value>=0?w.value:k(y.value,58));function k(t,n){const r=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((t-n*r)/n).toFixed(2))))}const E=o(()=>{if(S.value<=0||isNaN(S.value)||S.value>Number.MAX_SAFE_INTEGER)return[];if(C.value<=0)return[];if(1===C.value)return[c.value];if(S.value<=C.value)return xt(S.value,I.value);const t=C.value%2==0,n=t?C.value/2:Math.floor(C.value/2),r=t?n:n+1,i=S.value-n;if(r-c.value>=0)return[...xt(Math.max(1,C.value-1),I.value),e.ellipsis,S.value];if(c.value-i>=(t?1:0)){const t=C.value-1,n=S.value-t+I.value;return[I.value,e.ellipsis,...xt(t,n)]}{const t=Math.max(1,C.value-2),n=1===t?c.value:c.value-Math.ceil(t/2)+I.value;return[I.value,e.ellipsis,...xt(t,n),e.ellipsis,S.value]}});function T(e,t,n){e.preventDefault(),c.value=t,n&&u(n,t)}const{refs:x,updateRef:A}=function(){const e=f([]);return K(()=>e.value=[]),{refs:e,updateRef:function(t,n){e.value[n]=t}}}();ie({VPaginationBtn:{color:b(()=>e.color),border:b(()=>e.border),density:b(()=>e.density),size:b(()=>e.size),variant:b(()=>e.variant),rounded:b(()=>e.rounded),elevation:b(()=>e.elevation)}});const N=o(()=>E.value.map((t,n)=>{const r=e=>A(e,n);if("string"==typeof t)return{isActive:!1,key:`ellipsis-${n}`,page:t,props:{ref:r,ellipsis:!0,icon:!0,disabled:!0}};{const n=t===c.value;return{isActive:n,key:t,page:p(t),props:{ref:r,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:n?e.activeColor:e.color,"aria-current":n,"aria-label":d(n?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>T(e,t)}}}})),D=o(()=>{const t=!!e.disabled||c.value<=I.value,n=!!e.disabled||c.value>=I.value+S.value-1;return{first:e.showFirstLastPage?{icon:v.value?e.lastIcon:e.firstIcon,onClick:e=>T(e,I.value,"first"),disabled:t,"aria-label":d(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:v.value?e.nextIcon:e.prevIcon,onClick:e=>T(e,c.value-1,"prev"),disabled:t,"aria-label":d(e.previousAriaLabel),"aria-disabled":t},next:{icon:v.value?e.prevIcon:e.nextIcon,onClick:e=>T(e,c.value+1,"next"),disabled:n,"aria-label":d(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:v.value?e.firstIcon:e.lastIcon,onClick:e=>T(e,I.value+S.value-1,"last"),disabled:n,"aria-label":d(e.lastAriaLabel),"aria-disabled":n}:void 0}});function V(){var e;const t=c.value-I.value;null==(e=x.value[t])||e.$el.focus()}function R(t){t.key===At.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,g(V)):t.key===At.right&&!e.disabled&&c.value<I.value+S.value-1&&(c.value=c.value+1,g(V))}return ve(()=>i(e.tag,{ref:_,class:s(["v-pagination",m.value,e.class]),style:a(e.style),role:"navigation","aria-label":d(e.ariaLabel),onKeydown:R,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(D.value.first):i(Iw,h({_as:"VPaginationBtn"},D.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(D.value.prev):i(Iw,h({_as:"VPaginationBtn"},D.value.prev),null)]),N.value.map((e,t)=>l("li",{key:e.key,class:s(["v-pagination__item",{"v-pagination__item--is-active":e.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(e):i(Iw,h({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(D.value.next):i(Iw,h({_as:"VPaginationBtn"},D.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(D.value.last):i(Iw,h({_as:"VPaginationBtn"},D.value.last),null)])])]})),{}}}),kI=re({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),EI=Symbol.for("vuetify:data-table-pagination");const TI=re({prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},firstIcon:{type:be,default:"$first"},lastIcon:{type:be,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),xI=ne()({name:"VDataTableFooter",props:TI(),setup(e,t){let{slots:n}=t;const{t:r}=wt(),{page:a,pageCount:s,startIndex:u,stopIndex:c,itemsLength:d,itemsPerPage:p,setItemsPerPage:f}=function(){const e=x(EI);if(!e)throw new Error("Missing pagination!");return e}(),v=o(()=>e.itemsPerPageOptions.map(e=>"number"==typeof e?{value:e,title:-1===e?r("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?r(e.title):e.title}));return ve(()=>{var t;const o=CI.filterProps(e);return l("div",{class:"v-data-table-footer"},[null==(t=n.prepend)?void 0:t.call(n),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",{"aria-label":r(e.itemsPerPageText)},[r(e.itemsPerPageText)]),i(cI,{items:v.value,modelValue:p.value,"onUpdate:modelValue":e=>f(Number(e)),density:"compact",variant:"outlined",hideDetails:!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[r(e.pageText,d.value?u.value+1:0,c.value,d.value)])]),l("div",{class:"v-data-table-footer__pagination"},[i(CI,h({modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},o),null)])])}),{}}}),AI=Nt({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const r=e.tag??"td",a="string"==typeof e.fixed?e.fixed:e.fixed?"start":"none";return i(r,{class:s(["v-data-table__td",{"v-data-table-column--fixed":"start"===a,"v-data-table-column--fixed-end":"end"===a,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:he(e.height),width:he(e.width),maxWidth:he(e.maxWidth),left:"start"===a?he(e.fixedOffset||null):void 0,right:"end"===a?he(e.fixedEndOffset||null):void 0}},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n)]}})}),NI=re({headers:Array},"DataTable-header"),DI=Symbol.for("vuetify:data-table-headers"),VI={title:"",sortable:!1},RI={...VI,width:48};function PI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const n of e.children)PI(n,t);else t.push(e);return t}function OI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&OI(n.children,t);return t}function MI(e){if(e.key)return"data-table-group"===e.key?VI:["data-table-expand","data-table-select"].includes(e.key)?RI:void 0}function LI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map(e=>LI(e,t+1))):t}function FI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=FI(n,t)}else e.fixed&&"end"!==e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function BI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=BI(n,t)}else"end"===e.fixed&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function UI(e,t){const n=[];let r=0;const i=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({element:e,priority:0}));return{enqueue:(t,n)=>{let r=!1;for(let i=0;i<e.length;i++)if(e[i].priority>n){e.splice(i,0,{element:t,priority:n}),r=!0;break}r||e.push({element:t,priority:n})},size:()=>e.length,count:()=>{let t=0;if(!e.length)return 0;const n=Math.floor(e[0].priority);for(let r=0;r<e.length;r++)Math.floor(e[r].priority)===n&&(t+=1);return t},dequeue:()=>e.shift()}}(e);for(;i.size()>0;){let e=i.count();const a=[];let s=1;for(;e>0;){const{element:n,priority:o}=i.dequeue(),l=t-r-LI(n);if(a.push({...n,rowspan:l??1,colspan:n.children?PI(n).length:1}),n.children)for(const e of n.children){const t=o%1+s/Math.pow(10,r+2);i.enqueue(e,r+l+t)}s+=1,e-=1}r+=1,n.push(a)}return{columns:e.map(e=>PI(e)).flat(),headers:n}}function $I(e){const t=[];for(const n of e){const e={...MI(n),...n},r=e.key??("string"==typeof e.value?e.value:null),i=e.value??r??null,a={...e,key:r,value:i,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?$I(e.children):void 0};t.push(a)}return t}function jI(e,t){const n=f([]),r=f([]),i=f({}),a=f({}),s=f({});D(()=>{var o,l,u;const c=(e.headers||Object.keys(e.items[0]??{}).map(e=>({key:e,title:W(e)}))).slice(),d=OI(c);(null==(o=null==t?void 0:t.groupBy)?void 0:o.value.length)&&!d.has("data-table-group")&&c.unshift({key:"data-table-group",title:"Group"}),(null==(l=null==t?void 0:t.showSelect)?void 0:l.value)&&!d.has("data-table-select")&&c.unshift({key:"data-table-select"}),(null==(u=null==t?void 0:t.showExpand)?void 0:u.value)&&!d.has("data-table-expand")&&c.push({key:"data-table-expand"});const h=$I(c);!function(e){let t=!1;function n(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";if(e)if("none"!==i&&(e.fixed=i),!0===e.fixed&&(e.fixed="start"),e.fixed===r)if(e.children)if("start"===r)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],r,r);else for(let t=0;t<e.children.length;t++)n(e.children[t],r,r);else t||"start"!==r?t||"end"!==r?isNaN(Number(e.width))?Dt(`Multiple fixed columns should have a static width (key: ${e.key})`):e.minWidth=Math.max(Number(e.width)||0,Number(e.minWidth)||0):e.firstFixedEnd=!0:e.lastFixed=!0,t=!0;else if(e.children)if("start"===r)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],r);else for(let t=0;t<e.children.length;t++)n(e.children[t],r);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let r=0;for(let a=0;a<e.length;a++)r=FI(e[a],r);let i=0;for(let a=e.length-1;a>=0;a--)i=BI(e[a],i)}(h);const p=Math.max(...h.map(e=>LI(e)))+1,f=UI(h,p);n.value=f.headers,r.value=f.columns;const v=f.headers.flat(1);for(const e of v)e.key&&(e.sortable&&(e.sort&&(i.value[e.key]=e.sort),e.sortRaw&&(a.value[e.key]=e.sortRaw)),e.filter&&(s.value[e.key]=e.filter))});const o={headers:n,columns:r,sortFunctions:i,sortRawFunctions:a,filterFunctions:s};return T(DI,o),o}function zI(){const e=x(DI);if(!e)throw new Error("Missing headers!");return e}const qI={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:n,value:r}=e;return new Set(r?[null==(t=n[0])?void 0:t.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},HI={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const i of t)n?r.add(i.value):r.delete(i.value);return r},selectAll:e=>{let{value:t,currentPage:n,selected:r}=e;return HI.select({items:n,value:t,selected:r})}},GI={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const i of t)n?r.add(i.value):r.delete(i.value);return r},selectAll:e=>{let{value:t,allItems:n,selected:r}=e;return GI.select({items:n,value:t,selected:r})}},KI=re({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ee}},"DataTable-select"),WI=Symbol.for("vuetify:data-table-selection");function QI(e,t){let{allItems:r,currentPage:i}=t;const a=ke(e,"modelValue",e.modelValue,t=>new Set(Te(t).map(t=>{var n;return(null==(n=r.value.find(n=>e.valueComparator(t,n.value)))?void 0:n.value)??t})),e=>[...e.values()]),s=o(()=>r.value.filter(e=>e.selectable)),l=o(()=>i.value.filter(e=>e.selectable)),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return qI;case"all":return GI;default:return HI}}),c=n(null);function d(e){return Te(e).every(e=>a.value.has(e.value))}function h(e,t){const n=u.value.select({items:e,value:t,selected:new Set(a.value)});a.value=n}const p=o(()=>a.value.size>0),f=o(()=>{const e=u.value.allSelected({allItems:s.value,currentPage:l.value});return!!e.length&&d(e)}),v={toggleSelect:function(t,n,r){const a=[];if(n=n??i.value.findIndex(e=>e.value===t.value),"single"!==e.selectStrategy&&(null==r?void 0:r.shiftKey)&&null!==c.value){const[e,t]=[c.value,n].sort((e,t)=>e-t);a.push(...i.value.slice(e,t+1).filter(e=>e.selectable))}else a.push(t),c.value=n;h(a,!d([t]))},select:h,selectAll:function(e){const t=u.value.selectAll({value:e,allItems:s.value,currentPage:l.value,selected:new Set(a.value)});a.value=t},isSelected:d,isSomeSelected:function(e){return Te(e).some(e=>a.value.has(e.value))},someSelected:p,allSelected:f,showSelectAll:b(()=>u.value.showSelectAll),lastSelectedIndex:c,selectStrategy:u};return T(WI,v),v}function YI(){const e=x(WI);if(!e)throw new Error("Missing selection!");return e}const XI=re({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),JI=Symbol.for("vuetify:data-table-sort");function ZI(e){return{sortBy:ke(e,"sortBy"),mustSort:b(()=>e.mustSort),multiSort:b(()=>e.multiSort)}}function eC(e){const{sortBy:t,mustSort:n,multiSort:r,page:i}=e;const a={sortBy:t,toggleSort:e=>{if(null==e.key)return;let a=t.value.map(e=>({...e}))??[];const s=a.find(t=>t.key===e.key);s?"desc"===s.order?n.value&&1===a.length?s.order="asc":a=a.filter(t=>t.key!==e.key):s.order="desc":r.value?a.push({key:e.key,order:"asc"}):a=[{key:e.key,order:"asc"}],t.value=a,i&&(i.value=1)},isSorted:function(e){return!!t.value.find(t=>t.key===e.key)}};return T(JI,a),a}function tC(){const e=x(JI);if(!e)throw new Error("Missing sort!");return e}function nC(e,t,n,r){const i=wt(),a=o(()=>{var a,s;return n.value.length?function(e,t,n,r){const i=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"}),a=e.map(e=>[e,(null==r?void 0:r.transform)?r.transform(e):e]);return a.sort((e,n)=>{var a,s;for(let o=0;o<t.length;o++){let l=!1;const u=t[o].key,c=t[o].order??"asc";if(!1===c)continue;let d=Vt(e[1],u),h=Vt(n[1],u),p=e[0].raw,f=n[0].raw;if("desc"===c&&([d,h]=[h,d],[p,f]=[f,p]),null==(a=null==r?void 0:r.sortRawFunctions)?void 0:a[u]){const e=r.sortRawFunctions[u](p,f);if(null==e)continue;if(l=!0,e)return e}if(null==(s=null==r?void 0:r.sortFunctions)?void 0:s[u]){const e=r.sortFunctions[u](d,h);if(null==e)continue;if(l=!0,e)return e}if(!l&&(d instanceof Date&&h instanceof Date&&(d=d.getTime(),h=h.getTime()),[d,h]=[d,h].map(e=>null!=e?e.toString().toLocaleLowerCase():e),d!==h))return Rt(d)&&Rt(h)?0:Rt(d)?-1:Rt(h)?1:isNaN(d)||isNaN(h)?i.compare(d,h):Number(d)-Number(h)}return 0}).map(e=>{let[t]=e;return t})}(t.value,n.value,i.current.value,{transform:null==r?void 0:r.transform,sortFunctions:{...e.customKeySort,...null==(a=null==r?void 0:r.sortFunctions)?void 0:a.value},sortRawFunctions:null==(s=null==r?void 0:r.sortRawFunctions)?void 0:s.value}):t.value});return{sortedItems:a}}const rC=re({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:be,default:"$sortAsc"},sortDescIcon:{type:be,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...It(),...Yb()},"VDataTableHeaders"),iC=ne()({name:"VDataTableHeaders",props:rC(),setup(e,t){let{slots:n}=t;const{t:r}=wt(),{toggleSort:u,sortBy:c,isSorted:d}=tC(),{someSelected:p,allSelected:f,selectAll:v,showSelectAll:m}=YI(),{columns:g,headers:y}=zI(),{loaderClasses:b}=Xb(e);function w(t,n){if(!e.sticky&&!e.fixedHeader&&!t.fixed)return;const r="string"==typeof t.fixed?t.fixed:t.fixed?"start":"none";return{position:"sticky",left:"start"===r?he(t.fixedOffset):void 0,right:"end"===r?he(t.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${n})`:void 0}}function S(t){const n=c.value.find(e=>e.key===t.key);return n?"asc"===n.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:I,backgroundColorStyles:C}=tb(()=>e.color),{displayClasses:k,mobile:E}=pt(e),T=o(()=>({headers:y.value,columns:g.value,toggleSort:u,isSorted:d,sortBy:c.value,someSelected:p.value,allSelected:f.value,selectAll:v,getSortIcon:S})),x=o(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},k.value,b.value]),A=t=>{let{column:r,x:o,y:g}=t;const y="data-table-select"===r.key||"data-table-expand"===r.key,b=h(e.headerProps??{},r.headerProps??{});return i(AI,h({tag:"th",align:r.align,class:[{"v-data-table__th--sortable":r.sortable&&!e.disableSort,"v-data-table__th--sorted":d(r),"v-data-table__th--fixed":r.fixed},...x.value],style:{width:he(r.width),minWidth:he(r.minWidth),maxWidth:he(r.maxWidth),...w(r,g)},colspan:r.colspan,rowspan:r.rowspan,fixed:r.fixed,nowrap:r.nowrap,lastFixed:r.lastFixed,firstFixedEnd:r.firstFixedEnd,noPadding:y,tabindex:r.sortable?0:void 0,onClick:r.sortable?()=>u(r):void 0,onKeydown:r.sortable?t=>function(t,n){"Enter"!==t.key||e.disableSort||u(n)}(t,r):void 0},b),{default:()=>{var t;const o=`header.${r.key}`,h={column:r,selectAll:v,isSorted:d,toggleSort:u,sortBy:c.value,someSelected:p.value,allSelected:f.value,getSortIcon:S};return n[o]?n[o](h):"data-table-select"===r.key?(null==(t=n["header.data-table-select"])?void 0:t.call(n,h))??(m.value&&i(yS,{modelValue:f.value,indeterminate:p.value&&!f.value,"onUpdate:modelValue":v},null)):l("div",{class:"v-data-table-header__content"},[l("span",null,[r.title]),r.sortable&&!e.disableSort&&i(ob,{key:"icon",class:"v-data-table-header__sort-icon",icon:S(r)},null),e.multiSort&&d(r)&&l("div",{key:"badge",class:s(["v-data-table-header__sort-badge",...I.value]),style:a(C.value)},[c.value.findIndex(e=>e.key===r.key)+1])])}})},N=()=>{const t=o(()=>g.value.filter(t=>(null==t?void 0:t.sortable)&&!e.disableSort)),n=o(()=>{if(null!=g.value.find(e=>"data-table-select"===e.key))return f.value?"$checkboxOn":p.value?"$checkboxIndeterminate":"$checkboxOff"});return i(AI,h({tag:"th",class:[...x.value],colspan:y.value.length+1},e.headerProps),{default:()=>[l("div",{class:"v-data-table-header__content"},[i(cI,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:t.value,label:r("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>c.value=[],appendIcon:n.value,"onClick:append":()=>v(!f.value)},{chip:e=>{var t;return i(qS,{onClick:(null==(t=e.item.raw)?void 0:t.sortable)?()=>u(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,i(ob,{class:s(["v-data-table__td-sort-icon",d(e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:S(e.item.raw),size:"small"},null)]})}})])]})};ve(()=>E.value?l("tr",null,[i(N,null,null)]):l(_,null,[n.headers?n.headers(T.value):y.value.map((e,t)=>l("tr",null,[e.map((e,n)=>i(A,{column:e,x:n,y:t},null))])),e.loading&&l("tr",{class:"v-data-table-progress"},[l("th",{colspan:g.value.length},[i(Jb,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),aC=re({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),sC=Symbol.for("vuetify:data-table-group");function oC(e){return{groupBy:ke(e,"groupBy")}}function lC(e){const{disableSort:t,groupBy:n,sortBy:r}=e,i=f(new Set);function a(e){return i.value.has(e.id)}const s={sortByWithGroups:o(()=>n.value.map(e=>({...e,order:e.order??!1})).concat((null==t?void 0:t.value)?[]:r.value)),toggleGroup:function(e){const t=new Set(i.value);a(e)?t.delete(e.id):t.add(e.id),i.value=t},opened:i,groupBy:n,extractRows:function(e){return function e(t){const n=[];for(const r of t.items)"type"in r&&"group"===r.type?n.push(...e(r)):n.push(r);return[...new Set(n)]}({items:e})},isGroupOpen:a};return T(sC,s),s}function uC(){const e=x(sC);if(!e)throw new Error("Missing group!");return e}function cC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const i=function(e,t){if(!e.length)return[];const n=new Map;for(const r of e){const e=Vt(r.raw,t);n.has(e)||n.set(e,[]),n.get(e).push(r)}return n}(e,t[0]),a=[],s=t.slice(1);return i.forEach((e,i)=>{const o=t[0],l=`${r}_${o}_${i}`;a.push({depth:n,id:l,key:o,value:i,items:s.length?cC(e,s,n+1,l):e,type:"group"})}),a}function dC(e,t){const n=[];for(const r of e)"type"in r&&"group"===r.type?(null!=r.value&&n.push(r),(t.has(r.id)||null==r.value)&&n.push(...dC(r.items,t))):n.push(r);return n}function hC(e,t,n){return{flatItems:o(()=>{if(!t.value.length)return e.value;return dC(cC(e.value,t.value.map(e=>e.key)),n.value)})}}const pC=re({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),fC=ne()({name:"VDataTableGroupHeaderRow",props:pC(),setup(e,t){let{slots:n}=t;const{isGroupOpen:r,toggleGroup:a,extractRows:s}=uC(),{isSelected:u,isSomeSelected:c,select:d}=YI(),{columns:h}=zI(),p=o(()=>s([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[h.value.map(t=>{var s,o;if("data-table-group"===t.key){const t=r(e.item)?"$expand":"$next",o=()=>a(e.item);return(null==(s=n["data-table-group"])?void 0:s.call(n,{item:e.item,count:p.value.length,props:{icon:t,onClick:o}}))??i(AI,{class:"v-data-table-group-header-row__column"},{default:()=>[i(Iw,{size:"small",variant:"text",icon:t,onClick:o},null),l("span",null,[e.item.value]),l("span",null,[z("("),p.value.length,z(")")])]})}if("data-table-select"===t.key){const e=u(p.value),t=c(p.value)&&!e,r=e=>d(p.value,e);return(null==(o=n["data-table-select"])?void 0:o.call(n,{props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":r}}))??l("td",null,[i(yS,{modelValue:e,indeterminate:t,"onUpdate:modelValue":r},null)])}return l("td",null,null)})])}}),vC=re({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),mC=Symbol.for("vuetify:datatable:expanded");function gC(e){const t=b(()=>e.expandOnClick),n=ke(e,"expanded",e.expanded,e=>new Set(e),e=>[...e.values()]);function r(e,t){const r=new Set(n.value);t?r.add(e.value):r.delete(e.value),n.value=r}function i(e){return n.value.has(e.value)}const a={expand:r,expanded:n,expandOnClick:t,isExpanded:i,toggleExpand:function(e){r(e,!i(e))}};return T(mC,a),a}function yC(){const e=x(mC);if(!e)throw new Error("foo");return e}const bC=re({index:Number,item:Object,cellProps:[Object,Function],onClick:qe(),onContextmenu:qe(),onDblclick:qe(),...It()},"VDataTableRow"),wC=ne()({name:"VDataTableRow",props:bC(),setup(e,t){let{slots:n}=t;const{displayClasses:r,mobile:a}=pt(e,"v-data-table__tr"),{isSelected:o,toggleSelect:u,someSelected:c,allSelected:d,selectAll:p}=YI(),{isExpanded:f,toggleExpand:v}=yC(),{toggleSort:m,sortBy:g,isSorted:y}=tC(),{columns:b}=zI();ve(()=>l("tr",{class:s(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},r.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&b.value.map((t,r)=>{const s=e.item,b=`item.${t.key}`,w=`header.${t.key}`,S={index:e.index,item:s.raw,internalItem:s,value:Vt(s.columns,t.key),column:t,isSelected:o,toggleSelect:u,isExpanded:f,toggleExpand:v},I={column:t,selectAll:p,isSorted:y,toggleSort:m,sortBy:g.value,someSelected:c.value,allSelected:d.value,getSortIcon:()=>""},C="function"==typeof e.cellProps?e.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value,column:t}):e.cellProps,k="function"==typeof t.cellProps?t.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value}):t.cellProps;return i(AI,h({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,fixedEndOffset:t.fixedEndOffset,lastFixed:t.lastFixed,firstFixedEnd:t.firstFixedEnd,maxWidth:a.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:a.value?void 0:t.width},C,k),{default:()=>{var r,c,d,h;if("data-table-select"===t.key)return(null==(r=n["item.data-table-select"])?void 0:r.call(n,{...S,props:{disabled:!s.selectable,modelValue:o([s]),onClick:Q(()=>u(s),["stop"])}}))??i(yS,{disabled:!s.selectable,modelValue:o([s]),onClick:Q(t=>u(s,e.index,t),["stop"])},null);if("data-table-expand"===t.key)return(null==(c=n["item.data-table-expand"])?void 0:c.call(n,{...S,props:{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:Q(()=>v(s),["stop"])}}))??i(Iw,{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:Q(()=>v(s),["stop"])},null);if(n[b]&&!a.value)return n[b](S);const p=R(S.value);return a.value?l(_,null,[l("div",{class:"v-data-table__td-title"},[(null==(d=n[w])?void 0:d.call(n,I))??t.title]),l("div",{class:"v-data-table__td-value"},[(null==(h=n[b])?void 0:h.call(n,S))??p])]):p}})})]))}}),_C=re({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...It()},"VDataTableRows"),SC=ne()({name:"VDataTableRows",inheritAttrs:!1,props:_C(),setup(e,t){let{attrs:n,slots:r}=t;const{columns:a}=zI(),{expandOnClick:s,toggleExpand:o,isExpanded:u}=yC(),{isSelected:c,toggleSelect:d}=YI(),{toggleGroup:p,isGroupOpen:f}=uC(),{t:v}=wt(),{mobile:m}=pt(e);return ve(()=>{var t,g;return!e.loading||e.items.length&&!r.loading?e.loading||e.items.length||e.hideNoData?l(_,null,[e.items.map((t,v)=>{var g;if("group"===t.type){const e={index:v,item:t,columns:a.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d,toggleGroup:p,isGroupOpen:f};return r["group-header"]?r["group-header"](e):i(fC,h({key:`group-header_${t.id}`,item:t},Pt(n,":group-header",()=>e)),r)}const y={index:v,item:t.raw,internalItem:t,columns:a.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d},b={...y,props:h({key:`item_${t.key??t.index}`,onClick:s.value?()=>{o(t)}:void 0,index:v,item:t,cellProps:e.cellProps,mobile:m.value},Pt(n,":row",()=>y),"function"==typeof e.rowProps?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return l(_,{key:b.props.key},[r.item?r.item(b):i(wC,b.props,r),u(t)&&(null==(g=r["expanded-row"])?void 0:g.call(r,y))])})]):l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:a.value.length},[(null==(g=r["no-data"])?void 0:g.call(r))??v(e.noDataText)])]):l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:a.value.length},[(null==(t=r.loading)?void 0:t.call(r))??v(e.loadingText)])])}),{}}}),IC=re({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...ye(),...Ib(),...ab(),...ge()},"VTable"),CC=ne()({name:"VTable",props:IC(),setup(e,t){let{slots:n,emit:r}=t;const{themeClasses:o}=Ce(e),{densityClasses:u}=Cb(e);return ve(()=>{const t={VCheckboxBtn:{density:e.density}};return i(e.tag,{class:s(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},o.value,u.value,e.class]),style:a(e.style)},{default:()=>{var r,a;return[null==(r=n.top)?void 0:r.call(n),i(Jy,{defaults:t},{default:()=>{var t;return[n.default?l("div",{class:"v-table__wrapper",style:{height:he(e.height)}},[l("table",null,[n.default()])]):null==(t=n.wrapper)?void 0:t.call(n)]}}),null==(a=n.bottom)?void 0:a.call(n)]}})}),{}}}),kC=re({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function EC(e,t,n){return t.map((t,r)=>function(e,t,n,r){const i=e.returnObject?t:Ke(t,e.itemValue),a=Ke(t,e.itemSelectable,!0),s=r.reduce((e,n)=>(null!=n.key&&(e[n.key]=Ke(t,n.value)),e),{});return{type:"item",key:e.returnObject?Ke(t,e.itemValue):i,index:n,value:i,selectable:a,columns:s,raw:t}}(e,t,r,n))}function TC(e,t){return{items:o(()=>EC(e,e.items,t.value))}}function xC(e){let{page:t,itemsPerPage:n,sortBy:r,groupBy:i,search:a}=e;const s=Ie("VDataTable");let o=null;v(()=>({page:t.value,itemsPerPage:n.value,sortBy:r.value,groupBy:i.value,search:a.value}),e=>{Ee(o,e)||(o&&o.search!==e.search&&(t.value=1),s.emit("update:options",e),o=e)},{deep:!0,immediate:!0})}const AC=(e,t,n)=>{if(null==e||null==t)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const r=[];let i=e.indexOf(t);for(;~i;)r.push([i,i+t.length]),i=e.indexOf(t,i+t.length);return r.length?r:-1};function NC(e,t){if(null!=e&&"boolean"!=typeof e&&-1!==e)return"number"==typeof e?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const DC=re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function VC(e,t,r,i){const a=n([]),s=n(new Map),l=o(()=>(null==i?void 0:i.transform)?A(t).map(e=>[e,i.transform(e)]):A(t));return D(()=>{const n="function"==typeof r?r():A(r),o="string"!=typeof n&&"number"!=typeof n?"":String(n),u=function(e,t,n){var r;const i=[],a=(null==n?void 0:n.default)??AC,s=!!(null==n?void 0:n.filterKeys)&&Te(n.filterKeys),o=Object.keys((null==n?void 0:n.customKeyFilter)??{}).length;if(!(null==e?void 0:e.length))return i;e:for(let l=0;l<e.length;l++){const[u,c=u]=Te(e[l]),d={},h={};let p=-1;if((t||o>0)&&!(null==n?void 0:n.noFilter)){if("object"==typeof u){if("divider"===u.type||"subheader"===u.type)continue;const e=s||Object.keys(c);for(const i of e){const e=Ke(c,i),s=null==(r=null==n?void 0:n.customKeyFilter)?void 0:r[i];if(p=s?s(e,t,u):a(e,t,u),-1!==p&&!1!==p)s?d[i]=NC(p,t):h[i]=NC(p,t);else if("every"===(null==n?void 0:n.filterMode))continue e}}else p=a(u,t,u),-1!==p&&!1!==p&&(h.title=NC(p,t));const e=Object.keys(h).length,i=Object.keys(d).length;if(!e&&!i)continue;if("union"===(null==n?void 0:n.filterMode)&&i!==o&&!e)continue;if("intersection"===(null==n?void 0:n.filterMode)&&(i!==o||!e))continue}i.push({index:l,matches:{...h,...d}})}return i}(l.value,o,{customKeyFilter:{...e.customKeyFilter,...A(null==i?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=A(t),d=[],h=new Map;u.forEach(e=>{let{index:t,matches:n}=e;const r=c[t];d.push(r),h.set(r.value,n)}),a.value=d,s.value=h}),{filteredItems:a,filteredMatches:s,getMatches:function(e){return s.value.get(e.value)}}}const RC=re({..._C(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...vC(),...aC(),...NI(),...kC(),...KI(),...XI(),...rC(),...IC()},"DataTable"),PC=re({...kI(),...RC(),...DC(),...TI()},"VDataTable");ne()({name:"VDataTable",props:PC(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(t,n){let{attrs:r,slots:a}=n;const{groupBy:s}=oC(t),{sortBy:u,multiSort:c,mustSort:d}=ZI(t),{page:p,itemsPerPage:f}=function(e){return{page:ke(e,"page",void 0,e=>Number(e??1)),itemsPerPage:ke(e,"itemsPerPage",void 0,e=>Number(e??10))}}(t),{disableSort:m}=e(t),{columns:g,headers:y,sortFunctions:w,sortRawFunctions:S,filterFunctions:I}=jI(t,{groupBy:s,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:C}=TC(t,g),k=b(()=>t.search),{filteredItems:E}=VC(t,C,k,{transform:e=>e.columns,customKeyFilter:I}),{toggleSort:x}=eC({sortBy:u,multiSort:c,mustSort:d,page:p}),{sortByWithGroups:A,opened:N,extractRows:D,isGroupOpen:V,toggleGroup:R}=lC({groupBy:s,sortBy:u,disableSort:m}),{sortedItems:P}=nC(t,E,A,{transform:e=>({...e.raw,...e.columns}),sortFunctions:w,sortRawFunctions:S}),{flatItems:O}=hC(P,s,N),M=o(()=>O.value.length),{startIndex:L,stopIndex:F,pageCount:B,setItemsPerPage:U}=function(e){const{page:t,itemsPerPage:n,itemsLength:r}=e,i=o(()=>-1===n.value?0:n.value*(t.value-1)),a=o(()=>-1===n.value?r.value:Math.min(r.value,i.value+n.value)),s=o(()=>-1===n.value||0===r.value?1:Math.ceil(r.value/n.value));v([t,s],()=>{t.value>s.value&&(t.value=s.value)});const l={page:t,itemsPerPage:n,startIndex:i,stopIndex:a,pageCount:s,itemsLength:r,nextPage:function(){t.value=Ne(t.value+1,1,s.value)},prevPage:function(){t.value=Ne(t.value-1,1,s.value)},setPage:function(e){t.value=Ne(e,1,s.value)},setItemsPerPage:function(e){n.value=e,t.value=1}};return T(EI,l),l}({page:p,itemsPerPage:f,itemsLength:M}),{paginatedItems:$}=function(e){const t=Ie("usePaginatedItems"),{items:n,startIndex:r,stopIndex:i,itemsPerPage:a}=e,s=o(()=>a.value<=0?n.value:n.value.slice(r.value,i.value));return v(s,e=>{t.emit("update:currentItems",e)},{immediate:!0}),{paginatedItems:s}}({items:O,startIndex:L,stopIndex:F,itemsPerPage:f}),j=o(()=>D($.value)),{isSelected:z,select:q,selectAll:H,toggleSelect:G,someSelected:K,allSelected:W}=QI(t,{allItems:C,currentPage:j}),{isExpanded:Q,toggleExpand:Y}=gC(t);xC({page:p,itemsPerPage:f,sortBy:u,groupBy:s,search:k}),ie({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const X=o(()=>({page:p.value,itemsPerPage:f.value,sortBy:u.value,pageCount:B.value,toggleSort:x,setItemsPerPage:U,someSelected:K.value,allSelected:W.value,isSelected:z,select:q,selectAll:H,toggleSelect:G,isExpanded:Q,toggleExpand:Y,isGroupOpen:V,toggleGroup:R,items:j.value.map(e=>e.raw),internalItems:j.value,groupedItems:$.value,columns:g.value,headers:y.value}));return ve(()=>{const e=xI.filterProps(t),n=iC.filterProps(t),s=SC.filterProps(t),o=CC.filterProps(t);return i(CC,h({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},o,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=a.top)?void 0:e.call(a,X.value)},default:()=>{var e,o,u,c,d,p;return a.default?a.default(X.value):l(_,null,[null==(e=a.colgroup)?void 0:e.call(a,X.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[i(iC,n,a)]),null==(o=a.thead)?void 0:o.call(a,X.value),!t.hideDefaultBody&&l("tbody",null,[null==(u=a["body.prepend"])?void 0:u.call(a,X.value),a.body?a.body(X.value):i(SC,h(r,s,{items:$.value}),a),null==(c=a["body.append"])?void 0:c.call(a,X.value)]),null==(d=a.tbody)?void 0:d.call(a,X.value),null==(p=a.tfoot)?void 0:p.call(a,X.value)])},bottom:()=>a.bottom?a.bottom(X.value):!t.hideDefaultFooter&&l(_,null,[i(kw,null,null),i(xI,e,{prepend:a["footer.prepend"]})])})}),{}}});const OC=re({...We(RC(),["hideDefaultFooter"]),...aC(),...rI(),...DC()},"VDataTableVirtual"),MC=ne()({name:"VDataTableVirtual",props:OC(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(t,r){let{attrs:a,slots:s}=r;const{groupBy:u}=oC(t),{sortBy:c,multiSort:d,mustSort:p}=ZI(t),{disableSort:f}=e(t),{columns:v,headers:m,filterFunctions:g,sortFunctions:y,sortRawFunctions:w}=jI(t,{groupBy:u,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:_}=TC(t,v),S=b(()=>t.search),{filteredItems:I}=VC(t,_,S,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:C}=eC({sortBy:c,multiSort:d,mustSort:p}),{sortByWithGroups:k,opened:E,extractRows:T,isGroupOpen:x,toggleGroup:A}=lC({groupBy:u,sortBy:c,disableSort:f}),{sortedItems:N}=nC(t,I,k,{transform:e=>({...e.raw,...e.columns}),sortFunctions:y,sortRawFunctions:w}),{flatItems:D}=hC(N,u,E),V=o(()=>T(D.value)),{isSelected:R,select:P,selectAll:O,toggleSelect:M,someSelected:L,allSelected:F}=QI(t,{allItems:V,currentPage:V}),{isExpanded:B,toggleExpand:U}=gC(t),{containerRef:$,markerRef:j,paddingTop:z,paddingBottom:q,computedItems:H,handleItemResize:G,handleScroll:K,handleScrollend:W,calculateVisibleItems:Q,scrollToIndex:Y}=iI(t,D),X=o(()=>H.value.map(e=>e.raw));xC({sortBy:c,page:n(1),itemsPerPage:n(-1),groupBy:u,search:S}),ie({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const J=o(()=>({sortBy:c.value,toggleSort:C,someSelected:L.value,allSelected:F.value,isSelected:R,select:P,selectAll:O,toggleSelect:M,isExpanded:B,toggleExpand:U,isGroupOpen:x,toggleGroup:A,items:V.value.map(e=>e.raw),internalItems:V.value,groupedItems:D.value,columns:v.value,headers:m.value}));return ve(()=>{const e=iC.filterProps(t),n=SC.filterProps(t),r=CC.filterProps(t);return i(CC,h({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},r,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=s.top)?void 0:e.call(s,J.value)},wrapper:()=>{var r,o,u,c,d,p;return l("div",{ref:$,onScrollPassive:K,onScrollend:W,class:"v-table__wrapper",style:{height:he(t.height)}},[l("table",null,[null==(r=s.colgroup)?void 0:r.call(s,J.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[i(iC,e,s)]),null==(o=s.thead)?void 0:o.call(s,J.value),!t.hideDefaultBody&&l("tbody",{key:"tbody"},[l("tr",{ref:j,style:{height:he(z.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)]),null==(u=s["body.prepend"])?void 0:u.call(s,J.value),i(SC,h(a,n,{items:X.value}),{...s,item:e=>i(nI,{key:e.internalItem.index,renderless:!0,"onUpdate:height":t=>G(e.internalItem.index,t)},{default:t=>{var n;let{itemRef:r}=t;return(null==(n=s.item)?void 0:n.call(s,{...e,itemRef:r}))??i(wC,h(e.props,{ref:r,key:e.internalItem.index,index:e.internalItem.index}),s)}})}),null==(c=s["body.append"])?void 0:c.call(s,J.value),l("tr",{style:{height:he(q.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)])]),null==(d=s.tbody)?void 0:d.call(s,J.value),null==(p=s.tfoot)?void 0:p.call(s,J.value)])])},bottom:()=>{var e;return null==(e=s.bottom)?void 0:e.call(s,J.value)}})}),{calculateVisibleItems:Q,scrollToIndex:Y}}}),LC=Symbol.for("vuetify:v-expansion-panel"),FC=re({...ye(),...j_()},"VExpansionPanelText"),BC=ne()({name:"VExpansionPanelText",props:FC(),setup(e,t){let{slots:n}=t;const r=x(LC);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:o,onAfterLeave:u}=z_(e,r.isSelected);return ve(()=>i(Lw,{onAfterLeave:u},{default:()=>{var t;return[w(l("div",{class:s(["v-expansion-panel-text",e.class]),style:a(e.style)},[n.default&&o.value&&l("div",{class:"v-expansion-panel-text__wrapper"},[null==(t=n.default)?void 0:t.call(n)])]),[[S,r.isSelected.value]])]}})),{}}}),UC=re({color:String,expandIcon:{type:be,default:"$expand"},collapseIcon:{type:be,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...ye(),...lb()},"VExpansionPanelTitle"),$C=ne()({name:"VExpansionPanelTitle",directives:{vRipple:_w},props:UC(),setup(e,t){let{slots:n}=t;const r=x(LC);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:c}=tb(()=>e.color),{dimensionStyles:d}=ub(e),h=o(()=>({collapseIcon:e.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),p=b(()=>r.isSelected.value?e.collapseIcon:e.expandIcon);return ve(()=>{var t;return w(l("button",{class:s(["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class]),style:a([c.value,d.value,e.style]),type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:e.readonly?void 0:r.toggle},[l("span",{class:"v-expansion-panel-title__overlay"},null),null==(t=n.default)?void 0:t.call(n,h.value),!e.hideActions&&i(Jy,{defaults:{VIcon:{icon:p.value}}},{default:()=>{var e;return[l("span",{class:"v-expansion-panel-title__icon"},[(null==(e=n.actions)?void 0:e.call(n,h.value))??i(ob,null,null)])]}})]),[[_w,e.ripple]])}),{}}}),jC=re({title:String,text:String,bgColor:String,...Db(),...Mb(),...hb(),...ab(),...UC(),...FC()},"VExpansionPanel"),zC=ne()({name:"VExpansionPanel",props:jC(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=Lb(e,LC),{backgroundColorClasses:u,backgroundColorStyles:c}=tb(()=>e.bgColor),{elevationClasses:d}=Vb(e),{roundedClasses:h}=pb(e),p=b(()=>(null==r?void 0:r.disabled.value)||e.disabled),f=o(()=>r.group.items.value.reduce((e,t,n)=>(r.group.selected.value.includes(t.id)&&e.push(n),e),[])),v=o(()=>{const e=r.group.items.value.findIndex(e=>e.id===r.id);return!r.isSelected.value&&f.value.some(t=>t-e===1)}),m=o(()=>{const e=r.group.items.value.findIndex(e=>e.id===r.id);return!r.isSelected.value&&f.value.some(t=>t-e===-1)});return T(LC,r),ve(()=>{const t=!(!n.text&&!e.text),o=!(!n.title&&!e.title),f=$C.filterProps(e),g=BC.filterProps(e);return i(e.tag,{class:s(["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":m.value,"v-expansion-panel--disabled":p.value},h.value,u.value,e.class]),style:a([c.value,e.style])},{default:()=>[l("div",{class:s(["v-expansion-panel__shadow",...d.value])},null),i(Jy,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...g}}},{default:()=>{var r;return[o&&i($C,{key:"title"},{default:()=>[n.title?n.title():e.title]}),t&&i(BC,{key:"text"},{default:()=>[n.text?n.text():e.text]}),null==(r=n.default)?void 0:r.call(n)]}})]})}),{groupItem:r}}}),qC=["default","accordion","inset","popout"],HC=re({flat:Boolean,...Ob(),...Ge(jC(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ge(),...ye(),...ab(),variant:{type:String,default:"default",validator:e=>qC.includes(e)}},"VExpansionPanels"),GC=ne()({name:"VExpansionPanels",props:HC(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:r,prev:o}=Fb(e,LC),{themeClasses:l}=Ce(e),u=b(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ie({VExpansionPanel:{bgColor:b(()=>e.bgColor),collapseIcon:b(()=>e.collapseIcon),color:b(()=>e.color),eager:b(()=>e.eager),elevation:b(()=>e.elevation),expandIcon:b(()=>e.expandIcon),focusable:b(()=>e.focusable),hideActions:b(()=>e.hideActions),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),rounded:b(()=>e.rounded),static:b(()=>e.static)}}),ve(()=>i(e.tag,{class:s(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},l.value,u.value,e.class]),style:a(e.style)},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{prev:o,next:r})]}})),{next:r,prev:o}}}),KC=re({fluid:{type:Boolean,default:!1},...ye(),...lb(),...ab()},"VContainer"),WC=ne()({name:"VContainer",props:KC(),setup(e,t){let{slots:n}=t;const{rtlClasses:r}=De(),{dimensionStyles:o}=ub(e);return ve(()=>i(e.tag,{class:s(["v-container",{"v-container--fluid":e.fluid},r.value,e.class]),style:a([o.value,e.style])},n)),{}}}),QC=Ot.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),YC=Ot.reduce((e,t)=>(e["offset"+W(t)]={type:[String,Number],default:null},e),{}),XC=Ot.reduce((e,t)=>(e["order"+W(t)]={type:[String,Number],default:null},e),{}),JC={col:Object.keys(QC),offset:Object.keys(YC),order:Object.keys(XC)};function ZC(e,t,n){let r=e;if(null!=n&&!1!==n){if(t){r+=`-${t.replace(e,"")}`}return"col"===e&&(r="v-"+r),"col"!==e||""!==n&&!0!==n?(r+=`-${n}`,r.toLowerCase()):r.toLowerCase()}}const ek=["auto","start","end","center","baseline","stretch"],tk=re({cols:{type:[Boolean,String,Number],default:!1},...QC,offset:{type:[String,Number],default:null},...YC,order:{type:[String,Number],default:null},...XC,alignSelf:{type:String,default:null,validator:e=>ek.includes(e)},...ye(),...ab()},"VCol"),nk=ne()({name:"VCol",props:tk(),setup(e,t){let{slots:n}=t;const r=o(()=>{const t=[];let n;for(n in JC)JC[n].forEach(r=>{const i=e[r],a=ZC(n,r,i);a&&t.push(a)});const r=t.some(e=>e.startsWith("v-col-"));return t.push({"v-col":!r||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t});return()=>{var t;return p(e.tag,{class:[r.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),rk=["start","end","center"],ik=["space-between","space-around","space-evenly"];function ak(e,t){return Ot.reduce((n,r)=>(n[e+W(r)]=t(),n),{})}const sk=[...rk,"baseline","stretch"],ok=e=>sk.includes(e),lk=ak("align",()=>({type:String,default:null,validator:ok})),uk=[...rk,...ik],ck=e=>uk.includes(e),dk=ak("justify",()=>({type:String,default:null,validator:ck})),hk=[...rk,...ik,"stretch"],pk=e=>hk.includes(e),fk=ak("alignContent",()=>({type:String,default:null,validator:pk})),vk={align:Object.keys(lk),justify:Object.keys(dk),alignContent:Object.keys(fk)},mk={align:"align",justify:"justify",alignContent:"align-content"};function gk(e,t,n){let r=mk[e];if(null!=n){if(t){r+=`-${t.replace(e,"")}`}return r+=`-${n}`,r.toLowerCase()}}const yk=re({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:ok},...lk,justify:{type:String,default:null,validator:ck},...dk,alignContent:{type:String,default:null,validator:pk},...fk,...ye(),...ab()},"VRow"),bk=ne()({name:"VRow",props:yk(),setup(e,t){let{slots:n}=t;const r=o(()=>{const t=[];let n;for(n in vk)vk[n].forEach(r=>{const i=e[r],a=gk(n,r,i);a&&t.push(a)});return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t});return()=>{var t;return p(e.tag,{class:["v-row",r.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),wk=je("v-spacer","div","VSpacer"),_k=re({id:String,interactive:Boolean,text:String,...We(Z_({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),Sk=ne()({name:"VTooltip",props:_k(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=ke(e,"modelValue"),{scopeId:a}=q_(),s=E(),l=b(()=>e.id||`v-tooltip-${s}`),u=f(),c=o(()=>e.location.split(" ").length>1?e.location:e.location+" center"),d=o(()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=b(()=>null!=e.transition?e.transition:r.value?"scale-transition":"fade-transition"),v=o(()=>h({"aria-describedby":l.value},e.activatorProps));return ve(()=>{const t=eS.filterProps(e);return i(eS,h({ref:u,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,transition:p.value,absolute:!0,location:c.value,origin:d.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},a),{activator:n.activator,default:function(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(null==(t=n.default)?void 0:t.call(n,...i))??e.text}})}),rS({},u)}}),Ik={class:"pa-6"},Ck={class:"d-flex align-center mb-6"},kk={class:"d-flex align-center mb-3"},Ek={class:"d-flex justify-space-between align-center"},Tk={class:"d-flex align-center"},xk={class:"text-body-1 font-weight-medium"},Ak={class:"d-flex align-center"},Nk={class:"text-caption text-white font-weight-bold"},Dk={class:"font-weight-medium"},Vk={class:"text-caption"},Rk=["innerHTML"],Pk=["innerHTML"],Ok=["innerHTML"],Mk=["innerHTML"],Lk=Yy({__name:"ViewAllCharactersTab",props:{dataLoaded:{type:Boolean,required:!0},accounts:{type:Array,required:!0},characterMasters:{type:Array,required:!0},itemMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0},ownedCountMap:{type:Map,required:!0},ownedCharactersData:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},setup(e){const t=e,n=f(!1),r=I({charSearch:"",element:"",itemSearch:"",type:"",gachaSearch:"",totalOwnership:"",account:"",ownership:""}),a=o(()=>Array.from(new Set(t.characterMasters.map(e=>e.type).filter(Boolean))).sort()),u=o(()=>{const e=[{title:"No.",key:"indexNumber",align:"center",sortable:!0,width:80},{title:"キャラ名",key:"monsterName",align:"start",sortable:!0,width:200}];return n.value&&e.push({title:"属性",key:"element",align:"center",sortable:!0,width:100},{title:"分類",key:"type",align:"center",sortable:!0,width:100},{title:"排出ガチャ",key:"ejectionGacha",align:"center",sortable:!0,width:100}),t.accounts.forEach(t=>{var n;const r=t.indexNumber||(null==(n=t.name.match(/\d+/))?void 0:n[0])||t.id;e.push({title:`${r}-1`,key:`account_${t.id}_1`,align:"center",sortable:!1,width:78},{title:`${r}-2`,key:`account_${t.id}_2`,align:"center",sortable:!1,width:78})}),e}),c=o(()=>{if(!t.dataLoaded)return[];const{charSearch:e,element:n,itemSearch:i,type:a,gachaSearch:s,totalOwnership:o,account:l,ownership:u}=r,c=e.toLowerCase(),h=i?Number(i):null;return t.characterMasters.filter(e=>{if(c&&!e.monsterName.toLowerCase().includes(c)&&!(e.indexNumber+"").includes(c))return!1;if(n&&e.element!==n)return!1;if(a)if("恒常_or_限定"===a){if("恒常"!==e.type&&"限定"!==e.type)return!1}else if(e.type!==a)return!1;if(s&&(e.ejectionGacha||"")!==s)return!1;if(h){let n=!1;const r=l||null;if(r)n=(t.ownedCharactersData.get(r)||[]).some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===h))});else for(const i of t.ownedCharactersData.values())if(i.some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===h))})){n=!0;break}if(!n)return!1}const r=t.accounts.reduce((t,n)=>t+d(e.id,n.id),0);if("all_unowned"===o&&r>0)return!1;if("four_or_more"===o&&r<4)return!1;if("one_in_each"===o&&!t.accounts.every(t=>d(e.id,t.id)>=1))return!1;if(l&&u){const t=d(e.id,l);if("owned"===u&&0===t)return!1;if("unowned"===u&&t>0)return!1;if("one"===u&&1!==t)return!1;if("two"===u&&2!==t)return!1}return!0})}),d=(e,n)=>t.ownedCountMap.get(`${e}-${n}`)||0,p=(e,n,r)=>{const i=(t.ownedCharactersData.get(n)||[]).filter(t=>t.characterMasterId===e);if(!i||i.length<=r)return"—";const a=(i[r].items||[]).map(e=>t.itemMastersMap.get(Number(e))).filter(Boolean).join("<br>");return a?`✔️<br>${a}`:"✔️"},v=(e,n,r)=>{const i=(t.ownedCharactersData.get(n)||[]).filter(t=>t.characterMasterId===e);if(!i||i.length<=r)return"未所持";return(i[r].items||[]).map(e=>t.itemMastersMap.get(Number(e))).filter(Boolean).join("<br>")||"アイテムなし"},m=(e,t,n)=>d(e,t)>=n?"status-owned":"status-unowned",g=e=>({"火":"red","水":"blue","木":"green","光":"amber","闇":"deep-purple"}[e]||"grey"),y=()=>{Object.assign(r,{charSearch:"",element:"",itemSearch:"",type:"",gachaSearch:"",totalOwnership:"",account:"",ownership:""})};return(t,o)=>{const d=Y("v-subheader");return $(),U("div",Ik,[l("div",Ck,[i(ob,{icon:"mdi-account-multiple",size:"28",color:"primary",class:"mr-3"}),o[9]||(o[9]=l("h2",{class:"text-h5 font-weight-medium text-primary"},"所持状況一覧",-1))]),i(SI,{class:"mb-6 minimal-filter-card"},{default:j(()=>[i(mI,{class:"minimal-card-title pa-4"},{default:j(()=>[i(ob,{icon:"mdi-filter-variant",class:"mr-2",size:"20"}),o[10]||(o[10]=z(" フィルターとオプション ",-1))]),_:1,__:[10]}),i(GC,null,{default:j(()=>[i(zC,null,{default:j(()=>[i($C,{class:"pa-4 minimal-panel-title"},{default:j(()=>[i(ob,{start:"",icon:"mdi-filter-variant",color:"primary",size:"20"}),o[11]||(o[11]=l("span",{class:"text-body-1 font-weight-medium"},"詳細フィルターを開く",-1))]),_:1,__:[11]}),i(BC,{class:"pa-6"},{default:j(()=>[i(WC,null,{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12",md:"4"},{default:j(()=>[i(eI,{modelValue:r.charSearch,"onUpdate:modelValue":o[0]||(o[0]=e=>r.charSearch=e),modelModifiers:{lazy:!0},label:"キャラクター名 or 図鑑番号",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-search",class:"minimal-input"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[i(cI,{modelValue:r.element,"onUpdate:modelValue":o[1]||(o[1]=e=>r.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-fire",class:"minimal-select"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[i(cI,{modelValue:r.itemSearch,"onUpdate:modelValue":o[2]||(o[2]=e=>r.itemSearch=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム名",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-sword-cross",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[i(cI,{modelValue:r.type,"onUpdate:modelValue":o[3]||(o[3]=e=>r.type=e),items:["恒常_or_限定",...a.value],label:"分類 (Type)",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-tag",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[i(cI,{modelValue:r.gachaSearch,"onUpdate:modelValue":o[4]||(o[4]=e=>r.gachaSearch=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-gift",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[i(cI,{modelValue:r.totalOwnership,"onUpdate:modelValue":o[5]||(o[5]=e=>r.totalOwnership=e),items:[{value:"all_unowned",title:"全アカウントで未所持"},{value:"four_or_more",title:"合計4体以上"},{value:"one_in_each",title:"各アカウントで1体以上所持"}],label:"全体の所持状況",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-group",class:"minimal-select"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12"},{default:j(()=>[i(kw,{class:"my-4 minimal-divider"}),l("div",kk,[i(ob,{icon:"mdi-account",color:"secondary",class:"mr-2",size:"20"}),i(d,{class:"text-body-1 font-weight-medium"},{default:j(()=>o[12]||(o[12]=[z("単一アカウントでの絞り込み",-1)])),_:1,__:[12]})])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:r.account,"onUpdate:modelValue":o[6]||(o[6]=e=>r.account=e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-account",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:r.ownership,"onUpdate:modelValue":o[7]||(o[7]=e=>r.ownership=e),items:[{value:"owned",title:"所持"},{value:"unowned",title:"未所持"},{value:"one",title:"1体所持"},{value:"two",title:"2体所持"}],label:"所持状況 (指定アカウント内)",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-check-circle",class:"minimal-select"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(pI,{class:"pa-4 minimal-actions"},{default:j(()=>[i(Iw,{onClick:o[8]||(o[8]=e=>n.value=!n.value),variant:"outlined",color:"info","prepend-icon":"mdi-eye",class:"minimal-button"},{default:j(()=>[z(R(n.value?"詳細を非表示":"詳細を表示"),1)]),_:1}),i(wk),i(Iw,{onClick:y,color:"secondary",variant:"outlined","prepend-icon":"mdi-refresh",class:"minimal-button"},{default:j(()=>o[13]||(o[13]=[z(" リセット ",-1)])),_:1,__:[13]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(SI,{class:"mb-4 minimal-stats-card"},{default:j(()=>[i(wI,{class:"pa-4"},{default:j(()=>[l("div",Ek,[l("div",Tk,[i(ob,{icon:"mdi-chart-bar",color:"primary",class:"mr-2",size:"20"}),l("span",xk,"表示件数: "+R(c.value.length)+" / "+R(e.characterMasters.length),1)]),i(qS,{color:c.value.length===e.characterMasters.length?"success":"warning",variant:"outlined",class:"minimal-chip"},{default:j(()=>[z(R(c.value.length===e.characterMasters.length?"全件表示":"フィルター適用中"),1)]),_:1},8,["color"])])]),_:1})]),_:1}),i(SI,{elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-table",class:"mr-2"}),o[14]||(o[14]=z(" キャラクター所持状況 ",-1))]),_:1,__:[14]}),i(wI,{class:"pa-0"},{default:j(()=>[i(MC,{items:c.value,headers:u.value,loading:!e.dataLoaded,height:"70vh",density:"compact","fixed-header":"",class:"table-fixed","fixed-columns":!0},X({"item.monsterName":j(({item:e})=>[l("div",Ak,[i(Nb,{size:"32",color:g(e.element),class:"mr-3"},{default:j(()=>[l("span",Nk,R(e.element||"?"),1)]),_:2},1032,["color"]),l("span",Dk,R(e.monsterName||"—"),1)])]),"item.element":j(({item:e})=>[i(qS,{color:g(e.element),variant:"tonal",size:"small"},{default:j(()=>[z(R(e.element||"—"),1)]),_:2},1032,["color"])]),"item.type":j(({item:e})=>{return[i(qS,{color:(t=e.type,{"恒常":"success","限定":"warning","コラボ":"info","イベント":"secondary"}[t]||"grey"),variant:"tonal",size:"small"},{default:j(()=>[z(R(e.type||"—"),1)]),_:2},1032,["color"])];var t}),"item.ejectionGacha":j(({item:e})=>[l("span",Vk,R(e.ejectionGacha||"—"),1)]),_:2},[J(e.accounts,e=>({name:`item.account_${e.id}_1`,fn:j(({item:t})=>[l("div",{class:s([[m(t.id,e.id,1),"account-cell"],"text-center"])},[i(Sk,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:p(t.id,e.id,0)}),null,16,Rk)]),default:j(()=>[l("span",{innerHTML:v(t.id,e.id,0)},null,8,Pk)]),_:2},1024)],2)])})),J(e.accounts,e=>({name:`item.account_${e.id}_2`,fn:j(({item:t})=>[l("div",{class:s([[m(t.id,e.id,2),"account-cell"],"text-center"])},[i(Sk,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:p(t.id,e.id,1)}),null,16,Ok)]),default:j(()=>[l("span",{innerHTML:v(t.id,e.id,1)},null,8,Mk)]),_:2},1024)],2)])}))]),1032,["items","headers","loading"])]),_:1})]),_:1})])}}},[["__scopeId","data-v-31e3a247"]]),Fk={class:"text-h6"},Bk={class:"d-flex align-center w-100"},Uk={class:"flex-grow-1 premium-text-content"},$k={class:"d-flex align-center"},jk=Yy({__name:"CharacterSelector",props:{modelValue:{type:[String,null],required:!0},items:{type:Array,required:!0},itemTitle:{type:[String,Function],default:"monsterName"},disabledItems:{type:Array,default:()=>[]},label:{type:String,default:"キャラクター名で検索"},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:"mdi-magnify"},listHeight:{type:[String,Number],default:"400px"},listCardVariant:{type:String,default:"elevated"},noDataText:{type:String,default:"該当するキャラクターがいません"},density:{type:String,default:"comfortable"},listDensity:{type:String,default:"compact"},primaryColor:{type:String,default:"primary"},searchBgColor:{type:String,default:"grey-lighten-5"},cardElevation:{type:[Number,String],default:2},cardBorder:{type:[Boolean,String],default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,a=f(""),u=f(!1),c=o(()=>{if(!a.value)return n.items;const e=a.value.toLowerCase();return n.items.filter(t=>d(t).toLowerCase().includes(e))}),d=e=>"function"==typeof n.itemTitle?n.itemTitle(e):e[n.itemTitle]||"",h=e=>n.modelValue===e.id?n.primaryColor:n.disabledItems.includes(e.id)?"grey-lighten-3":"primary-lighten-5",p=e=>"player"===e.type?"mdi-account":"monster"===e.type?"mdi-dragon":"npc"===e.type?"mdi-account-tie":"mdi-account-circle",v=e=>{const t=e.length>0?e[0]:null;n.modelValue!==t&&r("update:modelValue",t)};return(t,o)=>($(),U(_,null,[i(eI,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),label:e.label,variant:e.variant,clearable:e.clearable,"prepend-inner-icon":e.prependInnerIcon,disabled:e.disabled,"hide-details":"",class:"mb-4 character-selector-search premium-search",density:e.density,color:e.primaryColor,"bg-color":e.searchBgColor,focused:u.value,onFocus:o[1]||(o[1]=e=>u.value=!0),onBlur:o[2]||(o[2]=e=>u.value=!1)},{"prepend-inner":j(()=>[i(ob,{color:u.value?e.primaryColor:"grey",icon:e.prependInnerIcon,size:"20",class:"search-icon"},null,8,["color","icon"])]),_:1},8,["modelValue","label","variant","clearable","prepend-inner-icon","disabled","density","color","bg-color","focused"]),i(SI,{variant:e.listCardVariant,height:e.listHeight,disabled:e.disabled,class:"character-selector-card premium-card",elevation:e.cardElevation,border:e.cardBorder,style:{display:"flex","flex-direction":"column"}},{default:j(()=>[e.modelValue?($(),q(mI,{key:0,class:"d-flex align-center justify-end pa-4 pb-3 premium-card-header"},{default:j(()=>[i(qS,{size:"small",color:"success",variant:"tonal",class:"premium-chip"},{default:j(()=>o[3]||(o[3]=[z(" 選択中 ",-1)])),_:1,__:[3]})]),_:1})):Z("",!0),i(S_,{"model-value":[e.modelValue],"onUpdate:selected":v,class:"character-selector-list premium-list",density:e.listDensity,style:{"overflow-y":"auto","max-height":"calc(100% - 60px)"}},{default:j(()=>[0===c.value.length?($(),q(u_,{key:0,class:"no-data-item premium-no-data"},{default:j(()=>[i(o_,{class:"text-center text-grey-darken-1 py-12"},{default:j(()=>[i(ob,{icon:"mdi-information-outline",size:"64",class:"mb-4 no-data-icon",color:"grey-lighten-1"}),l("div",Fk,R(e.noDataText),1)]),_:1})]),_:1})):Z("",!0),($(!0),U(_,null,J(c.value,(a,u)=>($(),q(u_,{key:a.id,value:a.id,disabled:e.disabledItems.includes(a.id),class:s(["character-item premium-item",{"character-item--selected":e.modelValue===a.id,"character-item--disabled":e.disabledItems.includes(a.id)}]),onClick:e=>(e=>{n.disabledItems.includes(e.id)||r("update:modelValue",e.id)})(a)},{default:j(()=>[ee(t.$slots,"item",{item:a},()=>[l("div",Bk,[i(Nb,{size:"40",class:s(["mr-4 premium-avatar",{"selected-avatar":e.modelValue===a.id}]),color:h(a)},{default:j(()=>[i(ob,{icon:p(a),color:e.modelValue===a.id?"white":"primary",size:"20",class:"avatar-icon"},null,8,["icon","color"])]),_:2},1032,["color","class"]),l("div",Uk,[i(o_,{class:s(["font-weight-bold text-h6",{"text-primary":e.modelValue===a.id}])},{default:j(()=>[z(R(d(a)),1)]),_:2},1032,["class"]),a.subtitle?($(),q(s_,{key:0,class:"text-body-2 text-grey-darken-1 mt-1"},{default:j(()=>[z(R(a.subtitle),1)]),_:2},1024)):Z("",!0)])])],!0)]),append:j(()=>[l("div",$k,[e.disabledItems.includes(a.id)?($(),q(qS,{key:0,size:"small",color:"warning",variant:"tonal",class:"mr-3 premium-status-chip"},{default:j(()=>o[4]||(o[4]=[z(" 選択済 ",-1)])),_:1,__:[4]})):Z("",!0),e.modelValue===a.id?($(),q(ob,{key:1,icon:"mdi-check-circle",color:"success",size:"24",class:"selection-indicator premium-check"})):Z("",!0)])]),_:2},1032,["value","disabled","class","onClick"]))),128))]),_:3},8,["model-value","density"])]),_:3},8,["variant","height","disabled","elevation","border"])],64))}},[["__scopeId","data-v-a7887c2a"]]),zk=re({...ye(),...kS()},"VForm"),qk=ne()({name:"VForm",props:zk(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:r,emit:i}=t;const o=function(e){const t=ke(e,"modelValue"),r=b(()=>e.disabled),i=b(()=>e.readonly),a=n(!1),s=f([]),o=f([]);return v(s,()=>{let e=0,n=0;const r=[];for(const t of s.value)!1===t.isValid?(n++,r.push({id:t.id,errorMessages:t.errorMessages})):!0===t.isValid&&e++;o.value=r,t.value=!(n>0)&&(e===s.value.length||null)},{deep:!0,flush:"post"}),T(CS,{register:e=>{let{id:t,vm:n,validate:r,reset:i,resetValidation:a}=e;s.value.some(e=>e.id===t),s.value.push({id:t,validate:r,reset:i,resetValidation:a,vm:H(n),isValid:null,errorMessages:[]})},unregister:e=>{s.value=s.value.filter(t=>t.id!==e)},update:(e,t,n)=>{const r=s.value.find(t=>t.id===e);r&&(r.isValid=t,r.errorMessages=n)},isDisabled:r,isReadonly:i,isValidating:a,isValid:t,items:s,validateOn:b(()=>e.validateOn)}),{errors:o,isDisabled:r,isReadonly:i,isValidating:a,isValid:t,items:s,validate:async function(){const t=[];let n=!0;o.value=[],a.value=!0;for(const r of s.value){const i=await r.validate();if(i.length>0&&(n=!1,t.push({id:r.id,errorMessages:i})),!n&&e.fastFail)break}return o.value=t,a.value=!1,{valid:n,errors:o.value}},reset:function(){s.value.forEach(e=>e.reset())},resetValidation:function(){s.value.forEach(e=>e.resetValidation())}}}(e),u=f();function c(e){e.preventDefault(),o.reset()}function d(e){const t=e,n=o.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),i("submit",t),t.defaultPrevented||n.then(e=>{var t;let{valid:n}=e;n&&(null==(t=u.value)||t.submit())}),t.preventDefault()}return ve(()=>{var t;return l("form",{ref:u,class:s(["v-form",e.class]),style:a(e.style),novalidate:!0,onReset:c,onSubmit:d},[null==(t=r.default)?void 0:t.call(r,o)])}),rS(o,u)}}),Hk={class:"pa-6"},Gk={class:"d-flex align-center mb-6"},Kk={class:"mb-4"},Wk={class:"d-flex align-center mb-3"},Qk={__name:"AddOwnedCharacterTab",props:{characterMasters:{type:Array,required:!0},characterMastersMap:{type:Map,required:!0},selectedAccountId:{type:String,default:null},ownedCountMap:{type:Map,required:!0}},emits:["character-added"],setup(e,{emit:t}){const n=e,r=t,a=f(null),s=f(!1),u=o(()=>n.selectedAccountId?n.characterMasters.filter(e=>c(e.id)<2):[]);v(()=>n.selectedAccountId,()=>{a.value=null});const c=e=>n.selectedAccountId&&n.ownedCountMap.get(`${e}-${n.selectedAccountId}`)||0,d=e=>{const t=c(e.id);return`[${e.indexNumber||"?"}] ${e.monsterName} | 所持数: ${t} / 2`},h=async()=>{if(!a.value||!n.selectedAccountId)return alert("追加するキャラとアカウントを選択してください。");if(c(a.value)>=2)return alert("このキャラは既に2体所持しています。");s.value=!0;try{const e=n.characterMastersMap.get(a.value);if(!e)throw new Error("キャラのマスター情報が見つかりません。");const t={characterMasterId:a.value,monsterName:e.monsterName,items:[],createdAt:im()},i=await zy(n.selectedAccountId,t),s={...t,id:i.id,createdAt:{toDate:()=>new Date}};r("character-added",{accountId:n.selectedAccountId,newCharacter:s}),alert(`「${e.monsterName}」を所持リストに追加しました。`),a.value=null}catch(e){alert("エラー: "+e.message)}finally{s.value=!1}};return(e,t)=>($(),U("div",Hk,[l("div",Gk,[i(ob,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),t[1]||(t[1]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," 所持キャラクター追加 ",-1))]),i(qk,{onSubmit:Q(h,["prevent"])},{default:j(()=>[i(SI,{elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-account-search",class:"mr-2"}),t[2]||(t[2]=z(" キャラクター選択 ",-1))]),_:1,__:[2]}),i(wI,{class:"pa-6"},{default:j(()=>[i(WC,{class:"pa-0"},{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12"},{default:j(()=>[l("div",Kk,[l("div",Wk,[i(ob,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),t[3]||(t[3]=l("h6",{class:"text-h6 font-weight-medium"}," 追加するキャラクター ",-1))]),i(jk,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),items:u.value,"item-title":d,label:"追加するキャラクター名で検索","list-height":"400px","no-data-text":"追加できるキャラクターがいません",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),i(pI,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(wk),i(Iw,{loading:s.value,disabled:!a.value||s.value,onClick:h,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-account-plus",class:"px-8"},{default:j(()=>[z(R(s.value?"追加中...":"このキャラクターを所持リストに追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},Yk=(e,t,n,r,i,a=null)=>{if(!e)return"キャラクター情報なし";const s=n.get(e.characterMasterId),o=s?s.monsterName:"不明",l=e.accountId||a;if(!l)return`${o} (アカウント不明)`;const u=(r.get(l)||[]).filter(t=>t.characterMasterId===e.characterMasterId).findIndex(t=>t.id===e.id);let c=`${o} (${u>=0?u+1:"？"}体目)`;{const t=(e.items||[]).map(e=>i.get(Number(e))).filter(Boolean).join("、");t&&(c+=`[${t}]`)}return c},Xk=je("v-alert-title"),Jk=re({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");const Zk=["success","info","warning","error"],eE=re({border:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:be,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Zk.includes(e)},...ye(),...Ib(),...lb(),...Db(),...Jk(),...Gb(),...ew(),...hb(),...ab(),...ge(),...Tb({variant:"flat"})},"VAlert"),tE=ne()({name:"VAlert",props:eE(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const u=ke(e,"modelValue"),c=b(()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=function(e,t){return{iconSize:o(()=>{const n=new Map(e.iconSizes),r=e.iconSize??t()??"default";return n.has(r)?n.get(r):r})}}(e,()=>e.prominent?44:void 0),{themeClasses:p}=Ce(e),{colorClasses:f,colorStyles:v,variantClasses:m}=xb(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:g}=Cb(e),{dimensionStyles:y}=ub(e),{elevationClasses:w}=Vb(e),{locationStyles:_}=Kb(e),{positionClasses:S}=tw(e),{roundedClasses:I}=pb(e),{textColorClasses:C,textColorStyles:k}=eb(()=>e.borderColor),{t:E}=wt(),T=b(()=>({"aria-label":E(e.closeLabel),onClick(e){u.value=!1,n("click:close",e)}}));return()=>{const t=!(!r.prepend&&!c.value),n=!(!r.title&&!e.title),o=!(!r.close&&!e.closable),b={density:e.density,icon:c.value,size:e.iconSize||e.prominent?d.value:void 0};return u.value&&i(e.tag,{class:s(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},p.value,f.value,g.value,w.value,S.value,I.value,m.value,e.class]),style:a([v.value,y.value,_.value,e.style]),role:"alert"},{default:()=>{var u,d;return[Eb(!1,"v-alert"),e.border&&l("div",{key:"border",class:s(["v-alert__border",C.value]),style:a(k.value)},null),t&&l("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?i(Jy,{key:"prepend-defaults",disabled:!c.value,defaults:{VIcon:{...b}}},r.prepend):i(ob,h({key:"prepend-icon"},b),null)]),l("div",{class:"v-alert__content"},[n&&i(Xk,{key:"title"},{default:()=>{var t;return[(null==(t=r.title)?void 0:t.call(r))??e.title]}}),(null==(u=r.text)?void 0:u.call(r))??e.text,null==(d=r.default)?void 0:d.call(r)]),r.append&&l("div",{key:"append",class:"v-alert__append"},[r.append()]),o&&l("div",{key:"close",class:"v-alert__close"},[r.close?i(Jy,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var e;return[null==(e=r.close)?void 0:e.call(r,{props:T.value})]}}):i(Iw,h({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},T.value),null)])]}})}}}),nE={class:"pa-6"},rE={class:"d-flex align-center mb-6"},iE={class:"mb-4"},aE={class:"d-flex align-center mb-3"},sE={class:"mb-4"},oE={class:"d-flex align-center mb-3"},lE={class:"text-center mb-4"},uE={class:"text-center mb-4"},cE={key:0,class:"text-center pa-4"},dE={key:1,class:"text-center pa-4"},hE={key:2},pE={class:"mb-3"},fE={class:"text-center mb-4"},vE={class:"d-flex justify-center"},mE={__name:"ManageItemsTab",props:{selectedAccountId:{type:String,default:null},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["items-updated","items-moved"],setup(e,{emit:t}){const n=e,r=t,a=I({selectedOwnedId:null,items:[]}),s=I({from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]}),u=f(!1),c=f(!1),d=o(()=>{if(!n.selectedAccountId||!n.ownedCharactersData.has(n.selectedAccountId))return[];return(n.ownedCharactersData.get(n.selectedAccountId)||[]).map(e=>{const t=n.characterMastersMap.get(e.characterMasterId);return{...e,id:e.id,indexNumber:(null==t?void 0:t.indexNumber)||999999,monsterName:(null==t?void 0:t.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)}),h=o(()=>{if(!s.from.selectedId)return[];const e=d.value.find(e=>e.id===s.from.selectedId);return e&&e.items?e.items.map(e=>({id:Number(e),name:n.itemMastersMap.get(Number(e))||`不明(ID:${e})`})):[]});v(()=>n.selectedAccountId,()=>{Object.assign(a,{selectedOwnedId:null,items:[]}),Object.assign(s,{from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]})}),v(()=>a.selectedOwnedId,e=>{var t;if(!e)return void(a.items=[]);const n=d.value.find(t=>t.id===e);a.items=(null==(t=null==n?void 0:n.items)?void 0:t.map(Number))||[]}),v(()=>s.from.selectedId,()=>{s.selectedItemIds=[]});const p=async()=>{if(a.selectedOwnedId){if(a.items.length>3)return alert("アイテムは3つまでです。");u.value=!0;try{await qy(n.selectedAccountId,a.selectedOwnedId,a.items),r("items-updated",{accountId:n.selectedAccountId,ownedCharacterId:a.selectedOwnedId,items:a.items}),alert("アイテムを更新しました。")}catch(e){alert("エラー: "+e.message)}finally{u.value=!1}}},m=async()=>{var e;c.value=!0;try{const t=s.from.selectedId,i=s.to.selectedId,a=s.selectedItemIds;if(t===i||!t||!i)throw new Error("有効な移動元と移動先を選択してください。");if(0===a.length)throw new Error("移動するアイテムを選択してください。");const o=d.value.find(e=>e.id===t),l=d.value.find(e=>e.id===i);if(!o||!l)throw new Error("キャラクター情報が見つかりません。");if(((null==(e=l.items)?void 0:e.length)||0)+a.length>3)throw new Error("移動先のアイテム所持数が上限を超えます。");const u=(o.items||[]).map(Number).filter(e=>!a.includes(e)),c=[...(l.items||[]).map(Number),...a];await Hy(n.selectedAccountId,{id:t,items:u},{id:i,items:c}),r("items-moved",{accountId:n.selectedAccountId,from:{id:t,items:u},to:{id:i,items:c}}),alert("アイテムを移動しました。"),s.from.selectedId=null,s.to.selectedId=null,s.selectedItemIds=[]}catch(t){alert(`エラー: ${t.message}`)}finally{c.value=!1}},g=(e,t)=>Yk(e,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,n.selectedAccountId);return(t,n)=>($(),U("div",nE,[l("div",rE,[i(ob,{icon:"mdi-sword-cross",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"アイテム管理",-1))]),i(qk,null,{default:j(()=>[i(SI,{elevation:"3",rounded:"lg",class:"mb-6"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-update",class:"mr-2"}),n[6]||(n[6]=z(" 所持キャラクターのアイテムを変更 ",-1))]),_:1,__:[6]}),i(wI,{class:"pa-6"},{default:j(()=>[i(WC,null,{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12",md:"6"},{default:j(()=>[l("div",iE,[l("div",aE,[i(ob,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),n[7]||(n[7]=l("h6",{class:"text-h6 font-weight-medium"},"対象キャラクター",-1))]),i(jk,{modelValue:a.selectedOwnedId,"onUpdate:modelValue":n[0]||(n[0]=e=>a.selectedOwnedId=e),items:d.value,label:"変更対象のキャラクターを検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[i(o_,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items"])])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[l("div",sE,[l("div",oE,[i(ob,{icon:"mdi-sword-cross",color:"primary",class:"mr-2"}),n[8]||(n[8]=l("h6",{class:"text-h6 font-weight-medium"},"アイテム選択",-1))]),i(cI,{modelValue:a.items,"onUpdate:modelValue":n[1]||(n[1]=e=>a.items=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム (最大3つまで)",multiple:"",chips:"",clearable:"",variant:"outlined",disabled:!a.selectedOwnedId,color:"primary","prepend-inner-icon":"mdi-sword-cross"},null,8,["modelValue","items","disabled"]),i(Iw,{loading:u.value,disabled:!a.selectedOwnedId||u.value||a.items.length>3,onClick:p,color:"primary",block:"",size:"large",variant:"elevated","prepend-icon":"mdi-update",class:"mt-4"},{default:j(()=>[z(R(u.value?"更新中...":"アイテムを更新"),1)]),_:1},8,["loading","disabled"]),a.items.length>3?($(),q(tE,{key:0,type:"error",variant:"tonal",class:"mt-3","prepend-icon":"mdi-alert-circle"},{default:j(()=>n[9]||(n[9]=[z(" アイテムは3つまでしか選択できません。 ",-1)])),_:1,__:[9]})):Z("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(SI,{elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-secondary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-swap-horizontal",class:"mr-2"}),n[10]||(n[10]=z(" キャラクター間でアイテムを移動 ",-1))]),_:1,__:[10]}),i(wI,{class:"pa-6"},{default:j(()=>[i(WC,null,{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12",md:"4"},{default:j(()=>[l("div",lE,[i(Nb,{size:"48",color:"secondary",class:"mb-2"},{default:j(()=>[i(ob,{icon:"mdi-arrow-left",size:"24",color:"white"})]),_:1}),n[11]||(n[11]=l("h6",{class:"text-h6 font-weight-bold text-secondary"}," 移動元 ",-1))]),i(jk,{modelValue:s.from.selectedId,"onUpdate:modelValue":n[2]||(n[2]=e=>s.from.selectedId=e),items:d.value,label:"移動元キャラクターを検索","list-height":"250px","disabled-items":[s.to.selectedId].filter(Boolean),color:"secondary","prepend-inner-icon":"mdi-account-arrow-left"},{item:j(({item:e})=>[i(o_,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[l("div",uE,[i(Nb,{size:"48",color:"info",class:"mb-2"},{default:j(()=>[i(ob,{icon:"mdi-sword-cross",size:"24",color:"white"})]),_:1}),n[12]||(n[12]=l("h6",{class:"text-h6 font-weight-bold text-info"}," 移動するアイテム ",-1))]),i(SI,{elevation:"2",rounded:"lg",style:{height:"318px","overflow-y":"auto"},class:"border-info border"},{default:j(()=>[i(wI,{class:"pa-4"},{default:j(()=>[s.from.selectedId?h.value.length?($(),U("div",hE,[l("div",pE,[i(qS,{color:"info",variant:"tonal",size:"small",class:"mb-2"},{default:j(()=>[z(R(h.value.length)+"個のアイテム ",1)]),_:1})]),($(!0),U(_,null,J(h.value,e=>($(),q(RS,{key:e.id,modelValue:s.selectedItemIds,"onUpdate:modelValue":n[3]||(n[3]=e=>s.selectedItemIds=e),label:e.name,value:e.id,density:"compact","hide-details":"",color:"info",class:"mb-2"},null,8,["modelValue","label","value"]))),128))])):($(),U("div",dE,[i(ob,{icon:"mdi-inbox-outline",size:"48",color:"grey-lighten-1"}),n[14]||(n[14]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動できるアイテムがありません。 ",-1))])):($(),U("div",cE,[i(ob,{icon:"mdi-information",size:"48",color:"grey-lighten-1"}),n[13]||(n[13]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動元キャラクターを選択してください。 ",-1))]))]),_:1})]),_:1})]),_:1}),i(nk,{cols:"12",md:"4"},{default:j(()=>[l("div",fE,[i(Nb,{size:"48",color:"success",class:"mb-2"},{default:j(()=>[i(ob,{icon:"mdi-arrow-right",size:"24",color:"white"})]),_:1}),n[15]||(n[15]=l("h6",{class:"text-h6 font-weight-bold text-success"},"移動先",-1))]),i(jk,{modelValue:s.to.selectedId,"onUpdate:modelValue":n[4]||(n[4]=e=>s.to.selectedId=e),items:d.value,label:"移動先キャラクターを検索","list-height":"250px","disabled-items":[s.from.selectedId].filter(Boolean),color:"success","prepend-inner-icon":"mdi-account-arrow-right"},{item:j(({item:e})=>[i(o_,null,{default:j(()=>[z(R(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1})]),_:1}),i(bk,{class:"mt-6"},{default:j(()=>[i(nk,null,{default:j(()=>[l("div",vE,[i(Iw,{loading:c.value,disabled:!s.from.selectedId||!s.to.selectedId||0===s.selectedItemIds.length||c.value,onClick:m,color:"success",size:"large",variant:"elevated","prepend-icon":"mdi-swap-horizontal",class:"px-8"},{default:j(()=>[z(R(c.value?"移動中...":"選択したアイテムを移動"),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},gE={class:"team-list-container",style:{height:"65vh","overflow-y":"auto"}},yE={key:0,class:"text-center pa-8"},bE={key:1,class:"text-center pa-8"},wE=["onClick"],_E={class:"d-flex align-center justify-space-between mb-3"},SE={class:"flex-grow-1"},IE={class:"text-h6 font-weight-bold text-primary mb-1"},CE=["title"],kE=["title"],EE=["title"],TE={__name:"TeamList",props:{dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},selectedTeamId:{type:String,default:null}},emits:["select-team","delete-team"],setup(e,{emit:t}){const n=e,r=t,a=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],u=I({type:""}),c=o(()=>u.type?n.teams.filter(e=>e.type===u.type):n.teams),d=(e,t)=>{if(!e.characters||!n.dataLoaded||t>=e.characters.length)return{characterName:"—",accountName:"—",items:[]};const r=e.characters[t],i=n.accounts.find(e=>e.id===r.accountId),a=(n.ownedCharactersData.get(r.accountId)||[]).find(e=>e.id===r.ownedCharacterId);if(!a)return{characterName:"キャラ不明",accountName:(null==i?void 0:i.name)||"不明",items:[]};const s=n.characterMastersMap.get(a.characterMasterId);return{characterName:(null==s?void 0:s.monsterName)||"不明",accountName:(null==i?void 0:i.name)||"不明",items:(a.items||[]).map(e=>n.itemMastersMap.get(Number(e))||`不明ID:${e}`).filter(Boolean)}};return(t,n)=>($(),q(SI,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-format-list-bulleted",class:"mr-2"}),n[1]||(n[1]=z(" 編成一覧 ",-1))]),_:1,__:[1]}),i(wI,{class:"pa-4"},{default:j(()=>[i(cI,{modelValue:u.type,"onUpdate:modelValue":n[0]||(n[0]=e=>u.type=e),items:["",...a],label:"タイプで絞り込み",variant:"outlined",clearable:"",density:"compact","prepend-inner-icon":"mdi-filter",class:"mb-4",color:"primary"},null,8,["modelValue","items"]),l("div",gE,[e.dataLoaded?0===c.value.length?($(),U("div",bE,[i(ob,{icon:"mdi-inbox-outline",size:"64",color:"grey-lighten-1"}),n[3]||(n[3]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," 該当する編成がありません ",-1))])):Z("",!0):($(),U("div",yE,[i(qb,{indeterminate:"",color:"primary",size:"48"}),n[2]||(n[2]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))])),($(!0),U(_,null,J(c.value,t=>{return $(),U("div",{key:t.id,onClick:e=>(e=>{r("select-team",e)})(t),class:s(["team-item mb-3 pa-4 rounded-lg cursor-pointer transition-all",e.selectedTeamId===t.id?"bg-primary-lighten-5 border-primary border-2":"bg-grey-lighten-5 border-grey-lighten-3 border"]),style:{"min-height":"120px"}},[l("div",_E,[l("div",SE,[l("h3",IE,R(t.name),1),i(qS,{color:(n=t.type,{"禁忌":"deep-purple","天魔(試練)":"red-darken-2","天魔(庭園)":"green-darken-2","星墓":"blue-darken-2","轟絶":"orange-darken-2","黎絶":"blue-darken-2"}[n]||"grey"),size:"small",variant:"tonal",class:"font-weight-medium"},{default:j(()=>[z(R(t.type),1)]),_:2},1032,["color"])]),i(Iw,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:Q(e=>{return n=t.id,void r("delete-team",n);var n},["stop"]),class:"ml-2"},null,8,["onClick"])]),i(bk,{dense:""},{default:j(()=>[($(!0),U(_,null,J(Array(4),(e,n)=>($(),q(nk,{key:n,cols:"3"},{default:j(()=>[l("div",{class:s(["character-slot pa-2 rounded text-center","—"!==d(t,n).characterName?"bg-white":"bg-grey-lighten-4"])},[l("div",{class:"text-caption font-weight-bold text-truncate mb-1",title:d(t,n).characterName},R(d(t,n).characterName),9,CE),l("div",{class:"text-caption text-truncate mb-1",title:d(t,n).accountName},R(d(t,n).accountName),9,kE),i(kw,{class:"my-1"}),($(),U(_,null,J(4,e=>l("div",{key:e,class:"text-caption text-truncate",title:d(t,n).items[e-1]},R(d(t,n).items[e-1]||"—"),9,EE)),64))],2)]),_:2},1024))),128))]),_:2},1024)],10,wE);var n}),128))])]),_:1})]),_:1}))}},xE={class:"character-formation-section"},AE={class:"d-flex align-center mb-4"},NE={class:"d-flex align-center mb-4"},DE={class:"text-white font-weight-bold"},VE={class:"text-h6 font-weight-bold"},RE={key:1,class:"pa-8 text-center"},PE={__name:"TeamForm",props:{team:{type:Object,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},isSaving:{type:Boolean,default:!1}},emits:["save-team","reset-form","update:team"],setup(e,{emit:t}){const n=e,r=t,a=(e,t)=>{const i=JSON.parse(JSON.stringify(n.team));i[e]=t,r("update:team",i)},u=(e,t,i)=>{const a={...n.team,slots:n.team.slots.map((n,r)=>r===e?{...n,[t]:i}:n)};"selectedAccountId"===t&&(a.slots[e].selectedOwnedId=null),r("update:team",a)},c=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],d=o(()=>n.team.name&&n.team.type&&n.team.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)),h=e=>{if(!e.selectedAccountId)return[];return(n.ownedCharactersData.get(e.selectedAccountId)||[]).map(t=>{const r=n.characterMastersMap.get(t.characterMasterId);return{...t,accountId:e.selectedAccountId,indexNumber:(null==r?void 0:r.indexNumber)||999999,monsterName:(null==r?void 0:r.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)};return(t,r)=>($(),q(SI,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-account-edit",class:"mr-2"}),z(" "+R(e.team.id?"編成編集":"新規編成作成"),1)]),_:1}),i(vI,{class:"pa-4 bg-grey-lighten-5"},{default:j(()=>[i(Iw,{onClick:r[0]||(r[0]=e=>t.$emit("reset-form")),size:"small",variant:"tonal",color:"primary","prepend-icon":"mdi-plus"},{default:j(()=>r[4]||(r[4]=[z(" 新規作成フォームを開く ",-1)])),_:1,__:[4]})]),_:1}),e.accounts.length>0&&e.ownedCharactersData.size>0&&e.characterMastersMap.size>0?($(),U(_,{key:0},[i(wI,{class:"pa-6"},{default:j(()=>[i(eI,{"model-value":e.team.name,"onUpdate:modelValue":r[1]||(r[1]=e=>a("name",e)),label:"編成名",variant:"outlined",placeholder:"例: 天魔の孤城 第1の間",class:"mb-6",color:"primary","prepend-inner-icon":"mdi-format-title"},null,8,["model-value"]),i(cI,{"model-value":e.team.type,"onUpdate:modelValue":r[2]||(r[2]=e=>a("type",e)),items:c,label:"タイプ",variant:"outlined",class:"mb-8",color:"primary","prepend-inner-icon":"mdi-tag"},null,8,["model-value"]),l("div",xE,[l("div",AE,[i(ob,{icon:"mdi-account-multiple",color:"primary",class:"mr-2"}),r[5]||(r[5]=l("h4",{class:"text-h5 font-weight-bold text-primary"}," キャラクター編成 (4体) ",-1))]),i(bk,null,{default:j(()=>[($(!0),U(_,null,J(e.team.slots,(t,r)=>($(),q(nk,{key:r,cols:"12",md:"6"},{default:j(()=>[i(SI,{elevation:"2",class:s(["pa-4 h-100 character-slot-card",t.selectedAccountId?"border-primary border-2":"border-grey-lighten-3 border"]),rounded:"lg",style:{"min-height":"400px"}},{default:j(()=>{return[l("div",NE,[i(Nb,{size:"32",color:"primary",class:"mr-3"},{default:j(()=>[l("span",DE,R(r+1),1)]),_:2},1024),l("h5",VE," スロット "+R(r+1),1)]),i(cI,{"model-value":t.selectedAccountId,"onUpdate:modelValue":e=>u(r,"selectedAccountId",e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",class:"mb-3",color:"primary","prepend-inner-icon":"mdi-account"},null,8,["model-value","onUpdate:modelValue","items"]),i(jk,{"model-value":t.selectedOwnedId,"onUpdate:modelValue":e=>((e,t)=>{u(e,"selectedOwnedId",t)})(r,e),items:h(t),label:"キャラクターを選択","list-height":"280px",variant:"filled",disabled:!t.selectedAccountId,"disabled-items":(a=r,n.team.slots.filter((e,t)=>t!==a&&e.selectedOwnedId).map(e=>e.selectedOwnedId)),"no-data-text":"先にアカウントを選択",density:"comfortable","list-density":"comfortable","primary-color":"primary","search-bg-color":"grey-lighten-5","card-elevation":2,"prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[i(o_,null,{default:j(()=>{return[z(R((t=e,Yk(t,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,t.accountId))),1)];var t}),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue","items","disabled","disabled-items"])];var a}),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})])]),_:1}),i(pI,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(wk),i(Iw,{loading:e.isSaving,disabled:!d.value||e.isSaving,onClick:r[3]||(r[3]=e=>t.$emit("save-team")),color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(e.isSaving?"保存中...":e.team.id?"編成を更新":"編成を保存"),1)]),_:1},8,["loading","disabled"])]),_:1})],64)):($(),U("div",RE,[i(qb,{indeterminate:"",color:"primary",size:"48"}),r[6]||(r[6]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))]))]),_:1}))}},OE={class:"pa-6"},ME={class:"d-flex align-center mb-6"},LE=Yy({__name:"ManageTeamsTab",props:{userId:{type:String,required:!0},dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["team-added","team-updated","team-deleted"],setup(e,{emit:t}){const n=e,r=t,a=f(!1),s=()=>({id:null,name:"",type:"",slots:Array(4).fill().map(()=>({selectedAccountId:"",selectedOwnedId:"",characterSearch:""}))}),o=I(s()),u=e=>{Object.assign(o,e)},c=e=>{Object.assign(o,{id:e.id,name:e.name,type:e.type,slots:JSON.parse(JSON.stringify(e.characters.map(e=>({selectedAccountId:e.accountId,selectedOwnedId:e.ownedCharacterId,characterSearch:""}))))})},d=()=>{Object.assign(o,s())},h=async()=>{if(!(o.name&&o.type&&o.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)))return void alert("編成名、タイプ、4体のキャラを全て選択してください。");a.value=!0;const e={userId:n.userId,name:o.name,type:o.type,characters:o.slots.map(e=>({accountId:e.selectedAccountId,ownedCharacterId:e.selectedOwnedId}))};try{const t=o.id;Object.assign(e,t?{updatedAt:im()}:{createdAt:im()});const n=await Wy(t,e);if(t)r("team-updated",{...e,id:t}),alert("編成を更新しました。");else{const t={...e,id:n.id,createdAt:{toDate:()=>new Date}};r("team-added",t),alert("編成を保存しました。"),d()}}catch(t){alert("エラー: "+t.message)}finally{a.value=!1}},p=async e=>{if(confirm("この編成を本当に削除しますか？"))try{await Qy(e),r("team-deleted",e),alert("編成を削除しました。"),o.id===e&&d()}catch(t){alert("エラー: "+t.message)}};return(t,n)=>($(),U("div",OE,[l("div",ME,[i(ob,{icon:"mdi-account-group",size:"32",color:"primary",class:"mr-3"}),n[0]||(n[0]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"編成管理",-1))]),i(bk,null,{default:j(()=>[i(nk,{cols:"12",lg:"5"},{default:j(()=>[i(TE,{"data-loaded":e.dataLoaded,teams:e.teams,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"selected-team-id":o.id,onSelectTeam:c,onDeleteTeam:p},null,8,["data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map","selected-team-id"])]),_:1}),i(nk,{cols:"12",lg:"7"},{default:j(()=>[i(PE,{team:o,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"is-saving":a.value,onSaveTeam:h,onResetForm:d,"onUpdate:team":u},null,8,["team","accounts","owned-characters-data","character-masters-map","item-masters-map","is-saving"])]),_:1})]),_:1})]))}},[["__scopeId","data-v-42576069"]]),FE={class:"pa-6"},BE={class:"d-flex align-center mb-6"},UE={__name:"AddMasterCharacterTab",props:{gachaMasters:{type:Array,required:!0}},emits:["master-added"],setup(e,{emit:t}){const n=t,r=I({no:"",name:"",element:"",type:"恒常",gacha:""}),a=f(!1),s=async()=>{if(!r.name)return alert("キャラクター名は必須です。");a.value=!0;try{const e={indexNumber:r.no?Number(r.no):0,monsterName:r.name,element:r.element||"",type:r.type||"恒常",ejectionGacha:r.gacha||""};await Gy(e),alert("マスターを追加しました。ページをリロードして反映してください。"),n("master-added")}catch(e){alert("エラー: "+e.message)}finally{a.value=!1}};return(t,n)=>($(),U("div",FE,[l("div",BE,[i(ob,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター新規追加 ",-1))]),i(qk,{onSubmit:Q(s,["prevent"])},{default:j(()=>[i(SI,{elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-account-plus",class:"mr-2"}),n[6]||(n[6]=z(" 新規キャラクター情報 ",-1))]),_:1,__:[6]}),i(wI,{class:"pa-6"},{default:j(()=>[i(WC,null,{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12",md:"6"},{default:j(()=>[i(eI,{modelValue:r.no,"onUpdate:modelValue":n[0]||(n[0]=e=>r.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",placeholder:"例: 1234",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(eI,{modelValue:r.name,"onUpdate:modelValue":n[1]||(n[1]=e=>r.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:r.element,"onUpdate:modelValue":n[2]||(n[2]=e=>r.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:r.type,"onUpdate:modelValue":n[3]||(n[3]=e=>r.type=e),items:["恒常","限定","コラボ","α"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12"},{default:j(()=>[i(cI,{modelValue:r.gacha,"onUpdate:modelValue":n[4]||(n[4]=e=>r.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),i(pI,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(wk),i(Iw,{loading:a.value,disabled:!r.name||a.value,onClick:s,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(a.value?"追加中...":"マスターリストに新規追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},$E={class:"pa-6"},jE={class:"d-flex align-center mb-6"},zE={__name:"EditMasterCharacterTab",props:{characterMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0}},emits:["master-updated"],setup(e,{emit:t}){const n=e,r=t,a=I({search:"",selectedMasterId:null,no:"",name:"",element:"",type:"",gacha:""}),s=f(!1),u=o(()=>new Map(n.characterMasters.map(e=>[e.id,e])));v(()=>a.selectedMasterId,e=>{if(!e)return void Object.assign(a,{name:"",no:"",element:"",type:"",gacha:""});const t=u.value.get(e);t&&Object.assign(a,{name:t.monsterName,no:t.indexNumber,element:t.element,type:t.type,gacha:t.ejectionGacha})});const c=async()=>{if(!a.selectedMasterId||!a.name)return alert("キャラを選択し名前を入力してください。");s.value=!0;try{const e={monsterName:a.name,indexNumber:a.no?Number(a.no):0,element:a.element,type:a.type,ejectionGacha:a.gacha};await Ky(a.selectedMasterId,e),alert("マスター情報を更新しました。ページをリロードしてください。"),r("master-updated")}catch(e){alert("更新に失敗: "+e.message)}finally{s.value=!1}};return(t,r)=>($(),U("div",$E,[l("div",jE,[i(ob,{icon:"mdi-account-edit",size:"32",color:"primary",class:"mr-3"}),r[6]||(r[6]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター編集 ",-1))]),i(qk,null,{default:j(()=>[i(WC,{class:"pa-0"},{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12"},{default:j(()=>[i(SI,{elevation:"2",rounded:"lg",class:"mb-4"},{default:j(()=>[i(mI,{class:"bg-primary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-account-search",class:"mr-2"}),r[7]||(r[7]=z(" 編集対象キャラクター選択 ",-1))]),_:1,__:[7]}),i(wI,{class:"pa-4"},{default:j(()=>[i(jk,{modelValue:a.selectedMasterId,"onUpdate:modelValue":r[0]||(r[0]=e=>a.selectedMasterId=e),items:n.characterMasters,"item-title":e=>`[${e.indexNumber||"?"}] ${e.monsterName}`,label:"編集したいキャラクター名で検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items","item-title"])]),_:1})]),_:1})]),_:1})]),_:1}),a.selectedMasterId?($(),q(bk,{key:0,class:"mt-4"},{default:j(()=>[i(nk,{cols:"12"},{default:j(()=>[i(SI,{elevation:"3",rounded:"lg"},{default:j(()=>[i(mI,{class:"bg-secondary text-white pa-4"},{default:j(()=>[i(ob,{icon:"mdi-account-edit",class:"mr-2"}),r[8]||(r[8]=z(" 編集フォーム ",-1))]),_:1,__:[8]}),i(wI,{class:"pa-6"},{default:j(()=>[i(WC,null,{default:j(()=>[i(bk,null,{default:j(()=>[i(nk,{cols:"12",md:"6"},{default:j(()=>[i(eI,{modelValue:a.no,"onUpdate:modelValue":r[1]||(r[1]=e=>a.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(eI,{modelValue:a.name,"onUpdate:modelValue":r[2]||(r[2]=e=>a.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:a.element,"onUpdate:modelValue":r[3]||(r[3]=e=>a.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12",md:"6"},{default:j(()=>[i(cI,{modelValue:a.type,"onUpdate:modelValue":r[4]||(r[4]=e=>a.type=e),items:["恒常","限定","コラボ","イベント"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),i(nk,{cols:"12"},{default:j(()=>[i(cI,{modelValue:a.gacha,"onUpdate:modelValue":r[5]||(r[5]=e=>a.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),i(pI,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[i(wk),i(Iw,{loading:s.value,disabled:!a.selectedMasterId||s.value,onClick:c,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(R(s.value?"更新中...":"マスター情報を更新"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1})]))}},qE=re({...ye(),...We(Mt(),["fullHeight"]),...ge()},"VApp"),HE=ne()({name:"VApp",props:qE(),setup(e,t){let{slots:n}=t;const r=Ce(e),{layoutClasses:i,getLayoutItem:o,items:u,layoutRef:c}=Lt({...e,fullHeight:!0}),{rtlClasses:d}=De();return ve(()=>{var t;return l("div",{ref:c,class:s(["v-application",r.themeClasses.value,i.value,d.value,e.class]),style:a([e.style])},[l("div",{class:"v-application__wrap"},[null==(t=n.default)?void 0:t.call(n)])])}),{getLayoutItem:o,items:u,theme:r}}}),GE=re({text:String,...ye(),...ab()},"VToolbarTitle"),KE=ne()({name:"VToolbarTitle",props:GE(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=!!(n.default||n.text||e.text);return i(e.tag,{class:s(["v-toolbar-title",e.class]),style:a(e.style)},{default:()=>{var r;return[t&&l("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,null==(r=n.default)?void 0:r.call(n)])]}})}),{}}}),WE=[null,"prominent","default","comfortable","compact"],QE=re({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>WE.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...wb(),...ye(),...Db(),...hb(),...ab({tag:"header"}),...ge()},"VToolbar"),YE=ne()({name:"VToolbar",props:QE(),setup(e,t){var r;let{slots:u}=t;const{backgroundColorClasses:c,backgroundColorStyles:d}=tb(()=>e.color),{borderClasses:h}=_b(e),{elevationClasses:p}=Vb(e),{roundedClasses:f}=pb(e),{themeClasses:v}=Ce(e),{rtlClasses:m}=De(),g=n(null===e.extended?!!(null==(r=u.extension)?void 0:r.call(u)):e.extended),y=o(()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10)),b=o(()=>g.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0);return ie({VBtn:{variant:"text"}}),ve(()=>{var t;const n=!(!e.title&&!u.title),r=!(!u.image&&!e.image),o=null==(t=u.extension)?void 0:t.call(u);return g.value=null===e.extended?!!o:e.extended,i(e.tag,{class:s(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},c.value,h.value,p.value,f.value,v.value,m.value,e.class]),style:a([d.value,e.style])},{default:()=>[r&&l("div",{key:"image",class:"v-toolbar__image"},[u.image?i(Jy,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},u.image):i(bb,{key:"image-img",cover:!0,src:e.image},null)]),i(Jy,{defaults:{VTabs:{height:he(y.value)}}},{default:()=>{var t,r,a;return[l("div",{class:"v-toolbar__content",style:{height:he(y.value)}},[u.prepend&&l("div",{class:"v-toolbar__prepend"},[null==(t=u.prepend)?void 0:t.call(u)]),n&&i(KE,{key:"title",text:e.title},{text:u.title}),null==(r=u.default)?void 0:r.call(u),u.append&&l("div",{class:"v-toolbar__append"},[null==(a=u.append)?void 0:a.call(u)])])]}}),i(Jy,{defaults:{VTabs:{height:he(b.value)}}},{default:()=>[i(Lw,null,{default:()=>[g.value&&l("div",{class:"v-toolbar__extension",style:{height:he(b.value)}},[o])]})]})]})}),{contentHeight:y,extensionHeight:b}}}),XE=re({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");const JE=re({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...QE(),...Bt(),...XE(),height:{type:[Number,String],default:64}},"VAppBar"),ZE=ne()({name:"VAppBar",props:JE(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const a=f(),s=ke(e,"modelValue"),l=o(()=>{var t;const n=new Set((null==(t=e.scrollBehavior)?void 0:t.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),u=o(()=>{const e=l.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!s.value}),{currentScroll:c,scrollThreshold:d,isScrollingUp:p,scrollRatio:m}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:r}=t;let i=0,a=0;const s=f(null),l=n(0),u=n(0),c=n(0),d=n(!1),h=n(!1),p=o(()=>Number(e.scrollThreshold)),m=o(()=>Ne((p.value-l.value)/p.value||0)),g=()=>{const e=s.value;if(!e||r&&!r.value)return;i=l.value,l.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;a===t?(h.value=l.value<i,c.value=Math.abs(l.value-p.value)):a=t};return v(h,()=>{u.value=u.value||l.value}),v(d,()=>{u.value=0}),C(()=>{v(()=>e.scrollTarget,e=>{var t;const n=e?document.querySelector(e):window;n&&n!==s.value&&(null==(t=s.value)||t.removeEventListener("scroll",g),s.value=n,s.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),y(()=>{var e;null==(e=s.value)||e.removeEventListener("scroll",g)}),r&&v(r,g,{immediate:!0}),{scrollThreshold:p,currentScroll:l,currentThreshold:c,isScrollActive:d,scrollRatio:m,isScrollingUp:h,savedScroll:u}}(e,{canScroll:u}),g=b(()=>l.value.hide||l.value.fullyHide),w=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?m.value>0:0===m.value)),_=o(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?c.value>0:0===c.value)),S=o(()=>l.value.fadeImage?l.value.inverted?1-m.value:m.value:void 0),I=o(()=>{var e,t;if(l.value.hide&&l.value.inverted)return 0;const n=(null==(e=a.value)?void 0:e.contentHeight)??0,r=(null==(t=a.value)?void 0:t.extensionHeight)??0;return g.value?c.value<d.value||l.value.fullyHide?n+r:n:n+r});Ye(()=>!!e.scrollBehavior,()=>{D(()=>{g.value?l.value.inverted?s.value=c.value>d.value:s.value=p.value||c.value<d.value:s.value=!0})});const{ssrBootStyles:k}=t_(),{layoutItemStyles:E}=Ft({id:e.name,order:o(()=>parseInt(e.order,10)),position:b(()=>e.location),layoutSize:I,elementSize:n(void 0),active:s,absolute:b(()=>e.absolute)});return ve(()=>{const t=YE.filterProps(e);return i(YE,h({ref:a,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...E.value,"--v-toolbar-image-opacity":S.value,height:void 0,...k.value},e.style]},t,{collapse:w.value,flat:_.value}),r)}),{}}}),eT=re({scrollable:Boolean,...ye(),...lb(),...ab({tag:"main"})},"VMain"),tT=ne()({name:"VMain",props:eT(),setup(e,t){let{slots:n}=t;const{dimensionStyles:r}=ub(e),{mainStyles:o}=Ut(),{ssrBootStyles:u}=t_();return ve(()=>i(e.tag,{class:s(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:a([o.value,u.value,r.value,e.style])},{default:()=>{var t,r;return[e.scrollable?l("div",{class:"v-main__scroller"},[null==(t=n.default)?void 0:t.call(n)]):null==(r=n.default)?void 0:r.call(n)]}})),{}}}),nT=Symbol.for("vuetify:v-tabs"),rT=re({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...We(Sw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),iT=ne()({name:"VTab",props:rT(),setup(e,t){let{slots:n,attrs:r}=t;const{textColorClasses:u,textColorStyles:c}=eb(()=>e.sliderColor),d=f(),p=f(),v=o(()=>"horizontal"===e.direction),m=o(()=>{var e,t;return(null==(t=null==(e=d.value)?void 0:e.group)?void 0:t.isSelected.value)??!1});function g(e){var t,n;let{value:r}=e;if(r){const e=null==(n=null==(t=d.value)?void 0:t.$el.parentElement)?void 0:n.querySelector(".v-tab--selected .v-tab__slider"),r=p.value;if(!e||!r)return;const i=getComputedStyle(e).color,a=e.getBoundingClientRect(),s=r.getBoundingClientRect(),o=v.value?"x":"y",l=v.value?"X":"Y",u=v.value?"right":"bottom",c=v.value?"width":"height",h=a[o]>s[o]?a[u]-s[u]:a[o]-s[o],f=Math.sign(h)>0?v.value?"right":"bottom":Math.sign(h)<0?v.value?"left":"top":"center",m=(Math.abs(h)+(Math.sign(h)<0?a[c]:s[c]))/Math.max(a[c],s[c])||0,g=a[c]/s[c]||0,y=1.5;Oe(r,{backgroundColor:[i,"currentcolor"],transform:[`translate${l}(${h}px) scale${l}(${g})`,`translate${l}(${h/y}px) scale${l}(${(m-1)/y+1})`,"none"],transformOrigin:Array(3).fill(f)},{duration:225,easing:Le})}}return ve(()=>{const t=Iw.filterProps(e);return i(Iw,h({symbol:nT,ref:d,class:["v-tab",e.class],style:e.style,tabindex:m.value?0:-1,role:"tab","aria-selected":String(m.value),active:!1},t,r,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":g}),{...n,default:()=>{var t;return l(_,null,[(null==(t=n.default)?void 0:t.call(n))??e.text,!e.hideSlider&&l("div",{ref:p,class:s(["v-tab__slider",u.value]),style:a(c.value)},null)])}})}),rS({},d)}});function aT(e,t){var n;const r=e.changedTouches[0];t.touchendX=r.clientX,t.touchendY=r.clientY,null==(n=t.end)||n.call(t,{originalEvent:e,...t}),(e=>{const{touchstartX:t,touchendX:n,touchstartY:r,touchendY:i}=e;e.offsetX=n-t,e.offsetY=i-r,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&i<r-16&&e.up(e),e.down&&i>r+16&&e.down(e))})(t)}const sT={mounted:function(e,t){var n;const r=t.value,i=(null==r?void 0:r.parent)?e.parentElement:e,a=(null==r?void 0:r.options)??{passive:!0},s=null==(n=t.instance)?void 0:n.$.uid;if(!i||!s)return;const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>function(e,t){var n;const r=e.changedTouches[0];t.touchstartX=r.clientX,t.touchstartY=r.clientY,null==(n=t.start)||n.call(t,{originalEvent:e,...t})}(e,t),touchend:e=>aT(e,t),touchmove:e=>function(e,t){var n;const r=e.changedTouches[0];t.touchmoveX=r.clientX,t.touchmoveY=r.clientY,null==(n=t.move)||n.call(t,{originalEvent:e,...t})}(e,t)}}(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[s]=o,$t(o).forEach(e=>{i.addEventListener(e,o[e],a)})},unmounted:function(e,t){var n,r;const i=(null==(n=t.value)?void 0:n.parent)?e.parentElement:e,a=null==(r=t.instance)?void 0:r.$.uid;if(!(null==i?void 0:i._touchHandlers)||!a)return;const s=i._touchHandlers[a];$t(s).forEach(e=>{i.removeEventListener(e,s[e])}),delete i._touchHandlers[a]}},oT=Symbol.for("vuetify:v-window"),lT=Symbol.for("vuetify:v-window-group"),uT=re({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||"hover"===e},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ye(),...ab(),...ge()},"VWindow"),cT=ne()({name:"VWindow",directives:{vTouch:sT},props:uT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{themeClasses:u}=Ce(e),{isRtl:c}=De(),{t:d}=wt(),h=Fb(e,lT),p=f(),m=o(()=>c.value?!e.reverse:e.reverse),g=n(!1),y=o(()=>`v-window-${"vertical"===e.direction?"y":"x"}${(m.value?!g.value:g.value)?"-reverse":""}-transition`),_=n(0),S=f(void 0),I=o(()=>h.items.value.findIndex(e=>h.selected.value.includes(e.id)));v(I,(e,t)=>{const n=h.items.value.length,r=n-1;g.value=n<=2?e<t:e===r&&0===t||(0!==e||t!==r)&&e<t}),T(oT,{transition:y,isReversed:g,transitionCount:_,transitionHeight:S,rootRef:p});const C=b(()=>e.continuous||0!==I.value),k=b(()=>e.continuous||I.value!==h.items.value.length-1);function E(){C.value&&h.prev()}function x(){k.value&&h.next()}const A=o(()=>{const t=[],n={icon:c.value?e.nextIcon:e.prevIcon,class:"v-window__"+(m.value?"right":"left"),onClick:h.prev,"aria-label":d("$vuetify.carousel.prev")};t.push(C.value?r.prev?r.prev({props:n}):i(Iw,n,null):l("div",null,null));const a={icon:c.value?e.prevIcon:e.nextIcon,class:"v-window__"+(m.value?"left":"right"),onClick:h.next,"aria-label":d("$vuetify.carousel.next")};return t.push(k.value?r.next?r.next({props:a}):i(Iw,a,null):l("div",null,null)),t}),N=o(()=>{if(!1===e.touch)return e.touch;return{...{left:()=>{m.value?E():x()},right:()=>{m.value?x():E()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}},...!0===e.touch?{}:e.touch}});return ve(()=>w(i(e.tag,{ref:p,class:s(["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows,"v-window--vertical-arrows":!!e.verticalArrows},u.value,e.class]),style:a(e.style)},{default:()=>{var t,n;return[l("div",{class:"v-window__container",style:{height:S.value}},[null==(t=r.default)?void 0:t.call(r,{group:h}),!1!==e.showArrows&&l("div",{class:s(["v-window__controls",{"v-window__controls--left":"left"===e.verticalArrows||!0===e.verticalArrows},{"v-window__controls--right":"right"===e.verticalArrows}])},[A.value])]),null==(n=r.additional)?void 0:n.call(r,{group:h})]}}),[[sT,N.value]])),{group:h}}}),dT=re({...We(uT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),hT=ne()({name:"VTabsWindow",props:dT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=x(nT,null),a=ke(e,"modelValue"),s=o({get(){var e;return null==a.value&&r?null==(e=r.items.value.find(e=>r.selected.value.includes(e.id)))?void 0:e.value:a.value},set(e){a.value=e}});return ve(()=>{const t=cT.filterProps(e);return i(cT,h({_as:"VTabsWindow"},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),pT=re({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ye(),...Mb(),...j_()},"VWindowItem"),fT=ne()({name:"VWindowItem",directives:{vTouch:sT},props:pT(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:r}=t;const u=x(oT),c=Lb(e,lT),{isBooted:d}=t_();if(!u||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=n(!1),p=o(()=>d.value&&(u.isReversed.value?!1!==e.reverseTransition:!1!==e.transition));function f(){h.value&&u&&(h.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,0===u.transitionCount.value&&(u.transitionHeight.value=void 0)))}function v(){var e;!h.value&&u&&(h.value=!0,0===u.transitionCount.value&&(u.transitionHeight.value=he(null==(e=u.rootRef.value)?void 0:e.clientHeight)),u.transitionCount.value+=1)}function m(){f()}function y(e){h.value&&g(()=>{p.value&&h.value&&u&&(u.transitionHeight.value=he(e.clientHeight))})}const b=o(()=>{const t=u.isReversed.value?e.reverseTransition:e.transition;return!!p.value&&{name:"string"!=typeof t?u.transition.value:t,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:m,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:m,onEnter:y}}),{hasContent:_}=z_(e,c.isSelected);return ve(()=>i(vb,{transition:b.value,disabled:!d.value},{default:()=>{var t;return[w(l("div",{class:s(["v-window-item",c.selectedClass.value,e.class]),style:a(e.style)},[_.value&&(null==(t=r.default)?void 0:t.call(r))]),[[S,c.isSelected.value]])]}})),{groupItem:c}}}),vT=re({...pT()},"VTabsWindowItem"),mT=ne()({name:"VTabsWindowItem",props:vT(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=fT.filterProps(e);return i(fT,h({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});const gT=re({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...BS({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ib(),...ab()},"VTabs"),yT=ne()({name:"VTabs",props:gT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const a=ke(e,"modelValue"),s=o(()=>function(e){return e?e.map(e=>we(e)?e:{text:e,value:e}):[]}(e.items)),{densityClasses:u}=Cb(e),{backgroundColorClasses:c,backgroundColorStyles:d}=tb(()=>e.bgColor),{scopeId:p}=q_();return ie({VTab:{color:b(()=>e.color),direction:b(()=>e.direction),stacked:b(()=>e.stacked),fixed:b(()=>e.fixedTabs),sliderColor:b(()=>e.sliderColor),hideSlider:b(()=>e.hideSlider)}}),ve(()=>{const t=US.filterProps(e),o=!!(r.window||e.items.length>0);return l(_,null,[i(US,h(t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,c.value,e.class],style:[{"--v-tabs-height":he(e.height)},d.value,e.style],role:"tablist",symbol:nT},p,n),{default:()=>{var e;return[(null==(e=r.default)?void 0:e.call(r))??s.value.map(e=>{var t;return(null==(t=r.tab)?void 0:t.call(r,{item:e}))??i(iT,h(e,{key:e.text,value:e.value}),{default:r[`tab.${e.value}`]?()=>{var t;return null==(t=r[`tab.${e.value}`])?void 0:t.call(r,{item:e})}:void 0})})]}}),o&&i(hT,h({modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,key:"tabs-window"},p),{default:()=>{var e;return[s.value.map(e=>{var t;return(null==(t=r.item)?void 0:t.call(r,{item:e}))??i(mT,{value:e.value},{default:()=>{var t;return null==(t=r[`item.${e.value}`])?void 0:t.call(r,{item:e})}})}),null==(e=r.window)?void 0:e.call(r)]}})])}),{}}}),bT={class:"d-flex align-center w-100"},wT={class:"d-flex align-center mr-8"},_T={class:"w-100 minimal-tabs-container"},ST={key:0},IT={key:1,class:"text-center pa-16 minimal-loading"},CT={key:1,class:"text-center pa-16 minimal-welcome"},kT=Yy({__name:"App",setup(e){const t=f(null),n=f(!1),r=f(!1),a=f([]),s=f([]),u=f([]),c=f([]),d=f([]),h=f(new Map),p=f(new Map),v=f(new Map),m=f(new Map),g=f("view-all"),y=f(null),b=f([{id:"view-all",name:"所持状況一覧",icon:"mdi-account-multiple"},{id:"add-owned",name:"所持キャラ追加",icon:"mdi-account-plus"},{id:"manage-items",name:"アイテム管理",icon:"mdi-sword-cross"},{id:"manage-teams",name:"編成管理",icon:"mdi-account-group"},{id:"add-master",name:"マスター追加",icon:"mdi-database-plus"},{id:"edit-master",name:"マスター編集",icon:"mdi-database-edit"}]),w=o(()=>"add-owned"===g.value||"manage-items"===g.value);ri(e=>{t.value=e,n.value=!0,e?async function(){if(r.value)return;if(!t.value)return;try{const e=await jy(t.value.uid);a.value=e.accounts,s.value=e.characterMasters,u.value=e.itemMasters,c.value=e.gachaMasters,d.value=e.teams,h.value=e.itemMastersMap,p.value=e.ownedCountMap,v.value=e.ownedCharactersData,m.value=e.characterMastersMap,a.value.length>0&&(y.value=a.value[0].id),r.value=!0}catch(e){alert(`データ読み込みエラー: ${e.message}`)}}():C()});const S=()=>{ti().catch(()=>alert("ログインに失敗しました。"))},I=()=>{ni()},C=()=>{r.value=!1,a.value=[],s.value=[],u.value=[],c.value=[],d.value=[],h.value=new Map,p.value=new Map,v.value=new Map,m.value=new Map,y.value=null};const k=({accountId:e,newCharacter:t})=>{v.value.has(e)||v.value.set(e,[]),v.value.get(e).push(t);const n=`${t.characterMasterId}-${e}`,r=p.value.get(n)||0;p.value.set(n,r+1)},E=({accountId:e,ownedCharacterId:t,items:n})=>{const r=(v.value.get(e)||[]).find(e=>e.id===t);r&&(r.items=n)},T=({accountId:e,from:t,to:n})=>{const r=v.value.get(e)||[],i=r.find(e=>e.id===t.id),a=r.find(e=>e.id===n.id);i&&(i.items=t.items),a&&(a.items=n.items)},x=e=>{d.value.unshift(e)},A=e=>{const t=d.value.findIndex(t=>t.id===e.id);t>-1&&(d.value[t]={...d.value[t],...e})},N=e=>{d.value=d.value.filter(t=>t.id!==e)},D=()=>{location.reload()};return(e,n)=>($(),q(HE,null,{default:j(()=>[i(ZE,{app:"",color:"white",elevation:"0",class:"minimal-header",height:"64"},X({default:j(()=>[l("div",bT,[l("div",wT,[i(ob,{icon:"mdi-dragon",size:"28",class:"mr-3",color:"primary"}),i(KE,{class:"text-h5 font-weight-medium text-primary"},{default:j(()=>n[3]||(n[3]=[z(" キャラクター管理 ",-1)])),_:1,__:[3]})]),i(wk),i(uS,{user:t.value,onLogin:S,onLogout:I,class:"mr-4"},null,8,["user"])])]),_:2},[t.value?{name:"extension",fn:j(()=>[l("div",_T,[i(yT,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=e=>g.value=e),"align-with-title":"",color:"primary",class:"minimal-tabs",height:"48"},{default:j(()=>[($(!0),U(_,null,J(b.value,e=>($(),q(iT,{key:e.id,value:e.id,class:"minimal-tab"},{default:j(()=>[i(ob,{icon:e.icon,class:"mr-2",size:"20"},null,8,["icon"]),z(" "+R(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),key:"0"}:void 0]),1024),i(tT,null,{default:j(()=>[i(WC,{class:"pa-6 main-container"},{default:j(()=>[t.value?($(),U("div",ST,[i(hI,{accounts:a.value,modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=e=>y.value=e),visible:w.value,class:"mb-6 minimal-account-selector"},null,8,["accounts","modelValue","visible"]),r.value?($(),q(cT,{key:0,modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=e=>g.value=e),class:"minimal-window"},{default:j(()=>[i(fT,{value:"view-all",key:"view-all"},{default:j(()=>[i(Lk,{"data-loaded":r.value,accounts:a.value,"character-masters":s.value,"item-masters":u.value,"gacha-masters":c.value,"owned-count-map":p.value,"owned-characters-data":v.value,"item-masters-map":h.value},null,8,["data-loaded","accounts","character-masters","item-masters","gacha-masters","owned-count-map","owned-characters-data","item-masters-map"])]),_:1}),i(fT,{value:"add-owned",key:"add-owned"},{default:j(()=>[i(Qk,{"character-masters":s.value,"character-masters-map":m.value,"selected-account-id":y.value,"owned-count-map":p.value,onCharacterAdded:k},null,8,["character-masters","character-masters-map","selected-account-id","owned-count-map"])]),_:1}),i(fT,{value:"manage-items",key:"manage-items"},{default:j(()=>[i(mE,{"selected-account-id":y.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters":u.value,"item-masters-map":h.value,onItemsUpdated:E,onItemsMoved:T},null,8,["selected-account-id","owned-characters-data","character-masters-map","item-masters","item-masters-map"])]),_:1}),i(fT,{value:"manage-teams",key:"manage-teams"},{default:j(()=>[i(LE,{"user-id":t.value.uid,"data-loaded":r.value,teams:d.value,accounts:a.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters-map":h.value,onTeamAdded:x,onTeamUpdated:A,onTeamDeleted:N},null,8,["user-id","data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map"])]),_:1}),i(fT,{value:"add-master",key:"add-master"},{default:j(()=>[i(UE,{"gacha-masters":c.value,onMasterAdded:D},null,8,["gacha-masters"])]),_:1}),i(fT,{value:"edit-master",key:"edit-master"},{default:j(()=>[i(zE,{"character-masters":s.value,"gacha-masters":c.value,onMasterUpdated:D},null,8,["character-masters","gacha-masters"])]),_:1})]),_:1},8,["modelValue"])):($(),U("div",IT,[i(qb,{indeterminate:"",color:"primary",size:"64",width:"4",class:"mb-6"}),n[4]||(n[4]=l("p",{class:"text-body-1 text-grey-darken-1"}," データを読み込んでいます... ",-1))]))])):($(),U("div",CT,[i(ob,{icon:"mdi-dragon",size:"80",color:"primary",class:"mb-6"}),n[6]||(n[6]=l("h1",{class:"text-h4 font-weight-medium text-primary mb-4"}," キャラクター管理システム ",-1)),n[7]||(n[7]=l("p",{class:"text-body-1 text-grey-darken-1 mb-8"}," ログインして、あなたのキャラクターを管理しましょう ",-1)),i(Iw,{color:"primary",size:"large",variant:"outlined",class:"px-8",onClick:S},{default:j(()=>[i(ob,{icon:"mdi-login",class:"mr-2"}),n[5]||(n[5]=z(" ログイン ",-1))]),_:1,__:[5]})]))]),_:1})]),_:1})]),_:1}))}},[["__scopeId","data-v-daacf9d1"]]),ET=jt({theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976d2",secondary:"#424242",accent:"#42a5f5",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3",surface:"#ffffff",background:"#fafafa","on-surface":"#212121","on-background":"#212121"}}}},defaults:{VCard:{variant:"outlined",elevation:0,rounded:"md"},VBtn:{variant:"outlined",rounded:"md",class:"text-none font-weight-medium"},VTextField:{variant:"outlined",density:"compact",rounded:"md"},VSelect:{variant:"outlined",density:"compact",rounded:"md"},VList:{density:"compact"},VListItem:{rounded:"sm"},VChip:{rounded:"md",variant:"outlined"},VAvatar:{rounded:"md"},VIcon:{size:"20"}}});const TT=new class{constructor(){this.markers=new Map,this.measures=new Map}startMarker(e){this.markers.set(e,performance.now()),performance.mark(`${e}-start`)}endMarker(e){const t=this.markers.get(e);if(t){const n=performance.now()-t;return performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`),this.measures.set(e,n),n}return 0}getMeasure(e){return this.measures.get(e)}getAllMeasures(){return Object.fromEntries(this.measures)}clear(){this.markers.clear(),this.measures.clear()}};TT.startMarker("app-init");const xT=te(kT);xT.use(ET),((e={})=>{const{loadTime:t=3e3,memoryUsage:n=50}=e;window.addEventListener("load",()=>{performance.now();e.loadTime}),"memory"in performance&&setInterval(()=>{const t=performance.memory;t.usedJSHeapSize,t.jsHeapSizeLimit;e.memoryUsage},1e4)})({loadTime:2e3,memoryUsage:60}),xT.mount("#app"),TT.endMarker("app-init");export{ev as P,Rv as R,am as W,Qf as _,Xf as a,Ov as b,Jv as c,Xv as d,Uy as g,Ar as i,Yf as m,em as p,Fv as x,Zv as y};
