const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-init-G3WOcVak.js","assets/vue-DclqBZsD.js","assets/vuetify-18a99E9i.js"])))=>i.map(i=>d[i]);
import{B as e,l as t,s as n,T as a,j as r,J as i,n as s,e as o,k as l,K as u,L as c,M as d,m as h,h as p,b as f,o as v,N as m,I as g,z as y,t as b,O as w,F as _,P as I,r as S,D as C,Q as k,E,p as x,d as T,u as A,v as N,w as V,R as D,S as P,c as R,y as M,A as O,x as L,U as F,G as B,V as U,W as $,X as j,Y as z,Z as q,_ as H,$ as K,a as G,a0 as W,a1 as Q,a2 as Y,a3 as X,a4 as J,a5 as Z,a6 as ee,a7 as te}from"./vue-DclqBZsD.js";import{g as ne,p as ae,a as re,d as ie,i as se,b as oe,c as le,e as ue,f as ce,h as de,j as he,u as pe,k as fe,l as ve,m as me,n as ge,o as ye,I as be,q as we,r as _e,S as Ie,s as Se,t as Ce,v as ke,w as Ee,x as xe,y as Te,z as Ae,A as Ne,B as Ve,C as De,D as Pe,E as Re,F as Me,G as Oe,H as Le,J as Fe,K as Be,L as Ue,M as $e,N as je,O as ze,P as qe,Q as He,R as Ke,T as Ge,U as We,V as Qe,W as Ye,X as Xe,Y as Je,Z as Ze,_ as et,$ as tt,a0 as nt,a1 as at,a2 as rt,a3 as it,a4 as st,a5 as ot,a6 as lt,a7 as ut,a8 as ct,a9 as dt,aa as ht,ab as pt,ac as ft,ad as vt,ae as mt,af as gt,ag as yt,ah as bt,ai as wt,aj as _t,ak as It,al as St,am as Ct,an as kt,ao as Et,ap as xt,aq as Tt,ar as At,as as Nt,at as Vt,au as Dt,av as Pt,aw as Rt,ax as Mt,ay as Ot,az as Lt,aA as Ft,aB as Bt,aC as Ut,aD as $t,aE as jt,aF as zt}from"./vuetify-18a99E9i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var qt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&a+1<e.length&&56320==(64512&e.charCodeAt(a+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++a)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Kt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,s=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),a.push(n[u],n[c],n[d],n[h])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ht(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[a++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[a++]=String.fromCharCode(55296+(i>>10)),t[a++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[a++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const s=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==s||null==o)throw new Gt;const l=t<<2|i>>4;if(a.push(l),64!==s){const e=i<<4&240|s>>2;if(a.push(e),64!==o){const e=s<<6&192|o;a.push(e)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wt=function(e){return function(e){const t=Ht(e);return Kt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Qt=function(e){try{return Kt.decodeString(e,!0)}catch(t){}return null};function Yt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Xt(n)&&(e[n]=Yt(e[n],t[n]));return e}function Xt(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Zt=()=>{try{return Jt()||(()=>{if("undefined"==typeof process)return;const e=qt.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Qt(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},en=e=>{var t,n;return null===(n=null===(t=Zt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},tn=()=>{var e;return null===(e=Zt())||void 0===e?void 0:e.config},nn=e=>{var t;return null===(t=Zt())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class an{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class sn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(ln,(e,n)=>{const a=t[n];return null!=a?String(a):`<${n}?>`})}(r,n):"Error",s=`${this.serviceName}: ${i} (${a}).`;return new sn(a,s,n)}}const ln=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cn(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const n=e[r],i=t[r];if(dn(n)&&dn(i)){if(!cn(n,i))return!1}else if(n!==i)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function dn(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function pn(e,t){const n=new fn(e,t);return n.subscribe.bind(n)}class fn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");a=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===a.next&&(a.next=vn),void 0===a.error&&(a.error=vn),void 0===a.complete&&(a.complete=vn);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch(e){}}),this.observers.push(a),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){return e&&e._delegate?e._delegate:e}class gn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new an;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),a=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(a)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(a)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:yn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:a});n.resolve(e)}catch(t){}}}}clearInstance(e=yn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=yn){return this.instances.has(e)}getOptions(e=yn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(a)}return a}onInit(e,t){var n;const a=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(a))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(a,r);const i=this.instances.get(a);return i&&e(i,a),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(a=e,a===yn?void 0:a),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}var a;return n||null}normalizeInstanceIdentifier(e=yn){return this.component?this.component.multipleInstances?e:yn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=[];var In,Sn;(Sn=In||(In={}))[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";const Cn={debug:In.DEBUG,verbose:In.VERBOSE,info:In.INFO,warn:In.WARN,error:In.ERROR,silent:In.SILENT},kn=In.INFO,En={[In.DEBUG]:"log",[In.VERBOSE]:"log",[In.INFO]:"info",[In.WARN]:"warn",[In.ERROR]:"error"},xn=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!En[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tn{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=xn,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in In))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Cn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,In.DEBUG,...e),this._logHandler(this,In.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,In.VERBOSE,...e),this._logHandler(this,In.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,In.INFO,...e),this._logHandler(this,In.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,In.WARN,...e),this._logHandler(this,In.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,In.ERROR,...e),this._logHandler(this,In.ERROR,...e)}}let An,Nn;const Vn=new WeakMap,Dn=new WeakMap,Pn=new WeakMap,Rn=new WeakMap,Mn=new WeakMap;let On={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ln(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Un(this),t),Bn(Vn.get(this))}:function(...t){return Bn(e.apply(Un(this),t))}:function(t,...n){const a=e.call(Un(this),t,...n);return Pn.set(a,t.sort?t.sort():[t]),Bn(a)}}function Fn(e){return"function"==typeof e?Ln(e):(e instanceof IDBTransaction&&function(e){if(Dn.has(e))return;const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});Dn.set(e,t)}(e),t=e,(An||(An=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,On):e);var t}function Bn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(Bn(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Vn.set(t,e)}).catch(()=>{}),Mn.set(t,e),t}(e);if(Rn.has(e))return Rn.get(e);const t=Fn(e);return t!==e&&(Rn.set(e,t),Mn.set(t,e)),t}const Un=e=>Mn.get(e);const $n=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],zn=new Map;function qn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(zn.get(t))return zn.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=jn.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!r&&!$n.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let s=i.store;return a&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&i.done]))[0]};return zn.set(t,i),i}On=(e=>({...e,get:(t,n,a)=>qn(t,n)||e.get(t,n,a),has:(t,n)=>!!qn(t,n)||e.has(t,n)}))(On);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Kn="@firebase/app",Gn="0.9.13",Wn=new Tn("@firebase/app"),Qn="@firebase/app-compat",Yn="@firebase/analytics-compat",Xn="@firebase/analytics",Jn="@firebase/app-check-compat",Zn="@firebase/app-check",ea="@firebase/auth",ta="@firebase/auth-compat",na="@firebase/database",aa="@firebase/database-compat",ra="@firebase/functions",ia="@firebase/functions-compat",sa="@firebase/installations",oa="@firebase/installations-compat",la="@firebase/messaging",ua="@firebase/messaging-compat",ca="@firebase/performance",da="@firebase/performance-compat",ha="@firebase/remote-config",pa="@firebase/remote-config-compat",fa="@firebase/storage",va="@firebase/storage-compat",ma="@firebase/firestore",ga="@firebase/firestore-compat",ya="firebase",ba="[DEFAULT]",wa={[Kn]:"fire-core",[Qn]:"fire-core-compat",[Xn]:"fire-analytics",[Yn]:"fire-analytics-compat",[Zn]:"fire-app-check",[Jn]:"fire-app-check-compat",[ea]:"fire-auth",[ta]:"fire-auth-compat",[na]:"fire-rtdb",[aa]:"fire-rtdb-compat",[ra]:"fire-fn",[ia]:"fire-fn-compat",[sa]:"fire-iid",[oa]:"fire-iid-compat",[la]:"fire-fcm",[ua]:"fire-fcm-compat",[ca]:"fire-perf",[da]:"fire-perf-compat",[ha]:"fire-rc",[pa]:"fire-rc-compat",[fa]:"fire-gcs",[va]:"fire-gcs-compat",[ma]:"fire-fst",[ga]:"fire-fst-compat","fire-js":"fire-js",[ya]:"fire-js-all"},_a=new Map,Ia=new Map;function Sa(e,t){try{e.container.addComponent(t)}catch(n){Wn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ca(e,t){e.container.addOrOverwriteComponent(t)}function ka(e){const t=e.name;if(Ia.has(t))return Wn.debug(`There were multiple attempts to register component ${t}.`),!1;Ia.set(t,e);for(const n of _a.values())Sa(n,e);return!0}function Ea(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xa=new on("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ta=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xa.create("app-deleted",{appName:this._name})}};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="9.23.0";function Na(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const a=Object.assign({name:ba,automaticDataCollectionEnabled:!1},t),r=a.name;if("string"!=typeof r||!r)throw xa.create("bad-app-name",{appName:String(r)});if(n||(n=tn()),!n)throw xa.create("no-options");const i=_a.get(r);if(i){if(cn(n,i.options)&&cn(a,i.config))return i;throw xa.create("duplicate-app",{appName:r})}const s=new wn(r);for(const l of Ia.values())s.addComponent(l);const o=new Ta(n,a,s);return _a.set(r,o),o}function Va(e=ba){const t=_a.get(e);if(!t&&e===ba&&tn())return Na();if(!t)throw xa.create("no-app",{appName:e});return t}async function Da(e){const t=e.name;_a.has(t)&&(_a.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Pa(e,t,n){var a;let r=null!==(a=wa[e])&&void 0!==a?a:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Wn.warn(e.join(" "))}ka(new gn(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function Ra(e,t){if(null!==e&&"function"!=typeof e)throw xa.create("invalid-log-argument");!function(e,t){for(const n of _n){let a=null;t&&t.level&&(a=Cn[t.level]),n.userLogHandler=null===e?null:(t,n,...r)=>{const i=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=a?a:t.logLevel)&&e({level:In[n].toLowerCase(),message:i,args:r,type:t.name})}}}(e,t)}function Ma(e){var t;t=e,_n.forEach(e=>{e.setLogLevel(t)})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="firebase-heartbeat-store";let La=null;function Fa(){return La||(La=function(e,t,{blocked:n,upgrade:a,blocking:r,terminated:i}={}){const s=indexedDB.open(e,t),o=Bn(s);return a&&s.addEventListener("upgradeneeded",e=>{a(Bn(s.result),e.oldVersion,e.newVersion,Bn(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Oa)}}).catch(e=>{throw xa.create("idb-open",{originalErrorMessage:e.message})})),La}async function Ba(e,t){try{const n=(await Fa()).transaction(Oa,"readwrite"),a=n.objectStore(Oa);await a.put(t,Ua(e)),await n.done}catch(n){if(n instanceof sn)Wn.warn(n.message);else{const e=xa.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Wn.warn(e.message)}}}function Ua(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new za(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ja();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ja(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let a=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),qa(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qa(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}(this._heartbeatsCache.heartbeats),a=Wt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}}function ja(){return(new Date).toISOString().substring(0,10)}class za{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await Fa();return await t.transaction(Oa).objectStore(Oa).get(Ua(e))}catch(t){if(t instanceof sn)Wn.warn(t.message);else{const e=xa.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Wn.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ba(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ba(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qa(e){return Wt(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha;Ha="",ka(new gn("platform-logger",e=>new Hn(e),"PRIVATE")),ka(new gn("heartbeat",e=>new $a(e),"PRIVATE")),Pa(Kn,Gn,Ha),Pa(Kn,Gn,"esm2017"),Pa("fire-js","");const Ka=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:sn,SDK_VERSION:Aa,_DEFAULT_ENTRY_NAME:ba,_addComponent:Sa,_addOrOverwriteComponent:Ca,_apps:_a,_clearComponents:function(){Ia.clear()},_components:Ia,_getProvider:Ea,_registerComponent:ka,_removeServiceInstance:function(e,t,n=ba){Ea(e,t).clearInstance(n)},deleteApp:Da,getApp:Va,getApps:function(){return Array.from(_a.values())},initializeApp:Na,onLog:Ra,registerVersion:Pa,setLogLevel:Ma},Symbol.toStringTag,{value:"Module"}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this._delegate=e,this.firebase=t,Sa(e,new gn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Da(this._delegate)))}_getService(e,t=ba){var n;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return a.isInitialized()||"EXPLICIT"!==(null===(n=a.getComponent())||void 0===n?void 0:n.instantiationMode)||a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=ba){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sa(this._delegate,e)}_addOrOverwriteComponent(e){Ca(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new on("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Qa=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(a,r={}){const i=Na(a,r);if(un(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:a,registerVersion:Pa,setLogLevel:Ma,onLog:Ra,apps:null,SDK_VERSION:Aa,INTERNAL:{registerComponent:function(t){const r=t.name,i=r.replace("-compat","");if(ka(t)&&"PUBLIC"===t.type){const s=(e=a())=>{if("function"!=typeof e[i])throw Wa.create("invalid-app-argument",{appName:r});return e[i]()};void 0!==t.serviceProps&&Yt(s,t.serviceProps),n[i]=s,e.prototype[i]=function(...e){return this._getService.bind(this,r).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[i]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Ka}};function a(e){if(!un(t,e=e||ba))throw Wa.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),a.App=e,n}(Ga);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Yt(t,e)},createSubscribe:pn,ErrorFactory:on,deepExtend:Yt}),t}(),Ya=new Tn("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ya.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ya.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xa=Qa;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Pa("@firebase/app-compat","0.2.13",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Xa.registerVersion("firebase","9.23.0","app-compat");const Ja={},Za=async()=>{const{getFirebaseInstances:e}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/MS_DB_UI/"+e}(e))in Ja)return;Ja[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(async()=>{const{getFirebaseInstances:e}=await import("./firebase-init-G3WOcVak.js");return{getFirebaseInstances:e}},__vite__mapDeps([0,1,2]));return e()},er=async()=>{const{db:e}=await Za();return e},tr=async()=>{const{auth:e}=await Za();return e},nr=async()=>{const e=await tr(),t=new Xa.auth.GoogleAuthProvider;return e.signInWithPopup(t).catch(e=>{throw e})},ar=async()=>(await tr()).signOut(),rr=async e=>(await tr()).onAuthStateChanged(e),ir=e=>{return e?(e=>!(!Array.isArray(e)||0===e.length)&&"number"==typeof e[0])(e)?(t=e,Array.isArray(t)?t.map(e=>({itemId:Number(e),isVirtual:!1})):[]):e:[];var t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Pa("firebase","9.23.0","app");var sr,or="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lr=lr||{},ur=or||self;function cr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function dr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function hr(e,t,n){return e.call.apply(e.bind,arguments)}function pr(e,t,n){if(!e)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,a),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fr(e,t,n){return(fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hr:pr).apply(null,arguments)}function vr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,a){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}function gr(){this.s=this.s,this.o=this.o}gr.prototype.s=!1,gr.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},gr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function br(e){const t=e.length;if(0<t){const n=Array(t);for(let a=0;a<t;a++)n[a]=e[a];return n}return[]}function wr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(cr(t)){const n=e.length||0,a=t.length||0;e.length=n+a;for(let r=0;r<a;r++)e[n+r]=t[r]}else e.push(t)}}function _r(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var Ir=function(){if(!ur.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ur.addEventListener("test",()=>{},t),ur.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Sr(e){return/^[\s\xa0]*$/.test(e)}function Cr(){var e=ur.navigator;return e&&(e=e.userAgent)?e:""}function kr(e){return-1!=Cr().indexOf(e)}function Er(e){return Er[" "](e),e}Er[" "]=function(){};var xr,Tr,Ar,Nr=kr("Opera"),Vr=kr("Trident")||kr("MSIE"),Dr=kr("Edge"),Pr=Dr||Vr,Rr=kr("Gecko")&&!(-1!=Cr().toLowerCase().indexOf("webkit")&&!kr("Edge"))&&!(kr("Trident")||kr("MSIE"))&&!kr("Edge"),Mr=-1!=Cr().toLowerCase().indexOf("webkit")&&!kr("Edge");function Or(){var e=ur.document;return e?e.documentMode:void 0}e:{var Lr="",Fr=(Tr=Cr(),Rr?/rv:([^\);]+)(\)|;)/.exec(Tr):Dr?/Edge\/([\d\.]+)/.exec(Tr):Vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Tr):Mr?/WebKit\/(\S+)/.exec(Tr):Nr?/(?:Version)[ \/]?(\S+)/.exec(Tr):void 0);if(Fr&&(Lr=Fr?Fr[1]:""),Vr){var Br=Or();if(null!=Br&&Br>parseFloat(Lr)){xr=String(Br);break e}}xr=Lr}if(ur.document&&Vr){var Ur=Or();Ar=Ur||(parseInt(xr,10)||void 0)}else Ar=void 0;var $r=Ar;function jr(e,t){if(_r.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,a=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rr){e:{try{Er(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:zr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&jr.$.h.call(this)}}mr(jr,_r);var zr={2:"touch",3:"pen",4:"mouse"};jr.prototype.h=function(){jr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qr="closure_listenable_"+(1e6*Math.random()|0),Hr=0;function Kr(e,t,n,a,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!a,this.la=r,this.key=++Hr,this.fa=this.ia=!1}function Gr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Wr(e,t,n){for(const a in e)t.call(n,e[a],a,e)}function Qr(e){const t={};for(const n in e)t[n]=e[n];return t}const Yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xr(e,t){let n,a;for(let r=1;r<arguments.length;r++){for(n in a=arguments[r],a)e[n]=a[n];for(let t=0;t<Yr.length;t++)n=Yr[t],Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}}function Jr(e){this.src=e,this.g={},this.h=0}function Zr(e,t){var n=t.type;if(n in e.g){var a,r=e.g[n],i=yr(r,t);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Gr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ei(e,t,n,a){for(var r=0;r<e.length;++r){var i=e[r];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==a)return r}return-1}Jr.prototype.add=function(e,t,n,a,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=ei(e,t,a,r);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Kr(t,this.src,i,!!a,r)).ia=n,e.push(t)),t};var ti="closure_lm_"+(1e6*Math.random()|0),ni={};function ai(e,t,n,a,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)ai(e,t[i],n,a,r);return null}return n=ci(n),e&&e[qr]?e.O(t,n,!!dr(a)&&!!a.capture,r):function(e,t,n,a,r,i){if(!t)throw Error("Invalid event type");var s=dr(r)?!!r.capture:!!r,o=li(e);if(o||(e[ti]=o=new Jr(e)),n=o.add(t,n,a,s,i),n.proxy)return n;if(a=function(){function e(n){return t.call(e.src,e.listener,n)}const t=oi;return e}(),n.proxy=a,a.src=e,a.listener=n,e.addEventListener)Ir||(r=s),void 0===r&&(r=!1),e.addEventListener(t.toString(),a,r);else if(e.attachEvent)e.attachEvent(si(t.toString()),a);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(a)}return n}(e,t,n,!1,a,r)}function ri(e,t,n,a,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)ri(e,t[i],n,a,r);else a=dr(a)?!!a.capture:!!a,n=ci(n),e&&e[qr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ei(i=e.g[t],n,a,r))&&(Gr(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=li(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ei(t,n,a,r)),(n=-1<e?t[e]:null)&&ii(n))}function ii(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[qr])Zr(t.i,e);else{var n=e.type,a=e.proxy;t.removeEventListener?t.removeEventListener(n,a,e.capture):t.detachEvent?t.detachEvent(si(n),a):t.addListener&&t.removeListener&&t.removeListener(a),(n=li(t))?(Zr(n,e),0==n.h&&(n.src=null,t[ti]=null)):Gr(e)}}}function si(e){return e in ni?ni[e]:ni[e]="on"+e}function oi(e,t){if(e.fa)e=!0;else{t=new jr(t,this);var n=e.listener,a=e.la||e.src;e.ia&&ii(e),e=n.call(a,t)}return e}function li(e){return(e=e[ti])instanceof Jr?e:null}var ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function ci(e){return"function"==typeof e?e:(e[ui]||(e[ui]=function(t){return e.handleEvent(t)}),e[ui])}function di(){gr.call(this),this.i=new Jr(this),this.S=this,this.J=null}function hi(e,t){var n,a=e.J;if(a)for(n=[];a;a=a.J)n.push(a);if(e=e.S,a=t.type||t,"string"==typeof t)t=new _r(t,e);else if(t instanceof _r)t.target=t.target||e;else{var r=t;Xr(t=new _r(a,e),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var s=t.g=n[i];r=pi(s,a,!0,t)&&r}if(r=pi(s=t.g=e,a,!0,t)&&r,r=pi(s,a,!1,t)&&r,n)for(i=0;i<n.length;i++)r=pi(s=t.g=n[i],a,!1,t)&&r}function pi(e,t,n,a){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.fa&&s.capture==n){var o=s.listener,l=s.la||s.src;s.ia&&Zr(e.i,s),r=!1!==o.call(l,a)&&r}}return r&&!a.defaultPrevented}mr(di,gr),di.prototype[qr]=!0,di.prototype.removeEventListener=function(e,t,n,a){ri(this,e,t,n,a)},di.prototype.N=function(){if(di.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],a=0;a<n.length;a++)Gr(n[a]);delete t.g[e],t.h--}}this.J=null},di.prototype.O=function(e,t,n,a){return this.i.add(String(e),t,!1,n,a)},di.prototype.P=function(e,t,n,a){return this.i.add(String(e),t,!0,n,a)};var fi=ur.JSON.stringify;function vi(){var e=Ii;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var mi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gi,e=>e.reset());class gi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function bi(e){ur.setTimeout(()=>{throw e},0)}let wi,_i=!1,Ii=new class{constructor(){this.h=this.g=null}add(e,t){const n=mi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Si=()=>{const e=ur.Promise.resolve(void 0);wi=()=>{e.then(Ci)}};var Ci=()=>{for(var e;e=vi();){try{e.h.call(e.g)}catch(n){bi(n)}var t=mi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_i=!1};function ki(e,t){di.call(this),this.h=e||1,this.g=t||ur,this.j=fr(this.qb,this),this.l=Date.now()}function Ei(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function xi(e,t,n){if("function"==typeof e)n&&(e=fr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fr(e.handleEvent,e)}return 2147483647<Number(t)?-1:ur.setTimeout(e,t||0)}function Ti(e){e.g=xi(()=>{e.g=null,e.i&&(e.i=!1,Ti(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}mr(ki,di),(sr=ki.prototype).ga=!1,sr.T=null,sr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hi(this,"tick"),this.ga&&(Ei(this),this.start()))}},sr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sr.N=function(){ki.$.N.call(this),Ei(this),delete this.g};class Ai extends gr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ti(this)}N(){super.N(),this.g&&(ur.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(e){gr.call(this),this.h=e,this.g={}}mr(Ni,gr);var Vi=[];function Di(e,t,n,a){Array.isArray(n)||(n&&(Vi[0]=n.toString()),n=Vi);for(var r=0;r<n.length;r++){var i=ai(t,n[r],a||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Pi(e){Wr(e.g,function(e,t){this.g.hasOwnProperty(t)&&ii(e)},e),e.g={}}function Ri(){this.g=!0}function Mi(e,t,n,a){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var a=n[e];if(!(2>a.length)){var r=a[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<r.length;s++)r[s]=""}}}return fi(n)}catch(o){return t}}(e,n)+(a?" "+a:"")})}Ni.prototype.N=function(){Ni.$.N.call(this),Pi(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ri.prototype.Ea=function(){this.g=!1},Ri.prototype.info=function(){};var Oi={},Li=null;function Fi(){return Li=Li||new di}function Bi(e){_r.call(this,Oi.Ta,e)}function Ui(e){const t=Fi();hi(t,new Bi(t))}function $i(e,t){_r.call(this,Oi.STAT_EVENT,e),this.stat=t}function ji(e){const t=Fi();hi(t,new $i(t,e))}function zi(e,t){_r.call(this,Oi.Ua,e),this.size=t}function qi(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ur.setTimeout(function(){e()},t)}Oi.Ta="serverreachability",mr(Bi,_r),Oi.STAT_EVENT="statevent",mr($i,_r),Oi.Ua="timingevent",mr(zi,_r);var Hi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ki={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gi(){}function Wi(e){return e.h||(e.h=e.i())}function Qi(){}Gi.prototype.h=null;var Yi,Xi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ji(){_r.call(this,"d")}function Zi(){_r.call(this,"c")}function es(){}function ts(e,t,n,a){this.l=e,this.j=t,this.m=n,this.W=a||1,this.U=new Ni(this),this.P=as,e=Pr?125:void 0,this.V=new ki(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}mr(Ji,_r),mr(Zi,_r),mr(es,Gi),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},Yi=new es;var as=45e3,rs={},is={};function ss(e,t,n){e.L=1,e.v=ks(ws(t)),e.s=n,e.S=!0,os(e,null)}function os(e,t){e.G=Date.now(),ds(e),e.A=ws(e.v);var n=e.A,a=e.W;Array.isArray(a)||(a=[String(a)]),Fs(n.i,"t",a),e.C=0,n=e.l.J,e.h=new ns,e.g=Bo(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ai(fr(e.Pa,e,e.g),e.O)),Di(e.U,e.g,"readystatechange",e.nb),t=e.I?Qr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ui(),function(e,t,n,a,r,i){e.info(function(){if(e.g)if(i)for(var s="",o=i.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");s=2<=d.length&&"type"==d[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+a+") [attempt "+r+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ls(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function us(e,t,n){let a,r=!0;for(;!e.J&&e.C<n.length;){if(a=cs(e,n),a==is){4==t&&(e.o=4,ji(14),r=!1),Mi(e.j,e.m,null,"[Incomplete Response]");break}if(a==rs){e.o=4,ji(15),Mi(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Mi(e.j,e.m,a,null),ms(e,a)}ls(e)&&a!=is&&a!=rs&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ji(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vo(t),t.M=!0,ji(11))):(Mi(e.j,e.m,n,"[Invalid Chunked Response]"),vs(e),fs(e))}function cs(e,t){var n=e.C,a=t.indexOf("\n",n);return-1==a?is:(n=Number(t.substring(n,a)),isNaN(n)?rs:(a+=1)+n>t.length?is:(t=t.slice(a,a+n),e.C=a+n,t))}function ds(e){e.Y=Date.now()+e.P,hs(e,e.P)}function hs(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=qi(fr(e.lb,e),t)}function ps(e){e.B&&(ur.clearTimeout(e.B),e.B=null)}function fs(e){0==e.l.H||e.J||Ro(e.l,e)}function vs(e){ps(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ei(e.V),Pi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ms(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Hs(n.i,e)))if(!e.K&&Hs(n.i,e)&&3==n.H){try{var a=n.Ja.g.parse(t)}catch(u){a=null}if(Array.isArray(a)&&3==a.length){var r=a;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Po(n),So(n)}No(n),ji(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=qi(fr(n.ib,n),6e3));if(1>=qs(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Oo(n,11)}else if((e.K||n.g==e)&&Po(n),!Sr(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let u=r[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=u[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(a=1.5*c,n.L=a,n.l.info("backChannelRequestTimeoutMs_="+a)),a=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=a.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ks(i,i.h),i.h=null))}if(a.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(a.Da=e,Cs(a.I,a.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((a=n).wa=Fo(a,a.J?a.pa:null,a.Y),s.K){Gs(a.i,s);var o=s,l=a.L;l&&o.setTimeout(l),o.B&&(ps(o),ds(o)),a.g=s}else Ao(a);0<n.j.length&&ko(n)}else"stop"!=u[0]&&"close"!=u[0]||Oo(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Oo(n,7):Io(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ui()}catch(u){}}function gs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cr(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(cr(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const a in e)t[n++]=a;return t}}}(e),a=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(cr(e)){for(var t=[],n=e.length,a=0;a<n;a++)t.push(e[a]);return t}for(a in t=[],n=0,e)t[n++]=e[a];return t}(e),r=a.length,i=0;i<r;i++)t.call(void 0,a[i],n&&n[i],e)}(sr=ts.prototype).setTimeout=function(e){this.P=e},sr.nb=function(e){e=e.target;const t=this.M;t&&3==mo(e)?t.l():this.Pa(e)},sr.Pa=function(e){try{if(e==this.g)e:{const c=mo(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Pr||this.g&&(this.h.h||this.g.ja()||go(this.g)))){this.J||4!=c||7==t||Ui(),ps(this);var n=this.g.da();this.ca=n;t:if(ls(this)){var a=go(this.g);e="";var r=a.length,i=4==mo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vs(this),fs(this);var s="";break t}this.h.i=new ur.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(a[t],{stream:i&&t==r-1});a.splice(0,r),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,a,r,i,s){e.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+s})}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sr(o)){var u=o;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,ji(12),vs(this),fs(this);break e}Mi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,n)}this.S?(us(this,c,s),Pr&&this.i&&3==c&&(Di(this.U,this.V,"tick",this.mb),this.V.start())):(Mi(this.j,this.m,s,null),ms(this,s)),4==c&&vs(this),this.i&&!this.J&&(4==c?Ro(this.l,this):(this.i=!1,ds(this)))}else(function(e){const t={};e=(e.g&&2<=mo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<e.length;a++){if(Sr(e[a]))continue;var n=yi(e[a]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),vs(this),fs(this)}}}catch(c){}},sr.mb=function(){if(this.g){var e=mo(this.g),t=this.g.ja();this.C<t.length&&(ps(this),us(this,e,t),this.i&&4!=e&&ds(this))}},sr.cancel=function(){this.J=!0,vs(this)},sr.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Ui(),ji(17)),vs(this),this.o=2,fs(this)):hs(this,this.Y-e)};var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof bs){this.h=e.h,_s(this,e.j),this.s=e.s,this.g=e.g,Is(this,e.m),this.l=e.l;var t=e.i,n=new Rs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ss(this,n),this.o=e.o}else e&&(t=String(e).match(ys))?(this.h=!1,_s(this,t[1]||"",!0),this.s=Es(t[2]||""),this.g=Es(t[3]||"",!0),Is(this,t[4]),this.l=Es(t[5]||"",!0),Ss(this,t[6]||"",!0),this.o=Es(t[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}function ws(e){return new bs(e)}function _s(e,t,n){e.j=n?Es(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Is(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ss(e,t,n){t instanceof Rs?(e.i=t,function(e,t){t&&!e.j&&(Ms(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Os(this,t),Fs(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=xs(t,Ds)),e.i=new Rs(t,e.h))}function Cs(e,t,n){e.i.set(t,n)}function ks(e){return Cs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Es(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ts),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ts(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xs(t,As,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xs(t,As,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(xs(n,"/"==n.charAt(0)?Vs:Ns,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xs(n,Ps)),e.join("")};var As=/[#\/\?@]/g,Ns=/[#\?:]/g,Vs=/[#\?]/g,Ds=/[#\?@]/g,Ps=/#/g;function Rs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ms(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var a=e[n].indexOf("="),r=null;if(0<=a){var i=e[n].substring(0,a);r=e[n].substring(a+1)}else i=e[n];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Os(e,t){Ms(e),t=Bs(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ls(e,t){return Ms(e),t=Bs(e,t),e.g.has(t)}function Fs(e,t,n){Os(e,t),0<n.length&&(e.i=null,e.g.set(Bs(e,t),br(n)),e.h+=n.length)}function Bs(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sr=Rs.prototype).add=function(e,t){Ms(this),this.i=null,e=Bs(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sr.forEach=function(e,t){Ms(this),this.g.forEach(function(n,a){n.forEach(function(n){e.call(t,n,a,this)},this)},this)},sr.ta=function(){Ms(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let a=0;a<t.length;a++){const r=e[a];for(let e=0;e<r.length;e++)n.push(t[a])}return n},sr.Z=function(e){Ms(this);let t=[];if("string"==typeof e)Ls(this,e)&&(t=t.concat(this.g.get(Bs(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},sr.set=function(e,t){return Ms(this),this.i=null,Ls(this,e=Bs(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},sr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var a=t[n];const i=encodeURIComponent(String(a)),s=this.Z(a);for(a=0;a<s.length;a++){var r=i;""!==s[a]&&(r+="="+encodeURIComponent(String(s[a]))),e.push(r)}}return this.i=e.join("&")};var Us=class{constructor(e,t){this.g=e,this.map=t}};function $s(e){this.l=e||js,ur.PerformanceNavigationTiming?e=0<(e=ur.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ur.g&&ur.g.Ka&&ur.g.Ka()&&ur.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var js=10;function zs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qs(e){return e.h?1:e.g?e.g.size:0}function Hs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ks(e,t){e.g?e.g.add(t):e.h=t}function Gs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ws(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return br(e.i)}$s.prototype.cancel=function(){if(this.i=Ws(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Qs=class{stringify(e){return ur.JSON.stringify(e,void 0)}parse(e){return ur.JSON.parse(e,void 0)}};function Ys(){this.g=new Qs}function Xs(e,t,n){const a=n||"";try{gs(e,function(e,n){let r=e;dr(e)&&(r=fi(e)),t.push(a+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(a+"type="+encodeURIComponent("_badmap")),r}}function Js(e,t,n,a,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(a)}catch(i){}}function Zs(e){this.l=e.fc||null,this.j=e.ob||!1}function eo(e,t){di.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=to,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mr(Zs,Gi),Zs.prototype.g=function(){return new eo(this.l,this.j)},Zs.prototype.i=function(e){return function(){return e}}({}),mr(eo,di);var to=0;function no(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ao(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ro(e)}function ro(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sr=eo.prototype).open=function(e,t){if(this.readyState!=to)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ro(this)},sr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ur).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},sr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ao(this)),this.readyState=to},sr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==ur.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;no(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},sr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ao(this):ro(this),3==this.readyState&&no(this)}},sr.Za=function(e){this.g&&(this.response=this.responseText=e,ao(this))},sr.Ya=function(e){this.g&&(this.response=e,ao(this))},sr.ka=function(){this.g&&ao(this)},sr.setRequestHeader=function(e,t){this.v.append(e,t)},sr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var io=ur.JSON.parse;function so(e){di.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oo,this.L=this.M=!1}mr(so,di);var oo="",lo=/^https?$/i,uo=["POST","PUT"];function co(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ho(e),fo(e)}function ho(e){e.F||(e.F=!0,hi(e,"complete"),hi(e,"error"))}function po(e){if(e.h&&void 0!==lr&&(!e.C[1]||4!=mo(e)||2!=e.da()))if(e.v&&4==mo(e))xi(e.La,0,e);else if(hi(e,"readystatechange"),4==mo(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===o){var r=String(e.I).match(ys)[1]||null;!r&&ur.self&&ur.self.location&&(r=ur.self.location.protocol.slice(0,-1)),a=!lo.test(r?r.toLowerCase():"")}n=a}if(n)hi(e,"complete"),hi(e,"success");else{e.m=6;try{var i=2<mo(e)?e.g.statusText:""}catch(s){i=""}e.j=i+" ["+e.da()+"]",ho(e)}}finally{fo(e)}}}function fo(e,t){if(e.g){vo(e);const a=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||hi(e,"ready");try{a.onreadystatechange=r}catch(n){}}}function vo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ur.clearTimeout(e.A),e.A=null)}function mo(e){return e.g?e.g.readyState:0}function go(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case oo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function yo(e){let t="";return Wr(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function bo(e,t,n){e:{for(a in n){var a=!1;break e}a=!0}a||(n=yo(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Cs(e,t,n))}function wo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _o(e){this.Ga=0,this.j=[],this.l=new Ri,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wo("baseRetryDelayMs",5e3,e),this.hb=wo("retryDelaySeedMs",1e4,e),this.eb=wo("forwardChannelMaxRetries",2,e),this.xa=wo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $s(e&&e.concurrentRequestLimit),this.Ja=new Ys,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Io(e){if(Co(e),3==e.H){var t=e.W++,n=ws(e.I);if(Cs(n,"SID",e.K),Cs(n,"RID",t),Cs(n,"TYPE","terminate"),xo(e,n),(t=new ts(e,e.l,t)).L=2,t.v=ks(ws(n)),n=!1,ur.navigator&&ur.navigator.sendBeacon)try{n=ur.navigator.sendBeacon(t.v.toString(),"")}catch(a){}!n&&ur.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bo(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ds(t)}Lo(e)}function So(e){e.g&&(Vo(e),e.g.cancel(),e.g=null)}function Co(e){So(e),e.u&&(ur.clearTimeout(e.u),e.u=null),Po(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ur.clearTimeout(e.m),e.m=null)}function ko(e){if(!zs(e.i)&&!e.m){e.m=!0;var t=e.Na;wi||Si(),_i||(wi(),_i=!0),Ii.add(t,e),e.C=0}}function Eo(e,t){var n;n=t?t.m:e.W++;const a=ws(e.I);Cs(a,"SID",e.K),Cs(a,"RID",n),Cs(a,"AID",e.V),xo(e,a),e.o&&e.s&&bo(a,e.o,e.s),n=new ts(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=To(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ks(e.i,n),ss(n,a,t)}function xo(e,t){e.na&&Wr(e.na,function(e,n){Cs(t,n,e)}),e.h&&gs({},function(e,n){Cs(t,n,e)})}function To(e,t,n){n=Math.min(e.j.length,n);var a=e.h?fr(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const l=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{Xs(l,e,"req"+n+"_")}catch(i){a&&a(l)}}if(s){a=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,a}function Ao(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;wi||Si(),_i||(wi(),_i=!0),Ii.add(t,e),e.A=0}}function No(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=qi(fr(e.Ma,e),Mo(e,e.A)),e.A++,!0)}function Vo(e){null!=e.B&&(ur.clearTimeout(e.B),e.B=null)}function Do(e){e.g=new ts(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ws(e.wa);Cs(t,"RID","rpc"),Cs(t,"SID",e.K),Cs(t,"AID",e.V),Cs(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Cs(t,"TO",e.qa),Cs(t,"TYPE","xmlhttp"),xo(e,t),e.o&&e.s&&bo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ks(ws(t)),n.s=null,n.S=!0,os(n,e)}function Po(e){null!=e.v&&(ur.clearTimeout(e.v),e.v=null)}function Ro(e,t){var n=null;if(e.g==t){Po(e),Vo(e),e.g=null;var a=2}else{if(!Hs(e.i,t))return;n=t.F,Gs(e.i,t),a=1}if(0!=e.H)if(t.i)if(1==a){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;hi(a=Fi(),new zi(a,n)),ko(e)}else Ao(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==a&&function(e,t){return!(qs(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=qi(fr(e.Na,e,t),Mo(e,e.C)),e.C++,0)))}(e,t)||2==a&&No(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Oo(e,5);break;case 4:Oo(e,10);break;case 3:Oo(e,6);break;default:Oo(e,2)}}function Mo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Oo(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var a=fr(e.pb,e);n||(n=new bs("//www.google.com/images/cleardot.gif"),ur.location&&"http"==ur.location.protocol||_s(n,"https"),ks(n)),function(e,t){const n=new Ri;if(ur.Image){const a=new Image;a.onload=vr(Js,n,a,"TestLoadImage: loaded",!0,t),a.onerror=vr(Js,n,a,"TestLoadImage: error",!1,t),a.onabort=vr(Js,n,a,"TestLoadImage: abort",!1,t),a.ontimeout=vr(Js,n,a,"TestLoadImage: timeout",!1,t),ur.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=e}else t(!1)}(n.toString(),a)}else ji(2);e.H=0,e.h&&e.h.za(t),Lo(e),Co(e)}function Lo(e){if(e.H=0,e.ma=[],e.h){const t=Ws(e.i);0==t.length&&0==e.j.length||(wr(e.ma,t),wr(e.ma,e.j),e.i.i.length=0,br(e.j),e.j.length=0),e.h.ya()}}function Fo(e,t,n){var a=n instanceof bs?ws(n):new bs(n);if(""!=a.g)t&&(a.g=t+"."+a.g),Is(a,a.m);else{var r=ur.location;a=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var i=new bs(null);a&&_s(i,a),t&&(i.g=t),r&&Is(i,r),n&&(i.l=n),a=i}return n=e.F,t=e.Da,n&&t&&Cs(a,n,t),Cs(a,"VER",e.ra),xo(e,a),a}function Bo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new so(new Zs({ob:!0})):new so(e.va)).Oa(e.J),t}function Uo(){}function $o(){if(Vr&&!(10<=Number($r)))throw Error("Environmental error: no available transport.")}function jo(e,t){di.call(this),this.g=new _o(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Sr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Sr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ho(this)}function zo(e){Ji.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qo(){Zi.call(this),this.status=1}function Ho(e){this.g=e}function Ko(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Go(e,t,n){n||(n=0);var a=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)a[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)a[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var i=e.g[3],s=t+(i^n&(r^i))+a[0]+3614090360&4294967295;s=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=n+(s<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(r^i))+a[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=i+(r^t&(n^r))+a[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^i&(t^n))+a[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^r&(i^t))+a[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(r^i&(n^r))+a[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i&(n^r))+a[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^r&(t^n))+a[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(t^n&(i^t))+a[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(r^i))+a[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^r^i)+a[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^r^i)+a[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^r)+a[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(i^t^n)+a[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^i^t)+a[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^(n|~i))+a[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(n|~i))+a[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(r^(n|~i))+a[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(t^(i|~n))+a[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(r|~t))+a[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((i=(t=n+((s=t+(r^(n|~i))+a[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~r))+a[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=i+((s=r+(t^(i|~n))+a[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+a[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function Wo(e,t){this.h=t;for(var n=[],a=!0,r=e.length-1;0<=r;r--){var i=0|e[r];a&&i==t||(n[r]=i,a=!1)}this.g=n}(sr=so.prototype).Oa=function(e){this.M=e},sr.ha=function(e,t,n,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Yi.g(),this.C=this.u?Wi(this.u):Wi(Yi),this.g.onreadystatechange=fr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void co(this,i)}if(e=n||"",n=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var r in a)n.set(r,a[r]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const e of a.keys())n.set(e,a.get(e))}a=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=ur.FormData&&e instanceof ur.FormData,!(0<=yr(uo,t))||a||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vo(this),0<this.B&&((this.L=function(e){return Vr&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fr(this.ua,this)):this.A=xi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){co(this,i)}},sr.ua=function(){void 0!==lr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},sr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hi(this,"complete"),hi(this,"abort"),fo(this))},sr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fo(this,!0)),so.$.N.call(this)},sr.La=function(){this.s||(this.G||this.v||this.l?po(this):this.kb())},sr.kb=function(){po(this)},sr.isActive=function(){return!!this.g},sr.da=function(){try{return 2<mo(this)?this.g.status:-1}catch(Tr){return-1}},sr.ja=function(){try{return this.g?this.g.responseText:""}catch(Tr){return""}},sr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),io(t)}},sr.Ia=function(){return this.m},sr.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(sr=_o.prototype).ra=8,sr.H=1,sr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ts(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Qr(i),Xr(i,this.U)):i=this.U),null!==this.o||this.O||(r.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var a=this.j[n];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(t+=a)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=To(this,r,t),Cs(n=ws(this.I),"RID",e),Cs(n,"CVER",22),this.F&&Cs(n,"X-HTTP-Session-Id",this.F),xo(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(yo(i)))+"&"+t:this.o&&bo(n,this.o,i)),Ks(this.i,r),this.bb&&Cs(n,"TYPE","init"),this.P?(Cs(n,"$req",t),Cs(n,"SID","null"),r.aa=!0,ss(r,n,null)):ss(r,n,t),this.H=2}}else 3==this.H&&(e?Eo(this,e):0==this.j.length||zs(this.i)||Eo(this))},sr.Ma=function(){if(this.u=null,Do(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qi(fr(this.jb,this),e)}},sr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ji(10),So(this),Do(this))},sr.ib=function(){null!=this.v&&(this.v=null,So(this),No(this),ji(19))},sr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ji(2)):(this.l.info("Failed to ping google.com"),ji(1))},sr.isActive=function(){return!!this.h&&this.h.isActive(this)},(sr=Uo.prototype).Ba=function(){},sr.Aa=function(){},sr.za=function(){},sr.ya=function(){},sr.isActive=function(){return!0},sr.Va=function(){},$o.prototype.g=function(e,t){return new jo(e,t)},mr(jo,di),jo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ji(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Fo(e,null,e.Y),ko(e)},jo.prototype.close=function(){Io(this.g)},jo.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=fi(e),e=n);t.j.push(new Us(t.fb++,e)),3==t.H&&ko(t)},jo.prototype.N=function(){this.g.h=null,delete this.j,Io(this.g),delete this.g,jo.$.N.call(this)},mr(zo,Ji),mr(qo,Zi),mr(Ho,Uo),Ho.prototype.Ba=function(){hi(this.g,"a")},Ho.prototype.Aa=function(e){hi(this.g,new zo(e))},Ho.prototype.za=function(e){hi(this.g,new qo)},Ho.prototype.ya=function(){hi(this.g,"b")},mr(Ko,function(){this.blockSize=-1}),Ko.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ko.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,a=this.m,r=this.h,i=0;i<t;){if(0==r)for(;i<=n;)Go(this,e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(a[r++]=e.charCodeAt(i++),r==this.blockSize){Go(this,a),r=0;break}}else for(;i<t;)if(a[r++]=e[i++],r==this.blockSize){Go(this,a),r=0;break}}this.h=r,this.i+=t},Ko.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var a=0;32>a;a+=8)e[n++]=this.g[t]>>>a&255;return e};var Qo={};function Yo(e){return-128<=e&&128>e?function(e,t){var n=Qo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Wo([0|e],0>e?-1:0)}):new Wo([0|e],0>e?-1:0)}function Xo(e){if(isNaN(e)||!isFinite(e))return Zo;if(0>e)return rl(Xo(-e));for(var t=[],n=1,a=0;e>=n;a++)t[a]=e/n|0,n*=Jo;return new Wo(t,0)}var Jo=4294967296,Zo=Yo(0),el=Yo(1),tl=Yo(16777216);function nl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function al(e){return-1==e.h}function rl(e){for(var t=e.g.length,n=[],a=0;a<t;a++)n[a]=~e.g[a];return new Wo(n,~e.h).add(el)}function il(e,t){return e.add(rl(t))}function sl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ol(e,t){this.g=e,this.h=t}function ll(e,t){if(nl(t))throw Error("division by zero");if(nl(e))return new ol(Zo,Zo);if(al(e))return t=ll(rl(e),t),new ol(rl(t.g),rl(t.h));if(al(t))return t=ll(e,rl(t)),new ol(rl(t.g),t.h);if(30<e.g.length){if(al(e)||al(t))throw Error("slowDivide_ only works with positive integers.");for(var n=el,a=t;0>=a.X(e);)n=ul(n),a=ul(a);var r=cl(n,1),i=cl(a,1);for(a=cl(a,2),n=cl(n,2);!nl(a);){var s=i.add(a);0>=s.X(e)&&(r=r.add(n),i=s),a=cl(a,1),n=cl(n,1)}return t=il(e,r.R(t)),new ol(r,t)}for(r=Zo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),a=48>=(a=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,a-48),s=(i=Xo(n)).R(t);al(s)||0<s.X(e);)s=(i=Xo(n-=a)).R(t);nl(i)&&(i=el),r=r.add(i),e=il(e,s)}return new ol(r,e)}function ul(e){for(var t=e.g.length+1,n=[],a=0;a<t;a++)n[a]=e.D(a)<<1|e.D(a-1)>>>31;return new Wo(n,e.h)}function cl(e,t){var n=t>>5;t%=32;for(var a=e.g.length-n,r=[],i=0;i<a;i++)r[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new Wo(r,e.h)}(sr=Wo.prototype).ea=function(){if(al(this))return-rl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var a=this.D(n);e+=(0<=a?a:Jo+a)*t,t*=Jo}return e},sr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(nl(this))return"0";if(al(this))return"-"+rl(this).toString(e);for(var t=Xo(Math.pow(e,6)),n=this,a="";;){var r=ll(n,t).g,i=((0<(n=il(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(nl(n=r))return i+a;for(;6>i.length;)i="0"+i;a=i+a}},sr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},sr.X=function(e){return al(e=il(this,e))?-1:nl(e)?0:1},sr.abs=function(){return al(this)?rl(this):this},sr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0,r=0;r<=t;r++){var i=a+(65535&this.D(r))+(65535&e.D(r)),s=(i>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);a=s>>>16,i&=65535,s&=65535,n[r]=s<<16|i}return new Wo(n,-2147483648&n[n.length-1]?-1:0)},sr.R=function(e){if(nl(this)||nl(e))return Zo;if(al(this))return al(e)?rl(this).R(rl(e)):rl(rl(this).R(e));if(al(e))return rl(this.R(rl(e)));if(0>this.X(tl)&&0>e.X(tl))return Xo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var r=0;r<e.g.length;r++){var i=this.D(a)>>>16,s=65535&this.D(a),o=e.D(r)>>>16,l=65535&e.D(r);n[2*a+2*r]+=s*l,sl(n,2*a+2*r),n[2*a+2*r+1]+=i*l,sl(n,2*a+2*r+1),n[2*a+2*r+1]+=s*o,sl(n,2*a+2*r+1),n[2*a+2*r+2]+=i*o,sl(n,2*a+2*r+2)}for(a=0;a<t;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=t;a<2*t;a++)n[a]=0;return new Wo(n,0)},sr.gb=function(e){return ll(this,e).h},sr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)&e.D(a);return new Wo(n,this.h&e.h)},sr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)|e.D(a);return new Wo(n,this.h|e.h)},sr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.D(a)^e.D(a);return new Wo(n,this.h^e.h)},$o.prototype.createWebChannel=$o.prototype.g,jo.prototype.send=jo.prototype.u,jo.prototype.open=jo.prototype.m,jo.prototype.close=jo.prototype.close,Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Ki.COMPLETE="complete",Qi.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",di.prototype.listen=di.prototype.O,so.prototype.listenOnce=so.prototype.P,so.prototype.getLastError=so.prototype.Sa,so.prototype.getLastErrorCode=so.prototype.Ia,so.prototype.getStatus=so.prototype.da,so.prototype.getResponseJson=so.prototype.Wa,so.prototype.getResponseText=so.prototype.ja,so.prototype.send=so.prototype.ha,so.prototype.setWithCredentials=so.prototype.Oa,Ko.prototype.digest=Ko.prototype.l,Ko.prototype.reset=Ko.prototype.reset,Ko.prototype.update=Ko.prototype.j,Wo.prototype.add=Wo.prototype.add,Wo.prototype.multiply=Wo.prototype.R,Wo.prototype.modulo=Wo.prototype.gb,Wo.prototype.compare=Wo.prototype.X,Wo.prototype.toNumber=Wo.prototype.ea,Wo.prototype.toString=Wo.prototype.toString,Wo.prototype.getBits=Wo.prototype.D,Wo.fromNumber=Xo,Wo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return rl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Xo(Math.pow(n,8)),r=Zo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),n);8>s?(s=Xo(Math.pow(n,s)),r=r.R(s).add(Xo(o))):r=(r=r.R(a)).add(Xo(o))}return r};var dl=Hi,hl=Ki,pl=Oi,fl=10,vl=11,ml=Zs,gl=Qi,yl=so,bl=Ko,wl=Wo;const _l="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Il.UNAUTHENTICATED=new Il(null),Il.GOOGLE_CREDENTIALS=new Il("google-credentials-uid"),Il.FIRST_PARTY=new Il("first-party-uid"),Il.MOCK_USER=new Il("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Sl="9.23.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Tn("@firebase/firestore");function kl(){return Cl.logLevel}function El(e,...t){if(Cl.logLevel<=In.DEBUG){const n=t.map(Al);Cl.debug(`Firestore (${Sl}): ${e}`,...n)}}function xl(e,...t){if(Cl.logLevel<=In.ERROR){const n=t.map(Al);Cl.error(`Firestore (${Sl}): ${e}`,...n)}}function Tl(e,...t){if(Cl.logLevel<=In.WARN){const n=t.map(Al);Cl.warn(`Firestore (${Sl}): ${e}`,...n)}}function Al(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(e="Unexpected state"){const t=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: `+e;throw xl(t),new Error(t)}function Vl(e,t){e||Nl()}function Dl(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rl extends sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ll{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Il.UNAUTHENTICATED))}shutdown(){}}class Fl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bl{constructor(e){this.t=e,this.currentUser=Il.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const a=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Ml;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ml,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await a(this.currentUser)})},s=e=>{El("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(El("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ml)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(El("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Vl("string"==typeof t.accessToken),new Ol(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vl(null===e||"string"==typeof e),new Il(e)}}class Ul{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Il.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $l{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ul(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Il.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&El("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,El("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const a=e=>{El("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>a(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?a(e):El("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Vl("string"==typeof e.token),this.T=e.token,new jl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const a=ql(40);for(let r=0;r<a.length;++r)n.length<20&&a[r]<t&&(n+=e.charAt(a[r]%62))}return n}}function Kl(e,t){return e<t?-1:e>t?1:0}function Gl(e,t,n){return e.length===t.length&&e.every((e,a)=>n(e,t[a]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Rl(Pl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Rl(Pl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Rl(Pl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rl(Pl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wl.fromMillis(Date.now())}static fromDate(e){return Wl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kl(this.nanoseconds,e.nanoseconds):Kl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ql(e)}static min(){return new Ql(new Wl(0,0))}static max(){return new Ql(new Wl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nl(),void 0===n?n=e.length-t:n>e.length-t&&Nl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Yl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const n=e.get(a),r=t.get(a);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xl extends Yl{construct(e,t,n){return new Xl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Rl(Pl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Xl(t)}static emptyPath(){return new Xl([])}}const Jl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zl extends Yl{construct(e,t,n){return new Zl(e,t,n)}static isValidIdentifier(e){return Jl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zl(["__name__"])}static fromServerFormat(e){const t=[];let n="",a=0;const r=()=>{if(0===n.length)throw new Rl(Pl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;a<e.length;){const t=e[a];if("\\"===t){if(a+1===e.length)throw new Rl(Pl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[a+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Rl(Pl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,a+=2}else"`"===t?(i=!i,a++):"."!==t||i?(n+=t,a++):(r(),a++)}if(r(),i)throw new Rl(Pl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zl(t)}static emptyPath(){return new Zl([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.path=e}static fromPath(e){return new eu(Xl.fromString(e))}static fromName(e){return new eu(Xl.fromString(e).popFirst(5))}static empty(){return new eu(Xl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new eu(new Xl(e.slice()))}}function tu(e){return new nu(e.readTime,e.key,-1)}class nu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nu(Ql.min(),eu.empty(),-1)}static max(){return new nu(Ql.max(),eu.empty(),-1)}}function au(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=eu.comparator(e.documentKey,t.documentKey),0!==n?n:Kl(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class ru{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(e){if(e.code!==Pl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;El("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new su((n,a)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,a)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof su?t:su.resolve(t)}catch(t){return su.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):su.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):su.reject(t)}static resolve(e){return new su((t,n)=>{t(e)})}static reject(e){return new su((t,n)=>{n(e)})}static waitFor(e){return new su((t,n)=>{let a=0,r=0,i=!1;e.forEach(e=>{++a,e.next(()=>{++r,i&&r===a&&t()},e=>n(e))}),i=!0,r===a&&t()})}static or(e){let t=su.resolve(!1);for(const n of e)t=t.next(e=>e?su.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,a)=>{n.push(t.call(this,e,a))}),this.waitFor(n)}static mapArray(e,t){return new su((n,a)=>{const r=e.length,i=new Array(r);let s=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++s,s===r&&n(i)},e=>a(e))}})}static doWhile(e,t){return new su((n,a)=>{const r=()=>{!0===e()?t().next(()=>{r()},a):n()};r()})}}function ou(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function uu(e){return null==e}function cu(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function du(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lu.ct=-1;class fu{constructor(e,t){this.comparator=e,this.root=t||mu.EMPTY}insert(e,t){return new fu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mu.BLACK,null,null))}remove(e){return new fu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(0===a)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vu(this.root,e,this.comparator,!0)}}class vu{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&a&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mu{constructor(e,t,n,a,r){this.key=e,this.value=t,this.color=null!=n?n:mu.RED,this.left=null!=a?a:mu.EMPTY,this.right=null!=r?r:mu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,r){return new mu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=a?a:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const r=n(e,a.key);return a=r<0?a.copy(null,null,null,a.left.insert(e,t,n),null):0===r?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return mu.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nl();if(this.right.isRed())throw Nl();const e=this.left.check();if(e!==this.right.check())throw Nl();return e+(this.isRed()?0:1)}}mu.EMPTY=null,mu.RED=!0,mu.BLACK=!1,mu.EMPTY=new class{constructor(){this.size=0}get key(){throw Nl()}get value(){throw Nl()}get color(){throw Nl()}get left(){throw Nl()}get right(){throw Nl()}copy(e,t,n,a,r){return this}insert(e,t,n){return new mu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gu{constructor(e){this.comparator=e,this.data=new fu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yu(this.data.getIterator())}getIteratorFrom(e){return new yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,a=n.getNext().key;if(0!==this.comparator(e,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gu(this.comparator);return t.data=e,t}}class yu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.fields=e,e.sort(Zl.comparator)}static empty(){return new bu([])}unionWith(e){let t=new gu(Zl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new bu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new wu("Invalid base64 string: "+t):t}}(e);return new _u(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _u(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_u.EMPTY_BYTE_STRING=new _u("");const Iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Su(e){if(Vl(!!e),"string"==typeof e){let t=0;const n=Iu.exec(e);if(Vl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Cu(e.seconds),nanos:Cu(e.nanos)}}function Cu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ku(e){return"string"==typeof e?_u.fromBase64String(e):_u.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xu(e){const t=e.mapValue.fields.__previous_value__;return Eu(t)?xu(t):t}function Tu(e){const t=Su(e.mapValue.fields.__local_write_time__.timestampValue);return new Wl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t,n,a,r,i,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}class Nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu={};function Du(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Eu(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:10:Nl()}function Pu(e,t){if(e===t)return!0;const n=Du(e);if(n!==Du(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tu(e).isEqual(Tu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Su(e.timestampValue),a=Su(t.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return a=t,ku(e.bytesValue).isEqual(ku(a.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cu(e.geoPointValue.latitude)===Cu(t.geoPointValue.latitude)&&Cu(e.geoPointValue.longitude)===Cu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cu(e.integerValue)===Cu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cu(e.doubleValue),a=Cu(t.doubleValue);return n===a?cu(n)===cu(a):isNaN(n)&&isNaN(a)}return!1}(e,t);case 9:return Gl(e.arrayValue.values||[],t.arrayValue.values||[],Pu);case 10:return function(e,t){const n=e.mapValue.fields||{},a=t.mapValue.fields||{};if(du(n)!==du(a))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===a[r]||!Pu(n[r],a[r])))return!1;return!0}(e,t);default:return Nl()}var a}function Ru(e,t){return void 0!==(e.values||[]).find(e=>Pu(e,t))}function Mu(e,t){if(e===t)return 0;const n=Du(e),a=Du(t);if(n!==a)return Kl(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cu(e.integerValue||e.doubleValue),a=Cu(t.integerValue||t.doubleValue);return n<a?-1:n>a?1:n===a?0:isNaN(n)?isNaN(a)?0:-1:1}(e,t);case 3:return Ou(e.timestampValue,t.timestampValue);case 4:return Ou(Tu(e),Tu(t));case 5:return Kl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ku(e),a=ku(t);return n.compareTo(a)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),a=t.split("/");for(let r=0;r<n.length&&r<a.length;r++){const e=Kl(n[r],a[r]);if(0!==e)return e}return Kl(n.length,a.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Kl(Cu(e.latitude),Cu(t.latitude));return 0!==n?n:Kl(Cu(e.longitude),Cu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],a=t.values||[];for(let r=0;r<n.length&&r<a.length;++r){const e=Mu(n[r],a[r]);if(e)return e}return Kl(n.length,a.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vu&&t===Vu)return 0;if(e===Vu)return 1;if(t===Vu)return-1;const n=e.fields||{},a=Object.keys(n),r=t.fields||{},i=Object.keys(r);a.sort(),i.sort();for(let s=0;s<a.length&&s<i.length;++s){const e=Kl(a[s],i[s]);if(0!==e)return e;const t=Mu(n[a[s]],r[i[s]]);if(0!==t)return t}return Kl(a.length,i.length)}(e.mapValue,t.mapValue);default:throw Nl()}}function Ou(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Kl(e,t);const n=Su(e),a=Su(t),r=Kl(n.seconds,a.seconds);return 0!==r?r:Kl(n.nanos,a.nanos)}function Lu(e){return Fu(e)}function Fu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Su(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ku(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,eu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const a of e.values||[])n?n=!1:t+=",",t+=Fu(a);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",a=!0;for(const r of t)a?a=!1:n+=",",n+=`${r}:${Fu(e.fields[r])}`;return n+"}"}(e.mapValue):Nl();var t,n}function Bu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Uu(e){return!!e&&"integerValue"in e}function $u(e){return!!e&&"arrayValue"in e}function ju(e){return!!e&&"nullValue"in e}function zu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qu(e){return!!e&&"mapValue"in e}function Hu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Hu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Hu(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ku{constructor(e){this.value=e}static empty(){return new Ku({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=Zl.emptyPath(),n={},a=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,a),n={},a=[],t=r.popLast()}e?n[r.lastSegment()]=Hu(e):a.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,a)}delete(e){const t=this.field(e.popLast());qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];qu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){hu(t,(t,n)=>e[t]=n);for(const a of n)delete e[a]}clone(){return new Ku(Hu(this.value))}}function Gu(e){const t=[];return hu(e.fields,(e,n)=>{const a=new Zl([e]);if(qu(n)){const e=Gu(n.mapValue).fields;if(0===e.length)t.push(a);else for(const n of e)t.push(a.child(n))}else t.push(a)}),new bu(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Wu{constructor(e,t,n,a,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Wu(e,0,Ql.min(),Ql.min(),Ql.min(),Ku.empty(),0)}static newFoundDocument(e,t,n,a){return new Wu(e,1,t,Ql.min(),n,a,0)}static newNoDocument(e,t){return new Wu(e,2,t,Ql.min(),Ql.min(),Ku.empty(),0)}static newUnknownDocument(e,t){return new Wu(e,3,t,Ql.min(),Ql.min(),Ku.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ql.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ku.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ku.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ql.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.position=e,this.inclusive=t}}function Yu(e,t,n){let a=0;for(let r=0;r<e.position.length;r++){const i=t[r],s=e.position[r];if(a=i.field.isKeyField()?eu.comparator(eu.fromName(s.referenceValue),n.key):Mu(s,n.data.field(i.field)),"desc"===i.dir&&(a*=-1),0!==a)break}return a}function Xu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pu(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{}class tc extends ec{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new lc(e,t,n):"array-contains"===t?new hc(e,n):"in"===t?new pc(e,n):"not-in"===t?new fc(e,n):"array-contains-any"===t?new vc(e,n):new tc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new uc(e,n):new cc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mu(t,this.value)):null!==t&&Du(this.value)===Du(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class nc extends ec{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new nc(e,t)}matches(e){return ac(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ac(e){return"and"===e.op}function rc(e){return function(e){for(const t of e.filters)if(t instanceof nc)return!1;return!0}(e)&&ac(e)}function ic(e){if(e instanceof tc)return e.field.canonicalString()+e.op.toString()+Lu(e.value);if(rc(e))return e.filters.map(e=>ic(e)).join(",");{const t=e.filters.map(e=>ic(e)).join(",");return`${e.op}(${t})`}}function sc(e,t){return e instanceof tc?(n=e,(a=t)instanceof tc&&n.op===a.op&&n.field.isEqual(a.field)&&Pu(n.value,a.value)):e instanceof nc?function(e,t){return t instanceof nc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,a)=>e&&sc(n,t.filters[a]),!0)}(e,t):void Nl();var n,a}function oc(e){return e instanceof tc?`${(t=e).field.canonicalString()} ${t.op} ${Lu(t.value)}`:e instanceof nc?function(e){return e.op.toString()+" {"+e.getFilters().map(oc).join(" ,")+"}"}(e):"Filter";var t}class lc extends tc{constructor(e,t,n){super(e,t,n),this.key=eu.fromName(n.referenceValue)}matches(e){const t=eu.comparator(e.key,this.key);return this.matchesComparison(t)}}class uc extends tc{constructor(e,t){super(e,"in",t),this.keys=dc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cc extends tc{constructor(e,t){super(e,"not-in",t),this.keys=dc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>eu.fromName(e.referenceValue))}class hc extends tc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $u(t)&&Ru(t.arrayValue,this.value)}}class pc extends tc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ru(this.value.arrayValue,t)}}class fc extends tc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ru(this.value.arrayValue,t)}}class vc extends tc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ru(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t=null,n=[],a=[],r=null,i=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=r,this.startAt=i,this.endAt=s,this.dt=null}}function gc(e,t=null,n=[],a=[],r=null,i=null,s=null){return new mc(e,t,n,a,r,i,s)}function yc(e){const t=Dl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ic(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),uu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Lu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Lu(e)).join(",")),t.dt=e}return t.dt}function bc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Zu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xu(e.startAt,t.startAt)&&Xu(e.endAt,t.endAt)}function wc(e){return eu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t=null,n=[],a=[],r=null,i="F",s=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=r,this.limitType=i,this.startAt=s,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ic(e){return new _c(e)}function Sc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kc(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Ec(e){return null!==e.collectionGroup}function xc(e){const t=Dl(e);if(null===t.wt){t.wt=[];const e=kc(t),n=Cc(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Ju(e)),t.wt.push(new Ju(Zl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ju(Zl.keyField(),e))}}}return t.wt}function Tc(e){const t=Dl(e);if(!t._t)if("F"===t.limitType)t._t=gc(t.path,t.collectionGroup,xc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of xc(t)){const t="desc"===r.dir?"asc":"desc";e.push(new Ju(r.field,t))}const n=t.endAt?new Qu(t.endAt.position,t.endAt.inclusive):null,a=t.startAt?new Qu(t.startAt.position,t.startAt.inclusive):null;t._t=gc(t.path,t.collectionGroup,e,t.filters,t.limit,n,a)}return t._t}function Ac(e,t){t.getFirstInequalityField(),kc(e);const n=e.filters.concat([t]);return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nc(e,t,n){return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vc(e,t){return bc(Tc(e),Tc(t))&&e.limitType===t.limitType}function Dc(e){return`${yc(Tc(e))}|lt:${e.limitType}`}function Pc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>oc(e)).join(", ")}]`),uu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Lu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Lu(e)).join(",")),`Target(${t})`}(Tc(e))}; limitType=${e.limitType})`}function Rc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):eu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(a=t,!((n=e).startAt&&!function(e,t,n){const a=Yu(e,t,n);return e.inclusive?a<=0:a<0}(n.startAt,xc(n),a)||n.endAt&&!function(e,t,n){const a=Yu(e,t,n);return e.inclusive?a>=0:a>0}(n.endAt,xc(n),a)));var n,a}function Mc(e){return(t,n)=>{let a=!1;for(const r of xc(e)){const e=Oc(r,t,n);if(0!==e)return e;a=a||r.field.isKeyField()}return 0}}function Oc(e,t,n){const a=e.field.isKeyField()?eu.comparator(t.key,n.key):function(e,t,n){const a=t.data.field(e),r=n.data.field(e);return null!==a&&null!==r?Mu(a,r):Nl()}(e.field,t,n);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return Nl()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[a,r]of n)if(this.equalsFn(a,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0===a)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<a.length;r++)if(this.equalsFn(a[r][0],e))return void(a[r]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return 1===n.length?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,(t,n)=>{for(const[a,r]of n)e(a,r)})}isEmpty(){return pu(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new fu(eu.comparator);function Bc(){return Fc}const Uc=new fu(eu.comparator);function $c(...e){let t=Uc;for(const n of e)t=t.insert(n.key,n);return t}function jc(e){let t=Uc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function zc(){return Hc()}function qc(){return Hc()}function Hc(){return new Lc(e=>e.toString(),(e,t)=>e.isEqual(t))}const Kc=new fu(eu.comparator),Gc=new gu(eu.comparator);function Wc(...e){let t=Gc;for(const n of e)t=t.add(n);return t}const Qc=new gu(Kl);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(t)?"-0":t}}function Xc(e){return{integerValue:""+e}}function Jc(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!cu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Xc(t):Yc(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function ed(e,t,n){return e instanceof ad?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Eu(t)&&(t=xu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rd?id(e,t):e instanceof sd?od(e,t):function(e,t){const n=nd(e,t),a=ud(n)+ud(e.gt);return Uu(n)&&Uu(e.gt)?Xc(a):Yc(e.serializer,a)}(e,t)}function td(e,t,n){return e instanceof rd?id(e,t):e instanceof sd?od(e,t):n}function nd(e,t){return e instanceof ld?Uu(a=t)||(n=a)&&"doubleValue"in n?t:{integerValue:0}:null;var n,a}class ad extends Zc{}class rd extends Zc{constructor(e){super(),this.elements=e}}function id(e,t){const n=cd(t);for(const a of e.elements)n.some(e=>Pu(e,a))||n.push(a);return{arrayValue:{values:n}}}class sd extends Zc{constructor(e){super(),this.elements=e}}function od(e,t){let n=cd(t);for(const a of e.elements)n=n.filter(e=>!Pu(e,a));return{arrayValue:{values:n}}}class ld extends Zc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ud(e){return Cu(e.integerValue||e.doubleValue)}function cd(e){return $u(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.field=e,this.transform=t}}class hd{constructor(e,t){this.version=e,this.transformResults=t}}class pd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pd}static exists(e){return new pd(void 0,e)}static updateTime(e){return new pd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class vd{}function md(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ed(e.key,pd.none()):new _d(e.key,e.data,pd.none());{const n=e.data,a=Ku.empty();let r=new gu(Zl.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?a.delete(e):a.set(e,t),r=r.add(e)}return new Id(e.key,a,new bu(r.toArray()),pd.none())}}function gd(e,t,n){var a;e instanceof _d?function(e,t,n){const a=e.value.clone(),r=Cd(e.fieldTransforms,t,n.transformResults);a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Id?function(e,t,n){if(!fd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const a=Cd(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Sd(e)),r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(a=n,t.convertToNoDocument(a.version).setHasCommittedMutations())}function yd(e,t,n,a){return e instanceof _d?function(e,t,n,a){if(!fd(e.precondition,t))return n;const r=e.value.clone(),i=kd(e.fieldTransforms,a,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,a):e instanceof Id?function(e,t,n,a){if(!fd(e.precondition,t))return n;const r=kd(e.fieldTransforms,a,t),i=t.data;return i.setAll(Sd(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,a):(r=t,i=n,fd(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function bd(e,t){let n=null;for(const a of e.fieldTransforms){const e=t.data.field(a.field),r=nd(a.transform,e||null);null!=r&&(null===n&&(n=Ku.empty()),n.set(a.field,r))}return n||null}function wd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,a=t.fieldTransforms,!!(void 0===n&&void 0===a||n&&a&&Gl(n,a,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,a=t.transform,n instanceof rd&&a instanceof rd||n instanceof sd&&a instanceof sd?Gl(n.elements,a.elements,Pu):n instanceof ld&&a instanceof ld?Pu(n.gt,a.gt):n instanceof ad&&a instanceof ad);var n,a}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,a}class _d extends vd{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Id extends vd{constructor(e,t,n,a,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Sd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=e.data.field(n);t.set(n,a)}}),t}function Cd(e,t,n){const a=new Map;Vl(e.length===n.length);for(let r=0;r<n.length;r++){const i=e[r],s=i.transform,o=t.data.field(i.field);a.set(i.field,td(s,o,n[r]))}return a}function kd(e,t,n){const a=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);a.set(r.field,ed(e,i,t))}return a}class Ed extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xd extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const t=this.mutations[a];t.key.isEqual(e.key)&&gd(t,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=yd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=yd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qc();return this.mutations.forEach(a=>{const r=e.get(a.key),i=r.overlayedDocument;let s=this.applyToLocalView(i,r.mutatedFields);s=t.has(a.key)?null:s;const o=md(i,s);null!==o&&n.set(a.key,o),i.isValidDocument()||i.convertToNoDocument(Ql.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wc())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(e,t)=>wd(e,t))&&Gl(this.baseMutations,e.baseMutations,(e,t)=>wd(e,t))}}class Ad{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){Vl(e.mutations.length===n.length);let a=Kc;const r=e.mutations;for(let i=0;i<r.length;i++)a=a.insert(r[i].key,n[i].version);return new Ad(e,t,n,a)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd,Pd;function Rd(e){if(void 0===e)return xl("GRPC error has no .code"),Pl.UNKNOWN;switch(e){case Dd.OK:return Pl.OK;case Dd.CANCELLED:return Pl.CANCELLED;case Dd.UNKNOWN:return Pl.UNKNOWN;case Dd.DEADLINE_EXCEEDED:return Pl.DEADLINE_EXCEEDED;case Dd.RESOURCE_EXHAUSTED:return Pl.RESOURCE_EXHAUSTED;case Dd.INTERNAL:return Pl.INTERNAL;case Dd.UNAVAILABLE:return Pl.UNAVAILABLE;case Dd.UNAUTHENTICATED:return Pl.UNAUTHENTICATED;case Dd.INVALID_ARGUMENT:return Pl.INVALID_ARGUMENT;case Dd.NOT_FOUND:return Pl.NOT_FOUND;case Dd.ALREADY_EXISTS:return Pl.ALREADY_EXISTS;case Dd.PERMISSION_DENIED:return Pl.PERMISSION_DENIED;case Dd.FAILED_PRECONDITION:return Pl.FAILED_PRECONDITION;case Dd.ABORTED:return Pl.ABORTED;case Dd.OUT_OF_RANGE:return Pl.OUT_OF_RANGE;case Dd.UNIMPLEMENTED:return Pl.UNIMPLEMENTED;case Dd.DATA_LOSS:return Pl.DATA_LOSS;default:return Nl()}}(Pd=Dd||(Dd={}))[Pd.OK=0]="OK",Pd[Pd.CANCELLED=1]="CANCELLED",Pd[Pd.UNKNOWN=2]="UNKNOWN",Pd[Pd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pd[Pd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pd[Pd.NOT_FOUND=5]="NOT_FOUND",Pd[Pd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pd[Pd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pd[Pd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pd[Pd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pd[Pd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pd[Pd.ABORTED=10]="ABORTED",Pd[Pd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pd[Pd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pd[Pd.INTERNAL=13]="INTERNAL",Pd[Pd.UNAVAILABLE=14]="UNAVAILABLE",Pd[Pd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Md{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Od}static getOrCreateInstance(){return null===Od&&(Od=new Md),Od}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Od=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ld=new wl([4294967295,4294967295],0);function Fd(e){const t=(new TextEncoder).encode(e),n=new bl;return n.update(t),new Uint8Array(n.digest())}function Bd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),a=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new wl([n,a],0),new wl([r,i],0)]}class Ud{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $d(`Invalid padding: ${t}`);if(n<0)throw new $d(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new $d(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new $d(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=wl.fromNumber(this.It)}Et(e,t,n){let a=e.add(t.multiply(wl.fromNumber(n)));return 1===a.compare(Ld)&&(a=new wl([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fd(e),[n,a]=Bd(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,a,r);if(!this.At(e))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new Ud(r,a,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Fd(e),[n,a]=Bd(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,a,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,n,a,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,zd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new jd(Ql.min(),a,new fu(Kl),Bc(),Wc())}}class zd{constructor(e,t,n,a,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zd(n,t,Wc(),Wc(),Wc())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,n,a){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=a}}class Hd{constructor(e,t){this.targetId=e,this.Vt=t}}class Kd{constructor(e,t,n=_u.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class Gd{constructor(){this.St=0,this.Dt=Yd(),this.Ct=_u.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Wc(),t=Wc(),n=Wc();return this.Dt.forEach((a,r)=>{switch(r){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:Nl()}}),new zd(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Yd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Wd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Bc(),this.zt=Qd(),this.Wt=new fu(Kl)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Nl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,a=e.Vt.count,r=this.se(n);if(r){const i=r.target;if(wc(i))if(0===a){const e=new eu(i.path);this.Yt(n,e,Wu.newNoDocument(e,Ql.min()))}else Vl(1===a);else{const r=this.ie(n);if(r!==a){const a=this.re(e,r);if(0!==a){this.ee(n);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Md.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var a,r,i,s,o,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(a=null==c?void 0:c.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(i=null===(r=null==c?void 0:c.bits)||void 0===r?void 0:r.bitmap)||void 0===i?void 0:i.length)&&void 0!==s?s:0,padding:null!==(l=null===(o=null==c?void 0:c.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),u}(a,r,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:a}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ku(r).toUint8Array()}catch(u){if(u instanceof wu)return Tl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new Ud(o,i,s)}catch(u){return Tl(u instanceof $d?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===l.It?1:a!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let a=0;return n.forEach(n=>{const r=this.Gt.ue(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.vt(i)||(this.Yt(e,n,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((n,a)=>{const r=this.se(a);if(r){if(n.current&&wc(r.target)){const t=new eu(r.target.path);null!==this.jt.get(t)||this.ae(a,t)||this.Yt(a,t,Wu.newNoDocument(t,e))}n.Mt&&(t.set(a,n.Ot()),n.Ft())}});let n=Wc();this.zt.forEach((e,t)=>{let a=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(a=!1,!1)}),a&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const a=new jd(e,t,this.Wt,this.jt,n);return this.jt=Bc(),this.zt=Qd(),this.Wt=new fu(Kl),a}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Gd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new gu(Kl),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||El("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Gd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Qd(){return new fu(eu.comparator)}function Yd(){return new fu(eu.comparator)}const Xd=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Jd=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Zd=(()=>({and:"AND",or:"OR"}))();class eh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function th(e,t){return e.useProto3Json||uu(t)?t:{value:t}}function nh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ah(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rh(e,t){return nh(e,t.toTimestamp())}function ih(e){return Vl(!!e),Ql.fromTimestamp(function(e){const t=Su(e);return new Wl(t.seconds,t.nanos)}(e))}function sh(e,t){return(n=e,new Xl(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function oh(e){const t=Xl.fromString(e);return Vl(kh(t)),t}function lh(e,t){return sh(e.databaseId,t.path)}function uh(e,t){const n=oh(t);if(n.get(1)!==e.databaseId.projectId)throw new Rl(Pl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Rl(Pl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new eu(hh(n))}function ch(e,t){return sh(e.databaseId,t)}function dh(e){return new Xl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hh(e){return Vl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ph(e,t,n){return{name:lh(e,t),fields:n.value.mapValue.fields}}function fh(e,t){return{documents:[ch(e,t.path)]}}function vh(e,t){const n={structuredQuery:{}},a=t.path;null!==t.collectionGroup?(n.parent=ch(e,a),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ch(e,a.popLast()),n.structuredQuery.from=[{collectionId:a.lastSegment()}]);const r=function(e){if(0!==e.length)return Sh(nc.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const i=function(e){if(0!==e.length)return e.map(e=>{return{field:_h((t=e).field),direction:yh(t.dir)};var t})}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const s=th(e,t.limit);var o,l;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),n}function mh(e){let t=function(e){const t=oh(e);return 4===t.length?Xl.emptyPath():hh(t)}(e.parent);const n=e.structuredQuery,a=n.from?n.from.length:0;let r=null;if(a>0){Vl(1===a);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=gh(e);return t instanceof nc&&rc(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>{return new Ju(Ih((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,uu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Qu(n,t)}(n.endAt)),function(e,t,n,a,r,i,s,o){return new _c(e,t,n,a,r,i,s,o)}(t,r,s,i,o,"F",l,u)}function gh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ih(e.unaryFilter.field);return tc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ih(e.unaryFilter.field);return tc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ih(e.unaryFilter.field);return tc.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ih(e.unaryFilter.field);return tc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Nl()}}(e):void 0!==e.fieldFilter?(t=e,tc.create(Ih(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nl()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return nc.create(e.compositeFilter.filters.map(e=>gh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nl()}}(e.compositeFilter.op))}(e):Nl();var t}function yh(e){return Xd[e]}function bh(e){return Jd[e]}function wh(e){return Zd[e]}function _h(e){return{fieldPath:e.canonicalString()}}function Ih(e){return Zl.fromServerFormat(e.fieldPath)}function Sh(e){return e instanceof tc?function(e){if("=="===e.op){if(zu(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NAN"}};if(ju(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zu(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NAN"}};if(ju(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_h(e.field),op:bh(e.op),value:e.value}}}(e):e instanceof nc?function(e){const t=e.getFilters().map(e=>Sh(e));return 1===t.length?t[0]:{compositeFilter:{op:wh(e.op),filters:t}}}(e):Nl()}function Ch(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function kh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,n,a,r=Ql.min(),i=Ql.min(),s=_u.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new Eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.fe=e}}function Th(e){const t=mh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nc(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.rn=new Nh}addToCollectionParentIndex(e,t){return this.rn.add(t),su.resolve()}getCollectionParents(e,t){return su.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return su.resolve()}deleteFieldIndex(e,t){return su.resolve()}getDocumentsMatchingTarget(e,t){return su.resolve(null)}getIndexType(e,t){return su.resolve(0)}getFieldIndexes(e,t){return su.resolve([])}getNextCollectionGroupToUpdate(e){return su.resolve(null)}getMinOffset(e,t){return su.resolve(nu.min())}getMinOffsetFromCollectionGroup(e,t){return su.resolve(nu.min())}updateCollectionGroup(e,t,n){return su.resolve()}updateIndexEntries(e,t){return su.resolve()}}class Nh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new gu(Xl.comparator),r=!a.has(n);return this.index[t]=a.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new gu(Xl.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Vh(0)}static Mn(){return new Vh(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.changes=new Lc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?su.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&yd(n.mutation,e,bu.empty(),Wl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Wc()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Wc()){const a=zc();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,n).next(e=>{let t=$c();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=zc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Wc()))}populateOverlays(e,t,n){const a=[];return n.forEach(e=>{t.has(e)||a.push(e)}),this.documentOverlayCache.getOverlays(e,a).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,a){let r=Bc();const i=Hc(),s=Hc();return t.forEach((e,t)=>{const s=n.get(t.key);a.has(t.key)&&(void 0===s||s.mutation instanceof Id)?r=r.insert(t.key,t):void 0!==s?(i.set(t.key,s.mutation.getFieldMask()),yd(s.mutation,t,s.mutation.getFieldMask(),Wl.now())):i.set(t.key,bu.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Ph(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Hc();let a=new fu((e,t)=>e-t),r=Wc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let s=n.get(e)||bu.empty();s=r.applyToLocalView(i,s),n.set(e,s);const o=(a.get(r.batchId)||Wc()).add(e);a=a.insert(r.batchId,o)})}).next(()=>{const i=[],s=a.getReverseIterator();for(;s.hasNext();){const a=s.getNext(),o=a.key,l=a.value,u=qc();l.forEach(e=>{if(!r.has(e)){const a=md(t.get(e),n.get(e));null!==a&&u.set(e,a),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,u))}return su.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return a=t,eu.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ec(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var a}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next(r=>{const i=a-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-r.size):su.resolve(zc());let s=-1,o=r;return i.next(t=>su.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(t)?su.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,Wc())).next(e=>({batchId:s,changes:jc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new eu(t)).next(e=>{let t=$c();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const a=t.collectionGroup;let r=$c();return this.indexManager.getCollectionParents(e,a).next(i=>su.forEach(i,i=>{const s=(o=t,l=i.child(a),new _c(l,null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt));var o,l;return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{r=r.insert(e,t)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,n){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a))).next(e=>{a.forEach((t,n)=>{const a=n.getKey();null===e.get(a)&&(e=e.insert(a,Wu.newInvalidDocument(a)))});let n=$c();return e.forEach((e,r)=>{const i=a.get(e);void 0!==i&&yd(i.mutation,r,bu.empty(),Wl.now()),Rc(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return su.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ih(n.createTime)}),su.resolve()}getNamedQuery(e,t){return su.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(n=t).name,query:Th(n.bundledQuery),readTime:ih(n.readTime)}),su.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.overlays=new fu(eu.comparator),this.ls=new Map}getOverlay(e,t){return su.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zc();return su.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,a)=>{this.we(e,t,a)}),su.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.ls.get(n);return void 0!==a&&(a.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),su.resolve()}getOverlaysForCollection(e,t,n){const a=zc(),r=t.length+1,i=new eu(t.child("")),s=this.overlays.getIteratorFrom(i);for(;s.hasNext();){const e=s.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&a.set(e.getKey(),e)}return su.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let r=new fu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=zc(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=zc(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=a)););return su.resolve(s)}we(e,t,n){const a=this.overlays.get(n.key);if(null!==a){const e=this.ls.get(a.largestBatchId).delete(n.key);this.ls.set(a.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nd(t,n));let r=this.ls.get(t);void 0===r&&(r=Wc(),this.ls.set(t,r)),this.ls.set(t,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.fs=new gu(Fh.ds),this.ws=new gu(Fh._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Fh(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Fh(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new eu(new Xl([])),n=new Fh(t,e),a=new Fh(t,e+1),r=[];return this.ws.forEachInRange([n,a],e=>{this.ys(e),r.push(e.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new eu(new Xl([])),n=new Fh(t,e),a=new Fh(t,e+1);let r=Wc();return this.ws.forEachInRange([n,a],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Fh(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Fh{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return eu.comparator(e.key,t.key)||Kl(e.As,t.As)}static _s(e,t){return Kl(e.As,t.As)||eu.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new gu(Fh.ds)}checkEmpty(e){return su.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,a){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Td(r,t,n,a);this.mutationQueue.push(i);for(const s of a)this.Rs=this.Rs.add(new Fh(s.key,r)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return su.resolve(i)}lookupMutationBatch(e,t){return su.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.bs(n),r=a<0?0:a;return su.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return su.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return su.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Fh(t,0),a=new Fh(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,a],e=>{const t=this.Ps(e.As);r.push(t)}),su.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gu(Kl);return t.forEach(e=>{const t=new Fh(e,0),a=new Fh(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,a],e=>{n=n.add(e.As)})}),su.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let r=n;eu.isDocumentKey(r)||(r=r.child(""));const i=new Fh(new eu(r),0);let s=new gu(Kl);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===a&&(s=s.add(e.As)),!0)},i),su.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Vl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return su.forEach(t.mutations,a=>{const r=new Fh(a.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Fh(t,0),a=this.Rs.firstAfterOrEqual(n);return su.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,su.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.Ds=e,this.docs=new fu(eu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),r=a?a.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return su.resolve(n?n.document.mutableCopy():Wu.newInvalidDocument(t))}getEntries(e,t){let n=Bc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wu.newInvalidDocument(e))}),su.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let r=Bc();const i=t.path,s=new eu(i.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||au(tu(s),n)<=0||(a.has(s.key)||Rc(t,s))&&(r=r.insert(s.key,s.mutableCopy()))}return su.resolve(r)}getAllFromCollectionGroup(e,t,n,a){Nl()}Cs(e,t){return su.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new $h(this)}getSize(e){return su.resolve(this.size)}}class $h extends Dh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(n)}),su.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.persistence=e,this.xs=new Lc(e=>yc(e),bc),this.lastRemoteSnapshotVersion=Ql.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Lh,this.targetCount=0,this.Ms=Vh.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),su.resolve()}getLastRemoteSnapshotVersion(e){return su.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return su.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),su.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),su.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Vh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,su.resolve()}updateTargetData(e,t){return this.Fn(t),su.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,su.resolve()}removeTargets(e,t,n){let a=0;const r=[];return this.xs.forEach((i,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(i),r.push(this.removeMatchingKeysForTargetId(e,s.targetId)),a++)}),su.waitFor(r).next(()=>a)}getTargetCount(e){return su.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return su.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),su.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const a=this.persistence.referenceDelegate,r=[];return a&&t.forEach(t=>{r.push(a.markPotentiallyOrphaned(e,t))}),su.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),su.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return su.resolve(n)}containsKey(e,t){return su.resolve(this.ks.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.$s={},this.overlays={},this.Os=new lu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new jh(this),this.indexManager=new Ah,this.remoteDocumentCache=new Uh(e=>this.referenceDelegate.Ls(e)),this.serializer=new xh(t),this.qs=new Mh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Bh(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){El("MemoryPersistence","Starting transaction:",e);const a=new qh(this.Os.next());return this.referenceDelegate.Us(),n(a).next(e=>this.referenceDelegate.Ks(a).next(()=>e)).toPromise().then(e=>(a.raiseOnCommittedEvent(),e))}Gs(e,t){return su.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class qh extends ru{constructor(e){super(),this.currentSequenceNumber=e}}class Hh{constructor(e){this.persistence=e,this.Qs=new Lh,this.js=null}static zs(e){return new Hh(e)}get Ws(){if(this.js)return this.js;throw Nl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),su.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),su.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),su.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return su.forEach(this.Ws,n=>{const a=eu.fromPath(n);return this.Hs(e,a).next(e=>{e||t.removeEntry(a,Ql.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return su.or([()=>su.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=a}static Li(e,t){let n=Wc(),a=Wc();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:a=a.add(r.doc.key)}return new Kh(e,t.fromCache,n,a)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,a){return this.Ki(e,t).next(r=>r||this.Gi(e,t,a,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Sc(t))return su.resolve(null);let n=Tc(t);return this.indexManager.getIndexType(e,n).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Nc(t,null,"F"),n=Tc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const r=Wc(...a);return this.Ui.getDocuments(e,r).next(a=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,a);return this.zi(t,i,r,n.readTime)?this.Ki(e,Nc(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,a){return Sc(t)||a.isEqual(Ql.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(r=>{const i=this.ji(t,r);return this.zi(t,i,n,a)?this.Qi(e,t):(kl()<=In.DEBUG&&El("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Pc(t)),this.Wi(e,i,t,function(e,t){const n=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,r=Ql.fromTimestamp(1e9===a?new Wl(n+1,0):new Wl(n,a));return new nu(r,eu.empty(),t)}(a,-1)))})}ji(e,t){let n=new gu(Mc(e));return t.forEach((t,a)=>{Rc(e,a)&&(n=n.add(a))}),n}zi(e,t,n,a){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(a)>0)}Qi(e,t){return kl()<=In.DEBUG&&El("QueryEngine","Using full collection scan to execute query:",Pc(t)),this.Ui.getDocumentsMatchingQuery(e,t,nu.min())}Wi(e,t,n,a){return this.Ui.getDocumentsMatchingQuery(e,n,a).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,n,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new fu(Kl),this.Yi=new Lc(e=>yc(e),bc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rh(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}async function Qh(e,t){const n=Dl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let a;return n.mutationQueue.getAllMutationBatches(e).next(r=>(a=r,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let s=Wc();for(const e of a){r.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:r,addedBatchIds:i}))})})}function Yh(e){const t=Dl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Xh(e,t){const n=Dl(e),a=t.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const s=[];t.targetChanges.forEach((i,o)=>{const l=r.get(o);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);var c,d,h;null!==t.targetMismatches.get(o)?u=u.withResumeToken(_u.EMPTY_BYTE_STRING,Ql.min()).withLastLimboFreeSnapshotVersion(Ql.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,a)),r=r.insert(o,u),d=u,h=i,(0===(c=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&s.push(n.Bs.updateTargetData(e,u))});let o=Bc(),l=Wc();if(t.documentUpdates.forEach(a=>{t.resolvedLimboDocuments.has(a)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,a))}),s.push(function(e,t,n){let a=Wc(),r=Wc();return n.forEach(e=>a=a.add(e)),t.getEntries(e,a).next(e=>{let a=Bc();return n.forEach((n,i)=>{const s=e.get(n);i.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(Ql.min())?(t.removeEntry(n,i.readTime),a=a.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),a=a.insert(n,i)):El("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),{nr:a,sr:r}})}(e,i,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!a.isEqual(Ql.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,a));s.push(t)}return su.waitFor(s).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=r,e))}function Jh(e,t){const n=Dl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Zh(e,t,n){const a=Dl(e),r=a.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",i,e=>a.persistence.referenceDelegate.removeTarget(e,r))}catch(s){if(!ou(s))throw s;El("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}a.Ji=a.Ji.remove(t),a.Yi.delete(r.target)}function ep(e,t,n){const a=Dl(e);let r=Ql.min(),i=Wc();return a.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const a=Dl(e),r=a.Yi.get(n);return void 0!==r?su.resolve(a.Ji.get(r)):a.Bs.getTargetData(t,n)}(a,e,Tc(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>a.Hi.getDocumentsMatchingQuery(e,t,n?r:Ql.min(),n?i:Wc())).next(e=>(function(e,t,n){let a=e.Xi.get(t)||Ql.min();n.forEach((e,t)=>{t.readTime.compareTo(a)>0&&(a=t.readTime)}),e.Xi.set(t,a)}(a,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:i})))}class tp{constructor(){this.activeTargetIds=Qc}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(){this.Hr=new tp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new tp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{Yr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){El("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){El("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip=null;function sp(){return null===ip?ip=268435456+Math.round(2147483648*Math.random()):ip++,"0x"+ip.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="WebChannelConnection";class cp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,a,r){const i=sp(),s=this.To(e,t);El("RestConnection",`Sending RPC '${e}' ${i}:`,s,n);const o={};return this.Eo(o,a,r),this.Ao(e,s,o,n).then(t=>(El("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw Tl("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",s,"request:",n),t})}vo(e,t,n,a,r,i){return this.Io(e,t,n,a,r)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=op[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,a){const r=sp();return new Promise((i,s)=>{const o=new yl;o.setWithCredentials(!0),o.listenOnce(hl.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case dl.NO_ERROR:const t=o.getResponseJson();El(up,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),i(t);break;case dl.TIMEOUT:El(up,`RPC '${e}' ${r} timed out`),s(new Rl(Pl.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const n=o.getStatus();if(El(up,`RPC '${e}' ${r} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pl).indexOf(t)>=0?t:Pl.UNKNOWN}(t.status);s(new Rl(e,t.message))}else s(new Rl(Pl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Rl(Pl.UNAVAILABLE,"Connection failed."));break;default:Nl()}}finally{El(up,`RPC '${e}' ${r} completed.`)}});const l=JSON.stringify(a);El(up,`RPC '${e}' ${r} sending request:`,a),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const a=sp(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new $o,s=Fi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new ml({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=r.join("");El(up,`Creating RPC '${e}' stream ${a}: ${u}`,o);const c=i.createWebChannel(u,o);let d=!1,h=!1;const p=new lp({ro:t=>{h?El(up,`Not sending because RPC '${e}' stream ${a} is closed:`,t):(d||(El(up,`Opening RPC '${e}' stream ${a} transport.`),c.open(),d=!0),El(up,`RPC '${e}' stream ${a} sending:`,t),c.send(t))},oo:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(c,gl.EventType.OPEN,()=>{h||El(up,`RPC '${e}' stream ${a} transport opened.`)}),f(c,gl.EventType.CLOSE,()=>{h||(h=!0,El(up,`RPC '${e}' stream ${a} transport closed`),p.wo())}),f(c,gl.EventType.ERROR,t=>{h||(h=!0,Tl(up,`RPC '${e}' stream ${a} transport errored:`,t),p.wo(new Rl(Pl.UNAVAILABLE,"The operation could not be completed")))}),f(c,gl.EventType.MESSAGE,t=>{var n;if(!h){const r=t.data[0];Vl(!!r);const i=r,s=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){El(up,`RPC '${e}' stream ${a} received error:`,s);const t=s.status;let n=function(e){const t=Dd[e];if(void 0!==t)return Rd(t)}(t),r=s.message;void 0===n&&(n=Pl.INTERNAL,r="Unknown error status: "+t+" with message "+s.message),h=!0,p.wo(new Rl(n,r)),c.close()}else El(up,`RPC '${e}' stream ${a} received:`,r),p._o(r)}}),f(s,pl.STAT_EVENT,t=>{t.stat===fl?El(up,`RPC '${e}' stream ${a} detected buffering proxy`):t.stat===vl&&El(up,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function dp(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(e){return new eh(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t,n=1e3,a=1.5,r=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=a,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-n);a>0&&El("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,n,a,r,i,s,o){this.ii=e,this.$o=n,this.Oo=a,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new pp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Pl.RESOURCE_EXHAUSTED?(xl(t.toString()),xl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Pl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new Rl(Pl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return El("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(El("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vp extends fp{constructor(e,t,n,a,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,i),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(a=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===a?1:"REMOVE"===a?2:"CURRENT"===a?3:"RESET"===a?4:Nl(),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Vl(void 0===t||"string"==typeof t),_u.fromBase64String(t||"")):(Vl(void 0===t||t instanceof Uint8Array),_u.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Pl.UNKNOWN:Rd(e.code);return new Rl(t,e.message||"")}(o);n=new Kd(r,i,s,l||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const r=uh(e,a.document.name),i=ih(a.document.updateTime),s=a.document.createTime?ih(a.document.createTime):Ql.min(),o=new Ku({mapValue:{fields:a.document.fields}}),l=Wu.newFoundDocument(r,i,s,o),u=a.targetIds||[],c=a.removedTargetIds||[];n=new qd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const r=uh(e,a.document),i=a.readTime?ih(a.readTime):Ql.min(),s=Wu.newNoDocument(r,i),o=a.removedTargetIds||[];n=new qd([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const r=uh(e,a.document),i=a.removedTargetIds||[];n=new qd([],i,r,null)}else{if(!("filter"in t))return Nl();{t.filter;const e=t.filter;e.targetId;const{count:a=0,unchangedNames:r}=e,i=new Vd(a,r),s=e.targetId;n=new Hd(s,i)}}var a;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ql.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ql.min():t.readTime?ih(t.readTime):Ql.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=dh(this.serializer),t.addTarget=function(e,t){let n;const a=t.target;if(n=wc(a)?{documents:fh(e,a)}:{query:vh(e,a)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ah(e,t.resumeToken);const a=th(e,t.expectedCount);null!==a&&(n.expectedCount=a)}else if(t.snapshotVersion.compareTo(Ql.min())>0){n.readTime=nh(e,t.snapshotVersion.toTimestamp());const a=th(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=dh(this.serializer),t.removeTarget=e,this.Wo(t)}}class mp extends fp{constructor(e,t,n,a,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,i),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Vl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Vl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?ih(e.updateTime):ih(t);return n.isEqual(Ql.min())&&(n=ih(t)),new hd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ih(e.commitTime);return this.listener.cu(n,t)}return Vl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof _d)n={update:ph(e,t.key,t.value)};else if(t instanceof Ed)n={delete:lh(e,t.key)};else if(t instanceof Id)n={update:ph(e,t.key,t.data),updateMask:Ch(t.fieldMask)};else{if(!(t instanceof xd))return Nl();n={verify:lh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ad)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ld)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Nl()}(0,e))),t.precondition.isNone||(n.currentDocument=(a=e,void 0!==(r=t.precondition).updateTime?{updateTime:rh(a,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Nl())),n;var a,r}(this.serializer,e))};this.Wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends class{}{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Rl(Pl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Io(e,t,n,a,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Pl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Rl(Pl.UNKNOWN,e.toString())})}vo(e,t,n,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.vo(e,t,n,r,i,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Pl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Rl(Pl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(xl(t),this.mu=!1):El("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,n,a,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Tp(this)&&(El("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Dl(e);t.vu.add(4),await _p(t),t.bu.set("Unknown"),t.vu.delete(4),await wp(t)}(this))})}),this.bu=new yp(n,a)}}async function wp(e){if(Tp(e))for(const t of e.Ru)await t(!0)}async function _p(e){for(const t of e.Ru)await t(!1)}function Ip(e,t){const n=Dl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),xp(n)?Ep(n):Hp(n).Ko()&&Cp(n,t))}function Sp(e,t){const n=Dl(e),a=Hp(n);n.Au.delete(t),a.Ko()&&kp(n,t),0===n.Au.size&&(a.Ko()?a.jo():Tp(n)&&n.bu.set("Unknown"))}function Cp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ql.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hp(e).su(t)}function kp(e,t){e.Vu.qt(t),Hp(e).iu(t)}function Ep(e){e.Vu=new Wd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Hp(e).start(),e.bu.gu()}function xp(e){return Tp(e)&&!Hp(e).Uo()&&e.Au.size>0}function Tp(e){return 0===Dl(e).vu.size}function Ap(e){e.Vu=void 0}async function Np(e){e.Au.forEach((t,n)=>{Cp(e,t)})}async function Vp(e,t){Ap(e),xp(e)?(e.bu.Iu(t),Ep(e)):e.bu.set("Unknown")}async function Dp(e,t,n){if(e.bu.set("Online"),t instanceof Kd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const a of t.targetIds)e.Au.has(a)&&(await e.remoteSyncer.rejectListen(a,n),e.Au.delete(a),e.Vu.removeTarget(a))}(e,t)}catch(a){El("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Pp(e,a)}else if(t instanceof qd?e.Vu.Ht(t):t instanceof Hd?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ql.min()))try{const t=await Yh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,a)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Au.get(a);r&&e.Au.set(a,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const a=e.Au.get(t);if(!a)return;e.Au.set(t,a.withResumeToken(_u.EMPTY_BYTE_STRING,a.snapshotVersion)),kp(e,t);const r=new Eh(a.target,t,n,a.sequenceNumber);Cp(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(r){El("RemoteStore","Failed to raise snapshot:",r),await Pp(e,r)}}async function Pp(e,t,n){if(!ou(t))throw t;e.vu.add(1),await _p(e),e.bu.set("Offline"),n||(n=()=>Yh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{El("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await wp(e)})}function Rp(e,t){return t().catch(n=>Pp(e,n,t))}async function Mp(e){const t=Dl(e),n=Kp(t);let a=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Op(t);)try{const e=await Jh(t.localStore,a);if(null===e){0===t.Eu.length&&n.jo();break}a=e.batchId,Lp(t,e)}catch(r){await Pp(t,r)}Fp(t)&&Bp(t)}function Op(e){return Tp(e)&&e.Eu.length<10}function Lp(e,t){e.Eu.push(t);const n=Kp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Fp(e){return Tp(e)&&!Kp(e).Uo()&&e.Eu.length>0}function Bp(e){Kp(e).start()}async function Up(e){Kp(e).hu()}async function $p(e){const t=Kp(e);for(const n of e.Eu)t.uu(n.mutations)}async function jp(e,t,n){const a=e.Eu.shift(),r=Ad.from(a,t,n);await Rp(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Mp(e)}async function zp(e,t){t&&Kp(e).ou&&await async function(e,t){if(function(e){switch(e){default:return Nl();case Pl.CANCELLED:case Pl.UNKNOWN:case Pl.DEADLINE_EXCEEDED:case Pl.RESOURCE_EXHAUSTED:case Pl.INTERNAL:case Pl.UNAVAILABLE:case Pl.UNAUTHENTICATED:return!1;case Pl.INVALID_ARGUMENT:case Pl.NOT_FOUND:case Pl.ALREADY_EXISTS:case Pl.PERMISSION_DENIED:case Pl.FAILED_PRECONDITION:case Pl.ABORTED:case Pl.OUT_OF_RANGE:case Pl.UNIMPLEMENTED:case Pl.DATA_LOSS:return!0}}(n=t.code)&&n!==Pl.ABORTED){const n=e.Eu.shift();Kp(e).Qo(),await Rp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Mp(e)}var n}(e,t),Fp(e)&&Bp(e)}async function qp(e,t){const n=Dl(e);n.asyncQueue.verifyOperationInProgress(),El("RemoteStore","RemoteStore received new credentials");const a=Tp(n);n.vu.add(3),await _p(n),a&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await wp(n)}function Hp(e){return e.Su||(e.Su=function(e,t,n){const a=Dl(e);return a.fu(),new vp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,n)}(e.datastore,e.asyncQueue,{uo:Np.bind(null,e),ao:Vp.bind(null,e),nu:Dp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),xp(e)?Ep(e):e.bu.set("Unknown")):(await e.Su.stop(),Ap(e))})),e.Su}function Kp(e){return e.Du||(e.Du=function(e,t,n){const a=Dl(e);return a.fu(),new mp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,n)}(e.datastore,e.asyncQueue,{uo:Up.bind(null,e),ao:zp.bind(null,e),au:$p.bind(null,e),cu:jp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Mp(e)):(await e.Du.stop(),e.Eu.length>0&&(El("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Gp{constructor(e,t,n,a,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=r,this.deferred=new Ml,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,a,r){const i=Date.now()+n,s=new Gp(e,t,i,a,r);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rl(Pl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(e,t){if(xl("AsyncQueue",`${t}: ${e}`),ou(e))return new Rl(Pl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||eu.comparator(t.key,n.key):(e,t)=>eu.comparator(e.key,t.key),this.keyedMap=$c(),this.sortedSet=new fu(this.comparator)}static emptySet(e){return new Qp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,a=n.getNext().key;if(!e.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Qp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.Cu=new fu(eu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Nl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Xp{constructor(e,t,n,a,r,i,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,a,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Xp(e,t,Qp.emptySet(t),i,n,a,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.Nu=void 0,this.listeners=[]}}class Zp{constructor(){this.queries=new Lc(e=>Dc(e),Vc),this.onlineState="Unknown",this.ku=new Set}}function ef(e,t){const n=Dl(e);let a=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(r)&&(a=!0);t.Nu=r}}a&&nf(n)}function tf(e,t,n){const a=Dl(e),r=a.queries.get(t);if(r)for(const i of r.listeners)i.onError(n);a.queries.delete(t)}function nf(e){e.ku.forEach(e=>{e.next()})}class af{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Xp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.key=e}}class sf{constructor(e){this.key=e}}class of{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wc(),this.mutatedKeys=Wc(),this.tc=Mc(e),this.ec=new Qp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Yp,a=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,i=a,s=!1;const o="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,l="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((e,t)=>{const u=a.get(e),c=Rc(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.rc(u,c)||(n.track({type:2,doc:c}),p=!0,(o&&this.tc(c,o)>0||l&&this.tc(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(o||l)&&(s=!0)),p&&(c?(i=i.add(c),r=h?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:s,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,o=s!==this.Xu;return this.Xu=s,0!==r.length||o?{snapshot:new Xp(this.query,e.ec,a,r,e.mutatedKeys,0===s,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Yp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Wc(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new sf(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new rf(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Wc();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Xp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class lf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class uf{constructor(e){this.key=e,this.fc=!1}}class cf{constructor(e,t,n,a,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Lc(e=>Dc(e),Vc),this._c=new Map,this.mc=new Set,this.gc=new fu(eu.comparator),this.yc=new Map,this.Ic=new Lh,this.Tc={},this.Ec=new Map,this.Ac=Vh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function df(e,t){const n=function(e){const t=Dl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ff.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mf.bind(null,t),t.dc.nu=ef.bind(null,t.eventManager),t.dc.Pc=tf.bind(null,t.eventManager),t}(e);let a,r;const i=n.wc.get(t);if(i)a=i.targetId,n.sharedClientState.addLocalQueryTarget(a),r=i.view.lc();else{const e=await function(e,t){const n=Dl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let a;return n.Bs.getTargetData(e,t).next(r=>r?(a=r,su.resolve(a)):n.Bs.allocateTargetId(e).next(r=>(a=new Eh(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,a).next(()=>a))))}).then(e=>{const a=n.Ji.get(e.targetId);return(null===a||e.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}(n.localStore,Tc(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);a=e.targetId,r=await async function(e,t,n,a,r){e.Rc=(t,n,a)=>async function(e,t,n,a){let r=t.view.sc(n);r.zi&&(r=await ep(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,r)));const i=a&&a.targetChanges.get(t.targetId),s=t.view.applyChanges(r,e.isPrimaryClient,i);return Sf(e,t.targetId,s.cc),s.snapshot}(e,t,n,a);const i=await ep(e.localStore,t,!0),s=new of(t,i.ir),o=s.sc(i.documents),l=zd.createSynthesizedTargetChangeForCurrentChange(n,a&&"Offline"!==e.onlineState,r),u=s.applyChanges(o,e.isPrimaryClient,l);Sf(e,n,u.cc);const c=new lf(t,n,s);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}(n,t,a,"current"===i,e.resumeToken),n.isPrimaryClient&&Ip(n.remoteStore,e)}return r}async function hf(e,t){const n=Dl(e),a=n.wc.get(t),r=n._c.get(a.targetId);if(r.length>1)return n._c.set(a.targetId,r.filter(e=>!Vc(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Zh(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),Sp(n.remoteStore,a.targetId),_f(n,a.targetId)}).catch(iu)):(_f(n,a.targetId),await Zh(n.localStore,a.targetId,!0))}async function pf(e,t,n){const a=function(e){const t=Dl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yf.bind(null,t),t}(e);try{const e=await function(e,t){const n=Dl(e),a=Wl.now(),r=t.reduce((e,t)=>e.add(t.key),Wc());let i,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Bc(),l=Wc();return n.Zi.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(r=>{i=r;const s=[];for(const e of t){const t=bd(e,i.get(e.key).overlayedDocument);null!=t&&s.push(new Id(e.key,t,Gu(t.value.mapValue),pd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,a,s,t)}).next(t=>{s=t;const a=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,a)})}).then(()=>({batchId:s.batchId,changes:jc(i)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let a=e.Tc[e.currentUser.toKey()];a||(a=new fu(Kl)),a=a.insert(t,n),e.Tc[e.currentUser.toKey()]=a}(a,e.batchId,n),await Ef(a,e.changes),await Mp(a.remoteStore)}catch(r){const e=Wp(r,"Failed to persist write");n.reject(e)}}async function ff(e,t){const n=Dl(e);try{const e=await Xh(n.localStore,t);t.targetChanges.forEach((e,t)=>{const a=n.yc.get(t);a&&(Vl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?a.fc=!0:e.modifiedDocuments.size>0?Vl(a.fc):e.removedDocuments.size>0&&(Vl(a.fc),a.fc=!1))}),await Ef(n,e,t)}catch(a){await iu(a)}}function vf(e,t,n){const a=Dl(e);if(a.isPrimaryClient&&0===n||!a.isPrimaryClient&&1===n){const e=[];a.wc.forEach((n,a)=>{const r=a.view.Mu(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Dl(e);n.onlineState=t;let a=!1;n.queries.forEach((e,n)=>{for(const r of n.listeners)r.Mu(t)&&(a=!0)}),a&&nf(n)}(a.eventManager,t),e.length&&a.dc.nu(e),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function mf(e,t,n){const a=Dl(e);a.sharedClientState.updateQueryState(t,"rejected",n);const r=a.yc.get(t),i=r&&r.key;if(i){let e=new fu(eu.comparator);e=e.insert(i,Wu.newNoDocument(i,Ql.min()));const n=Wc().add(i),r=new jd(Ql.min(),new Map,new fu(Kl),e,n);await ff(a,r),a.gc=a.gc.remove(i),a.yc.delete(t),kf(a)}else await Zh(a.localStore,t,!1).then(()=>_f(a,t,n)).catch(iu)}async function gf(e,t){const n=Dl(e),a=t.batch.batchId;try{const e=await function(e,t){const n=Dl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const a=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,a){const r=n.batch,i=r.keys();let s=su.resolve();return i.forEach(e=>{s=s.next(()=>a.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Vl(null!==i),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),a.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Wc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,a))})}(n.localStore,t);wf(n,a,null),bf(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Ef(n,e)}catch(r){await iu(r)}}async function yf(e,t,n){const a=Dl(e);try{const e=await function(e,t){const n=Dl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let a;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Vl(null!==t),a=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,a,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,a)).next(()=>n.localDocuments.getDocuments(e,a))})}(a.localStore,t);wf(a,t,n),bf(a,t),a.sharedClientState.updateMutationState(t,"rejected",n),await Ef(a,e)}catch(r){await iu(r)}}function bf(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function wf(e,t,n){const a=Dl(e);let r=a.Tc[a.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),a.Tc[a.currentUser.toKey()]=r}}function _f(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const a of e._c.get(t))e.wc.delete(a),n&&e.dc.Pc(a,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||If(e,t)})}function If(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Sp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),kf(e))}function Sf(e,t,n){for(const a of n)a instanceof rf?(e.Ic.addReference(a.key,t),Cf(e,a)):a instanceof sf?(El("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||If(e,a.key)):Nl()}function Cf(e,t){const n=t.key,a=n.path.canonicalString();e.gc.get(n)||e.mc.has(a)||(El("SyncEngine","New document in limbo: "+n),e.mc.add(a),kf(e))}function kf(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new eu(Xl.fromString(t)),a=e.Ac.next();e.yc.set(a,new uf(n)),e.gc=e.gc.insert(n,a),Ip(e.remoteStore,new Eh(Tc(Ic(n.path)),a,"TargetPurposeLimboResolution",lu.ct))}}async function Ef(e,t,n){const a=Dl(e),r=[],i=[],s=[];a.wc.isEmpty()||(a.wc.forEach((e,o)=>{s.push(a.Rc(o,t,n).then(e=>{if((e||n)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=Kh.Li(o.targetId,e);i.push(t)}}))}),await Promise.all(s),a.dc.nu(r),await async function(e,t){const n=Dl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>su.forEach(t,t=>su.forEach(t.Fi,a=>n.persistence.referenceDelegate.addReference(e,t.targetId,a)).next(()=>su.forEach(t.Bi,a=>n.persistence.referenceDelegate.removeReference(e,t.targetId,a)))))}catch(a){if(!ou(a))throw a;El("LocalStore","Failed to update sequence numbers: "+a)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),a=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(a);n.Ji=n.Ji.insert(e,r)}}}(a.localStore,i))}async function xf(e,t){const n=Dl(e);if(!n.currentUser.isEqual(t)){El("SyncEngine","User change. New user:",t.toKey());const e=await Qh(n.localStore,t);n.currentUser=t,(a=n).Ec.forEach(e=>{e.forEach(e=>{e.reject(new Rl(Pl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ef(n,e.er)}var a}function Tf(e,t){const n=Dl(e),a=n.yc.get(t);if(a&&a.fc)return Wc().add(a.key);{let e=Wc();const a=n._c.get(t);if(!a)return e;for(const t of a){const a=n.wc.get(t);e=e.unionWith(a.view.nc)}return e}}class Af{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,a){return new Wh(e,t,n,a)}(this.persistence,new Gh,e.initialUser,this.serializer)}createPersistence(e){return new zh(Hh.zs,this.serializer)}createSharedClientState(e){return new np}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Nf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=xf.bind(null,this.syncEngine),await async function(e,t){const n=Dl(e);t?(n.vu.delete(2),await wp(n)):t||(n.vu.add(2),await _p(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zp}createDatastore(e){const t=hp(e.databaseInfo.databaseId),n=(a=e.databaseInfo,new cp(a));var a,r,i;return r=e.authCredentials,i=e.appCheckCredentials,new gp(r,i,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,a=e.asyncQueue,r=e=>vf(this.syncEngine,e,0),i=rp.D()?new rp:new ap,new bp(t,n,a,r,i);var t,n,a,r,i}createSyncEngine(e,t){return function(e,t,n,a,r,i,s){const o=new cf(e,t,n,a,r,i);return s&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Dl(e);El("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await _p(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):xl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,n,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=a,this.user=Il.UNAUTHENTICATED,this.clientId=Hl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{El("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(El("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rl(Pl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ml;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Wp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Pf(e,t){e.asyncQueue.verifyOperationInProgress(),El("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let a=n.initialUser;e.setCredentialChangeListener(async e=>{a.isEqual(e)||(await Qh(t.localStore,e),a=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Rf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){El("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pf(e,e._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!function(e){return"FirebaseError"===e.name?e.code===Pl.FAILED_PRECONDITION||e.code===Pl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(a))throw a;Tl("Error using user provided cache. Falling back to memory cache: "+a),await Pf(e,new Af)}}else El("FirestoreClient","Using default OfflineComponentProvider"),await Pf(e,new Af);return e._offlineComponents}(e);El("FirestoreClient","Initializing OnlineComponentProvider");const a=await e.getConfiguration();await t.initialize(n,a),e.setCredentialChangeListener(e=>qp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>qp(t.remoteStore,n)),e._onlineComponents=t}async function Mf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(El("FirestoreClient","Using user provided OnlineComponentProvider"),await Rf(e,e._uninitializedComponentsProvider._online)):(El("FirestoreClient","Using default OnlineComponentProvider"),await Rf(e,new Nf))),e._onlineComponents}async function Of(e){const t=await Mf(e),n=t.eventManager;return n.onListen=df.bind(null,t.syncEngine),n.onUnlisten=hf.bind(null,t.syncEngine),n}function Lf(e,t,n={}){const a=new Ml;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,a,r){const i=new Vf({next:n=>{t.enqueueAndForget(()=>async function(e,t){const n=Dl(e),a=t.query;let r=!1;const i=n.queries.get(a);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),r=0===i.listeners.length)}if(r)return n.queries.delete(a),n.onUnlisten(a)}(e,s)),n.fromCache&&"server"===a.source?r.reject(new Rl(Pl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),s=new af(n,i,{includeMetadataChanges:!0,Ku:!0});return async function(t,n){const a=Dl(t),r=n.query;let i=!1,s=a.queries.get(r);if(s||(i=!0,s=new Jp),i)try{s.Nu=await a.onListen(r)}catch(e){const a=Wp(e,`Initialization of query '${Pc(n.query)}' failed`);return void n.onError(a)}a.queries.set(r,s),s.listeners.push(n),n.Mu(a.onlineState),s.Nu&&n.$u(s.Nu)&&nf(a)}(e,s)}(await Of(e),e.asyncQueue,t,n,a)),a.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Ff(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Bf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(e,t,n){if(!n)throw new Rl(Pl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $f(e){if(!eu.isDocumentKey(e))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jf(e){if(eu.isDocumentKey(e))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Nl()}function qf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Rl(Pl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(e);throw new Rl(Pl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Rl(Pl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Rl(Pl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,a){if(!0===t&&!0===a)throw new Rl(Pl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ff(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Rl(Pl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Rl(Pl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Rl(Pl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Kf{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rl(Pl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Rl(Pl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ll;switch(e.type){case"firstParty":return new $l(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Rl(Pl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bf.get(e);t&&(El("ComponentProvider","Removing Datastore"),Bf.delete(e),t.terminate())}(this),Promise.resolve()}}function Gf(e,t,n,a={}){var r;const i=(e=qf(e,Kf))._getSettings(),s=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==s&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:s,ssl:!1})),a.mockUserToken){let t,n;if("string"==typeof a.mockUserToken)t=a.mockUserToken,n=Il.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",a=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Wt(JSON.stringify({alg:"none",type:"JWT"})),Wt(JSON.stringify(i)),""].join(".")}(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const i=a.mockUserToken.sub||a.mockUserToken.user_id;if(!i)throw new Rl(Pl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Il(i)}e._authCredentials=new Fl(new Ol(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wf(this.firestore,e,this._key)}}class Qf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qf(this.firestore,e,this._query)}}class Yf extends Qf{constructor(e,t,n){super(e,t,Ic(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wf(this.firestore,null,new eu(e))}withConverter(e){return new Yf(this.firestore,e,this._path)}}function Xf(e,t,...n){if(e=mn(e),Uf("collection","path",t),e instanceof Kf){const a=Xl.fromString(t,...n);return jf(a),new Yf(e,null,a)}{if(!(e instanceof Wf||e instanceof Yf))throw new Rl(Pl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Xl.fromString(t,...n));return jf(a),new Yf(e.firestore,null,a)}}function Jf(e,t){if(e=qf(e,Kf),Uf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rl(Pl.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qf(e,null,(n=t,new _c(Xl.emptyPath(),n)));var n}function Zf(e,t,...n){if(e=mn(e),1===arguments.length&&(t=Hl.A()),Uf("doc","path",t),e instanceof Kf){const a=Xl.fromString(t,...n);return $f(a),new Wf(e,null,new eu(a))}{if(!(e instanceof Wf||e instanceof Yf))throw new Rl(Pl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Xl.fromString(t,...n));return $f(a),new Wf(e.firestore,e instanceof Yf?e.converter:null,new eu(a))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new pp(this,"async_queue_retry"),this.Xc=()=>{const e=dp();e&&El("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ml;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ou(e))throw e;El("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;throw xl("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Gp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(a),a}Zc(){this.Wc&&Nl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class tv extends Kf{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new ev,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rv(this),this._firestoreClient.terminate()}}function nv(e,t){const n="string"==typeof e?e:"(default)",a=Ea("object"==typeof e?e:Va(),"firestore").getImmediate({identifier:n});if(!a._initialized){const e=(e=>{const t=en(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),a]:[t.substring(0,n),a]})("firestore");e&&Gf(a,...e)}return a}function av(e){return e._firestoreClient||rv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rv(e){var t,n,a;const r=e._freezeSettings(),i=(s=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,new Au(s,o,l,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Ff(u.experimentalLongPollingOptions),u.useFetchStreams));var s,o,l,u;e._firestoreClient=new Df(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(a=r.cache)||void 0===a?void 0:a._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iv(_u.fromBase64String(e))}catch(t){throw new Rl(Pl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iv(_u.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Rl(Pl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Rl(Pl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Rl(Pl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kl(this._lat,e._lat)||Kl(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=/^__.*__$/;class cv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Id(e,this.data,this.fieldMask,t,this.fieldTransforms):new _d(e,this.data,t,this.fieldTransforms)}}class dv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Id(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nl()}}class pv{constructor(e,t,n,a,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:n,la:!1});return a.fa(e),a}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:n,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Tv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(hv(this.ca)&&uv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class fv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hp(e)}ya(e,t,n,a=!1){return new pv({ca:e,methodName:t,ga:n,path:Zl.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vv(e){const t=e._freezeSettings(),n=hp(e._databaseId);return new fv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mv(e,t,n,a,r,i={}){const s=e.ya(i.merge||i.mergeFields?2:0,t,n,r);Cv("Data must be an object, but it was:",s,a);const o=Iv(a,s);let l,u;if(i.merge)l=new bu(s.fieldMask),u=s.fieldTransforms;else if(i.mergeFields){const e=[];for(const a of i.mergeFields){const r=kv(t,a,n);if(!s.contains(r))throw new Rl(Pl.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Av(e,r)||e.push(r)}l=new bu(e),u=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=s.fieldTransforms;return new cv(new Ku(o),l,u)}class gv extends ov{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gv}}class yv extends ov{_toFieldTransform(e){return new dd(e.path,new ad)}isEqual(e){return e instanceof yv}}function bv(e,t,n,a){const r=e.ya(1,t,n);Cv("Data must be an object, but it was:",r,a);const i=[],s=Ku.empty();hu(a,(e,a)=>{const o=xv(t,e,n);a=mn(a);const l=r.da(o);if(a instanceof gv)i.push(o);else{const e=_v(a,l);null!=e&&(i.push(o),s.set(o,e))}});const o=new bu(i);return new dv(s,o,r.fieldTransforms)}function wv(e,t,n,a,r,i){const s=e.ya(1,t,n),o=[kv(t,a,n)],l=[r];if(i.length%2!=0)throw new Rl(Pl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(kv(t,i[h])),l.push(i[h+1]);const u=[],c=Ku.empty();for(let h=o.length-1;h>=0;--h)if(!Av(u,o[h])){const e=o[h];let t=l[h];t=mn(t);const n=s.da(e);if(t instanceof gv)u.push(e);else{const a=_v(t,n);null!=a&&(u.push(e),c.set(e,a))}}const d=new bu(u);return new dv(c,d,s.fieldTransforms)}function _v(e,t){if(Sv(e=mn(e)))return Cv("Unsupported field value:",t,e),Iv(e,t);if(e instanceof ov)return function(e,t){if(!hv(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let a=0;for(const r of e){let e=_v(r,t.wa(a));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),a++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=mn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wl.fromDate(e);return{timestampValue:nh(t.serializer,n)}}if(e instanceof Wl){const n=new Wl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nh(t.serializer,n)}}if(e instanceof lv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iv)return{bytesValue:ah(t.serializer,e._byteString)};if(e instanceof Wf){const n=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(n))throw t._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:sh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${zf(e)}`)}(e,t)}function Iv(e,t){const n={};return pu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hu(e,(e,a)=>{const r=_v(a,t.ha(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Sv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wl||e instanceof lv||e instanceof iv||e instanceof Wf||e instanceof ov)}function Cv(e,t,n){if(!Sv(n)||("object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a))){const a=zf(n);throw"an object"===a?t._a(e+" a custom object"):t._a(e+" "+a)}var a}function kv(e,t,n){if((t=mn(t))instanceof sv)return t._internalPath;if("string"==typeof t)return xv(e,t);throw Tv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ev=new RegExp("[~\\*/\\[\\]]");function xv(e,t,n){if(t.search(Ev)>=0)throw Tv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sv(...t.split("."))._internalPath}catch(a){throw Tv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Tv(e,t,n,a,r){const i=a&&!a.isEmpty(),s=void 0!==r;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${a}`),s&&(l+=` in document ${r}`),l+=")"),new Rl(Pl.INVALID_ARGUMENT,o+e+l)}function Av(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,n,a,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Wf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Vv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Vv extends Nv{data(){return super.data()}}function Dv(e,t){return"string"==typeof t?xv(e,t):t instanceof sv?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{}class Rv extends Pv{}function Mv(e,t,...n){let a=[];t instanceof Pv&&a.push(t),a=a.concat(n),function(e){const t=e.filter(e=>e instanceof Fv).length,n=e.filter(e=>e instanceof Ov).length;if(t>1||t>0&&n>0)throw new Rl(Pl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const r of a)e=r._apply(e);return e}class Ov extends Rv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ov(e,t,n)}_apply(e){const t=this._parse(e);return zv(e._query,t),new Qf(e.firestore,e.converter,Ac(e._query,t))}_parse(e){const t=vv(e.firestore),n=function(e,t,n,a,r,i,s){let o;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Rl(Pl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){jv(s,i);const t=[];for(const n of s)t.push($v(a,e,n));o={arrayValue:{values:t}}}else o=$v(a,e,s)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||jv(s,i),o=function(e,t,n,a=!1){return _v(n,e.ya(a?4:3,t))}(n,"where",s,"in"===i||"not-in"===i);return tc.create(r,i,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Lv(e,t,n){const a=t,r=Dv("where",e);return Ov._create(r,a,n)}class Fv extends Pv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:nc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const a=t.getFlattenedFilters();for(const r of a)zv(n,r),n=Ac(n,r)}(e._query,t),new Qf(e.firestore,e.converter,Ac(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bv extends Rv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Rl(Pl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Rl(Pl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Ju(t,n);return function(e,t){if(null===Cc(e)){const n=kc(e);null!==n&&qv(e,n,t.field)}}(e,a),a}(e._query,this._field,this._direction);return new Qf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new _c(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Uv(e,t="asc"){const n=t,a=Dv("orderBy",e);return Bv._create(a,n)}function $v(e,t,n){if("string"==typeof(n=mn(n))){if(""===n)throw new Rl(Pl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ec(t)&&-1!==n.indexOf("/"))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=t.path.child(Xl.fromString(n));if(!eu.isDocumentKey(a))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Bu(e,new eu(a))}if(n instanceof Wf)return Bu(e,n._key);throw new Rl(Pl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function jv(e,t){if(!Array.isArray(e)||0===e.length)throw new Rl(Pl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zv(e,t){if(t.isInequality()){const n=kc(e),a=t.field;if(null!==n&&!n.isEqual(a))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${a.toString()}'`);const r=Cc(e);null!==r&&qv(e,a,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Rl(Pl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Rl(Pl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function qv(e,t,n){if(!n.isEqual(t))throw new Rl(Pl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Hv{convertValue(e,t="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return hu(e,(e,a)=>{n[e]=this.convertValue(a,t)}),n}convertGeoPoint(e){return new lv(Cu(e.latitude),Cu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=Su(e);return new Wl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Xl.fromString(e);Vl(kh(n));const a=new Nu(n.get(1),n.get(3)),r=new eu(n.popFirst(5));return a.isEqual(t)||xl(`Document ${r} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(e,t,n){let a;return a=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,a
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Gv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wv extends Nv{constructor(e,t,n,a,r,i){super(e,t,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Qv extends Wv{data(e={}){return super.data(e)}}class Yv{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Gv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qv(this._firestore,this._userDataWriter,n.key,n,new Gv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rl(Pl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const a=new Qv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Gv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:a,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const a=new Qv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Xv(t.type),doc:a,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nl()}}class Jv extends Hv{constructor(e){super(),this.firestore=e}convertBytes(e){return new iv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wf(this.firestore,null,t)}}function Zv(e){e=qf(e,Qf);const t=qf(e.firestore,tv),n=av(t),a=new Jv(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Rl(Pl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Lf(n,e._query).then(n=>new Yv(t,a,e,n))}function em(e,t,n,...a){e=qf(e,Wf);const r=qf(e.firestore,tv),i=vv(r);let s;return s="string"==typeof(t=mn(t))||t instanceof sv?wv(i,"updateDoc",e._key,t,n,a):bv(i,"updateDoc",e._key,t),am(r,[s.toMutation(e._key,pd.exists(!0))])}function tm(e){return am(qf(e.firestore,tv),[new Ed(e._key,pd.none())])}function nm(e,t){const n=qf(e.firestore,tv),a=Zf(e),r=Kv(e.converter,t);return am(n,[mv(vv(e.firestore),"addDoc",a._key,r,null!==e.converter,{}).toMutation(a._key,pd.exists(!1))]).then(()=>a)}function am(e,t){return function(e,t){const n=new Ml;return e.asyncQueue.enqueueAndForget(async()=>pf(await function(e){return Mf(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(av(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vv(e)}set(e,t,n){this._verifyNotCommitted();const a=im(e,this._firestore),r=Kv(a.converter,t,n),i=mv(this._dataReader,"WriteBatch.set",a._key,r,null!==a.converter,n);return this._mutations.push(i.toMutation(a._key,pd.none())),this}update(e,t,n,...a){this._verifyNotCommitted();const r=im(e,this._firestore);let i;return i="string"==typeof(t=mn(t))||t instanceof sv?wv(this._dataReader,"WriteBatch.update",r._key,t,n,a):bv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,pd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=im(e,this._firestore);return this._mutations=this._mutations.concat(new Ed(t._key,pd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rl(Pl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function im(e,t){if((e=mn(e)).firestore!==t)throw new Rl(Pl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function sm(){return new yv("serverTimestamp")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(e){return av(e=qf(e,tv)),new rm(e,t=>am(e,t))}function lm(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}function um(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(e,t=!0){Sl=Aa,ka(new gn("firestore",(e,{instanceIdentifier:n,options:a})=>{const r=e.getProvider("app").getImmediate(),i=new tv(new Bl(e.getProvider("auth-internal")),new zl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Rl(Pl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(e.options.projectId,t)}(r,n),r);return a=Object.assign({useFetchStreams:t},a),i._setSettings(a),i},"PUBLIC").setMultipleInstances(!0)),Pa(_l,"3.13.0",e),Pa(_l,"3.13.0","esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const cm=um,dm=new on("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hm=new Tn("@firebase/auth");function pm(e,...t){hm.logLevel<=In.ERROR&&hm.error(`Auth (${Aa}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(e,...t){throw mm(e,...t)}function vm(e,...t){return mm(e,...t)}function mm(e,...t){if("string"!=typeof e){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return dm.create(e,...t)}function gm(e,t,...n){if(!e)throw mm(t,...n)}function ym(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pm(t),new Error(t)}function bm(e,t){e||ym(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _m(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==_m()&&"https:"!==_m()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sm{constructor(e,t){this.shortDelay=e,this.longDelay=t,bm(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Im()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(e,t){bm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ym("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ym("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ym("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xm=new Sm(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Am(e,t,n,a,r={}){return Nm(e,r,async()=>{let r={},i={};a&&("GET"===t?i=a:r={body:JSON.stringify(a)});const s=hn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),km.fetch()(Vm(e,e.config.apiHost,n,s),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},r))})}async function Nm(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},Em),t);try{const t=new Dm(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw Pm(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Pm(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Pm(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Pm(e,"user-disabled",i);const o=a[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw function(e,t,n){const a=Object.assign(Object.assign({},cm()),{[t]:n});return new on("auth","Firebase",a).create(t,{appName:e.name})}(e,o,s);fm(e,o)}}catch(r){if(r instanceof sn)throw r;fm(e,"network-request-failed",{message:String(r)})}}function Vm(e,t,n,a){const r=`${t}${n}?${a}`;return e.config.emulator?Cm(e.config,r):`${e.config.apiScheme}://${r}`}class Dm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(vm(this.auth,"network-request-failed")),xm.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pm(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=vm(e,t,a);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Mm(e){return 1e3*Number(e)}function Om(e){const[t,n,a]=e.split(".");if(void 0===t||void 0===n||void 0===a)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const e=Qt(n);return e?JSON.parse(e):(pm("Failed to decode base64 JWT payload"),null)}catch(r){return pm("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Lm(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof sn&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}class Fm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rm(this.lastLoginAt),this.creationTime=Rm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Um(e){var t;const n=e.auth,a=await e.getIdToken(),r=await Lm(e,async function(e,t){return Am(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:a}));gm(null==r?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=lm(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,u=s,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&i.passwordHash||(null==o?void 0:o.length)),h=!!c&&d,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $m{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gm(e.idToken,"internal-error"),gm(void 0!==e.idToken,"internal-error"),gm(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Om(e);return gm(t,"internal-error"),gm(void 0!==t.exp,"internal-error"),gm(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return gm(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:r}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const n=await Nm(e,{},async()=>{const n=hn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:r}=e.config,i=Vm(e,a,"/v1/token",`key=${r}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",km.fetch()(i,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,a,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:r}=t,i=new $m;return n&&(gm("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),a&&(gm("string"==typeof a,"internal-error",{appName:e}),i.accessToken=a),r&&(gm("number"==typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $m,this.toJSON())}_performRefresh(){return ym("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(e,t){gm("string"==typeof e||void 0===e,"internal-error",{appName:t})}class zm{constructor(e){var{uid:t,auth:n,stsTokenManager:a}=e,r=lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Bm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Lm(this,this.stsTokenManager.getToken(this.auth,e));return gm(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=mn(e),a=await n.getIdToken(t),r=Om(a);gm(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i="object"==typeof r.firebase?r.firebase:void 0,s=null==i?void 0:i.sign_in_provider;return{claims:r,token:a,authTime:Rm(Mm(r.auth_time)),issuedAtTime:Rm(Mm(r.iat)),expirationTime:Rm(Mm(r.exp)),signInProvider:s||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=mn(e);await Um(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(gm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){gm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Um(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Lm(this,async function(e,t){return Am(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,a,r,i,s,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(a=t.email)&&void 0!==a?a:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,v=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:I}=t;gm(y&&I,e,"internal-error");const S=$m.fromJSON(this.name,I);gm("string"==typeof y,e,"internal-error"),jm(c,e.name),jm(d,e.name),gm("boolean"==typeof b,e,"internal-error"),gm("boolean"==typeof w,e,"internal-error"),jm(h,e.name),jm(p,e.name),jm(f,e.name),jm(v,e.name),jm(m,e.name),jm(g,e.name);const C=new zm({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map(e=>Object.assign({},e))),v&&(C._redirectEventId=v),C}static async _fromIdTokenResponse(e,t,n=!1){const a=new $m;a.updateFromServerResponse(t);const r=new zm({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Um(r),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new Map;function Hm(e){bm(e instanceof Function,"Expected a class definition");let t=qm.get(e);return t?(bm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qm.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Km.type="NONE";const Gm=Km;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(e,t,n){return`firebase:${e}:${t}:${n}`}class Qm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:r}=this.auth;this.fullUserKey=Wm(this.userKey,a.apiKey,r),this.fullPersistenceKey=Wm("persistence",a.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Qm(Hm(Gm),e,n);const a=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=a[0]||Hm(Gm);const i=Wm(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(i);if(t){const n=zm._fromJSON(e,t);u!==r&&(s=n),r=u;break}}catch(l){}const o=a.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],s&&await r._set(i,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(i)}catch(l){}})),new Qm(r,e,n)):new Qm(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ng(t))return"Blackberry";if(ag(t))return"Webos";if(Jm(t))return"Safari";if((t.includes("chrome/")||Zm(t))&&!t.includes("edge/"))return"Chrome";if(tg(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Xm(e=rn()){return/firefox\//i.test(e)}function Jm(e=rn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Zm(e=rn()){return/crios\//i.test(e)}function eg(e=rn()){return/iemobile/i.test(e)}function tg(e=rn()){return/android/i.test(e)}function ng(e=rn()){return/blackberry/i.test(e)}function ag(e=rn()){return/webos/i.test(e)}function rg(e=rn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ig(){return function(){const e=rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function sg(e=rn()){return rg(e)||tg(e)||ag(e)||ng(e)||/windows phone/i.test(e)||eg(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function og(e,t=[]){let n;switch(e){case"Browser":n=Ym(rn());break;case"Worker":n=`${Ym(rn())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${a}`}async function lg(e,t){return Am(e,"GET","/v2/recaptchaConfig",Tm(e,t))}function ug(e){return void 0!==e&&void 0!==e.enterprise}class cg{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(e){return new Promise((t,n)=>{const a=document.createElement("script");var r,i;a.setAttribute("src",e),a.onload=t,a.onerror=e=>{const t=vm("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)})}class hg{constructor(e){this.type="recaptcha-enterprise",this.auth=vg(e)}async verify(e="verify",t=!1){function n(t,n,a){const r=window.grecaptcha;ug(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,a)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{lg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(void 0!==a.recaptchaKey){const n=new cg(a);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&ug(window.grecaptcha))n(r,e,a);else{if("undefined"==typeof window)return void a(new Error("RecaptchaVerifier is only supported in browser"));dg("https://www.google.com/recaptcha/enterprise.js?render="+r).then(()=>{n(r,e,a)}).catch(e=>{a(e)})}}).catch(e=>{a(e)})})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,a)=>{try{n(e(t))}catch(r){a(r)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mg(this),this.idTokenSubscription=new mg(this),this.beforeStateQueue=new pg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hm(t)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Qm.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(a=this.currentUser)||void 0===a?void 0:a.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let a=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==a?void 0:a._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==i||!(null==s?void 0:s.user)||(a=s.user,r=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return gm(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Um(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?mn(e):null;return t&&gm(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&gm(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hm(e))})}async initializeRecaptchaConfig(){const e=await lg(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new cg(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new hg(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hm(e)||this._popupRedirectResolver;gm(t,this,"argument-error"),this.redirectPersistenceManager=await Qm.create(this,[Hm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return gm(i,this,"internal-error"),i.then(()=>r(this.currentUser)),"function"==typeof t?e.addObserver(t,n,a):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gm(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=og(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){hm.logLevel<=In.WARN&&hm.warn(`Auth (${Aa}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function vg(e){return mn(e)}class mg{constructor(e){this.auth=e,this.observer=null,this.addObserver=pn(e=>this.observer=e)}get next(){return gm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(e,t,n){const a=vg(e);gm(a._canInitEmulator,a,"emulator-config-failed"),gm(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=yg(t),{host:i,port:s}=function(e){const t=yg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const e=r[1];return{host:e,port:bg(a.substr(e.length+1))}}{const[e,t]=a.split(":");return{host:e,port:bg(t)}}}(t),o=null===s?"":`:${s}`;a.config.emulator={url:`${r}//${i}${o}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:i,port:s,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function yg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ym("not implemented")}_getIdTokenResponse(e){return ym("not implemented")}_linkToIdToken(e,t){return ym("not implemented")}_getReauthenticationResolver(e){return ym("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _g(e,t){return async function(e,t,n,a,r={}){const i=await Am(e,t,n,a,r);return"mfaPendingCredential"in i&&fm(e,"multi-factor-auth-required",{_serverResponse:i}),i}(e,"POST","/v1/accounts:signInWithIdp",Tm(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ig(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:a}=t,r=lm(t,["providerId","signInMethod"]);if(!n||!a)return null;const i=new Ig(n,a);return i.idToken=r.idToken||void 0,i.accessToken=r.accessToken||void 0,i.secret=r.secret,i.nonce=r.nonce,i.pendingToken=r.pendingToken||null,i}_getIdTokenResponse(e){return _g(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_g(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_g(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hn(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Cg{constructor(){super("facebook.com")}static credential(e){return Ig._fromParams({providerId:kg.PROVIDER_ID,signInMethod:kg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kg.credentialFromTaggedObject(e)}static credentialFromError(e){return kg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return kg.credential(e.oauthAccessToken)}catch(t){return null}}}kg.FACEBOOK_SIGN_IN_METHOD="facebook.com",kg.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Eg extends Cg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ig._fromParams({providerId:Eg.PROVIDER_ID,signInMethod:Eg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eg.credentialFromTaggedObject(e)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Eg.credential(t,n)}catch(a){return null}}}Eg.GOOGLE_SIGN_IN_METHOD="google.com",Eg.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xg extends Cg{constructor(){super("github.com")}static credential(e){return Ig._fromParams({providerId:xg.PROVIDER_ID,signInMethod:xg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xg.credentialFromTaggedObject(e)}static credentialFromError(e){return xg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return xg.credential(e.oauthAccessToken)}catch(t){return null}}}xg.GITHUB_SIGN_IN_METHOD="github.com",xg.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tg extends Cg{constructor(){super("twitter.com")}static credential(e,t){return Ig._fromParams({providerId:Tg.PROVIDER_ID,signInMethod:Tg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tg.credentialFromTaggedObject(e)}static credentialFromError(e){return Tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Tg.credential(t,n)}catch(a){return null}}}Tg.TWITTER_SIGN_IN_METHOD="twitter.com",Tg.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ag{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const r=await zm._fromIdTokenResponse(e,n,a),i=Ng(n);return new Ag({user:r,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=Ng(n);return new Ag({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function Ng(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends sn{constructor(e,t,n,a){var r;super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Vg.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new Vg(e,t,n,a)}}function Dg(e,t,n,a){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Vg._fromErrorAndOperation(e,n,t,a);throw n})}const Pg="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pg,"1"),this.storage.removeItem(Pg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends Rg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rn();return Jm(e)||rg(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=sg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const a=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);ig()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mg.type="LOCAL";const Og=Mg;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Rg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lg.type="SESSION";const Fg=Lg;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Bg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:r}=t.data,i=this.handlersMap[a];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const s=Array.from(i).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ug(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bg.receivers=[];class $g{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let r,i;return new Promise((s,o)=>{const l=Ug("",20);a.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),s(t.data.response);break;default:clearTimeout(u),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zg(){return void 0!==jg().WorkerGlobalScope&&"function"==typeof jg().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const qg="firebaseLocalStorageDb",Hg="firebaseLocalStorage",Kg="fbase_key";class Gg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wg(e,t){return e.transaction([Hg],t?"readwrite":"readonly").objectStore(Hg)}function Qg(){const e=indexedDB.open(qg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Hg,{keyPath:Kg})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Hg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(qg);return new Gg(e).toPromise()}(),t(await Qg()))})})}async function Yg(e,t,n){const a=Wg(e,!0).put({[Kg]:t,value:n});return new Gg(a).toPromise()}function Xg(e,t){const n=Wg(e,!0).delete(t);return new Gg(n).toPromise()}class Jg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Qg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bg._getInstance(zg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $g(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await Yg(e,Pg,"1"),await Xg(e,Pg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wg(e,!1).get(t),a=await new Gg(n).toPromise();return void 0===a?null:a.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wg(e,!1).getAll();return new Gg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:a,value:r}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(r)&&(this.notifyListeners(a,r),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Jg.type="LOCAL";const Zg=Jg;new Sm(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ey extends wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _g(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _g(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _g(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ty(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){const a="signIn",r=await Dg(e,a,t),i=await Ag._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(i.user),i}(e.auth,new ey(e),e.bypassAuthState)}function ny(e){const{auth:t,user:n}=e;return gm(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:a}=e,r="reauthenticate";try{const i=await Lm(e,Dg(a,r,t,e),n);gm(i.idToken,a,"internal-error");const s=Om(i.idToken);gm(s,a,"internal-error");const{sub:o}=s;return gm(e.uid===o,a,"user-mismatch"),Ag._forOperation(e,r,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&fm(a,"user-mismatch"),i}}(n,new ey(e),e.bypassAuthState)}async function ay(e){const{auth:t,user:n}=e;return gm(n,t,"internal-error"),async function(e,t,n=!1){const a=await Lm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ag._forOperation(e,"link",a)}(n,new ey(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t,n,a,r=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:r,error:i,type:s}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ty;case"linkViaPopup":case"linkViaRedirect":return ay;case"reauthViaPopup":case"reauthViaRedirect":return ny;default:fm(this.auth,"internal-error")}}resolve(e){bm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Sm(2e3,1e4);class sy extends ry{constructor(e,t,n,a,r){super(e,t,a,r),this.provider=n,this.authWindow=null,this.pollId=null,sy.currentPopupAction&&sy.currentPopupAction.cancel(),sy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gm(e,this.auth,"internal-error"),e}async onExecution(){bm(1===this.filter.length,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(vm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sy.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vm(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,iy.get())};e()}}sy.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oy="pendingRedirect",ly=new Map;class uy extends ry{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=ly.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Wm(oy,e.config.apiKey,e.name)}(t),a=function(e){return Hm(e._redirectPersistence)}(e);if(!(await a._isAvailable()))return!1;const r="true"===await a._get(n);return await a._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ly.set(this.auth._key(),e)}return this.bypassAuthState||ly.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function cy(e,t){ly.set(e._key(),t)}async function dy(e,t,n=!1){const a=vg(e),r=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Hm(t):(gm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(a,t),i=new uy(a,r,n),s=await i.execute();return s&&!n&&(delete s.user._redirectEventId,await a._persistUserIfCurrent(s.user),await a._setRedirectUser(null,t)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fy(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fy(e)){const a=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vm(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(py(e))}saveEventToCache(e){this.cachedEventUids.add(py(e)),this.lastProcessedEventTime=Date.now()}}function py(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function fy({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,my=/^https?/;async function gy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Am(e,"GET","/v1/projects",t)}(e);for(const a of t)try{if(yy(a))return}catch(n){}fm(e,"unauthorized-domain")}function yy(e){const t=wm(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===a?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===a}if(!my.test(n))return!1;if(vy.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Sm(3e4,6e4);function wy(){const e=jg().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function _y(e){return new Promise((t,n)=>{var a,r,i;function s(){wy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wy(),n(vm(e,"network-request-failed"))},timeout:by.get()})}if(null===(r=null===(a=jg().gapi)||void 0===a?void 0:a.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=jg().gapi)||void 0===i?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return jg()[t]=()=>{gapi.load?s():n(vm(e,"network-request-failed"))},dg(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}s()}}).catch(e=>{throw Iy=null,e})}let Iy=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sy=new Sm(5e3,15e3),Cy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ky=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ey(e){const t=e.config;gm(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cm(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,a={apiKey:t.apiKey,appName:e.name,v:Aa},r=ky.get(e.config.apiHost);r&&(a.eid=r);const i=e._getFrameworks();return i.length&&(a.fw=i.join(",")),`${n}?${hn(a).slice(1)}`}async function xy(e){const t=await function(e){return Iy=Iy||_y(e),Iy}(e),n=jg().gapi;return gm(n,e,"internal-error"),t.open({where:document.body,url:Ey(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cy,dontclear:!0},t=>new Promise(async(n,a)=>{await t.restyle({setHideOnLeave:!1});const r=vm(e,"network-request-failed"),i=jg().setTimeout(()=>{a(r)},Sy.get());function s(){jg().clearTimeout(i),n(t)}t.ping(s).then(s,()=>{a(r)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ny(e,t,n,a=500,r=600){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-a)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ty),{width:a.toString(),height:r.toString(),top:i,left:s}),u=rn().toLowerCase();n&&(o=Zm(u)?"_blank":n),Xm(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=rn()){var t;return rg(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Ay(null);const d=window.open(t||"",o,c);gm(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Ay(d)}const Vy="__/auth/handler",Dy="emulator/auth/handler",Py=encodeURIComponent("fac");async function Ry(e,t,n,a,r,i){gm(e.config.authDomain,e,"auth-domain-config-required"),gm(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:Aa,eventId:r};if(t instanceof Sg){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))s[e]=t}if(t instanceof Cg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Py}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Vy}`;return Cm(e,Dy)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${hn(o).slice(1)}${u}`}const My="webStorageSupport";const Oy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fg,this._completeRedirectFn=dy,this._overrideRedirectResult=cy}async _openPopup(e,t,n,a){var r;bm(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Ny(e,await Ry(e,t,n,wm(),a),Ug())}async _openRedirect(e,t,n,a){await this._originValidation(e);return function(e){jg().location.href=e}(await Ry(e,t,n,wm(),a)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await xy(e),n=new hy(e);return t.register("authEvent",t=>{gm(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(My,{type:My},n=>{var a;const r=null===(a=null==n?void 0:n[0])||void 0===a?void 0:a[My];void 0!==r&&t(!!r),fm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sg()||Jm()||rg()}};var Ly="@firebase/auth",Fy="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class By{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Uy=nn("authIdTokenMaxAge")||300;let $y=null;function jy(e=Va()){const t=Ea(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ea(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(cn(n.getOptions(),null!=t?t:{}))return e;fm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Oy,persistence:[Zg,Og,Fg]}),a=nn("authTokenSyncURL");if(a){const e=(r=a,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Uy)return;const a=null==t?void 0:t.token;$y!==a&&($y=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});!function(e,t,n){mn(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,a){mn(e).onIdTokenChanged(t,n,a)}(n,t=>e(t))}var r;const i=en("auth");return i&&gg(n,`http://${i}`),n}var zy;zy="Browser",ka(new gn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:i,authDomain:s}=n.options;gm(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:s,clientPlatform:zy,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:og(zy)},l=new fg(n,a,r,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Hm);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ka(new gn("auth-internal",e=>{const t=vg(e.getProvider("auth").getImmediate());return new By(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pa(Ly,Fy,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zy)),Pa(Ly,Fy,"esm2017");const qy=async e=>{const[t,n,a,r,i,s]=await(async e=>{if(!e)throw new Error("User ID is required to load initial data.");try{const t=await er();return Promise.all([Zv(Xf(t,"accounts")),Zv(Xf(t,"character_masters")),Zv(Xf(t,"itemMasters")),Zv(Jf(t,"owned_characters")),Zv(Xf(t,"gachaMasters")),Zv(Mv(Xf(t,"teams"),Lv("userId","==",e),Uv("createdAt","desc")))])}catch(t){throw t}})(e),o=t.docs.map(e=>{const t=e.data();return{id:e.id,name:t.Name||`アカウント${t.id}`,numericId:t.id,indexNumber:t.indexNumber}}).sort((e,t)=>(e.numericId||999)-(t.numericId||999)),l=n.docs.map(e=>({...e.data(),id:e.id})).sort((e,t)=>(e.indexNumber||999999)-(t.indexNumber||999999)),u=new Map(l.map(e=>[e.id,e])),c=a.docs.map(e=>({...e.data(),id:Number(e.data().id)})).sort((e,t)=>e.id-t.id),d=new Map(c.map(e=>[e.id,e.name])),h=i.docs.map(e=>e.data()).sort((e,t)=>e.id-t.id),p=s.docs.map(e=>({...e.data(),id:e.id})),f=new Map,v=new Map;return r.forEach(e=>{const t=e.data(),n=e.ref.parent.parent.id,a=`${t.characterMasterId}-${n}`;v.set(a,(v.get(a)||0)+1),f.has(n)||f.set(n,[]);const r=ir(t.items);f.get(n).push({...t,items:r,id:e.id})}),{accounts:o,characterMasters:l,characterMastersMap:u,itemMasters:c,itemMastersMap:d,gachaMasters:h,teams:p,ownedCharactersData:f,ownedCountMap:v}},Hy=async(e,t)=>nm(Xf(await er(),"accounts",e,"owned_characters"),t),Ky=async(e,t,n)=>em(Zf(await er(),"accounts",e,"owned_characters",t),{items:n}),Gy=async(e,t,n)=>{const a=await er(),r=om(a),i=Zf(a,"accounts",e,"owned_characters",t.id),s=Zf(a,"accounts",e,"owned_characters",n.id);return r.update(i,{items:t.items}),r.update(s,{items:n.items}),r.commit()},Wy=async e=>nm(Xf(await er(),"character_masters"),e),Qy=async(e,t)=>em(Zf(await er(),"character_masters",e),t),Yy=async(e,t)=>{const n=await er();return e?em(Zf(n,"teams",e),t):nm(Xf(n,"teams"),t)},Xy=async e=>tm(Zf(await er(),"teams",e)),Jy=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},Zy=ae({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),eb=ne(!1)({name:"VDefaultsProvider",props:Zy(),setup(t,n){let{slots:a}=n;const{defaults:r,disabled:i,reset:s,root:o,scoped:l}=e(t);return re(r,{reset:s,root:o,scoped:l,disabled:i}),()=>{var e;return null==(e=a.default)?void 0:e.call(a)}}});function tb(e){return ie(()=>{const n=t(e),a=[],r={};if(n.background)if(se(n.background)){if(r.backgroundColor=n.background,!n.text&&oe(n.background)){const e=le(n.background);if(null==e.a||1===e.a){const t=ue(e);r.color=t,r.caretColor=t}}}else a.push(`bg-${n.background}`);return n.text&&(se(n.text)?(r.color=n.text,r.caretColor=n.text):a.push(`text-${n.text}`)),{colorClasses:a,colorStyles:r}})}function nb(e){const{colorClasses:n,colorStyles:a}=tb(()=>({text:t(e)}));return{textColorClasses:n,textColorStyles:a}}function ab(e){const{colorClasses:n,colorStyles:a}=tb(()=>({background:t(e)}));return{backgroundColorClasses:n,backgroundColorStyles:a}}const rb=["x-small","small","default","large","x-large"],ib=ae({size:{type:[String,Number],default:"default"}},"size");function sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return ie(()=>{const n=e.size;let a,r;return de(rb,n)?a=`${t}--size-${n}`:n&&(r={width:he(n),height:he(n)}),{sizeClasses:a,sizeStyles:r}})}const ob=ae({tag:{type:[String,Object,Function],default:"div"}},"tag"),lb=ae({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:be,opacity:[String,Number],...ye(),...ib(),...ob({tag:"i"}),...ge()},"VIcon"),ub=ne()({name:"VIcon",props:lb(),setup(e,t){let{attrs:o,slots:l}=t;const u=n(),{themeClasses:c}=pe(),{iconData:d}=fe(()=>u.value||e.icon),{sizeClasses:h}=sb(e),{textColorClasses:p,textColorStyles:f}=nb(()=>e.color);return ve(()=>{var t,n;const v=null==(t=l.default)?void 0:t.call(l);v&&(u.value=null==(n=me(v).filter(e=>e.type===a&&e.children&&"string"==typeof e.children)[0])?void 0:n.children);const m=!(!o.onClick&&!o.onClickOnce);return r(d.value.component,{tag:e.tag,icon:d.value.icon,class:s(["v-icon","notranslate",c.value,h.value,p.value,{"v-icon--clickable":m,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:i([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:he(e.size),height:he(e.size),width:he(e.size)},f.value,e.style]),role:m?"button":void 0,"aria-hidden":!m,tabindex:m?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}}),cb=ae({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function db(e){return{dimensionStyles:o(()=>{const t={},n=he(e.height),a=he(e.maxHeight),r=he(e.maxWidth),i=he(e.minHeight),s=he(e.minWidth),o=he(e.width);return null!=n&&(t.height=n),null!=a&&(t.maxHeight=a),null!=r&&(t.maxWidth=r),null!=i&&(t.minHeight=i),null!=s&&(t.minWidth=s),null!=o&&(t.width=o),t})}}const hb=ae({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...ye(),...cb()},"VResponsive"),pb=ne()({name:"VResponsive",props:hb(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=function(e){return{aspectStyles:o(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}(e),{dimensionStyles:r}=db(e);return ve(()=>{var t;return l("div",{class:s(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:i([r.value,e.style])},[l("div",{class:"v-responsive__sizer",style:i(a.value)},null),null==(t=n.additional)?void 0:t.call(n),n.default&&l("div",{class:s(["v-responsive__content",e.contentClass])},[n.default()])])}),{}}}),fb=ae({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function vb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{roundedClasses:o(()=>{const n=u(e)?e.value:e.rounded,a=u(e)?e.value:e.tile,r=[];if(!0===n||""===n)r.push(`${t}--rounded`);else if("string"==typeof n||0===n)for(const e of String(n).split(" "))r.push(`rounded-${e}`);else(a||!1===n)&&r.push("rounded-0");return r})}}const mb=ae({transition:{type:null,default:"fade-transition",validator:e=>!0!==e}},"transition"),gb=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:i,...s}=e,{component:o=(i?c:d),...l}=we(a)?a:{};let u;return u=we(a)?h(l,_e({disabled:r,group:i}),s):h({name:r||!a?"":a},s),p(o,u,n)};function yb(e,t){var n;const a=null==(n=e._observe)?void 0:n[t.instance.$.uid];a&&(a.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const bb={mounted:function(e,t){if(!Ie)return;const n=t.modifiers||{},a=t.value,{handler:r,options:i}="object"==typeof a?a:{handler:a,options:{}},s=new IntersectionObserver(function(){var a;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const o=null==(a=e._observe)?void 0:a[t.instance.$.uid];if(!o)return;const l=i.some(e=>e.isIntersecting);!r||n.quiet&&!o.init||n.once&&!l&&!o.init||r(l,i,s),l&&n.once?yb(e,t):o.init=!0},i);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:s},s.observe(e)},unmounted:yb},wb=ae({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...hb(),...ye(),...fb(),...mb()},"VImg"),_b=ne()({name:"VImg",directives:{vIntersect:bb},props:wb(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:a,slots:i}=t;const{backgroundColorClasses:u,backgroundColorStyles:c}=ab(()=>e.color),{roundedClasses:d}=vb(e),p=Se("VImg"),S=n(""),C=f(),k=n(e.eager?"loading":"idle"),E=n(),x=n(),T=o(()=>e.src&&"object"==typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),A=o(()=>T.value.aspect||E.value/x.value||0);function N(t){if((!e.eager||!t)&&(!Ie||t||e.eager)){if(k.value="loading",T.value.lazySrc){const e=new Image;e.src=T.value.lazySrc,M(e,null)}T.value.src&&g(()=>{var e;a("loadstart",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src),setTimeout(()=>{var e;if(!p.isUnmounted)if(null==(e=C.value)?void 0:e.complete){if(C.value.naturalWidth||D(),"error"===k.value)return;A.value||M(C.value,null),"loading"===k.value&&V()}else A.value||M(C.value),P()})})}}function V(){var e;p.isUnmounted||(P(),M(C.value),k.value="loaded",a("load",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src))}function D(){var e;p.isUnmounted||(k.value="error",a("error",(null==(e=C.value)?void 0:e.currentSrc)||T.value.src))}function P(){const e=C.value;e&&(S.value=e.currentSrc||e.src)}v(()=>e.src,()=>{N("idle"!==k.value)}),v(A,(e,t)=>{!e&&t&&C.value&&M(C.value)}),m(()=>N());let R=-1;function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=()=>{if(clearTimeout(R),p.isUnmounted)return;const{naturalHeight:a,naturalWidth:r}=e;a||r?(E.value=r,x.value=a):e.complete||"loading"!==k.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(E.value=1,x.value=1):R=window.setTimeout(n,t)};n()}y(()=>{clearTimeout(R)});const O=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),L=()=>{var t;if(!T.value.src||"idle"===k.value)return null;const n=l("img",{class:s(["v-img__img",O.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:T.value.src,srcset:T.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:V,onError:D},null),a=null==(t=i.sources)?void 0:t.call(i);return r(gb,{transition:e.transition,appear:!0},{default:()=>[w(a?l("picture",{class:"v-img__picture"},[a,n]):n,[[I,"loaded"===k.value]])]})},F=()=>r(gb,{transition:e.transition},{default:()=>[T.value.lazySrc&&"loaded"!==k.value&&l("img",{class:s(["v-img__img","v-img__img--preload",O.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:T.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),B=()=>i.placeholder?r(gb,{transition:e.transition,appear:!0},{default:()=>[("loading"===k.value||"error"===k.value&&!i.error)&&l("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,U=()=>i.error?r(gb,{transition:e.transition,appear:!0},{default:()=>["error"===k.value&&l("div",{class:"v-img__error"},[i.error()])]}):null,$=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,j=n(!1);{const e=v(A,t=>{t&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.value=!0})}),e())})}return ve(()=>{const t=pb.filterProps(e);return w(r(pb,h({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!j.value},u.value,d.value,e.class],style:[{width:he("auto"===e.width?E.value:e.width)},c.value,e.style]},t,{aspectRatio:A.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(_,null,[r(L,null,null),r(F,null,null),r($,null,null),r(B,null,null),r(U,null,null)]),default:i.default}),[[bb,{handler:N,options:e.options},null,{once:!0}]])}),{currentSrc:S,image:C,state:k,naturalWidth:E,naturalHeight:x}}}),Ib=ae({border:[Boolean,Number,String]},"border");function Sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{borderClasses:o(()=>{const n=e.border;return!0===n||""===n?`${t}--border`:"string"==typeof n||0===n?String(n).split(" ").map(e=>`border-${e}`):[]})}}const Cb=[null,"default","comfortable","compact"],kb=ae({density:{type:String,default:"default",validator:e=>Cb.includes(e)}},"density");function Eb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{densityClasses:b(()=>`${t}--density-${e.density}`)}}const xb=["elevated","flat","tonal","outlined","text","plain"];function Tb(e,t){return l(_,null,[e&&l("span",{key:"overlay",class:s(`${t}__overlay`)},null),l("span",{key:"underlay",class:s(`${t}__underlay`)},null)])}const Ab=ae({color:String,variant:{type:String,default:"elevated",validator:e=>xb.includes(e)}},"variant");function Nb(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const a=b(()=>{const{variant:a}=t(e);return`${n}--variant-${a}`}),{colorClasses:r,colorStyles:i}=tb(()=>{const{variant:n,color:a}=t(e);return{[["elevated","flat"].includes(n)?"background":"text"]:a}});return{colorClasses:r,colorStyles:i,variantClasses:a}}const Vb=ae({start:Boolean,end:Boolean,icon:be,image:String,text:String,...Ib(),...ye(),...kb(),...fb(),...ib(),...ob(),...ge(),...Ab({variant:"flat"})},"VAvatar"),Db=ne()({name:"VAvatar",props:Vb(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{borderClasses:o}=Sb(e),{colorClasses:l,colorStyles:u,variantClasses:c}=Nb(e),{densityClasses:d}=Eb(e),{roundedClasses:h}=vb(e),{sizeClasses:p,sizeStyles:f}=sb(e);return ve(()=>r(e.tag,{class:s(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,o.value,l.value,d.value,h.value,p.value,c.value,e.class]),style:i([u.value,f.value,e.style])},{default:()=>[n.default?r(eb,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?r(_b,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?r(ub,{key:"icon",icon:e.icon},null):e.text,Tb(!1,"v-avatar")]})),{}}}),Pb=ae({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Rb(e){return{elevationClasses:b(()=>{const t=u(e)?e.value:e.elevation;return null==t?[]:[`elevation-${t}`]})}}const Mb=ae({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...Ib(),...ye(),...kb(),...Pb(),...fb(),...ob(),...ge(),...Ab()},"VBtnGroup"),Ob=ne()({name:"VBtnGroup",props:Mb(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{densityClasses:o}=Eb(e),{borderClasses:l}=Sb(e),{elevationClasses:u}=Rb(e),{roundedClasses:c}=vb(e);re({VBtn:{height:b(()=>"horizontal"===e.direction?"auto":null),baseColor:b(()=>e.baseColor),color:b(()=>e.color),density:b(()=>e.density),flat:!0,variant:b(()=>e.variant)}}),ve(()=>r(e.tag,{class:s(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,l.value,o.value,u.value,c.value,e.class]),style:i(e.style)},n))}}),Lb=ae({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Fb=ae({value:null,disabled:Boolean,selectedClass:String},"group-item");function Bb(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=Se("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=E();x(Symbol.for(`${t.description}:id`),r);const i=T(t,null);if(!i){if(!n)return i;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const s=b(()=>e.value),l=o(()=>!(!i.disabled.value&&!e.disabled));i.register({id:r,value:s,disabled:l},a),y(()=>{i.unregister(r)});const u=o(()=>i.isSelected(r)),c=o(()=>i.items.value[0].id===r),d=o(()=>i.items.value[i.items.value.length-1].id===r),h=o(()=>u.value&&[i.selectedClass.value,e.selectedClass]);return v(u,e=>{a.emit("group:selected",{value:e})},{flush:"sync"}),{id:r,isSelected:u,isFirst:c,isLast:d,toggle:()=>i.select(r,!u.value),select:e=>i.select(r,e),selectedClass:h,value:s,disabled:l,group:i}}function Ub(e,t){let n=!1;const a=S([]),r=ke(e,"modelValue",[],e=>null==e?[]:$b(a,xe(e)),t=>{const n=function(e,t){const n=[];return t.forEach(t=>{const a=e.findIndex(e=>e.id===t);if(~a){const t=e[a];n.push(null!=t.value?t.value:a)}}),n}(a,t);return e.multiple?n:n[0]}),i=Se("useGroup");function s(){const t=a.find(e=>!e.disabled);t&&"force"===e.mandatory&&!r.value.length&&(r.value=[t.id])}function o(t){if(e.multiple,r.value.length){const e=r.value[0],n=a.findIndex(t=>t.id===e);let i=(n+t)%a.length,s=a[i];for(;s.disabled&&i!==n;)i=(i+t)%a.length,s=a[i];if(s.disabled)return;r.value=[a[i].id]}else{const e=a.find(e=>!e.disabled);e&&(r.value=[e.id])}}C(()=>{s()}),y(()=>{n=!0}),k(()=>{for(let e=0;e<a.length;e++)a[e].useIndexAsValue&&(a[e].value=e)});const l={register:function(e,n){const r=e,s=Symbol.for(`${t.description}:id`),o=Te(s,null==i?void 0:i.vnode).indexOf(n);null==A(r.value)&&(r.value=o,r.useIndexAsValue=!0),o>-1?a.splice(o,0,r):a.push(r)},unregister:function(e){if(n)return;s();const t=a.findIndex(t=>t.id===e);a.splice(t,1)},selected:r,select:function(t,n){const i=a.find(e=>e.id===t);if(!n||!(null==i?void 0:i.disabled))if(e.multiple){const a=r.value.slice(),i=a.findIndex(e=>e===t),s=~i;if(n=n??!s,s&&e.mandatory&&a.length<=1)return;if(!s&&null!=e.max&&a.length+1>e.max)return;i<0&&n?a.push(t):i>=0&&!n&&a.splice(i,1),r.value=a}else{const a=r.value.includes(t);if(e.mandatory&&a)return;if(!a&&!n)return;r.value=n??!a?[t]:[]}},disabled:b(()=>e.disabled),prev:()=>o(a.length-1),next:()=>o(1),isSelected:e=>r.value.includes(e),selectedClass:b(()=>e.selectedClass),items:b(()=>a),getItemIndex:e=>function(e,t){const n=$b(e,[t]);return n.length?e.findIndex(e=>e.id===n[0]):-1}(a,e)};return x(t,l),l}function $b(e,t){const n=[];return t.forEach(t=>{const a=e.find(e=>Ee(t,e.value)),r=e[t];null!=(null==a?void 0:a.value)?n.push(a.id):(null==r?void 0:r.useIndexAsValue)&&n.push(r.id)}),n}const jb=Symbol.for("vuetify:v-btn-toggle"),zb=ae({...Mb(),...Lb()},"VBtnToggle"),qb=ne()({name:"VBtnToggle",props:zb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:i,prev:s,select:o,selected:l}=Ub(e,jb);return ve(()=>{const t=Ob.filterProps(e);return r(Ob,h({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:a,next:i,prev:s,select:o,selected:l})]}})}),{next:i,prev:s,select:o}}});function Hb(e,t){const a=f(),r=n(!1);if(Ie){const e=new IntersectionObserver(e=>{r.value=!!e.find(e=>e.isIntersecting)},t);N(()=>{e.disconnect()}),v(a,(t,n)=>{n&&(e.unobserve(n),r.value=!1),t&&e.observe(t)},{flush:"post"})}return{intersectionRef:a,isIntersecting:r}}const Kb=ae({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...ye(),...ib(),...ob({tag:"div"}),...ge()},"VProgressCircular"),Gb=ne()({name:"VProgressCircular",props:Kb(),setup(e,t){let{slots:n}=t;const a=2*Math.PI*20,o=f(),{themeClasses:u}=Ce(e),{sizeClasses:c,sizeStyles:d}=sb(e),{textColorClasses:h,textColorStyles:p}=nb(()=>e.color),{textColorClasses:v,textColorStyles:m}=nb(()=>e.bgColor),{intersectionRef:g,isIntersecting:y}=Hb(),{resizeRef:w,contentRect:_}=Ae(),I=b(()=>Ne(parseFloat(e.modelValue),0,100)),S=b(()=>Number(e.width)),C=b(()=>d.value?Number(e.size):_.value?_.value.width:Math.max(S.value,32)),k=b(()=>20/(1-S.value/C.value)*2),E=b(()=>S.value/C.value*k.value),x=b(()=>he((100-I.value)/100*a));return V(()=>{g.value=o.value,w.value=o.value}),ve(()=>r(e.tag,{ref:o,class:s(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":y.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},u.value,c.value,h.value,e.class]),style:i([d.value,p.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:I.value},{default:()=>[l("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${k.value} ${k.value}`},[l("circle",{class:s(["v-progress-circular__underlay",v.value]),style:i(m.value),fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":a,"stroke-dashoffset":0},null),l("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:20,"stroke-width":E.value,"stroke-dasharray":a,"stroke-dashoffset":x.value},null)]),n.default&&l("div",{class:"v-progress-circular__content"},[n.default({value:I.value})])]})),{}}}),Wb={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Qb=ae({location:String},"location");function Yb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=Ve();return{locationStyles:o(()=>{if(!e.location)return{};const{side:r,align:i}=De(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function s(e){return n?n(e):0}const o={};return"center"!==r&&(t?o[Wb[r]]=`calc(100% - ${s(r)}px)`:o[r]=0),"center"!==i?t?o[Wb[i]]=`calc(100% - ${s(i)}px)`:o[i]=0:("center"===r?o.top=o.left="50%":o[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",o.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),o})}}const Xb=ae({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ye(),...Qb({location:"top"}),...fb(),...ob(),...ge()},"VProgressLinear"),Jb=ne()({name:"VProgressLinear",props:Xb(),emits:{"update:modelValue":e=>!0},setup(e,t){var n;let{slots:a}=t;const u=ke(e,"modelValue"),{isRtl:c,rtlClasses:h}=Ve(),{themeClasses:p}=Ce(e),{locationStyles:f}=Yb(e),{textColorClasses:v,textColorStyles:m}=nb(()=>e.color),{backgroundColorClasses:g,backgroundColorStyles:y}=ab(()=>e.bgColor||e.color),{backgroundColorClasses:b,backgroundColorStyles:w}=ab(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:_,backgroundColorStyles:I}=ab(()=>e.color),{roundedClasses:S}=vb(e),{intersectionRef:C,isIntersecting:k}=Hb(),E=o(()=>parseFloat(e.max)),x=o(()=>parseFloat(e.height)),T=o(()=>Ne(parseFloat(e.bufferValue)/E.value*100,0,100)),A=o(()=>Ne(parseFloat(u.value)/E.value*100,0,100)),N=o(()=>c.value!==e.reverse),V=o(()=>e.indeterminate?"fade-transition":"slide-x-transition"),D=Pe&&(null==(n=window.matchMedia)?void 0:n.call(window,"(forced-colors: active)").matches);function P(e){if(!C.value)return;const{left:t,right:n,width:a}=C.value.getBoundingClientRect(),r=N.value?a-e.clientX+(n-a):e.clientX-t;u.value=Math.round(r/a*E.value)}return ve(()=>r(e.tag,{ref:C,class:s(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&k.value,"v-progress-linear--reverse":N.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},S.value,p.value,h.value,e.class]),style:i([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?he(x.value):0,"--v-progress-linear-height":he(x.value),...e.absolute?f.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(u.value),E.value),onClick:e.clickable&&P},{default:()=>[e.stream&&l("div",{key:"stream",class:s(["v-progress-linear__stream",v.value]),style:{...m.value,[N.value?"left":"right"]:he(-x.value),borderTop:`${he(x.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${he(x.value/4)})`,width:he(100-T.value,"%"),"--v-progress-linear-stream-to":he(x.value*(N.value?1:-1))}},null),l("div",{class:s(["v-progress-linear__background",D?void 0:g.value]),style:i([y.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),l("div",{class:s(["v-progress-linear__buffer",D?void 0:b.value]),style:i([w.value,{opacity:parseFloat(e.bufferOpacity),width:he(T.value,"%")}])},null),r(d,{name:V.value},{default:()=>[e.indeterminate?l("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>l("div",{key:e,class:s(["v-progress-linear__indeterminate",e,D?void 0:_.value]),style:i(I.value)},null))]):l("div",{class:s(["v-progress-linear__determinate",D?void 0:_.value]),style:i([I.value,{width:he(A.value,"%")}])},null)]}),a.default&&l("div",{class:"v-progress-linear__content"},[a.default({value:A.value,buffer:T.value})])]})),{}}}),Zb=ae({loading:[Boolean,String]},"loader");function ew(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{loaderClasses:b(()=>({[`${t}--loading`]:e.loading}))}}function tw(e,t){var n;let{slots:a}=t;return l("div",{class:s(`${e.name}__loader`)},[(null==(n=a.default)?void 0:n.call(a,{color:e.color,isActive:e.active}))||r(Jb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const nw=["static","relative","fixed","absolute","sticky"],aw=ae({position:{type:String,validator:e=>nw.includes(e)}},"position");function rw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();return{positionClasses:b(()=>e.position?`${t}--${e.position}`:void 0)}}function iw(e,t){var n,a;const r=D("RouterLink"),i=b(()=>!(!e.href&&!e.to)),s=o(()=>(null==i?void 0:i.value)||Re(t,"click")||Re(e,"click"));if("string"==typeof r||!("useLink"in r)){const t=b(()=>e.href);return{isLink:i,isClickable:s,href:t,linkProps:S({href:t})}}const l=r.useLink({to:b(()=>e.to||""),replace:b(()=>e.replace)}),u=o(()=>e.to?l:void 0),c=function(){const e=Se("useRoute");return o(()=>{var t;return null==(t=null==e?void 0:e.proxy)?void 0:t.$route})}(),d=o(()=>{var t,n,a;return!!u.value&&(e.exact?c.value?(null==(a=u.value.isExactActive)?void 0:a.value)&&Ee(u.value.route.value.query,c.value.query):(null==(n=u.value.isExactActive)?void 0:n.value)??!1:(null==(t=u.value.isActive)?void 0:t.value)??!1)}),h=o(()=>{var t;return e.to?null==(t=u.value)?void 0:t.route.value.href:e.href});return{isLink:i,isClickable:s,isActive:d,route:null==(n=u.value)?void 0:n.route,navigate:null==(a=u.value)?void 0:a.navigate,href:h,linkProps:S({href:h,"aria-current":b(()=>d.value?"page":void 0)})}}const sw=ae({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let ow=!1;const lw=Symbol("rippleStop");function uw(e,t){e.style.transform=t,e.style.webkitTransform=t}function cw(e){return"TouchEvent"===e.constructor.name}function dw(e){return"KeyboardEvent"===e.constructor.name}const hw={show(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null==(n=null==t?void 0:t._ripple)?void 0:n.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",a.class&&(r.className+=` ${a.class}`);const{radius:s,scale:o,x:l,y:u,centerX:c,centerY:d}=function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0,i=0;if(!dw(e)){const n=t.getBoundingClientRect(),a=cw(e)?e.touches[e.touches.length-1]:e;r=a.clientX-n.left,i=a.clientY-n.top}let s=0,o=.3;(null==(n=t._ripple)?void 0:n.circle)?(o=.15,s=t.clientWidth/2,s=a.center?s:s+Math.sqrt((r-s)**2+(i-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*s)/2+"px",u=(t.clientHeight-2*s)/2+"px";return{radius:s,scale:o,x:a.center?l:r-s+"px",y:a.center?u:i-s+"px",centerX:l,centerY:u}}(e,t,a),h=2*s+"px";i.className="v-ripple__animation",i.style.width=h,i.style.height=h,t.appendChild(r);const p=window.getComputedStyle(t);p&&"static"===p.position&&(t.style.position="relative",t.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),uw(i,`translate(${l}, ${u}) scale3d(${o},${o},${o})`),i.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),uw(i,`translate(${c}, ${d}) scale3d(1,1,1)`)})})},hide(e){var t;if(!(null==(t=null==e?void 0:e._ripple)?void 0:t.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(0===n.length)return;const a=Array.from(n).findLast(e=>!e.dataset.isHiding);if(!a)return;a.dataset.isHiding="true";const r=performance.now()-Number(a.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{a.classList.remove("v-ripple__animation--in"),a.classList.add("v-ripple__animation--out"),setTimeout(()=>{var t;1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),(null==(t=a.parentNode)?void 0:t.parentNode)===e&&e.removeChild(a.parentNode)},300)},i)}};function pw(e){return void 0===e||!!e}function fw(e){const t={},n=e.currentTarget;if((null==n?void 0:n._ripple)&&!n._ripple.touched&&!e[lw]){if(e[lw]=!0,cw(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||dw(e),n._ripple.class&&(t.class=n._ripple.class),cw(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{hw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var e;(null==(e=null==n?void 0:n._ripple)?void 0:e.showTimerCommit)&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},80)}else hw.show(e,n,t)}}function vw(e){e[lw]=!0}function mw(e){const t=e.currentTarget;if(null==t?void 0:t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout(()=>{mw(e)}));window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),hw.hide(t)}}function gw(e){const t=e.currentTarget;(null==t?void 0:t._ripple)&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let yw=!1;function bw(e,t){!yw&&t.includes(e.key)&&(yw=!0,fw(e))}function ww(e){yw=!1,mw(e)}function _w(e){yw&&(yw=!1,mw(e))}function Iw(e,t,n){const{value:a,modifiers:r}=t,i=pw(a);i||hw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=i,e._ripple.centered=r.center,e._ripple.circle=r.circle;const s=we(a)?a:{};s.class&&(e._ripple.class=s.class);const o=s.keys??["Enter","Space"];if(e._ripple.keyDownHandler=e=>bw(e,o),i&&!n){if(r.stop)return e.addEventListener("touchstart",vw,{passive:!0}),void e.addEventListener("mousedown",vw);e.addEventListener("touchstart",fw,{passive:!0}),e.addEventListener("touchend",mw,{passive:!0}),e.addEventListener("touchmove",gw,{passive:!0}),e.addEventListener("touchcancel",mw),e.addEventListener("mousedown",fw),e.addEventListener("mouseup",mw),e.addEventListener("mouseleave",mw),e.addEventListener("keydown",e=>bw(e,o)),e.addEventListener("keyup",ww),e.addEventListener("blur",_w),e.addEventListener("dragstart",mw,{passive:!0})}else!i&&n&&Sw(e)}function Sw(e){var t;e.removeEventListener("mousedown",fw),e.removeEventListener("touchstart",fw),e.removeEventListener("touchend",mw),e.removeEventListener("touchmove",gw),e.removeEventListener("touchcancel",mw),e.removeEventListener("mouseup",mw),e.removeEventListener("mouseleave",mw),(null==(t=e._ripple)?void 0:t.keyDownHandler)&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",ww),e.removeEventListener("dragstart",mw),e.removeEventListener("blur",_w)}const Cw={mounted:function(e,t){Iw(e,t,!1)},unmounted:function(e){Sw(e),delete e._ripple},updated:function(e,t){if(t.value===t.oldValue)return;Iw(e,t,pw(t.oldValue))}},kw=ae({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:jb},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:be,appendIcon:be,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Ib(),...ye(),...kb(),...cb(),...Pb(),...Fb(),...Zb(),...Qb(),...aw(),...fb(),...sw(),...ib(),...ob({tag:"button"}),...ge(),...Ab({variant:"elevated"})},"VBtn"),Ew=ne()({name:"VBtn",props:kw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:i}=Ce(e),{borderClasses:s}=Sb(e),{densityClasses:u}=Eb(e),{dimensionStyles:c}=db(e),{elevationClasses:d}=Rb(e),{loaderClasses:p}=ew(e),{locationStyles:f}=Yb(e),{positionClasses:m}=rw(e),{roundedClasses:y}=vb(e),{sizeClasses:_,sizeStyles:I}=sb(e),S=Bb(e,e.symbol,!1),C=iw(e,n),k=o(()=>{var t;return void 0!==e.active?e.active:C.isLink.value?null==(t=C.isActive)?void 0:t.value:null==S?void 0:S.isSelected.value}),E=b(()=>k.value?e.activeColor??e.color:e.color),x=o(()=>{var t,n;return{color:(null==S?void 0:S.isSelected.value)&&(!C.isLink.value||(null==(t=C.isActive)?void 0:t.value))||!S||(null==(n=C.isActive)?void 0:n.value)?E.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:T,colorStyles:A,variantClasses:N}=Nb(x),V=o(()=>(null==S?void 0:S.disabled.value)||e.disabled),D=b(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),R=o(()=>{if(void 0!==e.value&&"symbol"!=typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function M(e){var t;V.value||C.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===n.target)||(null==(t=C.navigate)||t.call(C,e),null==S||S.toggle())}return function(e,t){v(()=>{var t;return null==(t=e.isActive)?void 0:t.value},n=>{e.isLink.value&&null!=n&&t&&g(()=>{t(n)})},{immediate:!0})}(C,null==S?void 0:S.select),ve(()=>{const t=C.isLink.value?"a":e.tag,n=!(!e.prependIcon&&!a.prepend),o=!(!e.appendIcon&&!a.append),v=!(!e.icon||!0===e.icon);return w(r(t,h({type:"a"===t?void 0:"button",class:["v-btn",null==S?void 0:S.selectedClass.value,{"v-btn--active":k.value,"v-btn--block":e.block,"v-btn--disabled":V.value,"v-btn--elevated":D.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},i.value,s.value,T.value,u.value,d.value,p.value,m.value,y.value,_.value,N.value,e.class],style:[A.value,c.value,f.value,I.value,e.style],"aria-busy":!!e.loading||void 0,disabled:V.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:M,value:R.value},C.linkProps),{default:()=>{var t;return[Tb(!0,"v-btn"),!e.icon&&n&&l("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?r(eb,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):r(ub,{key:"prepend-icon",icon:e.prependIcon},null)]),l("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&v?r(ub,{key:"content-icon",icon:e.icon},null):r(eb,{key:"content-defaults",disabled:!v,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var t;return[(null==(t=a.default)?void 0:t.call(a))??P(e.text)]}})]),!e.icon&&o&&l("span",{key:"append",class:"v-btn__append"},[a.append?r(eb,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):r(ub,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&l("span",{key:"loader",class:"v-btn__loader"},[(null==(t=a.loader)?void 0:t.call(a))??r(Gb,{color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[Cw,!V.value&&e.ripple,"",{center:!!e.icon}]])}),{group:S}}}),xw=ae({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...ye(),...ge()},"VDivider"),Tw=ne()({name:"VDivider",props:xw(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=Ce(e),{textColorClasses:u,textColorStyles:c}=nb(()=>e.color),d=o(()=>{const t={};return e.length&&(t[e.vertical?"height":"width"]=he(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=he(e.thickness)),t});return ve(()=>{const t=l("hr",{class:s([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,u.value,e.class]),style:i([d.value,c.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":n.role&&"separator"!==n.role?void 0:e.vertical?"vertical":"horizontal",role:`${n.role||"separator"}`},null);return a.default?l("div",{class:s(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[t,l("div",{class:"v-divider__content"},[a.default()]),t]):t}),{}}}),Aw=ae({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Nw(e,t,n){return ne()({name:e,props:Aw({mode:n,origin:t}),setup(t,n){let{slots:a}=n;const r={onBeforeEnter(e){t.origin&&(e.style.transformOrigin=t.origin)},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:n,offsetWidth:a,offsetHeight:r}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${a}px`,e.style.height=`${r}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&(null==e?void 0:e._transitionInitialStyles)){const{position:t,top:n,left:a,width:r,height:i}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=a||"",e.style.width=r||"",e.style.height=i||""}}};return()=>{const n=t.group?c:d;return p(n,{name:t.disabled?"":e,css:!t.disabled,...t.group?void 0:{mode:t.mode},...t.disabled?{}:r},a.default)}}})}function Vw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return ne()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(n,a){let{slots:r}=a;const i=n.group?c:d;return()=>p(i,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},r.default)}})}function Dw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"width":"height",n=R(`offset-${t}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[t]:e.style[t]}},onEnter(a){const r=a._initialStyle;if(!r)return;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const i=`${a[n]}px`;a.style[t]="0",a.offsetHeight,a.style.transition=r.transition,e&&a._parent&&a._parent.classList.add(e),requestAnimationFrame(()=>{a.style[t]=i})},onAfterEnter:r,onEnterCancelled:r,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[t]:e.style[t]},e.style.overflow="hidden",e.style[t]=`${e[n]}px`,e.offsetHeight,requestAnimationFrame(()=>e.style[t]="0")},onAfterLeave:a,onLeaveCancelled:a};function a(t){e&&t._parent&&t._parent.classList.remove(e),r(t)}function r(e){if(!e._initialStyle)return;const n=e._initialStyle[t];e.style.overflow=e._initialStyle.overflow,null!=n&&(e.style[t]=n),delete e._initialStyle}}const Pw=ae({target:[Object,Array]},"v-dialog-transition"),Rw=new WeakMap,Mw=ne()({name:"VDialogTransition",props:Pw(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(t,n){var a;await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),t.style.visibility="";const r=Lw(e.target,t),{x:i,y:s,sx:o,sy:l,speed:u}=r;Rw.set(t,r);const c=Me(t,[{transform:`translate(${i}px, ${s}px) scale(${o}, ${l})`,opacity:0},{}],{duration:225*u,easing:Fe});null==(a=Ow(t))||a.forEach(e=>{Me(e,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*u,easing:Le})}),c.finished.then(()=>n())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(t,n){var a;let r;await new Promise(e=>requestAnimationFrame(e)),r=!Rw.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?Lw(e.target,t):Rw.get(t);const{x:i,y:s,sx:o,sy:l,speed:u}=r;Me(t,[{},{transform:`translate(${i}px, ${s}px) scale(${o}, ${l})`,opacity:0}],{duration:125*u,easing:Oe}).finished.then(()=>n()),null==(a=Ow(t))||a.forEach(e=>{Me(e,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*u,easing:Le})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>e.target?r(d,h({name:"dialog-transition"},a,{css:!1}),n):r(d,{name:"dialog-transition"},n)}});function Ow(e){var t;const n=null==(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))?void 0:t.children;return n&&[...n]}function Lw(e,t){const n=Be(e),a=Ue(t),[r,i]=getComputedStyle(t).transformOrigin.split(" ").map(e=>parseFloat(e)),[s,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;"left"===s||"left"===o?l-=n.width/2:"right"!==s&&"right"!==o||(l+=n.width/2);let u=n.top+n.height/2;"top"===s||"top"===o?u-=n.height/2:"bottom"!==s&&"bottom"!==o||(u+=n.height/2);const c=n.width/a.width,d=n.height/a.height,h=Math.max(1,c,d),p=c/h||0,f=d/h||0,v=a.width*a.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,10*(v-.12)+1):1;return{x:l-(r+a.left),y:u-(i+a.top),sx:p,sy:f,speed:m}}Nw("fab-transition","center center","out-in"),Nw("dialog-bottom-transition"),Nw("dialog-top-transition");const Fw=Nw("fade-transition");Nw("scale-transition"),Nw("scroll-x-transition"),Nw("scroll-x-reverse-transition"),Nw("scroll-y-transition"),Nw("scroll-y-reverse-transition"),Nw("slide-x-transition"),Nw("slide-x-reverse-transition");const Bw=Nw("slide-y-transition");Nw("slide-y-reverse-transition");const Uw=Vw("expand-transition",Dw()),$w=Vw("expand-x-transition",Dw("",!0)),jw=Symbol.for("vuetify:list");function zw(){let{filterable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterable:!1};const t=T(jw,{filterable:!1,hasPrepend:n(!1),updateHasPrepend:()=>null}),a={filterable:t.filterable||e,hasPrepend:n(!1),updateHasPrepend:e=>{e&&(a.hasPrepend.value=e)}};return x(jw,a),t}function qw(){return T(jw,null)}const Hw=e=>{const t={activate:t=>{let{id:n,value:a,activated:r}=t;return n=M(n),e&&!a&&1===r.size&&r.has(n)||(a?r.add(n):r.delete(n)),r},in:(e,n,a)=>{let r=new Set;if(null!=e)for(const i of xe(e))r=t.activate({id:i,value:!0,activated:new Set(r),children:n,parents:a});return r},out:e=>Array.from(e)};return t},Kw=e=>{const t=Hw(e);return{activate:e=>{let{activated:n,id:a,...r}=e;a=M(a);const i=n.has(a)?new Set([a]):new Set;return t.activate({...r,id:a,activated:i})},in:(e,n,a)=>{let r=new Set;if(null!=e){const i=xe(e);i.length&&(r=t.in(i.slice(0,1),n,a))}return r},out:(e,n,a)=>t.out(e,n,a)}},Gw={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const e=new Set;e.add(t);let n=r.get(t);for(;null!=n;)e.add(n),n=r.get(n);return e}return a.delete(t),a},select:()=>null},Ww={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let e=r.get(t);for(a.add(t);null!=e&&e!==t;)a.add(e),e=r.get(e);return a}return a.delete(t),a},select:()=>null},Qw={open:Ww.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const i=[];let s=r.get(t);for(;null!=s;)i.push(s),s=r.get(s);return new Set(i)}},Yw=e=>{const t={select:t=>{let{id:n,value:a,selected:r}=t;if(n=M(n),e&&!a){const e=Array.from(r.entries()).reduce((e,t)=>{let[n,a]=t;return"on"===a&&e.push(n),e},[]);if(1===e.length&&e[0]===n)return r}return r.set(n,a?"on":"off"),r},in:(e,n,a,r)=>{const i=new Map;for(const s of e||[])t.select({id:s,value:!0,selected:i,children:n,parents:a,disabled:r});return i},out:e=>{const t=[];for(const[n,a]of e.entries())"on"===a&&t.push(n);return t}};return t},Xw=e=>{const t=Yw(e);return{select:e=>{let{selected:n,id:a,...r}=e;a=M(a);const i=n.has(a)?new Map([[a,n.get(a)]]):new Map;return t.select({...r,id:a,selected:i})},in:(e,n,a,r)=>(null==e?void 0:e.length)?t.in(e.slice(0,1),n,a,r):new Map,out:(e,n,a)=>t.out(e,n,a)}},Jw=e=>{const t={select:t=>{let{id:n,value:a,selected:r,children:i,parents:s,disabled:o}=t;n=M(n);const l=new Map(r),u=[n];for(;u.length;){const e=u.shift();o.has(e)||r.set(M(e),a?"on":"off"),i.has(e)&&u.push(...i.get(e))}let c=M(s.get(n));for(;c;){let e=!0,t=!0;for(const n of i.get(c)){const a=M(n);if(!o.has(a)&&("on"!==r.get(a)&&(e=!1),r.has(a)&&"off"!==r.get(a)&&(t=!1),!e&&!t))break}r.set(c,e?"on":t?"off":"indeterminate"),c=M(s.get(c))}if(e&&!a){if(0===Array.from(r.entries()).reduce((e,t)=>{let[n,a]=t;return"on"===a&&e.push(n),e},[]).length)return l}return r},in:(e,n,a,r)=>{let i=new Map;for(const s of e||[])i=t.select({id:s,value:!0,selected:i,children:n,parents:a,disabled:r});return i},out:(e,t)=>{const n=[];for(const[a,r]of e.entries())"on"!==r||t.has(a)||n.push(a);return n}};return t},Zw=Symbol.for("vuetify:nested"),e_={id:n(),root:{register:()=>null,unregister:()=>null,children:f(new Map),parents:f(new Map),disabled:f(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:f(!1),selectable:f(!1),opened:f(new Set),activated:f(new Set),selected:f(new Map),selectedValues:f([]),getPath:()=>[]}},t_=ae({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),n_=e=>{let t=!1;const a=n(new Map),r=n(new Map),i=n(new Set),s=ke(e,"opened",e.opened,e=>new Set(Array.isArray(e)?e.map(e=>M(e)):e),e=>[...e.values()]),l=o(()=>{if("object"==typeof e.activeStrategy)return e.activeStrategy;if("function"==typeof e.activeStrategy)return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return(e=>{const t=Hw(e);return{activate:e=>{let{id:n,activated:a,children:r,...i}=e;return n=M(n),r.has(n)?a:t.activate({id:n,activated:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"single-leaf":return(e=>{const t=Kw(e);return{activate:e=>{let{id:n,activated:a,children:r,...i}=e;return n=M(n),r.has(n)?a:t.activate({id:n,activated:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Hw(e.mandatory);default:return Kw(e.mandatory)}}),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;if("function"==typeof e.selectStrategy)return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return(e=>{const t=Xw(e);return{select:e=>{let{id:n,selected:a,children:r,...i}=e;return n=M(n),r.has(n)?a:t.select({id:n,selected:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"leaf":return(e=>{const t=Yw(e);return{select:e=>{let{id:n,selected:a,children:r,...i}=e;return n=M(n),r.has(n)?a:t.select({id:n,selected:a,children:r,...i})},in:t.in,out:t.out}})(e.mandatory);case"independent":return Yw(e.mandatory);case"single-independent":return Xw(e.mandatory);case"trunk":return(e=>{const t=Jw(e);return{select:t.select,in:t.in,out:(e,t,n)=>{const a=[];for(const[r,i]of e.entries())if("on"===i){if(n.has(r)){const t=n.get(r);if("on"===e.get(t))continue}a.push(r)}return a}}})(e.mandatory);default:return Jw(e.mandatory)}}),c=o(()=>{if("object"==typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return Qw;case"single":return Gw;default:return Ww}}),d=ke(e,"activated",e.activated,e=>l.value.in(e,a.value,r.value),e=>l.value.out(e,a.value,r.value)),h=ke(e,"selected",e.selected,e=>u.value.in(e,a.value,r.value,i.value),e=>u.value.out(e,a.value,r.value));function p(e){const t=[];let n=M(e);for(;null!=n;)t.unshift(n),n=r.value.get(n);return t}y(()=>{t=!0});const f=Se("nested"),v=new Set,m={id:n(),root:{opened:s,activatable:b(()=>e.activatable),selectable:b(()=>e.selectable),activated:d,selected:h,selectedValues:o(()=>{const e=[];for(const[t,n]of h.value.entries())"on"===n&&e.push(t);return e}),register:(e,t,n,s)=>{if(v.has(e))return p(e).map(String).join(" -> "),void p(t).concat(e).map(String).join(" -> ");v.add(e),t&&e!==t&&r.value.set(e,t),n&&i.value.add(e),s&&a.value.set(e,[]),null!=t&&a.value.set(t,[...a.value.get(t)||[],e])},unregister:e=>{if(t)return;v.delete(e),a.value.delete(e),i.value.delete(e);const n=r.value.get(e);if(n){const t=a.value.get(n)??[];a.value.set(n,t.filter(t=>t!==e))}r.value.delete(e)},open:(e,t,n)=>{f.emit("click:open",{id:e,value:t,path:p(e),event:n});const i=c.value.open({id:e,value:t,opened:new Set(s.value),children:a.value,parents:r.value,event:n});i&&(s.value=i)},openOnSelect:(e,t,n)=>{const i=c.value.select({id:e,value:t,selected:new Map(h.value),opened:new Set(s.value),children:a.value,parents:r.value,event:n});i&&(s.value=i)},select:(e,t,n)=>{f.emit("click:select",{id:e,value:t,path:p(e),event:n});const s=u.value.select({id:e,value:t,selected:new Map(h.value),children:a.value,parents:r.value,disabled:i.value,event:n});s&&(h.value=s),m.root.openOnSelect(e,t,n)},activate:(t,n,i)=>{if(!e.activatable)return m.root.select(t,!0,i);f.emit("click:activate",{id:t,value:n,path:p(t),event:i});const s=l.value.activate({id:t,value:n,activated:new Set(d.value),children:a.value,parents:r.value,event:i});if(s.size!==d.value.size)d.value=s;else{for(const e of s)if(!d.value.has(e))return void(d.value=s);for(const e of d.value)if(!s.has(e))return void(d.value=s)}},children:a,parents:r,disabled:i,getPath:p}};return x(Zw,m),m.root},a_=(e,n,a)=>{const r=T(Zw,e_),i=Symbol("nested item"),s=o(()=>M(t(e))??i),l={...r,id:s,open:(e,t)=>r.root.open(s.value,e,t),openOnSelect:(e,t)=>r.root.openOnSelect(s.value,e,t),isOpen:o(()=>r.root.opened.value.has(s.value)),parent:o(()=>r.root.parents.value.get(s.value)),activate:(e,t)=>r.root.activate(s.value,e,t),isActivated:o(()=>r.root.activated.value.has(s.value)),select:(e,t)=>r.root.select(s.value,e,t),isSelected:o(()=>"on"===r.root.selected.value.get(s.value)),isIndeterminate:o(()=>"indeterminate"===r.root.selected.value.get(s.value)),isLeaf:o(()=>!r.root.children.value.get(s.value)),isGroupActivator:r.isGroupActivator};return m(()=>{r.isGroupActivator||r.root.register(s.value,r.id.value,t(n),a)}),y(()=>{r.isGroupActivator||r.root.unregister(s.value)}),a&&x(Zw,l),l};function r_(){const e=n(!1);C(()=>{window.requestAnimationFrame(()=>{e.value=!0})});return{ssrBootStyles:b(()=>e.value?void 0:{transition:"none !important"}),isBooted:O(e)}}const i_=$e({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return(()=>{const e=T(Zw,e_);x(Zw,{...e,isGroupActivator:!0})})(),()=>{var e;return null==(e=n.default)?void 0:e.call(n)}}}),s_=ae({activeColor:String,baseColor:String,color:String,collapseIcon:{type:be,default:"$collapse"},disabled:Boolean,expandIcon:{type:be,default:"$expand"},rawId:[String,Number],prependIcon:be,appendIcon:be,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ye(),...ob()},"VListGroup"),o_=ne()({name:"VListGroup",props:s_(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:u,id:c}=a_(()=>e.value,()=>e.disabled,!0),d=o(()=>`v-list-group--id-${String(e.rawId??c.value)}`),h=qw(),{isBooted:p}=r_();function f(e){var t;["INPUT","TEXTAREA"].includes(null==(t=e.target)?void 0:t.tagName)||u(!a.value,e)}const v=o(()=>({onClick:f,class:"v-list-group__header",id:d.value})),m=o(()=>a.value?e.collapseIcon:e.expandIcon),g=o(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&m.value,appendIcon:e.appendIcon||!e.subgroup&&m.value,title:e.title,value:e.value}}));return ve(()=>r(e.tag,{class:s(["v-list-group",{"v-list-group--prepend":null==h?void 0:h.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:i(e.style)},{default:()=>[n.activator&&r(eb,{defaults:g.value},{default:()=>[r(i_,null,{default:()=>[n.activator({props:v.value,isOpen:a.value})]})]}),r(gb,{transition:{component:Uw},disabled:!p.value},{default:()=>{var e;return[w(l("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[null==(e=n.default)?void 0:e.call(n)]),[[I,a.value]])]}})]})),{isOpen:a}}}),l_=ae({opacity:[Number,String],...ye(),...ob()},"VListItemSubtitle"),u_=ne()({name:"VListItemSubtitle",props:l_(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-list-item-subtitle",e.class]),style:i([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),c_=je("v-list-item-title"),d_=ae({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:be,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:qe(),onClickOnce:qe(),...Ib(),...ye(),...kb(),...cb(),...Pb(),...fb(),...sw(),...ob(),...ge(),...Ab({variant:"text"})},"VListItem"),h_=ne()({name:"VListItem",directives:{vRipple:Cw},props:d_(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:i}=t;const s=iw(e,n),u=o(()=>void 0===e.value?s.href.value:e.value),{activate:c,isActivated:d,select:p,isOpen:f,isSelected:g,isIndeterminate:y,isGroupActivator:I,root:S,parent:C,openOnSelect:k,id:E}=a_(u,()=>e.disabled,!1),x=qw(),T=o(()=>{var t;return!1!==e.active&&(e.active||(null==(t=s.isActive)?void 0:t.value)||(S.activatable.value?d.value:g.value))}),A=b(()=>!1!==e.link&&s.isLink.value),N=o(()=>!!x&&(S.selectable.value||S.activatable.value||null!=e.value)),V=o(()=>!e.disabled&&!1!==e.link&&(e.link||s.isClickable.value||N.value)),D=b(()=>e.rounded||e.nav),R=b(()=>e.color??e.activeColor),M=b(()=>({color:T.value?R.value??e.baseColor:e.baseColor,variant:e.variant}));function O(){null!=C.value&&S.open(C.value,!0),k(!0)}v(()=>{var e;return null==(e=s.isActive)?void 0:e.value},e=>{e&&O()}),m(()=>{var e;(null==(e=s.isActive)?void 0:e.value)&&O()});const{themeClasses:L}=Ce(e),{borderClasses:F}=Sb(e),{colorClasses:B,colorStyles:U,variantClasses:$}=Nb(M),{densityClasses:j}=Eb(e),{dimensionStyles:z}=db(e),{elevationClasses:q}=Rb(e),{roundedClasses:H}=vb(D),K=b(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),G=b(()=>void 0!==e.ripple&&e.ripple&&(null==x?void 0:x.filterable)?{keys:["Enter"]}:e.ripple),W=o(()=>({isActive:T.value,select:p,isOpen:f.value,isSelected:g.value,isIndeterminate:y.value}));function Q(t){var n,a;i("click",t),["INPUT","TEXTAREA"].includes(null==(n=t.target)?void 0:n.tagName)||V.value&&(null==(a=s.navigate)||a.call(s,t),I||(S.activatable.value?c(!d.value,t):(S.selectable.value||null!=e.value)&&p(!g.value,t)))}function Y(e){const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||("Enter"===e.key||" "===e.key&&!(null==x?void 0:x.filterable))&&(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",e)))}return ve(()=>{const t=A.value?"a":e.tag,n=a.title||null!=e.title,i=a.subtitle||null!=e.subtitle,o=!(!e.appendAvatar&&!e.appendIcon),u=!(!o&&!a.append),c=!(!e.prependAvatar&&!e.prependIcon),p=!(!c&&!a.prepend);return null==x||x.updateHasPrepend(p),e.activeColor&&ze("active-color",["color","base-color"]),w(r(t,h({class:["v-list-item",{"v-list-item--active":T.value,"v-list-item--disabled":e.disabled,"v-list-item--link":V.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!p&&(null==x?void 0:x.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&T.value},L.value,F.value,B.value,j.value,q.value,K.value,H.value,$.value,e.class],style:[U.value,z.value,e.style],tabindex:V.value?x?-2:0:void 0,"aria-selected":N.value?S.activatable.value?d.value:S.selectable.value?g.value:T.value:void 0,onClick:Q,onKeydown:V.value&&!A.value&&Y},s.linkProps),{default:()=>{var t;return[Tb(V.value||T.value,"v-list-item"),p&&l("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?r(eb,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var e;return[null==(e=a.prepend)?void 0:e.call(a,W.value)]}}):l(_,null,[e.prependAvatar&&r(Db,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&r(ub,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),l("div",{class:"v-list-item__spacer"},null)]),l("div",{class:"v-list-item__content","data-no-activator":""},[n&&r(c_,{key:"title"},{default:()=>{var t;return[(null==(t=a.title)?void 0:t.call(a,{title:e.title}))??P(e.title)]}}),i&&r(u_,{key:"subtitle"},{default:()=>{var t;return[(null==(t=a.subtitle)?void 0:t.call(a,{subtitle:e.subtitle}))??P(e.subtitle)]}}),null==(t=a.default)?void 0:t.call(a,W.value)]),u&&l("div",{key:"append",class:"v-list-item__append"},[a.append?r(eb,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var e;return[null==(e=a.append)?void 0:e.call(a,W.value)]}}):l(_,null,[e.appendIcon&&r(ub,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&r(Db,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),l("div",{class:"v-list-item__spacer"},null)])]}}),[[Cw,V.value&&G.value]])}),{activate:c,isActivated:d,isGroupActivator:I,isSelected:g,list:x,select:p,root:S,id:E,link:s}}}),p_=ae({color:String,inset:Boolean,sticky:Boolean,title:String,...ye(),...ob()},"VListSubheader"),f_=ne()({name:"VListSubheader",props:p_(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:o}=nb(()=>e.color);return ve(()=>{const t=!(!n.default&&!e.title);return r(e.tag,{class:s(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:i([{textColorStyles:o},e.style])},{default:()=>{var a;return[t&&l("div",{class:"v-list-subheader__text"},[(null==(a=n.default)?void 0:a.call(n))??e.title])]}})}),{}}}),v_=ae({items:Array,returnObject:Boolean},"VListChildren"),m_=ne()({name:"VListChildren",props:v_(),setup(e,t){let{slots:n}=t;return zw(),()=>{var t,a;return(null==(t=n.default)?void 0:t.call(n))??(null==(a=e.items)?void 0:a.map(t=>{var a,i;let{children:s,props:o,type:l,raw:u}=t;if("divider"===l)return(null==(a=n.divider)?void 0:a.call(n,{props:o}))??r(Tw,o,null);if("subheader"===l)return(null==(i=n.subheader)?void 0:i.call(n,{props:o}))??r(f_,o,null);const c={subtitle:n.subtitle?e=>{var t;return null==(t=n.subtitle)?void 0:t.call(n,{...e,item:u})}:void 0,prepend:n.prepend?e=>{var t;return null==(t=n.prepend)?void 0:t.call(n,{...e,item:u})}:void 0,append:n.append?e=>{var t;return null==(t=n.append)?void 0:t.call(n,{...e,item:u})}:void 0,title:n.title?e=>{var t;return null==(t=n.title)?void 0:t.call(n,{...e,item:u})}:void 0},d=o_.filterProps(o);return s?r(o_,h(d,{value:e.returnObject?u:null==o?void 0:o.value,rawId:null==o?void 0:o.value}),{activator:t=>{let{props:a}=t;const i=h(o,a,{value:e.returnObject?u:o.value});return n.header?n.header({props:i}):r(h_,i,c)},default:()=>r(m_,{items:s,returnObject:e.returnObject},n)}):n.item?n.item({props:o}):r(h_,h(o,{value:e.returnObject?u:o.value}),c)}))}}}),g_=ae({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),y_=new Set(["item","divider","subheader"]);function b_(e,t){const n=Ge(t,e.itemTitle,t),a=Ge(t,e.itemValue,n),r=Ge(t,e.itemChildren),i=!0===e.itemProps?"object"!=typeof t||null==t||Array.isArray(t)?void 0:"children"in t?We(t,["children"]):t:Ge(t,e.itemProps);let s=Ge(t,e.itemType,"item");y_.has(s)||(s="item");const o={title:n,value:a,...i};return{type:s,title:String(o.title??""),value:o.value,props:o,children:"item"===s&&Array.isArray(r)?w_(e,r):void 0,raw:t}}function w_(e,t){const n=Ke(e,b_.neededProps),a=[];for(const r of t)a.push(b_(n,r));return a}function __(e){const t=o(()=>w_(e,e.items)),a=o(()=>t.value.some(e=>null===e.value)),r=n(new Map),i=n([]);return V(()=>{const e=t.value,n=new Map,a=[];for(let t=0;t<e.length;t++){const r=e[t];if(He(r.value)||null===r.value){let e=n.get(r.value);e||(e=[],n.set(r.value,e)),e.push(r)}else a.push(r)}r.value=n,i.value=a}),{items:t,transformIn:function(n){const s=r.value,o=t.value,l=i.value,u=a.value,c=e.returnObject,d=!!e.valueComparator,h=e.valueComparator||Ee,p=Ke(e,b_.neededProps),f=[];e:for(const e of n){if(!u&&null===e)continue;if(c&&"string"==typeof e){f.push(b_(p,e));continue}const t=s.get(e);if(!d&&t)f.push(...t);else{for(const t of d?o:l)if(h(e,t.value)){f.push(t);continue e}f.push(b_(p,e))}}return f},transformOut:function(t){return e.returnObject?t.map(e=>{let{raw:t}=e;return t}):t.map(e=>{let{value:t}=e;return t})}}}b_.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];const I_=new Set(["item","divider","subheader"]);function S_(e,t){const n=He(t)?t:Ge(t,e.itemTitle),a=He(t)?t:Ge(t,e.itemValue,void 0),r=Ge(t,e.itemChildren),i=!0===e.itemProps?We(t,["children"]):Ge(t,e.itemProps);let s=Ge(t,e.itemType,"item");I_.has(s)||(s="item");const o={title:n,value:a,...i};return{type:s,title:o.title,value:o.value,props:o,children:"item"===s&&r?C_(e,r):void 0,raw:t}}function C_(e,t){const n=[];for(const a of t)n.push(S_(e,a));return n}const k_=ae({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:be,collapseIcon:be,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":qe(),"onClick:select":qe(),"onUpdate:opened":qe(),...t_({selectStrategy:"single-leaf",openStrategy:"list"}),...Ib(),...ye(),...kb(),...cb(),...Pb(),...g_(),...fb(),...ob(),...ge(),...Ab({variant:"text"})},"VList"),E_=ne()({name:"VList",props:k_(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:a}=t;const{items:l}=function(e){return{items:o(()=>C_(e,e.items))}}(e),{themeClasses:u}=Ce(e),{backgroundColorClasses:c,backgroundColorStyles:d}=ab(()=>e.bgColor),{borderClasses:h}=Sb(e),{densityClasses:p}=Eb(e),{dimensionStyles:v}=db(e),{elevationClasses:m}=Rb(e),{roundedClasses:g}=vb(e),{children:y,open:w,parents:_,select:I,getPath:S}=n_(e),C=b(()=>e.lines?`v-list--${e.lines}-line`:void 0),k=b(()=>e.activeColor),E=b(()=>e.baseColor),x=b(()=>e.color);zw({filterable:e.filterable}),re({VListGroup:{activeColor:k,baseColor:E,color:x,expandIcon:b(()=>e.expandIcon),collapseIcon:b(()=>e.collapseIcon)},VListItem:{activeClass:b(()=>e.activeClass),activeColor:k,baseColor:E,color:x,density:b(()=>e.density),disabled:b(()=>e.disabled),lines:b(()=>e.lines),nav:b(()=>e.nav),slim:b(()=>e.slim),variant:b(()=>e.variant)}});const T=n(!1),A=f();function N(e){T.value=!0}function V(e){T.value=!1}function D(e){var t;T.value||e.relatedTarget&&(null==(t=A.value)?void 0:t.contains(e.relatedTarget))||M()}function P(e){const t=e.target;if(A.value&&("INPUT"!==t.tagName||!["Home","End"].includes(e.key))&&"TEXTAREA"!==t.tagName){if("ArrowDown"===e.key)M("next");else if("ArrowUp"===e.key)M("prev");else if("Home"===e.key)M("first");else{if("End"!==e.key)return;M("last")}e.preventDefault()}}function R(e){T.value=!0}function M(e){if(A.value)return Qe(A.value,e)}return ve(()=>r(e.tag,{ref:A,class:s(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},u.value,c.value,h.value,p.value,m.value,C.value,g.value,e.class]),style:i([d.value,v.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:N,onFocusout:V,onFocus:D,onKeydown:P,onMousedown:R},{default:()=>[r(m_,{items:l.value,returnObject:e.returnObject},a)]})),{open:w,select:I,focus:M,children:y,parents:_,getPath:S}}});function x_(e,t){return{x:e.x+t.x,y:e.y+t.y}}function T_(e,t){if("top"===e.side||"bottom"===e.side){const{side:n,align:a}=e;return x_({x:"left"===a?0:"center"===a?t.width/2:"right"===a?t.width:a,y:"top"===n?0:"bottom"===n?t.height:n},t)}if("left"===e.side||"right"===e.side){const{side:n,align:a}=e;return x_({x:"left"===n?0:"right"===n?t.width:n,y:"top"===a?0:"center"===a?t.height/2:"bottom"===a?t.height:a},t)}return x_({x:t.width/2,y:t.height/2},t)}const A_={static:function(){},connected:function(e,t,n){(Array.isArray(e.target.value)||Xe(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:r}=ie(()=>{const n=De(t.location,e.isRtl.value),a="overlap"===t.origin?n:"auto"===t.origin?Je(n):De(t.origin,e.isRtl.value);return n.side===a.side&&n.align===Ze(a).align?{preferredAnchor:et(n),preferredOrigin:et(a)}:{preferredAnchor:n,preferredOrigin:a}}),[i,s,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>o(()=>{const n=parseFloat(t[e]);return isNaN(n)?1/0:n})),c=o(()=>{if(Array.isArray(t.offset))return t.offset;if("string"==typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"==typeof t.offset?[t.offset,0]:[0,0]});let d=!1,h=-1;const p=new tt(4),f=new ResizeObserver(()=>{if(!d)return;if(requestAnimationFrame(e=>{e!==h&&p.clear(),requestAnimationFrame(e=>{h=e})}),p.isFull){const e=p.values();if(Ee(e.at(-1),e.at(-3))&&!Ee(e.at(-1),e.at(-2)))return}const e=y();e&&p.push(e.flipped)});let m=new nt({x:0,y:0,width:0,height:0});function y(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(m=Be(e.target.value));const t=function(e,t){const n=Ue(e);t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0);return n.y-=parseFloat(e.style.top||0),n}(e.contentEl.value,e.isRtl.value),o=at(e.contentEl.value);o.length||(o.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(t.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),t.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const h=o.reduce((e,t)=>{const n=rt(t);return e?new nt({x:Math.max(e.left,n.left),y:Math.max(e.top,n.top),width:Math.min(e.right,n.right)-Math.max(e.left,n.left),height:Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)}):n},void 0);h.x+=12,h.y+=12,h.width-=24,h.height-=24;let p={anchor:a.value,origin:r.value};function f(e){const n=new nt(t),a=T_(e.anchor,m),r=T_(e.origin,n);let{x:i,y:s}=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(a,r);switch(e.anchor.side){case"top":s-=c.value[0];break;case"bottom":s+=c.value[0];break;case"left":i-=c.value[0];break;case"right":i+=c.value[0]}switch(e.anchor.align){case"top":s-=c.value[1];break;case"bottom":s+=c.value[1];break;case"left":i-=c.value[1];break;case"right":i+=c.value[1]}n.x+=i,n.y+=s,n.width=Math.min(n.width,l.value),n.height=Math.min(n.height,u.value);return{overflows:st(n,h),x:i,y:s}}let v=0,g=0;const y={x:0,y:0},b={x:!1,y:!1};let w=-1;for(;!(w++>10);){const{x:e,y:n,overflows:a}=f(p);v+=e,g+=n,t.x+=e,t.y+=n;{const e=it(p.anchor),t=a.x.before||a.x.after,n=a.y.before||a.y.after;let r=!1;if(["x","y"].forEach(i=>{if("x"===i&&t&&!b.x||"y"===i&&n&&!b.y){const t={anchor:{...p.anchor},origin:{...p.origin}},n="x"===i?"y"===e?Ze:Je:"y"===e?Je:Ze;t.anchor=n(t.anchor),t.origin=n(t.origin);const{overflows:s}=f(t);(s[i].before<=a[i].before&&s[i].after<=a[i].after||s[i].before+s[i].after<(a[i].before+a[i].after)/2)&&(p=t,r=b[i]=!0)}}),r)continue}a.x.before&&(v+=a.x.before,t.x+=a.x.before),a.x.after&&(v-=a.x.after,t.x-=a.x.after),a.y.before&&(g+=a.y.before,t.y+=a.y.before),a.y.after&&(g-=a.y.after,t.y-=a.y.after);{const e=st(t,h);y.x=h.width-e.x.before-e.x.after,y.y=h.height-e.y.before-e.y.after,v+=e.x.before,t.x+=e.x.before,g+=e.y.before,t.y+=e.y.before}break}const _=it(p.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${p.anchor.side} ${p.anchor.align}`,transformOrigin:`${p.origin.side} ${p.origin.align}`,top:he(V_(g)),left:e.isRtl.value?void 0:he(V_(v)),right:e.isRtl.value?he(V_(-v)):void 0,minWidth:he("y"===_?Math.min(i.value,m.width):i.value),maxWidth:he(D_(Ne(y.x,i.value===1/0?0:i.value,l.value))),maxHeight:he(D_(Ne(y.y,s.value===1/0?0:s.value,u.value)))}),{available:y,contentBox:t,flipped:b}}return v(e.target,(e,t)=>{t&&!Array.isArray(t)&&f.unobserve(t),Array.isArray(e)?Ee(e,t)||y():e&&f.observe(e)},{immediate:!0}),v(e.contentEl,(e,t)=>{t&&f.unobserve(t),e&&f.observe(e)},{immediate:!0}),N(()=>{f.disconnect()}),v(()=>[a.value,r.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>y()),g(()=>{const e=y();if(!e)return;const{available:t,contentBox:n}=e;n.height>t.y&&requestAnimationFrame(()=>{y(),requestAnimationFrame(()=>{y()})})}),{updateLocation:y}}},N_=ae({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"==typeof e||e in A_},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function V_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function D_(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let P_=!0;const R_=[];let M_=-1;function O_(){cancelAnimationFrame(M_),M_=requestAnimationFrame(()=>{const e=R_.shift();e&&e(),R_.length?O_():P_=!0})}const L_={none:null,close:function(e){U_(B_(e.target.value,e.contentEl.value),function(t){e.isActive.value=!1})},block:function(e,t){var n;const a=null==(n=e.root.value)?void 0:n.offsetParent,r=B_(e.target.value,e.contentEl.value),i=[...new Set([...at(r,t.contained?a:void 0),...at(e.contentEl.value,t.contained?a:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(l=a||document.documentElement,ot(l)&&l);var l;o&&e.root.value.classList.add("v-overlay--scroll-blocked");i.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",he(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",he(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",he(s)),e.classList.add("v-overlay-scroll-blocked")}),N(()=>{i.forEach((e,t)=>{const n=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),a=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),r=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-n,e.scrollTop=-a,e.style.scrollBehavior=r}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})},reposition:function(e,t,n){let a=!1,r=-1,i=-1;function s(t){var n;n=()=>{var n,r;const i=performance.now();null==(r=(n=e.updateLocation).value)||r.call(n,t);const s=performance.now()-i;a=s/(1e3/60)>2},!P_||R_.length?(R_.push(n),O_()):(P_=!1,n(),O_())}i=("undefined"==typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{n.run(()=>{U_(B_(e.target.value,e.contentEl.value),e=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{s(e)})})):s(e)})})}),N(()=>{"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(i),cancelAnimationFrame(r)})}},F_=ae({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"==typeof e||e in L_}},"VOverlay-scroll-strategies");function B_(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!(null==t?void 0:t.contains(e))):e??t}function U_(e,t){const n=[document,...at(e)];n.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),N(()=>{n.forEach(e=>{e.removeEventListener("scroll",t)})})}const $_=Symbol.for("vuetify:v-menu"),j_=ae({closeDelay:[Number,String],openDelay:[Number,String]},"delay");const z_=ae({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...j_()},"VOverlay-activator");function q_(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const i=Se("useActivator"),s=f();let l=!1,u=!1,c=!0;const d=o(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),p=o(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:y}=function(e,t){let n=()=>{};function a(a){null==n||n();const r=Number(a?e.openDelay:e.closeDelay);return new Promise(e=>{n=lt(r,()=>{null==t||t(a),e(a)})})}return{clearDelay:n,runOpenDelay:function(){return a(!0)},runCloseDelay:function(){return a(!1)}}}(e,t=>{t!==(e.openOnHover&&l||d.value&&u)||e.openOnHover&&n.value&&!a.value||(n.value!==t&&(c=!0),n.value=t)}),b=f(),w=e=>{e.stopPropagation(),s.value=e.currentTarget||e.target,n.value||(b.value=[e.clientX,e.clientY]),n.value=!n.value},_=e=>{var t;(null==(t=e.sourceCapabilities)?void 0:t.firesTouchEvents)||(l=!0,s.value=e.currentTarget||e.target,m())},I=e=>{l=!1,y()},S=e=>{!1!==ct(e.target,":focus-visible")&&(u=!0,e.stopPropagation(),s.value=e.currentTarget||e.target,m())},C=e=>{u=!1,e.stopPropagation(),y()},k=o(()=>{const t={};return p.value&&(t.onClick=w),e.openOnHover&&(t.onMouseenter=_,t.onMouseleave=I),d.value&&(t.onFocus=S,t.onBlur=C),t}),E=o(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{l=!0,m()},t.onMouseleave=()=>{l=!1,y()}),d.value&&(t.onFocusin=()=>{u=!0,m()},t.onFocusout=()=>{u=!1,y()}),e.closeOnContentClick){const e=T($_,null);t.onClick=()=>{n.value=!1,null==e||e.closeParents()}}return t}),x=o(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{c&&(l=!0,c=!1,m())},t.onMouseleave=()=>{l=!1,y()}),t});v(a,t=>{var a;!t||(!e.openOnHover||l||d.value&&u)&&(!d.value||u||e.openOnHover&&l)||(null==(a=r.value)?void 0:a.contains(document.activeElement))||(n.value=!1)}),v(n,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const A=ut();V(()=>{A.value&&g(()=>{s.value=A.el})});const D=ut(),P=o(()=>"cursor"===e.target&&b.value?b.value:D.value?D.el:H_(e.target,i)||s.value),R=o(()=>Array.isArray(P.value)?void 0:P.value);let M;return v(()=>!!e.activator,t=>{t&&Pe?(M=L(),M.run(()=>{!function(e,t,n){let{activatorEl:a,activatorEvents:r}=n;function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&dt(t,h(r.value,n))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&ht(t,h(r.value,n))}function o(){const n=H_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator,t);return a.value=(null==n?void 0:n.nodeType)===Node.ELEMENT_NODE?n:void 0,a.value}v(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=o(t);e&&s(e)}e&&g(()=>i())},{immediate:!0}),v(()=>e.activatorProps,()=>{i()}),N(()=>{s()})}(e,i,{activatorEl:s,activatorEvents:k})})):M&&M.stop()},{flush:"post",immediate:!0}),N(()=>{null==M||M.stop()}),{activatorEl:s,activatorRef:A,target:P,targetEl:R,targetRef:D,activatorEvents:k,contentEvents:E,scrimEvents:x}}function H_(e,t){var n,a;if(!e)return;let r;if("parent"===e){let e=null==(a=null==(n=null==t?void 0:t.proxy)?void 0:n.$el)?void 0:a.parentNode;for(;null==e?void 0:e.hasAttribute("data-no-activator");)e=e.parentNode;r=e}else r="string"==typeof e?document.querySelector(e):"$el"in e?e.$el:e;return r}const K_=ae({eager:Boolean},"lazy");function G_(e,t){const a=n(!1),r=b(()=>a.value||e.eager||t.value);return v(t,()=>a.value=!0),{isBooted:a,hasContent:r,onAfterLeave:function(){e.eager||(a.value=!1)}}}function W_(){const e=Se("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const Q_=Symbol.for("vuetify:stack"),Y_=S([]);function X_(){return!0}function J_(e,t,n){if(!e||!1===Z_(e,n))return!1;const a=ft(t);if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=("object"==typeof n.value&&n.value.include||(()=>[]))();return r.push(t),!r.some(t=>null==t?void 0:t.contains(e.target))}function Z_(e,t){return("object"==typeof t.value&&t.value.closeConditional||X_)(e)}function eI(e,t){const n=ft(e);t(document),"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const tI={mounted(e,t){const n=n=>function(e,t,n){const a="function"==typeof n.value?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&J_(e,t,n)&&setTimeout(()=>{Z_(e,n)&&a&&a(e)},0)}(n,e,t),a=n=>{e._clickOutside.lastMousedownWasOutside=J_(n,e,t)};eI(e,e=>{e.addEventListener("click",n,!0),e.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(eI(e,n=>{var a;if(!n||!(null==(a=e._clickOutside)?void 0:a[t.instance.$.uid]))return;const{onClick:r,onMousedown:i}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete e._clickOutside[t.instance.$.uid])}};function nI(e){const{modelValue:t,color:n,...a}=e;return r(d,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&l("div",h({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const aI=ae({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...z_(),...ye(),...cb(),...K_(),...N_(),...F_(),...ge(),...mb()},"VOverlay"),rI=ne()({name:"VOverlay",directives:{vClickOutside:tI},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...aI()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,a){let{slots:i,attrs:s,emit:u}=a;const c=Se("VOverlay"),d=f(),p=f(),m=f(),k=ke(e,"modelValue"),E=o({get:()=>k.value,set:t=>{t&&e.disabled||(k.value=t)}}),{themeClasses:A}=Ce(e),{rtlClasses:D,isRtl:P}=Ve(),{hasContent:R,onAfterLeave:B}=G_(e,E),U=ab(()=>"string"==typeof e.scrim?e.scrim:null),{globalTop:$,localTop:j,stackStyles:z}=function(e,a,r){const i=Se("useStack"),s=!r,o=T(Q_,void 0),l=S({activeChildren:new Set});x(Q_,l);const u=n(Number(t(a)));Ye(e,()=>{var e;const n=null==(e=Y_.at(-1))?void 0:e[1];u.value=n?n+10:Number(t(a)),s&&Y_.push([i.uid,u.value]),null==o||o.activeChildren.add(i.uid),N(()=>{if(s){const e=M(Y_).findIndex(e=>e[0]===i.uid);Y_.splice(e,1)}null==o||o.activeChildren.delete(i.uid)})});const c=n(!0);s&&V(()=>{var e;const t=(null==(e=Y_.at(-1))?void 0:e[0])===i.uid;setTimeout(()=>c.value=t)});const d=b(()=>!l.activeChildren.size);return{globalTop:O(c),localTop:d,stackStyles:b(()=>({zIndex:u.value}))}}(E,()=>e.zIndex,e._disableGlobalStack),{activatorEl:q,activatorRef:H,target:K,targetEl:G,targetRef:W,activatorEvents:Q,contentEvents:Y,scrimEvents:X}=q_(e,{isActive:E,isTop:j,contentEl:m}),{teleportTarget:J}=function(e){return{teleportTarget:o(()=>{const t=e();if(!0===t||!Pe)return;const n=!1===t?document.body:"string"==typeof t?document.querySelector(t):t;if(null==n)return;let a=[...n.children].find(e=>e.matches(".v-overlay-container"));return a||(a=document.createElement("div"),a.className="v-overlay-container",n.appendChild(a)),a})}}(()=>{var t,n,a;const r=e.attach||e.contained;if(r)return r;const i=(null==(t=null==q?void 0:q.value)?void 0:t.getRootNode())||(null==(a=null==(n=c.proxy)?void 0:n.$el)?void 0:a.getRootNode());return i instanceof ShadowRoot&&i}),{dimensionStyles:Z}=db(e),ee=function(){if(!Pe)return n(!1);const{ssr:e}=pt();if(e){const e=n(!1);return C(()=>{e.value=!0}),e}return n(!0)}(),{scopeId:te}=W_();v(()=>e.disabled,e=>{e&&(E.value=!1)});const{contentStyles:ne,updateLocation:ae}=function(e,t){const n=f({}),a=f();function r(e){var t;null==(t=a.value)||t.call(a,e)}function i(e){var t;null==(t=a.value)||t.call(a,e)}function s(e){var t;null==(t=a.value)||t.call(a,e)}return Pe&&Ye(()=>!(!t.isActive.value||!e.locationStrategy),o=>{var l,u;v(()=>e.locationStrategy,o),N(()=>{window.removeEventListener("resize",r),null==visualViewport||visualViewport.removeEventListener("resize",i),null==visualViewport||visualViewport.removeEventListener("scroll",s),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),null==visualViewport||visualViewport.addEventListener("resize",i,{passive:!0}),null==visualViewport||visualViewport.addEventListener("scroll",s,{passive:!0}),"function"==typeof e.locationStrategy?a.value=null==(l=e.locationStrategy(t,e,n))?void 0:l.updateLocation:a.value=null==(u=A_[e.locationStrategy](t,e,n))?void 0:u.updateLocation}),{contentStyles:n,updateLocation:a}}(e,{isRtl:P,contentEl:m,target:K,isActive:E});function re(t){u("click:outside",t),e.persistent?pe():E.value=!1}function ie(t){return E.value&&$.value&&(!e.scrim||t.target===p.value||t instanceof MouseEvent&&t.shadowTarget===p.value)}function se(t){var n,a,r;"Escape"===t.key&&$.value&&((null==(n=m.value)?void 0:n.contains(document.activeElement))||u("keydown",t),e.persistent?pe():(E.value=!1,(null==(a=m.value)?void 0:a.contains(document.activeElement))&&(null==(r=q.value)||r.focus())))}function oe(e){("Escape"!==e.key||$.value)&&u("keydown",e)}!function(e,t){if(!Pe)return;let n;V(async()=>{null==n||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=L(),await new Promise(e=>setTimeout(e)),n.active&&n.run(()=>{var a;"function"==typeof e.scrollStrategy?e.scrollStrategy(t,e,n):null==(a=L_[e.scrollStrategy])||a.call(L_,t,e,n)}))}),N(()=>{null==n||n.stop()})}(e,{root:d,contentEl:m,targetEl:G,target:K,isActive:E,updateLocation:ae}),Pe&&v(E,e=>{e?window.addEventListener("keydown",se):window.removeEventListener("keydown",se)},{immediate:!0}),y(()=>{Pe&&window.removeEventListener("keydown",se)});const le=null==(ce=null==(ue=Se("useRouter"))?void 0:ue.proxy)?void 0:ce.$router;var ue,ce;Ye(()=>e.closeOnBack,()=>{!function(e,t){let n,a,r=!1;function i(e){var t;(null==(t=e.state)?void 0:t.replaced)||(r=!0,setTimeout(()=>r=!1))}Pe&&(null==e?void 0:e.beforeEach)&&(g(()=>{window.addEventListener("popstate",i),n=e.beforeEach((e,n,a)=>{ow?r?t(a):a():setTimeout(()=>r?t(a):a()),ow=!0}),a=null==e?void 0:e.afterEach(()=>{ow=!1})}),N(()=>{window.removeEventListener("popstate",i),null==n||n(),null==a||a()}))}(le,t=>{$.value&&E.value?(t(!1),e.persistent?pe():E.value=!1):t()})});const de=f();function pe(){e.noClickAnimation||m.value&&Me(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Le})}function fe(){u("afterEnter")}function me(){B(),u("afterLeave")}return v(()=>E.value&&(e.absolute||e.contained)&&null==J.value,e=>{if(e){const e=vt(d.value);e&&e!==document.scrollingElement&&(de.value=e.scrollTop)}}),ve(()=>{var t;return l(_,null,[null==(t=i.activator)?void 0:t.call(i,{isActive:E.value,targetRef:W,props:h({ref:H},Q.value,e.activatorProps)}),ee.value&&R.value&&r(F,{disabled:!J.value,to:J.value},{default:()=>[l("div",h({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":E.value,"v-overlay--contained":e.contained},A.value,D.value,e.class],style:[z.value,{"--v-overlay-opacity":e.opacity,top:he(de.value)},e.style],ref:d,onKeydown:oe},te,s),[r(nI,h({color:U,modelValue:E.value&&!!e.scrim,ref:p},X.value),null),r(gb,{appear:!0,persisted:!0,transition:e.transition,target:K.value,onAfterEnter:fe,onAfterLeave:me},{default:()=>{var t;return[w(l("div",h({ref:m,class:["v-overlay__content",e.contentClass],style:[Z.value,ne.value]},Y.value,e.contentProps),[null==(t=i.default)?void 0:t.call(i,{isActive:E})]),[[I,E.value],[tI,{handler:re,closeConditional:ie,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:p,target:K,animateClick:pe,contentEl:m,globalTop:$,localTop:j,updateLocation:ae}}}),iI=Symbol("Forwarded refs");function sI(e,t){let n=e;for(;n;){const e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Object.getPrototypeOf(n)}}function oI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[iI]=n,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const a of n)if(a.value&&Reflect.has(a.value,t)){const e=Reflect.get(a.value,t);return"function"==typeof e?e.bind(a.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,t))return!0;return!1},set(e,t,a){if(Reflect.has(e,t))return Reflect.set(e,t,a);if("symbol"==typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,t))return Reflect.set(r.value,t,a);return!1},getOwnPropertyDescriptor(e,t){var a;const r=Reflect.getOwnPropertyDescriptor(e,t);if(r)return r;if("symbol"!=typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of n){if(!e.value)continue;const n=sI(e.value,t)??("_"in e.value?sI(null==(a=e.value._)?void 0:a.setupState,t):void 0);if(n)return n}for(const e of n){const n=e.value&&e.value[iI];if(!n)continue;const a=n.slice();for(;a.length;){const e=a.shift(),n=sI(e.value,t);if(n)return n;const r=e.value&&e.value[iI];r&&a.push(...r)}}}}})}const lI=ae({id:String,submenu:Boolean,disableInitialFocus:Boolean,...We(aI({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Mw}}),["absolute"])},"VMenu"),uI=ne()({name:"VMenu",props:lI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=ke(e,"modelValue"),{scopeId:s}=W_(),{isRtl:l}=Ve(),u=E(),c=b(()=>e.id||`v-menu-${u}`),d=f(),p=T($_,null),m=n(new Set);async function w(e){var t,n,a;const r=e.relatedTarget,s=e.target;if(await g(),i.value&&r!==s&&(null==(t=d.value)?void 0:t.contentEl)&&(null==(n=d.value)?void 0:n.globalTop)&&![document,d.value.contentEl].includes(s)&&!d.value.contentEl.contains(s)){null==(a=mt(d.value.contentEl)[0])||a.focus()}}function _(e){null==p||p.closeParents(e)}function I(t){var n,a,r,s,o;if(!e.disabled)if("Tab"===t.key||"Enter"===t.key&&!e.closeOnContentClick){if("Enter"===t.key&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;"Enter"===t.key&&t.preventDefault();gt(mt(null==(n=d.value)?void 0:n.contentEl,!1),t.shiftKey?"prev":"next",e=>e.tabIndex>=0)||(i.value=!1,null==(r=null==(a=d.value)?void 0:a.activatorEl)||r.focus())}else e.submenu&&t.key===(l.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,null==(o=null==(s=d.value)?void 0:s.activatorEl)||o.focus())}function S(t){var n;if(e.disabled)return;const a=null==(n=d.value)?void 0:n.contentEl;a&&i.value?"ArrowDown"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(a,"next")):"ArrowUp"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),Qe(a,"prev")):e.submenu&&(t.key===(l.value?"ArrowRight":"ArrowLeft")?i.value=!1:t.key===(l.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),Qe(a,"first"))):(e.submenu?t.key===(l.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(i.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>S(t))))}x($_,{register(){m.value.add(u)},unregister(){m.value.delete(u)},closeParents(t){setTimeout(()=>{var n;m.value.size||e.persistent||null!=t&&(!(null==(n=d.value)?void 0:n.contentEl)||yt(t,d.value.contentEl))||(i.value=!1,null==p||p.closeParents())},40)}}),y(()=>{null==p||p.unregister(),document.removeEventListener("focusin",w)}),B(()=>i.value=!1),v(i,t=>{t?(null==p||p.register(),Pe&&!e.disableInitialFocus&&document.addEventListener("focusin",w,{once:!0})):(null==p||p.unregister(),Pe&&document.removeEventListener("focusin",w))},{immediate:!0});const C=o(()=>h({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":c.value,onKeydown:S},e.activatorProps));return ve(()=>{const t=rI.filterProps(e);return r(rI,h({ref:d,id:c.value,class:["v-menu",e.class],style:e.style},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,absolute:!0,activatorProps:C.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":_,onKeydown:I},s),{activator:a.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(eb,{root:"VMenu"},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a,...t)]}})}})}),oI({id:c,"ΨopenChildren":m},d)}}),cI={key:0},dI={key:1,class:"text-body-2 font-weight-medium"},hI={key:1},pI=Jy({__name:"AuthStatus",props:{user:{type:Object,default:null}},emits:["login","logout"],setup(e,{emit:t}){const n=t,a=()=>{n("login")},i=()=>{n("logout")};return(t,n)=>($(),U("div",null,[e.user?($(),U("div",cI,[r(uI,{location:"bottom"},{activator:j(({props:t})=>[r(Ew,h({icon:""},t,{variant:"text",class:"minimal-user-button"}),{default:j(()=>[r(Db,{color:"primary",size:"32",class:"minimal-avatar"},{default:j(()=>{var t;return[e.user.photoURL?($(),q(_b,{key:0,src:e.user.photoURL,alt:e.user.displayName},null,8,["src","alt"])):($(),U("span",dI,P(null==(t=e.user.displayName)?void 0:t.charAt(0)),1))]}),_:1})]),_:2},1040)]),default:j(()=>[r(E_,{class:"minimal-menu"},{default:j(()=>[r(h_,{title:e.user.displayName,subtitle:e.user.email,class:"minimal-menu-item"},null,8,["title","subtitle"]),r(Tw,{class:"minimal-divider"}),r(h_,{onClick:i,"prepend-icon":"mdi-logout",class:"minimal-menu-item"},{default:j(()=>[r(c_,{class:"text-body-2"},{default:j(()=>n[0]||(n[0]=[z("ログアウト",-1)])),_:1,__:[0]})]),_:1})]),_:1})]),_:1})])):($(),U("div",hI,[r(Ew,{onClick:a,"prepend-icon":"mdi-google",variant:"outlined",color:"primary",class:"minimal-login-button"},{default:j(()=>n[1]||(n[1]=[z(" Googleでログイン ",-1)])),_:1,__:[1]})]))]))}},[["__scopeId","data-v-91d386da"]]),fI=ae({text:String,onClick:qe(),...ye(),...ge()},"VLabel"),vI=ne()({name:"VLabel",props:fI(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;return l("label",{class:s(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:i(e.style),onClick:e.onClick},[e.text,null==(t=n.default)?void 0:t.call(n)])}),{}}}),mI=Symbol.for("vuetify:selection-control-group"),gI=ae({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:be,trueIcon:be,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ee},...ye(),...kb(),...ge()},"SelectionControlGroup"),yI=ae({...gI({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");ne()({name:"VSelectionControlGroup",props:yI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"modelValue"),r=E(),o=b(()=>e.id||`v-selection-control-group-${r}`),u=b(()=>e.name||o.value),c=new Set;return x(mI,{modelValue:a,forceUpdate:()=>{c.forEach(e=>e())},onForceUpdate:e=>{c.add(e),N(()=>{c.delete(e)})}}),re({[e.defaultsTarget]:{color:b(()=>e.color),disabled:b(()=>e.disabled),density:b(()=>e.density),error:b(()=>e.error),inline:b(()=>e.inline),modelValue:a,multiple:b(()=>!!e.multiple||null==e.multiple&&Array.isArray(a.value)),name:u,falseIcon:b(()=>e.falseIcon),trueIcon:b(()=>e.trueIcon),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),type:b(()=>e.type),valueComparator:b(()=>e.valueComparator)}}),ve(()=>{var t;return l("div",{class:s(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:i(e.style),role:"radio"===e.type?"radiogroup":void 0},[null==(t=n.default)?void 0:t.call(n)])}),{}}});const bI=ae({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ye(),...gI()},"VSelectionControl");const wI=ne()({name:"VSelectionControl",directives:{vRipple:Cw},inheritAttrs:!1,props:bI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:a,slots:u}=t;const{group:c,densityClasses:d,icon:p,model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,trueValue:C}=function(e){const t=T(mI,void 0),{densityClasses:n}=Eb(e),a=ke(e,"modelValue"),r=o(()=>void 0!==e.trueValue?e.trueValue:void 0===e.value||e.value),i=o(()=>void 0!==e.falseValue&&e.falseValue),s=o(()=>!!e.multiple||null==e.multiple&&Array.isArray(a.value)),l=o({get(){const n=t?t.modelValue.value:a.value;return s.value?xe(n).some(t=>e.valueComparator(t,r.value)):e.valueComparator(n,r.value)},set(n){if(e.readonly)return;const o=n?r.value:i.value;let l=o;s.value&&(l=n?[...xe(a.value),o]:xe(a.value).filter(t=>!e.valueComparator(t,r.value))),t?t.modelValue.value=l:a.value=l}}),{textColorClasses:u,textColorStyles:c}=nb(()=>{if(!e.error&&!e.disabled)return l.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:h}=ab(()=>!l.value||e.error||e.disabled?e.baseColor:e.color),p=o(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:i,model:l,textColorClasses:u,textColorStyles:c,backgroundColorClasses:d,backgroundColorStyles:h,icon:p}}(e),k=E(),x=n(!1),A=n(!1),N=f(),V=b(()=>e.id||`input-${k}`),D=b(()=>!e.disabled&&!e.readonly);function P(e){D.value&&(x.value=!0,!1!==ct(e.target,":focus-visible")&&(A.value=!0))}function R(){x.value=!1,A.value=!1}function M(e){e.stopPropagation()}function O(t){D.value?(e.readonly&&c&&g(()=>c.forceUpdate()),v.value=t.target.checked):N.value&&(N.value.checked=v.value)}return null==c||c.onForceUpdate(()=>{N.value&&(N.value.checked=v.value)}),ve(()=>{var t,n;const o=u.label?u.label({label:e.label,props:{for:V.value}}):e.label,[c,f]=bt(a),g=l("input",h({ref:N,checked:v.value,disabled:!!e.disabled,id:V.value,onBlur:R,onFocus:P,onInput:O,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:C.value,name:e.name,"aria-checked":"checkbox"===e.type?v.value:void 0},f),null);return l("div",h({class:["v-selection-control",{"v-selection-control--dirty":v.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":x.value,"v-selection-control--focus-visible":A.value,"v-selection-control--inline":e.inline},d.value,e.class]},c,{style:e.style}),[l("div",{class:s(["v-selection-control__wrapper",m.value]),style:i(y.value)},[null==(t=u.default)?void 0:t.call(u,{backgroundColorClasses:I,backgroundColorStyles:S}),w(l("div",{class:s(["v-selection-control__input"])},[(null==(n=u.input)?void 0:n.call(u,{model:v,textColorClasses:m,textColorStyles:y,backgroundColorClasses:I,backgroundColorStyles:S,inputNode:g,icon:p.value,props:{onFocus:P,onBlur:R,id:V.value}}))??l(_,null,[p.value&&r(ub,{key:"icon",icon:p.value},null),g])]),[[Cw,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),o&&r(vI,{for:V.value,onClick:M},{default:()=>[o]})])}),{isFocused:x,input:N}}}),_I=ae({indeterminate:Boolean,indeterminateIcon:{type:be,default:"$checkboxIndeterminate"},...bI({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),II=ne()({name:"VCheckboxBtn",props:_I(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"indeterminate"),i=ke(e,"modelValue");function s(e){a.value&&(a.value=!1)}const o=b(()=>a.value?e.indeterminateIcon:e.falseIcon),l=b(()=>a.value?e.indeterminateIcon:e.trueIcon);return ve(()=>{const t=We(wI.filterProps(e),["modelValue"]);return r(wI,h(t,{modelValue:i.value,"onUpdate:modelValue":[e=>i.value=e,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function SI(e){const{t:t}=wt();return{InputIcon:function(n){let{name:a,color:i,...s}=n;const o={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[a],l=e[`onClick:${a}`],u=l&&o?t(`$vuetify.input.${o}`,e.label??""):void 0;return r(ub,h({icon:e[`${a}Icon`],"aria-label":u,onClick:l,onKeydown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),_t(l,new PointerEvent("click",e)))},color:i},s),null)}}}const CI=ae({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ye(),...mb({transition:{component:Bw,leaveAbsolute:!0,group:!0}})},"VMessages"),kI=ne()({name:"VMessages",props:CI(),setup(e,t){let{slots:n}=t;const a=o(()=>xe(e.messages)),{textColorClasses:u,textColorStyles:c}=nb(()=>e.color);return ve(()=>r(gb,{transition:e.transition,tag:"div",class:s(["v-messages",u.value,e.class]),style:i([c.value,e.style])},{default:()=>[e.active&&a.value.map((e,t)=>l("div",{class:"v-messages__message",key:`${t}-${a.value}`},[n.message?n.message({message:e}):e]))]})),{}}}),EI=ae({focused:Boolean,"onUpdate:focused":qe()},"focus");function xI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce();const n=ke(e,"focused");return{focusClasses:b(()=>({[`${t}--focused`]:n.value})),isFocused:n,focus:function(){n.value=!0},blur:function(){n.value=!1}}}const TI=Symbol.for("vuetify:form"),AI=ae({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function NI(e){const t=T(TI,null);return{...t,isReadonly:o(()=>!!((null==e?void 0:e.readonly)??(null==t?void 0:t.isReadonly.value))),isDisabled:o(()=>!!((null==e?void 0:e.disabled)??(null==t?void 0:t.isDisabled.value)))}}const VI=Symbol.for("vuetify:rules");const DI=ae({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...EI()},"validation");function PI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E();const r=ke(e,"modelValue"),i=o(()=>void 0===e.validationValue?r.value:e.validationValue),s=NI(e),l=function(e){const t=T(VI,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return(null==t?void 0:t.resolve(e))??b(e)}(()=>e.rules),u=f([]),c=n(!0),d=o(()=>!(!xe(""===r.value?null:r.value).length&&!xe(""===i.value?null:i.value).length)),h=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)?xe(e.errorMessages).concat(u.value).slice(0,Math.max(0,Number(e.maxErrors))):u.value}),p=o(()=>{var t;let n=(e.validateOn??(null==(t=s.validateOn)?void 0:t.value))||"input";"lazy"===n&&(n="input lazy"),"eager"===n&&(n="input eager");const a=new Set((null==n?void 0:n.split(" "))??[]);return{input:a.has("input"),blur:a.has("blur")||a.has("input")||a.has("invalid-input"),invalidInput:a.has("invalid-input"),lazy:a.has("lazy"),eager:a.has("eager")}}),w=o(()=>{var t;return!e.error&&!(null==(t=e.errorMessages)?void 0:t.length)&&(!e.rules.length||(c.value?!u.value.length&&!p.value.lazy||null:!u.value.length))}),_=n(!1),I=o(()=>({[`${t}--error`]:!1===w.value,[`${t}--dirty`]:d.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),S=Se("validation"),k=o(()=>e.name??A(a));async function x(){r.value=null,await g(),await N()}async function N(){c.value=!0,p.value.lazy?u.value=[]:await V(!p.value.eager)}async function V(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=[];_.value=!0;for(const a of l.value){if(n.length>=Number(e.maxErrors??1))break;const t="function"==typeof a?a:()=>a,r=await t(i.value);!0!==r&&(!1!==r&&"string"!=typeof r||n.push(r||""))}return u.value=n,_.value=!1,c.value=t,u.value}return m(()=>{var e;null==(e=s.register)||e.call(s,{id:k.value,vm:S,validate:V,reset:x,resetValidation:N})}),y(()=>{var e;null==(e=s.unregister)||e.call(s,k.value)}),C(async()=>{var e;p.value.lazy||await V(!p.value.eager),null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),Ye(()=>p.value.input||p.value.invalidInput&&!1===w.value,()=>{v(i,()=>{if(null!=i.value)V();else if(e.focused){const t=v(()=>e.focused,e=>{e||V(),t()})}})}),Ye(()=>p.value.blur,()=>{v(()=>e.focused,e=>{e||V()})}),v([w,h],()=>{var e;null==(e=s.update)||e.call(s,k.value,w.value,h.value)}),{errorMessages:h,isDirty:d,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:w,isValidating:_,reset:x,resetValidation:N,validate:V,validationClasses:I}}const RI=ae({id:String,appendIcon:be,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:be,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":qe(),"onClick:append":qe(),...ye(),...kb(),...Ke(cb(),["maxWidth","minWidth","width"]),...ge(),...DI()},"VInput"),MI=ne()({name:"VInput",props:{...RI()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:u}=t;const{densityClasses:c}=Eb(e),{dimensionStyles:d}=db(e),{themeClasses:h}=Ce(e),{rtlClasses:p}=Ve(),{InputIcon:f}=SI(e),v=E(),m=o(()=>e.id||`input-${v}`),{errorMessages:g,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,reset:k,resetValidation:x,validate:T,validationClasses:A}=PI(e,"v-input",m),N=o(()=>{var t;return(null==(t=e.errorMessages)?void 0:t.length)||!I.value&&g.value.length?g.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),V=b(()=>N.value.length>0),D=b(()=>!e.hideDetails||"auto"===e.hideDetails&&(V.value||!!a.details)),P=o(()=>D.value?`${m.value}-messages`:void 0),R=o(()=>({id:m,messagesId:P,isDirty:y,isDisabled:w,isReadonly:_,isPristine:I,isValid:S,isValidating:C,hasDetails:D,reset:k,resetValidation:x,validate:T})),M=b(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),O=b(()=>{if(e.iconColor)return!0===e.iconColor?M.value:e.iconColor});return ve(()=>{var t,n,o,u;const v=!(!a.prepend&&!e.prependIcon),m=!(!a.append&&!e.appendIcon);return l("div",{class:s(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},c.value,h.value,p.value,A.value,e.class]),style:i([d.value,e.style])},[v&&l("div",{key:"prepend",class:"v-input__prepend"},[null==(t=a.prepend)?void 0:t.call(a,R.value),e.prependIcon&&r(f,{key:"prepend-icon",name:"prepend",color:O.value},null)]),a.default&&l("div",{class:"v-input__control"},[null==(n=a.default)?void 0:n.call(a,R.value)]),m&&l("div",{key:"append",class:"v-input__append"},[e.appendIcon&&r(f,{key:"append-icon",name:"append",color:O.value},null),null==(o=a.append)?void 0:o.call(a,R.value)]),D.value&&l("div",{id:P.value,class:"v-input__details",role:"alert","aria-live":"polite"},[r(kI,{active:V.value,messages:N.value},{message:a.message}),null==(u=a.details)?void 0:u.call(a,R.value)])])}),{reset:k,resetValidation:x,validate:T,isValid:S,errorMessages:g}}}),OI=ae({...RI(),...We(_I(),["inline"])},"VCheckbox"),LI=ne()({name:"VCheckbox",inheritAttrs:!1,props:OI(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const i=ke(e,"modelValue"),{isFocused:s,focus:o,blur:l}=xI(e),u=f(),c=E();return ve(()=>{const[t,d]=bt(n),p=MI.filterProps(e),f=II.filterProps(e);return r(MI,h({ref:u,class:["v-checkbox",e.class]},t,p,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,id:e.id||`checkbox-${c}`,focused:s.value,style:e.style}),{...a,default:e=>{let{id:t,messagesId:n,isDisabled:s,isReadonly:u,isValid:c}=e;return r(II,h(f,{id:t.value,"aria-describedby":n.value,disabled:s.value,readonly:u.value},d,{error:!1===c.value,modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,onFocus:o,onBlur:l}),a)}})}),oI({},u)}});function FI(e,t){return(null==t?void 0:t[e?"scrollWidth":"scrollHeight"])||0}function BI(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:i}=n;return e?t?i-r+a:a:n.scrollTop}function UI(e,t){return(null==t?void 0:t[e?"offsetWidth":"offsetHeight"])||0}function $I(e,t){return(null==t?void 0:t[e?"offsetLeft":"offsetTop"])||0}const jI=Symbol.for("vuetify:v-slide-group"),zI=ae({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:jI},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["always","desktop","mobile"].includes(e)},...ye(),...St({mobile:null}),...ob(),...Lb({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),qI=ne()({name:"VSlideGroup",props:zI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{isRtl:u}=Ve(),{displayClasses:c,mobile:d}=pt(e),h=Ub(e,e.symbol),p=n(!1),f=n(0),m=n(0),g=n(0),y=o(()=>"horizontal"===e.direction),{resizeRef:b,contentRect:w}=Ae(),{resizeRef:_,contentRect:I}=Ae(),S=It(),C=o(()=>({container:b.el,duration:200,easing:"easeOutQuart"})),k=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[0]):-1),E=o(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[h.selected.value.length-1]):-1);if(Pe){let t=-1;v(()=>[h.selected.value,w.value,I.value,y.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(w.value&&I.value){const e=y.value?"width":"height";m.value=w.value[e],g.value=I.value[e],p.value=m.value+1<g.value}if(k.value>=0&&_.el){T(_.el.children[E.value],e.centerActive)}})})}const x=n(!1);function T(e,t){let n=0;n=t?function(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=UI(a,n);return $I(a,t)-r/2+UI(a,t)/2}({containerElement:b.el,isHorizontal:y.value,selectedElement:e}):function(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const i=UI(r,n),s=BI(r,a,n),o=UI(r,t),l=$I(r,t),u=.4*o;return s>l?l-u:s+i<l+o?l-i+o+u:s}({containerElement:b.el,isHorizontal:y.value,isRtl:u.value,selectedElement:e}),A(n)}function A(e){if(!Pe||!b.el)return;const t=UI(y.value,b.el),n=BI(y.value,u.value,b.el);if(!(FI(y.value,b.el)<=t||Math.abs(e-n)<16)){if(y.value&&u.value&&b.el){const{scrollWidth:t,offsetWidth:n}=b.el;e=t-n-e}y.value?S.horizontal(e,C.value):S(e,C.value)}}function N(e){const{scrollTop:t,scrollLeft:n}=e.target;f.value=y.value?n:t}function V(e){if(x.value=!0,p.value&&_.el)for(const t of e.composedPath())for(const e of _.el.children)if(e===t)return void T(e)}function D(e){x.value=!1}let P=!1;function R(e){var t;P||x.value||e.relatedTarget&&(null==(t=_.el)?void 0:t.contains(e.relatedTarget))||F(),P=!1}function M(){P=!0}function O(e){function t(t){e.preventDefault(),F(t)}_.el&&(y.value?"ArrowRight"===e.key?t(u.value?"prev":"next"):"ArrowLeft"===e.key&&t(u.value?"next":"prev"):"ArrowDown"===e.key?t("next"):"ArrowUp"===e.key&&t("prev"),"Home"===e.key?t("first"):"End"===e.key&&t("last"))}function L(e,t){if(!e)return;let n=e;do{n=null==n?void 0:n["next"===t?"nextElementSibling":"previousElementSibling"]}while(null==n?void 0:n.hasAttribute("disabled"));return n}function F(e){if(!_.el)return;let t;if(e)if("next"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("first")}else if("prev"===e){if(t=L(_.el.querySelector(":focus"),e),!t)return F("last")}else"first"===e?(t=_.el.firstElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"next"))):"last"===e&&(t=_.el.lastElementChild,(null==t?void 0:t.hasAttribute("disabled"))&&(t=L(t,"prev")));else{t=mt(_.el)[0]}t&&t.focus({preventScroll:!0})}function B(e){const t=y.value&&u.value?-1:1,n=("prev"===e?-t:t)*m.value;let a=f.value+n;if(y.value&&u.value&&b.el){const{scrollWidth:e,offsetWidth:t}=b.el;a+=e-t}A(a)}const U=o(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),$=o(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return p.value||Math.abs(f.value)>0;case"mobile":return d.value||p.value||Math.abs(f.value)>0;default:return!d.value&&(p.value||Math.abs(f.value)>0)}}),j=o(()=>Math.abs(f.value)>1),z=o(()=>{if(!b.value)return!1;const e=FI(y.value,b.el),t=function(e,t){return(null==t?void 0:t[e?"clientWidth":"clientHeight"])||0}(y.value,b.el);return e-t-Math.abs(f.value)>1});return ve(()=>r(e.tag,{class:s(["v-slide-group",{"v-slide-group--vertical":!y.value,"v-slide-group--has-affixes":$.value,"v-slide-group--is-overflowing":p.value},c.value,e.class]),style:i(e.style),tabindex:x.value||h.selected.value.length?-1:0,onFocus:R},{default:()=>{var t,n,i;return[$.value&&l("div",{key:"prev",class:s(["v-slide-group__prev",{"v-slide-group__prev--disabled":!j.value}]),onMousedown:M,onClick:()=>j.value&&B("prev")},[(null==(t=a.prev)?void 0:t.call(a,U.value))??r(Fw,null,{default:()=>[r(ub,{icon:u.value?e.nextIcon:e.prevIcon},null)]})]),l("div",{key:"container",ref:b,class:s(["v-slide-group__container",e.contentClass]),onScroll:N},[l("div",{ref:_,class:"v-slide-group__content",onFocusin:V,onFocusout:D,onKeydown:O},[null==(n=a.default)?void 0:n.call(a,U.value)])]),$.value&&l("div",{key:"next",class:s(["v-slide-group__next",{"v-slide-group__next--disabled":!z.value}]),onMousedown:M,onClick:()=>z.value&&B("next")},[(null==(i=a.next)?void 0:i.call(a,U.value))??r(Fw,null,{default:()=>[r(ub,{icon:u.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:B,scrollOffset:f,focus:F,hasPrev:j,hasNext:z}}}),HI=Symbol.for("vuetify:v-chip-group"),KI=ae({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ee},...zI(),...ye(),...Lb({selectedClass:"v-chip--selected"}),...ob(),...ge(),...Ab({variant:"tonal"})},"VChipGroup");ne()({name:"VChipGroup",props:KI(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ce(e),{isSelected:i,select:s,next:o,prev:l,selected:u}=Ub(e,HI);return re({VChip:{baseColor:b(()=>e.baseColor),color:b(()=>e.color),disabled:b(()=>e.disabled),filter:b(()=>e.filter),variant:b(()=>e.variant)}}),ve(()=>{const t=qI.filterProps(e);return r(qI,h(t,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{isSelected:i,select:s,next:o,prev:l,selected:u.value})]}})}),{}}});const GI=ae({activeClass:String,appendAvatar:String,appendIcon:be,baseColor:String,closable:Boolean,closeIcon:{type:be,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:be,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:qe(),onClickOnce:qe(),...Ib(),...ye(),...kb(),...Pb(),...Fb(),...fb(),...sw(),...ib(),...ob({tag:"span"}),...ge(),...Ab({variant:"tonal"})},"VChip"),WI=ne()({name:"VChip",directives:{vRipple:Cw},props:GI(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:i}=t;const{t:s}=wt(),{borderClasses:u}=Sb(e),{densityClasses:c}=Eb(e),{elevationClasses:d}=Rb(e),{roundedClasses:p}=vb(e),{sizeClasses:f}=sb(e),{themeClasses:v}=Ce(e),m=ke(e,"modelValue"),g=Bb(e,HI,!1),y=iw(e,n),S=b(()=>!1!==e.link&&y.isLink.value),C=o(()=>!e.disabled&&!1!==e.link&&(!!g||e.link||y.isClickable.value)),k=b(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(e){e.preventDefault(),e.stopPropagation(),m.value=!1,a("click:close",e)}})),{colorClasses:E,colorStyles:x,variantClasses:T}=Nb(()=>({color:!g||g.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function A(e){var t;a("click",e),C.value&&(null==(t=y.navigate)||t.call(y,e),null==g||g.toggle())}function N(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),A(e))}return()=>{var t;const n=y.isLink.value?"a":e.tag,a=!(!e.appendIcon&&!e.appendAvatar),s=!(!a&&!i.append),o=!(!i.close&&!e.closable),b=!(!i.filter&&!e.filter)&&g,V=!(!e.prependIcon&&!e.prependAvatar),D=!(!V&&!i.prepend);return m.value&&w(r(n,h({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":C.value,"v-chip--filter":b,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&(null==(t=y.isActive)?void 0:t.value)},v.value,u.value,E.value,c.value,d.value,p.value,f.value,T.value,null==g?void 0:g.selectedClass.value,e.class],style:[x.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:C.value?0:void 0,onClick:A,onKeydown:C.value&&!S.value&&N},y.linkProps),{default:()=>{var t;return[Tb(C.value,"v-chip"),b&&r($w,{key:"filter"},{default:()=>[w(l("div",{class:"v-chip__filter"},[i.filter?r(eb,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},i.filter):r(ub,{key:"filter-icon",icon:e.filterIcon},null)]),[[I,g.isSelected.value]])]}),D&&l("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?r(eb,{key:"prepend-defaults",disabled:!V,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},i.prepend):l(_,null,[e.prependIcon&&r(ub,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&r(Db,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),l("div",{class:"v-chip__content","data-no-activator":""},[(null==(t=i.default)?void 0:t.call(i,{isSelected:null==g?void 0:g.isSelected.value,selectedClass:null==g?void 0:g.selectedClass.value,select:null==g?void 0:g.select,toggle:null==g?void 0:g.toggle,value:null==g?void 0:g.value.value,disabled:e.disabled}))??P(e.text)]),s&&l("div",{key:"append",class:"v-chip__append"},[i.append?r(eb,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},i.append):l(_,null,[e.appendIcon&&r(ub,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&r(Db,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),o&&l("button",h({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},k.value),[i.close?r(eb,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},i.close):r(ub,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Cw,C.value&&e.ripple,null]])}}}),QI=ae({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ye(),...mb({transition:{component:Bw}})},"VCounter"),YI=ne()({name:"VCounter",functional:!0,props:QI(),setup(e,t){let{slots:n}=t;const a=b(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ve(()=>r(gb,{transition:e.transition},{default:()=>[w(l("div",{class:s(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:i(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[I,e.active]])]})),{}}}),XI=ae({floating:Boolean,...ye()},"VFieldLabel"),JI=ne()({name:"VFieldLabel",props:XI(),setup(e,t){let{slots:n}=t;return ve(()=>r(vI,{class:s(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:i(e.style)},n)),{}}}),ZI=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],eS=ae({appendInnerIcon:be,bgColor:String,clearable:Boolean,clearIcon:{type:be,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:be,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ZI.includes(e)},"onClick:clear":qe(),"onClick:appendInner":qe(),"onClick:prependInner":qe(),...ye(),...Zb(),...fb(),...ge()},"VField"),tS=ne()({name:"VField",inheritAttrs:!1,props:{id:String,...EI(),...eS()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:u}=t;const{themeClasses:c}=Ce(e),{loaderClasses:d}=ew(e),{focusClasses:p,isFocused:m,focus:g,blur:y}=xI(e),{InputIcon:S}=SI(e),{roundedClasses:C}=vb(e),{rtlClasses:k}=Ve(),x=b(()=>e.dirty||e.active),T=b(()=>!(!e.label&&!u.label)),A=b(()=>!e.singleLine&&T.value),N=E(),V=o(()=>e.id||`input-${N}`),D=b(()=>e.details?`${V.value}-messages`:void 0),P=f(),R=f(),M=f(),O=o(()=>["plain","underlined"].includes(e.variant)),L=o(()=>e.error||e.disabled?void 0:x.value&&m.value?e.color:e.baseColor),F=o(()=>{if(e.iconColor&&(!e.glow||m.value))return!0===e.iconColor?L.value:e.iconColor}),{backgroundColorClasses:B,backgroundColorStyles:U}=ab(()=>e.bgColor),{textColorClasses:$,textColorStyles:j}=nb(L);v(x,e=>{if(A.value){const t=P.value.$el,n=R.value.$el;requestAnimationFrame(()=>{const a=Ue(t),r=n.getBoundingClientRect(),i=r.x-a.x,s=r.y-a.y-(a.height/2-r.height/2),o=r.width/.75,l=Math.abs(o-a.width)>1?{maxWidth:he(o)}:void 0,u=getComputedStyle(t),c=getComputedStyle(n),d=1e3*parseFloat(u.transitionDuration)||150,h=parseFloat(c.getPropertyValue("--v-field-label-scale")),p=c.getPropertyValue("color");t.style.visibility="visible",n.style.visibility="hidden",Me(t,{transform:`translate(${i}px, ${s}px) scale(${h})`,color:p,...l},{duration:d,easing:Le,direction:e?"normal":"reverse"}).finished.then(()=>{t.style.removeProperty("visibility"),n.style.removeProperty("visibility")})})}},{flush:"post"});const z=o(()=>({isActive:x,isFocused:m,controlRef:M,blur:y,focus:g}));function q(e){e.target!==document.activeElement&&e.preventDefault()}return ve(()=>{var t,a,o;const f="outlined"===e.variant,v=!(!u["prepend-inner"]&&!e.prependInnerIcon),m=!(!e.clearable&&!u.clear||e.disabled),b=!!(u["append-inner"]||e.appendInnerIcon||m),E=()=>u.label?u.label({...z.value,label:e.label,props:{for:V.value}}):e.label;return l("div",h({class:["v-field",{"v-field--active":x.value,"v-field--appended":b,"v-field--center-affix":e.centerAffix??!O.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":v,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!E(),[`v-field--variant-${e.variant}`]:!0},c.value,B.value,p.value,d.value,C.value,k.value,e.class],style:[U.value,e.style],onClick:q},n),[l("div",{class:"v-field__overlay"},null),r(tw,{name:"v-field",active:!!e.loading,color:e.error?"error":"string"==typeof e.loading?e.loading:e.color},{default:u.loader}),v&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&r(S,{key:"prepend-icon",name:"prependInner",color:F.value},null),null==(t=u["prepend-inner"])?void 0:t.call(u,z.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&A.value&&r(JI,{key:"floating-label",ref:R,class:s([$.value]),floating:!0,for:V.value,"aria-hidden":!x.value,style:i(j.value)},{default:()=>[E()]}),T.value&&r(JI,{key:"label",ref:P,for:V.value},{default:()=>[E()]}),(null==(a=u.default)?void 0:a.call(u,{...z.value,props:{id:V.value,class:"v-field__input","aria-describedby":D.value},focus:g,blur:y}))??l("div",{id:V.value,class:"v-field__input","aria-describedby":D.value},null)]),m&&r($w,{key:"clear"},{default:()=>[w(l("div",{class:"v-field__clearable",onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},[r(eb,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[u.clear?u.clear({...z.value,props:{onFocus:g,onBlur:y,onClick:e["onClick:clear"],tabindex:-1}}):r(S,{name:"clear",onFocus:g,onBlur:y,tabindex:-1},null)]})]),[[I,e.dirty]])]}),b&&l("div",{key:"append",class:"v-field__append-inner"},[null==(o=u["append-inner"])?void 0:o.call(u,z.value),e.appendInnerIcon&&r(S,{key:"append-icon",name:"appendInner",color:F.value},null)]),l("div",{class:s(["v-field__outline",$.value]),style:i(j.value)},[f&&l(_,null,[l("div",{class:"v-field__outline__start"},null),A.value&&l("div",{class:"v-field__outline__notch"},[r(JI,{ref:R,floating:!0,for:V.value,"aria-hidden":!x.value},{default:()=>[E()]})]),l("div",{class:"v-field__outline__end"},null)]),O.value&&A.value&&r(JI,{ref:R,floating:!0,for:V.value,"aria-hidden":!x.value},{default:()=>[E()]})])])}),{controlRef:M,fieldIconColor:F}}});const nS=["color","file","time","date","datetime-local","week","month"],aS=ae({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...RI(),...eS()},"VTextField"),rS=ne()({name:"VTextField",directives:{vIntersect:bb},inheritAttrs:!1,props:aS(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:i}=t;const u=ke(e,"modelValue"),{isFocused:c,focus:d,blur:p}=xI(e),{onIntersect:v}=function(e){return{onIntersect:function(t,n){var a,r;e.autofocus&&t&&(null==(r=null==(a=n[0].target)?void 0:a.focus)||r.call(a))}}}(e),m=o(()=>"function"==typeof e.counterValue?e.counterValue(u.value):"number"==typeof e.counterValue?e.counterValue:(u.value??"").toString().length),y=o(()=>n.maxlength?n.maxlength:!e.counter||"number"!=typeof e.counter&&"string"!=typeof e.counter?void 0:e.counter),b=o(()=>["plain","underlined"].includes(e.variant)),I=f(),S=f(),C=f(),k=o(()=>nS.includes(e.type)||e.persistentPlaceholder||c.value||e.active);function E(){c.value||d(),g(()=>{var e;C.value!==document.activeElement&&(null==(e=C.value)||e.focus())})}function x(e){a("mousedown:control",e),e.target!==C.value&&(E(),e.preventDefault())}function T(e){a("click:control",e)}function A(t){var n;const a=t.target;if(u.value=a.value,(null==(n=e.modelModifiers)?void 0:n.trim)&&["text","search","password","tel","url"].includes(e.type)){const e=[a.selectionStart,a.selectionEnd];g(()=>{a.selectionStart=e[0],a.selectionEnd=e[1]})}}return ve(()=>{const t=!!(i.counter||!1!==e.counter&&null!=e.counter),a=!(!t&&!i.details),[o,f]=bt(n),{modelValue:N,...V}=MI.filterProps(e),D=tS.filterProps(e);return r(MI,h({ref:I,modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":b.value},e.class],style:e.style},o,V,{centerAffix:!b.value,focused:c.value}),{...i,default:t=>{let{id:n,isDisabled:a,isDirty:o,isReadonly:m,isValid:y,hasDetails:b,reset:I}=t;return r(tS,h({ref:S,onMousedown:x,onClick:T,"onClick:clear":t=>function(t,n){t.stopPropagation(),E(),g(()=>{u.value=null,n(),_t(e["onClick:clear"],t)})}(t,I),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},D,{id:n.value,active:k.value||o.value,dirty:o.value||e.dirty,disabled:a.value,focused:c.value,details:b.value,error:!1===y.value}),{...i,default:t=>{let{props:{class:n,...r}}=t;const o=w(l("input",h({ref:C,value:u.value,onInput:A,autofocus:e.autofocus,readonly:m.value,disabled:a.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:d,onBlur:p},r,f),null),[[bb,{handler:v},null,{once:!0}]]);return l(_,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?l("div",{class:s(n),"data-no-activator":""},[i.default(),o]):K(o,{class:n}),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:a?n=>{var a;return l(_,null,[null==(a=i.details)?void 0:a.call(i,n),t&&l(_,null,[l("span",null,null),r(YI,{active:e.persistentCounter||c.value,value:m.value,max:y.value,disabled:e.disabled},i.counter)])])}:void 0})}),oI({},I,S,C)}}),iS=ae({renderless:Boolean,...ye()},"VVirtualScrollItem"),sS=ne()({name:"VVirtualScrollItem",inheritAttrs:!1,props:iS(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:i,contentRect:s}=Ae(void 0,"border");v(()=>{var e;return null==(e=s.value)?void 0:e.height},e=>{null!=e&&a("update:height",e)}),ve(()=>{var t,a;return e.renderless?l(_,null,[null==(t=r.default)?void 0:t.call(r,{itemRef:i})]):l("div",h({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},n),[null==(a=r.default)?void 0:a.call(r)])})}}),oS=ae({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function lS(e,t){const a=pt(),r=n(0);V(()=>{r.value=parseFloat(e.itemHeight||0)});const i=n(0),s=n(Math.ceil((parseInt(e.height)||a.height.value)/(r.value||16))||1),l=n(0),u=n(0),c=f(),d=f();let h=0;const{resizeRef:p,contentRect:m}=Ae();V(()=>{p.value=c.value});const y=o(()=>{var t;return c.value===document.documentElement?a.height.value:(null==(t=m.value)?void 0:t.height)||parseInt(e.height)||0}),b=o(()=>!!(c.value&&d.value&&y.value&&r.value));let w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length});const I=n(0);let S=-1;function C(e){return w[e]||r.value}const k=Ct(()=>{const e=performance.now();_[0]=0;const n=t.value.length;for(let t=1;t<=n-1;t++)_[t]=(_[t-1]||0)+C(t-1);I.value=Math.max(I.value,performance.now()-e)},I),E=v(b,e=>{e&&(E(),h=d.value.offsetTop,k.immediate(),L(),~S&&g(()=>{Pe&&window.requestAnimationFrame(()=>{B(S),S=-1})}))});function x(e){e=Ne(e,0,t.value.length-1);const n=Math.floor(e),a=e%1,r=n+1,i=_[n]||0;return i+((_[r]||i)-i)*a}function T(e){return function(e,t){let n=e.length-1,a=0,r=0,i=null,s=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,i=e[r],i>t)n=r-1;else{if(!(i<t))return i===t?r:a;s=r,a=r+1}return s}(_,e)}N(()=>{k.clear()});let A=0,D=0,P=0;v(y,(e,t)=>{t&&(L(),e<t&&requestAnimationFrame(()=>{D=0,L()}))});let R=-1;function M(){c.value&&d.value&&(D=0,P=0,window.clearTimeout(R),L())}let O=-1;function L(){cancelAnimationFrame(O),O=requestAnimationFrame(F)}function F(){if(!c.value||!y.value||!r.value)return;const e=A-h,n=Math.sign(D),a=Math.max(0,e-100),o=Ne(T(a),0,t.value.length),d=e+y.value+100,p=Ne(T(d)+1,o+1,t.value.length);if((-1!==n||o<i.value)&&(1!==n||p>s.value)){const e=x(i.value)-x(o),n=x(p)-x(s.value);Math.max(e,n)>100?(i.value=o,s.value=p):(o<=0&&(i.value=o),p>=t.value.length&&(s.value=p))}l.value=x(i.value),u.value=x(t.value.length)-x(s.value)}function B(e){const t=x(e);!c.value||e&&!t?S=e:c.value.scrollTop=t}const U=o(()=>t.value.slice(i.value,s.value).map((t,n)=>{const a=n+i.value;return{raw:t,index:a,key:Ge(t,e.itemKey,a)}}));return v(t,()=>{w=Array.from({length:t.value.length}),_=Array.from({length:t.value.length}),k.immediate(),L()},{deep:1}),{calculateVisibleItems:L,containerRef:c,markerRef:d,computedItems:U,paddingTop:l,paddingBottom:u,scrollToIndex:B,handleScroll:function(){if(!c.value||!d.value)return;const e=c.value.scrollTop,t=performance.now();t-P>500?(D=Math.sign(e-A),h=d.value.offsetTop):D=e-A,A=e,P=t,window.clearTimeout(R),R=window.setTimeout(M,500),L()},handleScrollend:M,handleItemResize:function(e,t){const n=w[e],a=r.value;r.value=a?Math.min(r.value,t):t,n===t&&a===r.value||(w[e]=t,k())}}}const uS=ae({items:{type:Array,default:()=>[]},renderless:Boolean,...oS(),...ye(),...cb()},"VVirtualScroll"),cS=ne()({name:"VVirtualScroll",props:uS(),setup(e,t){let{slots:n}=t;const a=Se("VVirtualScroll"),{dimensionStyles:o}=db(e),{calculateVisibleItems:u,containerRef:c,markerRef:d,handleScroll:h,handleScrollend:p,handleItemResize:f,scrollToIndex:v,paddingTop:m,paddingBottom:g,computedItems:y}=lS(e,b(()=>e.items));return Ye(()=>e.renderless,()=>{function e(){var e,t;const n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"addEventListener":"removeEventListener";c.value===document.documentElement?(document[n]("scroll",h,{passive:!0}),document[n]("scrollend",p)):(null==(e=c.value)||e[n]("scroll",h,{passive:!0}),null==(t=c.value)||t[n]("scrollend",p))}C(()=>{c.value=vt(a.vnode.el,!0),e(!0)}),N(e)}),ve(()=>{const t=y.value.map(t=>r(sS,{key:t.key,renderless:e.renderless,"onUpdate:height":e=>f(t.index,e)},{default:e=>{var a;return null==(a=n.default)?void 0:a.call(n,{item:t.raw,index:t.index,...e})}}));return e.renderless?l(_,null,[l("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:he(m.value)}},null),t,l("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:he(g.value)}},null)]):l("div",{ref:c,class:s(["v-virtual-scroll",e.class]),onScrollPassive:h,onScrollend:p,style:i([o.value,e.style])},[l("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:he(m.value),paddingBottom:he(g.value)}},[t])])}),{calculateVisibleItems:u,scrollToIndex:v}}});function dS(e,t){const a=n(!1);let r;return{onScrollPassive:function(e){cancelAnimationFrame(r),a.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{a.value=!1})})},onKeydown:async function(n){var r,i;if("Tab"===n.key&&(null==(r=t.value)||r.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const s=null==(i=e.value)?void 0:i.$el;if(!s)return;"Home"!==n.key&&"End"!==n.key||s.scrollTo({top:"Home"===n.key?0:s.scrollHeight,behavior:"smooth"}),await async function(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(a.value){const t=v(a,()=>{t(),e()})}else e()})}();const o=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if("PageDown"===n.key||"Home"===n.key){const e=s.getBoundingClientRect().top;for(const t of o)if(t.getBoundingClientRect().top>=e){t.focus();break}}else{const e=s.getBoundingClientRect().bottom;for(const t of[...o].reverse())if(t.getBoundingClientRect().bottom<=e){t.focus();break}}}}}const hS=ae({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:be,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...g_({itemChildren:!1})},"Select"),pS=ae({...hS(),...We(aS({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...mb({transition:{component:Mw}})},"VSelect"),fS=ne()({name:"VSelect",props:pS(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:i}=wt(),s=f(),u=f(),c=f(),{items:d,transformIn:p,transformOut:m}=__(e),y=ke(e,"modelValue",[],e=>p(null===e?[null]:xe(e)),t=>{const n=m(t);return e.multiple?n:n[0]??null}),w=o(()=>"function"==typeof e.counterValue?e.counterValue(y.value):"number"==typeof e.counterValue?e.counterValue:y.value.length),I=NI(e),S=o(()=>y.value.map(e=>e.value)),C=n(!1);let k,E="",x=-1;const T=o(()=>e.hideSelected?d.value.filter(t=>!y.value.some(n=>(e.valueComparator||Ee)(n,t))):d.value),A=o(()=>e.hideNoData&&!T.value.length||I.isReadonly.value||I.isDisabled.value),N=ke(e,"menu"),V=o({get:()=>N.value,set:e=>{var t;N.value&&!e&&(null==(t=u.value)?void 0:t.ΨopenChildren.size)||e&&A.value||(N.value=e)}}),D=b(()=>V.value?e.closeText:e.openText),P=o(()=>{var t;return{...e.menuProps,activatorProps:{...(null==(t=e.menuProps)?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=f(),M=dS(R,s);function O(t){e.openOnClear&&(V.value=!0)}function L(){A.value||(V.value=!V.value)}function F(e){xt(e)&&B(e)}function B(t){var n,a,r;if(!t.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(V.value=!0),["Escape","Tab"].includes(t.key)&&(V.value=!1),"Home"===t.key?null==(n=R.value)||n.focus("first"):"End"===t.key&&(null==(a=R.value)||a.focus("last"));if(!xt(t))return;const i=performance.now();i-k>1e3&&(E="",x=-1),E+=t.key.toLowerCase(),k=i;const s=T.value;function o(){for(let e=x+1;e<s.length;e++){const t=s[e];if(t.title.toLowerCase().startsWith(E))return[t,e]}}const l=function(){let e=o();return e||(E.at(-1)===E.at(-2)&&(E=E.slice(0,-1),e=o(),e)?e:(x=-1,e=o(),e||(E=t.key.toLowerCase(),o())))}();if(!l)return;const[u,c]=l;x=c,null==(r=R.value)||r.focus(c),e.multiple||(y.value=[u])}function U(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.props.disabled)if(e.multiple){const a=y.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),r=null==n?!~a:n;if(~a){const e=r?[...y.value,t]:[...y.value];e.splice(a,1),y.value=e}else r&&(y.value=[...y.value,t])}else{const e=!1!==n;y.value=e?[t]:[],g(()=>{V.value=!1})}}function $(e){var t;(null==(t=R.value)?void 0:t.$el.contains(e.relatedTarget))||(V.value=!1)}function j(){var t;e.eager&&(null==(t=c.value)||t.calculateVisibleItems())}function q(){var e;C.value&&(null==(e=s.value)||e.focus())}function H(e){C.value=!0}function K(e){if(null==e)y.value=[];else if(ct(s.value,":autofill")||ct(s.value,":-webkit-autofill")){const t=d.value.find(t=>t.title===e);t&&U(t)}else s.value&&(s.value.value="")}return v(V,()=>{if(!e.hideSelected&&V.value&&y.value.length){const t=T.value.findIndex(t=>y.value.some(n=>(e.valueComparator||Ee)(n.value,t.value)));Pe&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var e;t>=0&&(null==(e=c.value)||e.scrollToIndex(t))})}}),v(()=>e.items,(t,n)=>{V.value||C.value&&e.hideNoData&&!n.length&&t.length&&(V.value=!0)}),ve(()=>{const t=!(!e.chips&&!a.chip),n=!!(!e.hideNoData||T.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),o=y.value.length>0,d=rS.filterProps(e),p=o||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(rS,h({ref:s},d,{modelValue:y.value.map(e=>e.props.value).join(", "),"onUpdate:modelValue":K,focused:C.value,"onUpdate:focused":e=>C.value=e,validationValue:y.externalValue,counterValue:w.value,dirty:o,class:["v-select",{"v-select--active-menu":V.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":y.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:p,"onClick:clear":O,"onMousedown:control":L,onBlur:$,onKeydown:B,"aria-label":i(D.value),title:i(D.value)}),{...a,default:()=>l(_,null,[r(uI,h({ref:u,modelValue:V.value,"onUpdate:modelValue":e=>V.value=e,activator:"parent",contentClass:"v-select__content",disabled:A.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:j,onAfterLeave:q},P.value),{default:()=>[n&&r(E_,h({ref:R,selected:S.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:F,onFocusin:H,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},M,e.listProps),{default:()=>{var t,n,s;return[null==(t=a["prepend-item"])?void 0:t.call(a),!T.value.length&&!e.hideNoData&&((null==(n=a["no-data"])?void 0:n.call(a))??r(h_,{key:"no-data",title:i(e.noDataText)},null)),r(cS,{ref:c,renderless:!0,items:T.value,itemKey:"value"},{default:t=>{var n,i,s;let{item:o,index:u,itemRef:c}=t;const d=kt(o.props),p=h(o.props,{ref:c,key:o.value,onClick:()=>U(o,null)});return"divider"===o.type?(null==(n=a.divider)?void 0:n.call(a,{props:o.raw,index:u}))??r(Tw,h(o.props,{key:`divider-${u}`}),null):"subheader"===o.type?(null==(i=a.subheader)?void 0:i.call(a,{props:o.raw,index:u}))??r(f_,h(o.props,{key:`subheader-${u}`}),null):(null==(s=a.item)?void 0:s.call(a,{item:o,index:u,props:p}))??r(h_,h(p,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?r(II,{key:o.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,d.prependAvatar&&r(Db,{image:d.prependAvatar},null),d.prependIcon&&r(ub,{icon:d.prependIcon},null)])}})}}),null==(s=a["append-item"])?void 0:s.call(a)]}})]}),y.value.map((n,i)=>{function s(e){e.stopPropagation(),e.preventDefault(),U(n,!1)}const o={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},u=t?!!a.chip:!!a.selection,c=u?Et(t?a.chip({item:n,index:i,props:o}):a.selection({item:n,index:i})):void 0;if(!u||c)return l("div",{key:n.value,class:"v-select__selection"},[t?a.chip?r(eb,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[c]}):r(WI,h({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},o),null):c??l("span",{class:"v-select__selection-text"},[n.title,e.multiple&&i<y.value.length-1&&l("span",{class:"v-select__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return l(_,null,[null==(t=a["append-inner"])?void 0:t.call(a,...o),e.menuIcon?r(ub,{class:"v-select__menu-icon",color:null==(n=s.value)?void 0:n.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),oI({isFocused:C,menu:V,select:U},s)}}),vS={id:"account-controls",class:"minimal-account-selector"},mS=Jy({__name:"AccountSelector",props:{accounts:{type:Array,required:!0},modelValue:{type:String,default:null},visible:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,i=o({get:()=>n.modelValue,set(e){a("update:modelValue",e)}});return(t,n)=>w(($(),U("div",vS,[r(fS,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),items:e.accounts,"item-title":"name","item-value":"id",label:"管理対象アカウント",variant:"outlined",density:"compact",color:"primary","prepend-inner-icon":"mdi-account-multiple",class:"minimal-select","hide-details":""},null,8,["modelValue","items"])],512)),[[I,e.visible]])}},[["__scopeId","data-v-eb89f250"]]),gS=je("v-alert-title"),yS=ae({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");const bS=["success","info","warning","error"],wS=ae({border:{type:[Boolean,String],validator:e=>"boolean"==typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:be,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>bS.includes(e)},...ye(),...kb(),...cb(),...Pb(),...yS(),...Qb(),...aw(),...fb(),...ob(),...ge(),...Ab({variant:"flat"})},"VAlert"),_S=ne()({name:"VAlert",props:wS(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const u=ke(e,"modelValue"),c=b(()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=function(e,t){return{iconSize:o(()=>{const n=new Map(e.iconSizes),a=e.iconSize??t()??"default";return n.has(a)?n.get(a):a})}}(e,()=>e.prominent?44:void 0),{themeClasses:p}=Ce(e),{colorClasses:f,colorStyles:v,variantClasses:m}=Nb(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:g}=Eb(e),{dimensionStyles:y}=db(e),{elevationClasses:w}=Rb(e),{locationStyles:_}=Yb(e),{positionClasses:I}=rw(e),{roundedClasses:S}=vb(e),{textColorClasses:C,textColorStyles:k}=nb(()=>e.borderColor),{t:E}=wt(),x=b(()=>({"aria-label":E(e.closeLabel),onClick(e){u.value=!1,n("click:close",e)}}));return()=>{const t=!(!a.prepend&&!c.value),n=!(!a.title&&!e.title),o=!(!a.close&&!e.closable),b={density:e.density,icon:c.value,size:e.iconSize||e.prominent?d.value:void 0};return u.value&&r(e.tag,{class:s(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},p.value,f.value,g.value,w.value,I.value,S.value,m.value,e.class]),style:i([v.value,y.value,_.value,e.style]),role:"alert"},{default:()=>{var u,d;return[Tb(!1,"v-alert"),e.border&&l("div",{key:"border",class:s(["v-alert__border",C.value]),style:i(k.value)},null),t&&l("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?r(eb,{key:"prepend-defaults",disabled:!c.value,defaults:{VIcon:{...b}}},a.prepend):r(ub,h({key:"prepend-icon"},b),null)]),l("div",{class:"v-alert__content"},[n&&r(gS,{key:"title"},{default:()=>{var t;return[(null==(t=a.title)?void 0:t.call(a))??e.title]}}),(null==(u=a.text)?void 0:u.call(a))??e.text,null==(d=a.default)?void 0:d.call(a)]),a.append&&l("div",{key:"append",class:"v-alert__append"},[a.append()]),o&&l("div",{key:"close",class:"v-alert__close"},[a.close?r(eb,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var e;return[null==(e=a.close)?void 0:e.call(a,{props:x.value})]}}):r(Ew,h({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},x.value),null)])]}})}}}),IS=(e,t,n)=>{if(null==e||null==t)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function SS(e,t){if(null!=e&&"boolean"!=typeof e&&-1!==e)return"number"==typeof e?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const CS=ae({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function kS(e,t,a,r){const i=n([]),s=n(new Map),l=o(()=>(null==r?void 0:r.transform)?A(t).map(e=>[e,r.transform(e)]):A(t));return V(()=>{const n="function"==typeof a?a():A(a),o="string"!=typeof n&&"number"!=typeof n?"":String(n),u=function(e,t,n){var a;const r=[],i=(null==n?void 0:n.default)??IS,s=!!(null==n?void 0:n.filterKeys)&&xe(n.filterKeys),o=Object.keys((null==n?void 0:n.customKeyFilter)??{}).length;if(!(null==e?void 0:e.length))return r;e:for(let l=0;l<e.length;l++){const[u,c=u]=xe(e[l]),d={},h={};let p=-1;if((t||o>0)&&!(null==n?void 0:n.noFilter)){if("object"==typeof u){if("divider"===u.type||"subheader"===u.type)continue;const e=s||Object.keys(c);for(const r of e){const e=Ge(c,r),s=null==(a=null==n?void 0:n.customKeyFilter)?void 0:a[r];if(p=s?s(e,t,u):i(e,t,u),-1!==p&&!1!==p)s?d[r]=SS(p,t):h[r]=SS(p,t);else if("every"===(null==n?void 0:n.filterMode))continue e}}else p=i(u,t,u),-1!==p&&!1!==p&&(h.title=SS(p,t));const e=Object.keys(h).length,r=Object.keys(d).length;if(!e&&!r)continue;if("union"===(null==n?void 0:n.filterMode)&&r!==o&&!e)continue;if("intersection"===(null==n?void 0:n.filterMode)&&(r!==o||!e))continue}r.push({index:l,matches:{...h,...d}})}return r}(l.value,o,{customKeyFilter:{...e.customKeyFilter,...A(null==r?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=A(t),d=[],h=new Map;u.forEach(e=>{let{index:t,matches:n}=e;const a=c[t];d.push(a),h.set(a.value,n)}),i.value=d,s.value=h}),{filteredItems:i,filteredMatches:s,getMatches:function(e){return s.value.get(e.value)}}}const ES=ae({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...CS({filterKeys:["title"]}),...hS(),...We(aS({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...mb({transition:!1})},"VAutocomplete"),xS=ne()({name:"VAutocomplete",props:ES(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:u}=wt(),c=f(),d=n(!1),p=n(!0),m=n(!1),y=f(),b=f(),w=n(-1),{items:I,transformIn:S,transformOut:C}=__(e),{textColorClasses:k,textColorStyles:E}=nb(()=>{var e;return null==(e=c.value)?void 0:e.color}),x=ke(e,"search",""),T=ke(e,"modelValue",[],e=>S(null===e?[null]:xe(e)),t=>{const n=C(t);return e.multiple?n:n[0]??null}),A=o(()=>"function"==typeof e.counterValue?e.counterValue(T.value):"number"==typeof e.counterValue?e.counterValue:T.value.length),N=NI(e),{filteredItems:V,getMatches:D}=kS(e,I,()=>p.value?"":x.value),P=o(()=>e.hideSelected?V.value.filter(e=>!T.value.some(t=>t.value===e.value)):V.value),R=o(()=>!(!e.chips&&!a.chip)),M=o(()=>R.value||!!a.selection),O=o(()=>T.value.map(e=>e.props.value)),L=o(()=>{var t;return(!0===e.autoSelectFirst||"exact"===e.autoSelectFirst&&x.value===(null==(t=P.value[0])?void 0:t.title))&&P.value.length>0&&!p.value&&!m.value}),F=o(()=>e.hideNoData&&!P.value.length||N.isReadonly.value||N.isDisabled.value),B=ke(e,"menu"),U=o({get:()=>B.value,set:e=>{var t;B.value&&!e&&(null==(t=y.value)?void 0:t.ΨopenChildren.size)||e&&F.value||(B.value=e)}}),$=o(()=>U.value?e.closeText:e.openText),j=f(),q=dS(j,c);function H(t){e.openOnClear&&(U.value=!0),x.value=""}function K(){F.value||(U.value=!0)}function G(e){F.value||(d.value&&(e.preventDefault(),e.stopPropagation()),U.value=!U.value)}function W(e){var t;(xt(e)||"Backspace"===e.key)&&(null==(t=c.value)||t.focus())}function Q(t){var n,a,r,i,s;if(N.isReadonly.value)return;const o=null==(n=c.value)?void 0:n.selectionStart,l=T.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(U.value=!0),["Escape"].includes(t.key)&&(U.value=!1),L.value&&["Enter","Tab"].includes(t.key)&&!T.value.some(e=>{let{value:t}=e;return t===P.value[0].value})&&ae(P.value[0]),"ArrowDown"===t.key&&L.value&&(null==(a=j.value)||a.focus("next")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&M.value&&T.value.length>0&&!x.value)return ae(T.value[0],!1);if(~w.value){t.preventDefault();const e=w.value;ae(T.value[w.value],!1),w.value=e>=l-1?l-2:e}else"Backspace"!==t.key||x.value||(w.value=l-1)}else if(e.multiple)if("ArrowLeft"===t.key){if(w.value<0&&o&&o>0)return;const e=w.value>-1?w.value-1:l-1;if(T.value[e])w.value=e;else{const e=(null==(r=x.value)?void 0:r.length)??null;w.value=-1,null==(i=c.value)||i.setSelectionRange(e,e)}}else if("ArrowRight"===t.key){if(w.value<0)return;const e=w.value+1;T.value[e]?w.value=e:(w.value=-1,null==(s=c.value)||s.setSelectionRange(0,0))}else~w.value&&xt(t)&&(w.value=-1)}function Y(e){if(ct(c.value,":autofill")||ct(c.value,":-webkit-autofill")){const t=I.value.find(t=>t.title===e.target.value);t&&ae(t)}}function X(){var t;e.eager&&(null==(t=b.value)||t.calculateVisibleItems())}function J(){var e;d.value&&(p.value=!0,null==(e=c.value)||e.focus())}function Z(e){d.value=!0,setTimeout(()=>{m.value=!0})}function ee(e){m.value=!1}function te(t){null!=t&&(""!==t||e.multiple||M.value)||(T.value=[])}const ne=n(!1);function ae(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&!t.props.disabled)if(e.multiple){const a=T.value.findIndex(n=>(e.valueComparator||Ee)(n.value,t.value)),r=null==n?!~a:n;if(~a){const e=r?[...T.value,t]:[...T.value];e.splice(a,1),T.value=e}else r&&(T.value=[...T.value,t]);e.clearOnSelect&&(x.value="")}else{const e=!1!==n;T.value=e?[t]:[],x.value=e&&!M.value?t.title:"",g(()=>{U.value=!1,p.value=!0})}}return v(d,(t,n)=>{var a;t!==n&&(t?(ne.value=!0,x.value=e.multiple||M.value?"":String((null==(a=T.value.at(-1))?void 0:a.props.title)??""),p.value=!0,g(()=>ne.value=!1)):(e.multiple||null!=x.value||(T.value=[]),U.value=!1,(e.multiple||M.value)&&(x.value=""),w.value=-1))}),v(x,e=>{d.value&&!ne.value&&(e&&(U.value=!0),p.value=!e)}),v(U,()=>{if(!e.hideSelected&&U.value&&T.value.length){const e=P.value.findIndex(e=>T.value.some(t=>e.value===t.value));Pe&&window.requestAnimationFrame(()=>{var t;e>=0&&(null==(t=b.value)||t.scrollToIndex(e))})}}),v(()=>e.items,(e,t)=>{U.value||d.value&&!t.length&&e.length&&(U.value=!0)}),ve(()=>{const t=!!(!e.hideNoData||P.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),n=T.value.length>0,o=rS.filterProps(e);return r(rS,h({ref:c},o,{modelValue:x.value,"onUpdate:modelValue":[e=>x.value=e,te],focused:d.value,"onUpdate:focused":e=>d.value=e,validationValue:T.externalValue,counterValue:A.value,dirty:n,onChange:Y,class:["v-autocomplete","v-autocomplete--"+(e.multiple?"multiple":"single"),{"v-autocomplete--active-menu":U.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!M.value,"v-autocomplete--selecting-index":w.value>-1},e.class],style:e.style,readonly:N.isReadonly.value,placeholder:n?void 0:e.placeholder,"onClick:clear":H,"onMousedown:control":K,onKeydown:Q}),{...a,default:()=>l(_,null,[r(uI,h({ref:y,modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,activator:"parent",contentClass:"v-autocomplete__content",disabled:F.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:X,onAfterLeave:J},e.menuProps),{default:()=>[t&&r(E_,h({ref:j,filterable:!0,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:W,onFocusin:Z,onFocusout:ee,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},q,e.listProps),{default:()=>{var t,n,i;return[null==(t=a["prepend-item"])?void 0:t.call(a),!P.value.length&&!e.hideNoData&&((null==(n=a["no-data"])?void 0:n.call(a))??r(h_,{key:"no-data",title:u(e.noDataText)},null)),r(cS,{ref:b,renderless:!0,items:P.value,itemKey:"value"},{default:t=>{var n,i,o;let{item:u,index:c,itemRef:d}=t;const f=h(u.props,{ref:d,key:u.value,active:!(!L.value||0!==c)||void 0,onClick:()=>ae(u,null)});return"divider"===u.type?(null==(n=a.divider)?void 0:n.call(a,{props:u.raw,index:c}))??r(Tw,h(u.props,{key:`divider-${c}`}),null):"subheader"===u.type?(null==(i=a.subheader)?void 0:i.call(a,{props:u.raw,index:c}))??r(f_,h(u.props,{key:`subheader-${c}`}),null):(null==(o=a.item)?void 0:o.call(a,{item:u,index:c,props:f}))??r(h_,h(f,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return l(_,null,[e.multiple&&!e.hideSelected?r(II,{key:u.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependAvatar&&r(Db,{image:u.props.prependAvatar},null),u.props.prependIcon&&r(ub,{icon:u.props.prependIcon},null)])},title:()=>{var e,t,n,a;return p.value?u.title:(t="v-autocomplete",n=u.title,null!=(a=null==(e=D(u))?void 0:e.title)&&a.length?a.map((e,r)=>{const i=0===r?0:a[r-1][1],o=[l("span",{class:s(`${t}__unmask`)},[n.slice(i,e[0])]),l("span",{class:s(`${t}__mask`)},[n.slice(e[0],e[1])])];return r===a.length-1&&o.push(l("span",{class:s(`${t}__unmask`)},[n.slice(e[1])])),l(_,null,[o])}):n)}})}}),null==(i=a["append-item"])?void 0:i.call(a)]}})]}),T.value.map((t,n)=>{function o(e){e.stopPropagation(),e.preventDefault(),ae(t,!1)}const u={"onClick:close":o,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),o(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},c=R.value?!!a.chip:!!a.selection,d=c?Et(R.value?a.chip({item:t,index:n,props:u}):a.selection({item:t,index:n})):void 0;if(!c||d)return l("div",{key:t.value,class:s(["v-autocomplete__selection",n===w.value&&["v-autocomplete__selection--selected",k.value]]),style:i(n===w.value?E.value:{})},[R.value?a.chip?r(eb,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[d]}):r(WI,h({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},u),null):d??l("span",{class:"v-autocomplete__selection-text"},[t.title,e.multiple&&n<T.value.length-1&&l("span",{class:"v-autocomplete__selection-comma"},[z(",")])])])})]),"append-inner":function(){for(var t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return l(_,null,[null==(t=a["append-inner"])?void 0:t.call(a,...s),e.menuIcon?r(ub,{class:"v-autocomplete__menu-icon",color:null==(n=c.value)?void 0:n.fieldIconColor,icon:e.menuIcon,onMousedown:G,onClick:Tt,"aria-label":u($.value),title:u($.value),tabindex:"-1"},null):void 0])}})}),oI({isFocused:d,isPristine:p,menu:U,search:x,filteredItems:V,select:ae},c)}}),TS=ne()({name:"VCardActions",props:ye(),setup(e,t){let{slots:n}=t;return re({VBtn:{slim:!0,variant:"text"}}),ve(()=>{var t;return l("div",{class:s(["v-card-actions",e.class]),style:i(e.style)},[null==(t=n.default)?void 0:t.call(n)])}),{}}}),AS=ae({opacity:[Number,String],...ye(),...ob()},"VCardSubtitle"),NS=ne()({name:"VCardSubtitle",props:AS(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-card-subtitle",e.class]),style:i([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),VS=je("v-card-title"),DS=ae({appendAvatar:String,appendIcon:be,prependAvatar:String,prependIcon:be,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ye(),...kb()},"VCardItem"),PS=ne()({name:"VCardItem",props:DS(),setup(e,t){let{slots:n}=t;return ve(()=>{var t;const a=!(!e.prependAvatar&&!e.prependIcon),o=!(!a&&!n.prepend),u=!(!e.appendAvatar&&!e.appendIcon),c=!(!u&&!n.append),d=!(null==e.title&&!n.title),h=!(null==e.subtitle&&!n.subtitle);return l("div",{class:s(["v-card-item",e.class]),style:i(e.style)},[o&&l("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?r(eb,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):l(_,null,[e.prependAvatar&&r(Db,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&r(ub,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&r(VS,{key:"title"},{default:()=>{var t;return[(null==(t=n.title)?void 0:t.call(n))??P(e.title)]}}),h&&r(NS,{key:"subtitle"},{default:()=>{var t;return[(null==(t=n.subtitle)?void 0:t.call(n))??P(e.subtitle)]}}),null==(t=n.default)?void 0:t.call(n)]),c&&l("div",{key:"append",class:"v-card-item__append"},[n.append?r(eb,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):l(_,null,[e.appendIcon&&r(ub,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&r(Db,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),RS=ae({opacity:[Number,String],...ye(),...ob()},"VCardText"),MS=ne()({name:"VCardText",props:RS(),setup(e,t){let{slots:n}=t;return ve(()=>r(e.tag,{class:s(["v-card-text",e.class]),style:i([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),OS=ae({appendAvatar:String,appendIcon:be,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:be,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ib(),...ye(),...kb(),...cb(),...Pb(),...Zb(),...Qb(),...aw(),...fb(),...sw(),...ob(),...ge(),...Ab({variant:"elevated"})},"VCard"),LS=ne()({name:"VCard",directives:{vRipple:Cw},props:OS(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:i}=Ce(e),{borderClasses:s}=Sb(e),{colorClasses:o,colorStyles:u,variantClasses:c}=Nb(e),{densityClasses:d}=Eb(e),{dimensionStyles:p}=db(e),{elevationClasses:f}=Rb(e),{loaderClasses:v}=ew(e),{locationStyles:m}=Yb(e),{positionClasses:g}=rw(e),{roundedClasses:y}=vb(e),b=iw(e,n);return ve(()=>{const t=!1!==e.link&&b.isLink.value,n=!e.disabled&&!1!==e.link&&(e.link||b.isClickable.value),_=t?"a":e.tag,I=!(!a.title&&null==e.title),S=!(!a.subtitle&&null==e.subtitle),C=I||S,k=!!(a.append||e.appendAvatar||e.appendIcon),E=!!(a.prepend||e.prependAvatar||e.prependIcon),x=!(!a.image&&!e.image),T=C||E||k,A=!(!a.text&&null==e.text);return w(r(_,h({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":n},i.value,s.value,o.value,d.value,f.value,v.value,g.value,y.value,c.value,e.class],style:[u.value,p.value,m.value,e.style],onClick:n&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>{var t;return[x&&l("div",{key:"image",class:"v-card__image"},[a.image?r(eb,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):r(_b,{key:"image-img",cover:!0,src:e.image},null)]),r(tw,{name:"v-card",active:!!e.loading,color:"boolean"==typeof e.loading?void 0:e.loading},{default:a.loader}),T&&r(PS,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),A&&r(MS,{key:"text"},{default:()=>{var t;return[(null==(t=a.text)?void 0:t.call(a))??e.text]}}),null==(t=a.default)?void 0:t.call(a),a.actions&&r(TS,null,{default:a.actions}),Tb(n,"v-card")]}}),[[Cw,n&&e.ripple]])}),{}}}),FS=ae({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...aI({origin:"center center",scrollStrategy:"block",transition:{component:Mw},zIndex:2400})},"VDialog"),BS=ne()({name:"VDialog",props:FS(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const i=ke(e,"modelValue"),{scopeId:s}=W_(),o=f();function l(e){var t,n;const a=e.relatedTarget,r=e.target;if(a!==r&&(null==(t=o.value)?void 0:t.contentEl)&&(null==(n=o.value)?void 0:n.globalTop)&&![document,o.value.contentEl].includes(r)&&!o.value.contentEl.contains(r)){const e=mt(o.value.contentEl);if(!e.length)return;const t=e[0],n=e[e.length-1];a===t?n.focus():t.focus()}}function u(){var t;n("afterEnter"),(e.scrim||e.retainFocus)&&(null==(t=o.value)?void 0:t.contentEl)&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function c(){n("afterLeave")}return y(()=>{document.removeEventListener("focusin",l)}),Pe&&v(()=>i.value&&e.retainFocus,e=>{e?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0}),v(i,async e=>{var t;e||(await g(),null==(t=o.value.activatorEl)||t.focus({preventScroll:!0}))}),ve(()=>{const t=rI.filterProps(e),n=h({"aria-haspopup":"dialog"},e.activatorProps),l=h({tabindex:-1},e.contentProps);return r(rI,h({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,"aria-modal":"true",activatorProps:n,contentProps:l,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:u,onAfterLeave:c},s),{activator:a.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(eb,{root:"VDialog"},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a,...t)]}})}})}),oI({},o)}}),US=ae({fluid:{type:Boolean,default:!1},...ye(),...cb(),...ob()},"VContainer"),$S=ne()({name:"VContainer",props:US(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Ve(),{dimensionStyles:o}=db(e);return ve(()=>r(e.tag,{class:s(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:i([o.value,e.style])},n)),{}}}),jS=At.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),zS=At.reduce((e,t)=>(e["offset"+G(t)]={type:[String,Number],default:null},e),{}),qS=At.reduce((e,t)=>(e["order"+G(t)]={type:[String,Number],default:null},e),{}),HS={col:Object.keys(jS),offset:Object.keys(zS),order:Object.keys(qS)};function KS(e,t,n){let a=e;if(null!=n&&!1!==n){if(t){a+=`-${t.replace(e,"")}`}return"col"===e&&(a="v-"+a),"col"!==e||""!==n&&!0!==n?(a+=`-${n}`,a.toLowerCase()):a.toLowerCase()}}const GS=["auto","start","end","center","baseline","stretch"],WS=ae({cols:{type:[Boolean,String,Number],default:!1},...jS,offset:{type:[String,Number],default:null},...zS,order:{type:[String,Number],default:null},...qS,alignSelf:{type:String,default:null,validator:e=>GS.includes(e)},...ye(),...ob()},"VCol"),QS=ne()({name:"VCol",props:WS(),setup(e,t){let{slots:n}=t;const a=o(()=>{const t=[];let n;for(n in HS)HS[n].forEach(a=>{const r=e[a],i=KS(n,a,r);i&&t.push(i)});const a=t.some(e=>e.startsWith("v-col-"));return t.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t});return()=>{var t;return p(e.tag,{class:[a.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),YS=["start","end","center"],XS=["space-between","space-around","space-evenly"];function JS(e,t){return At.reduce((n,a)=>(n[e+G(a)]=t(),n),{})}const ZS=[...YS,"baseline","stretch"],eC=e=>ZS.includes(e),tC=JS("align",()=>({type:String,default:null,validator:eC})),nC=[...YS,...XS],aC=e=>nC.includes(e),rC=JS("justify",()=>({type:String,default:null,validator:aC})),iC=[...YS,...XS,"stretch"],sC=e=>iC.includes(e),oC=JS("alignContent",()=>({type:String,default:null,validator:sC})),lC={align:Object.keys(tC),justify:Object.keys(rC),alignContent:Object.keys(oC)},uC={align:"align",justify:"justify",alignContent:"align-content"};function cC(e,t,n){let a=uC[e];if(null!=n){if(t){a+=`-${t.replace(e,"")}`}return a+=`-${n}`,a.toLowerCase()}}const dC=ae({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:eC},...tC,justify:{type:String,default:null,validator:aC},...rC,alignContent:{type:String,default:null,validator:sC},...oC,...ye(),...ob()},"VRow"),hC=ne()({name:"VRow",props:dC(),setup(e,t){let{slots:n}=t;const a=o(()=>{const t=[];let n;for(n in lC)lC[n].forEach(a=>{const r=e[a],i=cC(n,a,r);i&&t.push(i)});return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t});return()=>{var t;return p(e.tag,{class:["v-row",a.value,e.class],style:e.style},null==(t=n.default)?void 0:t.call(n))}}}),pC=je("v-spacer","div","VSpacer"),fC={key:0,class:"mb-4"},vC={key:1,class:"mt-6"},mC={class:"text-h6 font-weight-medium mb-3"},gC=Jy({__name:"ItemEditModal",props:{modelValue:{type:Boolean,default:!1},character:{type:Object,default:null},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0}},emits:["update:modelValue","save"],setup(e,{emit:t}){const n=e,a=t,i=o({get:()=>n.modelValue,set:e=>a("update:modelValue",e)}),s=f([]),u=f([]),c=f(""),d=f(!1),p=o(()=>n.character?n.characterMastersMap.get(n.character.characterMasterId):null),m=o(()=>n.itemMasters.map(e=>({id:e.id,name:e.name}))),g=e=>!e||(e.length<=3||"アイテムは最大3個までです"),y=e=>{const t=u.value.find(t=>t.itemId===e);return t?t.isVirtual?"orange":"success":"primary"},b=e=>{const t=e.filter(e=>!u.value.some(t=>t.itemId===e));u.value=u.value.filter(t=>e.includes(t.itemId)),t.forEach(e=>{u.value.push({itemId:Number(e),isVirtual:!1})})},w=()=>{i.value=!1,c.value=""},I=async()=>{if(u.value.length>3)c.value="アイテムは最大3個までです";else{d.value=!0;try{a("save",{character:n.character,items:u.value}),w()}catch(e){c.value=`保存に失敗しました: ${e.message}`}finally{d.value=!1}}};return v(()=>n.character,e=>{if(!e)return u.value=[],void(s.value=[]);const t=ir(e.items||[]);u.value=JSON.parse(JSON.stringify(t)),s.value=t.map(e=>e.itemId)},{immediate:!0}),(e,t)=>($(),q(BS,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),"max-width":"600px",persistent:""},{default:j(()=>[r(LS,null,{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-pencil",class:"mr-2"}),t[3]||(t[3]=z(" アイテム編集 ",-1))]),_:1,__:[3]}),r(MS,{class:"pa-6"},{default:j(()=>[p.value?($(),U("div",fC,[r(WI,{color:"primary",variant:"tonal",class:"mb-2"},{default:j(()=>[z(P(p.value.monsterName),1)]),_:1})])):W("",!0),r(xS,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),b],items:m.value,"item-title":"name","item-value":"id",label:"アイテムを選択（最大3個）",multiple:"",chips:"","closable-chips":"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-sword-cross",rules:[g]},{chip:j(({props:e,item:t})=>[r(WI,h(e,{color:y(t.value),closable:""}),{default:j(()=>[z(P(t.title),1)]),_:2},1040,["color"])]),_:1},8,["modelValue","items","rules"]),u.value.length>0?($(),U("div",vC,[r(Tw,{class:"mb-4"}),l("h6",mC,[r(ub,{icon:"mdi-cog",class:"mr-2",color:"secondary"}),t[4]||(t[4]=z(" アイテム設定 ",-1))]),r(E_,null,{default:j(()=>[($(!0),U(_,null,Q(u.value,e=>($(),q(h_,{key:e.itemId,class:"mb-2 border rounded"},{prepend:j(()=>[r(ub,{icon:e.isVirtual?"mdi-clipboard-text-outline":"mdi-check-circle",color:e.isVirtual?"orange":"success"},null,8,["icon","color"])]),append:j(()=>[r(qb,{"model-value":e.isVirtual?"virtual":"real","onUpdate:modelValue":t=>((e,t)=>{const n=u.value.find(t=>t.itemId===e);n&&(n.isVirtual="virtual"===t)})(e.itemId,t),mandatory:"",density:"compact",color:"primary"},{default:j(()=>[r(Ew,{value:"real",size:"small"},{default:j(()=>[r(ub,{icon:"mdi-check",class:"mr-1"}),t[5]||(t[5]=z(" 実 ",-1))]),_:1,__:[5]}),r(Ew,{value:"virtual",size:"small"},{default:j(()=>[r(ub,{icon:"mdi-clipboard-text-outline",class:"mr-1"}),t[6]||(t[6]=z(" 予定 ",-1))]),_:1,__:[6]})]),_:2},1032,["model-value","onUpdate:modelValue"])]),default:j(()=>[r(c_,null,{default:j(()=>{return[z(P((t=e.itemId,n.itemMastersMap.get(Number(t))||"不明")),1)];var t}),_:2},1024)]),_:2},1024))),128))]),_:1})])):W("",!0),c.value?($(),q(_S,{key:2,type:"error",variant:"tonal",class:"mt-4",closable:"","onClick:close":t[1]||(t[1]=e=>c.value="")},{default:j(()=>[z(P(c.value),1)]),_:1})):W("",!0)]),_:1}),r(TS,{class:"pa-4"},{default:j(()=>[r(pC),r(Ew,{onClick:w,variant:"outlined",color:"secondary"},{default:j(()=>t[7]||(t[7]=[z(" キャンセル ",-1)])),_:1,__:[7]}),r(Ew,{onClick:I,variant:"elevated",color:"primary",loading:d.value},{default:j(()=>t[8]||(t[8]=[z(" 保存 ",-1)])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-b3b688bd"]]);const yC=ae({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1==0},totalVisible:[Number,String],firstIcon:{type:be,default:"$first"},prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},lastIcon:{type:be,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ib(),...ye(),...kb(),...Pb(),...fb(),...ib(),...ob({tag:"nav"}),...ge(),...Ab({variant:"text"})},"VPagination"),bC=ne()({name:"VPagination",props:yC(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:u}=t;const c=ke(e,"modelValue"),{t:d,n:p}=wt(),{isRtl:v}=Ve(),{themeClasses:m}=Ce(e),{width:y}=pt(),w=n(-1);re(void 0,{scoped:!0});const{resizeRef:_}=Ae(e=>{if(!e.length)return;const{target:t,contentRect:n}=e[0],a=t.querySelector(".v-pagination__list > *");if(!a)return;const r=n.width,i=a.offsetWidth+2*parseFloat(getComputedStyle(a).marginRight);w.value=k(r,i)}),I=o(()=>parseInt(e.length,10)),S=o(()=>parseInt(e.start,10)),C=o(()=>null!=e.totalVisible?parseInt(e.totalVisible,10):w.value>=0?w.value:k(y.value,58));function k(t,n){const a=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((t-n*a)/n).toFixed(2))))}const E=o(()=>{if(I.value<=0||isNaN(I.value)||I.value>Number.MAX_SAFE_INTEGER)return[];if(C.value<=0)return[];if(1===C.value)return[c.value];if(I.value<=C.value)return Nt(I.value,S.value);const t=C.value%2==0,n=t?C.value/2:Math.floor(C.value/2),a=t?n:n+1,r=I.value-n;if(a-c.value>=0)return[...Nt(Math.max(1,C.value-1),S.value),e.ellipsis,I.value];if(c.value-r>=(t?1:0)){const t=C.value-1,n=I.value-t+S.value;return[S.value,e.ellipsis,...Nt(t,n)]}{const t=Math.max(1,C.value-2),n=1===t?c.value:c.value-Math.ceil(t/2)+S.value;return[S.value,e.ellipsis,...Nt(t,n),e.ellipsis,I.value]}});function x(e,t,n){e.preventDefault(),c.value=t,n&&u(n,t)}const{refs:T,updateRef:A}=function(){const e=f([]);return Y(()=>e.value=[]),{refs:e,updateRef:function(t,n){e.value[n]=t}}}();re({VPaginationBtn:{color:b(()=>e.color),border:b(()=>e.border),density:b(()=>e.density),size:b(()=>e.size),variant:b(()=>e.variant),rounded:b(()=>e.rounded),elevation:b(()=>e.elevation)}});const N=o(()=>E.value.map((t,n)=>{const a=e=>A(e,n);if("string"==typeof t)return{isActive:!1,key:`ellipsis-${n}`,page:t,props:{ref:a,ellipsis:!0,icon:!0,disabled:!0}};{const n=t===c.value;return{isActive:n,key:t,page:p(t),props:{ref:a,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:n?e.activeColor:e.color,"aria-current":n,"aria-label":d(n?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>x(e,t)}}}})),V=o(()=>{const t=!!e.disabled||c.value<=S.value,n=!!e.disabled||c.value>=S.value+I.value-1;return{first:e.showFirstLastPage?{icon:v.value?e.lastIcon:e.firstIcon,onClick:e=>x(e,S.value,"first"),disabled:t,"aria-label":d(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:v.value?e.nextIcon:e.prevIcon,onClick:e=>x(e,c.value-1,"prev"),disabled:t,"aria-label":d(e.previousAriaLabel),"aria-disabled":t},next:{icon:v.value?e.prevIcon:e.nextIcon,onClick:e=>x(e,c.value+1,"next"),disabled:n,"aria-label":d(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:v.value?e.firstIcon:e.lastIcon,onClick:e=>x(e,S.value+I.value-1,"last"),disabled:n,"aria-label":d(e.lastAriaLabel),"aria-disabled":n}:void 0}});function D(){var e;const t=c.value-S.value;null==(e=T.value[t])||e.$el.focus()}function P(t){t.key===Vt.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,g(D)):t.key===Vt.right&&!e.disabled&&c.value<S.value+I.value-1&&(c.value=c.value+1,g(D))}return ve(()=>r(e.tag,{ref:_,class:s(["v-pagination",m.value,e.class]),style:i(e.style),role:"navigation","aria-label":d(e.ariaLabel),onKeydown:P,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(V.value.first):r(Ew,h({_as:"VPaginationBtn"},V.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(V.value.prev):r(Ew,h({_as:"VPaginationBtn"},V.value.prev),null)]),N.value.map((e,t)=>l("li",{key:e.key,class:s(["v-pagination__item",{"v-pagination__item--is-active":e.isActive}]),"data-test":"v-pagination-item"},[a.item?a.item(e):r(Ew,h({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(V.value.next):r(Ew,h({_as:"VPaginationBtn"},V.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(V.value.last):r(Ew,h({_as:"VPaginationBtn"},V.value.last),null)])])]})),{}}}),wC=ae({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),_C=Symbol.for("vuetify:data-table-pagination");const IC=ae({prevIcon:{type:be,default:"$prev"},nextIcon:{type:be,default:"$next"},firstIcon:{type:be,default:"$first"},lastIcon:{type:be,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),SC=ne()({name:"VDataTableFooter",props:IC(),setup(e,t){let{slots:n}=t;const{t:a}=wt(),{page:i,pageCount:s,startIndex:u,stopIndex:c,itemsLength:d,itemsPerPage:p,setItemsPerPage:f}=function(){const e=T(_C);if(!e)throw new Error("Missing pagination!");return e}(),v=o(()=>e.itemsPerPageOptions.map(e=>"number"==typeof e?{value:e,title:-1===e?a("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?a(e.title):e.title}));return ve(()=>{var t;const o=bC.filterProps(e);return l("div",{class:"v-data-table-footer"},[null==(t=n.prepend)?void 0:t.call(n),l("div",{class:"v-data-table-footer__items-per-page"},[l("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),r(fS,{items:v.value,modelValue:p.value,"onUpdate:modelValue":e=>f(Number(e)),density:"compact",variant:"outlined",hideDetails:!0},null)]),l("div",{class:"v-data-table-footer__info"},[l("div",null,[a(e.pageText,d.value?u.value+1:0,c.value,d.value)])]),l("div",{class:"v-data-table-footer__pagination"},[r(bC,h({modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},o),null)])])}),{}}}),CC=Dt({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",i="string"==typeof e.fixed?e.fixed:e.fixed?"start":"none";return r(a,{class:s(["v-data-table__td",{"v-data-table-column--fixed":"start"===i,"v-data-table-column--fixed-end":"end"===i,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:he(e.height),width:he(e.width),maxWidth:he(e.maxWidth),left:"start"===i?he(e.fixedOffset||null):void 0,right:"end"===i?he(e.fixedEndOffset||null):void 0}},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n)]}})}),kC=ae({headers:Array},"DataTable-header"),EC=Symbol.for("vuetify:data-table-headers"),xC={title:"",sortable:!1},TC={...xC,width:48};function AC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const n of e.children)AC(n,t);else t.push(e);return t}function NC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&NC(n.children,t);return t}function VC(e){if(e.key)return"data-table-group"===e.key?xC:["data-table-expand","data-table-select"].includes(e.key)?TC:void 0}function DC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map(e=>DC(e,t+1))):t}function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=PC(n,t)}else e.fixed&&"end"!==e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function RC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=RC(n,t)}else"end"===e.fixed&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function MC(e,t){const n=[];let a=0;const r=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({element:e,priority:0}));return{enqueue:(t,n)=>{let a=!1;for(let r=0;r<e.length;r++)if(e[r].priority>n){e.splice(r,0,{element:t,priority:n}),a=!0;break}a||e.push({element:t,priority:n})},size:()=>e.length,count:()=>{let t=0;if(!e.length)return 0;const n=Math.floor(e[0].priority);for(let a=0;a<e.length;a++)Math.floor(e[a].priority)===n&&(t+=1);return t},dequeue:()=>e.shift()}}(e);for(;r.size()>0;){let e=r.count();const i=[];let s=1;for(;e>0;){const{element:n,priority:o}=r.dequeue(),l=t-a-DC(n);if(i.push({...n,rowspan:l??1,colspan:n.children?AC(n).length:1}),n.children)for(const e of n.children){const t=o%1+s/Math.pow(10,a+2);r.enqueue(e,a+l+t)}s+=1,e-=1}a+=1,n.push(i)}return{columns:e.map(e=>AC(e)).flat(),headers:n}}function OC(e){const t=[];for(const n of e){const e={...VC(n),...n},a=e.key??("string"==typeof e.value?e.value:null),r=e.value??a??null,i={...e,key:a,value:r,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?OC(e.children):void 0};t.push(i)}return t}function LC(e,t){const n=f([]),a=f([]),r=f({}),i=f({}),s=f({});V(()=>{var o,l,u;const c=(e.headers||Object.keys(e.items[0]??{}).map(e=>({key:e,title:G(e)}))).slice(),d=NC(c);(null==(o=null==t?void 0:t.groupBy)?void 0:o.value.length)&&!d.has("data-table-group")&&c.unshift({key:"data-table-group",title:"Group"}),(null==(l=null==t?void 0:t.showSelect)?void 0:l.value)&&!d.has("data-table-select")&&c.unshift({key:"data-table-select"}),(null==(u=null==t?void 0:t.showExpand)?void 0:u.value)&&!d.has("data-table-expand")&&c.push({key:"data-table-expand"});const h=OC(c);!function(e){let t=!1;function n(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";if(e)if("none"!==r&&(e.fixed=r),!0===e.fixed&&(e.fixed="start"),e.fixed===a)if(e.children)if("start"===a)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],a,a);else for(let t=0;t<e.children.length;t++)n(e.children[t],a,a);else t||"start"!==a?t||"end"!==a?isNaN(Number(e.width))?Pt(`Multiple fixed columns should have a static width (key: ${e.key})`):e.minWidth=Math.max(Number(e.width)||0,Number(e.minWidth)||0):e.firstFixedEnd=!0:e.lastFixed=!0,t=!0;else if(e.children)if("start"===a)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],a);else for(let t=0;t<e.children.length;t++)n(e.children[t],a);else t=!1}for(let i=e.length-1;i>=0;i--)n(e[i],"start");for(let i=0;i<e.length;i++)n(e[i],"end");let a=0;for(let i=0;i<e.length;i++)a=PC(e[i],a);let r=0;for(let i=e.length-1;i>=0;i--)r=RC(e[i],r)}(h);const p=Math.max(...h.map(e=>DC(e)))+1,f=MC(h,p);n.value=f.headers,a.value=f.columns;const v=f.headers.flat(1);for(const e of v)e.key&&(e.sortable&&(e.sort&&(r.value[e.key]=e.sort),e.sortRaw&&(i.value[e.key]=e.sortRaw)),e.filter&&(s.value[e.key]=e.filter))});const o={headers:n,columns:a,sortFunctions:r,sortRawFunctions:i,filterFunctions:s};return x(EC,o),o}function FC(){const e=T(EC);if(!e)throw new Error("Missing headers!");return e}const BC={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:n,value:a}=e;return new Set(a?[null==(t=n[0])?void 0:t.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},UC={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return UC.select({items:n,value:t,selected:a})}},$C={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return $C.select({items:n,value:t,selected:a})}},jC=ae({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ee}},"DataTable-select"),zC=Symbol.for("vuetify:data-table-selection");function qC(e,t){let{allItems:a,currentPage:r}=t;const i=ke(e,"modelValue",e.modelValue,t=>new Set(xe(t).map(t=>{var n;return(null==(n=a.value.find(n=>e.valueComparator(t,n.value)))?void 0:n.value)??t})),e=>[...e.values()]),s=o(()=>a.value.filter(e=>e.selectable)),l=o(()=>r.value.filter(e=>e.selectable)),u=o(()=>{if("object"==typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return BC;case"all":return $C;default:return UC}}),c=n(null);function d(e){return xe(e).every(e=>i.value.has(e.value))}function h(e,t){const n=u.value.select({items:e,value:t,selected:new Set(i.value)});i.value=n}const p=o(()=>i.value.size>0),f=o(()=>{const e=u.value.allSelected({allItems:s.value,currentPage:l.value});return!!e.length&&d(e)}),v={toggleSelect:function(t,n,a){const i=[];if(n=n??r.value.findIndex(e=>e.value===t.value),"single"!==e.selectStrategy&&(null==a?void 0:a.shiftKey)&&null!==c.value){const[e,t]=[c.value,n].sort((e,t)=>e-t);i.push(...r.value.slice(e,t+1).filter(e=>e.selectable))}else i.push(t),c.value=n;h(i,!d([t]))},select:h,selectAll:function(e){const t=u.value.selectAll({value:e,allItems:s.value,currentPage:l.value,selected:new Set(i.value)});i.value=t},isSelected:d,isSomeSelected:function(e){return xe(e).some(e=>i.value.has(e.value))},someSelected:p,allSelected:f,showSelectAll:b(()=>u.value.showSelectAll),lastSelectedIndex:c,selectStrategy:u};return x(zC,v),v}function HC(){const e=T(zC);if(!e)throw new Error("Missing selection!");return e}const KC=ae({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),GC=Symbol.for("vuetify:data-table-sort");function WC(e){return{sortBy:ke(e,"sortBy"),mustSort:b(()=>e.mustSort),multiSort:b(()=>e.multiSort)}}function QC(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e;const i={sortBy:t,toggleSort:e=>{if(null==e.key)return;let i=t.value.map(e=>({...e}))??[];const s=i.find(t=>t.key===e.key);s?"desc"===s.order?n.value&&1===i.length?s.order="asc":i=i.filter(t=>t.key!==e.key):s.order="desc":a.value?i.push({key:e.key,order:"asc"}):i=[{key:e.key,order:"asc"}],t.value=i,r&&(r.value=1)},isSorted:function(e){return!!t.value.find(t=>t.key===e.key)}};return x(GC,i),i}function YC(){const e=T(GC);if(!e)throw new Error("Missing sort!");return e}function XC(e,t,n,a){const r=wt(),i=o(()=>{var i,s;return n.value.length?function(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"}),i=e.map(e=>[e,(null==a?void 0:a.transform)?a.transform(e):e]);return i.sort((e,n)=>{var i,s;for(let o=0;o<t.length;o++){let l=!1;const u=t[o].key,c=t[o].order??"asc";if(!1===c)continue;let d=Rt(e[1],u),h=Rt(n[1],u),p=e[0].raw,f=n[0].raw;if("desc"===c&&([d,h]=[h,d],[p,f]=[f,p]),null==(i=null==a?void 0:a.sortRawFunctions)?void 0:i[u]){const e=a.sortRawFunctions[u](p,f);if(null==e)continue;if(l=!0,e)return e}if(null==(s=null==a?void 0:a.sortFunctions)?void 0:s[u]){const e=a.sortFunctions[u](d,h);if(null==e)continue;if(l=!0,e)return e}if(!l&&(d instanceof Date&&h instanceof Date&&(d=d.getTime(),h=h.getTime()),[d,h]=[d,h].map(e=>null!=e?e.toString().toLocaleLowerCase():e),d!==h))return Mt(d)&&Mt(h)?0:Mt(d)?-1:Mt(h)?1:isNaN(d)||isNaN(h)?r.compare(d,h):Number(d)-Number(h)}return 0}).map(e=>{let[t]=e;return t})}(t.value,n.value,r.current.value,{transform:null==a?void 0:a.transform,sortFunctions:{...e.customKeySort,...null==(i=null==a?void 0:a.sortFunctions)?void 0:i.value},sortRawFunctions:null==(s=null==a?void 0:a.sortRawFunctions)?void 0:s.value}):t.value});return{sortedItems:i}}const JC=ae({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:be,default:"$sortAsc"},sortDescIcon:{type:be,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...St(),...Zb()},"VDataTableHeaders"),ZC=ne()({name:"VDataTableHeaders",props:JC(),setup(e,t){let{slots:n}=t;const{t:a}=wt(),{toggleSort:u,sortBy:c,isSorted:d}=YC(),{someSelected:p,allSelected:f,selectAll:v,showSelectAll:m}=HC(),{columns:g,headers:y}=FC(),{loaderClasses:b}=ew(e);function w(t,n){if(!e.sticky&&!e.fixedHeader&&!t.fixed)return;const a="string"==typeof t.fixed?t.fixed:t.fixed?"start":"none";return{position:"sticky",left:"start"===a?he(t.fixedOffset):void 0,right:"end"===a?he(t.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${n})`:void 0}}function I(t){const n=c.value.find(e=>e.key===t.key);return n?"asc"===n.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:S,backgroundColorStyles:C}=ab(()=>e.color),{displayClasses:k,mobile:E}=pt(e),x=o(()=>({headers:y.value,columns:g.value,toggleSort:u,isSorted:d,sortBy:c.value,someSelected:p.value,allSelected:f.value,selectAll:v,getSortIcon:I})),T=o(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},k.value,b.value]),A=t=>{let{column:a,x:o,y:g}=t;const y="data-table-select"===a.key||"data-table-expand"===a.key,b=h(e.headerProps??{},a.headerProps??{});return r(CC,h({tag:"th",align:a.align,class:[{"v-data-table__th--sortable":a.sortable&&!e.disableSort,"v-data-table__th--sorted":d(a),"v-data-table__th--fixed":a.fixed},...T.value],style:{width:he(a.width),minWidth:he(a.minWidth),maxWidth:he(a.maxWidth),...w(a,g)},colspan:a.colspan,rowspan:a.rowspan,fixed:a.fixed,nowrap:a.nowrap,lastFixed:a.lastFixed,firstFixedEnd:a.firstFixedEnd,noPadding:y,tabindex:a.sortable?0:void 0,onClick:a.sortable?()=>u(a):void 0,onKeydown:a.sortable?t=>function(t,n){"Enter"!==t.key||e.disableSort||u(n)}(t,a):void 0},b),{default:()=>{var t;const o=`header.${a.key}`,h={column:a,selectAll:v,isSorted:d,toggleSort:u,sortBy:c.value,someSelected:p.value,allSelected:f.value,getSortIcon:I};return n[o]?n[o](h):"data-table-select"===a.key?(null==(t=n["header.data-table-select"])?void 0:t.call(n,h))??(m.value&&r(II,{modelValue:f.value,indeterminate:p.value&&!f.value,"onUpdate:modelValue":v},null)):l("div",{class:"v-data-table-header__content"},[l("span",null,[a.title]),a.sortable&&!e.disableSort&&r(ub,{key:"icon",class:"v-data-table-header__sort-icon",icon:I(a)},null),e.multiSort&&d(a)&&l("div",{key:"badge",class:s(["v-data-table-header__sort-badge",...S.value]),style:i(C.value)},[c.value.findIndex(e=>e.key===a.key)+1])])}})},N=()=>{const t=o(()=>g.value.filter(t=>(null==t?void 0:t.sortable)&&!e.disableSort)),n=o(()=>{if(null!=g.value.find(e=>"data-table-select"===e.key))return f.value?"$checkboxOn":p.value?"$checkboxIndeterminate":"$checkboxOff"});return r(CC,h({tag:"th",class:[...T.value],colspan:y.value.length+1},e.headerProps),{default:()=>[l("div",{class:"v-data-table-header__content"},[r(fS,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:t.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>c.value=[],appendIcon:n.value,"onClick:append":()=>v(!f.value)},{chip:e=>{var t;return r(WI,{onClick:(null==(t=e.item.raw)?void 0:t.sortable)?()=>u(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,r(ub,{class:s(["v-data-table__td-sort-icon",d(e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:I(e.item.raw),size:"small"},null)]})}})])]})};ve(()=>E.value?l("tr",null,[r(N,null,null)]):l(_,null,[n.headers?n.headers(x.value):y.value.map((e,t)=>l("tr",null,[e.map((e,n)=>r(A,{column:e,x:n,y:t},null))])),e.loading&&l("tr",{class:"v-data-table-progress"},[l("th",{colspan:g.value.length},[r(tw,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"==typeof e.loading?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),ek=ae({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),tk=Symbol.for("vuetify:data-table-group");function nk(e){return{groupBy:ke(e,"groupBy")}}function ak(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=f(new Set);function i(e){return r.value.has(e.id)}const s={sortByWithGroups:o(()=>n.value.map(e=>({...e,order:e.order??!1})).concat((null==t?void 0:t.value)?[]:a.value)),toggleGroup:function(e){const t=new Set(r.value);i(e)?t.delete(e.id):t.add(e.id),r.value=t},opened:r,groupBy:n,extractRows:function(e){return function e(t){const n=[];for(const a of t.items)"type"in a&&"group"===a.type?n.push(...e(a)):n.push(a);return[...new Set(n)]}({items:e})},isGroupOpen:i};return x(tk,s),s}function rk(){const e=T(tk);if(!e)throw new Error("Missing group!");return e}function ik(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const r=function(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const e=Rt(a.raw,t);n.has(e)||n.set(e,[]),n.get(e).push(a)}return n}(e,t[0]),i=[],s=t.slice(1);return r.forEach((e,r)=>{const o=t[0],l=`${a}_${o}_${r}`;i.push({depth:n,id:l,key:o,value:r,items:s.length?ik(e,s,n+1,l):e,type:"group"})}),i}function sk(e,t){const n=[];for(const a of e)"type"in a&&"group"===a.type?(null!=a.value&&n.push(a),(t.has(a.id)||null==a.value)&&n.push(...sk(a.items,t))):n.push(a);return n}function ok(e,t,n){return{flatItems:o(()=>{if(!t.value.length)return e.value;return sk(ik(e.value,t.value.map(e=>e.key)),n.value)})}}const lk=ae({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),uk=ne()({name:"VDataTableGroupHeaderRow",props:lk(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:i,extractRows:s}=rk(),{isSelected:u,isSomeSelected:c,select:d}=HC(),{columns:h}=FC(),p=o(()=>s([e.item]));return()=>l("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[h.value.map(t=>{var s,o;if("data-table-group"===t.key){const t=a(e.item)?"$expand":"$next",o=()=>i(e.item);return(null==(s=n["data-table-group"])?void 0:s.call(n,{item:e.item,count:p.value.length,props:{icon:t,onClick:o}}))??r(CC,{class:"v-data-table-group-header-row__column"},{default:()=>[r(Ew,{size:"small",variant:"text",icon:t,onClick:o},null),l("span",null,[e.item.value]),l("span",null,[z("("),p.value.length,z(")")])]})}if("data-table-select"===t.key){const e=u(p.value),t=c(p.value)&&!e,a=e=>d(p.value,e);return(null==(o=n["data-table-select"])?void 0:o.call(n,{props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":a}}))??l("td",null,[r(II,{modelValue:e,indeterminate:t,"onUpdate:modelValue":a},null)])}return l("td",null,null)})])}}),ck=ae({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),dk=Symbol.for("vuetify:datatable:expanded");function hk(e){const t=b(()=>e.expandOnClick),n=ke(e,"expanded",e.expanded,e=>new Set(e),e=>[...e.values()]);function a(e,t){const a=new Set(n.value);t?a.add(e.value):a.delete(e.value),n.value=a}function r(e){return n.value.has(e.value)}const i={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:function(e){a(e,!r(e))}};return x(dk,i),i}function pk(){const e=T(dk);if(!e)throw new Error("foo");return e}const fk=ae({index:Number,item:Object,cellProps:[Object,Function],onClick:qe(),onContextmenu:qe(),onDblclick:qe(),...St()},"VDataTableRow"),vk=ne()({name:"VDataTableRow",props:fk(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:i}=pt(e,"v-data-table__tr"),{isSelected:o,toggleSelect:u,someSelected:c,allSelected:d,selectAll:p}=HC(),{isExpanded:f,toggleExpand:v}=pk(),{toggleSort:m,sortBy:g,isSorted:y}=YC(),{columns:b}=FC();ve(()=>l("tr",{class:s(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&b.value.map((t,a)=>{const s=e.item,b=`item.${t.key}`,w=`header.${t.key}`,I={index:e.index,item:s.raw,internalItem:s,value:Rt(s.columns,t.key),column:t,isSelected:o,toggleSelect:u,isExpanded:f,toggleExpand:v},S={column:t,selectAll:p,isSorted:y,toggleSort:m,sortBy:g.value,someSelected:c.value,allSelected:d.value,getSortIcon:()=>""},C="function"==typeof e.cellProps?e.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value,column:t}):e.cellProps,k="function"==typeof t.cellProps?t.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value}):t.cellProps;return r(CC,h({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,fixedEndOffset:t.fixedEndOffset,lastFixed:t.lastFixed,firstFixedEnd:t.firstFixedEnd,maxWidth:i.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:i.value?void 0:t.width},C,k),{default:()=>{var a,c,d,h;if("data-table-select"===t.key)return(null==(a=n["item.data-table-select"])?void 0:a.call(n,{...I,props:{disabled:!s.selectable,modelValue:o([s]),onClick:X(()=>u(s),["stop"])}}))??r(II,{disabled:!s.selectable,modelValue:o([s]),onClick:X(t=>u(s,e.index,t),["stop"])},null);if("data-table-expand"===t.key)return(null==(c=n["item.data-table-expand"])?void 0:c.call(n,{...I,props:{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:X(()=>v(s),["stop"])}}))??r(Ew,{icon:f(s)?"$collapse":"$expand",size:"small",variant:"text",onClick:X(()=>v(s),["stop"])},null);if(n[b]&&!i.value)return n[b](I);const p=P(I.value);return i.value?l(_,null,[l("div",{class:"v-data-table__td-title"},[(null==(d=n[w])?void 0:d.call(n,S))??t.title]),l("div",{class:"v-data-table__td-value"},[(null==(h=n[b])?void 0:h.call(n,I))??p])]):p}})})]))}}),mk=ae({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...St()},"VDataTableRows"),gk=ne()({name:"VDataTableRows",inheritAttrs:!1,props:mk(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:i}=FC(),{expandOnClick:s,toggleExpand:o,isExpanded:u}=pk(),{isSelected:c,toggleSelect:d}=HC(),{toggleGroup:p,isGroupOpen:f}=rk(),{t:v}=wt(),{mobile:m}=pt(e);return ve(()=>{var t,g;return!e.loading||e.items.length&&!a.loading?e.loading||e.items.length||e.hideNoData?l(_,null,[e.items.map((t,v)=>{var g;if("group"===t.type){const e={index:v,item:t,columns:i.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d,toggleGroup:p,isGroupOpen:f};return a["group-header"]?a["group-header"](e):r(uk,h({key:`group-header_${t.id}`,item:t},Ot(n,":group-header",()=>e)),a)}const y={index:v,item:t.raw,internalItem:t,columns:i.value,isExpanded:u,toggleExpand:o,isSelected:c,toggleSelect:d},b={...y,props:h({key:`item_${t.key??t.index}`,onClick:s.value?()=>{o(t)}:void 0,index:v,item:t,cellProps:e.cellProps,mobile:m.value},Ot(n,":row",()=>y),"function"==typeof e.rowProps?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return l(_,{key:b.props.key},[a.item?a.item(b):r(vk,b.props,a),u(t)&&(null==(g=a["expanded-row"])?void 0:g.call(a,y))])})]):l("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[l("td",{colspan:i.value.length},[(null==(g=a["no-data"])?void 0:g.call(a))??v(e.noDataText)])]):l("tr",{class:"v-data-table-rows-loading",key:"loading"},[l("td",{colspan:i.value.length},[(null==(t=a.loading)?void 0:t.call(a))??v(e.loadingText)])])}),{}}}),yk=ae({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...ye(),...kb(),...ob(),...ge()},"VTable"),bk=ne()({name:"VTable",props:yk(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:o}=Ce(e),{densityClasses:u}=Eb(e);return ve(()=>{const t={VCheckboxBtn:{density:e.density}};return r(e.tag,{class:s(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},o.value,u.value,e.class]),style:i(e.style)},{default:()=>{var a,i;return[null==(a=n.top)?void 0:a.call(n),r(eb,{defaults:t},{default:()=>{var t;return[n.default?l("div",{class:"v-table__wrapper",style:{height:he(e.height)}},[l("table",null,[n.default()])]):null==(t=n.wrapper)?void 0:t.call(n)]}}),null==(i=n.bottom)?void 0:i.call(n)]}})}),{}}}),wk=ae({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function _k(e,t,n){return t.map((t,a)=>function(e,t,n,a){const r=e.returnObject?t:Ge(t,e.itemValue),i=Ge(t,e.itemSelectable,!0),s=a.reduce((e,n)=>(null!=n.key&&(e[n.key]=Ge(t,n.value)),e),{});return{type:"item",key:e.returnObject?Ge(t,e.itemValue):r,index:n,value:r,selectable:i,columns:s,raw:t}}(e,t,a,n))}function Ik(e,t){return{items:o(()=>_k(e,e.items,t.value))}}function Sk(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:i}=e;const s=Se("VDataTable");let o=null;v(()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:i.value}),e=>{Ee(o,e)||(o&&o.search!==e.search&&(t.value=1),s.emit("update:options",e),o=e)},{deep:!0,immediate:!0})}const Ck=ae({...mk(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ck(),...ek(),...kC(),...wk(),...jC(),...KC(),...JC(),...yk()},"DataTable"),kk=ae({...wC(),...Ck(),...CS(),...IC()},"VDataTable");ne()({name:"VDataTable",props:kk(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(t,n){let{attrs:a,slots:i}=n;const{groupBy:s}=nk(t),{sortBy:u,multiSort:c,mustSort:d}=WC(t),{page:p,itemsPerPage:f}=function(e){return{page:ke(e,"page",void 0,e=>Number(e??1)),itemsPerPage:ke(e,"itemsPerPage",void 0,e=>Number(e??10))}}(t),{disableSort:m}=e(t),{columns:g,headers:y,sortFunctions:w,sortRawFunctions:I,filterFunctions:S}=LC(t,{groupBy:s,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:C}=Ik(t,g),k=b(()=>t.search),{filteredItems:E}=kS(t,C,k,{transform:e=>e.columns,customKeyFilter:S}),{toggleSort:T}=QC({sortBy:u,multiSort:c,mustSort:d,page:p}),{sortByWithGroups:A,opened:N,extractRows:V,isGroupOpen:D,toggleGroup:P}=ak({groupBy:s,sortBy:u,disableSort:m}),{sortedItems:R}=XC(t,E,A,{transform:e=>({...e.raw,...e.columns}),sortFunctions:w,sortRawFunctions:I}),{flatItems:M}=ok(R,s,N),O=o(()=>M.value.length),{startIndex:L,stopIndex:F,pageCount:B,setItemsPerPage:U}=function(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=o(()=>-1===n.value?0:n.value*(t.value-1)),i=o(()=>-1===n.value?a.value:Math.min(a.value,r.value+n.value)),s=o(()=>-1===n.value||0===a.value?1:Math.ceil(a.value/n.value));v([t,s],()=>{t.value>s.value&&(t.value=s.value)});const l={page:t,itemsPerPage:n,startIndex:r,stopIndex:i,pageCount:s,itemsLength:a,nextPage:function(){t.value=Ne(t.value+1,1,s.value)},prevPage:function(){t.value=Ne(t.value-1,1,s.value)},setPage:function(e){t.value=Ne(e,1,s.value)},setItemsPerPage:function(e){n.value=e,t.value=1}};return x(_C,l),l}({page:p,itemsPerPage:f,itemsLength:O}),{paginatedItems:$}=function(e){const t=Se("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:i}=e,s=o(()=>i.value<=0?n.value:n.value.slice(a.value,r.value));return v(s,e=>{t.emit("update:currentItems",e)},{immediate:!0}),{paginatedItems:s}}({items:M,startIndex:L,stopIndex:F,itemsPerPage:f}),j=o(()=>V($.value)),{isSelected:z,select:q,selectAll:H,toggleSelect:K,someSelected:G,allSelected:W}=qC(t,{allItems:C,currentPage:j}),{isExpanded:Q,toggleExpand:Y}=hk(t);Sk({page:p,itemsPerPage:f,sortBy:u,groupBy:s,search:k}),re({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const X=o(()=>({page:p.value,itemsPerPage:f.value,sortBy:u.value,pageCount:B.value,toggleSort:T,setItemsPerPage:U,someSelected:G.value,allSelected:W.value,isSelected:z,select:q,selectAll:H,toggleSelect:K,isExpanded:Q,toggleExpand:Y,isGroupOpen:D,toggleGroup:P,items:j.value.map(e=>e.raw),internalItems:j.value,groupedItems:$.value,columns:g.value,headers:y.value}));return ve(()=>{const e=SC.filterProps(t),n=ZC.filterProps(t),s=gk.filterProps(t),o=bk.filterProps(t);return r(bk,h({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},o,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=i.top)?void 0:e.call(i,X.value)},default:()=>{var e,o,u,c,d,p;return i.default?i.default(X.value):l(_,null,[null==(e=i.colgroup)?void 0:e.call(i,X.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[r(ZC,n,i)]),null==(o=i.thead)?void 0:o.call(i,X.value),!t.hideDefaultBody&&l("tbody",null,[null==(u=i["body.prepend"])?void 0:u.call(i,X.value),i.body?i.body(X.value):r(gk,h(a,s,{items:$.value}),i),null==(c=i["body.append"])?void 0:c.call(i,X.value)]),null==(d=i.tbody)?void 0:d.call(i,X.value),null==(p=i.tfoot)?void 0:p.call(i,X.value)])},bottom:()=>i.bottom?i.bottom(X.value):!t.hideDefaultFooter&&l(_,null,[r(Tw,null,null),r(SC,e,{prepend:i["footer.prepend"]})])})}),{}}});const Ek=ae({...We(Ck(),["hideDefaultFooter"]),...ek(),...oS(),...CS()},"VDataTableVirtual"),xk=ne()({name:"VDataTableVirtual",props:Ek(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(t,a){let{attrs:i,slots:s}=a;const{groupBy:u}=nk(t),{sortBy:c,multiSort:d,mustSort:p}=WC(t),{disableSort:f}=e(t),{columns:v,headers:m,filterFunctions:g,sortFunctions:y,sortRawFunctions:w}=LC(t,{groupBy:u,showSelect:b(()=>t.showSelect),showExpand:b(()=>t.showExpand)}),{items:_}=Ik(t,v),I=b(()=>t.search),{filteredItems:S}=kS(t,_,I,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:C}=QC({sortBy:c,multiSort:d,mustSort:p}),{sortByWithGroups:k,opened:E,extractRows:x,isGroupOpen:T,toggleGroup:A}=ak({groupBy:u,sortBy:c,disableSort:f}),{sortedItems:N}=XC(t,S,k,{transform:e=>({...e.raw,...e.columns}),sortFunctions:y,sortRawFunctions:w}),{flatItems:V}=ok(N,u,E),D=o(()=>x(V.value)),{isSelected:P,select:R,selectAll:M,toggleSelect:O,someSelected:L,allSelected:F}=qC(t,{allItems:D,currentPage:D}),{isExpanded:B,toggleExpand:U}=hk(t),{containerRef:$,markerRef:j,paddingTop:z,paddingBottom:q,computedItems:H,handleItemResize:K,handleScroll:G,handleScrollend:W,calculateVisibleItems:Q,scrollToIndex:Y}=lS(t,V),X=o(()=>H.value.map(e=>e.raw));Sk({sortBy:c,page:n(1),itemsPerPage:n(-1),groupBy:u,search:I}),re({VDataTableRows:{hideNoData:b(()=>t.hideNoData),noDataText:b(()=>t.noDataText),loading:b(()=>t.loading),loadingText:b(()=>t.loadingText)}});const J=o(()=>({sortBy:c.value,toggleSort:C,someSelected:L.value,allSelected:F.value,isSelected:P,select:R,selectAll:M,toggleSelect:O,isExpanded:B,toggleExpand:U,isGroupOpen:T,toggleGroup:A,items:D.value.map(e=>e.raw),internalItems:D.value,groupedItems:V.value,columns:v.value,headers:m.value}));return ve(()=>{const e=ZC.filterProps(t),n=gk.filterProps(t),a=bk.filterProps(t);return r(bk,h({class:["v-data-table",{"v-data-table--loading":t.loading},t.class],style:t.style},a,{fixedHeader:t.fixedHeader||t.sticky}),{top:()=>{var e;return null==(e=s.top)?void 0:e.call(s,J.value)},wrapper:()=>{var a,o,u,c,d,p;return l("div",{ref:$,onScrollPassive:G,onScrollend:W,class:"v-table__wrapper",style:{height:he(t.height)}},[l("table",null,[null==(a=s.colgroup)?void 0:a.call(s,J.value),!t.hideDefaultHeader&&l("thead",{key:"thead"},[r(ZC,e,s)]),null==(o=s.thead)?void 0:o.call(s,J.value),!t.hideDefaultBody&&l("tbody",{key:"tbody"},[l("tr",{ref:j,style:{height:he(z.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)]),null==(u=s["body.prepend"])?void 0:u.call(s,J.value),r(gk,h(i,n,{items:X.value}),{...s,item:e=>r(sS,{key:e.internalItem.index,renderless:!0,"onUpdate:height":t=>K(e.internalItem.index,t)},{default:t=>{var n;let{itemRef:a}=t;return(null==(n=s.item)?void 0:n.call(s,{...e,itemRef:a}))??r(vk,h(e.props,{ref:a,key:e.internalItem.index,index:e.internalItem.index}),s)}})}),null==(c=s["body.append"])?void 0:c.call(s,J.value),l("tr",{style:{height:he(q.value),border:0}},[l("td",{colspan:v.value.length,style:{height:0,border:0}},null)])]),null==(d=s.tbody)?void 0:d.call(s,J.value),null==(p=s.tfoot)?void 0:p.call(s,J.value)])])},bottom:()=>{var e;return null==(e=s.bottom)?void 0:e.call(s,J.value)}})}),{calculateVisibleItems:Q,scrollToIndex:Y}}}),Tk=Symbol.for("vuetify:v-expansion-panel"),Ak=ae({...ye(),...K_()},"VExpansionPanelText"),Nk=ne()({name:"VExpansionPanelText",props:Ak(),setup(e,t){let{slots:n}=t;const a=T(Tk);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:o,onAfterLeave:u}=G_(e,a.isSelected);return ve(()=>r(Uw,{onAfterLeave:u},{default:()=>{var t;return[w(l("div",{class:s(["v-expansion-panel-text",e.class]),style:i(e.style)},[n.default&&o.value&&l("div",{class:"v-expansion-panel-text__wrapper"},[null==(t=n.default)?void 0:t.call(n)])]),[[I,a.isSelected.value]])]}})),{}}}),Vk=ae({color:String,expandIcon:{type:be,default:"$expand"},collapseIcon:{type:be,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...ye(),...cb()},"VExpansionPanelTitle"),Dk=ne()({name:"VExpansionPanelTitle",directives:{vRipple:Cw},props:Vk(),setup(e,t){let{slots:n}=t;const a=T(Tk);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:c}=ab(()=>e.color),{dimensionStyles:d}=db(e),h=o(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),p=b(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return ve(()=>{var t;return w(l("button",{class:s(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class]),style:i([c.value,d.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[l("span",{class:"v-expansion-panel-title__overlay"},null),null==(t=n.default)?void 0:t.call(n,h.value),!e.hideActions&&r(eb,{defaults:{VIcon:{icon:p.value}}},{default:()=>{var e;return[l("span",{class:"v-expansion-panel-title__icon"},[(null==(e=n.actions)?void 0:e.call(n,h.value))??r(ub,null,null)])]}})]),[[Cw,e.ripple]])}),{}}}),Pk=ae({title:String,text:String,bgColor:String,...Pb(),...Fb(),...fb(),...ob(),...Vk(),...Ak()},"VExpansionPanel"),Rk=ne()({name:"VExpansionPanel",props:Pk(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Bb(e,Tk),{backgroundColorClasses:u,backgroundColorStyles:c}=ab(()=>e.bgColor),{elevationClasses:d}=Rb(e),{roundedClasses:h}=vb(e),p=b(()=>(null==a?void 0:a.disabled.value)||e.disabled),f=o(()=>a.group.items.value.reduce((e,t,n)=>(a.group.selected.value.includes(t.id)&&e.push(n),e),[])),v=o(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&f.value.some(t=>t-e===1)}),m=o(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&f.value.some(t=>t-e===-1)});return x(Tk,a),ve(()=>{const t=!(!n.text&&!e.text),o=!(!n.title&&!e.title),f=Dk.filterProps(e),g=Nk.filterProps(e);return r(e.tag,{class:s(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":m.value,"v-expansion-panel--disabled":p.value},h.value,u.value,e.class]),style:i([c.value,e.style])},{default:()=>[l("div",{class:s(["v-expansion-panel__shadow",...d.value])},null),r(eb,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...g}}},{default:()=>{var a;return[o&&r(Dk,{key:"title"},{default:()=>[n.title?n.title():e.title]}),t&&r(Nk,{key:"text"},{default:()=>[n.text?n.text():e.text]}),null==(a=n.default)?void 0:a.call(n)]}})]})}),{groupItem:a}}}),Mk=["default","accordion","inset","popout"],Ok=ae({flat:Boolean,...Lb(),...Ke(Pk(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ge(),...ye(),...ob(),variant:{type:String,default:"default",validator:e=>Mk.includes(e)}},"VExpansionPanels"),Lk=ne()({name:"VExpansionPanels",props:Ok(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:o}=Ub(e,Tk),{themeClasses:l}=Ce(e),u=b(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return re({VExpansionPanel:{bgColor:b(()=>e.bgColor),collapseIcon:b(()=>e.collapseIcon),color:b(()=>e.color),eager:b(()=>e.eager),elevation:b(()=>e.elevation),expandIcon:b(()=>e.expandIcon),focusable:b(()=>e.focusable),hideActions:b(()=>e.hideActions),readonly:b(()=>e.readonly),ripple:b(()=>e.ripple),rounded:b(()=>e.rounded),static:b(()=>e.static)}}),ve(()=>r(e.tag,{class:s(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},l.value,u.value,e.class]),style:i(e.style)},{default:()=>{var e;return[null==(e=n.default)?void 0:e.call(n,{prev:o,next:a})]}})),{next:a,prev:o}}}),Fk=ae({id:String,interactive:Boolean,text:String,...We(aI({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),Bk=ne()({name:"VTooltip",props:Fk(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ke(e,"modelValue"),{scopeId:i}=W_(),s=E(),l=b(()=>e.id||`v-tooltip-${s}`),u=f(),c=o(()=>e.location.split(" ").length>1?e.location:e.location+" center"),d=o(()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=b(()=>null!=e.transition?e.transition:a.value?"scale-transition":"fade-transition"),v=o(()=>h({"aria-describedby":l.value},e.activatorProps));return ve(()=>{const t=rI.filterProps(e);return r(rI,h({ref:u,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,transition:p.value,absolute:!0,location:c.value,origin:d.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},i),{activator:n.activator,default:function(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(null==(t=n.default)?void 0:t.call(n,...r))??e.text}})}),oI({},u)}}),Uk={class:"pa-6"},$k={class:"d-flex align-center mb-6"},jk={class:"d-flex align-center mb-3"},zk={class:"d-flex justify-space-between align-center"},qk={class:"d-flex align-center"},Hk={class:"text-body-1 font-weight-medium"},Kk={class:"d-flex align-center"},Gk={class:"text-caption text-white font-weight-bold"},Wk={class:"font-weight-medium"},Qk={class:"text-caption"},Yk=["onClick"],Xk=["innerHTML"],Jk=["innerHTML"],Zk=["onClick"],eE=["innerHTML"],tE=["innerHTML"],nE=Jy({__name:"ViewAllCharactersTab",props:{dataLoaded:{type:Boolean,required:!0},accounts:{type:Array,required:!0},characterMasters:{type:Array,required:!0},itemMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0},ownedCountMap:{type:Map,required:!0},ownedCharactersData:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0}},emits:["items-updated"],setup(e,{emit:t}){const n=e,a=t,i=f(!1),u=f(!1),c=f(null),d=f(null),p=S({charSearch:"",element:[],itemSearch:[],type:[],gachaSearch:[],totalOwnership:[],account:"",ownership:"",columnFilter:[]}),v=o(()=>Array.from(new Set(n.characterMasters.map(e=>e.type).filter(Boolean))).sort()),m=o(()=>{const e=[{title:"図鑑No.",key:"indexNumber",align:"center",sortable:!0,width:80},{title:"キャラ名",key:"monsterName",align:"start",sortable:!0,width:200}];return i.value&&e.push({title:"属性",key:"element",align:"center",sortable:!0,width:100},{title:"分類",key:"type",align:"center",sortable:!0,width:100},{title:"排出ガチャ",key:"ejectionGacha",align:"center",sortable:!0,width:100}),n.accounts.forEach(t=>{var n;const a=t.indexNumber||(null==(n=t.name.match(/\d+/))?void 0:n[0])||t.id;e.push({title:`${a}-1`,key:`account_${t.id}_1`,align:"center",sortable:!1,width:78},{title:`${a}-2`,key:`account_${t.id}_2`,align:"center",sortable:!1,width:78})}),e}),g=o(()=>{if(!n.dataLoaded)return[];const{charSearch:e,element:t,itemSearch:a,type:r,gachaSearch:i,totalOwnership:s,account:o,ownership:l,columnFilter:u}=p,c=e.toLowerCase(),d=a.map(e=>Number(e));return n.characterMasters.filter(e=>{if(c&&!e.monsterName.toLowerCase().includes(c)&&!(e.indexNumber+"").includes(c))return!1;if(t.length>0&&!t.includes(e.element))return!1;if(r.length>0){let t=!1;for(const n of r)if("恒常_or_限定"===n){if("恒常"===e.type||"限定"===e.type){t=!0;break}}else if(e.type===n){t=!0;break}if(!t)return!1}if(i.length>0&&!i.includes(e.ejectionGacha||""))return!1;if(d.length>0){let t=!1;const a=o||null;for(const r of d)if(a){if((n.ownedCharactersData.get(a)||[]).some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===r))})){t=!0;break}}else{let a=!1;for(const t of n.ownedCharactersData.values())if(t.some(t=>{var n;return t.characterMasterId===e.id&&(null==(n=t.items)?void 0:n.some(e=>Number(e)===r))})){a=!0;break}if(a){t=!0;break}}if(!t)return!1}if(s&&s.length>0){const t=n.accounts.reduce((t,n)=>t+y(e.id,n.id),0);let a=!1;for(const r of s){if("all_unowned"===r&&0===t){a=!0;break}if("one_total"===r&&1===t){a=!0;break}if("two_total"===r&&2===t){a=!0;break}if("three_total"===r&&3===t){a=!0;break}if("four_total"===r&&4===t){a=!0;break}if("five_or_more"===r&&t>=5){a=!0;break}if("one_in_each"===r&&n.accounts.every(t=>y(e.id,t.id)>=1)){a=!0;break}}if(!a)return!1}if(o&&l){const t=y(e.id,o);if("owned"===l&&0===t)return!1;if("unowned"===l&&t>0)return!1;if("one"===l&&1!==t)return!1;if("two"===l&&2!==t)return!1}if(u&&u.length>0){let t=!1;for(const a of u){let r=!1;for(const t of n.accounts){const i=(n.ownedCharactersData.get(t.id)||[]).filter(t=>t.characterMasterId===e.id);if("has_zero_item_character"===a&&i.some(e=>!e.items||0===e.items.length)){r=!0;break}if("has_one_item_character"===a&&i.some(e=>e.items&&1===e.items.length)){r=!0;break}if("has_two_item_character"===a&&i.some(e=>e.items&&2===e.items.length)){r=!0;break}if("has_three_item_character"===a&&i.some(e=>e.items&&3===e.items.length)){r=!0;break}if("has_virtual_item_character"===a&&i.some(e=>(e.items||[]).some(e=>"object"==typeof e&&!0===e.isVirtual))){r=!0;break}}if(r){t=!0;break}}if(!t)return!1}return!0})}),y=(e,t)=>n.ownedCountMap.get(`${e}-${t}`)||0,b=(e,t,a)=>{const r=(n.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);if(!r||r.length<=a)return"—";const i=(r[a].items||[]).map(e=>{const t="object"==typeof e?e.itemId:e,a="object"==typeof e&&e.isVirtual,r=n.itemMastersMap.get(Number(t));return r?a?`<span class="virtual-item item-name">${r}</span>`:`<span class="item-name">${r}</span>`:null}).filter(Boolean).join("<br>");return i?`✔️<br>${i}`:"✔️"},w=(e,t,a)=>{const r=(n.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);if(!r||r.length<=a)return"未所持";return(r[a].items||[]).map(e=>{const t="object"==typeof e?e.itemId:e,a=("object"==typeof e&&e.isVirtual,n.itemMastersMap.get(Number(t)));return a||null}).filter(Boolean).join("<br>")||"アイテムなし"},_=(e,t,n)=>y(e,t)>=n?"status-owned":"status-unowned",I=e=>({"火":"red","水":"blue","木":"green","光":"amber","闇":"deep-purple"}[e]||"grey"),C=()=>{Object.assign(p,{charSearch:"",element:[],itemSearch:[],type:[],gachaSearch:[],totalOwnership:[],account:"",ownership:"",columnFilter:[]})},k=(e,t,a)=>{const r=(n.ownedCharactersData.get(t)||[]).filter(t=>t.characterMasterId===e);!r||r.length<=a||(c.value=r[a],d.value=t,u.value=!0)},E=async({character:e,items:t})=>{a("items-updated",{accountId:d.value,ownedCharacterId:e.id,items:t})};return(t,n)=>{const a=J("v-subheader");return $(),U("div",Uk,[l("div",$k,[r(ub,{icon:"mdi-account-multiple",size:"28",color:"primary",class:"mr-3"}),n[11]||(n[11]=l("h2",{class:"text-h5 font-weight-medium text-primary"},"所持状況一覧",-1))]),r(LS,{class:"mb-6 minimal-filter-card"},{default:j(()=>[r(VS,{class:"minimal-card-title pa-4"},{default:j(()=>[r(ub,{icon:"mdi-filter-variant",class:"mr-2",size:"20"}),n[12]||(n[12]=z(" フィルターとオプション ",-1))]),_:1,__:[12]}),r(Lk,null,{default:j(()=>[r(Rk,null,{default:j(()=>[r(Dk,{class:"pa-4 minimal-panel-title"},{default:j(()=>[r(ub,{start:"",icon:"mdi-filter-variant",color:"primary",size:"20"}),n[13]||(n[13]=l("span",{class:"text-body-1 font-weight-medium"},"詳細フィルターを開く",-1))]),_:1,__:[13]}),r(Nk,{class:"pa-6"},{default:j(()=>[r($S,null,{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12",md:"4"},{default:j(()=>[r(rS,{modelValue:p.charSearch,"onUpdate:modelValue":n[0]||(n[0]=e=>p.charSearch=e),modelModifiers:{lazy:!0},label:"キャラクター名 or 図鑑番号",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-search",class:"minimal-input"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[r(fS,{modelValue:p.element,"onUpdate:modelValue":n[1]||(n[1]=e=>p.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-fire",class:"minimal-select",multiple:""},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[r(fS,{modelValue:p.itemSearch,"onUpdate:modelValue":n[2]||(n[2]=e=>p.itemSearch=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム名",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-sword-cross",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[r(fS,{modelValue:p.type,"onUpdate:modelValue":n[3]||(n[3]=e=>p.type=e),items:["恒常_or_限定",...v.value],label:"分類 (Type)",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-tag",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[r(fS,{modelValue:p.gachaSearch,"onUpdate:modelValue":n[4]||(n[4]=e=>p.gachaSearch=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-gift",class:"minimal-select",multiple:""},null,8,["modelValue","items"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[r(fS,{modelValue:p.totalOwnership,"onUpdate:modelValue":n[5]||(n[5]=e=>p.totalOwnership=e),items:[{value:"all_unowned",title:"未所持"},{value:"one_total",title:"合計1体"},{value:"two_total",title:"合計2体"},{value:"three_total",title:"合計3体"},{value:"four_total",title:"合計4体"},{value:"five_or_more",title:"合計それ以上（5体以上）"},{value:"one_in_each",title:"各アカウントで1体以上所持"}],multiple:"",label:"全体の所持状況",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-account-group",class:"minimal-select"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:p.columnFilter,"onUpdate:modelValue":n[6]||(n[6]=e=>p.columnFilter=e),items:[{value:"has_zero_item_character",title:"アイテム0つ所持キャラが居る列"},{value:"has_one_item_character",title:"アイテム1つ所持キャラが居る列"},{value:"has_two_item_character",title:"アイテム2つ所持キャラが居る列"},{value:"has_three_item_character",title:"アイテム3つ所持キャラが居る列"},{value:"has_virtual_item_character",title:"仮想アイテム所持キャラが居る列"}],multiple:"",label:"列単位での絞り込み",variant:"outlined",density:"compact",clearable:"",color:"primary","prepend-inner-icon":"mdi-view-column",class:"minimal-select"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12"},{default:j(()=>[r(Tw,{class:"my-4 minimal-divider"}),l("div",jk,[r(ub,{icon:"mdi-account",color:"secondary",class:"mr-2",size:"20"}),r(a,{class:"text-body-1 font-weight-medium"},{default:j(()=>n[14]||(n[14]=[z("単一アカウントでの絞り込み",-1)])),_:1,__:[14]})])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:p.account,"onUpdate:modelValue":n[7]||(n[7]=e=>p.account=e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-account",class:"minimal-select"},null,8,["modelValue","items"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:p.ownership,"onUpdate:modelValue":n[8]||(n[8]=e=>p.ownership=e),items:[{value:"owned",title:"所持"},{value:"unowned",title:"未所持"},{value:"one",title:"1体所持"},{value:"two",title:"2体所持"}],label:"所持状況 (指定アカウント内)",variant:"outlined",density:"compact",clearable:"",color:"secondary","prepend-inner-icon":"mdi-check-circle",class:"minimal-select"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(TS,{class:"pa-4 minimal-actions"},{default:j(()=>[r(Ew,{onClick:n[9]||(n[9]=e=>i.value=!i.value),variant:"outlined",color:"info","prepend-icon":"mdi-eye",class:"minimal-button"},{default:j(()=>[z(P(i.value?"詳細を非表示":"詳細を表示"),1)]),_:1}),r(pC),r(Ew,{onClick:C,color:"secondary",variant:"outlined","prepend-icon":"mdi-refresh",class:"minimal-button"},{default:j(()=>n[15]||(n[15]=[z(" リセット ",-1)])),_:1,__:[15]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(LS,{class:"mb-4 minimal-stats-card"},{default:j(()=>[r(MS,{class:"pa-4"},{default:j(()=>[l("div",zk,[l("div",qk,[r(ub,{icon:"mdi-chart-bar",color:"primary",class:"mr-2",size:"20"}),l("span",Hk,"表示件数: "+P(g.value.length)+" / "+P(e.characterMasters.length),1)]),r(WI,{color:g.value.length===e.characterMasters.length?"success":"warning",variant:"outlined",class:"minimal-chip"},{default:j(()=>[z(P(g.value.length===e.characterMasters.length?"全件表示":"フィルター適用中"),1)]),_:1},8,["color"])])]),_:1})]),_:1}),r(LS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-table",class:"mr-2"}),n[16]||(n[16]=z(" キャラクター所持状況 ",-1))]),_:1,__:[16]}),r(MS,{class:"pa-0"},{default:j(()=>[r(xk,{items:g.value,headers:m.value,loading:!e.dataLoaded,height:"70vh",density:"compact","fixed-header":"",class:"table-fixed","fixed-columns":!0},Z({"item.monsterName":j(({item:e})=>[l("div",Kk,[r(Db,{size:"32",color:I(e.element),class:"mr-3"},{default:j(()=>[l("span",Gk,P(e.element||"?"),1)]),_:2},1032,["color"]),l("span",Wk,P(e.monsterName||"—"),1)])]),"item.element":j(({item:e})=>[r(WI,{color:I(e.element),variant:"tonal",size:"small"},{default:j(()=>[z(P(e.element||"—"),1)]),_:2},1032,["color"])]),"item.type":j(({item:e})=>{return[r(WI,{color:(t=e.type,{"恒常":"success","限定":"warning","コラボ":"info","イベント":"secondary"}[t]||"grey"),variant:"tonal",size:"small"},{default:j(()=>[z(P(e.type||"—"),1)]),_:2},1032,["color"])];var t}),"item.ejectionGacha":j(({item:e})=>[l("span",Qk,P(e.ejectionGacha||"—"),1)]),_:2},[Q(e.accounts,e=>({name:`item.account_${e.id}_1`,fn:j(({item:t})=>[l("div",{class:s([[_(t.id,e.id,1),"account-cell"],"text-center"]),onClick:n=>k(t.id,e.id,0),style:{cursor:"pointer"}},[r(Bk,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:b(t.id,e.id,0)}),null,16,Xk)]),default:j(()=>[l("span",{innerHTML:w(t.id,e.id,0)},null,8,Jk)]),_:2},1024)],10,Yk)])})),Q(e.accounts,e=>({name:`item.account_${e.id}_2`,fn:j(({item:t})=>[l("div",{class:s([[_(t.id,e.id,2),"account-cell"],"text-center"]),onClick:n=>k(t.id,e.id,1),style:{cursor:"pointer"}},[r(Bk,{location:"bottom"},{activator:j(({props:n})=>[l("div",h(n,{class:"cell-content",innerHTML:b(t.id,e.id,1)}),null,16,eE)]),default:j(()=>[l("span",{innerHTML:w(t.id,e.id,1)},null,8,tE)]),_:2},1024)],10,Zk)])}))]),1032,["items","headers","loading"])]),_:1})]),_:1}),r(gC,{modelValue:u.value,"onUpdate:modelValue":n[10]||(n[10]=e=>u.value=e),character:c.value,"item-masters":e.itemMasters,"item-masters-map":e.itemMastersMap,"character-masters-map":e.characterMastersMap,onSave:E},null,8,["modelValue","character","item-masters","item-masters-map","character-masters-map"])])}}},[["__scopeId","data-v-387c5318"]]),aE={class:"text-h6"},rE={class:"d-flex align-center w-100"},iE={class:"flex-grow-1 premium-text-content"},sE={class:"d-flex align-center"},oE=Jy({__name:"CharacterSelector",props:{modelValue:{type:[String,null],required:!0},items:{type:Array,required:!0},itemTitle:{type:[String,Function],default:"monsterName"},disabledItems:{type:Array,default:()=>[]},label:{type:String,default:"キャラクター名で検索"},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:"mdi-magnify"},listHeight:{type:[String,Number],default:"400px"},listCardVariant:{type:String,default:"elevated"},noDataText:{type:String,default:"該当するキャラクターがいません"},density:{type:String,default:"comfortable"},listDensity:{type:String,default:"compact"},primaryColor:{type:String,default:"primary"},searchBgColor:{type:String,default:"grey-lighten-5"},cardElevation:{type:[Number,String],default:2},cardBorder:{type:[Boolean,String],default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,i=f(""),u=f(!1),c=o(()=>{if(!i.value)return n.items;const e=i.value.toLowerCase();return n.items.filter(t=>d(t).toLowerCase().includes(e))}),d=e=>"function"==typeof n.itemTitle?n.itemTitle(e):e[n.itemTitle]||"",h=e=>n.modelValue===e.id?n.primaryColor:n.disabledItems.includes(e.id)?"grey-lighten-3":"primary-lighten-5",p=e=>"player"===e.type?"mdi-account":"monster"===e.type?"mdi-dragon":"npc"===e.type?"mdi-account-tie":"mdi-account-circle",v=e=>{const t=e.length>0?e[0]:null;n.modelValue!==t&&a("update:modelValue",t)};return(t,o)=>($(),U(_,null,[r(rS,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e),label:e.label,variant:e.variant,clearable:e.clearable,"prepend-inner-icon":e.prependInnerIcon,disabled:e.disabled,"hide-details":"",class:"mb-4 character-selector-search premium-search",density:e.density,color:e.primaryColor,"bg-color":e.searchBgColor,focused:u.value,onFocus:o[1]||(o[1]=e=>u.value=!0),onBlur:o[2]||(o[2]=e=>u.value=!1)},{"prepend-inner":j(()=>[r(ub,{color:u.value?e.primaryColor:"grey",icon:e.prependInnerIcon,size:"20",class:"search-icon"},null,8,["color","icon"])]),_:1},8,["modelValue","label","variant","clearable","prepend-inner-icon","disabled","density","color","bg-color","focused"]),r(LS,{variant:e.listCardVariant,height:e.listHeight,disabled:e.disabled,class:"character-selector-card premium-card",elevation:e.cardElevation,border:e.cardBorder,style:{display:"flex","flex-direction":"column"}},{default:j(()=>[e.modelValue?($(),q(VS,{key:0,class:"d-flex align-center justify-end pa-4 pb-3 premium-card-header"},{default:j(()=>[r(WI,{size:"small",color:"success",variant:"tonal",class:"premium-chip"},{default:j(()=>o[3]||(o[3]=[z(" 選択中 ",-1)])),_:1,__:[3]})]),_:1})):W("",!0),r(E_,{"model-value":[e.modelValue],"onUpdate:selected":v,class:"character-selector-list premium-list",density:e.listDensity,style:{"overflow-y":"auto","max-height":"calc(100% - 60px)"}},{default:j(()=>[0===c.value.length?($(),q(h_,{key:0,class:"no-data-item premium-no-data"},{default:j(()=>[r(c_,{class:"text-center text-grey-darken-1 py-12"},{default:j(()=>[r(ub,{icon:"mdi-information-outline",size:"64",class:"mb-4 no-data-icon",color:"grey-lighten-1"}),l("div",aE,P(e.noDataText),1)]),_:1})]),_:1})):W("",!0),($(!0),U(_,null,Q(c.value,(i,u)=>($(),q(h_,{key:i.id,value:i.id,disabled:e.disabledItems.includes(i.id),class:s(["character-item premium-item",{"character-item--selected":e.modelValue===i.id,"character-item--disabled":e.disabledItems.includes(i.id)}]),onClick:e=>(e=>{n.disabledItems.includes(e.id)||a("update:modelValue",e.id)})(i)},{default:j(()=>[ee(t.$slots,"item",{item:i},()=>[l("div",rE,[r(Db,{size:"40",class:s(["mr-4 premium-avatar",{"selected-avatar":e.modelValue===i.id}]),color:h(i)},{default:j(()=>[r(ub,{icon:p(i),color:e.modelValue===i.id?"white":"primary",size:"20",class:"avatar-icon"},null,8,["icon","color"])]),_:2},1032,["color","class"]),l("div",iE,[r(c_,{class:s(["font-weight-bold text-h6",{"text-primary":e.modelValue===i.id}])},{default:j(()=>[z(P(d(i)),1)]),_:2},1032,["class"]),i.subtitle?($(),q(u_,{key:0,class:"text-body-2 text-grey-darken-1 mt-1"},{default:j(()=>[z(P(i.subtitle),1)]),_:2},1024)):W("",!0)])])],!0)]),append:j(()=>[l("div",sE,[e.disabledItems.includes(i.id)?($(),q(WI,{key:0,size:"small",color:"warning",variant:"tonal",class:"mr-3 premium-status-chip"},{default:j(()=>o[4]||(o[4]=[z(" 選択済 ",-1)])),_:1,__:[4]})):W("",!0),e.modelValue===i.id?($(),q(ub,{key:1,icon:"mdi-check-circle",color:"success",size:"24",class:"selection-indicator premium-check"})):W("",!0)])]),_:2},1032,["value","disabled","class","onClick"]))),128))]),_:3},8,["model-value","density"])]),_:3},8,["variant","height","disabled","elevation","border"])],64))}},[["__scopeId","data-v-a7887c2a"]]),lE=ae({...ye(),...AI()},"VForm"),uE=ne()({name:"VForm",props:lE(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const o=function(e){const t=ke(e,"modelValue"),a=b(()=>e.disabled),r=b(()=>e.readonly),i=n(!1),s=f([]),o=f([]);return v(s,()=>{let e=0,n=0;const a=[];for(const t of s.value)!1===t.isValid?(n++,a.push({id:t.id,errorMessages:t.errorMessages})):!0===t.isValid&&e++;o.value=a,t.value=!(n>0)&&(e===s.value.length||null)},{deep:!0,flush:"post"}),x(TI,{register:e=>{let{id:t,vm:n,validate:a,reset:r,resetValidation:i}=e;s.value.some(e=>e.id===t),s.value.push({id:t,validate:a,reset:r,resetValidation:i,vm:H(n),isValid:null,errorMessages:[]})},unregister:e=>{s.value=s.value.filter(t=>t.id!==e)},update:(e,t,n)=>{const a=s.value.find(t=>t.id===e);a&&(a.isValid=t,a.errorMessages=n)},isDisabled:a,isReadonly:r,isValidating:i,isValid:t,items:s,validateOn:b(()=>e.validateOn)}),{errors:o,isDisabled:a,isReadonly:r,isValidating:i,isValid:t,items:s,validate:async function(){const t=[];let n=!0;o.value=[],i.value=!0;for(const a of s.value){const r=await a.validate();if(r.length>0&&(n=!1,t.push({id:a.id,errorMessages:r})),!n&&e.fastFail)break}return o.value=t,i.value=!1,{valid:n,errors:o.value}},reset:function(){s.value.forEach(e=>e.reset())},resetValidation:function(){s.value.forEach(e=>e.resetValidation())}}}(e),u=f();function c(e){e.preventDefault(),o.reset()}function d(e){const t=e,n=o.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),r("submit",t),t.defaultPrevented||n.then(e=>{var t;let{valid:n}=e;n&&(null==(t=u.value)||t.submit())}),t.preventDefault()}return ve(()=>{var t;return l("form",{ref:u,class:s(["v-form",e.class]),style:i(e.style),novalidate:!0,onReset:c,onSubmit:d},[null==(t=a.default)?void 0:t.call(a,o)])}),oI(o,u)}}),cE={class:"pa-6"},dE={class:"d-flex align-center mb-6"},hE={class:"mb-4"},pE={class:"d-flex align-center mb-3"},fE={__name:"AddOwnedCharacterTab",props:{characterMasters:{type:Array,required:!0},characterMastersMap:{type:Map,required:!0},selectedAccountId:{type:String,default:null},ownedCountMap:{type:Map,required:!0}},emits:["character-added"],setup(e,{emit:t}){const n=e,a=t,i=f(null),s=f(!1),u=o(()=>n.selectedAccountId?n.characterMasters.filter(e=>c(e.id)<2):[]);v(()=>n.selectedAccountId,()=>{i.value=null});const c=e=>n.selectedAccountId&&n.ownedCountMap.get(`${e}-${n.selectedAccountId}`)||0,d=e=>{const t=c(e.id);return`[${e.indexNumber||"?"}] ${e.monsterName} | 所持数: ${t} / 2`},h=async()=>{if(!i.value||!n.selectedAccountId)return alert("追加するキャラとアカウントを選択してください。");if(c(i.value)>=2)return alert("このキャラは既に2体所持しています。");s.value=!0;try{const e=n.characterMastersMap.get(i.value);if(!e)throw new Error("キャラのマスター情報が見つかりません。");const t={characterMasterId:i.value,monsterName:e.monsterName,items:[],createdAt:sm()},r=await Hy(n.selectedAccountId,t),s={...t,id:r.id,createdAt:{toDate:()=>new Date}};a("character-added",{accountId:n.selectedAccountId,newCharacter:s}),alert(`「${e.monsterName}」を所持リストに追加しました。`),i.value=null}catch(e){alert("エラー: "+e.message)}finally{s.value=!1}};return(e,t)=>($(),U("div",cE,[l("div",dE,[r(ub,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),t[1]||(t[1]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," 所持キャラクター追加 ",-1))]),r(uE,{onSubmit:X(h,["prevent"])},{default:j(()=>[r(LS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-account-search",class:"mr-2"}),t[2]||(t[2]=z(" キャラクター選択 ",-1))]),_:1,__:[2]}),r(MS,{class:"pa-6"},{default:j(()=>[r($S,{class:"pa-0"},{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12"},{default:j(()=>[l("div",hE,[l("div",pE,[r(ub,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),t[3]||(t[3]=l("h6",{class:"text-h6 font-weight-medium"}," 追加するキャラクター ",-1))]),r(oE,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),items:u.value,"item-title":d,label:"追加するキャラクター名で検索","list-height":"400px","no-data-text":"追加できるキャラクターがいません",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),r(TS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(pC),r(Ew,{loading:s.value,disabled:!i.value||s.value,onClick:h,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-account-plus",class:"px-8"},{default:j(()=>[z(P(s.value?"追加中...":"このキャラクターを所持リストに追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},vE=(e,t,n,a,r,i=null)=>{if(!e)return"キャラクター情報なし";const s=n.get(e.characterMasterId),o=s?s.monsterName:"不明",l=e.accountId||i;if(!l)return`${o} (アカウント不明)`;const u=(a.get(l)||[]).filter(t=>t.characterMasterId===e.characterMasterId).findIndex(t=>t.id===e.id);let c=`${o} (${u>=0?u+1:"？"}体目)`;{const t=(e.items||[]).map(e=>r.get(Number(e))).filter(Boolean).join("、");t&&(c+=`[${t}]`)}return c},mE={class:"pa-6"},gE={class:"d-flex align-center mb-6"},yE={class:"mb-4"},bE={class:"d-flex align-center mb-3"},wE={class:"mb-4"},_E={class:"d-flex align-center mb-3"},IE={class:"text-center mb-4"},SE={class:"text-center mb-4"},CE={key:0,class:"text-center pa-4"},kE={key:1,class:"text-center pa-4"},EE={key:2},xE={class:"mb-3"},TE={class:"text-center mb-4"},AE={class:"d-flex justify-center"},NE={__name:"ManageItemsTab",props:{selectedAccountId:{type:String,default:null},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMasters:{type:Array,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["items-updated","items-moved"],setup(e,{emit:t}){const n=e,a=t,i=S({selectedOwnedId:null,items:[]}),s=S({from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]}),u=f(!1),c=f(!1),d=o(()=>{if(!n.selectedAccountId||!n.ownedCharactersData.has(n.selectedAccountId))return[];return(n.ownedCharactersData.get(n.selectedAccountId)||[]).map(e=>{const t=n.characterMastersMap.get(e.characterMasterId);return{...e,id:e.id,indexNumber:(null==t?void 0:t.indexNumber)||999999,monsterName:(null==t?void 0:t.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)}),h=o(()=>{if(!s.from.selectedId)return[];const e=d.value.find(e=>e.id===s.from.selectedId);return e&&e.items?e.items.map(e=>({id:Number(e),name:n.itemMastersMap.get(Number(e))||`不明(ID:${e})`})):[]});v(()=>n.selectedAccountId,()=>{Object.assign(i,{selectedOwnedId:null,items:[]}),Object.assign(s,{from:{selectedId:null},to:{selectedId:null},selectedItemIds:[]})}),v(()=>i.selectedOwnedId,e=>{var t;if(!e)return void(i.items=[]);const n=d.value.find(t=>t.id===e);i.items=(null==(t=null==n?void 0:n.items)?void 0:t.map(Number))||[]}),v(()=>s.from.selectedId,()=>{s.selectedItemIds=[]});const p=async()=>{if(i.selectedOwnedId){if(i.items.length>3)return alert("アイテムは3つまでです。");u.value=!0;try{await Ky(n.selectedAccountId,i.selectedOwnedId,i.items),a("items-updated",{accountId:n.selectedAccountId,ownedCharacterId:i.selectedOwnedId,items:i.items}),alert("アイテムを更新しました。")}catch(e){alert("エラー: "+e.message)}finally{u.value=!1}}},m=async()=>{var e;c.value=!0;try{const t=s.from.selectedId,r=s.to.selectedId,i=s.selectedItemIds;if(t===r||!t||!r)throw new Error("有効な移動元と移動先を選択してください。");if(0===i.length)throw new Error("移動するアイテムを選択してください。");const o=d.value.find(e=>e.id===t),l=d.value.find(e=>e.id===r);if(!o||!l)throw new Error("キャラクター情報が見つかりません。");if(((null==(e=l.items)?void 0:e.length)||0)+i.length>3)throw new Error("移動先のアイテム所持数が上限を超えます。");const u=(o.items||[]).map(Number).filter(e=>!i.includes(e)),c=[...(l.items||[]).map(Number),...i];await Gy(n.selectedAccountId,{id:t,items:u},{id:r,items:c}),a("items-moved",{accountId:n.selectedAccountId,from:{id:t,items:u},to:{id:r,items:c}}),alert("アイテムを移動しました。"),s.from.selectedId=null,s.to.selectedId=null,s.selectedItemIds=[]}catch(t){alert(`エラー: ${t.message}`)}finally{c.value=!1}},g=(e,t)=>vE(e,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,n.selectedAccountId);return(t,n)=>($(),U("div",mE,[l("div",gE,[r(ub,{icon:"mdi-sword-cross",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"アイテム管理",-1))]),r(uE,null,{default:j(()=>[r(LS,{elevation:"3",rounded:"lg",class:"mb-6"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-update",class:"mr-2"}),n[6]||(n[6]=z(" 所持キャラクターのアイテムを変更 ",-1))]),_:1,__:[6]}),r(MS,{class:"pa-6"},{default:j(()=>[r($S,null,{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12",md:"6"},{default:j(()=>[l("div",yE,[l("div",bE,[r(ub,{icon:"mdi-account-search",color:"primary",class:"mr-2"}),n[7]||(n[7]=l("h6",{class:"text-h6 font-weight-medium"},"対象キャラクター",-1))]),r(oE,{modelValue:i.selectedOwnedId,"onUpdate:modelValue":n[0]||(n[0]=e=>i.selectedOwnedId=e),items:d.value,label:"変更対象のキャラクターを検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[r(c_,null,{default:j(()=>[z(P(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items"])])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[l("div",wE,[l("div",_E,[r(ub,{icon:"mdi-sword-cross",color:"primary",class:"mr-2"}),n[8]||(n[8]=l("h6",{class:"text-h6 font-weight-medium"},"アイテム選択",-1))]),r(fS,{modelValue:i.items,"onUpdate:modelValue":n[1]||(n[1]=e=>i.items=e),items:e.itemMasters,"item-title":"name","item-value":"id",label:"アイテム (最大3つまで)",multiple:"",chips:"",clearable:"",variant:"outlined",disabled:!i.selectedOwnedId,color:"primary","prepend-inner-icon":"mdi-sword-cross"},null,8,["modelValue","items","disabled"]),r(Ew,{loading:u.value,disabled:!i.selectedOwnedId||u.value||i.items.length>3,onClick:p,color:"primary",block:"",size:"large",variant:"elevated","prepend-icon":"mdi-update",class:"mt-4"},{default:j(()=>[z(P(u.value?"更新中...":"アイテムを更新"),1)]),_:1},8,["loading","disabled"]),i.items.length>3?($(),q(_S,{key:0,type:"error",variant:"tonal",class:"mt-3","prepend-icon":"mdi-alert-circle"},{default:j(()=>n[9]||(n[9]=[z(" アイテムは3つまでしか選択できません。 ",-1)])),_:1,__:[9]})):W("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(LS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-swap-horizontal",class:"mr-2"}),n[10]||(n[10]=z(" キャラクター間でアイテムを移動 ",-1))]),_:1,__:[10]}),r(MS,{class:"pa-6"},{default:j(()=>[r($S,null,{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12",md:"4"},{default:j(()=>[l("div",IE,[r(Db,{size:"48",color:"secondary",class:"mb-2"},{default:j(()=>[r(ub,{icon:"mdi-arrow-left",size:"24",color:"white"})]),_:1}),n[11]||(n[11]=l("h6",{class:"text-h6 font-weight-bold text-secondary"}," 移動元 ",-1))]),r(oE,{modelValue:s.from.selectedId,"onUpdate:modelValue":n[2]||(n[2]=e=>s.from.selectedId=e),items:d.value,label:"移動元キャラクターを検索","list-height":"250px","disabled-items":[s.to.selectedId].filter(Boolean),color:"secondary","prepend-inner-icon":"mdi-account-arrow-left"},{item:j(({item:e})=>[r(c_,null,{default:j(()=>[z(P(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[l("div",SE,[r(Db,{size:"48",color:"info",class:"mb-2"},{default:j(()=>[r(ub,{icon:"mdi-sword-cross",size:"24",color:"white"})]),_:1}),n[12]||(n[12]=l("h6",{class:"text-h6 font-weight-bold text-info"}," 移動するアイテム ",-1))]),r(LS,{elevation:"2",rounded:"lg",style:{height:"318px","overflow-y":"auto"},class:"border-info border"},{default:j(()=>[r(MS,{class:"pa-4"},{default:j(()=>[s.from.selectedId?h.value.length?($(),U("div",EE,[l("div",xE,[r(WI,{color:"info",variant:"tonal",size:"small",class:"mb-2"},{default:j(()=>[z(P(h.value.length)+"個のアイテム ",1)]),_:1})]),($(!0),U(_,null,Q(h.value,e=>($(),q(LI,{key:e.id,modelValue:s.selectedItemIds,"onUpdate:modelValue":n[3]||(n[3]=e=>s.selectedItemIds=e),label:e.name,value:e.id,density:"compact","hide-details":"",color:"info",class:"mb-2"},null,8,["modelValue","label","value"]))),128))])):($(),U("div",kE,[r(ub,{icon:"mdi-inbox-outline",size:"48",color:"grey-lighten-1"}),n[14]||(n[14]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動できるアイテムがありません。 ",-1))])):($(),U("div",CE,[r(ub,{icon:"mdi-information",size:"48",color:"grey-lighten-1"}),n[13]||(n[13]=l("div",{class:"mt-2 text-body-2 text-medium-emphasis"}," 移動元キャラクターを選択してください。 ",-1))]))]),_:1})]),_:1})]),_:1}),r(QS,{cols:"12",md:"4"},{default:j(()=>[l("div",TE,[r(Db,{size:"48",color:"success",class:"mb-2"},{default:j(()=>[r(ub,{icon:"mdi-arrow-right",size:"24",color:"white"})]),_:1}),n[15]||(n[15]=l("h6",{class:"text-h6 font-weight-bold text-success"},"移動先",-1))]),r(oE,{modelValue:s.to.selectedId,"onUpdate:modelValue":n[4]||(n[4]=e=>s.to.selectedId=e),items:d.value,label:"移動先キャラクターを検索","list-height":"250px","disabled-items":[s.from.selectedId].filter(Boolean),color:"success","prepend-inner-icon":"mdi-account-arrow-right"},{item:j(({item:e})=>[r(c_,null,{default:j(()=>[z(P(g(e)),1)]),_:2},1024)]),_:1},8,["modelValue","items","disabled-items"])]),_:1})]),_:1}),r(hC,{class:"mt-6"},{default:j(()=>[r(QS,null,{default:j(()=>[l("div",AE,[r(Ew,{loading:c.value,disabled:!s.from.selectedId||!s.to.selectedId||0===s.selectedItemIds.length||c.value,onClick:m,color:"success",size:"large",variant:"elevated","prepend-icon":"mdi-swap-horizontal",class:"px-8"},{default:j(()=>[z(P(c.value?"移動中...":"選択したアイテムを移動"),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},VE={class:"team-list-container",style:{height:"65vh","overflow-y":"auto"}},DE={key:0,class:"text-center pa-8"},PE={key:1,class:"text-center pa-8"},RE=["onClick"],ME={class:"d-flex align-center justify-space-between mb-3"},OE={class:"flex-grow-1"},LE={class:"text-h6 font-weight-bold text-primary mb-1"},FE=["title"],BE=["title"],UE=["title"],$E={__name:"TeamList",props:{dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},selectedTeamId:{type:String,default:null}},emits:["select-team","delete-team"],setup(e,{emit:t}){const n=e,a=t,i=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],u=S({type:""}),c=o(()=>u.type?n.teams.filter(e=>e.type===u.type):n.teams),d=(e,t)=>{if(!e.characters||!n.dataLoaded||t>=e.characters.length)return{characterName:"—",accountName:"—",items:[]};const a=e.characters[t],r=n.accounts.find(e=>e.id===a.accountId),i=(n.ownedCharactersData.get(a.accountId)||[]).find(e=>e.id===a.ownedCharacterId);if(!i)return{characterName:"キャラ不明",accountName:(null==r?void 0:r.name)||"不明",items:[]};const s=n.characterMastersMap.get(i.characterMasterId);return{characterName:(null==s?void 0:s.monsterName)||"不明",accountName:(null==r?void 0:r.name)||"不明",items:(i.items||[]).map(e=>n.itemMastersMap.get(Number(e))||`不明ID:${e}`).filter(Boolean)}};return(t,n)=>($(),q(LS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-format-list-bulleted",class:"mr-2"}),n[1]||(n[1]=z(" 編成一覧 ",-1))]),_:1,__:[1]}),r(MS,{class:"pa-4"},{default:j(()=>[r(fS,{modelValue:u.type,"onUpdate:modelValue":n[0]||(n[0]=e=>u.type=e),items:["",...i],label:"タイプで絞り込み",variant:"outlined",clearable:"",density:"compact","prepend-inner-icon":"mdi-filter",class:"mb-4",color:"primary"},null,8,["modelValue","items"]),l("div",VE,[e.dataLoaded?0===c.value.length?($(),U("div",PE,[r(ub,{icon:"mdi-inbox-outline",size:"64",color:"grey-lighten-1"}),n[3]||(n[3]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," 該当する編成がありません ",-1))])):W("",!0):($(),U("div",DE,[r(Gb,{indeterminate:"",color:"primary",size:"48"}),n[2]||(n[2]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))])),($(!0),U(_,null,Q(c.value,t=>{return $(),U("div",{key:t.id,onClick:e=>(e=>{a("select-team",e)})(t),class:s(["team-item mb-3 pa-4 rounded-lg cursor-pointer transition-all",e.selectedTeamId===t.id?"bg-primary-lighten-5 border-primary border-2":"bg-grey-lighten-5 border-grey-lighten-3 border"]),style:{"min-height":"120px"}},[l("div",ME,[l("div",OE,[l("h3",LE,P(t.name),1),r(WI,{color:(n=t.type,{"禁忌":"deep-purple","天魔(試練)":"red-darken-2","天魔(庭園)":"green-darken-2","星墓":"blue-darken-2","轟絶":"orange-darken-2","黎絶":"blue-darken-2"}[n]||"grey"),size:"small",variant:"tonal",class:"font-weight-medium"},{default:j(()=>[z(P(t.type),1)]),_:2},1032,["color"])]),r(Ew,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:X(e=>{return n=t.id,void a("delete-team",n);var n},["stop"]),class:"ml-2"},null,8,["onClick"])]),r(hC,{dense:""},{default:j(()=>[($(!0),U(_,null,Q(Array(4),(e,n)=>($(),q(QS,{key:n,cols:"3"},{default:j(()=>[l("div",{class:s(["character-slot pa-2 rounded text-center","—"!==d(t,n).characterName?"bg-white":"bg-grey-lighten-4"])},[l("div",{class:"text-caption font-weight-bold text-truncate mb-1",title:d(t,n).characterName},P(d(t,n).characterName),9,FE),l("div",{class:"text-caption text-truncate mb-1",title:d(t,n).accountName},P(d(t,n).accountName),9,BE),r(Tw,{class:"my-1"}),($(),U(_,null,Q(4,e=>l("div",{key:e,class:"text-caption text-truncate",title:d(t,n).items[e-1]},P(d(t,n).items[e-1]||"—"),9,UE)),64))],2)]),_:2},1024))),128))]),_:2},1024)],10,RE);var n}),128))])]),_:1})]),_:1}))}},jE={class:"character-formation-section"},zE={class:"d-flex align-center mb-4"},qE={class:"d-flex align-center mb-4"},HE={class:"text-white font-weight-bold"},KE={class:"text-h6 font-weight-bold"},GE={key:1,class:"pa-8 text-center"},WE={__name:"TeamForm",props:{team:{type:Object,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0},isSaving:{type:Boolean,default:!1}},emits:["save-team","reset-form","update:team"],setup(e,{emit:t}){const n=e,a=t,i=(e,t)=>{const r=JSON.parse(JSON.stringify(n.team));r[e]=t,a("update:team",r)},u=(e,t,r)=>{const i={...n.team,slots:n.team.slots.map((n,a)=>a===e?{...n,[t]:r}:n)};"selectedAccountId"===t&&(i.slots[e].selectedOwnedId=null),a("update:team",i)},c=["禁忌","天魔(試練)","天魔(庭園)","星墓","轟絶","黎絶"],d=o(()=>n.team.name&&n.team.type&&n.team.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)),h=e=>{if(!e.selectedAccountId)return[];return(n.ownedCharactersData.get(e.selectedAccountId)||[]).map(t=>{const a=n.characterMastersMap.get(t.characterMasterId);return{...t,accountId:e.selectedAccountId,indexNumber:(null==a?void 0:a.indexNumber)||999999,monsterName:(null==a?void 0:a.monsterName)||"不明"}}).sort((e,t)=>e.indexNumber-t.indexNumber)};return(t,a)=>($(),q(LS,{class:"h-100",elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-account-edit",class:"mr-2"}),z(" "+P(e.team.id?"編成編集":"新規編成作成"),1)]),_:1}),r(NS,{class:"pa-4 bg-grey-lighten-5"},{default:j(()=>[r(Ew,{onClick:a[0]||(a[0]=e=>t.$emit("reset-form")),size:"small",variant:"tonal",color:"primary","prepend-icon":"mdi-plus"},{default:j(()=>a[4]||(a[4]=[z(" 新規作成フォームを開く ",-1)])),_:1,__:[4]})]),_:1}),e.accounts.length>0&&e.ownedCharactersData.size>0&&e.characterMastersMap.size>0?($(),U(_,{key:0},[r(MS,{class:"pa-6"},{default:j(()=>[r(rS,{"model-value":e.team.name,"onUpdate:modelValue":a[1]||(a[1]=e=>i("name",e)),label:"編成名",variant:"outlined",placeholder:"例: 天魔の孤城 第1の間",class:"mb-6",color:"primary","prepend-inner-icon":"mdi-format-title"},null,8,["model-value"]),r(fS,{"model-value":e.team.type,"onUpdate:modelValue":a[2]||(a[2]=e=>i("type",e)),items:c,label:"タイプ",variant:"outlined",class:"mb-8",color:"primary","prepend-inner-icon":"mdi-tag"},null,8,["model-value"]),l("div",jE,[l("div",zE,[r(ub,{icon:"mdi-account-multiple",color:"primary",class:"mr-2"}),a[5]||(a[5]=l("h4",{class:"text-h5 font-weight-bold text-primary"}," キャラクター編成 (4体) ",-1))]),r(hC,null,{default:j(()=>[($(!0),U(_,null,Q(e.team.slots,(t,a)=>($(),q(QS,{key:a,cols:"12",md:"6"},{default:j(()=>[r(LS,{elevation:"2",class:s(["pa-4 h-100 character-slot-card",t.selectedAccountId?"border-primary border-2":"border-grey-lighten-3 border"]),rounded:"lg",style:{"min-height":"400px"}},{default:j(()=>{return[l("div",qE,[r(Db,{size:"32",color:"primary",class:"mr-3"},{default:j(()=>[l("span",HE,P(a+1),1)]),_:2},1024),l("h5",KE," スロット "+P(a+1),1)]),r(fS,{"model-value":t.selectedAccountId,"onUpdate:modelValue":e=>u(a,"selectedAccountId",e),items:e.accounts,"item-title":"name","item-value":"id",label:"アカウント",variant:"outlined",density:"compact",class:"mb-3",color:"primary","prepend-inner-icon":"mdi-account"},null,8,["model-value","onUpdate:modelValue","items"]),r(oE,{"model-value":t.selectedOwnedId,"onUpdate:modelValue":e=>((e,t)=>{u(e,"selectedOwnedId",t)})(a,e),items:h(t),label:"キャラクターを選択","list-height":"280px",variant:"filled",disabled:!t.selectedAccountId,"disabled-items":(i=a,n.team.slots.filter((e,t)=>t!==i&&e.selectedOwnedId).map(e=>e.selectedOwnedId)),"no-data-text":"先にアカウントを選択",density:"comfortable","list-density":"comfortable","primary-color":"primary","search-bg-color":"grey-lighten-5","card-elevation":2,"prepend-inner-icon":"mdi-account-search"},{item:j(({item:e})=>[r(c_,null,{default:j(()=>{return[z(P((t=e,vE(t,0,n.characterMastersMap,n.ownedCharactersData,n.itemMastersMap,t.accountId))),1)];var t}),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue","items","disabled","disabled-items"])];var i}),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})])]),_:1}),r(TS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(pC),r(Ew,{loading:e.isSaving,disabled:!d.value||e.isSaving,onClick:a[3]||(a[3]=e=>t.$emit("save-team")),color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(P(e.isSaving?"保存中...":e.team.id?"編成を更新":"編成を保存"),1)]),_:1},8,["loading","disabled"])]),_:1})],64)):($(),U("div",GE,[r(Gb,{indeterminate:"",color:"primary",size:"48"}),a[6]||(a[6]=l("div",{class:"mt-3 text-body-1 text-medium-emphasis"}," データを読み込んでいます... ",-1))]))]),_:1}))}},QE={class:"pa-6"},YE={class:"d-flex align-center mb-6"},XE=Jy({__name:"ManageTeamsTab",props:{userId:{type:String,required:!0},dataLoaded:{type:Boolean,required:!0},teams:{type:Array,required:!0},accounts:{type:Array,required:!0},ownedCharactersData:{type:Map,required:!0},characterMastersMap:{type:Map,required:!0},itemMastersMap:{type:Map,required:!0}},emits:["team-added","team-updated","team-deleted"],setup(e,{emit:t}){const n=e,a=t,i=f(!1),s=()=>({id:null,name:"",type:"",slots:Array(4).fill().map(()=>({selectedAccountId:"",selectedOwnedId:"",characterSearch:""}))}),o=S(s()),u=e=>{Object.assign(o,e)},c=e=>{Object.assign(o,{id:e.id,name:e.name,type:e.type,slots:JSON.parse(JSON.stringify(e.characters.map(e=>({selectedAccountId:e.accountId,selectedOwnedId:e.ownedCharacterId,characterSearch:""}))))})},d=()=>{Object.assign(o,s())},h=async()=>{if(!(o.name&&o.type&&o.slots.every(e=>e.selectedAccountId&&e.selectedOwnedId)))return void alert("編成名、タイプ、4体のキャラを全て選択してください。");i.value=!0;const e={userId:n.userId,name:o.name,type:o.type,characters:o.slots.map(e=>({accountId:e.selectedAccountId,ownedCharacterId:e.selectedOwnedId}))};try{const t=o.id;Object.assign(e,t?{updatedAt:sm()}:{createdAt:sm()});const n=await Yy(t,e);if(t)a("team-updated",{...e,id:t}),alert("編成を更新しました。");else{const t={...e,id:n.id,createdAt:{toDate:()=>new Date}};a("team-added",t),alert("編成を保存しました。"),d()}}catch(t){alert("エラー: "+t.message)}finally{i.value=!1}},p=async e=>{if(confirm("この編成を本当に削除しますか？"))try{await Xy(e),a("team-deleted",e),alert("編成を削除しました。"),o.id===e&&d()}catch(t){alert("エラー: "+t.message)}};return(t,n)=>($(),U("div",QE,[l("div",YE,[r(ub,{icon:"mdi-account-group",size:"32",color:"primary",class:"mr-3"}),n[0]||(n[0]=l("h2",{class:"text-h4 font-weight-bold text-primary"},"編成管理",-1))]),r(hC,null,{default:j(()=>[r(QS,{cols:"12",lg:"5"},{default:j(()=>[r($E,{"data-loaded":e.dataLoaded,teams:e.teams,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"selected-team-id":o.id,onSelectTeam:c,onDeleteTeam:p},null,8,["data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map","selected-team-id"])]),_:1}),r(QS,{cols:"12",lg:"7"},{default:j(()=>[r(WE,{team:o,accounts:e.accounts,"owned-characters-data":e.ownedCharactersData,"character-masters-map":e.characterMastersMap,"item-masters-map":e.itemMastersMap,"is-saving":i.value,onSaveTeam:h,onResetForm:d,"onUpdate:team":u},null,8,["team","accounts","owned-characters-data","character-masters-map","item-masters-map","is-saving"])]),_:1})]),_:1})]))}},[["__scopeId","data-v-42576069"]]),JE={class:"pa-6"},ZE={class:"d-flex align-center mb-6"},ex={__name:"AddMasterCharacterTab",props:{gachaMasters:{type:Array,required:!0}},emits:["master-added"],setup(e,{emit:t}){const n=t,a=S({no:"",name:"",element:"",type:"恒常",gacha:""}),i=f(!1),s=async()=>{if(!a.name)return alert("キャラクター名は必須です。");i.value=!0;try{const e={indexNumber:a.no?Number(a.no):0,monsterName:a.name,element:a.element||"",type:a.type||"恒常",ejectionGacha:a.gacha||""};await Wy(e),alert("マスターを追加しました。ページをリロードして反映してください。"),n("master-added")}catch(e){alert("エラー: "+e.message)}finally{i.value=!1}};return(t,n)=>($(),U("div",JE,[l("div",ZE,[r(ub,{icon:"mdi-account-plus",size:"32",color:"primary",class:"mr-3"}),n[5]||(n[5]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター新規追加 ",-1))]),r(uE,{onSubmit:X(s,["prevent"])},{default:j(()=>[r(LS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-account-plus",class:"mr-2"}),n[6]||(n[6]=z(" 新規キャラクター情報 ",-1))]),_:1,__:[6]}),r(MS,{class:"pa-6"},{default:j(()=>[r($S,null,{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12",md:"6"},{default:j(()=>[r(rS,{modelValue:a.no,"onUpdate:modelValue":n[0]||(n[0]=e=>a.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",placeholder:"例: 1234",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(rS,{modelValue:a.name,"onUpdate:modelValue":n[1]||(n[1]=e=>a.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:a.element,"onUpdate:modelValue":n[2]||(n[2]=e=>a.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:a.type,"onUpdate:modelValue":n[3]||(n[3]=e=>a.type=e),items:["恒常","限定","コラボ","α"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12"},{default:j(()=>[r(fS,{modelValue:a.gacha,"onUpdate:modelValue":n[4]||(n[4]=e=>a.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(TS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(pC),r(Ew,{loading:i.value,disabled:!a.name||i.value,onClick:s,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(P(i.value?"追加中...":"マスターリストに新規追加"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},tx={class:"pa-6"},nx={class:"d-flex align-center mb-6"},ax={__name:"EditMasterCharacterTab",props:{characterMasters:{type:Array,required:!0},gachaMasters:{type:Array,required:!0}},emits:["master-updated"],setup(e,{emit:t}){const n=e,a=t,i=S({search:"",selectedMasterId:null,no:"",name:"",element:"",type:"",gacha:""}),s=f(!1),u=o(()=>new Map(n.characterMasters.map(e=>[e.id,e])));v(()=>i.selectedMasterId,e=>{if(!e)return void Object.assign(i,{name:"",no:"",element:"",type:"",gacha:""});const t=u.value.get(e);t&&Object.assign(i,{name:t.monsterName,no:t.indexNumber,element:t.element,type:t.type,gacha:t.ejectionGacha})});const c=async()=>{if(!i.selectedMasterId||!i.name)return alert("キャラを選択し名前を入力してください。");s.value=!0;try{const e={monsterName:i.name,indexNumber:i.no?Number(i.no):0,element:i.element,type:i.type,ejectionGacha:i.gacha};await Qy(i.selectedMasterId,e),alert("マスター情報を更新しました。ページをリロードしてください。"),a("master-updated")}catch(e){alert("更新に失敗: "+e.message)}finally{s.value=!1}};return(t,a)=>($(),U("div",tx,[l("div",nx,[r(ub,{icon:"mdi-account-edit",size:"32",color:"primary",class:"mr-3"}),a[6]||(a[6]=l("h2",{class:"text-h4 font-weight-bold text-primary"}," キャラクターマスター編集 ",-1))]),r(uE,null,{default:j(()=>[r($S,{class:"pa-0"},{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12"},{default:j(()=>[r(LS,{elevation:"2",rounded:"lg",class:"mb-4"},{default:j(()=>[r(VS,{class:"bg-primary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-account-search",class:"mr-2"}),a[7]||(a[7]=z(" 編集対象キャラクター選択 ",-1))]),_:1,__:[7]}),r(MS,{class:"pa-4"},{default:j(()=>[r(oE,{modelValue:i.selectedMasterId,"onUpdate:modelValue":a[0]||(a[0]=e=>i.selectedMasterId=e),items:n.characterMasters,"item-title":e=>`[${e.indexNumber||"?"}] ${e.monsterName}`,label:"編集したいキャラクター名で検索","list-height":"300px",color:"primary","prepend-inner-icon":"mdi-account-search"},null,8,["modelValue","items","item-title"])]),_:1})]),_:1})]),_:1})]),_:1}),i.selectedMasterId?($(),q(hC,{key:0,class:"mt-4"},{default:j(()=>[r(QS,{cols:"12"},{default:j(()=>[r(LS,{elevation:"3",rounded:"lg"},{default:j(()=>[r(VS,{class:"bg-secondary text-white pa-4"},{default:j(()=>[r(ub,{icon:"mdi-account-edit",class:"mr-2"}),a[8]||(a[8]=z(" 編集フォーム ",-1))]),_:1,__:[8]}),r(MS,{class:"pa-6"},{default:j(()=>[r($S,null,{default:j(()=>[r(hC,null,{default:j(()=>[r(QS,{cols:"12",md:"6"},{default:j(()=>[r(rS,{modelValue:i.no,"onUpdate:modelValue":a[1]||(a[1]=e=>i.no=e),modelModifiers:{number:!0},label:"図鑑番号",type:"number",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-numeric",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(rS,{modelValue:i.name,"onUpdate:modelValue":a[2]||(a[2]=e=>i.name=e),modelModifiers:{trim:!0},label:"キャラクター名",required:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-account",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:i.element,"onUpdate:modelValue":a[3]||(a[3]=e=>i.element=e),items:["火","水","木","光","闇"],label:"属性",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-fire",clearable:"",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12",md:"6"},{default:j(()=>[r(fS,{modelValue:i.type,"onUpdate:modelValue":a[4]||(a[4]=e=>i.type=e),items:["恒常","限定","コラボ","イベント"],label:"分類",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-tag",class:"mb-4"},null,8,["modelValue"])]),_:1}),r(QS,{cols:"12"},{default:j(()=>[r(fS,{modelValue:i.gacha,"onUpdate:modelValue":a[5]||(a[5]=e=>i.gacha=e),items:e.gachaMasters,"item-title":"name","item-value":"name",label:"排出ガチャ (限定の場合)",placeholder:"(限定ではない/その他)",clearable:"",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-gift",class:"mb-4"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(TS,{class:"pa-6 bg-grey-lighten-5"},{default:j(()=>[r(pC),r(Ew,{loading:s.value,disabled:!i.selectedMasterId||s.value,onClick:c,color:"primary",size:"large",variant:"elevated","prepend-icon":"mdi-content-save",class:"px-8"},{default:j(()=>[z(P(s.value?"更新中...":"マスター情報を更新"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):W("",!0)]),_:1})]),_:1})]))}},rx=ae({...ye(),...We(Lt(),["fullHeight"]),...ge()},"VApp"),ix=ne()({name:"VApp",props:rx(),setup(e,t){let{slots:n}=t;const a=Ce(e),{layoutClasses:r,getLayoutItem:o,items:u,layoutRef:c}=Ft({...e,fullHeight:!0}),{rtlClasses:d}=Ve();return ve(()=>{var t;return l("div",{ref:c,class:s(["v-application",a.themeClasses.value,r.value,d.value,e.class]),style:i([e.style])},[l("div",{class:"v-application__wrap"},[null==(t=n.default)?void 0:t.call(n)])])}),{getLayoutItem:o,items:u,theme:a}}}),sx=ae({text:String,...ye(),...ob()},"VToolbarTitle"),ox=ne()({name:"VToolbarTitle",props:sx(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=!!(n.default||n.text||e.text);return r(e.tag,{class:s(["v-toolbar-title",e.class]),style:i(e.style)},{default:()=>{var a;return[t&&l("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,null==(a=n.default)?void 0:a.call(n)])]}})}),{}}}),lx=[null,"prominent","default","comfortable","compact"],ux=ae({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>lx.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ib(),...ye(),...Pb(),...fb(),...ob({tag:"header"}),...ge()},"VToolbar"),cx=ne()({name:"VToolbar",props:ux(),setup(e,t){var a;let{slots:u}=t;const{backgroundColorClasses:c,backgroundColorStyles:d}=ab(()=>e.color),{borderClasses:h}=Sb(e),{elevationClasses:p}=Rb(e),{roundedClasses:f}=vb(e),{themeClasses:v}=Ce(e),{rtlClasses:m}=Ve(),g=n(null===e.extended?!!(null==(a=u.extension)?void 0:a.call(u)):e.extended),y=o(()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10)),b=o(()=>g.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0);return re({VBtn:{variant:"text"}}),ve(()=>{var t;const n=!(!e.title&&!u.title),a=!(!u.image&&!e.image),o=null==(t=u.extension)?void 0:t.call(u);return g.value=null===e.extended?!!o:e.extended,r(e.tag,{class:s(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},c.value,h.value,p.value,f.value,v.value,m.value,e.class]),style:i([d.value,e.style])},{default:()=>[a&&l("div",{key:"image",class:"v-toolbar__image"},[u.image?r(eb,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},u.image):r(_b,{key:"image-img",cover:!0,src:e.image},null)]),r(eb,{defaults:{VTabs:{height:he(y.value)}}},{default:()=>{var t,a,i;return[l("div",{class:"v-toolbar__content",style:{height:he(y.value)}},[u.prepend&&l("div",{class:"v-toolbar__prepend"},[null==(t=u.prepend)?void 0:t.call(u)]),n&&r(ox,{key:"title",text:e.title},{text:u.title}),null==(a=u.default)?void 0:a.call(u),u.append&&l("div",{class:"v-toolbar__append"},[null==(i=u.append)?void 0:i.call(u)])])]}}),r(eb,{defaults:{VTabs:{height:he(b.value)}}},{default:()=>[r(Uw,null,{default:()=>[g.value&&l("div",{class:"v-toolbar__extension",style:{height:he(b.value)}},[o])]})]})]})}),{contentHeight:y,extensionHeight:b}}}),dx=ae({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");const hx=ae({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ux(),...Ut(),...dx(),height:{type:[Number,String],default:64}},"VAppBar"),px=ne()({name:"VAppBar",props:hx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=f(),s=ke(e,"modelValue"),l=o(()=>{var t;const n=new Set((null==(t=e.scrollBehavior)?void 0:t.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),u=o(()=>{const e=l.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!s.value}),{currentScroll:c,scrollThreshold:d,isScrollingUp:p,scrollRatio:m}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:a}=t;let r=0,i=0;const s=f(null),l=n(0),u=n(0),c=n(0),d=n(!1),h=n(!1),p=o(()=>Number(e.scrollThreshold)),m=o(()=>Ne((p.value-l.value)/p.value||0)),g=()=>{const e=s.value;if(!e||a&&!a.value)return;r=l.value,l.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;i===t?(h.value=l.value<r,c.value=Math.abs(l.value-p.value)):i=t};return v(h,()=>{u.value=u.value||l.value}),v(d,()=>{u.value=0}),C(()=>{v(()=>e.scrollTarget,e=>{var t;const n=e?document.querySelector(e):window;n&&n!==s.value&&(null==(t=s.value)||t.removeEventListener("scroll",g),s.value=n,s.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),y(()=>{var e;null==(e=s.value)||e.removeEventListener("scroll",g)}),a&&v(a,g,{immediate:!0}),{scrollThreshold:p,currentScroll:l,currentThreshold:c,isScrollActive:d,scrollRatio:m,isScrollingUp:h,savedScroll:u}}(e,{canScroll:u}),g=b(()=>l.value.hide||l.value.fullyHide),w=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?m.value>0:0===m.value)),_=o(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?c.value>0:0===c.value)),I=o(()=>l.value.fadeImage?l.value.inverted?1-m.value:m.value:void 0),S=o(()=>{var e,t;if(l.value.hide&&l.value.inverted)return 0;const n=(null==(e=i.value)?void 0:e.contentHeight)??0,a=(null==(t=i.value)?void 0:t.extensionHeight)??0;return g.value?c.value<d.value||l.value.fullyHide?n+a:n:n+a});Ye(()=>!!e.scrollBehavior,()=>{V(()=>{g.value?l.value.inverted?s.value=c.value>d.value:s.value=p.value||c.value<d.value:s.value=!0})});const{ssrBootStyles:k}=r_(),{layoutItemStyles:E}=Bt({id:e.name,order:o(()=>parseInt(e.order,10)),position:b(()=>e.location),layoutSize:S,elementSize:n(void 0),active:s,absolute:b(()=>e.absolute)});return ve(()=>{const t=cx.filterProps(e);return r(cx,h({ref:i,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...E.value,"--v-toolbar-image-opacity":I.value,height:void 0,...k.value},e.style]},t,{collapse:w.value,flat:_.value}),a)}),{}}}),fx=ae({scrollable:Boolean,...ye(),...cb(),...ob({tag:"main"})},"VMain"),vx=ne()({name:"VMain",props:fx(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=db(e),{mainStyles:o}=$t(),{ssrBootStyles:u}=r_();return ve(()=>r(e.tag,{class:s(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:i([o.value,u.value,a.value,e.style])},{default:()=>{var t,a;return[e.scrollable?l("div",{class:"v-main__scroller"},[null==(t=n.default)?void 0:t.call(n)]):null==(a=n.default)?void 0:a.call(n)]}})),{}}}),mx=Symbol.for("vuetify:v-tabs"),gx=ae({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...We(kw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yx=ne()({name:"VTab",props:gx(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:u,textColorStyles:c}=nb(()=>e.sliderColor),d=f(),p=f(),v=o(()=>"horizontal"===e.direction),m=o(()=>{var e,t;return(null==(t=null==(e=d.value)?void 0:e.group)?void 0:t.isSelected.value)??!1});function g(e){var t,n;let{value:a}=e;if(a){const e=null==(n=null==(t=d.value)?void 0:t.$el.parentElement)?void 0:n.querySelector(".v-tab--selected .v-tab__slider"),a=p.value;if(!e||!a)return;const r=getComputedStyle(e).color,i=e.getBoundingClientRect(),s=a.getBoundingClientRect(),o=v.value?"x":"y",l=v.value?"X":"Y",u=v.value?"right":"bottom",c=v.value?"width":"height",h=i[o]>s[o]?i[u]-s[u]:i[o]-s[o],f=Math.sign(h)>0?v.value?"right":"bottom":Math.sign(h)<0?v.value?"left":"top":"center",m=(Math.abs(h)+(Math.sign(h)<0?i[c]:s[c]))/Math.max(i[c],s[c])||0,g=i[c]/s[c]||0,y=1.5;Me(a,{backgroundColor:[r,"currentcolor"],transform:[`translate${l}(${h}px) scale${l}(${g})`,`translate${l}(${h/y}px) scale${l}(${(m-1)/y+1})`,"none"],transformOrigin:Array(3).fill(f)},{duration:225,easing:Le})}}return ve(()=>{const t=Ew.filterProps(e);return r(Ew,h({symbol:mx,ref:d,class:["v-tab",e.class],style:e.style,tabindex:m.value?0:-1,role:"tab","aria-selected":String(m.value),active:!1},t,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":g}),{...n,default:()=>{var t;return l(_,null,[(null==(t=n.default)?void 0:t.call(n))??e.text,!e.hideSlider&&l("div",{ref:p,class:s(["v-tab__slider",u.value]),style:i(c.value)},null)])}})}),oI({},d)}});function bx(e,t){var n;const a=e.changedTouches[0];t.touchendX=a.clientX,t.touchendY=a.clientY,null==(n=t.end)||n.call(t,{originalEvent:e,...t}),(e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&r<a-16&&e.up(e),e.down&&r>a+16&&e.down(e))})(t)}const wx={mounted:function(e,t){var n;const a=t.value,r=(null==a?void 0:a.parent)?e.parentElement:e,i=(null==a?void 0:a.options)??{passive:!0},s=null==(n=t.instance)?void 0:n.$.uid;if(!r||!s)return;const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>function(e,t){var n;const a=e.changedTouches[0];t.touchstartX=a.clientX,t.touchstartY=a.clientY,null==(n=t.start)||n.call(t,{originalEvent:e,...t})}(e,t),touchend:e=>bx(e,t),touchmove:e=>function(e,t){var n;const a=e.changedTouches[0];t.touchmoveX=a.clientX,t.touchmoveY=a.clientY,null==(n=t.move)||n.call(t,{originalEvent:e,...t})}(e,t)}}(t.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[s]=o,jt(o).forEach(e=>{r.addEventListener(e,o[e],i)})},unmounted:function(e,t){var n,a;const r=(null==(n=t.value)?void 0:n.parent)?e.parentElement:e,i=null==(a=t.instance)?void 0:a.$.uid;if(!(null==r?void 0:r._touchHandlers)||!i)return;const s=r._touchHandlers[i];jt(s).forEach(e=>{r.removeEventListener(e,s[e])}),delete r._touchHandlers[i]}},_x=Symbol.for("vuetify:v-window"),Ix=Symbol.for("vuetify:v-window-group"),Sx=ae({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"==typeof e||"hover"===e},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ye(),...ob(),...ge()},"VWindow"),Cx=ne()({name:"VWindow",directives:{vTouch:wx},props:Sx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:u}=Ce(e),{isRtl:c}=Ve(),{t:d}=wt(),h=Ub(e,Ix),p=f(),m=o(()=>c.value?!e.reverse:e.reverse),g=n(!1),y=o(()=>`v-window-${"vertical"===e.direction?"y":"x"}${(m.value?!g.value:g.value)?"-reverse":""}-transition`),_=n(0),I=f(void 0),S=o(()=>h.items.value.findIndex(e=>h.selected.value.includes(e.id)));v(S,(e,t)=>{const n=h.items.value.length,a=n-1;g.value=n<=2?e<t:e===a&&0===t||(0!==e||t!==a)&&e<t}),x(_x,{transition:y,isReversed:g,transitionCount:_,transitionHeight:I,rootRef:p});const C=b(()=>e.continuous||0!==S.value),k=b(()=>e.continuous||S.value!==h.items.value.length-1);function E(){C.value&&h.prev()}function T(){k.value&&h.next()}const A=o(()=>{const t=[],n={icon:c.value?e.nextIcon:e.prevIcon,class:"v-window__"+(m.value?"right":"left"),onClick:h.prev,"aria-label":d("$vuetify.carousel.prev")};t.push(C.value?a.prev?a.prev({props:n}):r(Ew,n,null):l("div",null,null));const i={icon:c.value?e.prevIcon:e.nextIcon,class:"v-window__"+(m.value?"left":"right"),onClick:h.next,"aria-label":d("$vuetify.carousel.next")};return t.push(k.value?a.next?a.next({props:i}):r(Ew,i,null):l("div",null,null)),t}),N=o(()=>{if(!1===e.touch)return e.touch;return{...{left:()=>{m.value?E():T()},right:()=>{m.value?T():E()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}},...!0===e.touch?{}:e.touch}});return ve(()=>w(r(e.tag,{ref:p,class:s(["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows,"v-window--vertical-arrows":!!e.verticalArrows},u.value,e.class]),style:i(e.style)},{default:()=>{var t,n;return[l("div",{class:"v-window__container",style:{height:I.value}},[null==(t=a.default)?void 0:t.call(a,{group:h}),!1!==e.showArrows&&l("div",{class:s(["v-window__controls",{"v-window__controls--left":"left"===e.verticalArrows||!0===e.verticalArrows},{"v-window__controls--right":"right"===e.verticalArrows}])},[A.value])]),null==(n=a.additional)?void 0:n.call(a,{group:h})]}}),[[wx,N.value]])),{group:h}}}),kx=ae({...We(Sx(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ex=ne()({name:"VTabsWindow",props:kx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=T(mx,null),i=ke(e,"modelValue"),s=o({get(){var e;return null==i.value&&a?null==(e=a.items.value.find(e=>a.selected.value.includes(e.id)))?void 0:e.value:i.value},set(e){i.value=e}});return ve(()=>{const t=Cx.filterProps(e);return r(Cx,h({_as:"VTabsWindow"},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),xx=ae({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ye(),...Fb(),...K_()},"VWindowItem"),Tx=ne()({name:"VWindowItem",directives:{vTouch:wx},props:xx(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:a}=t;const u=T(_x),c=Bb(e,Ix),{isBooted:d}=r_();if(!u||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=n(!1),p=o(()=>d.value&&(u.isReversed.value?!1!==e.reverseTransition:!1!==e.transition));function f(){h.value&&u&&(h.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,0===u.transitionCount.value&&(u.transitionHeight.value=void 0)))}function v(){var e;!h.value&&u&&(h.value=!0,0===u.transitionCount.value&&(u.transitionHeight.value=he(null==(e=u.rootRef.value)?void 0:e.clientHeight)),u.transitionCount.value+=1)}function m(){f()}function y(e){h.value&&g(()=>{p.value&&h.value&&u&&(u.transitionHeight.value=he(e.clientHeight))})}const b=o(()=>{const t=u.isReversed.value?e.reverseTransition:e.transition;return!!p.value&&{name:"string"!=typeof t?u.transition.value:t,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:m,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:m,onEnter:y}}),{hasContent:_}=G_(e,c.isSelected);return ve(()=>r(gb,{transition:b.value,disabled:!d.value},{default:()=>{var t;return[w(l("div",{class:s(["v-window-item",c.selectedClass.value,e.class]),style:i(e.style)},[_.value&&(null==(t=a.default)?void 0:t.call(a))]),[[I,c.isSelected.value]])]}})),{groupItem:c}}}),Ax=ae({...xx()},"VTabsWindowItem"),Nx=ne()({name:"VTabsWindowItem",props:Ax(),setup(e,t){let{slots:n}=t;return ve(()=>{const t=Tx.filterProps(e);return r(Tx,h({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});const Vx=ae({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...zI({mandatory:"force",selectedClass:"v-tab-item--selected"}),...kb(),...ob()},"VTabs"),Dx=ne()({name:"VTabs",props:Vx(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const i=ke(e,"modelValue"),s=o(()=>function(e){return e?e.map(e=>we(e)?e:{text:e,value:e}):[]}(e.items)),{densityClasses:u}=Eb(e),{backgroundColorClasses:c,backgroundColorStyles:d}=ab(()=>e.bgColor),{scopeId:p}=W_();return re({VTab:{color:b(()=>e.color),direction:b(()=>e.direction),stacked:b(()=>e.stacked),fixed:b(()=>e.fixedTabs),sliderColor:b(()=>e.sliderColor),hideSlider:b(()=>e.hideSlider)}}),ve(()=>{const t=qI.filterProps(e),o=!!(a.window||e.items.length>0);return l(_,null,[r(qI,h(t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,c.value,e.class],style:[{"--v-tabs-height":he(e.height)},d.value,e.style],role:"tablist",symbol:mx},p,n),{default:()=>{var e;return[(null==(e=a.default)?void 0:e.call(a))??s.value.map(e=>{var t;return(null==(t=a.tab)?void 0:t.call(a,{item:e}))??r(yx,h(e,{key:e.text,value:e.value}),{default:a[`tab.${e.value}`]?()=>{var t;return null==(t=a[`tab.${e.value}`])?void 0:t.call(a,{item:e})}:void 0})})]}}),o&&r(Ex,h({modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,key:"tabs-window"},p),{default:()=>{var e;return[s.value.map(e=>{var t;return(null==(t=a.item)?void 0:t.call(a,{item:e}))??r(Nx,{value:e.value},{default:()=>{var t;return null==(t=a[`item.${e.value}`])?void 0:t.call(a,{item:e})}})}),null==(e=a.window)?void 0:e.call(a)]}})])}),{}}}),Px={class:"d-flex align-center w-100"},Rx={class:"d-flex align-center mr-8"},Mx={class:"w-100 minimal-tabs-container"},Ox={key:0},Lx={key:1,class:"text-center pa-16 minimal-loading"},Fx={key:1,class:"text-center pa-16 minimal-welcome"},Bx=Jy({__name:"App",setup(e){const t=f(null),n=f(!1),a=f(!1),i=f([]),s=f([]),u=f([]),c=f([]),d=f([]),h=f(new Map),p=f(new Map),v=f(new Map),m=f(new Map),g=f("view-all"),y=f(null),b=f([{id:"view-all",name:"所持状況一覧",icon:"mdi-account-multiple"},{id:"add-owned",name:"所持キャラ追加",icon:"mdi-account-plus"},{id:"manage-items",name:"アイテム管理",icon:"mdi-sword-cross"},{id:"manage-teams",name:"編成管理",icon:"mdi-account-group"},{id:"add-master",name:"マスター追加",icon:"mdi-database-plus"},{id:"edit-master",name:"マスター編集",icon:"mdi-database-edit"}]),w=o(()=>"add-owned"===g.value||"manage-items"===g.value);rr(e=>{t.value=e,n.value=!0,e?async function(){if(a.value)return;if(!t.value)return;try{const e=await qy(t.value.uid);i.value=e.accounts,s.value=e.characterMasters,u.value=e.itemMasters,c.value=e.gachaMasters,d.value=e.teams,h.value=e.itemMastersMap,p.value=e.ownedCountMap,v.value=e.ownedCharactersData,m.value=e.characterMastersMap,i.value.length>0&&(y.value=i.value[0].id),a.value=!0}catch(e){alert(`データ読み込みエラー: ${e.message}`)}}():C()});const I=()=>{nr().catch(()=>alert("ログインに失敗しました。"))},S=()=>{ar()},C=()=>{a.value=!1,i.value=[],s.value=[],u.value=[],c.value=[],d.value=[],h.value=new Map,p.value=new Map,v.value=new Map,m.value=new Map,y.value=null};const k=({accountId:e,newCharacter:t})=>{v.value.has(e)||v.value.set(e,[]),v.value.get(e).push(t);const n=`${t.characterMasterId}-${e}`,a=p.value.get(n)||0;p.value.set(n,a+1)},E=async({accountId:e,ownedCharacterId:t,items:n})=>{try{await Ky(e,t,n);const a=(v.value.get(e)||[]).find(e=>e.id===t);a&&(a.items=n),alert("アイテムを更新しました")}catch(a){alert(`アイテム更新エラー: ${a.message}`)}},x=({accountId:e,from:t,to:n})=>{const a=v.value.get(e)||[],r=a.find(e=>e.id===t.id),i=a.find(e=>e.id===n.id);r&&(r.items=t.items),i&&(i.items=n.items)},T=e=>{d.value.unshift(e)},A=e=>{const t=d.value.findIndex(t=>t.id===e.id);t>-1&&(d.value[t]={...d.value[t],...e})},N=e=>{d.value=d.value.filter(t=>t.id!==e)},V=()=>{location.reload()};return(e,n)=>($(),q(ix,null,{default:j(()=>[r(px,{app:"",color:"white",elevation:"0",class:"minimal-header",height:"64"},Z({default:j(()=>[l("div",Px,[l("div",Rx,[r(ub,{icon:"mdi-dragon",size:"28",class:"mr-3",color:"primary"}),r(ox,{class:"text-h5 font-weight-medium text-primary"},{default:j(()=>n[3]||(n[3]=[z(" キャラクター管理 ",-1)])),_:1,__:[3]})]),r(pC),r(pI,{user:t.value,onLogin:I,onLogout:S,class:"mr-4"},null,8,["user"])])]),_:2},[t.value?{name:"extension",fn:j(()=>[l("div",Mx,[r(Dx,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=e=>g.value=e),"align-with-title":"",color:"primary",class:"minimal-tabs",height:"48"},{default:j(()=>[($(!0),U(_,null,Q(b.value,e=>($(),q(yx,{key:e.id,value:e.id,class:"minimal-tab"},{default:j(()=>[r(ub,{icon:e.icon,class:"mr-2",size:"20"},null,8,["icon"]),z(" "+P(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),key:"0"}:void 0]),1024),r(vx,null,{default:j(()=>[r($S,{class:"pa-6 main-container"},{default:j(()=>[t.value?($(),U("div",Ox,[r(mS,{accounts:i.value,modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=e=>y.value=e),visible:w.value,class:"mb-6 minimal-account-selector"},null,8,["accounts","modelValue","visible"]),a.value?($(),q(Cx,{key:0,modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=e=>g.value=e),class:"minimal-window"},{default:j(()=>[r(Tx,{value:"view-all",key:"view-all"},{default:j(()=>[r(nE,{"data-loaded":a.value,accounts:i.value,"character-masters":s.value,"item-masters":u.value,"gacha-masters":c.value,"owned-count-map":p.value,"owned-characters-data":v.value,"item-masters-map":h.value,"character-masters-map":m.value,onItemsUpdated:E},null,8,["data-loaded","accounts","character-masters","item-masters","gacha-masters","owned-count-map","owned-characters-data","item-masters-map","character-masters-map"])]),_:1}),r(Tx,{value:"add-owned",key:"add-owned"},{default:j(()=>[r(fE,{"character-masters":s.value,"character-masters-map":m.value,"selected-account-id":y.value,"owned-count-map":p.value,onCharacterAdded:k},null,8,["character-masters","character-masters-map","selected-account-id","owned-count-map"])]),_:1}),r(Tx,{value:"manage-items",key:"manage-items"},{default:j(()=>[r(NE,{"selected-account-id":y.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters":u.value,"item-masters-map":h.value,onItemsUpdated:E,onItemsMoved:x},null,8,["selected-account-id","owned-characters-data","character-masters-map","item-masters","item-masters-map"])]),_:1}),r(Tx,{value:"manage-teams",key:"manage-teams"},{default:j(()=>[r(XE,{"user-id":t.value.uid,"data-loaded":a.value,teams:d.value,accounts:i.value,"owned-characters-data":v.value,"character-masters-map":m.value,"item-masters-map":h.value,onTeamAdded:T,onTeamUpdated:A,onTeamDeleted:N},null,8,["user-id","data-loaded","teams","accounts","owned-characters-data","character-masters-map","item-masters-map"])]),_:1}),r(Tx,{value:"add-master",key:"add-master"},{default:j(()=>[r(ex,{"gacha-masters":c.value,onMasterAdded:V},null,8,["gacha-masters"])]),_:1}),r(Tx,{value:"edit-master",key:"edit-master"},{default:j(()=>[r(ax,{"character-masters":s.value,"gacha-masters":c.value,onMasterUpdated:V},null,8,["character-masters","gacha-masters"])]),_:1})]),_:1},8,["modelValue"])):($(),U("div",Lx,[r(Gb,{indeterminate:"",color:"primary",size:"64",width:"4",class:"mb-6"}),n[4]||(n[4]=l("p",{class:"text-body-1 text-grey-darken-1"}," データを読み込んでいます... ",-1))]))])):($(),U("div",Fx,[r(ub,{icon:"mdi-dragon",size:"80",color:"primary",class:"mb-6"}),n[6]||(n[6]=l("h1",{class:"text-h4 font-weight-medium text-primary mb-4"}," キャラクター管理システム ",-1)),n[7]||(n[7]=l("p",{class:"text-body-1 text-grey-darken-1 mb-8"}," ログインして、あなたのキャラクターを管理しましょう ",-1)),r(Ew,{color:"primary",size:"large",variant:"outlined",class:"px-8",onClick:I},{default:j(()=>[r(ub,{icon:"mdi-login",class:"mr-2"}),n[5]||(n[5]=z(" ログイン ",-1))]),_:1,__:[5]})]))]),_:1})]),_:1})]),_:1}))}},[["__scopeId","data-v-9c7453ba"]]),Ux=zt({theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976d2",secondary:"#424242",accent:"#42a5f5",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3",surface:"#ffffff",background:"#fafafa","on-surface":"#212121","on-background":"#212121"}}}},defaults:{VCard:{variant:"outlined",elevation:0,rounded:"md"},VBtn:{variant:"outlined",rounded:"md",class:"text-none font-weight-medium"},VTextField:{variant:"outlined",density:"compact",rounded:"md"},VSelect:{variant:"outlined",density:"compact",rounded:"md"},VList:{density:"compact"},VListItem:{rounded:"sm"},VChip:{rounded:"md",variant:"outlined"},VAvatar:{rounded:"md"},VIcon:{size:"20"}}});const $x=new class{constructor(){this.markers=new Map,this.measures=new Map}startMarker(e){this.markers.set(e,performance.now()),performance.mark(`${e}-start`)}endMarker(e){const t=this.markers.get(e);if(t){const n=performance.now()-t;return performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`),this.measures.set(e,n),n}return 0}getMeasure(e){return this.measures.get(e)}getAllMeasures(){return Object.fromEntries(this.measures)}clear(){this.markers.clear(),this.measures.clear()}};$x.startMarker("app-init");const jx=te(Bx);jx.use(Ux),((e={})=>{const{loadTime:t=3e3,memoryUsage:n=50}=e;window.addEventListener("load",()=>{performance.now();e.loadTime}),"memory"in performance&&setInterval(()=>{const t=performance.memory;t.usedJSHeapSize,t.jsHeapSizeLimit;e.memoryUsage},1e4)})({loadTime:2e3,memoryUsage:60}),jx.mount("#app"),$x.endMarker("app-init");export{nv as P,Mv as R,om as W,Xf as _,Zf as a,Lv as b,em as c,Zv as d,jy as g,Na as i,Jf as m,nm as p,Uv as x,tm as y};
